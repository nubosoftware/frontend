"use strict";(self["webpackChunknubo_admin"]=self["webpackChunknubo_admin"]||[]).push([[981],{71557:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[a("v-text-field",{attrs:{label:t.$t("Platform ID"),readonly:!0},model:{value:t.platID,callback:function(e){t.platID=e},expression:"platID"}})],1),a("v-container",[""!=t.details.platform_type?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Static IP")},model:{value:t.staticIP,callback:function(e){t.staticIP=e},expression:"staticIP"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("VM Name")},model:{value:t.vmName,callback:function(e){t.vmName=e},expression:"vmName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:t.saveStaticParams}},[t._v(" "+t._s(t.$t("Save"))+" ")])],1)],1):t._e(),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Status"),readonly:!0},model:{value:t.details.platform_status,callback:function(e){t.$set(t.details,"platform_status",e)},expression:"details.platform_status"}})],1),t.details.startTime?a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Up Time"),readonly:!0},model:{value:t.details.uptime,callback:function(e){t.$set(t.details,"uptime",e)},expression:"details.uptime"}})],1):t._e(),t.details.startTime?a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Start Time"),readonly:!0},model:{value:t.details.startTime,callback:function(e){t.$set(t.details,"startTime",e)},expression:"details.startTime"}})],1):t._e(),t.details.startTime?a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("IP Address"),readonly:!0},model:{value:t.details.platform_ip,callback:function(e){t.$set(t.details,"platform_ip",e)},expression:"details.platform_ip"}})],1):t._e()],1),t.details.startTime?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Last Check Time"),readonly:!0},model:{value:t.details.lastCheckTime,callback:function(e){t.$set(t.details,"lastCheckTime",e)},expression:"details.lastCheckTime"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Last Check Status"),readonly:!0},model:{value:t.details.lastCheckStatus,callback:function(e){t.$set(t.details,"lastCheckStatus",e)},expression:"details.lastCheckStatus"}})],1)],1):t._e(),t.details.startTime?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("CPU Load"),readonly:!0},model:{value:t.details.currentLoad,callback:function(e){t.$set(t.details,"currentLoad",e)},expression:"details.currentLoad"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Total Memory"),readonly:!0},model:{value:t.details.memTotal,callback:function(e){t.$set(t.details,"memTotal",e)},expression:"details.memTotal"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Active Memory"),readonly:!0},model:{value:t.details.memActive,callback:function(e){t.$set(t.details,"memActive",e)},expression:"details.memActive"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Available Memory"),readonly:!0},model:{value:t.details.memAvailable,callback:function(e){t.$set(t.details,"memAvailable",e)},expression:"details.memAvailable"}})],1)],1):t._e(),t.details.startTime?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Created Sessions"),readonly:!0},model:{value:t.details.created_sessions_cnt,callback:function(e){t.$set(t.details,"created_sessions_cnt",e)},expression:"details.created_sessions_cnt"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Current Sessions"),readonly:!0},model:{value:t.rows.length,callback:function(e){t.$set(t.rows,"length",e)},expression:"rows.length"}})],1)],1):t._e()],1),t.rows.length>0?a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.headers,items:t.rows,"items-per-page":100,loading:t.loading},scopedSlots:t._u([{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.killSession(s,e)}}},[t._v(" mdi-stop ")])]}}],null,!0)}):t._e(),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[a("v-btn",t._b({attrs:{color:"primary",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",s,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},l=[],i=(a(47042),a(56977),a(41539),a(92222),a(13888)),o=a(23144),r=a(30381),n=function(t){return"string"!==typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)},c={name:"Group",data:function(){return{headers:[],rows:[],platID:"",search:"",totalItems:0,loading:!0,staticIP:"",vmName:"",options:{},details:{},appData:i.Z,refreshTimeout:null,snackbarSave:!1,snackbarText:""}},methods:{printMem:function(t){if(isNaN(t))return"";var e=t/1024;if(e<1)return"".concat(t," bytes");var a=e/1024;if(a<1)return"".concat(e.toFixed(1)," kb");var s=a/1024;return s<1?"".concat(a.toFixed(1)," mb"):"".concat(s.toFixed(1)," gb")},saveStaticParams:function(){var t=this;o.Z.post({url:"api/platforms/"+encodeURIComponent(this.platID),data:{ip:this.staticIP,vmname:this.vmName}}).then((function(e){console.log(e.data),1==e.data.status?(console.log("Success"),t.snackbarText=t.$t("Static Parameters Saved"),t.snackbarSave=!0,t.loadDetails()):(console.log("status: ".concat(e.data.status)),t.snackbarText=t.$t("Error"),t.snackbarSave=!0),t.refresh()})).catch((function(t){return console.log(t)})).finally((function(){return t.loading=!1}))},killSession:function(t,e){var a=this;e.stopPropagation(),o.Z.post({url:"api/devices/".concat(encodeURIComponent(t.email),"/").concat(encodeURIComponent(t.imei)),data:{action:"endSession"}}).then((function(t){console.log(t.data),1==t.data.status?(console.log("Success"),a.snackbarText=a.$t("Session closed"),a.snackbarSave=!0,a.loadDetails()):(console.log("status: ".concat(t.data.status)),a.snackbarText=a.$t("Error"),a.snackbarSave=!0),a.refresh()})).catch((function(t){return console.log(t)})).finally((function(){return a.loading=!1}))},refresh:function(){var t=this;console.log("platID: ".concat(this.platID)),this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null);var e=!this.details.platform_type;o.Z.get({url:"api/platforms/"+encodeURIComponent(this.platID)}).then((function(a){console.log(a.data),1==a.data.status?(t.rows=a.data.sessions,t.details=a.data,t.details.params&&(t.details.params.startTime&&(t.details.uptime=r(t.details.params.startTime).fromNow(),t.details.startTime=r(t.details.params.startTime).format("LLL")),isNaN(t.details.params.currentLoad)?t.details.currentLoad="":t.details.currentLoad="".concat((1*t.details.params.currentLoad).toFixed(1),"%"),t.details.memTotal=t.printMem(t.details.params.memTotal),t.details.memAvailable=t.printMem(t.details.params.memAvailable),t.details.memActive=t.printMem(t.details.params.memActive),t.details.lastCheckTime=t.details.params.lastCheckTime?r(t.details.params.lastCheckTime).format("LLL"):"",t.details.lastCheckStatus=t.details.params.lastCheckStatus?t.details.params.lastCheckStatus.toUpperCase():"",""!=t.details.platform_type&&e&&(t.staticIP=t.details.params.ip,t.vmName=t.details.params.vmname)),t.details.platform_status=n(t.details.platform_status),t.refreshTimeout=setTimeout(t.refresh,1e4)):(console.log("status: ".concat(a.data.status)),t.$router.push("/Login"))})).catch((function(t){return console.log(t)})).finally((function(){return t.loading=!1}))},updatePageHead:function(){var t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Platforms"),to:"/Platforms",disabled:!1},{text:this.platID,to:"/Platform/"+this.platID,disabled:!1}];this.$emit("updatePage",t)}},created:function(){this.platID=this.$route.params.platID,this.updatePageHead(),this.headers=[{text:this.$t("First Name"),value:"user.firstname"},{text:this.$t("Last Name"),value:"user.lastname"},{text:this.$t("Email"),value:"email"},{text:this.$t("Device ID"),value:"imei"},{text:this.$t("Device Name"),value:"devicename"},{text:"Actions",value:"actions",sortable:!1}],this.refresh()},beforeDestroy:function(){console.log("lifecycle: beforeDestroy"),this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null)}},m=c,d=m,u=a(1001),v=a(43453),p=a.n(v),f=a(63150),h=a(32371),b=a(37118),k=a(82102),x=a(4228),T=a(76277),$=a(96428),_=a(62877),S=a(13202),g=a(55978),C=(0,u.Z)(d,s,l,!1,null,null,null),y=C.exports;p()(C,{VBtn:f.Z,VCard:h.Z,VCardTitle:b.EB,VCol:k.Z,VContainer:x.Z,VDataTable:T.Z,VIcon:$.Z,VRow:_.Z,VSnackbar:S.Z,VTextField:g.Z})}}]);
//# sourceMappingURL=981-legacy.9b0f2894.js.map