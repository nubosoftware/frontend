"use strict";(self["webpackChunknubo_admin"]=self["webpackChunknubo_admin"]||[]).push([[981],{1557:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[a("v-text-field",{attrs:{label:t.$t("Platform ID"),readonly:!0},model:{value:t.platID,callback:function(e){t.platID=e},expression:"platID"}})],1),a("v-container",[""!=t.details.platform_type?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Static IP")},model:{value:t.staticIP,callback:function(e){t.staticIP=e},expression:"staticIP"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("VM Name")},model:{value:t.vmName,callback:function(e){t.vmName=e},expression:"vmName"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:t.saveStaticParams}},[t._v(" "+t._s(t.$t("Save"))+" ")])],1)],1):t._e(),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Status"),readonly:!0},model:{value:t.details.platform_status,callback:function(e){t.$set(t.details,"platform_status",e)},expression:"details.platform_status"}})],1),t.details.startTime?a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Up Time"),readonly:!0},model:{value:t.details.uptime,callback:function(e){t.$set(t.details,"uptime",e)},expression:"details.uptime"}})],1):t._e(),t.details.startTime?a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Start Time"),readonly:!0},model:{value:t.details.startTime,callback:function(e){t.$set(t.details,"startTime",e)},expression:"details.startTime"}})],1):t._e(),t.details.startTime?a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("IP Address"),readonly:!0},model:{value:t.details.platform_ip,callback:function(e){t.$set(t.details,"platform_ip",e)},expression:"details.platform_ip"}})],1):t._e()],1),t.details.startTime?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Last Check Time"),readonly:!0},model:{value:t.details.lastCheckTime,callback:function(e){t.$set(t.details,"lastCheckTime",e)},expression:"details.lastCheckTime"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Last Check Status"),readonly:!0},model:{value:t.details.lastCheckStatus,callback:function(e){t.$set(t.details,"lastCheckStatus",e)},expression:"details.lastCheckStatus"}})],1)],1):t._e(),t.details.startTime?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("CPU Load"),readonly:!0},model:{value:t.details.currentLoad,callback:function(e){t.$set(t.details,"currentLoad",e)},expression:"details.currentLoad"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Total Memory"),readonly:!0},model:{value:t.details.memTotal,callback:function(e){t.$set(t.details,"memTotal",e)},expression:"details.memTotal"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Active Memory"),readonly:!0},model:{value:t.details.memActive,callback:function(e){t.$set(t.details,"memActive",e)},expression:"details.memActive"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Available Memory"),readonly:!0},model:{value:t.details.memAvailable,callback:function(e){t.$set(t.details,"memAvailable",e)},expression:"details.memAvailable"}})],1)],1):t._e(),t.details.startTime?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Created Sessions"),readonly:!0},model:{value:t.details.created_sessions_cnt,callback:function(e){t.$set(t.details,"created_sessions_cnt",e)},expression:"details.created_sessions_cnt"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Current Sessions"),readonly:!0},model:{value:t.rows.length,callback:function(e){t.$set(t.rows,"length",e)},expression:"rows.length"}})],1)],1):t._e()],1),t.rows.length>0?a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.headers,items:t.rows,"items-per-page":100,loading:t.loading},scopedSlots:t._u([{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.killSession(s,e)}}},[t._v(" mdi-stop ")])]}}],null,!0)}):t._e(),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[a("v-btn",t._b({attrs:{color:"primary",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",s,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},l=[],i=a(3888),o=a(3144);const r=a(381),n=t=>"string"!==typeof t?"":t.charAt(0).toUpperCase()+t.slice(1);let c={name:"Group",data:()=>({headers:[],rows:[],platID:"",search:"",totalItems:0,loading:!0,staticIP:"",vmName:"",options:{},details:{},appData:i.Z,refreshTimeout:null,snackbarSave:!1,snackbarText:""}),methods:{printMem:function(t){if(isNaN(t))return"";const e=t/1024;if(e<1)return`${t} bytes`;const a=e/1024;if(a<1)return`${e.toFixed(1)} kb`;const s=a/1024;return s<1?`${a.toFixed(1)} mb`:`${s.toFixed(1)} gb`},saveStaticParams:function(){o.Z.post({url:"api/platforms/"+encodeURIComponent(this.platID),data:{ip:this.staticIP,vmname:this.vmName}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.snackbarText=this.$t("Static Parameters Saved"),this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0),this.refresh()})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},killSession:function(t,e){e.stopPropagation(),o.Z.post({url:`api/devices/${encodeURIComponent(t.email)}/${encodeURIComponent(t.imei)}`,data:{action:"endSession"}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.snackbarText=this.$t("Session closed"),this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0),this.refresh()})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refresh:function(){console.log(`platID: ${this.platID}`),this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null);const t=!this.details.platform_type;o.Z.get({url:"api/platforms/"+encodeURIComponent(this.platID)}).then((e=>{console.log(e.data),1==e.data.status?(this.rows=e.data.sessions,this.details=e.data,this.details.params&&(this.details.params.startTime&&(this.details.uptime=r(this.details.params.startTime).fromNow(),this.details.startTime=r(this.details.params.startTime).format("LLL")),isNaN(this.details.params.currentLoad)?this.details.currentLoad="":this.details.currentLoad=`${(1*this.details.params.currentLoad).toFixed(1)}%`,this.details.memTotal=this.printMem(this.details.params.memTotal),this.details.memAvailable=this.printMem(this.details.params.memAvailable),this.details.memActive=this.printMem(this.details.params.memActive),this.details.lastCheckTime=this.details.params.lastCheckTime?r(this.details.params.lastCheckTime).format("LLL"):"",this.details.lastCheckStatus=this.details.params.lastCheckStatus?this.details.params.lastCheckStatus.toUpperCase():"",""!=this.details.platform_type&&t&&(this.staticIP=this.details.params.ip,this.vmName=this.details.params.vmname)),this.details.platform_status=n(this.details.platform_status),this.refreshTimeout=setTimeout(this.refresh,1e4)):(console.log(`status: ${e.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},updatePageHead:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Platforms"),to:"/Platforms",disabled:!1},{text:this.platID,to:"/Platform/"+this.platID,disabled:!1}];this.$emit("updatePage",t)}},created:function(){this.platID=this.$route.params.platID,this.updatePageHead(),this.headers=[{text:this.$t("First Name"),value:"user.firstname"},{text:this.$t("Last Name"),value:"user.lastname"},{text:this.$t("Email"),value:"email"},{text:this.$t("Device ID"),value:"imei"},{text:this.$t("Device Name"),value:"devicename"},{text:"Actions",value:"actions",sortable:!1}],this.refresh()},beforeDestroy:function(){console.log("lifecycle: beforeDestroy"),this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null)}};var m=c,d=m,u=a(1001),h=a(3453),v=a.n(h),p=a(3150),f=a(2371),b=a(7118),k=a(2102),$=a(4228),x=a(4998),T=a(6428),_=a(2877),S=a(3202),g=a(5978),C=(0,u.Z)(d,s,l,!1,null,null,null),y=C.exports;v()(C,{VBtn:p.Z,VCard:f.Z,VCardTitle:b.EB,VCol:k.Z,VContainer:$.Z,VDataTable:x.Z,VIcon:T.Z,VRow:_.Z,VSnackbar:S.Z,VTextField:g.Z})}}]);
//# sourceMappingURL=981.e97dfb2c.js.map