(self["webpackChunknubo_admin"]=self["webpackChunknubo_admin"]||[]).push([[443],{8755:function(t,e,a){
/*!
 * artplayer.js v4.3.7
 * Github: https://github.com/zhw2590582/ArtPlayer#readme
 * (c) 2017-2022 Harvey Zack
 * Released under the MIT License.
 */
!function(e,a){t.exports=a()}(0,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function l(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}!function(t,e){void 0===e&&(e={});var a=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===a&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}('.art-video-player{zoom:1;-webkit-tap-highlight-color:rgba(0,0,0,0);-ms-high-contrast-adjust:none;background-color:#000;color:#eee;direction:ltr;display:flex;font-family:Roboto,Arial,Helvetica,sans-serif;font-size:14px;height:100%;line-height:1.3;margin:0 auto;outline:0;position:relative;text-align:left;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;z-index:20}.art-video-player *{box-sizing:border-box;margin:0;padding:0}.art-video-player ::-webkit-scrollbar{height:5px;width:5px}.art-video-player ::-webkit-scrollbar-thumb{background-color:#666}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:#ccc}.art-video-player .art-icon{align-items:center;display:inline-flex;justify-content:center;line-height:1.5}.art-video-player .art-icon svg{fill:#fff}.art-video-player img{max-width:100%;vertical-align:top}@supports ((-webkit-backdrop-filter:initial) or (backdrop-filter:initial)){.art-video-player .art-backdrop-filter{-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);background-color:rgba(0,0,0,.7)!important}}.art-video-player .art-video{background-color:#000;cursor:pointer;z-index:10}.art-video-player .art-poster,.art-video-player .art-video{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%}.art-video-player .art-poster{background-position:50%;background-repeat:no-repeat;background-size:cover;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:11}.art-video-player .art-subtitle{bottom:10px;color:#fff;display:none;font-size:20px;padding:0 20px;pointer-events:none;position:absolute;text-align:center;text-shadow:.5px .5px .5px rgba(0,0,0,.5);width:100%;z-index:20}.art-video-player .art-subtitle p{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;line-height:1.2;margin:5px 0 0;word-break:break-all}.art-video-player.art-subtitle-show .art-subtitle{display:block}.art-video-player.art-control-show .art-subtitle{bottom:50px}.art-video-player .art-danmuku{z-index:30}.art-video-player .art-danmuku,.art-video-player .art-layers{bottom:0;height:100%;left:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0;width:100%}.art-video-player .art-layers{display:none;z-index:40}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:block}.art-video-player .art-mask{align-items:center;bottom:0;display:none;height:100%;justify-content:center;left:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0;width:100%;z-index:50}.art-video-player .art-mask .art-state{align-items:center;bottom:65px;cursor:pointer;display:flex;height:60px;justify-content:center;opacity:.85;pointer-events:all;position:absolute;right:30px;width:60px}.art-video-player.art-mask-show .art-mask{display:flex}.art-video-player.art-mobile .art-state{position:static}.art-video-player .art-loading{align-items:center;bottom:0;display:none;height:100%;justify-content:center;left:0;pointer-events:none;position:absolute;right:0;top:0;width:100%;z-index:70}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;bottom:0;display:flex;flex-direction:column;height:100px;justify-content:space-between;left:0;opacity:0;padding:50px 10px 0;pointer-events:none;position:absolute;right:0;transition:all .2s ease-in-out;visibility:hidden;z-index:60}.art-video-player .art-bottom .art-progress{pointer-events:auto;position:relative;z-index:0}.art-video-player .art-bottom .art-progress .art-control-progress{align-items:center;cursor:pointer;display:flex;flex-direction:row;height:4px;position:relative}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner{align-items:center;background:hsla(0,0%,100%,.2);display:flex;height:50%;position:relative;width:100%}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{background:hsla(0,0%,100%,.4);bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:0;z-index:10}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:0;z-index:20}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{bottom:0;height:100%;left:0;pointer-events:none;position:absolute;right:0;top:0;z-index:30}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{background:#fff;display:inline-block;height:100%;left:0;pointer-events:auto;position:absolute;top:0;width:7px}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{align-items:center;border-radius:50%;justify-content:center;position:absolute;transform:scale(.1);transition:transform .1s ease-in-out;visibility:hidden;z-index:40}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{background:rgba(0,0,0,.7);border-radius:3px;color:#fff;display:none;font-size:12px;font-weight:700;height:20px;left:0;line-height:20px;padding:0 5px;position:absolute;text-align:center;top:-25px;white-space:nowrap;z-index:50}.art-video-player .art-bottom .art-progress .art-control-thumbnails{background-color:rgba(0,0,0,.7);bottom:8px;display:none;left:0;pointer-events:none;position:absolute}.art-video-player .art-bottom .art-progress .art-control-loop{bottom:0;display:none;height:100%;left:0;pointer-events:none;position:absolute;right:0;top:0;width:100%}.art-video-player .art-bottom .art-progress .art-control-loop .art-loop-point{background:hsla(0,0%,100%,.75);height:8px;left:0;position:absolute;top:-2px;width:2px}.art-video-player .art-bottom .art-controls{align-items:center;display:flex;height:45px;justify-content:space-between;pointer-events:auto;position:relative;z-index:1}.art-video-player .art-bottom .art-controls .art-controls-left,.art-video-player .art-bottom .art-controls .art-controls-right{display:flex}.art-video-player .art-bottom .art-controls .art-control{align-items:center;cursor:pointer;display:flex;font-size:12px;line-height:1;min-height:36px;min-width:36px;opacity:.9;text-align:center;white-space:nowrap}.art-video-player .art-bottom .art-controls .art-control .art-icon{align-items:center;display:flex;float:left;height:36px;justify-content:center;width:36px}.art-video-player .art-bottom .art-controls .art-control:hover{opacity:1}.art-video-player .art-bottom .art-controls .art-control-onlyText{padding:0 10px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel{float:left;height:100%;overflow:hidden;position:relative;transition:margin .2s cubic-bezier(.4,0,1,1),width .2s cubic-bezier(.4,0,1,1);width:0}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle{background:#fff;border-radius:12px;height:12px;left:0;margin-top:-6px;position:absolute;top:50%;width:12px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:before{background:#fff;left:-54px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:after{background:hsla(0,0%,100%,.2);left:6px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:after,.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:before{content:"";display:block;height:3px;margin-top:-2px;position:absolute;top:50%;width:60px}.art-video-player .art-bottom .art-controls .art-control-volume:hover .art-volume-panel{width:60px}.art-video-player .art-bottom .art-controls .art-control-quality{position:relative;z-index:30}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys{background:rgba(0,0,0,.8);border-radius:3px;bottom:35px;color:#fff;display:none;padding:5px 0;position:absolute;text-align:center;width:100px}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys .art-quality-item{height:30px;line-height:30px;overflow:hidden;text-overflow:ellipsis;text-shadow:0 0 2px rgba(0,0,0,.5);white-space:nowrap}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys .art-quality-item:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-bottom .art-controls .art-control-quality:hover .art-qualitys{display:block}.art-video-player .art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner{height:100%}.art-video-player .art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1);visibility:visible}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1;visibility:visible}.art-video-player.art-destroy .art-progress-indicator,.art-video-player.art-destroy .art-progress-tip,.art-video-player.art-error .art-progress-indicator,.art-video-player.art-error .art-progress-tip{display:none!important}.art-video-player.art-mobile .art-progress-indicator{transform:scale(1)!important;visibility:visible!important}.art-video-player .art-notice{display:none;font-size:14px;left:0;padding:10px;pointer-events:none;position:absolute;top:0;width:100%;z-index:80}.art-video-player .art-notice .art-notice-inner{background-color:rgba(0,0,0,.6);border-radius:3px;color:#fff;display:inline-block;padding:5px 10px}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{background-color:rgba(0,0,0,.9);border-radius:3px;display:none;flex-direction:column;left:10px;min-width:200px;padding:5px 0;position:absolute;top:10px;z-index:120}.art-video-player .art-contextmenus .art-contextmenu{border-bottom:1px solid hsla(0,0%,100%,.1);color:#fff;cursor:pointer;display:block;font-size:12px;overflow:hidden;padding:10px 15px;text-overflow:ellipsis;text-shadow:0 0 2px rgba(0,0,0,.5);white-space:nowrap}.art-video-player .art-contextmenus .art-contextmenu a{color:#fff;text-decoration:none}.art-video-player .art-contextmenus .art-contextmenu span{display:inline-block;padding:0 7px}.art-video-player .art-contextmenus .art-contextmenu span.art-current,.art-video-player .art-contextmenus .art-contextmenu span:hover{color:#00c9ff}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{background-color:rgba(0,0,0,.9);border-radius:3px;bottom:50px;display:none;font-size:13px;max-height:300px;overflow:auto;position:absolute;right:10px;transition:all .2s ease;z-index:90}.art-video-player .art-settings .art-setting-panel{display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:block}.art-video-player .art-settings .art-setting-panel .art-setting-item{align-items:center;color:hsla(0,0%,100%,.8);cursor:pointer;display:flex;height:35px;justify-content:space-between;line-height:1;overflow:hidden;padding:0 5px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current,.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:hsla(0,0%,100%,.1);color:#fff}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon{align-items:center;display:flex;height:30px;justify-content:center;width:30px}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{height:15px;visibility:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{align-items:center;display:flex;white-space:nowrap}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{align-items:center;display:flex;height:24px;justify-content:center;margin-right:10px;width:24px}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{color:hsla(0,0%,100%,.5);font-size:12px;white-space:nowrap}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{align-items:center;display:flex;height:24px;justify-content:center;width:24px}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid hsla(0,0%,100%,.1)}.art-video-player.art-setting-show .art-settings{display:block}.art-video-player.art-mobile .art-settings{max-height:200px;transform:scale(.9);transform-origin:right bottom}.art-video-player .art-info{-webkit-font-smoothing:antialiased;background-color:rgba(0,0,0,.9);color:#fff;display:none;flex-direction:column;font-family:Noto Sans CJK SC DemiLight,Roboto,Segoe UI,Tahoma,Arial,Helvetica,sans-serif;font-size:12px;left:10px;padding:10px;position:absolute;top:10px;width:350px;z-index:100}.art-video-player .art-info .art-info-item{display:flex;margin-bottom:5px}.art-video-player .art-info .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-item .art-info-content{flex:1;overflow:hidden;padding-left:5px;text-overflow:ellipsis;white-space:nowrap}.art-video-player .art-info .art-info-item:last-child{margin-bottom:0}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;right:5px;top:5px}.art-video-player.art-info-show .art-info{display:flex}.art-video-player.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio] video{box-sizing:content-box;-o-object-fit:fill;object-fit:fill}.art-video-player.art-fullscreen-web{bottom:0;height:100%!important;left:0;position:fixed;right:0;top:0;width:100%!important;z-index:9999}.art-fullscreen-rotate{background-color:#000;bottom:0;height:100%;left:0;position:fixed;right:0;top:0;width:100%;z-index:9999}.art-video-player .art-mini-header{align-items:center;background-color:rgba(0,0,0,.5);color:#fff;display:none;height:35px;justify-content:space-between;left:0;line-height:35px;opacity:0;position:absolute;right:0;top:0;transition:all .2s ease-in-out;visibility:hidden;z-index:110}.art-video-player .art-mini-header .art-mini-title{cursor:move;flex:1;overflow:hidden;padding:0 10px;text-overflow:ellipsis;white-space:nowrap}.art-video-player .art-mini-header .art-mini-close{cursor:pointer;font-size:22px;text-align:center;width:35px}.art-video-player.art-is-dragging{opacity:.7}.art-video-player.art-mini{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 3px 6px 0 rgba(0,0,0,.2);height:225px;position:fixed;width:400px;z-index:9999}.art-video-player.art-mini .art-mini-header{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.art-video-player.art-mini.art-hover .art-mini-header{opacity:1;visibility:visible}.art-video-player.art-mini .art-mask .art-state{position:static}.art-video-player.art-mini .art-bottom,.art-video-player.art-mini .art-contextmenu,.art-video-player.art-mini .art-danmu,.art-video-player.art-mini .art-info,.art-video-player.art-mini .art-layers,.art-video-player.art-mini .art-notice,.art-video-player.art-mini .art-setting,.art-video-player.art-mini .art-subtitle{display:none!important}.art-auto-size{align-items:center;display:flex;justify-content:center}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{align-items:center;background-color:rgba(0,0,0,.5);border-radius:50%;color:#fff;display:none;height:34px;justify-content:center;left:15px;position:absolute;top:calc(50% - 17px);width:34px}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-video-player.art-lock .art-bottom{display:none!important}.art-video-player.art-lock .art-subtitle{bottom:10px!important}.art-video-player .art-control-selector{position:relative}.art-video-player .art-control-selector .art-selector-list{background-color:rgba(0,0,0,.8);border-radius:3px;bottom:35px;color:#fff;display:none;max-height:200px;max-width:200px;min-width:100px;overflow:auto;padding:5px 0;position:absolute;text-align:center}.art-video-player .art-control-selector .art-selector-list .art-selector-item{height:30px;line-height:30px;overflow:hidden;padding:0 5px;text-overflow:ellipsis;text-shadow:0 0 2px rgba(0,0,0,.5);white-space:nowrap}.art-video-player .art-control-selector .art-selector-list .art-selector-item:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-control-selector .art-selector-list .art-selector-item.art-current,.art-video-player .art-control-selector .art-selector-list .art-selector-item:hover{color:#00c9ff}.art-video-player .art-control-selector:hover .art-selector-list{display:block}:root{--balloon-color:hsla(0,0%,6%,.95);--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{cursor:pointer;position:relative}[aria-label][data-balloon-pos]:after{background:var(--balloon-color);border-radius:2px;color:#fff;content:attr(aria-label);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:var(--balloon-font-size);font-style:normal;font-weight:400;line-height:1.2;padding:.5em 1em;text-indent:0;text-shadow:none;white-space:nowrap}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;position:absolute;transition:all .18s ease-out .18s;z-index:10}[aria-label][data-balloon-pos]:before{border:5px solid transparent;border-top:5px solid var(--balloon-color);content:"";height:0;width:0}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos][data-balloon-pos=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{bottom:100%;left:50%;transform:translate(-50%,var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before{transform:translate(-50%)}'),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof a.g?a.g:"undefined"!=typeof self&&self;var d={exports:{}};!function(t,e){t.exports=function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e=Object.prototype.toString,a=function(a){if(void 0===a)return"undefined";if(null===a)return"null";var s=t(a);if("boolean"===s)return"boolean";if("string"===s)return"string";if("number"===s)return"number";if("symbol"===s)return"symbol";if("function"===s)return function(t){return"GeneratorFunction"===i(t)}(a)?"generatorfunction":"function";if(function(t){return Array.isArray?Array.isArray(t):t instanceof Array}(a))return"array";if(function(t){return!(!t.constructor||"function"!=typeof t.constructor.isBuffer)&&t.constructor.isBuffer(t)}(a))return"buffer";if(function(t){try{if("number"==typeof t.length&&"function"==typeof t.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}(a))return"arguments";if(function(t){return t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate}(a))return"date";if(function(t){return t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit}(a))return"error";if(function(t){return t instanceof RegExp||"string"==typeof t.flags&&"boolean"==typeof t.ignoreCase&&"boolean"==typeof t.multiline&&"boolean"==typeof t.global}(a))return"regexp";switch(i(a)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(t){return"function"==typeof t.throw&&"function"==typeof t.return&&"function"==typeof t.next}(a))return"generator";switch(s=e.call(a)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return s.slice(8,-1).toLowerCase().replace(/\s/g,"")};function i(t){return t.constructor?t.constructor.name:null}function s(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["option"];return o(t,e,i),n(t,e,i),function(t,e,i){var r=a(e),l=a(t);if("object"===r){if("object"!==l)throw new Error("[Type Error]: '".concat(i.join("."),"' require 'object' type, but got '").concat(l,"'"));Object.keys(e).forEach((function(a){var r=t[a],l=e[a],c=i.slice();c.push(a),o(r,l,c),n(r,l,c),s(r,l,c)}))}if("array"===r){if("array"!==l)throw new Error("[Type Error]: '".concat(i.join("."),"' require 'array' type, but got '").concat(l,"'"));t.forEach((function(a,r){var l=t[r],c=e[r]||e[0],d=i.slice();d.push(r),o(l,c,d),n(l,c,d),s(l,c,d)}))}}(t,e,i),t}function o(t,e,i){if("string"===a(e)){var s=a(t);if("?"===e[0]&&(e=e.slice(1)+"|undefined"),!(-1<e.indexOf("|")?e.split("|").map((function(t){return t.toLowerCase().trim()})).filter(Boolean).some((function(t){return s===t})):e.toLowerCase().trim()===s))throw new Error("[Type Error]: '".concat(i.join("."),"' require '").concat(e,"' type, but got '").concat(s,"'"))}}function n(t,e,i){if("function"===a(e)){var s=e(t,a(t),i);if(!0!==s){var o=a(s);throw"string"===o?new Error(s):"error"===o?s:new Error("[Validator Error]: The scheme for '".concat(i.join("."),"' validator require return true, but got '").concat(s,"'"))}}}return s.kindOf=a,s}()}(d);var u=d.exports,h=function(){function e(){t(this,e)}return i(e,[{key:"on",value:function(t,e,a){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:a}),this}},{key:"once",value:function(t,e,a){var i=this;function s(){i.off(t,s);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];e.apply(a,n)}return s._=e,this.on(t,s,a)}},{key:"emit",value:function(t){for(var e=((this.e||(this.e={}))[t]||[]).slice(),a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];for(var o=0;o<e.length;o+=1)e[o].fn.apply(e[o].ctx,i);return this}},{key:"off",value:function(t,e){var a=this.e||(this.e={}),i=a[t],s=[];if(i&&e)for(var o=0,n=i.length;o<n;o+=1)i[o].fn!==e&&i[o].fn._!==e&&s.push(i[o]);return s.length?a[t]=s:delete a[t],this}}]),e}(),p="undefined"!=typeof window?window.navigator.userAgent:"",m=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(p),v=/^((?!chrome|android).)*safari/i.test(p),f=/MicroMessenger/i.test(p),g=/MSIE|Trident/i.test(p);function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return e.querySelector(t)}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(e.querySelectorAll(t))}function k(t,e){return t.classList.add(e)}function x(t,e){return t.classList.remove(e)}function w(t,e){return t.classList.contains(e)}function $(t,e){return e instanceof Element?t.appendChild(e):t.insertAdjacentHTML("beforeend",String(e)),t.lastElementChild||t.lastChild}function S(t,e,a){return t.style[e]=a,t}function D(t,e){return Object.keys(e).forEach((function(a){S(t,a,e[a])})),t}function _(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=window.getComputedStyle(t,null).getPropertyValue(e);return a?parseFloat(i):i}function C(t){return Array.from(t.parentElement.children).filter((function(e){return e!==t}))}function T(t,e){C(t).forEach((function(t){return x(t,e)})),k(t,e)}function P(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up";m||(t.setAttribute("aria-label",e),t.setAttribute("data-balloon-pos",a))}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth,o=a.top-e<=i&&a.top+a.height+e>=0,n=a.left-e<=s+e&&a.left+a.width+e>=0;return o&&n}function O(t,e){return t.composedPath&&t.composedPath().indexOf(e)>-1}function I(t,e){return e.parentNode.replaceChild(t,e),t}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Z(t,e,a){return Z=R()?Reflect.construct:function(t,e,a){var i=[null];i.push.apply(i,e);var s=new(Function.bind.apply(t,i));return a&&o(s,a.prototype),s},Z.apply(null,arguments)}function E(t){var e="function"==typeof Map?new Map:void 0;return E=function(t){if(null===t||(a=t,-1===Function.toString.call(a).indexOf("[native code]")))return t;var a;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return Z(t,arguments,c(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,t)},E(t)}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var L=function(e){n(o,e);var a=V(o);function o(e,i){var n;return t(this,o),n=a.call(this,e),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(n),i||n.constructor),n.name="ArtPlayerError",n}return i(o)}(E(Error));function N(t,e){if(!t)throw new L(e);return t}function j(t){return"WEBVTT \r\n\r\n".concat(t.replace(/{[\s\S]*?}/g,"").replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat("\r\n\r\n"))}function F(t){return URL.createObjectURL(new Blob([t],{type:"text/vtt"}))}function B(t){var e=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.split(/[:.]/).map((function(t,e,a){if(e===a.length-1){if(1===t.length)return".".concat(t,"00");if(2===t.length)return".".concat(t,"0")}else if(1===t.length)return(0===e?"0":":0")+t;return 0===e?t:e===a.length-1?".".concat(t):":".concat(t)})).join("")}return"WEBVTT\n\n".concat(t.split(/\r?\n/).map((function(t){var i=t.match(e);return i?{start:a(i[1].trim()),end:a(i[2].trim()),text:i[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((function(t){return t.trim()})).join("\n")}:null})).filter((function(t){return t})).map((function(t,e){return t?"".concat(e+1,"\n").concat(t.start," --\x3e ").concat(t.end,"\n").concat(t.text):""})).filter((function(t){return t.trim()})).join("\n\n"))}function M(t){return t.includes("?")?M(t.split("?")[0]):t.includes("#")?M(t.split("#")[0]):t.trim().toLowerCase().split(".").pop()}function z(t,e){var a=document.createElement("a");a.style.display="none",a.href=t,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function H(t){return function(t){if(Array.isArray(t))return U(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return U(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?U(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=Object.defineProperty,q=Object.prototype.hasOwnProperty;function G(t,e){return q.call(t,e)}function Y(t,e){return Object.getOwnPropertyDescriptor(t,e)}function K(){for(var t=function(t){return t&&"object"===r(t)&&!Array.isArray(t)},e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return a.reduce((function(e,a){return Object.keys(a).forEach((function(i){var s=e[i],o=a[i];Array.isArray(s)&&Array.isArray(o)?e[i]=s.concat.apply(s,H(o)):!t(s)||!t(o)||o instanceof Element?e[i]=o:e[i]=K(s,o)})),e}),{})}function J(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(e){return setTimeout(e,t)}))}function X(t,e){var a,i,s=!1;return function o(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];if(s)return a=r,void(i=this);s=!0,t.apply(this,r),setTimeout((function(){s=!1,a&&(o.apply(i,a),a=null,i=null)}),e)}}function Q(t,e,a){return Math.max(Math.min(t,Math.max(e,a)),Math.min(e,a))}function tt(t){var e=Math.floor(t/3600),a=Math.floor((t-3600*e)/60),i=Math.floor(t-3600*e-60*a);return(e>0?[e,a,i]:[a,i]).map((function(t){return t<10?"0".concat(t):String(t)})).join(":")}function et(t){return t.replace(/[&<>'"]/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[t]||t}))}var at=Object.freeze({__proto__:null,query:b,queryAll:y,addClass:k,removeClass:x,hasClass:w,append:$,remove:function(t){return t.parentNode.removeChild(t)},setStyle:S,setStyles:D,getStyle:_,sublings:C,inverseClass:T,tooltip:P,isInViewport:A,includeFromEvent:O,replaceElement:I,ArtPlayerError:L,errorHandle:N,srtToVtt:j,vttToBlob:F,assToVtt:B,getExt:M,download:z,def:W,has:G,get:Y,mergeDeep:K,sleep:J,debounce:function(t,e,a){var i;function s(){for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];var r=function(){i=null,t.apply(a,o)};clearTimeout(i),i=setTimeout(r,e)}return s.clearTimeout=function(){clearTimeout(i)},s},throttle:X,clamp:Q,secondToTime:tt,escape:et,userAgent:p,isMobile:m,isSafari:v,isWechat:f,isIE:g});function it(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function st(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function ot(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?st(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var nt="boolean",rt="string",lt="number",ct="object",dt="function";function ut(t,e,a){return N(e===rt||t instanceof Element,"".concat(a.join(".")," require '").concat(rt,"' or 'Element' type"))}var ht={html:ut,disable:"?".concat(nt),name:"?".concat(rt),index:"?".concat(lt),style:"?".concat(ct),click:"?".concat(dt),mounted:"?".concat(dt),tooltip:"?".concat(rt),width:"?".concat(lt),selector:"?".concat("array"),onSelect:"?".concat(dt)},pt={container:ut,url:rt,poster:rt,title:rt,type:rt,theme:rt,lang:rt,volume:lt,isLive:nt,muted:nt,autoplay:nt,autoSize:nt,autoMini:nt,loop:nt,flip:nt,playbackRate:nt,aspectRatio:nt,screenshot:nt,setting:nt,hotkey:nt,pip:nt,mutex:nt,backdrop:nt,fullscreen:nt,fullscreenWeb:nt,subtitleOffset:nt,miniProgressBar:nt,useSSR:nt,playsInline:nt,lock:nt,ads:[{url:rt}],plugins:[dt],whitelist:["".concat(rt,"|").concat(dt,"|").concat("regexp")],layers:[ht],contextmenu:[ht],settings:[ht],controls:[ot(ot({},ht),{},{position:function(t,e,a){var i=["top","left","right"];return N(i.includes(t),"".concat(a.join(".")," only accept ").concat(i.toString()," as parameters"))}})],quality:[{default:"?".concat(nt),html:rt,url:rt}],highlight:[{time:lt,text:rt}],thumbnails:{url:rt,number:lt,column:lt},subtitle:{url:rt,type:rt,style:ct,encoding:rt},moreVideoAttr:ct,icons:ct,customType:ct},mt={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]},vt=function(){function e(a){t(this,e),this.art=a}return i(e,[{key:"state",get:function(){var t=this.art,e=t.option,a=t.constructor.kindOf;return!m||e.whitelist.some((function(t){switch(a(t)){case"string":return"*"===t||p.indexOf(t)>-1;case"function":return t(p);case"regexp":return t.test(p);default:return!1}}))}}]),e}(),ft=function(){function e(a){var i=this;t(this,e),this.art=a;var s=a.option,o=a.constructor,n=a.whitelist;s.container instanceof Element?this.$container=s.container:(this.$container=b(s.container),N(this.$container,"No container element found by ".concat(s.container)));var r=this.$container.tagName.toLowerCase();N("div"===r,"Unsupported container element type, only support 'div' but got '".concat(r,"'")),N(o.instances.every((function(t){return t.template.$container!==i.$container})),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=a.id,this.$original=this.$container.cloneNode(!0),n.state?this.desktop():this.mobile()}return i(e,[{key:"query",value:function(t){return b(t,this.$container)}},{key:"desktop",value:function(){var t=this.art.option;t.useSSR||(this.$container.innerHTML=e.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$miniHeader=this.query(".art-mini-header"),this.$miniTitle=this.query(".art-mini-title"),this.$miniClose=this.query(".art-mini-close"),this.$contextmenu=this.query(".art-contextmenus"),t.backdrop&&(k(this.$setting,"art-backdrop-filter"),k(this.$contextmenu,"art-backdrop-filter"),k(this.$info,"art-backdrop-filter")),m&&k(this.$player,"art-mobile")}},{key:"mobile",value:function(){this.$container.innerHTML='<div class="art-video-player"><video class="art-video"></video></div>',this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video")}},{key:"destroy",value:function(t){t?I(this.$original,this.$container):k(this.$player,"art-destroy")}}],[{key:"html",get:function(){return'<div class="art-video-player art-subtitle-show art-layer-show"><video class="art-video"></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">4.3.7</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span> x <span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-mini-header"><div class="art-mini-title"></div><div class="art-mini-close">xD7</div></div><div class="art-contextmenus"></div></div>'}}]),e}(),gt={"Video Info":"统计信息",Close:"关闭","Video Load Failed":"加载失败",Volume:"音量",Play:"播放",Pause:"暂停",Rate:"速度",Mute:"静音","Video Flip":"画面翻转",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新连接","Hide Subtitle":"隐藏字幕","Show Subtitle":"显示字幕","Show Setting":"显示设置","Hide Setting":"隐藏设置",Screenshot:"截图","Play Speed":"播放速度","Aspect Ratio":"画面比例",Default:"默认",Normal:"正常",Open:"打开","Switch Video":"切换","Switch Subtitle":"切换字幕",Fullscreen:"全屏","Exit Fullscreen":"退出全屏","Web Fullscreen":"网页全屏","Exit Web Fullscreen":"退出网页全屏","Mini Player":"迷你播放器","PIP Mode":"画中画模式","Exit PIP Mode":"退出画中画模式","PIP Not Supported":"不支持画中画模式","Fullscreen Not Supported":"不支持全屏模式","Subtitle Offset":"字幕偏移"},bt={"Video Info":"統計訊息",Close:"關閉","Video Load Failed":"載入失敗",Volume:"音量",Play:"播放",Pause:"暫停",Rate:"速度",Mute:"靜音","Video Flip":"畫面翻轉",Horizontal:"水平",Vertical:"垂直",Reconnect:"重新連接","Hide Subtitle":"隱藏字幕","Show Subtitle":"顯示字幕","Show Setting":"顯示设置","Hide Setting":"隱藏设置",Screenshot:"截圖","Play Speed":"播放速度","Aspect Ratio":"畫面比例",Default:"默認",Normal:"正常",Open:"打開","Switch Video":"切換","Switch Subtitle":"切換字幕",Fullscreen:"全屏","Exit Fullscreen":"退出全屏","Web Fullscreen":"網頁全屏","Exit Web Fullscreen":"退出網頁全屏","Mini Player":"迷你播放器","PIP Mode":"畫中畫模式","Exit PIP Mode":"退出畫中畫模式","PIP Not Supported":"不支持畫中畫模式","Fullscreen Not Supported":"不支持全屏模式","Subtitle Offset":"字幕偏移"},yt=function(){function e(a){t(this,e),this.art=a,this.languages={"zh-cn":gt,"zh-tw":bt},this.init()}return i(e,[{key:"init",value:function(){var t=this.art.option.lang.toLowerCase();this.language=this.languages[t]||{}}},{key:"get",value:function(t){return this.language[t]||t}},{key:"update",value:function(t){this.languages=K(this.languages,t),this.init()}}]),e}(),kt={exports:{}};!function(t){!function(){var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},a=t.exports,i=function(){for(var t,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,s=a.length,o={};i<s;i++)if((t=a[i])&&t[1]in e){for(i=0;i<t.length;i++)o[a[0][i]]=t[i];return o}return!1}(),s={change:i.fullscreenchange,error:i.fullscreenerror},o={request:function(t,a){return new Promise(function(s,o){var n=function(){this.off("change",n),s()}.bind(this);this.on("change",n);var r=(t=t||e.documentElement)[i.requestFullscreen](a);r instanceof Promise&&r.then(n).catch(o)}.bind(this))},exit:function(){return new Promise(function(t,a){if(this.isFullscreen){var s=function(){this.off("change",s),t()}.bind(this);this.on("change",s);var o=e[i.exitFullscreen]();o instanceof Promise&&o.then(s).catch(a)}else t()}.bind(this))},toggle:function(t,e){return this.isFullscreen?this.exit():this.request(t,e)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,a){var i=s[t];i&&e.addEventListener(i,a,!1)},off:function(t,a){var i=s[t];i&&e.removeEventListener(i,a,!1)},raw:i};i?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(e[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[i.fullscreenEnabled])}}}),a?t.exports=o:window.screenfull=o):a?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()}(kt);var xt=kt.exports;function wt(t){var e=t.i18n,a=t.notice,i=t.template.$video;t.once("video:loadedmetadata",(function(){xt.isEnabled?function(t){var e=t.notice,a=t.template.$player;xt.on("change",(function(){return t.emit("fullscreen",xt.isFullscreen)})),W(t,"fullscreen",{get:function(){return xt.isFullscreen},set:function(i){i?xt.request(a).then((function(){k(a,"art-fullscreen"),t.aspectRatioReset=!0,t.autoSize=!1,t.emit("resize"),t.emit("fullscreen",!0),e.show=""})):xt.exit().then((function(){x(a,"art-fullscreen"),t.aspectRatioReset=!0,t.autoSize=t.option.autoSize,t.emit("resize"),t.emit("fullscreen"),e.show=""}))}})}(t):document.fullscreenEnabled||i.webkitSupportsFullscreen?function(t){var e=t.notice,a=t.template.$video;W(t,"fullscreen",{get:function(){return a.webkitDisplayingFullscreen},set:function(i){i?(a.webkitEnterFullscreen(),t.emit("fullscreen",!0),e.show=""):(a.webkitExitFullscreen(),t.emit("fullscreen"),e.show="")}})}(t):W(t,"fullscreen",{get:function(){return!1},set:function(){a.show=e.get("Fullscreen Not Supported")}}),W(t,"fullscreen",Y(t,"fullscreen"))}))}function $t(t){var e=t.i18n,a=t.notice,i=t.template.$video;document.pictureInPictureEnabled?function(t){var e=t.template.$video,a=t.events.proxy,i=t.notice;e.disablePictureInPicture=!1,W(t,"pip",{get:function(){return document.pictureInPictureElement},set:function(t){t?e.requestPictureInPicture().catch((function(t){throw i.show=t,t})):document.exitPictureInPicture().catch((function(t){throw i.show=t,t}))}}),a(e,"enterpictureinpicture",(function(){t.emit("pip",!0)})),a(e,"leavepictureinpicture",(function(){t.emit("pip")}))}(t):i.webkitSupportsPresentationMode?function(t){var e=t.template.$video;e.webkitSetPresentationMode("inline"),W(t,"pip",{get:function(){return"picture-in-picture"===e.webkitPresentationMode},set:function(a){a?(e.webkitSetPresentationMode("picture-in-picture"),t.emit("pip",!0)):(e.webkitSetPresentationMode("inline"),t.emit("pip"))}})}(t):W(t,"pip",{get:function(){return!1},set:function(){a.show=e.get("PIP Not Supported")}})}var St=i((function e(a){t(this,e),function(t){var e=t.option,a=t.template.$video;W(t,"url",{get:function(){return a.currentSrc},set:function(i){var s=e.type||M(i),o=e.customType[s];s&&o?J().then((function(){t.loading.show=!0,o.call(t,a,i,t)})):(t.url&&t.url!==i&&t.once("video:canplay",(function(){t.isReady&&t.emit("restart")})),a.src=i,t.option.url=i,t.emit("url",i))}})}(a),function(t){var e=t.template.$video;W(t,"attr",{value:function(t,a){if(void 0===a)return e[t];e[t]=a}})}(a),function(t){var e=t.i18n,a=t.notice,i=t.option,s=t.constructor.instances,o=t.template.$video;W(t,"play",{value:function(){var n=o.play();if(n&&n.then&&n.then().catch((function(t){throw a.show=t,t})),i.mutex)for(var r=0;r<s.length;r++){var l=s[r];l!==t&&l.pause()}return a.show=e.get("Play"),t.emit("play"),n}})}(a),function(t){var e=t.template.$video,a=t.i18n,i=t.notice;W(t,"pause",{value:function(){var s=e.pause();return i.show=a.get("Pause"),t.emit("pause"),s}})}(a),function(t){W(t,"toggle",{value:function(){return t.playing?t.pause():t.play()}})}(a),function(t){var e=t.notice;W(t,"seek",{set:function(a){t.currentTime=a,t.emit("seek",t.currentTime),t.duration&&(e.show="".concat(tt(t.currentTime)," / ").concat(tt(t.duration)))}}),W(t,"forward",{set:function(e){t.seek=t.currentTime+e}}),W(t,"backward",{set:function(e){t.seek=t.currentTime-e}})}(a),function(t){var e=t.template.$video,a=t.i18n,i=t.notice,s=t.storage;W(t,"volume",{get:function(){return e.volume||0},set:function(o){e.volume=Q(o,0,1),i.show="".concat(a.get("Volume"),": ").concat(parseInt(100*e.volume,10)),0!==e.volume&&s.set("volume",e.volume),t.emit("volume",e.volume)}}),W(t,"muted",{get:function(){return e.muted},set:function(a){e.muted=a,t.emit("volume",e.volume)}})}(a),function(t){var e=t.template.$video;W(t,"currentTime",{get:function(){return e.currentTime||0},set:function(a){a=parseFloat(a),Number.isNaN(a)||(e.currentTime=Q(a,0,t.duration))}})}(a),function(t){W(t,"duration",{get:function(){var e=t.template.$video.duration;return e===1/0?0:e||0}})}(a),function(t){var e=t.i18n,a=t.option,i=t.notice;function s(s,o,n){return new Promise((function(r){if(s===t.url)return r(s);var l=t.playing;t.pause(),URL.revokeObjectURL(t.url),t.url=s,t.once("video:canplay",(function(){t.playbackRate=!1,t.aspectRatio=!1,t.flip="normal",t.autoSize=a.autoSize,t.currentTime=n,t.notice.show="",l&&t.play(),o&&(i.show="".concat(e.get("Switch Video"),": ").concat(o)),t.emit("switch",s),r(s)}))}))}W(t,"switchQuality",{value:function(e,a){return s(e,a,t.currentTime)}}),W(t,"switchUrl",{value:function(t,e){return s(t,e,0)}})}(a),function(t){var e=t.template.$video,a=t.i18n,i=t.notice;W(t,"playbackRate",{get:function(){return e.playbackRate},set:function(s){if(s){if(s===e.playbackRate)return;var o=[.25,.5,.75,1,1.25,1.5,1.75,2,3,4];N(o.includes(s),"'playbackRate' only accept ".concat(o.toString()," as parameters")),e.playbackRate=s,i.show="".concat(a.get("Rate"),": ").concat(1===s?a.get("Normal"):"".concat(s,"x")),t.emit("playbackRate",s)}else t.playbackRate=1,t.emit("playbackRate")}})}(a),function(t){var e=t.template,a=e.$video,i=e.$player,s=t.i18n,o=t.notice;W(t,"aspectRatio",{get:function(){return i.dataset.aspectRatio||"default"},set:function(e){e||(e="default");var n=["default","4:3","16:9"];if(N(n.includes(e),"'aspectRatio' only accept ".concat(n.toString()," as parameters")),"default"===e)S(a,"width",null),S(a,"height",null),S(a,"padding",null),delete i.dataset.aspectRatio;else{var r=e.split(":").map(Number),l=a.videoWidth,c=a.videoHeight,d=i.clientWidth,u=i.clientHeight,h=l/c,p=r[0]/r[1];if(h>p){var m=p*c/l;S(a,"width","".concat(100*m,"%")),S(a,"height","100%"),S(a,"padding","0 ".concat((d-d*m)/2,"px"))}else{var v=l/p/c;S(a,"width","100%"),S(a,"height","".concat(100*v,"%")),S(a,"padding","".concat((u-u*v)/2,"px 0"))}i.dataset.aspectRatio=e}o.show="".concat(s.get("Aspect Ratio"),": ").concat("default"===e?s.get("Default"):e),t.emit("aspectRatio",e)}}),W(t,"aspectRatioReset",{set:function(e){if(e){var a=t.aspectRatio;t.aspectRatio=a}}})}(a),function(t){var e=t.option,a=t.notice,i=t.template.$video,s=document.createElement("canvas");W(t,"getDataURL",{value:function(){return new Promise((function(t,e){try{s.width=i.videoWidth,s.height=i.videoHeight,s.getContext("2d").drawImage(i,0,0),t(s.toDataURL("image/png"))}catch(t){a.show=t,e(t)}}))}}),W(t,"getBlobUrl",{value:function(){return new Promise((function(t,e){try{s.width=i.videoWidth,s.height=i.videoHeight,s.getContext("2d").drawImage(i,0,0),s.toBlob((function(e){t(URL.createObjectURL(e))}))}catch(t){a.show=t,e(t)}}))}}),W(t,"screenshot",{value:function(){return t.getDataURL().then((function(a){return z(a,"".concat(e.title||"artplayer","_").concat(tt(i.currentTime),".png")),t.emit("screenshot",a),a}))}})}(a),wt(a),function(t){var e=t.notice,a=t.template.$player;W(t,"fullscreenWeb",{get:function(){return w(a,"art-fullscreen-web")},set:function(i){i?(k(a,"art-fullscreen-web"),t.aspectRatioReset=!0,t.autoSize=!1,t.emit("resize"),t.emit("fullscreenWeb",!0),e.show=""):(x(a,"art-fullscreen-web"),t.aspectRatioReset=!0,t.autoSize=t.option.autoSize,t.emit("resize"),t.emit("fullscreenWeb"),e.show="")}})}(a),$t(a),function(t){var e=t.template.$video;W(t,"loaded",{get:function(){return t.loadedTime/e.duration}}),W(t,"loadedTime",{get:function(){return e.buffered.length?e.buffered.end(e.buffered.length-1):0}})}(a),function(t){W(t,"played",{get:function(){return t.currentTime/t.duration}})}(a),function(t){var e=t.template.$video;W(t,"playing",{get:function(){return!!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)}})}(a),function(t){var e=t.template,a=e.$container,i=e.$player,s=e.$video;W(t,"autoSize",{get:function(){return w(a,"art-auto-size")},set:function(e){if(e){var o=s.videoWidth,n=s.videoHeight,r=a.getBoundingClientRect(),l=r.width,c=r.height,d=o/n,u=l/c;if(k(a,"art-auto-size"),u>d)S(i,"width","".concat(c*d/l*100,"%")),S(i,"height","100%");else{var h=l/d/c*100;S(i,"width","100%"),S(i,"height","".concat(h,"%"))}t.emit("autoSize",{width:t.width,height:t.height})}else x(a,"art-auto-size"),S(i,"width",null),S(i,"height",null),t.emit("autoSize")}})}(a),function(t){W(t,"rect",{get:function(){return t.template.$player.getBoundingClientRect()}});for(var e=["bottom","height","left","right","top","width"],a=function(a){var i=e[a];W(t,i,{get:function(){return t.rect[i]}})},i=0;i<e.length;i++)a(i);W(t,"x",{get:function(){return t.left+window.pageXOffset}}),W(t,"y",{get:function(){return t.top+window.pageYOffset}})}(a),function(t){var e=t.template.$player,a=t.i18n,i=t.notice;W(t,"flip",{get:function(){return e.dataset.flip||"normal"},set:function(s){s||(s="normal");var o=["normal","horizontal","vertical"];N(o.includes(s),"'flip' only accept ".concat(o.toString()," as parameters")),"normal"===s?delete e.dataset.flip:(t.rotate=!1,e.dataset.flip=s);var n=s.replace(s[0],s[0].toUpperCase());i.show="".concat(a.get("Video Flip"),": ").concat(a.get(n)),t.emit("flip",s)}})}(a),function(t){var e=t.i18n,a=t.option,i=t.storage,s=t.events.proxy,o=t.template,n=o.$player,r=o.$miniClose,l=o.$miniTitle,c=o.$miniHeader,d="",u=!1,h=0,p=0,m=0,v=0;s(c,"mousedown",(function(e){u=!0,h=e.pageX,p=e.pageY,m=t.left,v=t.top})),s(document,"mousemove",(function(t){if(u){k(n,"art-is-dragging");var e=v+t.pageY-p,a=m+t.pageX-h;S(n,"top","".concat(e,"px")),S(n,"left","".concat(a,"px")),i.set("top",e),i.set("left",a)}})),s(document,"mouseup",(function(){u=!1,x(n,"art-is-dragging")})),s(r,"click",(function(){t.mini=!1,u=!1,x(n,"art-is-dragging")})),$(l,a.title||e.get("Mini Player")),W(t,"mini",{get:function(){return w(n,"art-mini")},set:function(e){if(e){t.autoSize=!1,d=n.style.cssText,k(n,"art-mini");var s=i.get("top"),o=i.get("left");if(s&&o)S(n,"top","".concat(s,"px")),S(n,"left","".concat(o,"px")),A(c)||(i.del("top"),i.del("left"),t.mini=!0);else{var r=document.body,l=r.clientHeight-t.height-50,u=r.clientWidth-t.width-50;i.set("top",l),i.set("left",u),S(n,"top","".concat(l,"px")),S(n,"left","".concat(u,"px"))}t.aspectRatio=!1,t.playbackRate=!1,t.notice.show="",t.emit("mini",!0)}else n.style.cssText=d,x(n,"art-mini"),S(n,"top",null),S(n,"left",null),t.aspectRatio=!1,t.playbackRate=!1,t.autoSize=a.autoSize,t.notice.show="",t.emit("mini")}})}(a),function(t){var e=[];W(t,"loop",{get:function(){return e},set:function(a){if(Array.isArray(a)&&"number"==typeof a[0]&&"number"==typeof a[1]){var i=Q(a[0],0,Math.min(a[1],t.duration)),s=Q(a[1],i,t.duration);s-i>=1?(e=[i,s],t.emit("loop",e)):(e=[],t.emit("loop"))}else e=[],t.emit("loop")}}),t.on("video:timeupdate",(function(){e.length&&(t.currentTime<e[0]||t.currentTime>e[1])&&(t.seek=e[0])}))}(a),function(t){var e=t.option,a=t.template.$poster;W(t,"poster",{get:function(){return e.poster},set:function(t){e.poster=t,S(a,"backgroundImage","url(".concat(t,")"))}})}(a),function(t){var e=t.option,a=t.template,i=a.$container,s=a.$video,o=i.style.height;W(t,"autoHeight",{get:function(){return w(i,"art-auto-height")},set:function(a){if(a){var n=i.clientWidth,r=s.videoHeight*(n/s.videoWidth);S(i,"height",r+"px"),k(i,"art-auto-height"),t.autoSize=e.autoSize,t.emit("autoHeight",r)}else S(i,"height",o),x(i,"art-auto-height"),t.autoSize=e.autoSize,t.emit("autoHeight")}})}(a),function(t){var e=t.option,a=t.template.$player;W(t,"theme",{get:function(){return getComputedStyle(a).getPropertyValue("--theme")},set:function(t){e.theme=t,a.style.setProperty("--theme",t)}})}(a),function(t){W(t,"title",{get:function(){return t.option.title},set:function(e){t.option.title=e}})}(a),function(t){var e=["mini","pip","fullscreen","fullscreenWeb"];!function(e){for(var a=function(a){var i=e[a];t.on(i,(function(){t[i]&&e.filter((function(t){return t!==i})).forEach((function(e){t[e]&&(t[e]=!1)}))}))},i=0;i<e.length;i++)a(i)}(e),W(t,"normalSize",{get:function(){return e.every((function(e){return!t[e]}))}})}(a),function(t){var e=t.constructor.utils.clamp,a=t.notice,i=t.template,s=t.i18n,o=0,n=[];t.on("subtitle:switch",(function(){n=[]})),W(t,"subtitleOffset",{get:function(){return o},set:function(r){if(i.$track&&i.$track.track){var l=Array.from(i.$track.track.cues);o=e(r,-5,5);for(var c=0;c<l.length;c++){var d=l[c];n[c]||(n[c]={startTime:d.startTime,endTime:d.endTime}),d.startTime=e(n[c].startTime+o,0,t.duration),d.endTime=e(n[c].endTime+o,0,t.duration)}t.subtitle.update(),a.show="".concat(s.get("Subtitle Offset"),": ").concat(r,"s"),t.emit("subtitleOffset",r)}else t.emit("subtitleOffset",0)}})}(a),function(t){for(var e=t.option,a=t.events.proxy,i=t.template,s=i.$player,o=i.$video,n=i.$poster,r=t.i18n,l=t.notice,c=0,d=0;d<mt.events.length;d++)a(o,mt.events[d],(function(e){t.emit("video:".concat(e.type),e)}));t.on("video:canplay",(function(){c=0,t.loading.show=!1})),t.once("video:canplay",(function(){t.loading.show=!1,t.controls.show=!0,t.mask.show=!0,t.isReady=!0,t.emit("ready")})),t.on("video:ended",(function(){e.loop?(t.seek=0,t.play(),t.controls.show=!1,t.mask.show=!1):(t.controls.show=!0,t.mask.show=!0)})),t.on("video:error",(function(){c<5?J(1e3).then((function(){c+=1,t.url=e.url,l.show="".concat(r.get("Reconnect"),": ").concat(c),t.emit("error",c)})):(t.loading.show=!1,t.controls.show=!1,k(s,"art-error"),J(1e3).then((function(){l.show=r.get("Video Load Failed"),t.destroy(!1)})))})),t.once("video:loadedmetadata",(function(){t.autoSize=e.autoSize,m&&(t.loading.show=!1,t.controls.show=!0,t.mask.show=!0)})),t.on("video:loadstart",(function(){t.loading.show=!0})),t.on("video:pause",(function(){t.controls.show=!0,t.mask.show=!0})),t.on("video:play",(function(){t.mask.show=!1,S(n,"display","none")})),t.on("video:playing",(function(){t.mask.show=!1})),t.on("video:seeked",(function(){t.loading.show=!1})),t.on("video:seeking",(function(){t.loading.show=!0})),t.on("video:timeupdate",(function(){t.mask.show=!1})),t.on("video:waiting",(function(){t.loading.show=!0}))}(a),function(t){var e=t.option,a=t.storage,i=t.template,s=i.$video,o=i.$poster;Object.keys(e.moreVideoAttr).forEach((function(a){t.attr(a,e.moreVideoAttr[a])})),e.muted&&(t.muted=e.muted),e.volume&&(s.volume=Q(e.volume,0,1));var n=a.get("volume");"number"==typeof n&&(s.volume=Q(n,0,1)),e.poster&&S(o,"backgroundImage","url(".concat(e.poster,")")),e.autoplay&&(s.autoplay=e.autoplay),e.playsInline&&(s.playsInline=!0,s["webkit-playsinline"]=!0),e.theme&&(t.theme=e.theme),0===e.ads.length&&(t.url=e.url)}(a)}));function Dt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}function _t(){return _t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var i=Dt(t,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(arguments.length<3?t:a):s.value}},_t.apply(this,arguments)}var Ct=function(){function e(a){t(this,e),this.id=0,this.art=a,this.add=this.add.bind(this)}return i(e,[{key:"show",get:function(){return w(this.art.template.$player,"art-".concat(this.name,"-show"))},set:function(t){var e=this.art.template.$player,a="art-".concat(this.name,"-show");t?k(e,a):x(e,a),this.art.emit(this.name,t)}},{key:"toggle",set:function(t){t&&(this.show=!this.show)}},{key:"add",value:function(t){var e=this,a="function"==typeof t?t(this.art):t;if(a.html=a.html||"",u(a,ht),this.$parent&&this.name&&!a.disable){var i=a.name||"".concat(this.name).concat(this.id);N(!G(this,i),"Cannot add an existing name [".concat(i,"] to the [").concat(this.name,"]")),this.id+=1;var s=document.createElement("div");k(s,"art-".concat(this.name)),k(s,"art-".concat(this.name,"-").concat(i));var o=Array.from(this.$parent.children);s.dataset.index=a.index||this.id;var n=o.find((function(t){return Number(t.dataset.index)>=Number(s.dataset.index)}));return n?n.insertAdjacentElement("beforebegin",s):$(this.$parent,s),a.html&&$(s,a.html),a.style&&D(s,a.style),a.tooltip&&P(s,a.tooltip),a.click&&this.art.events.proxy(s,"click",(function(t){t.preventDefault(),a.click.call(e.art,e,t)})),a.selector&&["left","right"].includes(a.position)&&this.selector(a,s),a.mounted&&a.mounted.call(this.art,s),1===s.childNodes.length&&3===s.childNodes[0].nodeType&&k(s,"art-control-onlyText"),W(this,i,{value:s}),s}}},{key:"selector",value:function(t,e){var a=this,i=this.art.events,s=i.hover,o=i.proxy;k(e,"art-control-selector");var n=document.createElement("div");k(n,"art-selector-value"),$(n,t.html),e.innerText="",$(e,n);var r=t.selector.map((function(t,e){return'<div class="art-selector-item '.concat(t.default?"art-current":"",'" data-index="').concat(e,'">').concat(t.html,"</div>")})).join(""),l=document.createElement("div");k(l,"art-selector-list"),$(l,r),$(e,l);var c=function(){var t=_(e,"width")/2-_(l,"width")/2;l.style.left="".concat(t,"px")};s(e,c),o(l,"click",(function(e){var i=(e.composedPath()||[]).find((function(t){return w(t,"art-selector-item")}));if(i){T(i,"art-current");var s=Number(i.dataset.index),o=t.selector[s]||{};if(n.innerText=i.innerText,t.onSelect){var r=t.onSelect.call(a.art,o,i,e);"string"!=typeof r&&"number"!=typeof r||(n.innerHTML=r)}c(),a.art.emit("selector",o,i)}}))}}]),e}();function Tt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Pt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function At(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Ot(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?At(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):At(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function It(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Rt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?It(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):It(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Zt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Et(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Zt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Vt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Lt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Vt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Nt(t,e){var a=t.template.$progress,i=a.getBoundingClientRect().left,s=Q(("number"==typeof e.pageX?e.pageX:e.touches[0].clientX)-i,0,a.clientWidth),o=s/a.clientWidth*t.duration;return{second:o,time:tt(o),width:s,percentage:Q(s/a.clientWidth,0,1)}}function jt(t){return function(e){var a=e.icons,i=e.option,s=e.events.proxy;return Lt(Lt({},t),{},{html:'<div class="art-control-progress-inner"><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:function(t){var o=!1,n=b(".art-progress-loaded",t),r=b(".art-progress-played",t),l=b(".art-progress-highlight",t),c=b(".art-progress-indicator",t),d=b(".art-progress-tip",t);S(r,"backgroundColor","var(--theme)");var u=14;function h(t,e){"loaded"===t&&S(n,"width","".concat(100*e,"%")),"played"===t&&(S(r,"width","".concat(100*e,"%")),S(c,"left","calc(".concat(100*e,"% - ").concat(u/2,"px)")))}a.indicator?(u=16,$(c,a.indicator)):D(c,{backgroundColor:"var(--theme)"}),D(c,{left:"-".concat(u/2,"px"),width:"".concat(u,"px"),height:"".concat(u,"px")});for(var p=0;p<i.highlight.length;p++){var m=i.highlight[p],v=Q(m.time,0,e.duration)/e.duration*100;$(l,'<span data-text="'.concat(m.text,'" data-time="').concat(m.time,'" style="left: ').concat(v,'%"></span>'))}h("loaded",e.loaded),e.on("video:progress",(function(){h("loaded",e.loaded)})),e.on("video:timeupdate",(function(){h("played",e.played)})),e.on("video:ended",(function(){h("played",1)})),s(t,"mousemove",(function(a){S(d,"display","block"),O(a,l)?function(a){var i=Nt(e,a).width,s=a.target.dataset.text;d.innerHTML=s;var o=d.clientWidth;i<=o/2?S(d,"left",0):i>t.clientWidth-o/2?S(d,"left","".concat(t.clientWidth-o,"px")):S(d,"left","".concat(i-o/2,"px"))}(a):function(a){var i=Nt(e,a),s=i.width,o=i.time;d.innerHTML=o;var n=d.clientWidth;s<=n/2?S(d,"left",0):s>t.clientWidth-n/2?S(d,"left","".concat(t.clientWidth-n,"px")):S(d,"left","".concat(s-n/2,"px"))}(a)})),s(t,"mouseout",(function(){S(d,"display","none")})),s(t,"click",(function(t){if(t.target!==c){var a=Nt(e,t),i=a.second;h("played",a.percentage),e.seek=i}})),s(c,"mousedown",(function(){o=!0})),s(document,"mousemove",(function(t){if(o){var a=Nt(e,t),i=a.second;h("played",a.percentage),e.seek=i}})),s(document,"mouseup",(function(){o&&(o=!1)})),s(c,"touchstart",(function(t){1===t.touches.length&&(o=!0)})),s(document,"touchmove",(function(t){if(1===t.touches.length&&o){var a=Nt(e,t),i=a.second;h("played",a.percentage),e.seek=i}})),s(document,"touchend",(function(){o&&(o=!1)}))}})}}function Ft(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Bt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ft(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Mt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function zt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Mt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Ut(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Ht(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ut(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Wt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function qt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Gt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Kt(t){return function(e){return Yt(Yt({},t),{},{mounted:function(t){var a=e.option,i=e.template,s=i.$progress,o=i.$video,n=e.events,r=n.proxy,l=n.loadImg,c=null,d=!1,u=!1;r(s,"mousemove",(function(i){d||(d=!0,l(a.thumbnails.url).then((function(t){c=t,u=!0}))),u&&(S(t,"display","block"),function(i){var n=Nt(e,i).width,r=a.thumbnails,l=r.url,d=r.number,u=r.column,h=c.naturalWidth/u,p=h/(o.videoWidth/o.videoHeight),m=s.clientWidth/d,v=Math.floor(n/m),f=Math.ceil(v/u)-1,g=v%u||u-1;S(t,"backgroundImage","url(".concat(l,")")),S(t,"height","".concat(p,"px")),S(t,"width","".concat(h,"px")),S(t,"backgroundPosition","-".concat(g*h,"px -").concat(f*p,"px")),n<=h/2?S(t,"left",0):n>s.clientWidth-h/2?S(t,"left","".concat(s.clientWidth-h,"px")):S(t,"left","".concat(n-h/2,"px"))}(i))})),r(s,"mouseout",(function(){S(t,"display","none")}))}})}}function Jt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function Xt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Jt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Qt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function te(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Qt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ee(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function ae(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var se=function(e){n(s,e);var a=ie(s);function s(e){var i;t(this,s),(i=a.call(this,e)).name="control";var o=e.option,n=e.template.$player;return i.mouseMoveTime=Date.now(),e.on("mousemove",(function(){i.show=!0,x(n,"art-hide-cursor"),k(n,"art-hover"),i.mouseMoveTime=Date.now()})),e.on("video:timeupdate",(function(){e.playing&&i.show&&Date.now()-i.mouseMoveTime>=3e3&&(i.show=!1,k(n,"art-hide-cursor"),x(n,"art-hover"))})),e.once("video:loadedmetadata",(function(){i.add(jt({name:"progress",disable:o.isLive,position:"top",index:10})),i.add(Kt({name:"thumbnails",disable:!o.thumbnails.url||o.isLive,position:"top",index:20})),i.add(function(t){return function(e){return ae(ae({},t),{},{mounted:function(t){var a=$(t,'<span class="art-loop-point"></span>'),i=$(t,'<span class="art-loop-point"></span>');e.on("loop",(function(s){s?(S(t,"display","block"),S(a,"left","calc(".concat(s[0]/e.duration*100,"% - ").concat(a.clientWidth,"px)")),S(i,"left","".concat(s[1]/e.duration*100,"%"))):S(t,"display","none")}))}})}}({name:"loop",disable:!1,position:"top",index:30})),i.add(function(t){return function(e){return Et(Et({},t),{},{mounted:function(t){var a=e.events.proxy,i=e.icons,s=e.i18n,o=$(t,i.play),n=$(t,i.pause);function r(){S(o,"display","flex"),S(n,"display","none")}function l(){S(o,"display","none"),S(n,"display","flex")}P(o,s.get("Play")),P(n,s.get("Pause")),a(o,"click",(function(){e.play()})),a(n,"click",(function(){e.pause()})),e.playing?l():r(),e.on("video:playing",(function(){l()})),e.on("video:pause",(function(){r()}))}})}}({name:"playAndPause",disable:!1,position:"left",index:10})),i.add(function(t){return function(e){return Ht(Ht({},t),{},{mounted:function(t){var a=e.events.proxy,i=e.icons,s=e.i18n,o=!1,n=$(t,i.volume),r=$(t,i.volumeClose),l=$(t,'<div class="art-volume-panel"></div>'),c=$(l,'<div class="art-volume-slider-handle"></div>');function d(t){var e=l.getBoundingClientRect().left;return Q(t.pageX-e-6,0,54)/48}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.7;if(e.muted||0===t)S(n,"display","none"),S(r,"display","flex"),S(c,"left","0");else{var a=48*t;S(n,"display","flex"),S(r,"display","none"),S(c,"left","".concat(a,"px"))}}P(n,s.get("Mute")),S(r,"display","none"),m&&S(l,"display","none"),u(e.volume),e.on("video:volumechange",(function(){u(e.volume)})),a(n,"click",(function(){e.muted=!0})),a(r,"click",(function(){e.muted=!1})),a(l,"click",(function(t){e.muted=!1,e.volume=d(t)})),a(c,"mousedown",(function(){o=!0})),a(t,"mousemove",(function(t){o&&(e.muted=!1,e.volume=d(t))})),a(document,"mouseup",(function(){o&&(o=!1)}))}})}}({name:"volume",disable:!1,position:"left",index:20})),i.add(function(t){return function(e){return zt(zt({},t),{},{mounted:function(t){function a(){var a="".concat(tt(e.currentTime)," / ").concat(tt(e.duration));a!==t.innerText&&(t.innerText=a)}a();for(var i=["video:loadedmetadata","video:timeupdate","video:progress"],s=0;s<i.length;s++)e.on(i[s],a)}})}}({name:"time",disable:o.isLive,position:"left",index:30})),i.add(function(t){return function(e){var a=e.option.quality,i=a.find((function(t){return t.default}))||a[0];return te(te({},t),{},{html:i?i.html:"",selector:a,onSelect:function(t){e.switchQuality(t.url,t.html)}})}}({name:"quality",disable:0===o.quality.length,position:"right",index:10})),i.add(function(t){return function(e){return Xt(Xt({},t),{},{tooltip:e.i18n.get("Screenshot"),mounted:function(t){var a=e.events.proxy;$(t,e.icons.screenshot),a(t,"click",(function(){e.screenshot()}))}})}}({name:"screenshot",disable:!o.screenshot,position:"right",index:20})),i.add(function(t){return function(e){return Bt(Bt({},t),{},{tooltip:e.i18n.get("Hide Subtitle"),mounted:function(t){var a=e.events.proxy,i=e.icons,s=e.i18n,o=e.subtitle;$(t,i.subtitle),a(t,"click",(function(){o.toggle=!0})),e.on("subtitle",(function(e){P(t,s.get(e?"Hide Subtitle":"Show Subtitle"))}))}})}}({name:"subtitle",disable:!o.subtitle.url,position:"right",index:30})),i.add(function(t){return function(e){return qt(qt({},t),{},{tooltip:e.i18n.get("Show Setting"),mounted:function(t){var a=e.events.proxy,i=e.icons,s=e.i18n,o=e.setting;$(t,i.setting),a(t,"click",(function(){o.toggle=!0})),e.on("setting",(function(e){P(t,s.get(e?"Hide Setting":"Show Setting"))}))}})}}({name:"setting",disable:!o.setting,position:"right",index:40})),i.add(function(t){return function(e){return Rt(Rt({},t),{},{tooltip:e.i18n.get("PIP Mode"),mounted:function(t){var a=e.events.proxy,i=e.icons,s=e.i18n;$(t,i.pip),a(t,"click",(function(){e.pip=!e.pip})),e.on("pip",(function(e){P(t,s.get(e?"Exit PIP Mode":"PIP Mode"))}))}})}}({name:"pip",disable:!o.pip,position:"right",index:50})),i.add(function(t){return function(e){return Ot(Ot({},t),{},{tooltip:e.i18n.get("Web Fullscreen"),mounted:function(t){var a=e.events.proxy,i=e.icons,s=e.i18n;$(t,i.fullscreenWeb),a(t,"click",(function(){e.fullscreenWeb=!e.fullscreenWeb})),e.on("fullscreenWeb",(function(e){P(t,s.get(e?"Exit Web Fullscreen":"Web Fullscreen"))}))}})}}({name:"fullscreenWeb",disable:!o.fullscreenWeb,position:"right",index:60})),i.add(function(t){return function(e){return Pt(Pt({},t),{},{tooltip:e.i18n.get("Fullscreen"),mounted:function(t){var a=e.events.proxy,i=e.icons,s=e.i18n;$(t,i.fullscreen),a(t,"click",(function(){e.fullscreen=!e.fullscreen})),e.on("fullscreen",(function(e){P(t,s.get(e?"Exit Fullscreen":"Fullscreen"))}))}})}}({name:"fullscreen",disable:!o.fullscreen,position:"right",index:70}));for(var t=0;t<o.controls.length;t++)i.add(o.controls[t])})),i}return i(s,[{key:"add",value:function(t){var e="function"==typeof t?t(this.art):t,a=this.art.template,i=a.$progress,o=a.$controlsLeft,n=a.$controlsRight;switch(e.position){case"top":this.$parent=i;break;case"left":this.$parent=o;break;case"right":this.$parent=n;break;default:N(!1,"Control option.position must one of 'top', 'left', 'right'")}_t(c(s.prototype),"add",this).call(this,e)}}]),s}(Ct);function oe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function ne(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function re(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function le(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?re(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ce(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function de(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ue(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function he(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function pe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function me(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ve(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function fe(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var be=function(e){n(s,e);var a=ge(s);function s(e){var i;return t(this,s),(i=a.call(this,e)).art=e,i.name="contextmenu",i.$parent=e.template.$contextmenu,e.once("video:loadedmetadata",(function(){m||i.init()})),i}return i(s,[{key:"init",value:function(){var t=this,e=this.art,a=e.option,i=e.template,s=i.$player,o=i.$contextmenu,n=e.events.proxy;this.add(function(t){return function(e){var a=e.i18n;return ne(ne({},t),{},{html:"".concat(a.get("Play Speed"),':<span data-value="0.5">0.5</span><span data-value="0.75">0.75</span><span data-value="1.0" class="art-current">').concat(a.get("Normal"),'</span><span data-value="1.25">1.25</span><span data-value="1.5">1.5</span><span data-value="2.0">2.0</span>'),click:function(t,a){var i=a.target.dataset.value;i&&(e.playbackRate=Number(i),t.show=!1)},mounted:function(t){e.on("playbackRate",(function(e){var a=y("span",t).find((function(t){return Number(t.dataset.value)===e}));a&&T(a,"art-current")}))}})}}({disable:!a.playbackRate,name:"playbackRate",index:10})),this.add(function(t){return function(e){var a=e.i18n;return le(le({},t),{},{html:"".concat(a.get("Aspect Ratio"),':<span data-value="default" class="art-current">').concat(a.get("Default"),'</span><span data-value="4:3">4:3</span><span data-value="16:9">16:9</span>'),click:function(t,a){var i=a.target.dataset.value;i&&(e.aspectRatio=i,t.show=!1)},mounted:function(t){e.on("aspectRatio",(function(e){var a=y("span",t).find((function(t){return t.dataset.value===e}));a&&T(a,"art-current")}))}})}}({disable:!a.aspectRatio,name:"aspectRatio",index:20})),this.add(function(t){return function(e){var a=e.i18n;return de(de({},t),{},{html:"".concat(a.get("Video Flip"),':<span data-value="normal" class="art-current">').concat(a.get("Normal"),'</span><span data-value="horizontal">').concat(a.get("Horizontal"),'</span><span data-value="vertical">').concat(a.get("Vertical"),"</span>"),click:function(t,a){var i=a.target.dataset.value;i&&(e.flip=i,t.show=!1)},mounted:function(t){e.on("flip",(function(e){var a=y("span",t).find((function(t){return t.dataset.value===e}));a&&T(a,"art-current")}))}})}}({disable:!a.flip,name:"flip",index:30})),this.add(function(t){return function(e){return he(he({},t),{},{html:e.i18n.get("Video Info"),click:function(t){e.info.show=!0,t.show=!1}})}}({disable:!1,name:"info",index:40})),this.add(function(t){return me(me({},t),{},{html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 4.3.7</a>'})}({disable:!1,name:"version",index:50})),this.add(function(t){return function(e){return fe(fe({},t),{},{html:e.i18n.get("Close"),click:function(t){t.show=!1}})}}({disable:!1,name:"close",index:60}));for(var r=0;r<a.contextmenu.length;r++)this.add(a.contextmenu[r]);n(s,"contextmenu",(function(e){e.preventDefault(),t.show=!0;var a=e.clientX,i=e.clientY,n=s.getBoundingClientRect(),r=n.height,l=n.width,c=n.left,d=n.top,u=o.getBoundingClientRect(),h=u.height,p=u.width,m=a-c,v=i-d;a+p>c+l&&(m=l-p),i+h>d+r&&(v=r-h),D(o,{top:"".concat(v,"px"),left:"".concat(m,"px")})})),n(s,"click",(function(e){O(e,o)||(t.show=!1)})),this.art.on("blur",(function(){t.show=!1}))}}]),s}(Ct);function ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var ke=function(e){n(s,e);var a=ye(s);function s(e){var i;return t(this,s),(i=a.call(this,e)).name="info",e.once("video:loadedmetadata",(function(){m||i.init()})),i}return i(s,[{key:"init",value:function(){var t=this,e=this.art,a=e.events.proxy,i=e.template,s=i.$infoPanel,o=i.$infoClose,n=i.$video;a(o,"click",(function(){t.show=!1}));var r=null,l=y("[data-video]",s)||[];this.art.on("destroy",(function(){clearTimeout(r)})),function t(){for(var e=0;e<l.length;e++){var a=l[e],i=n[a.dataset.video],s="number"==typeof i?i.toFixed(2):i;a.innerText!==s&&(a.innerText=s)}r=setTimeout(t,1e3)}()}}]),s}(Ct);function xe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function we(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var Se=function(e){n(s,e);var a=$e(s);function s(e){var i;return t(this,s),(i=a.call(this,e)).name="subtitle",e.once("video:loadedmetadata",(function(){i.init(e.option.subtitle)})),i}return i(s,[{key:"url",get:function(){return this.art.template.$track.src},set:function(t){this.switch(t)}},{key:"textTrack",get:function(){return this.art.template.$video.textTracks[0]}},{key:"activeCue",get:function(){return this.textTrack.activeCues[0]}},{key:"style",value:function(t,e){var a=this.art.template.$subtitle;return"object"===r(t)?D(a,t):S(a,t,e)}},{key:"update",value:function(){var t=this.art.template.$subtitle;t.innerHTML="",this.activeCue&&(t.innerHTML=this.activeCue.text.split(/\r?\n/).map((function(t){return"<p>".concat(et(t),"</p>")})).join(""),this.art.emit("subtitleUpdate",this.activeCue.text))}},{key:"switch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.art,i=a.i18n,s=a.notice,o=a.option,n=we(we(we({},o.subtitle),e),{},{url:t});return this.init(n).then((function(t){return e.name&&(s.show="".concat(i.get("Switch Subtitle"),": ").concat(e.name)),t}))}},{key:"init",value:function(t){var e=this;if(u(t,pt.subtitle),t.url){var a=this.art,i=a.notice,s=a.events.proxy,o=a.template,n=o.$subtitle,r=o.$video;if(!o.$track){var l=document.createElement("track");l.default=!0,l.kind="metadata",r.appendChild(l),this.art.template.$track=l,s(this.textTrack,"cuechange",this.update.bind(this))}return this.style(t.style),N(window.fetch,"fetch not support"),fetch(t.url).then((function(t){return t.arrayBuffer()})).then((function(a){N(window.TextDecoder,"TextDecoder not support");var i=new TextDecoder(t.encoding).decode(a);switch(e.art.emit("subtitleLoad",t.url),t.type||M(t.url)){case"srt":return F(j(i));case"ass":return F(B(i));case"vtt":return F(i);default:return t.url}})).then((function(t){return n.innerHTML="",e.url===t||(URL.revokeObjectURL(e.url),e.art.template.$track.src=t,e.art.emit("subtitleSwitch",t)),t})).catch((function(t){throw i.show=t,t}))}}}]),s}(Ct),De=function(){function e(a){var i=this;t(this,e),this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),this.loadImg=this.loadImg.bind(this),a.whitelist.state&&a.once("video:loadedmetadata",(function(){!function(t,e){var a=t.template,i=a.$player,s=a.$video;e.proxy(document,["click","contextmenu"],(function(e){O(e,i)?(t.isFocus=!0,t.emit("focus")):(t.isFocus=!1,t.emit("blur"))}));var o=0;e.proxy(s,"click",(function(){var e=Date.now();e-o<=300?(t.emit("dblclick"),m?t.toggle():t.fullscreen=!t.fullscreen):(t.emit("click"),m||t.toggle()),o=e}))}(a,i),function(t,e){var a=t.template.$player;e.hover(a,(function(){k(a,"art-hover"),t.emit("hover",!0)}),(function(){x(a,"art-hover"),t.emit("hover")}))}(a,i),function(t,e){var a=t.template.$player;e.proxy(a,"mousemove",(function(e){t.emit("mousemove",e)}))}(a,i),function(t,e){var a=t.notice,i=t.option,s=X((function(){t.normalSize&&(t.autoSize=i.autoSize),t.aspectRatioReset=!0,a.show="",t.emit("resize")}),500);e.proxy(window,["orientationchange","resize"],(function(){s()})),screen&&screen.orientation&&screen.orientation.onchange&&e.proxy(screen.orientation,"change",(function(){s()}))}(a,i),function(t,e){if(m&&!t.option.isLive){var a=t.notice,i=t.template.$video,s=!1,o=0,n=0,r=null;e.proxy(i,"touchstart",(function(e){1===e.touches.length&&(s=!0,o=e.touches[0].clientX,clearTimeout(r),r=setTimeout((function(){t.playbackRate=3}),1e3))})),e.proxy(i,"touchmove",(function(e){if(1===e.touches.length&&s&&t.duration){var r=Q((e.touches[0].clientX-o)/i.clientWidth,-1,1);n=Q(t.currentTime+t.duration*r,0,t.duration),a.show="".concat(tt(n)," / ").concat(tt(t.duration))}})),e.proxy(document,"touchend",(function(){s&&(n&&(t.seek=n),3===t.playbackRate&&(t.playbackRate=1),o=0,n=0,s=!1,clearTimeout(r),r=null)}))}}(a,i),function(t,e){var a=t.option,i=t.template.$container,s=X((function(){t.emit("view",A(i,50))}),200);e.proxy(window,"scroll",(function(){s()})),t.on("view",(function(e){a.autoMini&&(t.mini=!e)}))}(a,i)}))}return i(e,[{key:"proxy",value:function(t,e,a){var i=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Array.isArray(e))return e.map((function(e){return i.proxy(t,e,a,s)}));t.addEventListener(e,a,s);var o=function(){return t.removeEventListener(e,a,s)};return this.destroyEvents.push(o),o}},{key:"hover",value:function(t,e,a){e&&this.proxy(t,"mouseenter",e),a&&this.proxy(t,"mouseleave",a)}},{key:"loadImg",value:function(t){var e=this;return new Promise((function(a,i){var s;if(t instanceof HTMLImageElement)s=t;else{if("string"!=typeof t)return i(new L("Unable to get Image"));(s=new Image).src=t}if(s.complete)return a(s);e.proxy(s,"load",(function(){return a(s)})),e.proxy(s,"error",(function(){return i(new L("Failed to load Image: ".concat(s.src)))}))}))}},{key:"destroy",value:function(){for(var t=0;t<this.destroyEvents.length;t++)this.destroyEvents[t]()}}]),e}(),_e=function(){function e(a){var i=this;t(this,e),this.art=a,this.keys={},a.once("video:loadedmetadata",(function(){a.option.hotkey&&!m&&i.init()}))}return i(e,[{key:"init",value:function(){var t=this,e=this.art.events.proxy;this.add(27,(function(){t.art.fullscreenWeb&&(t.art.fullscreenWeb=!1)})),this.add(32,(function(){t.art.toggle()})),this.add(37,(function(){t.art.backward=5})),this.add(38,(function(){t.art.volume+=.1})),this.add(39,(function(){t.art.forward=5})),this.add(40,(function(){t.art.volume-=.1})),e(window,"keydown",(function(e){if(t.art.isFocus){var a=document.activeElement.tagName.toUpperCase(),i=document.activeElement.getAttribute("contenteditable");if("INPUT"!==a&&"TEXTAREA"!==a&&""!==i&&"true"!==i){var s=t.keys[e.keyCode];if(s){e.preventDefault();for(var o=0;o<s.length;o++)s[o].call(t.art,e);t.art.emit("hotkey",e)}}}}))}},{key:"add",value:function(t,e){return this.keys[t]?this.keys[t].push(e):this.keys[t]=[e],this}},{key:"remove",value:function(t,e){if(this.keys[t]){var a=this.keys[t].indexOf(e);-1!==a&&this.keys[t].splice(a,1)}return this}}]),e}();function Ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var Te=function(e){n(s,e);var a=Ce(s);function s(e){var i;t(this,s),i=a.call(this,e);var o=e.option,n=e.template.$layer;return i.name="layer",i.$parent=n,e.once("video:loadedmetadata",(function(){for(var t=0;t<o.layers.length;t++)i.add(o.layers[t])})),i}return i(s)}(Ct);function Pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var Ae=function(e){n(s,e);var a=Pe(s);function s(e){var i;return t(this,s),(i=a.call(this,e)).name="loading",$(e.template.$loading,e.icons.loading),i}return i(s)}(Ct),Oe=function(){function e(a){t(this,e),this.art=a,this.time=2e3,this.timer=null}return i(e,[{key:"show",set:function(t){var e=this.art.template,a=e.$player,i=e.$noticeInner;if(!t)return x(a,"art-notice-show");i.innerText=t instanceof Error?t.message.trim():t,k(a,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout((function(){i.innerText="",x(a,"art-notice-show")}),this.time)}}]),e}();function Ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var Re=function(e){n(s,e);var a=Ie(s);function s(e){var i;t(this,s),(i=a.call(this,e)).name="mask";var o=e.template,n=e.icons,r=e.events;return $(o.$state,n.state),r.proxy(o.$state,"click",(function(){return e.play()})),i}return i(s)}(Ct);function Ze(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}var Ee=i((function e(a){var i=this;t(this,e);var s=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ze(Object(a),!0).forEach((function(e){it(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({loading:'<svg xmlns="http://www.w3.org/2000/svg" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><rect x="0" y="0" width="100" height="100" fill="none" class="bk"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(0 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(30 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(60 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(90 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(120 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(150 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(180 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(210 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(240 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(270 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(300 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(330 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>',state:'<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" style="filter: drop-shadow(0px 1px 1px black);" viewBox="0 0 24 24"><path d="M20,2H4C1.8,2,0,3.8,0,6v12c0,2.2,1.8,4,4,4h16c2.2,0,4-1.8,4-4V6C24,3.8,22.2,2,20,2z M15.6,12.8L10.5,16 C9.9,16.5,9,16,9,15.2V8.8C9,8,9.9,7.5,10.5,8l5.1,3.2C16.3,11.5,16.3,12.5,15.6,12.8z"/></svg>',play:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M17.982 9.275L8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"></path></svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zM15 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"></path></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" height="100%" version="1.1" viewBox="0 0 24 24" width="100%"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff" /></svg>',volume:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M10.188 4.65L6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zM14.446 3.778a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"></path><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"></path></svg>',volumeClose:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"></path><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zM18.778 18.778l-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"></path></svg>',subtitle:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"/></svg>',screenshot:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50">\t<path d="M 19.402344 6 C 17.019531 6 14.96875 7.679688 14.5 10.011719 L 14.097656 12 L 9 12 C 6.238281 12 4 14.238281 4 17 L 4 38 C 4 40.761719 6.238281 43 9 43 L 41 43 C 43.761719 43 46 40.761719 46 38 L 46 17 C 46 14.238281 43.761719 12 41 12 L 35.902344 12 L 35.5 10.011719 C 35.03125 7.679688 32.980469 6 30.597656 6 Z M 25 17 C 30.519531 17 35 21.480469 35 27 C 35 32.519531 30.519531 37 25 37 C 19.480469 37 15 32.519531 15 27 C 15 21.480469 19.480469 17 25 17 Z M 25 19 C 20.589844 19 17 22.589844 17 27 C 17 31.410156 20.589844 35 25 35 C 29.410156 35 33 31.410156 33 27 C 33 22.589844 29.410156 19 25 19 Z "/></svg>',setting:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"></circle><path d="M19.164 8.861L17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"></path></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36">\t<path d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path>\t<path d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path>\t<path d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path>\t<path d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',fullscreenWeb:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="36" width="36">\t<path d="m 28,11 0,14 -20,0 0,-14 z m -18,2 16,0 0,10 -16,0 0,-10 z" fill-rule="evenodd"></path></svg>',pip:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25,17 L17,17 L17,23 L25,23 L25,17 L25,17 Z M29,25 L29,10.98 C29,9.88 28.1,9 27,9 L9,9 C7.9,9 7,9.88 7,10.98 L7,25 C7,26.1 7.9,27 9,27 L27,27 C28.1,27 29,26.1 29,25 L29,25 Z M27,25.02 L9,25.02 L9,10.97 L27,10.97 L27,25.02 L27,25.02 Z"></path></svg>',arrowLeft:'<svg xmlns="http://www.w3.org/2000/svg" height="100%" version="1.1" viewBox="0 0 32 32" width="100%"><path d="M 19.41,20.09 14.83,15.5 19.41,10.91 18,9.5 l -6,6 6,6 z" fill="#fff" /></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" height="100%" version="1.1" viewBox="0 0 32 32" width="100%"><path d="m 12.59,20.34 4.58,-4.59 -4.58,-4.59 1.41,-1.41 6,6 -6,6 z" fill="#fff"/></svg>',playbackRate:'<svg height="24" viewBox="0 0 24 24" width="24"><path d="M10,8v8l6-4L10,8L10,8z M6.3,5L5.7,4.2C7.2,3,9,2.2,11,2l0.1,1C9.3,3.2,7.7,3.9,6.3,5z            M5,6.3L4.2,5.7C3,7.2,2.2,9,2,11 l1,.1C3.2,9.3,3.9,7.7,5,6.3z            M5,17.7c-1.1-1.4-1.8-3.1-2-4.8L2,13c0.2,2,1,3.8,2.2,5.4L5,17.7z            M11.1,21c-1.8-0.2-3.4-0.9-4.8-2 l-0.6,.8C7.2,21,9,21.8,11,22L11.1,21z            M22,12c0-5.2-3.9-9.4-9-10l-0.1,1c4.6,.5,8.1,4.3,8.1,9s-3.5,8.5-8.1,9l0.1,1 C18.2,21.5,22,17.2,22,12z" fill="white" data-darkreader-inline-fill="" style="--darkreader-inline-fill:#a8a6a4;"></path></svg>',aspectRatio:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" width="88" height="88" preserveAspectRatio="xMidYMid meet" style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px);"><defs><clipPath id="__lottie_element_216"><rect width="88" height="88" x="0" y="0"></rect></clipPath></defs><g clip-path="url(#__lottie_element_216)"><g transform="matrix(1,0,0,1,44,44)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M12.437999725341797,-12.70199966430664 C12.437999725341797,-12.70199966430664 9.618000030517578,-9.881999969482422 9.618000030517578,-9.881999969482422 C8.82800006866455,-9.092000007629395 8.82800006866455,-7.831999778747559 9.618000030517578,-7.052000045776367 C9.618000030517578,-7.052000045776367 16.687999725341797,0.017999999225139618 16.687999725341797,0.017999999225139618 C16.687999725341797,0.017999999225139618 9.618000030517578,7.0879998207092285 9.618000030517578,7.0879998207092285 C8.82800006866455,7.877999782562256 8.82800006866455,9.137999534606934 9.618000030517578,9.918000221252441 C9.618000030517578,9.918000221252441 12.437999725341797,12.748000144958496 12.437999725341797,12.748000144958496 C13.227999687194824,13.527999877929688 14.48799991607666,13.527999877929688 15.267999649047852,12.748000144958496 C15.267999649047852,12.748000144958496 26.58799934387207,1.437999963760376 26.58799934387207,1.437999963760376 C27.368000030517578,0.6579999923706055 27.368000030517578,-0.6119999885559082 26.58799934387207,-1.3919999599456787 C26.58799934387207,-1.3919999599456787 15.267999649047852,-12.70199966430664 15.267999649047852,-12.70199966430664 C14.48799991607666,-13.491999626159668 13.227999687194824,-13.491999626159668 12.437999725341797,-12.70199966430664z M-12.442000389099121,-12.70199966430664 C-13.182000160217285,-13.442000389099121 -14.362000465393066,-13.482000350952148 -15.142000198364258,-12.821999549865723 C-15.142000198364258,-12.821999549865723 -15.272000312805176,-12.70199966430664 -15.272000312805176,-12.70199966430664 C-15.272000312805176,-12.70199966430664 -26.582000732421875,-1.3919999599456787 -26.582000732421875,-1.3919999599456787 C-27.32200050354004,-0.6520000100135803 -27.36199951171875,0.5180000066757202 -26.70199966430664,1.3079999685287476 C-26.70199966430664,1.3079999685287476 -26.582000732421875,1.437999963760376 -26.582000732421875,1.437999963760376 C-26.582000732421875,1.437999963760376 -15.272000312805176,12.748000144958496 -15.272000312805176,12.748000144958496 C-14.531999588012695,13.48799991607666 -13.362000465393066,13.527999877929688 -12.571999549865723,12.868000030517578 C-12.571999549865723,12.868000030517578 -12.442000389099121,12.748000144958496 -12.442000389099121,12.748000144958496 C-12.442000389099121,12.748000144958496 -9.612000465393066,9.918000221252441 -9.612000465393066,9.918000221252441 C-8.871999740600586,9.178000450134277 -8.831999778747559,8.008000373840332 -9.501999855041504,7.2179999351501465 C-9.501999855041504,7.2179999351501465 -9.612000465393066,7.0879998207092285 -9.612000465393066,7.0879998207092285 C-9.612000465393066,7.0879998207092285 -16.68199920654297,0.017999999225139618 -16.68199920654297,0.017999999225139618 C-16.68199920654297,0.017999999225139618 -9.612000465393066,-7.052000045776367 -9.612000465393066,-7.052000045776367 C-8.871999740600586,-7.791999816894531 -8.831999778747559,-8.961999893188477 -9.501999855041504,-9.751999855041504 C-9.501999855041504,-9.751999855041504 -9.612000465393066,-9.881999969482422 -9.612000465393066,-9.881999969482422 C-9.612000465393066,-9.881999969482422 -12.442000389099121,-12.70199966430664 -12.442000389099121,-12.70199966430664z M28,-28 C32.41999816894531,-28 36,-24.420000076293945 36,-20 C36,-20 36,20 36,20 C36,24.420000076293945 32.41999816894531,28 28,28 C28,28 -28,28 -28,28 C-32.41999816894531,28 -36,24.420000076293945 -36,20 C-36,20 -36,-20 -36,-20 C-36,-24.420000076293945 -32.41999816894531,-28 -28,-28 C-28,-28 28,-28 28,-28z" data-darkreader-inline-fill="" style="--darkreader-inline-fill:#a8a6a4;"></path></g></g></g></svg>',config:'<svg height="24" viewBox="0 0 24 24" width="24"><path d="M15,17h6v1h-6V17z M11,17H3v1h8v2h1v-2v-1v-2h-1V17z M14,8h1V6V5V3h-1v2H3v1h11V8z            M18,5v1h3V5H18z M6,14h1v-2v-1V9H6v2H3v1 h3V14z M10,12h11v-1H10V12z" fill="white" data-darkreader-inline-fill="" style="--darkreader-inline-fill:#a8a6a4;"></path></svg>',lock:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1650612139149" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12683" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><defs><style type="text/css"></style></defs><path d="M298.666667 426.666667V341.333333a213.333333 213.333333 0 1 1 426.666666 0v85.333334h42.666667a85.333333 85.333333 0 0 1 85.333333 85.333333v256a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 1-85.333333-85.333333v-256a85.333333 85.333333 0 0 1 85.333333-85.333333h42.666667z m213.333333-213.333334a128 128 0 0 0-128 128v85.333334h256V341.333333a128 128 0 0 0-128-128z" fill="#ffffff" p-id="12684"></path></svg>',unlock:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1650612464266" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14150" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><defs><style type="text/css"></style></defs><path d="M666.752 194.517333L617.386667 268.629333A128 128 0 0 0 384 341.333333l0.042667 85.333334h384a85.333333 85.333333 0 0 1 85.333333 85.333333v256a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 1-85.333333-85.333333v-256a85.333333 85.333333 0 0 1 85.333333-85.333333h42.666667V341.333333a213.333333 213.333333 0 0 1 368.085333-146.816z" fill="#ffffff" p-id="14151"></path></svg>'},a.option.icons);Object.keys(s).forEach((function(t){W(i,t,{get:function(){var e=document.createElement("i");return k(e,"art-icon"),k(e,"art-icon-".concat(t)),$(e,s[t]),e}})}))}));function Ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}function Le(t,e,a){for(var i=0;i<t.length;i++){var s=t[i];s._parentItem=e,s._parentList=a,s.selector&&Le(s.selector,s,t)}return t}var Ne=function(e){n(s,e);var a=Ve(s);function s(e){var i;t(this,s),i=a.call(this,e);var o=e.option,n=e.events.proxy,r=e.template,l=r.$setting,c=r.$player;return i.art=e,i.name="setting",i.$parent=l,i.width=250,i.option=[],i.cache=new Map,o.setting&&(e.once("video:loadedmetadata",(function(){o.playbackRate&&i.option.push(function(t){var e=t.i18n,a=t.icons;function i(t){return 1===t?e.get("Normal"):t}function s(t,e,a){e&&(e.innerText=i(a));var s=y(".art-setting-item",t).find((function(t){return Number(t.dataset.value)===a}));s&&T(s,"art-current")}return{width:200,html:e.get("Play Speed"),tooltip:i(t.playbackRate),icon:a.playbackRate,selector:[.5,.75,1,1.25,1.5,2].map((function(e){return{value:e,default:e===t.playbackRate,html:i(e)}})),onSelect:function(e){t.playbackRate=e.value},mounted:function(e,a){s(e,a._$tooltip,t.playbackRate),t.on("playbackRate",(function(){s(e,a._$tooltip,t.playbackRate)}))}}}(e)),o.aspectRatio&&i.option.push(function(t){var e=t.i18n,a=t.icons;function i(t){return"default"===t?e.get("Default"):t}function s(t,e,a){e&&(e.innerText=i(a));var s=y(".art-setting-item",t).find((function(t){return t.dataset.value===a}));s&&T(s,"art-current")}return{width:200,html:e.get("Aspect Ratio"),icon:a.aspectRatio,tooltip:i(t.aspectRatio),selector:["default","4:3","16:9"].map((function(e){return{value:e,default:e===t.aspectRatio,html:i(e)}})),onSelect:function(e){t.aspectRatio=e.value},mounted:function(e,a){s(e,a._$tooltip,t.aspectRatio),t.on("aspectRatio",(function(){s(e,a._$tooltip,t.aspectRatio)}))}}}(e)),o.flip&&i.option.push(function(t){var e=t.i18n,a=t.icons,i={normal:"Normal",horizontal:"Horizontal",vertical:"Vertical"};function s(t,a,s){a&&(a.innerText=e.get(i[s]));var o=y(".art-setting-item",t).find((function(t){return t.dataset.value===s}));o&&T(o,"art-current")}return{width:200,html:e.get("Video Flip"),tooltip:e.get(i[t.flip]),icon:a.config,selector:Object.keys(i).map((function(a){return{value:a,default:a===t.flip,html:e.get(i[a])}})),onSelect:function(e){t.flip=e.value},mounted:function(e,a){s(e,a._$tooltip,t.flip),t.on("flip",(function(){s(e,a._$tooltip,t.flip)}))}}}(e)),o.subtitleOffset&&i.option.push(function(t){var e=t.i18n,a=t.icons;function i(t){return 0===t?e.get("Normal"):t}function s(t,e,a){e&&(e.innerText=i(a));var s=y(".art-setting-item",t).find((function(t){return Number(t.dataset.value)===a}));s&&T(s,"art-current")}return{width:200,html:e.get("Subtitle Offset"),tooltip:i(t.subtitleOffset),icon:a.subtitle,selector:[-5,-4,-3,-2,-1,0,1,2,3,4,5].map((function(e){return{value:e,default:e===t.subtitleOffset,html:i(e)}})),onSelect:function(e){t.subtitleOffset=e.value},mounted:function(e,a){s(e,a._$tooltip,t.subtitleOffset),t.on("subtitleOffset",(function(){s(e,a._$tooltip,t.subtitleOffset)}))}}}(e));for(var t=0;t<o.settings.length;t++)i.option.push(o.settings[t]);i.option=Le(i.option),i.init(i.option)})),e.on("blur",(function(){i.show&&(i.show=!1,i.init(i.option))})),n(c,"click",(function(t){!i.show||O(t,e.controls.setting)||O(t,i.$parent)||(i.show=!1,i.init(i.option))}))),i}return i(s,[{key:"creatHeader",value:function(t){var e=this,a=this.art,i=a.icons,s=a.events.proxy,o=document.createElement("div");k(o,"art-setting-item"),k(o,"art-setting-item-back");var n=$(o,'<div class="art-setting-item-left"></div>'),r=document.createElement("div");return k(r,"art-setting-item-left-icon"),$(r,i.arrowLeft),$(n,r),$(n,t._parentItem.html),s(o,"click",(function(){e.init(t._parentList)})),o}},{key:"creatItem",value:function(t){var e=this,a=this.art,i=a.icons,s=a.events.proxy,o=t.selector&&t.selector.length,n=document.createElement("div");k(n,"art-setting-item"),t.default&&k(n,"art-current"),void 0!==t.value&&(n.dataset.value=t.value);var r=$(n,'<div class="art-setting-item-left"></div>'),l=$(n,'<div class="art-setting-item-right"></div>'),c=document.createElement("div");if(k(c,"art-setting-item-left-icon"),$(c,o?t.icon||i.config:i.check),$(r,c),$(r,t.html),o){var d=document.createElement("div");k(d,"art-setting-item-right-tooltip"),$(l,d),t._$tooltip=d,t.tooltip&&(d.innerHTML=t.tooltip);var u=document.createElement("div");k(u,"art-setting-item-right-icon"),$(u,i.arrowRight),$(l,u)}return s(n,"click",(function(a){if(o)e.init(t.selector,t.width);else if(T(n,"art-current"),t._parentList&&e.init(t._parentList),t._parentItem&&t._parentItem.onSelect){var i=t._parentItem.onSelect.call(e.art,t,n,a);t._parentItem._$tooltip&&("string"!=typeof i&&"number"!=typeof i||(t._parentItem._$tooltip.innerHTML=i))}})),n}},{key:"add",value:function(t){"function"==typeof t?this.option.push(t(this.art)):this.option.push(t),this.option=Le(this.option),this.init(this.option)}},{key:"init",value:function(t,e){if(this.cache.has(t)){var a=this.cache.get(t);T(a,"art-current"),S(this.$parent,"width","".concat(a.dataset.width,"px"))}else{var i=document.createElement("div");k(i,"art-setting-panel"),t[0]&&t[0]._parentItem&&$(i,this.creatHeader(t[0]));for(var s=0;s<t.length;s++)$(i,this.creatItem(t[s]));i.dataset.width=e||this.width,$(this.$parent,i),this.cache.set(t,i),T(i,"art-current"),S(this.$parent,"width","".concat(i.dataset.width,"px")),t[0]&&t[0]._parentItem&&t[0]._parentItem.mounted&&t[0]._parentItem.mounted.call(this.art,i,t[0]._parentItem)}}}]),s}(Ct),je=function(){function e(){t(this,e),this.name="artplayer_settings",this.settings={}}return i(e,[{key:"get",value:function(t){try{var e=JSON.parse(window.localStorage.getItem(this.name))||{};return t?e[t]:e}catch(e){return t?this.settings[t]:this.settings}}},{key:"set",value:function(t,e){try{var a=Object.assign({},this.get(),it({},t,e));window.localStorage.setItem(this.name,JSON.stringify(a))}catch(a){this.settings[t]=e}}},{key:"del",value:function(t){try{var e=this.get();delete e[t],window.localStorage.setItem(this.name,JSON.stringify(e))}catch(e){delete this.settings[t]}}},{key:"clean",value:function(){try{window.localStorage.removeItem(this.name)}catch(t){this.settings={}}}}]),e}();function Fe(t){return t.layers.add({name:"miniProgressBar",style:{display:"none",position:"absolute",left:0,right:0,bottom:0,height:"2px",backgroundColor:"var(--theme)"},mounted:function(e){t.on("control",(function(t){e.style.display=t?"none":"block"})),t.on("destroy",(function(){e.style.display="none"})),t.on("video:timeupdate",(function(){e.style.width="".concat(100*t.played,"%")}))}}),{name:"miniProgressBar"}}function Be(t){var e=t.layers,a=t.icons,i=t.template.$player;return e.add({name:"lock",mounted:function(e){var i=$(e,a.lock),s=$(e,a.unlock);S(i,"display","none"),t.on("lock",(function(t){t?(S(i,"display","inline-flex"),S(s,"display","none")):(S(i,"display","none"),S(s,"display","inline-flex"))}))},click:function(){w(i,"art-lock")?(x(i,"art-lock"),t.emit("lock",!1)):(k(i,"art-lock"),t.emit("lock",!0))}}),{name:"lock"}}var Me=function(){function e(a){t(this,e),this.art=a,this.id=0;var i=a.option;!i.isLive&&i.miniProgressBar&&this.add(Fe),i.lock&&m&&this.add(Be);for(var s=0;s<i.plugins.length;s++)this.add(i.plugins[s])}return i(e,[{key:"add",value:function(t){this.id+=1;var e=t.call(this,this.art),a=e&&e.name||t.name||"plugin".concat(this.id);return N(!G(this,a),"Cannot add a plugin that already has the same name: ".concat(a)),W(this,a,{value:e}),this}}]),e}(),ze=function(){function e(a){t(this,e),this.art=a,this.init()}return i(e,[{key:"current",get:function(){return this.art.option.ads[this.index]}},{key:"prev",get:function(){return this.art.option.ads[this.index-1]}},{key:"next",get:function(){return this.art.option.ads[this.index+1]}},{key:"init",value:function(){this.index=0,this.isEnd=!1,this.playing=!1,this.urlCache=this.art.option.url,this.current&&(this.playing=!0,this.play(this.current))}},{key:"play",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isEnd||(this.art.switchUrl(e.url),this.art.once("video:timeupdate",(function(){t.art.emit("ads:start",e)})),this.art.once("video:ended",(function(){var e=t.next;e?(t.index+=1,t.play(e)):t.end()})))}},{key:"end",value:function(){this.isEnd||(this.isEnd=!0,this.playing=!1,this.art.option.url=this.urlCache,this.art.switchUrl(this.urlCache),this.art.emit("ads:end"))}}]),e}(),Ue=i((function e(a){t(this,e);for(var i=a.option,s=a.events.proxy,o=a.template.$video,n=0;n<mt.events.length;n++)s(o,mt.events[n],(function(t){a.emit("video:".concat(t.type),t)}));Object.keys(i.moreVideoAttr).forEach((function(t){o[t]=i.moreVideoAttr[t]})),i.muted&&(o.muted=i.muted),i.volume&&(o.volume=Q(i.volume,0,1)),i.poster&&(o.poster=i.poster),i.autoplay&&(o.autoplay=i.autoplay),i.playsInline&&(o.playsInline=!0,o["webkit-playsinline"]=!0);var r=i.type||M(i.url),l=i.customType[r];r&&l?(l(o,i.url,a),a.emit("customType",r)):(o.src=i.url,a.emit("url",o.src))}));function He(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=c(t);if(e){var s=c(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return l(this,a)}}var We=0,qe=[],Ge=function(e){n(o,e);var a=He(o);function o(e,i){var n;t(this,o),(n=a.call(this)).id=++We;var r=K(o.option,e);return n.option=u(r,pt),n.isReady=!1,n.isFocus=!1,n.isDestroy=!1,n.whitelist=new vt(s(n)),n.template=new ft(s(n)),n.events=new De(s(n)),n.whitelist.state?(n.storage=new je(s(n)),n.icons=new Ee(s(n)),n.i18n=new yt(s(n)),n.notice=new Oe(s(n)),n.player=new St(s(n)),n.layers=new Te(s(n)),n.controls=new se(s(n)),n.contextmenu=new be(s(n)),n.subtitle=new Se(s(n)),n.ads=new ze(s(n)),n.info=new ke(s(n)),n.loading=new Ae(s(n)),n.hotkey=new _e(s(n)),n.mask=new Re(s(n)),n.setting=new Ne(s(n)),n.plugins=new Me(s(n))):n.mobile=new Ue(s(n)),"function"==typeof i&&n.on("ready",(function(){return i.call(s(n))})),qe.push(s(n)),n}return i(o,[{key:"proxy",get:function(){return this.events.proxy}},{key:"query",get:function(){return this.template.query}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.events.destroy(),this.template.destroy(t),qe.splice(qe.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}],[{key:"instances",get:function(){return qe}},{key:"version",get:function(){return"4.3.7"}},{key:"env",get:function(){return"production"}},{key:"build",get:function(){return"1650616934539"}},{key:"config",get:function(){return mt}},{key:"utils",get:function(){return at}},{key:"scheme",get:function(){return pt}},{key:"Emitter",get:function(){return h}},{key:"validator",get:function(){return u}},{key:"kindOf",get:function(){return u.kindOf}},{key:"html",get:function(){return ft.html}},{key:"option",get:function(){return{container:"#artplayer",url:"",poster:"",title:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!0,ads:[],layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],whitelist:[],thumbnails:{url:"",number:60,column:10},subtitle:{url:"",type:"",style:{},encoding:"utf-8"},moreVideoAttr:{controls:!1,preload:v?"auto":"metadata"},icons:{},customType:{},lang:navigator.language.toLowerCase()}}}]),o}(h);return console.log("%c ArtPlayer %c 4.3.7 %c https://artplayer.org","color: #fff; background: #5f5f5f","color: #fff; background: #4bc729",""),Ge}))},8712:function(){},2245:function(){},1234:function(t,e,a){"use strict";a.d(e,{Z:function(){return h}});a(6699);var i=a(5648),s=a(8119),o=a(172),n=a(2936),r=a(8085),l=a(144),c=l.Z.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),d=a(3325),u=a(1824),h=(0,d.Z)(i.Z,n.Z,c).extend({name:"v-alert",props:{border:{type:String,validator(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let t={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible(){if(!this.dismissible)return null;const t=this.iconColor;return this.$createElement(s.Z,{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(o.Z,{props:{color:t}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(o.Z,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const t={...i.Z.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(t[`v-alert--border-${this.border}`]=!0),t},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||r.Z.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&(0,u.fK)("outline","outlined",this)},methods:{genWrapper(){const t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(t){const e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},9511:function(t,e,a){"use strict";a(6699),a(8712);var i=a(7032),s=a(5978),o=a(6290),n=a(4589);const r={...i.l,offsetY:!0,offsetOverflow:!0,transition:!1};e["Z"]=i.Z.extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,a)=>a.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:i.Z.options.props.menuProps.type,default:()=>r},noFilter:Boolean,searchInput:{type:String}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...i.Z.options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map((t=>this.getValue(t)))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some((t=>!this.hasItem(t))):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter((t=>{const e=(0,n.qF)(t,this.itemText),a=null!=e?String(e):"";return this.filter(t,String(this.internalSearch),a)}))},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch!==t&&(this.lazySearch=t,this.$emit("update:search-input",t))}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=i.Z.options.computed.$_menuProps.call(this);return t.contentClass=`v-autocomplete__content ${t.contentClass||""}`.trim(),{...r,...t}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find((t=>this.valueComparator(this.getValue(t),this.getValue(this.internalValue))))},listData(){const t=i.Z.options.computed.listData.call(this);return t.props={...t.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.blur(),this.updateSelf())},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=null)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(t,e){if(t!==e){if(!this.autoSelectFirst){const a=e[this.$refs.menu.listIndex];a?this.setMenuIndex(t.findIndex((t=>t===a))):this.setMenuIndex(-1),this.$emit("update:list-index",this.$refs.menu.listIndex)}this.$nextTick((()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.autoSelectFirst&&t.length&&(this.setMenuIndex(0),this.$emit("update:list-index",this.$refs.menu.listIndex)))}))}},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){this.searchIsDirty||(this.multiple&&t===n.Do.left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===n.Do.right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==n.Do.backspace&&t!==n.Do["delete"]||this.deleteCurrentItem())},deleteCurrentItem(){const t=this.selectedIndex,e=this.selectedItems[t];if(!this.isInteractive||this.getDisabled(e))return;const a=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==a)return void(this.selectedIndex=a);const i=this.selectedItems.length,s=t!==i-1?t:t-1,o=this.selectedItems[s];o?this.selectItem(e):this.setValue(this.multiple?[]:null),this.selectedIndex=s},clearableCallback(){this.internalSearch=null,i.Z.options.methods.clearableCallback.call(this)},genInput(){const t=s.Z.options.methods.genInput.call(this);return t.data=(0,o.ZP)(t.data,{attrs:{"aria-activedescendant":(0,n.vO)(this.$refs.menu,"activeTile.id"),autocomplete:(0,n.vO)(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot(){const t=i.Z.options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?i.Z.options.methods.genSelections.call(this):[]},onClick(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,a=e.value;e.value&&this.activateMenu(),this.multiple||""!==a||this.deleteCurrentItem(),this.internalSearch=a,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;!t.ctrlKey&&[n.Do.home,n.Do.end].includes(e)||i.Z.options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){i.Z.options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(t){t.preventDefault(),this.activateMenu()},selectItem(t){i.Z.options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){i.Z.options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick((()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))}))},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.multiple||this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy(t){var e,a;if(-1===this.selectedIndex)return;const i=this.selectedItems[this.selectedIndex],s=this.getText(i);null==(e=t.clipboardData)||e.setData("text/plain",s),null==(a=t.clipboardData)||a.setData("text/vnd.vuetify.autocomplete.item+plain",s),t.preventDefault()}}})},3702:function(t,e,a){"use strict";a.d(e,{Z:function(){return n}});a(2245);var i=a(172),s=a(8230),o=a(7764),n=o.Z.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...s.Z.options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick((()=>this.inputIndeterminate=t))},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(i.Z,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...e,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},5359:function(t,e,a){"use strict";a(6699),a(8712);var i=a(7032),s=a(9511),o=a(4589);e["Z"]=s.Z.extend({name:"v-combobox",props:{delimiters:{type:Array,default:()=>[]},returnObject:{type:Boolean,default:!0}},data:()=>({editingIndex:-1}),computed:{computedCounterValue(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot(){return i.Z.options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed(){return!0},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)},searchIsDirty(){return null!=this.internalSearch}},methods:{onInternalSearchChanged(t){if(t&&this.multiple&&this.delimiters.length){const e=this.delimiters.find((e=>t.endsWith(e)));null!=e&&(this.internalSearch=t.slice(0,t.length-e.length),this.updateTags())}this.updateMenuDimensions()},genInput(){const t=s.Z.options.methods.genInput.call(this);return delete t.data.attrs.name,t.data.on.paste=this.onPaste,t},genChipSelection(t,e){const a=i.Z.options.methods.genChipSelection.call(this,t,e);return this.multiple&&(a.componentOptions.listeners={...a.componentOptions.listeners,dblclick:()=>{this.editingIndex=e,this.internalSearch=this.getText(t),this.selectedIndex=-1}}),a},onChipInput(t){i.Z.options.methods.onChipInput.call(this,t),this.editingIndex=-1},onEnterDown(t){t.preventDefault(),this.getMenuIndex()>-1||this.$nextTick(this.updateSelf)},onKeyDown(t){const e=t.keyCode;!t.ctrlKey&&[o.Do.home,o.Do.end].includes(e)||i.Z.options.methods.onKeyDown.call(this,t),this.multiple&&e===o.Do.left&&0===this.$refs.input.selectionStart?this.updateSelf():e===o.Do.enter&&this.onEnterDown(t),this.changeSelectedIndex(e)},onTabDown(t){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return t.preventDefault(),t.stopPropagation(),this.updateTags();s.Z.options.methods.onTabDown.call(this,t)},selectItem(t){this.editingIndex>-1?this.updateEditing():(s.Z.options.methods.selectItem.call(this,t),this.internalSearch&&this.multiple&&this.getText(t).toLocaleLowerCase().includes(this.internalSearch.toLocaleLowerCase())&&(this.internalSearch=null))},setSelectedItems(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue(t){i.Z.options.methods.setValue.call(this,void 0===t?this.internalSearch:t)},updateEditing(){const t=this.internalValue.slice(),e=this.selectedItems.findIndex((t=>this.getText(t)===this.internalSearch));if(e>-1){const a="object"===typeof t[e]?Object.assign({},t[e]):t[e];t.splice(e,1),t.push(a)}else t[this.editingIndex]=this.internalSearch;this.setValue(t),this.editingIndex=-1,this.internalSearch=null},updateCombobox(){if(!this.searchIsDirty)return;this.internalSearch!==this.getText(this.internalValue)&&this.setValue();const t=Boolean(this.$scopedSlots.selection)||this.hasChips;t&&(this.internalSearch=null)},updateSelf(){this.multiple?this.updateTags():this.updateCombobox()},updateTags(){const t=this.getMenuIndex();if(t<0&&!this.searchIsDirty||!this.internalSearch)return;if(this.editingIndex>-1)return this.updateEditing();const e=this.selectedItems.findIndex((t=>this.internalSearch===this.getText(t))),a=e>-1&&"object"===typeof this.selectedItems[e]?Object.assign({},this.selectedItems[e]):this.internalSearch;if(e>-1){const t=this.internalValue.slice();t.splice(e,1),this.setValue(t)}if(t>-1)return this.internalSearch=null;this.selectItem(a),this.internalSearch=null},onPaste(t){var e;if(!this.multiple||this.searchIsDirty)return;const a=null==(e=t.clipboardData)?void 0:e.getData("text/vnd.vuetify.autocomplete.item+plain");a&&-1===this.findExistingIndex(a)&&(t.preventDefault(),i.Z.options.methods.selectItem.call(this,a))},clearableCallback(){this.editingIndex=-1,s.Z.options.methods.clearableCallback.call(this)}}})},4484:function(t,e,a){"use strict";a.d(e,{Z:function(){return z}});a(6699);var i=a(172),s=a(6952),o=a(3325),n=a(4589),r=(0,o.Z)(s.Z).extend({methods:{genPickerButton(t,e,a,i=!1,s=""){const o=this[t]===e,r=a=>{a.stopPropagation(),this.$emit(`update:${(0,n.GL)(t)}`,e)};return this.$createElement("div",{staticClass:`v-picker__title__btn ${s}`.trim(),class:{"v-picker__title__btn--active":o,"v-picker__title__btn--readonly":i},on:o||i?void 0:{click:r}},Array.isArray(a)?a:[a])}}}),l=(0,o.Z)(r).extend({name:"v-date-picker-title",props:{date:{type:String,default:""},disabled:Boolean,readonly:Boolean,selectingYear:Boolean,value:{type:String},year:{type:[Number,String],default:""},yearIcon:{type:String}},data:()=>({isReversing:!1}),computed:{computedTransition(){return this.isReversing?"picker-reverse-transition":"picker-transition"}},watch:{value(t,e){this.isReversing=t<e}},methods:{genYearIcon(){return this.$createElement(i.Z,{props:{dark:!0}},this.yearIcon)},getYearBtn(){return this.genPickerButton("selectingYear",!0,[String(this.year),this.yearIcon?this.genYearIcon():null],!1,"v-date-picker-title__year")},genTitleText(){return this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("div",{domProps:{innerHTML:this.date||"&nbsp;"},key:this.value})])},genTitleDate(){return this.genPickerButton("selectingYear",!1,[this.genTitleText()],!1,"v-date-picker-title__date")}},render(t){return t("div",{staticClass:"v-date-picker-title",class:{"v-date-picker-title--disabled":this.disabled}},[this.getYearBtn(),this.genTitleDate()])}}),c=a(8119),d=a(144),u=d.Z.extend({name:"localable",props:{locale:String},computed:{currentLocale(){return this.locale||this.$vuetify.lang.current}}}),h=a(8085);const p=(t,e,a)=>(e>>=0,t=String(t),a=String(a),t.length>e?String(t):(e-=t.length,e>a.length&&(a+=a.repeat(e/a.length)),a.slice(0,e)+String(t)));var m=(t,e=2)=>p(t,e,"0");function v(t,e,a={start:0,length:0}){const i=t=>{const[e,a,i]=t.trim().split(" ")[0].split("-");return[m(e,4),m(a||1),m(i||1)].join("-")};try{const a=new Intl.DateTimeFormat(t||void 0,e);return t=>a.format(new Date(`${i(t)}T00:00:00+00:00`))}catch(s){return a.start||a.length?t=>i(t).substr(a.start||0,a.length):void 0}}var f=v,g=(t,e)=>{const[a,i]=t.split("-").map(Number);return i+e===0?a-1+"-12":i+e===13?`${a+1}-01`:`${a}-${m(i+e)}`},b=(0,o.Z)(s.Z,u,h.Z).extend({name:"v-date-picker-header",props:{disabled:Boolean,format:Function,min:String,max:String,nextAriaLabel:String,nextIcon:{type:String,default:"$next"},prevAriaLabel:String,prevIcon:{type:String,default:"$prev"},readonly:Boolean,value:{type:[Number,String],required:!0}},data(){return{isReversing:!1}},computed:{formatter(){return this.format?this.format:String(this.value).split("-")[1]?f(this.currentLocale,{month:"long",year:"numeric",timeZone:"UTC"},{length:7}):f(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},watch:{value(t,e){this.isReversing=t<e}},methods:{genBtn(t){const e=t>0?this.nextAriaLabel:this.prevAriaLabel,a=e?this.$vuetify.lang.t(e):void 0,s=this.disabled||t<0&&this.min&&this.calculateChange(t)<this.min||t>0&&this.max&&this.calculateChange(t)>this.max;return this.$createElement(c.Z,{attrs:{"aria-label":a},props:{dark:this.dark,disabled:s,icon:!0,light:this.light},on:{click:e=>{e.stopPropagation(),this.$emit("input",this.calculateChange(t))}}},[this.$createElement(i.Z,t<0===!this.$vuetify.rtl?this.prevIcon:this.nextIcon)])},calculateChange(t){const[e,a]=String(this.value).split("-").map(Number);return null==a?`${e+t}`:g(String(this.value),t)},genHeader(){const t=!this.disabled&&(this.color||"accent"),e=this.$createElement("div",this.setTextColor(t,{key:String(this.value)}),[this.$createElement("button",{attrs:{type:"button"},on:{click:()=>this.$emit("toggle")}},[this.$slots.default||this.formatter(String(this.value))])]),a=this.$createElement("transition",{props:{name:this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"}},[e]);return this.$createElement("div",{staticClass:"v-date-picker-header__value",class:{"v-date-picker-header__value--disabled":this.disabled}},[a])}},render(){return this.$createElement("div",{staticClass:"v-date-picker-header",class:{"v-date-picker-header--disabled":this.disabled,...this.themeClasses}},[this.genBtn(-1),this.genHeader(),this.genBtn(1)])}}),y=a(5500);function k(t,e,a){return Object.keys(t.$listeners).reduce(((i,s)=>(s.endsWith(e)&&(i[s.slice(0,-e.length)]=e=>t.$emit(s,a,e)),i)),{})}function x(t,e){return Object.keys(t.$listeners).reduce(((a,i)=>(i.endsWith(e)&&(a[i]=t.$listeners[i]),a)),{})}var w=(t,e)=>{const[a,i=1,s=1]=t.split("-");return`${a}-${m(i)}-${m(s)}`.substr(0,{date:10,month:7,year:4}[e])};function $(t,e,a,i){return(!i||i(t))&&(!e||t>=e.substr(0,10))&&(!a||t<=a)}var S=a(6290),D=(0,o.Z)(s.Z,u,h.Z).extend({directives:{Touch:y.Z},props:{allowedDates:Function,current:String,disabled:Boolean,format:Function,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},min:String,max:String,range:Boolean,readonly:Boolean,scrollable:Boolean,tableDate:{type:String,required:!0},value:[String,Array]},data:()=>({isReversing:!1,wheelThrottle:null}),computed:{computedTransition(){return this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"},displayedMonth(){return Number(this.tableDate.split("-")[1])-1},displayedYear(){return Number(this.tableDate.split("-")[0])}},watch:{tableDate(t,e){this.isReversing=t<e}},mounted(){this.wheelThrottle=(0,n.P2)(this.wheel,250)},methods:{genButtonClasses(t,e,a,i,s,o){return{"v-size--default":!e,"v-date-picker-table__current":i,"v-btn--active":a,"v-btn--flat":!t||this.disabled,"v-btn--text":a===i,"v-btn--rounded":e,"v-btn--disabled":!t||this.disabled,"v-btn--outlined":i&&!a,"v-date-picker--first-in-range":s,"v-date-picker--last-in-range":o,...this.themeClasses}},genButtonEvents(t,e,a){if(!this.disabled)return(0,S.bp)({click:()=>{e&&!this.readonly&&this.$emit("input",t)}},k(this,`:${a}`,t))},genButton(t,e,a,i,s=!1){const o=$(t,this.min,this.max,this.allowedDates),n=this.isSelected(t)&&o,r=t===this.current,l=n?this.setBackgroundColor:this.setTextColor,c=(n||r)&&(this.color||"accent");let d=!1,u=!1;return this.range&&this.value&&Array.isArray(this.value)&&(d=t===this.value[0],u=t===this.value[this.value.length-1]),this.$createElement("button",l(c,{staticClass:"v-btn",class:this.genButtonClasses(o&&!s,e,n,r,d,u),attrs:{type:"button"},domProps:{disabled:this.disabled||!o||s},on:this.genButtonEvents(t,o,a)}),[this.$createElement("div",{staticClass:"v-btn__content"},[i(t)]),this.genEvents(t)])},getEventColors(t){const e=t=>Array.isArray(t)?t:[t];let a,i=[];return a=Array.isArray(this.events)?this.events.includes(t):this.events instanceof Function?this.events(t)||!1:this.events&&this.events[t]||!1,a?(i=!0!==a?e(a):"string"===typeof this.eventColor?[this.eventColor]:"function"===typeof this.eventColor?e(this.eventColor(t)):Array.isArray(this.eventColor)?this.eventColor:e(this.eventColor[t]),i.filter((t=>t))):[]},genEvents(t){const e=this.getEventColors(t);return e.length?this.$createElement("div",{staticClass:"v-date-picker-table__events"},e.map((t=>this.$createElement("div",this.setBackgroundColor(t))))):null},isValidScroll(t,e){const a=e(t),i=1===a.split("-").length?"year":"month";return t<0&&(!this.min||a>=w(this.min,i))||t>0&&(!this.max||a<=w(this.max,i))},wheel(t,e){this.$emit("update:table-date",e(t.deltaY))},touch(t,e){this.$emit("update:table-date",e(t))},genTable(t,e,a){const i=this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("table",{key:this.tableDate},e)]),s={name:"touch",value:{left:t=>t.offsetX<-15&&this.isValidScroll(1,a)&&this.touch(1,a),right:t=>t.offsetX>15&&this.isValidScroll(-1,a)&&this.touch(-1,a)}};return this.$createElement("div",{staticClass:t,class:{"v-date-picker-table--disabled":this.disabled,...this.themeClasses},on:!this.disabled&&this.scrollable?{wheel:t=>{t.preventDefault(),this.isValidScroll(t.deltaY,a)&&this.wheelThrottle(t,a)}}:void 0,directives:[s]},[i])},isSelected(t){if(Array.isArray(this.value)){if(this.range&&2===this.value.length){const[e,a]=[...this.value].sort();return e<=t&&t<=a}return-1!==this.value.indexOf(t)}return t===this.value}}});function _(t,e=0,a=1){let i;return t<100&&t>=0?(i=new Date(Date.UTC(t,e,a)),isFinite(i.getUTCFullYear())&&i.setUTCFullYear(t)):i=new Date(Date.UTC(t,e,a)),i}function C(t,e,a){const i=7+e-a,s=(7+_(t,0,i).getUTCDay()-e)%7;return-s+i-1}function T(t,e,a,i){let s=[0,31,59,90,120,151,181,212,243,273,304,334][e];return e>1&&O(t)&&s++,s+a}function P(t,e,a){const i=C(t,e,a),s=C(t+1,e,a),o=O(t)?366:365;return(o-i+s)/7}function A(t,e,a,i,s){const o=C(t,i,s),n=Math.ceil((T(t,e,a,i)-o)/7);return n<1?n+P(t-1,i,s):n>P(t,i,s)?n-P(t,i,s):n}function O(t){return t%4===0&&t%100!==0||t%400===0}var I=(0,o.Z)(D).extend({name:"v-date-picker-date-table",props:{firstDayOfWeek:{type:[String,Number],default:0},localeFirstDayOfYear:{type:[String,Number],default:0},showAdjacentMonths:Boolean,showWeek:Boolean,weekdayFormat:Function},computed:{formatter(){return this.format||f(this.currentLocale,{day:"numeric",timeZone:"UTC"},{start:8,length:2})},weekdayFormatter(){return this.weekdayFormat||f(this.currentLocale,{weekday:"narrow",timeZone:"UTC"})},weekDays(){const t=parseInt(this.firstDayOfWeek,10);return this.weekdayFormatter?(0,n.MT)(7).map((e=>this.weekdayFormatter(`2017-01-${t+e+15}`))):(0,n.MT)(7).map((e=>["S","M","T","W","T","F","S"][(e+t)%7]))}},methods:{calculateTableDate(t){return g(this.tableDate,Math.sign(t||1))},genTHead(){const t=this.weekDays.map((t=>this.$createElement("th",t)));return this.showWeek&&t.unshift(this.$createElement("th")),this.$createElement("thead",this.genTR(t))},weekDaysBeforeFirstDayOfTheMonth(){const t=new Date(`${this.displayedYear}-${m(this.displayedMonth+1)}-01T00:00:00+00:00`),e=t.getUTCDay();return(e-parseInt(this.firstDayOfWeek)+7)%7},getWeekNumber(t){return A(this.displayedYear,this.displayedMonth,t,parseInt(this.firstDayOfWeek),parseInt(this.localeFirstDayOfYear))},genWeekNumber(t){return this.$createElement("td",[this.$createElement("small",{staticClass:"v-date-picker-table--date__week"},String(t).padStart(2,"0"))])},genTBody(){const t=[],e=new Date(this.displayedYear,this.displayedMonth+1,0).getDate();let a=[],i=this.weekDaysBeforeFirstDayOfTheMonth();this.showWeek&&a.push(this.genWeekNumber(this.getWeekNumber(1)));const s=this.displayedMonth?this.displayedYear:this.displayedYear-1,o=(this.displayedMonth+11)%12,n=new Date(this.displayedYear,this.displayedMonth,0).getDate(),r=this.showWeek?8:7;while(i--){const t=`${s}-${m(o+1)}-${m(n-i)}`;a.push(this.$createElement("td",this.showAdjacentMonths?[this.genButton(t,!0,"date",this.formatter,!0)]:[]))}for(i=1;i<=e;i++){const s=`${this.displayedYear}-${m(this.displayedMonth+1)}-${m(i)}`;a.push(this.$createElement("td",[this.genButton(s,!0,"date",this.formatter)])),a.length%r===0&&(t.push(this.genTR(a)),a=[],this.showWeek&&(i<e||this.showAdjacentMonths)&&a.push(this.genWeekNumber(this.getWeekNumber(i+7))))}const l=11===this.displayedMonth?this.displayedYear+1:this.displayedYear,c=(this.displayedMonth+1)%12;let d=1;while(a.length<r){const t=`${l}-${m(c+1)}-${m(d++)}`;a.push(this.$createElement("td",this.showAdjacentMonths?[this.genButton(t,!0,"date",this.formatter,!0)]:[]))}return a.length&&t.push(this.genTR(a)),this.$createElement("tbody",t)},genTR(t){return[this.$createElement("tr",t)]}},render(){return this.genTable("v-date-picker-table v-date-picker-table--date",[this.genTHead(),this.genTBody()],this.calculateTableDate)}}),R=(0,o.Z)(D).extend({name:"v-date-picker-month-table",computed:{formatter(){return this.format||f(this.currentLocale,{month:"short",timeZone:"UTC"},{start:5,length:2})}},methods:{calculateTableDate(t){return`${parseInt(this.tableDate,10)+Math.sign(t||1)}`},genTBody(){const t=[],e=Array(3).fill(null),a=12/e.length;for(let i=0;i<a;i++){const a=e.map(((t,a)=>{const s=i*e.length+a,o=`${this.displayedYear}-${m(s+1)}`;return this.$createElement("td",{key:s},[this.genButton(o,!1,"month",this.formatter)])}));t.push(this.$createElement("tr",{key:i},a))}return this.$createElement("tbody",t)}},render(){return this.genTable("v-date-picker-table v-date-picker-table--month",[this.genTBody()],this.calculateTableDate)}}),Z=(0,o.Z)(s.Z,u).extend({name:"v-date-picker-years",props:{format:Function,min:[Number,String],max:[Number,String],readonly:Boolean,value:[Number,String]},data(){return{defaultColor:"primary"}},computed:{formatter(){return this.format||f(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},mounted(){setTimeout((()=>{const t=this.$el.getElementsByClassName("active")[0];t?this.$el.scrollTop=t.offsetTop-this.$el.offsetHeight/2+t.offsetHeight/2:this.min&&!this.max?this.$el.scrollTop=this.$el.scrollHeight:!this.min&&this.max?this.$el.scrollTop=0:this.$el.scrollTop=this.$el.scrollHeight/2-this.$el.offsetHeight/2}))},methods:{genYearItem(t){const e=this.formatter(`${t}`),a=parseInt(this.value,10)===t,i=a&&(this.color||"primary");return this.$createElement("li",this.setTextColor(i,{key:t,class:{active:a},on:(0,S.bp)({click:()=>this.$emit("input",t)},k(this,":year",t))}),e)},genYearItems(){const t=[],e=this.value?parseInt(this.value,10):(new Date).getFullYear(),a=this.max?parseInt(this.max,10):e+100,i=Math.min(a,this.min?parseInt(this.min,10):e-100);for(let s=a;s>=i;s--)t.push(this.genYearItem(s));return t}},render(){return this.$createElement("ul",{staticClass:"v-date-picker-years",ref:"years"},this.genYearItems())}}),E=(a(9968),a(3377)),V=(0,o.Z)(s.Z,E.Z,h.Z).extend({name:"v-picker",props:{flat:Boolean,fullWidth:Boolean,landscape:Boolean,noTitle:Boolean,transition:{type:String,default:"fade-transition"},width:{type:[Number,String],default:290}},computed:{computedTitleColor(){const t=!this.isDark&&(this.color||"primary");return this.color||t}},methods:{genTitle(){return this.$createElement("div",this.setBackgroundColor(this.computedTitleColor,{staticClass:"v-picker__title",class:{"v-picker__title--landscape":this.landscape}}),this.$slots.title)},genBodyTransition(){return this.$createElement("transition",{props:{name:this.transition}},this.$slots.default)},genBody(){return this.$createElement("div",{staticClass:"v-picker__body",class:{"v-picker__body--no-title":this.noTitle,...this.themeClasses},style:this.fullWidth?void 0:{width:(0,n.kb)(this.width)}},[this.genBodyTransition()])},genActions(){return this.$createElement("div",{staticClass:"v-picker__actions v-card__actions",class:{"v-picker__actions--no-title":this.noTitle}},this.$slots.actions)}},render(t){return t("div",{staticClass:"v-picker v-card",class:{"v-picker--flat":this.flat,"v-picker--landscape":this.landscape,"v-picker--full-width":this.fullWidth,...this.themeClasses,...this.elevationClasses}},[this.$slots.title?this.genTitle():null,this.genBody(),this.$slots.actions?this.genActions():null])}}),L=V,N=(0,o.Z)(s.Z,E.Z,h.Z).extend({name:"picker",props:{flat:Boolean,fullWidth:Boolean,headerColor:String,landscape:Boolean,noTitle:Boolean,width:{type:[Number,String],default:290}},methods:{genPickerTitle(){return null},genPickerBody(){return null},genPickerActionsSlot(){return this.$scopedSlots.default?this.$scopedSlots.default({save:this.save,cancel:this.cancel}):this.$slots.default},genPicker(t){const e=[];if(!this.noTitle){const t=this.genPickerTitle();t&&e.push(t)}const a=this.genPickerBody();return a&&e.push(a),e.push(this.$createElement("template",{slot:"actions"},[this.genPickerActionsSlot()])),this.$createElement(L,{staticClass:t,props:{color:this.headerColor||this.color,dark:this.dark,elevation:this.elevation,flat:this.flat,fullWidth:this.fullWidth,landscape:this.landscape,light:this.light,width:this.width,noTitle:this.noTitle}},e)}}});a(1703);const j=[0,31,28,31,30,31,30,31,31,30,31,30,31],F=[0,31,29,31,30,31,30,31,31,30,31,30,31];function B(t,e){return O(t)?F[e]:j[e]}var M=a(1824),z=(0,o.Z)(u,N).extend({name:"v-date-picker",props:{activePicker:String,allowedDates:Function,dayFormat:Function,disabled:Boolean,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},firstDayOfWeek:{type:[String,Number],default:0},headerDateFormat:Function,localeFirstDayOfYear:{type:[String,Number],default:0},max:String,min:String,monthFormat:Function,multiple:Boolean,nextIcon:{type:String,default:"$next"},nextMonthAriaLabel:{type:String,default:"$vuetify.datePicker.nextMonthAriaLabel"},nextYearAriaLabel:{type:String,default:"$vuetify.datePicker.nextYearAriaLabel"},pickerDate:String,prevIcon:{type:String,default:"$prev"},prevMonthAriaLabel:{type:String,default:"$vuetify.datePicker.prevMonthAriaLabel"},prevYearAriaLabel:{type:String,default:"$vuetify.datePicker.prevYearAriaLabel"},range:Boolean,reactive:Boolean,readonly:Boolean,scrollable:Boolean,showCurrent:{type:[Boolean,String],default:!0},selectedItemsText:{type:String,default:"$vuetify.datePicker.itemsSelected"},showAdjacentMonths:Boolean,showWeek:Boolean,titleDateFormat:Function,type:{type:String,default:"date",validator:t=>["date","month"].includes(t)},value:[Array,String],weekdayFormat:Function,yearFormat:Function,yearIcon:String},data(){const t=new Date;return{internalActivePicker:this.type.toUpperCase(),inputDay:null,inputMonth:null,inputYear:null,isReversing:!1,now:t,tableDate:(()=>{if(this.pickerDate)return this.pickerDate;const e=(0,n.TI)(this.value),a=e[e.length-1]||("string"===typeof this.showCurrent?this.showCurrent:`${t.getFullYear()}-${t.getMonth()+1}`);return w(a,"date"===this.type?"month":"year")})()}},computed:{multipleValue(){return(0,n.TI)(this.value)},isMultiple(){return this.multiple||this.range},lastValue(){return this.isMultiple?this.multipleValue[this.multipleValue.length-1]:this.value},selectedMonths(){return this.value&&"month"!==this.type?this.isMultiple?this.multipleValue.map((t=>t.substr(0,7))):this.value.substr(0,7):this.value},current(){return!0===this.showCurrent?w(`${this.now.getFullYear()}-${this.now.getMonth()+1}-${this.now.getDate()}`,this.type):this.showCurrent||null},inputDate(){return"date"===this.type?`${this.inputYear}-${m(this.inputMonth+1)}-${m(this.inputDay)}`:`${this.inputYear}-${m(this.inputMonth+1)}`},tableMonth(){return Number((this.pickerDate||this.tableDate).split("-")[1])-1},tableYear(){return Number((this.pickerDate||this.tableDate).split("-")[0])},minMonth(){return this.min?w(this.min,"month"):null},maxMonth(){return this.max?w(this.max,"month"):null},minYear(){return this.min?w(this.min,"year"):null},maxYear(){return this.max?w(this.max,"year"):null},formatters(){return{year:this.yearFormat||f(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4}),titleDate:this.titleDateFormat||(this.isMultiple?this.defaultTitleMultipleDateFormatter:this.defaultTitleDateFormatter)}},defaultTitleMultipleDateFormatter(){return t=>t.length?1===t.length?this.defaultTitleDateFormatter(t[0]):this.$vuetify.lang.t(this.selectedItemsText,t.length):"-"},defaultTitleDateFormatter(){const t={year:{year:"numeric",timeZone:"UTC"},month:{month:"long",timeZone:"UTC"},date:{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"}},e=f(this.currentLocale,t[this.type],{start:0,length:{date:10,month:7,year:4}[this.type]}),a=t=>e(t).replace(/([^\d\s])([\d])/g,((t,e,a)=>`${e} ${a}`)).replace(", ",",<br>");return this.landscape?a:e}},watch:{internalActivePicker:{immediate:!0,handler(t){this.$emit("update:active-picker",t)}},activePicker(t){this.internalActivePicker=t},tableDate(t,e){const a="month"===this.type?"year":"month";this.isReversing=w(t,a)<w(e,a),this.$emit("update:picker-date",t)},pickerDate(t){t?this.tableDate=t:this.lastValue&&"date"===this.type?this.tableDate=w(this.lastValue,"month"):this.lastValue&&"month"===this.type&&(this.tableDate=w(this.lastValue,"year"))},value(t,e){this.checkMultipleProp(),this.setInputDate(),(this.isMultiple||!this.value||this.pickerDate)&&(!this.isMultiple||!this.multipleValue.length||e&&e.length||this.pickerDate)||(this.tableDate=w(this.inputDate,"month"===this.type?"year":"month"))},type(t){if(this.internalActivePicker=t.toUpperCase(),this.value&&this.value.length){const e=this.multipleValue.map((e=>w(e,t))).filter(this.isDateAllowed);this.$emit("input",this.isMultiple?e:e[0])}}},created(){this.checkMultipleProp(),this.pickerDate!==this.tableDate&&this.$emit("update:picker-date",this.tableDate),this.setInputDate()},methods:{emitInput(t){if(this.range){if(1!==this.multipleValue.length)this.$emit("input",[t]);else{const e=[this.multipleValue[0],t];this.$emit("input",e),this.$emit("change",e)}return}const e=this.multiple?-1===this.multipleValue.indexOf(t)?this.multipleValue.concat([t]):this.multipleValue.filter((e=>e!==t)):t;this.$emit("input",e),this.multiple||this.$emit("change",t)},checkMultipleProp(){if(null==this.value)return;const t=this.value.constructor.name,e=this.isMultiple?"Array":"String";t!==e&&(0,M.Kd)(`Value must be ${this.isMultiple?"an":"a"} ${e}, got ${t}`,this)},isDateAllowed(t){return $(t,this.min,this.max,this.allowedDates)},yearClick(t){this.inputYear=t,"month"===this.type?this.tableDate=`${t}`:this.tableDate=`${t}-${m((this.tableMonth||0)+1)}`,this.internalActivePicker="MONTH",this.reactive&&!this.readonly&&!this.isMultiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)},monthClick(t){this.inputYear=parseInt(t.split("-")[0],10),this.inputMonth=parseInt(t.split("-")[1],10)-1,"date"===this.type?(this.inputDay&&(this.inputDay=Math.min(this.inputDay,B(this.inputYear,this.inputMonth+1))),this.tableDate=t,this.internalActivePicker="DATE",this.reactive&&!this.readonly&&!this.isMultiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)):this.emitInput(this.inputDate)},dateClick(t){this.inputYear=parseInt(t.split("-")[0],10),this.inputMonth=parseInt(t.split("-")[1],10)-1,this.inputDay=parseInt(t.split("-")[2],10),this.emitInput(this.inputDate)},genPickerTitle(){return this.$createElement(l,{props:{date:this.value?this.formatters.titleDate(this.isMultiple?this.multipleValue:this.value):"",disabled:this.disabled,readonly:this.readonly,selectingYear:"YEAR"===this.internalActivePicker,year:this.formatters.year(this.multipleValue.length?`${this.inputYear}`:this.tableDate),yearIcon:this.yearIcon,value:this.multipleValue[0]},slot:"title",on:{"update:selecting-year":t=>this.internalActivePicker=t?"YEAR":this.type.toUpperCase()}})},genTableHeader(){return this.$createElement(b,{props:{nextIcon:this.nextIcon,color:this.color,dark:this.dark,disabled:this.disabled,format:this.headerDateFormat,light:this.light,locale:this.locale,min:"DATE"===this.internalActivePicker?this.minMonth:this.minYear,max:"DATE"===this.internalActivePicker?this.maxMonth:this.maxYear,nextAriaLabel:"DATE"===this.internalActivePicker?this.nextMonthAriaLabel:this.nextYearAriaLabel,prevAriaLabel:"DATE"===this.internalActivePicker?this.prevMonthAriaLabel:this.prevYearAriaLabel,prevIcon:this.prevIcon,readonly:this.readonly,value:"DATE"===this.internalActivePicker?`${m(this.tableYear,4)}-${m(this.tableMonth+1)}`:`${m(this.tableYear,4)}`},on:{toggle:()=>this.internalActivePicker="DATE"===this.internalActivePicker?"MONTH":"YEAR",input:t=>this.tableDate=t}})},genDateTable(){return this.$createElement(I,{props:{allowedDates:this.allowedDates,color:this.color,current:this.current,dark:this.dark,disabled:this.disabled,events:this.events,eventColor:this.eventColor,firstDayOfWeek:this.firstDayOfWeek,format:this.dayFormat,light:this.light,locale:this.locale,localeFirstDayOfYear:this.localeFirstDayOfYear,min:this.min,max:this.max,range:this.range,readonly:this.readonly,scrollable:this.scrollable,showAdjacentMonths:this.showAdjacentMonths,showWeek:this.showWeek,tableDate:`${m(this.tableYear,4)}-${m(this.tableMonth+1)}`,value:this.value,weekdayFormat:this.weekdayFormat},ref:"table",on:{input:this.dateClick,"update:table-date":t=>this.tableDate=t,...x(this,":date")}})},genMonthTable(){return this.$createElement(R,{props:{allowedDates:"month"===this.type?this.allowedDates:null,color:this.color,current:this.current?w(this.current,"month"):null,dark:this.dark,disabled:this.disabled,events:"month"===this.type?this.events:null,eventColor:"month"===this.type?this.eventColor:null,format:this.monthFormat,light:this.light,locale:this.locale,min:this.minMonth,max:this.maxMonth,range:this.range,readonly:this.readonly&&"month"===this.type,scrollable:this.scrollable,value:this.selectedMonths,tableDate:`${m(this.tableYear,4)}`},ref:"table",on:{input:this.monthClick,"update:table-date":t=>this.tableDate=t,...x(this,":month")}})},genYears(){return this.$createElement(Z,{props:{color:this.color,format:this.yearFormat,locale:this.locale,min:this.minYear,max:this.maxYear,value:this.tableYear},on:{input:this.yearClick,...x(this,":year")}})},genPickerBody(){const t="YEAR"===this.internalActivePicker?[this.genYears()]:[this.genTableHeader(),"DATE"===this.internalActivePicker?this.genDateTable():this.genMonthTable()];return this.$createElement("div",{key:this.internalActivePicker},t)},setInputDate(){if(this.lastValue){const t=this.lastValue.split("-");this.inputYear=parseInt(t[0],10),this.inputMonth=parseInt(t[1],10)-1,"date"===this.type&&(this.inputDay=parseInt(t[2],10))}else this.inputYear=this.inputYear||this.now.getFullYear(),this.inputMonth=null==this.inputMonth?this.inputMonth:this.now.getMonth(),this.inputDay=this.inputDay||this.now.getDate()}},render(){return this.genPicker("v-picker--date")}})},4497:function(t,e,a){"use strict";a.d(e,{Z:function(){return v}});a(6699);var i=a(3242),s=a(5795),o=a(5907),n=a(3944),r=a(390),l=a(423),c=a(5703),d=a(5600),u=a(3325),h=a(1824),p=a(4589);const m=(0,u.Z)(o.Z,n.Z,r.Z,l.Z,c.Z,s.Z);var v=m.extend({name:"v-dialog",directives:{ClickOutside:d.Z},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,h.Jk)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):r.Z.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{this.$refs.content.contains(document.activeElement)||(this.previousActiveElement=document.activeElement,this.$refs.content.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===p.Do.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((t=>t.contains(e)))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find((t=>!t.hasAttribute("disabled")));e&&e.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(i.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog",tabindex:this.isActive?0:void 0,"aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:(0,p.kb)(this.maxWidth),width:(0,p.kb)(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},4227:function(t,e,a){"use strict";var i=a(7352),s=a(6505),o=a(8085),n=a(4589),r=a(3325);const l=(0,r.Z)(s.Z,(0,i.d)("tabsBar"),o.Z);e["Z"]=l.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0}},data:()=>({proxyClass:"v-tab--active"}),computed:{classes(){return{"v-tab":!0,...s.Z.options.computed.classes.call(this),"v-tab--disabled":this.disabled,...this.groupClasses}},value(){let t=this.to||this.href;if(null==t)return t;if(this.$router&&this.to===Object(this.to)){const e=this.$router.resolve(this.to,this.$route,this.append);t=e.href}return t.replace("#","")}},methods:{click(t){this.disabled?t.preventDefault():(this.href&&this.href.indexOf("#")>-1&&t.preventDefault(),t.detail&&this.$el.blur(),this.$emit("click",t),this.to||this.toggle())},toggle(){this.isActive&&(this.tabsBar.mandatory||this.to)||this.$emit("change")}},render(t){const{tag:e,data:a}=this.generateRouteLink();return a.attrs={...a.attrs,"aria-selected":String(this.isActive),role:"tab",tabindex:this.disabled?-1:0},a.on={...a.on,keydown:t=>{t.keyCode===n.Do.enter&&this.click(t),this.$emit("keydown",t)}},t(e,a,this.$slots.default)}})},1759:function(t,e,a){"use strict";a.d(e,{Z:function(){return d}});var i=a(8625),s=a(7352),o=a(5500),n=a(4589),r=a(3325);const l=(0,r.Z)(i.Z,(0,s.d)("windowGroup","v-window-item","v-window"));var c=l.extend().extend().extend({name:"v-window-item",directives:{Touch:o.Z},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data(){return{isActive:!1,inTransition:!1}},computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=(0,n.kb)(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick((()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=(0,n.kb)(t.clientHeight))}))}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((()=>[this.genWindowItem()])))}}),d=c.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=c.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}})},8697:function(t,e,a){"use strict";a.d(e,{Z:function(){return $}});a(6699);var i=a(172),s=a(5827),o=a(4622),n=a(6341),r=a(549),l=a(5500),c=a(3325),d=a(4589);function u(t){const e=.501,a=Math.abs(t);return Math.sign(t)*(a/((1/e-2)*(1-a)+1))}function h(t,e,a,i){const s=t.clientWidth,o=a?e.content-t.offsetLeft-s:t.offsetLeft;a&&(i=-i);const n=e.wrapper+i,r=s+o,l=.4*s;return o<=i?i=Math.max(o-l,0):n<=r&&(i=Math.min(i-(n-r-l),e.content-e.wrapper)),a?-i:i}function p(t,e,a){const{offsetLeft:i,clientWidth:s}=t;if(a){const t=e.content-i-s/2-e.wrapper/2;return-Math.min(e.content-e.wrapper,Math.max(0,t))}{const t=i+s/2-e.wrapper/2;return Math.min(e.content-e.wrapper,Math.max(0,t))}}const m=(0,c.Z)(o.y,n.Z).extend({name:"base-slide-group",directives:{Resize:r.Z,Touch:l.Z},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>"boolean"===typeof t||["always","desktop","mobile"].includes(t)}},data:()=>({internalItemsLength:0,isOverflowing:!1,resizeTimeout:0,startX:0,isSwipingHorizontal:!1,isSwiping:!1,scrollOffset:0,widths:{content:0,wrapper:0}}),computed:{canTouch(){return"undefined"!==typeof window},__cachedNext(){return this.genTransition("next")},__cachedPrev(){return this.genTransition("prev")},classes(){return{...o.y.options.computed.classes.call(this),"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing}},hasAffixes(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext(){if(!this.hasAffixes)return!1;const{content:t,wrapper:e}=this.widths;return t>Math.abs(this.scrollOffset)+e},hasPrev(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset(t){this.$vuetify.rtl&&(t=-t);let e=t<=0?u(-t):t>this.widths.content-this.widths.wrapper?-(this.widths.content-this.widths.wrapper)+u(this.widths.content-this.widths.wrapper-t):-t;this.$vuetify.rtl&&(e=-e),this.$refs.content.style.transform=`translateX(${e}px)`}},beforeUpdate(){this.internalItemsLength=(this.$children||[]).length},updated(){this.internalItemsLength!==(this.$children||[]).length&&this.setWidths()},methods:{onScroll(){this.$refs.wrapper.scrollLeft=0},onFocusin(t){if(this.isOverflowing)for(const e of(0,d.iZ)(t))for(const t of this.items)if(t.$el===e)return void(this.scrollOffset=h(t.$el,this.widths,this.$vuetify.rtl,this.scrollOffset))},genNext(){const t=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:()=>this.onAffixClick("next")},key:"next"},[t])},genContent(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content",on:{focusin:this.onFocusin}},this.$slots.default)},genData(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon(t){let e=t;this.$vuetify.rtl&&"prev"===t?e="next":this.$vuetify.rtl&&"next"===t&&(e="prev");const a=`${t[0].toUpperCase()}${t.slice(1)}`,s=this[`has${a}`];return this.showArrows||s?this.$createElement(i.Z,{props:{disabled:!s}},this[`${e}Icon`]):null},genPrev(){const t=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:()=>this.onAffixClick("prev")},key:"prev"},[t])},genTransition(t){return this.$createElement(s.Z5,[this.genIcon(t)])},genWrapper(){return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:t=>this.overflowCheck(t,this.onTouchStart),move:t=>this.overflowCheck(t,this.onTouchMove),end:t=>this.overflowCheck(t,this.onTouchEnd)}}],ref:"wrapper",on:{scroll:this.onScroll}},[this.genContent()])},calculateNewOffset(t,e,a,i){const s=a?-1:1,o=s*i+("prev"===t?-1:1)*e.wrapper;return s*Math.max(Math.min(o,e.content-e.wrapper),0)},onAffixClick(t){this.$emit(`click:${t}`),this.scrollTo(t)},onResize(){this._isDestroyed||this.setWidths()},onTouchStart(t){const{content:e}=this.$refs;this.startX=this.scrollOffset+t.touchstartX,e.style.setProperty("transition","none"),e.style.setProperty("willChange","transform")},onTouchMove(t){if(this.canTouch){if(!this.isSwiping){const e=t.touchmoveX-t.touchstartX,a=t.touchmoveY-t.touchstartY;this.isSwipingHorizontal=Math.abs(e)>Math.abs(a),this.isSwiping=!0}this.isSwipingHorizontal&&(this.scrollOffset=this.startX-t.touchmoveX,document.documentElement.style.overflowY="hidden")}},onTouchEnd(){if(!this.canTouch)return;const{content:t,wrapper:e}=this.$refs,a=t.clientWidth-e.clientWidth;t.style.setProperty("transition",null),t.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-a&&(this.scrollOffset=-a):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=a&&(this.scrollOffset=a),this.isSwiping=!1,document.documentElement.style.removeProperty("overflow-y")},overflowCheck(t,e){t.stopPropagation(),this.isOverflowing&&e(t)},scrollIntoView(){if(!this.selectedItem&&this.items.length){const t=this.items[this.items.length-1].$el.getBoundingClientRect(),e=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&e.right<t.right||!this.$vuetify.rtl&&e.left>t.left)&&this.scrollTo("prev")}this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=p(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=h(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},scrollTo(t){this.scrollOffset=this.calculateNewOffset(t,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths(){window.requestAnimationFrame((()=>{if(this._isDestroyed)return;const{content:t,wrapper:e}=this.$refs;this.widths={content:t?t.clientWidth:0,wrapper:e?e.clientWidth:0},this.isOverflowing=this.widths.wrapper+1<this.widths.content,this.scrollIntoView()}))}},render(t){return t("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});m.extend({name:"v-slide-group",provide(){return{slideGroup:this}}});var v=a(8085),f=a(9177),g=(0,c.Z)(m,f.Z,v.Z).extend({name:"v-tabs-bar",provide(){return{tabsBar:this}},computed:{classes(){return{...m.options.computed.classes.call(this),"v-tabs-bar":!0,"v-tabs-bar--is-mobile":this.isMobile,"v-tabs-bar--show-arrows":this.showArrows,...this.themeClasses}}},watch:{items:"callSlider",internalValue:"callSlider",$route:"onRouteChange"},methods:{callSlider(){this.isBooted&&this.$emit("call:slider")},genContent(){const t=m.options.methods.genContent.call(this);return t.data=t.data||{},t.data.staticClass+=" v-tabs-bar__content",t},onRouteChange(t,e){if(this.mandatory)return;const a=this.items,i=t.path,s=e.path;let o=!1,n=!1;for(const r of a)if(r.to===s?n=!0:r.to===i&&(o=!0),o&&n)break;!o&&n&&(this.internalValue=void 0)}},render(t){const e=m.options.render.call(this,t);return e.data.attrs={role:"tablist"},e}}),b=a(1954),y=a(1208),k=a(6952),x=a(1431);const w=(0,c.Z)(k.Z,x.Z,v.Z);var $=w.extend().extend({name:"v-tabs",directives:{Resize:r.Z},props:{activeClass:{type:String,default:""},alignWithTitle:Boolean,backgroundColor:String,centerActive:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,iconsAndText:Boolean,mobileBreakpoint:[String,Number],nextIcon:{type:String,default:"$next"},optional:Boolean,prevIcon:{type:String,default:"$prev"},right:Boolean,showArrows:[Boolean,String],sliderColor:String,sliderSize:{type:[Number,String],default:2},vertical:Boolean},data(){return{resizeTimeout:0,slider:{height:null,left:null,right:null,top:null,width:null},transitionTime:300}},computed:{classes(){return{"v-tabs--align-with-title":this.alignWithTitle,"v-tabs--centered":this.centered,"v-tabs--fixed-tabs":this.fixedTabs,"v-tabs--grow":this.grow,"v-tabs--icons-and-text":this.iconsAndText,"v-tabs--right":this.right,"v-tabs--vertical":this.vertical,...this.themeClasses}},isReversed(){return this.$vuetify.rtl&&this.vertical},sliderStyles(){return{height:(0,d.kb)(this.slider.height),left:this.isReversed?void 0:(0,d.kb)(this.slider.left),right:this.isReversed?(0,d.kb)(this.slider.right):void 0,top:this.vertical?(0,d.kb)(this.slider.top):void 0,transition:null!=this.slider.left?null:"none",width:(0,d.kb)(this.slider.width)}},computedColor(){return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"}},watch:{alignWithTitle:"callSlider",centered:"callSlider",centerActive:"callSlider",fixedTabs:"callSlider",grow:"callSlider",iconsAndText:"callSlider",right:"callSlider",showArrows:"callSlider",vertical:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize","$vuetify.rtl":"onResize"},mounted(){this.$nextTick((()=>{window.setTimeout(this.callSlider,30)}))},methods:{callSlider(){return!this.hideSlider&&this.$refs.items&&this.$refs.items.selectedItems.length?(this.$nextTick((()=>{const t=this.$refs.items.selectedItems[0];if(!t||!t.$el)return this.slider.width=0,void(this.slider.left=0);const e=t.$el;this.slider={height:this.vertical?e.scrollHeight:Number(this.sliderSize),left:this.vertical?0:e.offsetLeft,right:this.vertical?0:e.offsetLeft+e.offsetWidth,top:e.offsetTop,width:this.vertical?Number(this.sliderSize):e.scrollWidth}})),!0):(this.slider.width=0,!1)},genBar(t,e){const a={style:{height:(0,d.kb)(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakpoint:this.mobileBreakpoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:t=>{this.internalValue=t}},ref:"items"};return this.setTextColor(this.computedColor,a),this.setBackgroundColor(this.backgroundColor,a),this.$createElement(g,a,[this.genSlider(e),t])},genItems(t,e){return t||(e.length?this.$createElement(b.Z,{props:{value:this.internalValue},on:{change:t=>{this.internalValue=t}}},e):null)},genSlider(t){return this.hideSlider?null:(t||(t=this.$createElement(y.Z,{props:{color:this.sliderColor}})),this.$createElement("div",{staticClass:"v-tabs-slider-wrapper",style:this.sliderStyles},[t]))},onResize(){this._isDestroyed||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.callSlider,0))},parseNodes(){let t=null,e=null;const a=[],i=[],s=this.$slots.default||[],o=s.length;for(let n=0;n<o;n++){const o=s[n];if(o.componentOptions)switch(o.componentOptions.Ctor.options.name){case"v-tabs-slider":e=o;break;case"v-tabs-items":t=o;break;case"v-tab-item":a.push(o);break;default:i.push(o)}else i.push(o)}return{tab:i,slider:e,items:t,item:a}}},render(t){const{tab:e,slider:a,items:i,item:s}=this.parseNodes();return t("div",{staticClass:"v-tabs",class:this.classes,directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar(e,a),this.genItems(i,s)])}})},1954:function(t,e,a){"use strict";a.d(e,{Z:function(){return l}});var i=a(5500),s=a(8119),o=a(172),n=a(4622),r=n.y.extend({name:"v-window",directives:{Touch:i.Z},provide(){return{windowGroup:this}},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:Boolean,showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive(){return this.transitionCount>0},classes(){return{...n.y.options.computed.classes.call(this),"v-window--show-arrows-on-hover":this.showArrowsOnHover}},computedTransition(){if(!this.isBooted)return"";const t=this.vertical?"y":"x",e=this.internalReverse?!this.isReverse:this.isReverse,a=e?"-reverse":"";return`v-window-${t}${a}-transition`},hasActiveItems(){return Boolean(this.items.find((t=>!t.disabled)))},hasNext(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev(){return this.continuous||this.internalIndex>0},internalIndex(){return this.items.findIndex(((t,e)=>this.internalValue===this.getValue(t,e)))},internalReverse(){return this.$vuetify.rtl?!this.reverse:this.reverse}},watch:{internalIndex(t,e){this.isReverse=this.updateReverse(t,e)}},mounted(){window.requestAnimationFrame((()=>this.isBooted=!0))},methods:{genDefaultSlot(){return this.$slots.default},genContainer(){const t=[this.genDefaultSlot()];return this.showArrows&&t.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},t)},genIcon(t,e,a){var i,n,r;const l={click:t=>{t.stopPropagation(),this.changedByDelimiters=!0,a()}},c={"aria-label":this.$vuetify.lang.t(`$vuetify.carousel.${t}`)},d=null!=(i=null==(n=(r=this.$scopedSlots)[t])?void 0:n.call(r,{on:l,attrs:c}))?i:[this.$createElement(s.Z,{props:{icon:!0},attrs:c,on:l},[this.$createElement(o.Z,{props:{large:!0}},e)])];return this.$createElement("div",{staticClass:`v-window__${t}`},d)},genControlIcons(){const t=[],e=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&e&&"string"===typeof e){const a=this.genIcon("prev",e,this.prev);a&&t.push(a)}const a=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&a&&"string"===typeof a){const e=this.genIcon("next",a,this.next);e&&t.push(e)}return t},getNextIndex(t){const e=(t+1)%this.items.length,a=this.items[e];return a.disabled?this.getNextIndex(e):e},getPrevIndex(t){const e=(t+this.items.length-1)%this.items.length,a=this.items[e];return a.disabled?this.getPrevIndex(e):e},next(){if(!this.hasActiveItems||!this.hasNext)return;const t=this.getNextIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},prev(){if(!this.hasActiveItems||!this.hasPrev)return;const t=this.getPrevIndex(this.internalIndex),e=this.items[t];this.internalValue=this.getValue(e,t)},updateReverse(t,e){const a=this.items.length,i=a-1;return a<=2?t<e:t===i&&0===e||(0!==t||e!==i)&&t<e}},render(t){const e={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){const t=this.touch||{left:()=>{this.$vuetify.rtl?this.prev():this.next()},right:()=>{this.$vuetify.rtl?this.next():this.prev()},end:t=>{t.stopPropagation()},start:t=>{t.stopPropagation()}};e.directives.push({name:"touch",value:t})}return t("div",e,[this.genContainer()])}}),l=r.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes(){return{...r.options.computed.classes.call(this),"v-tabs-items":!0}},isDark(){return this.rootIsDark}},methods:{getValue(t,e){return t.id||n.y.options.methods.getValue.call(this,t,e)}}})},1208:function(t,e,a){"use strict";var i=a(6952),s=a(3325);e["Z"]=(0,s.Z)(i.Z).extend({name:"v-tabs-slider",render(t){return t("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs-slider"}))}})},7921:function(t,e,a){"use strict";a.d(e,{qW:function(){return o}});var i=a(6656),s=a(4589);const o=(0,s.Ji)("v-toolbar__title"),n=(0,s.Ji)("v-toolbar__items");i.Z},9155:function(t,e,a){"use strict";var i=a(6286),s=a(144);e["Z"]=s.Z.extend({name:"rippleable",directives:{ripple:i.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}})},7764:function(t,e,a){"use strict";a.d(e,{X:function(){return r}});var i=a(8230),s=a(9155),o=a(4419),n=a(3325);function r(t){t.preventDefault()}e["Z"]=(0,n.Z)(i.Z,s.Z,o.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=i.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:r},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:r},ref:"input"})},onBlur(){this.isFocused=!1},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const a=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===a&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(){this.isFocused=!0},onKeydown(t){}}})},4801:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return _}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Permissions"))+" ")]),a("v-form",[a("v-container",[t.appData.mainDomain==t.appData.siteAdminDomain&&t.appData.siteAdmin?a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-checkbox",{staticClass:"py-0 my-0",attrs:{label:t.$t("Site administrator")},model:{value:t.siteAdmin,callback:function(e){t.siteAdmin=e},expression:"siteAdmin"}})],1)],1):t._e(),t.siteAdmin?t._e():a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-checkbox",{staticClass:"py-0 my-0",attrs:{label:t.$t("Domain administrator")},model:{value:t.domainAdmin,callback:function(e){t.domainAdmin=e},expression:"domainAdmin"}})],1)],1)],1),t.domainAdmin||t.siteAdmin?t._e():a("v-container",[a("v-row",[a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"3"}},[a("v-checkbox",{staticClass:"py-0 my-0",attrs:{label:t.$t("Profiles")},model:{value:t.profiles,callback:function(e){t.profiles=e},expression:"profiles"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"3"}},[a("v-select",{staticClass:"py-0 my-0",attrs:{items:t.accessTypes,label:t.$t("Access type"),disabled:!t.permissions["/profiles"]},model:{value:t.permissions["/profiles"],callback:function(e){t.$set(t.permissions,"/profiles",e)},expression:"permissions['/profiles']"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"3"}},[a("v-checkbox",{staticClass:"py-0 my-0",attrs:{label:t.$t("Groups")},model:{value:t.groups,callback:function(e){t.groups=e},expression:"groups"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"3"}},[a("v-select",{staticClass:"py-0 my-0",attrs:{items:t.accessTypes,label:t.$t("Access type"),disabled:!t.permissions["/groups"]},model:{value:t.permissions["/groups"],callback:function(e){t.$set(t.permissions,"/groups",e)},expression:"permissions['/groups']"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"3"}},[a("v-checkbox",{staticClass:"py-0 my-0",attrs:{label:t.$t("Apps")},model:{value:t.apps,callback:function(e){t.apps=e},expression:"apps"}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"3"}},[a("v-select",{staticClass:"py-0 my-0",attrs:{items:t.accessTypesApps,label:t.$t("Access type"),disabled:!t.permissions["/apps"]},model:{value:t.permissions["/apps"],callback:function(e){t.$set(t.permissions,"/apps",e)},expression:"permissions['/apps']"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"6",md:"3"}},[a("v-checkbox",{staticClass:"py-0 my-0",attrs:{label:t.$t("Reports")},model:{value:t.reports,callback:function(e){t.reports=e},expression:"reports"}})],1)],1)],1),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"mr-4",attrs:{color:"primary",loading:t.saveLoading},on:{click:t.saveDetails}},[t._v(" "+t._s(t.$t("Save"))+" ")])],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.$t("Please select atleast one permission"))+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" "+t._s(t.$t("Close"))+" ")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"primary",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"Group",data:()=>({email:"",newadmin:!0,snackbarSave:!1,snackbarText:"",details:null,siteAdmin:!1,domainAdmin:!1,permissions:{},saveLoading:!1,accessTypes:[],accessTypesApps:[],profiles:!1,groups:!1,apps:!1,reports:!1,dialog:!1,appData:o.Z}),methods:{checkboxChanged:function(t,e){console.log(`checkboxChanged. item: ${t}, value: ${e}`),e?this.permissions[t]||(this.permissions[t]="rw"):delete this.permissions[t]},saveDetails:function(){let t=this.permissions;0!=Object.keys(t).length?(this.saveLoading=!0,n.Z.put({url:"api/admins/"+encodeURIComponent(this.email),data:{permissions:JSON.stringify(t)}}).then((t=>{this.saveLoading=!1,console.log(t.data),1==t.data.status?(this.snackbarSave=!0,this.snackbarText=this.$t("Saved"),this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))})).catch((t=>console.log(t)))):this.dialog=!0},refresh:function(){console.log(`admin: ${this.email}`),n.Z.get({url:"api/admins/"+encodeURIComponent(this.email)}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.details=t.data.details,this.details.admin&&this.details.admin.permissions?this.permissions=JSON.parse(this.details.admin.permissions):this.permissions={},this.siteAdmin="rw"==this.permissions["@/"],this.domainAdmin="rw"==this.permissions["/"],this.profiles=void 0!=this.permissions["/profiles"],this.groups=void 0!=this.permissions["/groups"],this.apps=void 0!=this.permissions["/apps"],this.reports=void 0!=this.permissions["/reports"]):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},updatePageHead:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Admins"),to:"/Admins",disabled:!1},{text:this.email,to:"/Admin/"+this.email,disabled:!1}];this.$emit("updatePage",t)}},created:function(){this.email=this.$route.params.email,this.email||(this.email=""),""==this.email?this.newadmin=!0:this.newadmin=!1,this.updatePageHead(),this.accessTypes=[{text:this.$t("Read only"),value:"r"},{text:this.$t("Read and Write"),value:"rw"}],this.accessTypesApps=[...this.accessTypes,{text:this.$t("Read and Install/Uninstall"),value:"ri"}],this.refresh()},watch:{profiles:function(t){this.checkboxChanged("/profiles",t)},groups:function(t){this.checkboxChanged("/groups",t)},apps:function(t){this.checkboxChanged("/apps",t)},reports:function(t){t?this.permissions["/reports"]||(this.permissions["/reports"]="r"):delete this.permissions["/reports"]},domainAdmin:function(t){t?this.permissions["/"]||(this.permissions={},this.permissions["/"]="rw",this.reports=!1,this.apps=!1,this.groups=!1,this.profiles=!1):delete this.permissions["/"]},siteAdmin:function(t){t?this.permissions["@/"]||(this.permissions={},this.permissions["@/"]="rw",this.domainAdmin=!1,this.reports=!1,this.apps=!1,this.groups=!1,this.profiles=!1):delete this.permissions["@/"]}}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(3702),g=a(2102),b=a(4228),y=a(4497),k=a(6232),x=a(2877),w=a(7032),$=a(3202),S=a(9762),D=(0,d.Z)(c,i,s,!1,null,null,null),_=D.exports;h()(D,{VBtn:p.Z,VCard:m.Z,VCardActions:v.h7,VCardTitle:v.EB,VCheckbox:f.Z,VCol:g.Z,VContainer:b.Z,VDialog:y.Z,VForm:k.Z,VRow:x.Z,VSelect:w.Z,VSnackbar:$.Z,VSpacer:S.Z})},8195:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return S}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Admin List"))+" "),a("v-spacer")],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.headers,items:t.rows,loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.addAdmin}},[t._v(" "+t._s(t.$t("Add Administrators"))+" ")])],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[i.email!=t.appData.email?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.$router.push("/Admin/"+i.email)}}},[t._v(" mdi-pencil ")]):t._e(),i.email!=t.appData.email?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteAdmin(i)}}},[t._v(" mdi-delete ")]):t._e()]}}],null,!0)}),a("v-dialog",{attrs:{"overlay-color":"bg","max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Add Profiles"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.profilesHeaders,items:t.profilesRows,loading:t.profilesLoading,"server-items-length":t.totalItems,"items-per-page":5,options:t.options,search:t.search},on:{"update:options":[function(e){t.options=e},t.updateOptions],"click:row":t.rowClick}})],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"Profiles",data:()=>({headers:[],rows:[],dialog:!1,profilesHeaders:[],profilesRows:[],profilesLoading:!0,search:"",totalItems:0,loading:!0,options:{},snackbarSave:!1,snackbarText:"",appData:o.Z}),methods:{addAdmin:function(){this.dialog=!0,this.refreshProfiles()},updateOptions(t){console.log("update:options",t),this.refreshProfiles()},rowClick:function(t){console.log(`rowClick: ${t.email}`),this.$router.push("/Admin/"+t.email)},deleteAdmin:function(t){console.log(`Delete admin: ${t.emil}`),n.Z["delete"]({url:"api/admins/"+encodeURIComponent(t.email)}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Admin removed"),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refreshProfiles:function(){this.profilesLoading=!0;let t=this.options.itemsPerPage>0?this.options.itemsPerPage:1e4,e=(this.options.page-1)*t;n.Z.post({url:"api/profiles",data:{adminFilter:"N",offset:e,limit:t,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,search:this.search}}).then((t=>{this.profilesLoading=!1,console.log(t.data),1==t.data.status?(this.profilesRows=t.data.profiles,this.totalItems=t.data.totalItems):(console.log(`status: ${t.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refresh:function(){n.Z.post({url:"api/profiles",data:{adminFilter:"Y"}}).then((t=>{console.log(t.data),1==t.data.status?this.rows=t.data.profiles:(console.log(`status: ${t.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Administrators"),to:"/Admins",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("Last Name"),value:"lastName"},{text:this.$t("First Name"),value:"firstName"},{text:this.$t("Email"),value:"email"},{text:this.$t("Actions"),value:"actions",sortable:!1}],this.profilesHeaders=[{text:this.$t("Last Name"),value:"lastName"},{text:this.$t("First Name"),value:"firstName"},{text:this.$t("Email"),value:"email"}],this.refresh()},watch:{search:function(t){console.log(`search: ${t}`),(t.length>1||0==t.length)&&this.refreshProfiles()}}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(4998),g=a(4497),b=a(6428),y=a(3202),k=a(9762),x=a(5978),w=a(6656),$=(0,d.Z)(c,i,s,!1,null,null,null),S=$.exports;h()($,{VBtn:p.Z,VCard:m.Z,VCardTitle:v.EB,VDataTable:f.Z,VDialog:g.Z,VIcon:b.Z,VSnackbar:y.Z,VSpacer:k.Z,VTextField:x.Z,VToolbar:w.Z})},1395:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return z}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"details"},[t._v(" "+t._s(t.$t("Details"))+" ")]),a("v-tab",{key:"profiles"},[t._v(" "+t._s(t.$t("Profiles"))+" ")]),a("v-tab",{key:"groups"},[t._v(" "+t._s(t.$t("Groups"))+" ")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(t._s(t.details.appname))]),a("v-spacer")],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"details"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-avatar",{attrs:{tile:"",size:"80"}},[a("v-img",{attrs:{src:t.details.imageurl}})],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"headline mb-1"},[t._v(" "+t._s(t.details.appname)+" ")]),a("v-list-item-subtitle",[t._v(t._s(t.$t("App ID"))+": "+t._s(t.details.packagename)),a("br"),t._v(" "+t._s(t.$t("Profiles"))+": "+t._s(t.totalNumOfUsers)+" ")])],1)],1)],1),a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-form",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("App Name")},model:{value:t.details.appname,callback:function(e){t.$set(t.details,"appname",e)},expression:"details.appname"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Summary")},model:{value:t.details.summary,callback:function(e){t.$set(t.details,"summary",e)},expression:"details.summary"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Categories"),placeholder:t.$t("Seperate names by comma")},model:{value:t.details.categories,callback:function(e){t.$set(t.details,"categories",e)},expression:"details.categories"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-textarea",{attrs:{label:t.$t("Description")},model:{value:t.details.description,callback:function(e){t.$set(t.details,"description",e)},expression:"details.description"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Version Name"),readonly:""},model:{value:t.details.versionname,callback:function(e){t.$set(t.details,"versionname",e)},expression:"details.versionname"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Version Code"),readonly:""},model:{value:t.details.versioncode,callback:function(e){t.$set(t.details,"versioncode",e)},expression:"details.versioncode"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-select",{attrs:{items:t.renderingItems,label:t.$t("Rendering Mode"),rules:t.requiredRules},model:{value:t.details.displayprotocol,callback:function(e){t.$set(t.details,"displayprotocol",e)},expression:"details.displayprotocol"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[t.appData.checkPermission("/apps","w")?a("v-btn",{staticClass:"mr-4",attrs:{color:"primary",loading:t.saveLoading},on:{click:t.saveDetails}},[t._v(" Save ")]):t._e()],1)],1)],1)],1)],1)],1),a("v-tab-item",{key:"profiles"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Profiles")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.headers,items:t.rows,loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[t.appData.checkPermission("/apps","i")?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.addProfile}},[t._v(" "+t._s(t.$t("Assign Profiles to App"))+" ")]):t._e()],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[t.appData.checkPermission("/apps","i")?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteProfile(i)}}},[t._v(" mdi-delete ")]):t._e()]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"800px","overlay-color":"bg"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Add Profiles"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.profilesHeaders,items:t.profilesRows,loading:t.profilesLoading,"server-items-length":t.totalItems,"items-per-page":5,options:t.options,search:t.search,"show-select":"","multi-sort":""},on:{"update:options":[function(e){t.options=e},t.updateOptions],"click:row":t.rowClick},scopedSlots:t._u([{key:"header.data-table-select",fn:function(){return[t._v("   ")]},proxy:!0},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",disabled:t.addSelectedDisabled,loading:t.addSelectedLoading},on:{click:t.addSelected}},[t._v(" "+t._s(t.$t("Assign Selected Profiles"))+" ")])],1)]},proxy:!0}],null,!0),model:{value:t.profilesSelected,callback:function(e){t.profilesSelected=e},expression:"profilesSelected"}})],1)],1)],1)],1),a("v-tab-item",{key:"groups"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Groups")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.groupHeaders,items:t.groupRows,loading:t.groupLoading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[t.appData.checkPermission("/apps","i")?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.addGroup}},[t._v(" "+t._s(t.$t("Add Groups"))+" ")]):t._e()],1)]},proxy:!0},{key:"item.adDomain",fn:function(e){var i=e.item;return["All"==i.groupName?a("div",[t._v(t._s(t.$t("Automatic")))]):""==i.adDomain?a("div",[t._v(t._s(t.$t("Manual")))]):a("div",[t._v(t._s(t.$t("Active Directory")))])]}},{key:"item.actions",fn:function(e){var i=e.item;return[t.appData.checkPermission("/apps","i")?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteGroup(i)}}},[t._v(" mdi-delete ")]):t._e()]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"800px","overlay-color":"bg"},model:{value:t.groupDialog,callback:function(e){t.groupDialog=e},expression:"groupDialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Add Groups"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.groupSearch,callback:function(e){t.groupSearch=e},expression:"groupSearch"}})],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.allGroupsHeaders,items:t.allGroupsRows,loading:t.allGroupsLoading,search:t.groupSearch},on:{"click:row":t.groupClick},scopedSlots:t._u([{key:"item.adDomain",fn:function(e){var i=e.item;return["All"==i.groupName?a("div",[t._v(t._s(t.$t("Automatic")))]):""==i.adDomain?a("div",[t._v(t._s(t.$t("Manual")))]):a("div",[t._v(t._s(t.$t("Active Directory")))])]}}],null,!0)})],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px","overlay-color":"bg"},model:{value:t.dialogInstall,callback:function(e){t.dialogInstall=e},expression:"dialogInstall"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Add App")))]),a("v-card-subtitle",{staticClass:"mt-4"},[t._v(t._s(t.$t("Are you sure you want to add app to the selected profiles",{addItemLabel:t.addItemLabel})))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:t.cancelInstall}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"primary"},on:{click:t.installApp}},[t._v(t._s(t.$t("Install App")))]),a("v-btn",{attrs:{color:"secondary"},on:{click:t.addToAppstore}},[t._v(t._s(t.$t("Add to Appstore")))]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px","overlay-color":"bg"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Remove App")))]),a("v-card-subtitle",{staticClass:"mt-4"},[t._v(t._s(t.$t("Are you sure you want to remove app from",{name:t.deleteItemName})))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:t.cancelUninstall}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"primary"},on:{click:t.uninstallApp}},[t._v(t._s(t.$t("Uninstall App")))]),a("v-spacer")],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);const r=a(381);let l={name:"AppDetails",components:{},data:()=>({details:{},totalNumOfUsers:0,tab:{},headers:[],rows:[],dialog:!1,profilesHeaders:[],profilesRows:[],profilesLoading:!0,search:"",profilesSelected:[],allSelected:{},addSelectedDisabled:!0,addSelectedLoading:!1,dialogInstall:!1,addItemLabel:"",groupHeaders:[],groupRows:[],groupLoading:!1,groupSearch:"",groupDialog:!1,allGroupsHeaders:[],allGroupsRows:[],allGroupsLoading:!1,allGroupSelected:{},totalItems:0,loading:!0,options:{},appData:o.Z,saveLoading:!1,snackbarSave:!1,snackbarText:"",moment:r,dialogDelete:!1,deleteProfileItem:{},deleteItemType:"",deleteItemName:""}),methods:{savePage:function(){n.Z.savePageData(`${l.name}`,this,["options","search"])},updateOptions:function(){console.log("updateOptions"),this.savePage(),this.refreshProfiles()},rowClick:function(){console.log("rowClick")},deleteProfile:function(t){this.deleteProfileItem=t,this.deleteItemType="profile",this.deleteItemName=`${t.firstname} ${t.lastname}`,this.dialogDelete=!0},deleteGroup:function(t){this.deleteProfileItem=t,this.deleteItemType="group",this.deleteItemName=t.groupName,this.dialogDelete=!0},uninstallApp:function(){let t;console.log(this.deleteProfileItem),this.dialogDelete=!1,t="profile"==this.deleteItemType?{email:this.deleteProfileItem.email}:{groupName:this.deleteProfileItem.groupName,adDomain:this.deleteProfileItem.adDomain},n.Z.post({url:`api/apps/${encodeURIComponent(this.$route.params.packageName)}/uninstall`,data:t}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.snackbarText=this.$t("App uninstaled"),this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>{}))},cancelUninstall:function(){this.dialogDelete=!1},loadDetails:function(){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null),n.Z.get({url:"api/apps/"+encodeURIComponent(this.$route.params.packageName)}).then((t=>{if(console.log(t.data),1==t.data.status){console.log("loadDetails: Success"),this.details=t.data.appDetails,this.totalNumOfUsers=t.data.totalNumOfUsers,this.rows=t.data.emails,this.renderingItems=[{text:this.$t("Auto-detect"),value:0},{text:this.$t("Server Rendering"),value:1},{text:this.$t("Client Rendering"),value:2}],this.headers=[{text:this.$t("Last Name"),value:"lastname"},{text:this.$t("First Name"),value:"firstname"},{text:this.$t("Email"),value:"email"},{text:"Actions",value:"actions",sortable:!1}],this.loading=!1,this.groupLoading=!1,this.groupRows=t.data.groups,this.groupHeaders=[{text:this.$t("Group Name"),value:"groupName"},{text:this.$t("Group Type"),value:"adDomain"},{text:"Actions",value:"actions",sortable:!1}];let e=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Apps"),to:"/Apps",disabled:!1},{text:this.details.appname,to:"/App/"+this.$route.params.packageName,disabled:!1}];this.$emit("updatePage",e),this.refreshTimeout=setTimeout(this.loadDetails,5e3)}else console.log(`status: ${t.data.status}`),this.$router.push("/Login")})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},saveDetails:function(){this.saveLoading=!0,n.Z.post({url:"api/apps/"+encodeURIComponent(this.$route.params.packageName),data:{appName:this.details.appname,appDescription:this.details.description,appSummary:this.details.summary,appCategories:this.details.categories,displayprotocol:""+this.details.displayprotocol}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.saveLoading=!1,this.snackbarText="Saved",this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.saveLoading=!1))},addGroup:function(){this.groupDialog=!0,this.loadAllGroups()},loadAllGroups:function(){this.allGroupsLoading=!0,this.allGroupsHeaders=[{text:this.$t("Group Name"),value:"groupName"},{text:this.$t("Group Type"),value:"adDomain"}],n.Z.get({url:"api/groups"}).then((t=>{console.log(t.data),1==t.data.status?(this.allGroupsRows=t.data.groups,this.allGroupsLoading=!1):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},groupClick:function(t){console.log(`groupClick: ${t.groupName}`),this.dialogInstall=!0,this.allSelected=[],this.allGroupSelected=t,this.addItemLabel=this.$t("selected group",{groupName:t.groupName})},addProfile:function(){this.dialog=!0,this.allSelected=[],this.addSelectedDisabled=!0},addSelected:function(){console.log("addSelected"),this.dialogInstall=!0,this.allGroupSelected={},this.addItemLabel=this.$t("selected profiles")},cancelInstall:function(){this.dialogInstall=!1},installApp:function(){this.dialogInstall=!1,this.installImp(0)},addToAppstore:function(){this.dialogInstall=!1,this.installImp(1)},installImp:function(t){let e,a=[];for(const[i]of Object.entries(this.allSelected))a.push(i);console.log("Install Apps: "+a),e=0==a.length&&this.allGroupSelected.groupName?{groupName:[this.allGroupSelected.groupName],adDomain:[this.allGroupSelected.adDomain],privateApp:"0",appStoreOnly:t}:{email:a,privateApp:"1",appStoreOnly:t},this.addSelectedLoading=!0,n.Z.post({url:`api/apps/${encodeURIComponent(this.$route.params.packageName)}/install`,data:e}).then((t=>{console.log(t.data),1==t.data.status||2==t.data.status?(this.addSelectedLoading=!1,this.snackbarText=this.$t("Added"),this.snackbarSave=!0,this.loadDetails(),this.dialog=!1,this.groupDialog=!1):(console.log(`status: ${t.data.status}`),this.addSelectedLoading=!1,this.snackbarText=this.$t("Error"),this.snackbarSave=!0,this.dialog=!1,this.groupDialog=!1)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refreshProfiles:function(){this.profilesLoading=!0;let t=this.options.itemsPerPage>0?this.options.itemsPerPage:1e4,e=(this.options.page-1)*t;n.Z.post({url:"api/profiles",data:{offset:e,limit:t,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,search:this.search}}).then((t=>{if(this.profilesLoading=!1,console.log(t.data),1==t.data.status){this.profilesRows=t.data.profiles,this.totalItems=t.data.totalItems;let e=[];this.profilesRows.forEach((t=>{this.allSelected[t.email]&&e.push(t)})),this.profilesSelected=e}else console.log(`status: ${t.data.status}`),this.$router.push("/Login")})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Apps"),to:"/Apps",disabled:!1},{text:this.$route.params.packageName,to:"/App/"+this.$route.params.packageName,disabled:!1}];this.$emit("updatePage",t),this.profilesHeaders=[{text:this.$t("Last Name"),value:"lastName"},{text:this.$t("First Name"),value:"firstName"},{text:this.$t("Email"),value:"email"}],n.Z.loadPageData(l.name,this),this.loadDetails()},beforeDestroy:function(){console.log("lifecycle: beforeDestroy"),this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null)},watch:{tab:function(t){console.log(`tab: ${t}`)},search:function(t){console.log(`search: ${t}`),this.savePage(),(t.length>1||0==t.length)&&this.refreshProfiles()},profilesSelected:function(t){console.log(`profilesSelected: ${JSON.stringify(t,null,2)}`);let e={};t.forEach((t=>{e[t.email]=t.email})),Object.assign(this.allSelected,e),this.profilesRows.forEach((t=>{e[t.email]||delete this.allSelected[t.email]})),Object.keys(this.allSelected).length>0?this.addSelectedDisabled=!1:this.addSelectedDisabled=!0}}};var c=l,d=c,u=a(1001),h=a(3453),p=a.n(h),m=a(3150),v=a(2371),f=a(7118),g=a(2102),b=a(4228),y=a(4998),k=a(4497),x=a(6232),w=a(6428),$=a(7047),S=a(7620),D=a(5457),_=a(413),C=a(2877),T=a(7032),P=a(3202),A=a(9762),O=a(4227),I=a(1759),R=a(8697),Z=a(1954),E=a(1208),V=a(5978),L=a(3325);const N=(0,L.Z)(V.Z);var j=N.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...V.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null==(e=this.$refs.input)||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"},genInput(){const t=V.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){V.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),F=a(6656),B=a(7921),M=(0,u.Z)(d,i,s,!1,null,null,null),z=M.exports;p()(M,{VBtn:m.Z,VCard:v.Z,VCardActions:f.h7,VCardSubtitle:f.Qq,VCardTitle:f.EB,VCol:g.Z,VContainer:b.Z,VDataTable:y.Z,VDialog:k.Z,VForm:x.Z,VIcon:w.Z,VImg:$.Z,VListItem:S.Z,VListItemAvatar:D.Z,VListItemContent:_.km,VListItemSubtitle:_.oZ,VListItemTitle:_.V9,VRow:C.Z,VSelect:T.Z,VSnackbar:P.Z,VSpacer:A.Z,VTab:O.Z,VTabItem:I.Z,VTabs:R.Z,VTabsItems:Z.Z,VTabsSlider:E.Z,VTextField:V.Z,VTextarea:j,VToolbar:F.Z,VToolbarTitle:B.qW})},1399:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return j}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Apps"))+" ")]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.headers,items:t.rows,search:t.searchApps,"items-per-page":20,loading:t.loading,options:t.options},on:{"update:options":[function(e){t.options=e},t.updateOptions],"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[t.appData.checkPermission("/apps","w")?a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.uploadDialog=!0}}},[t._v(" "+t._s(t.$t("App Upload"))+" ")]):t._e(),t.appData.isMobile()&&t.appData.checkPermission("/apps","w")?a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.webappDialog=!0}}},[t._v(" "+t._s(t.$t("Generate Web App"))+" ")]):t._e(),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search"},model:{value:t.searchApps,callback:function(e){t.searchApps=e},expression:"searchApps"}})],1)]},proxy:!0},{key:"item.imageUrl",fn:function(t){var e=t.item;return[a("v-img",{attrs:{"max-height":"40","max-width":"40",src:e.imageUrl}})]}},{key:"item.actions",fn:function(e){var i=e.item;return[t.appData.checkPermission("/apps","w")?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteApp(i,e)}}},[t._v(" mdi-delete ")]):t._e()]}}],null,!0)}),a("v-dialog",{attrs:{persistent:"","max-width":"290","overlay-color":"bg"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.$t("Delete deleteAppName",{deleteAppName:t.deleteAppName}))+" ")]),a("v-card-text",[t._v(" "+t._s(t.$t("Are you sure you want to delete",{deleteAppName:t.deleteAppName}))+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary"},on:{click:t.deleteOK}},[t._v(" OK ")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"1000","overlay-color":"bg"},model:{value:t.uploadDialog,callback:function(e){t.uploadDialog=e},expression:"uploadDialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Upload App"))+" ")]),a("v-container",{staticClass:"ma-4"},[a("v-form",{ref:"uploadForm"},[a("v-row",{staticClass:"mx-4"},[a("v-col",[a("v-select",{staticClass:"ma-4",attrs:{items:t.appTypes,label:t.$t("App Type")},model:{value:t.appType,callback:function(e){t.appType=e},expression:"appType"}})],1)],1),"deb"==t.appType?a("v-row",{staticClass:"mx-4"},[a("v-col",[a("v-autocomplete",{attrs:{clearable:"",items:t.aptPackages,loading:t.aptPackagesLoading,"search-input":t.search,rules:t.fileRules,"hide-no-data":"","hide-selected":"","item-text":"desc","item-value":"package",label:t.$t("APT Package Name"),placeholder:t.$t("Start typing to Search"),"prepend-icon":"mdi-database-search"},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e}},model:{value:t.aptPackage,callback:function(e){t.aptPackage=e},expression:"aptPackage"}})],1)],1):t._e(),a("v-row",{staticClass:"mx-4"},[a("v-col",[a("v-file-input",{attrs:{"show-size":"",accept:"apk"==t.appType?".apk":".deb",label:"apk"==t.appType?t.$t("APK File"):t.$t("DEB File"),rules:t.fileRules},on:{change:t.selectFile},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}})],1)],1),t.uploadAppDesc.appName&&""!=t.uploadAppDesc.appName?a("v-row",{staticClass:"mx-4"},[a("v-col",[a("v-text-field",{attrs:{label:t.$t("App Name"),readonly:""},model:{value:t.uploadAppDesc.appName,callback:function(e){t.$set(t.uploadAppDesc,"appName",e)},expression:"uploadAppDesc.appName"}})],1),a("v-col",[a("v-text-field",{attrs:{label:t.$t("Package Name"),readonly:""},model:{value:t.uploadAppDesc.packageName,callback:function(e){t.$set(t.uploadAppDesc,"packageName",e)},expression:"uploadAppDesc.packageName"}})],1)],1):t._e(),t.uploadAppDesc.appName&&""!=t.uploadAppDesc.appName?a("v-row",{staticClass:"mx-4"},[a("v-col",[a("v-text-field",{attrs:{label:t.$t("Version Name"),readonly:""},model:{value:t.uploadAppDesc.versionName,callback:function(e){t.$set(t.uploadAppDesc,"versionName",e)},expression:"uploadAppDesc.versionName"}})],1),a("v-col",[a("v-text-field",{attrs:{label:t.$t("Version Code"),readonly:""},model:{value:t.uploadAppDesc.versionCode,callback:function(e){t.$set(t.uploadAppDesc,"versionCode",e)},expression:"uploadAppDesc.versionCode"}})],1)],1):t._e(),a("v-row",{staticClass:"mx-4"},[a("v-col",[t.uploadAppDesc.uploadStatus&&""!=t.uploadAppDesc.uploadStatus?a("v-alert",{attrs:{type:t.uploadAppDesc.uploadAlertType,text:""}},[t._v(" "+t._s(t.uploadAppDesc.uploadStatus)+" "),t.uploadProgress>0?a("v-progress-linear",{model:{value:t.uploadProgress,callback:function(e){t.uploadProgress=e},expression:"uploadProgress"}}):t._e(),"success"==t.uploadAppDesc.uploadAlertType?a("v-btn",{staticClass:"ma-2",attrs:{color:"success"},on:{click:t.goToUploadedApp}},[t._v(" "+t._s(t.$t("Go to App"))+" ")]):t._e()],1):t._e()],1)],1)],1)],1),a("v-card-actions",{staticClass:"mx-4"},[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.uploadDialog=!1}}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),a("v-btn",{attrs:{color:"primary",loading:t.uploading,disabled:!t.uploadSelectedFile&&!t.aptPackage||t.uploading||!t.uploadValid},on:{click:t.startUpload}},[t._v(" "+t._s(t.$t("Upload"))+" "),a("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-cloud-upload ")])],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"1000","overlay-color":"bg"},model:{value:t.webappDialog,callback:function(e){t.webappDialog=e},expression:"webappDialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Generate Web App"))+" ")]),a("v-container",{staticClass:"ma-4"},[a("v-row",{staticClass:"mx-4"},[a("v-col",[a("v-text-field",{attrs:{label:t.$t("URL"),placeholder:"https://youwebsite.com",rules:t.httpRules},model:{value:t.uploadAppDesc.appURL,callback:function(e){t.$set(t.uploadAppDesc,"appURL",e)},expression:"uploadAppDesc.appURL"}})],1)],1),a("v-row",{staticClass:"mx-4"},[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{label:t.$t("App Name")},model:{value:t.uploadAppDesc.appName,callback:function(e){t.$set(t.uploadAppDesc,"appName",e)},expression:"uploadAppDesc.appName"}})],1),a("v-col",{attrs:{cols:"1"}},[a("v-img",{attrs:{height:"50",width:"50",src:t.iconURL}})],1),a("v-col",{attrs:{cols:"5"}},[a("v-file-input",{attrs:{"show-size":"",accept:".png",label:t.$t("App Icon")},on:{change:t.selectIcon}})],1)],1),a("v-row",{staticClass:"mx-4"},[a("v-col",[t.uploadAppDesc.uploadStatus&&""!=t.uploadAppDesc.uploadStatus?a("v-alert",{attrs:{type:t.uploadAppDesc.uploadAlertType,text:""}},[t._v(" "+t._s(t.uploadAppDesc.uploadStatus)+" "),t.uploadProgress>0?a("v-progress-linear",{model:{value:t.uploadProgress,callback:function(e){t.uploadProgress=e},expression:"uploadProgress"}}):t._e(),"success"==t.uploadAppDesc.uploadAlertType?a("v-btn",{staticClass:"ma-2",attrs:{color:"success"},on:{click:t.goToUploadedApp}},[t._v(" "+t._s(t.$t("Go to App"))+" ")]):t._e()],1):t._e()],1)],1)],1),a("v-card-actions",{staticClass:"mx-4"},[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.webappDialog=!1}}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),a("v-btn",{attrs:{color:"primary",loading:t.uploading,disabled:!t.uploadAppDesc.appURL||""==t.uploadAppDesc.appURL||!t.uploadAppDesc.appName||""==t.uploadAppDesc.appName||""==t.iconURL||t.uploading},on:{click:t.startWebapp}},[t._v(" "+t._s(t.$t("Generate App"))+" "),a("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-cloud-upload ")])],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"Apps",data:()=>({headers:[],rows:[],searchApps:"",search:"",totalItems:0,loading:!0,options:{},dialog:!1,deleteObj:null,deleteAppName:"",snackbarSave:!1,snackbarText:"",filename:null,uploadDialog:!1,uploading:!1,uploadProgress:0,uploadFileName:"",uploadSelectedFile:null,uploadValid:!1,uploadAppDesc:{},webappDialog:!1,appTypes:[],appType:"apk",aptPackage:"",aptPackagesLoading:!1,aptPackages:[],fileRules:[],iconURL:"",httpRules:[t=>!!t||"URL is required",t=>/[(http(s)?)://(www.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/.test(t)||"URL must be valid"],appData:o.Z}),methods:{savePage:function(){n.Z.savePageData(`${r.name}`,this,["options","searchApps"])},updateOptions(){this.savePage()},rowClick:function(t){console.log(`rowClick: ${t.packageName}`),this.$router.push("/App/"+t.packageName)},deleteApp:function(t,e){e.stopPropagation(),this.deleteObj=t,this.deleteAppName=t.appName,this.dialog=!0},deleteOK:function(){console.log(`deleteApp: ${this.deleteAppName}`),this.dialog=!1,n.Z["delete"]({url:"api/apps/"+encodeURIComponent(this.deleteObj.packageName)}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Deleted"),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error")+" - "+t.data.message,this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},selectFile:function(t){console.log("selectFile: "+t),this.uploadSelectedFile=t},startUpload:function(){this.uploading=!0;let t=new FormData;t.append("file",this.uploadSelectedFile),this.uploadAppDesc.uploadAlertType="info",this.uploadAppDesc.uploadStatus=this.$t("Uploading file..");let e=this;n.Z.post({url:"api/upload",data:t,headers:{"Content-Type":"multipart/form-data"},timeout:24e4,onUploadProgress:function(t){var a=Math.round(100*t.loaded/t.total);console.log(a),e.uploadProgress=Math.round(a/2)}}).then((t=>{console.log(t.data),this.uploadSelectedFile=null,1==t.data.status?(console.log(`status: ${t.data.status}`),this.uploadFileName=t.data.uploadFileName,this.uploadAPK()):(console.log(`status: ${t.data.status}`),this.uploading=!1,this.uploadAppDesc.uploadStatus=this.$t("Error uploading apk")+" - "+t.data.message,this.uploadAppDesc.uploadAlertType="error")})).catch((t=>{this.uploadSelectedFile=null,this.uploading=!1,this.uploadAppDesc.uploadStatus=this.$t("Error uploading apk")+" - "+t,this.uploadAppDesc.uploadAlertType="error"})).finally((()=>this.loading=!1))},uploadAPK:function(){console.log("uploadAPK: "+this.uploadFileName),n.Z.put({url:"api/apps",data:{fileName:this.uploadFileName,packageName:this.aptPackage,appType:this.appType}}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.uploadAppDesc=t.data,this.uploadAppDesc.uploadAlertType="info",this.uploadAppDesc.uploadStatus=this.$t("Installing apk.."),this.uploadProgress=60,this.checkUploadStatus()):(console.log(`status: ${t.data.status}`),this.uploadAppDesc.uploadStatus=this.$t("Error installing apk")+" - "+t.data.message,this.uploadAppDesc.uploadAlertType="error",this.uploading=!1)})).catch((t=>{this.uploadAppDesc.uploadStatus=this.$t("Error installing apk")+" - "+t,this.uploadAppDesc.uploadAlertType="error",this.uploading=!1})).finally((()=>this.loading=!1))},goToUploadedApp:function(){this.$router.push("/App/"+this.uploadAppDesc.packageName)},checkUploadStatus:function(){let t=this;n.Z.get({url:"api/apps/"+encodeURIComponent(this.uploadAppDesc.packageName)+"/checkUploadStatus"}).then((e=>{if(console.log(e.data),1==e.data.status){console.log(`status: ${e.data.status}`);let a=e.data.apkStatus;a>0?(1==a?(this.uploadAppDesc.uploadStatus=this.$t("Processing apk.."),this.uploadProgress=70):(this.uploadAppDesc.uploadStatus=this.$t("Installing app.."),this.uploadProgress=90),this.uploadAppDesc.uploadAlertType="info",setTimeout((function(){t.checkUploadStatus()}),1e3)):(0==a?(this.uploadAppDesc.uploadStatus=this.$t("The apk was installed successfully"),this.uploadAppDesc.uploadAlertType="success",this.refresh()):(this.uploadAppDesc.uploadStatus=this.$t("Error installing apk"),this.uploadAppDesc.uploadAlertType="error"),this.uploadProgress=0,this.uploading=!1)}else console.log(`status: ${e.data.status}`),this.uploadAppDesc.uploadStatus=this.$t("Error installing apk")+" - "+e.data.status,this.uploadAppDesc.uploadAlertType="error",this.uploading=!1})).catch((t=>{this.uploadAppDesc.uploadStatus=this.$t("Error installing apk")+" - "+t,this.uploadAppDesc.uploadAlertType="error",this.uploading=!1})).finally((()=>this.loading=!1))},refresh:function(){n.Z.get({url:"api/apps"}).then((t=>{console.log(t.data),1==t.data.status?this.rows=t.data.apps:(console.log(`status: ${t.data.status}`),this.rows=[])})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},selectIcon:function(t){console.log(t);let e=this;if(!t)return void(e.iconURL="");let a=new FileReader;a.onload=function(){var t=a.result;console.log("dataURL: "+t),e.iconURL=t},a.readAsDataURL(t)},startWebapp:function(){this.uploading=!0,console.log("startWebapp"),this.uploadAppDesc.uploadAlertType="info",this.uploadAppDesc.uploadStatus=this.$t("Sending web app information.."),this.uploadProgress=1;let t=this.iconURL.split(","),e=t[1];console.log("arr.length: "+t.length),n.Z.put({url:"api/apps/webapp",data:{appURL:this.uploadAppDesc.appURL,appName:this.uploadAppDesc.appName,ssoURL:this.uploadAppDesc.appURL,OrientationMode:"0",icLauncher:e}}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.uploadAppDesc.packageName=t.data.apkname,this.uploadAppDesc.uploadAlertType="info",this.uploadAppDesc.uploadStatus=this.$t("Building web app.."),this.uploadProgress=10,this.checkWebappStatus()):(console.log(`status: ${t.data.status}`),this.uploadAppDesc.uploadStatus=this.$t("Error building web app")+" - "+t.data.message,this.uploadAppDesc.uploadAlertType="error",this.uploading=!1)})).catch((t=>{this.uploadAppDesc.uploadStatus=this.$t("Error building web app")+" - "+t,this.uploadAppDesc.uploadAlertType="error",this.uploading=!1})).finally((()=>this.loading=!1))},checkWebappStatus:function(){let t=this;n.Z.get({url:"api/apps/webapp?appURL="+encodeURIComponent(this.uploadAppDesc.appURL)}).then((e=>{if(console.log(e.data),1==e.data.status){console.log(`status: ${e.data.status}`),this.uploadAppDesc.uploadAlertType="info";let a=!0,i=!1;1==e.data.URLLauncherStatus?(a=!1,i=!0,this.uploadAppDesc.uploadStatus=this.$t("Web app was genereated successfully")):2==e.data.URLLauncherStatus?(a=!1,this.uploadAppDesc.uploadStatus=this.$t("Building web app..."),this.uploadProgress=20):4==e.data.URLLauncherStatus?(a=!1,this.uploadAppDesc.uploadStatus=this.$t("Installing web app..."),this.uploadProgress=60):3==e.data.URLLauncherStatus?(a=!0,i=!0,this.uploadAppDesc.uploadStatus=this.$t("Build error")):5==e.data.URLLauncherStatus?(a=!0,i=!0,this.uploadAppDesc.uploadStatus=this.$t("Install error")):(a=!0,i=!0,this.uploadAppDesc.uploadStatus=this.$t("Unknown status: "+this.uploadAppDesc.uploadStatus)),a?(this.uploadAppDesc.uploadAlertType="error",this.uploadProgress=0):i?(this.uploadAppDesc.uploadAlertType="success",this.uploadProgress=0):this.uploadAppDesc.uploadAlertType="info",this.$forceUpdate(),i?this.uploading=!1:setTimeout((function(){t.checkWebappStatus()}),1e3)}else console.log(`status: ${e.data.status}`),this.uploadAppDesc.uploadStatus=this.$t("Error building web app")+" - "+e.data.message,this.uploadAppDesc.uploadAlertType="error",this.uploading=!1})).catch((t=>{this.uploadAppDesc.uploadStatus=this.$t("Error building web app")+" - "+t,this.uploadAppDesc.uploadAlertType="error",this.uploading=!1})).finally((()=>this.loading=!1))}},watch:{aptPackage(t){console.log(`aptPackage: ${t}`),this.uploadValid=this.$refs.uploadForm.validate()},uploadSelectedFile(){this.uploadValid=this.$refs.uploadForm.validate()},searchApps(){this.savePage()},appType(){this.aptPackage="",this.filename=null},search(){this.aptPackages.length>0||this.aptPackagesLoading||(this.aptPackagesLoading=!0,n.Z.get({url:"api/apps/debs"}).then((t=>{if(console.log(t.data),this.aptPackagesLoading=!1,1==t.data.status){console.log("aptlist OK!"),this.aptPackages=[];let e=t.data.aptList.split("\n");for(let t=1;t<e.length;t++){let a=e[t].split("/");if(a.length>=2){const i={package:a[0],desc:e[t]};this.aptPackages.push(i)}}}})).catch((t=>{console.error(t),this.aptPackagesLoading=!1})),fetch("https://api.publicapis.org/entries").then((t=>t.json())).then((t=>{const{count:e,entries:a}=t;this.count=e,this.entries=a})).catch((t=>{console.log(t)})).finally((()=>this.isLoading=!1)))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Apps"),to:"/Apps",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("Icon"),value:"imageUrl",sortable:!1},{text:this.$t("Name"),value:"appName"},{text:this.$t("Package"),value:"packageName"},{text:"Actions",value:"actions",sortable:!1}],this.appTypes=[],o.Z.isMobile()&&this.appTypes.push({text:this.$t("Android (APK)"),value:"apk"}),o.Z.isDesktop()&&this.appTypes.push({text:this.$t("Linux (DEB)"),value:"deb"}),this.appTypes.length>0&&(this.appType=this.appTypes[0].value),this.fileRules=[()=>!this.uploadSelectedFile||!this.aptPackage||this.$t("Please select either APT package or DEB file")],n.Z.loadPageData(r.name,this),this.refresh()}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(1234),m=a(9511),v=a(3150),f=a(2371),g=a(7118),b=a(2102),y=a(4228),k=a(4998),x=a(4497),w=(a(6699),a(5978)),$=w.Z,S=a(5424),D=a(4589),_=a(1824),C=a(6290),T=$.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>(0,D.TI)(t).every((t=>null!=t&&"object"===typeof t))}},computed:{classes(){return{...$.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce(((t,{size:e=0})=>t+e),0);return this.$vuetify.lang.t(this.counterSizeString,t,(0,D.XE)(e,1024===this.base))},internalArrayValue(){return(0,D.TI)(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((t=>{const{name:e="",size:a=0}=t,i=this.truncateText(e);return this.showSize?`${i} (${(0,D.XE)(a,1024===this.base)})`:i})):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&(0,_.N6)("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];(0,D.vZ)(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map(((t,e)=>this.$createElement(S.Z,{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t]))):[]},genControl(){const t=$.options.methods.genControl.call(this);return this.hideInput&&(t.data.style=(0,C.y0)(t.data.style,{display:"none"})),t},genInput(){const t=$.options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",(()=>{this.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach(((e,a)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[a],file:e,index:a}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=$.options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:()=>this.$refs.input.click()},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}}),P=a(6232),A=a(6428),O=a(7047),I=a(7003),R=a(2877),Z=a(7032),E=a(3202),V=a(9762),L=a(6656),N=(0,d.Z)(c,i,s,!1,null,null,null),j=N.exports;h()(N,{VAlert:p.Z,VAutocomplete:m.Z,VBtn:v.Z,VCard:f.Z,VCardActions:g.h7,VCardText:g.ZB,VCardTitle:g.EB,VCol:b.Z,VContainer:y.Z,VDataTable:k.Z,VDialog:x.Z,VFileInput:T,VForm:P.Z,VIcon:A.Z,VImg:O.Z,VProgressLinear:I.Z,VRow:R.Z,VSelect:Z.Z,VSnackbar:E.Z,VSpacer:V.Z,VTextField:w.Z,VToolbar:L.Z})},3590:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return A}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Exchange Setup"))+" ")]),a("v-form",[a("v-container",[a("v-row",[a("v-col",[a("v-switch",{attrs:{label:t.$t("Set exchange information for all users")},model:{value:t.emailStatus,callback:function(e){t.emailStatus=e},expression:"emailStatus"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:t.$t("Server"),disabled:!t.emailStatus},model:{value:t.serverUrl,callback:function(e){t.serverUrl=e},expression:"serverUrl"}})],1)],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:t.$t("Port"),disabled:!t.emailStatus},model:{value:t.port,callback:function(e){t.port=e},expression:"port"}})],1),a("v-col",[a("v-switch",{attrs:{label:t.$t("Secure SSL Only"),disabled:!t.emailStatus},model:{value:t.sslType,callback:function(e){t.sslType=e},expression:"sslType"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"mr-4",attrs:{color:"primary",loading:t.loading},on:{click:t.saveDetails}},[t._v(" Save ")])],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"EmailSetup",data:()=>({port:"443",serverUrl:"",sslType:!1,emailStatus:0,loading:!0,options:{},snackbarSave:!1,snackbarText:"",appData:o.Z}),methods:{refresh:function(){n.Z.get({url:"api/email"}).then((t=>{if(console.log(t.data),1==t.data.status){if(console.log(`status: ${t.data.status}`),this.serverUrl=t.data.serverUrl,this.serverUrl.startsWith("https://")){var e=new URL(this.serverUrl);this.serverUrl=e.hostname}this.sslType="1"==t.data.sslType,this.port=t.data.port,this.emailStatus=!0}else 0==t.data.status?(this.serverUrl="",this.emailStatus=!1):(console.log(`status: ${t.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},saveDetails:function(){this.emailStatus?n.Z.post({url:"api/email",data:{serverUrl:this.serverUrl,port:this.port,sslType:this.sslType?"1":"0"}}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Saved")):(console.log(`status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1)):n.Z["delete"]({url:"api/email"}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Saved")):(console.log(`status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Exchange Setup"),to:"/EmailSetup",disabled:!1}];this.$emit("updatePage",t),this.refresh()}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(2102),g=a(4228),b=a(6232),y=a(2877),k=a(3202),x=(a(2245),a(7764)),w=a(8230),$=a(5500),S=a(5827),D=a(624),_=a(4589),C=x.Z.extend({name:"v-switch",directives:{Touch:$.Z},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...w.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(S.b0,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(D.Z,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===_.Do.left&&this.isActive||t.keyCode===_.Do.right&&!this.isActive)&&this.onChange()}}}),T=a(5978),P=(0,d.Z)(c,i,s,!1,null,null,null),A=P.exports;h()(P,{VBtn:p.Z,VCard:m.Z,VCardTitle:v.EB,VCol:f.Z,VContainer:g.Z,VForm:b.Z,VRow:y.Z,VSnackbar:k.Z,VSwitch:C,VTextField:T.Z})},7134:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return L}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"details"},[t._v(" "+t._s(t.$t("Details"))+" ")]),a("v-tab",{key:"rules"},[t._v(" "+t._s(t.$t("Rules"))+" ")]),a("v-tab",{key:"profiles"},[t._v(" "+t._s(t.$t("Profiles"))+" ")]),a("v-tab",{key:"groups"},[t._v(" "+t._s(t.$t("Groups"))+" ")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(t._s(t.firewall_name))]),a("v-spacer")],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"details"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-form",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Firewall Name")},model:{value:t.firewall_name,callback:function(e){t.firewall_name=e},expression:"firewall_name"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"mr-4",attrs:{color:"primary",loading:t.saveLoading},on:{click:t.saveDetails}},[t._v(" Save ")])],1)],1)],1)],1)],1)],1),a("v-tab-item",{key:"rules"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Rules")))]),a("v-card-text",[t._v(" "+t._s(t.$t("Firewall rules control the kind of outbound traffic that is allowed from a remote session. All inbound traffic is not allowed."))+" ")]),a("v-card-title",[t._v(t._s(t.$t("Outbound Rules")))]),a("v-card-text",[t._v(" "+t._s(t.$t("Outbound traffic will only be allowed to the specified addresses and ports. All other traffic will be blocked."))+" ")]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.rulesHeaders,items:t.rules,loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){t.editRuleItem=null,t.addRuleDialog=!0}}},[t._v(" "+t._s(t.$t("Add Outbound Rule"))+" ")])],1)]},proxy:!0},{key:"item.dport",fn:function(e){var i=e.item;return["0"==i.dport?a("div",[t._v(t._s(t.$t("All")))]):a("div",[t._v(t._s(i.dport))])]}},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.editRule(i)}}},[t._v(" mdi-pencil ")]),a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteRule(i)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"800px","overlay-color":"bg"},model:{value:t.addRuleDialog,callback:function(e){t.addRuleDialog=e},expression:"addRuleDialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Add Outbound Rule"))+" ")]),a("v-form",{ref:"ruleForm",model:{value:t.addRuleForm,callback:function(e){t.addRuleForm=e},expression:"addRuleForm"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"24",sm:"12",md:"6"}},[a("v-text-field",{attrs:{label:t.$t("Destination (IP Address or CIDR)"),rules:t.ipRules},model:{value:t.destination,callback:function(e){t.destination=e},expression:"destination"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-select",{attrs:{items:t.protItems,label:t.$t("Protocol"),rules:t.requiredRules},model:{value:t.prot,callback:function(e){t.prot=e},expression:"prot"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-combobox",{staticClass:"bg",attrs:{"background-color":"bg",label:t.$t("Port"),items:t.dportItems,rules:t.dportRules},model:{value:t.dport,callback:function(e){t.dport=e},expression:"dport"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:t.$t("Description")},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:t.addRule}},[t._v(" Save ")])],1)],1)],1)],1)],1)],1)],1)],1),a("v-tab-item",{key:"profiles"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Profiles")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.headers,items:t.rows,loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.addProfile}},[t._v(" "+t._s(t.$t("Assign Firewall to Profiles"))+" ")])],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteProfile(i)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"800px","overlay-color":"bg"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Add Profiles"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.profilesHeaders,items:t.profilesRows,loading:t.profilesLoading,"server-items-length":t.totalItems,"items-per-page":5,options:t.options,search:t.search,"show-select":"","multi-sort":""},on:{"update:options":[function(e){t.options=e},t.updateOptions],"click:row":t.rowClick},scopedSlots:t._u([{key:"header.data-table-select",fn:function(){return[t._v("   ")]},proxy:!0},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",disabled:t.addSelectedDisabled,loading:t.addSelectedLoading},on:{click:t.addSelected}},[t._v(" "+t._s(t.$t("Assign Selected Profiles"))+" ")])],1)]},proxy:!0}],null,!0),model:{value:t.profilesSelected,callback:function(e){t.profilesSelected=e},expression:"profilesSelected"}})],1)],1)],1)],1),a("v-tab-item",{key:"groups"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Groups")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.groupHeaders,items:t.groupRows,loading:t.groupLoading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.addGroup}},[t._v(" "+t._s(t.$t("Assign Firewall to Groups"))+" ")])],1)]},proxy:!0},{key:"item.addomain",fn:function(e){var i=e.item;return["All"==i.groupname?a("div",[t._v(t._s(t.$t("Automatic")))]):""==i.addomain?a("div",[t._v(t._s(t.$t("Manual")))]):a("div",[t._v(t._s(t.$t("Active Directory")))])]}},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteGroup(i)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"800px","overlay-color":"bg"},model:{value:t.groupDialog,callback:function(e){t.groupDialog=e},expression:"groupDialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Add Groups"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.groupSearch,callback:function(e){t.groupSearch=e},expression:"groupSearch"}})],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.allGroupsHeaders,items:t.allGroupsRows,loading:t.allGroupsLoading,search:t.groupSearch},on:{"click:row":t.groupClick},scopedSlots:t._u([{key:"item.adDomain",fn:function(e){var i=e.item;return["All"==i.groupName?a("div",[t._v(t._s(t.$t("Automatic")))]):""==i.adDomain?a("div",[t._v(t._s(t.$t("Manual")))]):a("div",[t._v(t._s(t.$t("Active Directory")))])]}}],null,!0)})],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);const r=a(381);let l={name:"AppDetails",components:{},data:()=>({firewall_id:0,firewall_name:"",details:{},totalNumOfUsers:0,tab:{},headers:[],rows:[],dialog:!1,profilesHeaders:[],profilesRows:[],profilesLoading:!0,search:"",profilesSelected:[],allSelected:{},addSelectedDisabled:!0,addSelectedLoading:!1,dialogInstall:!1,addItemLabel:"",groupHeaders:[],groupRows:[],groupLoading:!1,groupSearch:"",groupDialog:!1,allGroupsHeaders:[],allGroupsRows:[],allGroupsLoading:!1,allGroupSelected:{},totalItems:0,loading:!0,options:{},appData:o.Z,saveLoading:!1,snackbarSave:!1,snackbarText:"",moment:r,dialogDelete:!1,deleteProfileItem:{},deleteItemType:"",deleteItemName:"",rulesHeaders:[],rules:[],addRuleDialog:!1,dportItems:[],protItems:[],dport:"",destination:"",description:"",prot:"",requiredRules:[],ipRules:[],dportRules:[],addRuleForm:!0,editRuleItem:null}),methods:{savePage:function(){n.Z.savePageData(`${l.name}`,this,["options","search","tab"])},updateOptions:function(){console.log("updateOptions"),this.savePage(),this.refreshProfiles()},rowClick:function(){console.log("rowClick")},deleteProfile:async function(t){try{await n.Z["delete"]({url:`api/firewall/${this.firewall_id}/user`,data:{email:t.email}}),this.saveLoading=!1,this.dialog=!1,this.snackbarText="Removed",this.snackbarSave=!0,this.loadDetails()}catch(e){console.error(`Error: ${e}`,e),this.dialog=!1,this.snackbarText="Error",this.snackbarSave=!0}},deleteGroup:async function(t){console.log(`deleteGroup: ${JSON.stringify(t,null,2)}`);try{await n.Z["delete"]({url:`api/firewall/${this.firewall_id}/group`,data:{groupname:t.groupname,addomain:t.addomain}}),this.saveLoading=!1,this.dialog=!1,this.snackbarText="Removed",this.snackbarSave=!0,this.loadDetails()}catch(e){console.error(`Error: ${e}`,e),this.dialog=!1,this.snackbarText="Error",this.snackbarSave=!0}},deleteRule:async function(t){try{let e=t.rule_id;await n.Z["delete"]({url:`api/firewall/${this.firewall_id}/rule`,data:{rule_id:e}}),this.saveLoading=!1,this.addRuleDialog=!1,this.snackbarText="Removed",this.snackbarSave=!0,this.loadDetails()}catch(e){console.error(`Error: ${e}`,e),this.addRuleDialog=!1,this.snackbarText="Error",this.snackbarSave=!0}},editRule:async function(t){try{let e=t.rule_id;await n.Z.get({url:`api/firewall/${this.firewall_id}/rule`,params:{rule_id:e}}),this.editRuleItem=t,this.destination=t.destination,0==t.dport?this.dport="All":this.dport=t.dport,this.prot=t.prot,this.addRuleDialog=!0}catch(e){console.error(`Error: ${e}`,e),this.addRuleDialog=!1,this.snackbarText="Error",this.snackbarSave=!0}},addRule:async function(){let t=this.$refs.ruleForm.validate();if(this.addRuleForm)try{let t=this.destination,e=this.prot,a=this.dport;if("string"==typeof a){let t=a.split("(");t.length>1&&(a=t[0].trim())}"All"==a&&(a="0");let i=this.description,s={destination:t,prot:e,dport:a,description:i},o=n.Z.put;this.editRuleItem&&this.editRuleItem.rule_id&&(o=n.Z.post,s.rule_id=this.editRuleItem.rule_id),await o({url:`api/firewall/${this.firewall_id}/rule`,data:s}),this.saveLoading=!1,this.addRuleDialog=!1,this.editRuleItem&&this.editRuleItem.rule_id?this.snackbarText="Updated":this.snackbarText="Added",this.snackbarSave=!0,this.loadDetails()}catch(e){console.error(`Error: ${e}`,e),this.addRuleDialog=!1,this.snackbarText="Error",this.snackbarSave=!0}else console.log(`addRuleForm: ${this.addRuleForm}, v: ${t}`)},validatePort:function(t){if("All"==t)return!0;if("string"==typeof t){let e=t.split("(");e.length>1&&(t=e[0].trim())}return!(!t||isNaN(t)||parseInt(t)!=t)||(console.log(`Validate port error. port: "${t}"`),!1)},validateIP:function(t){if("string"!=typeof t)return!1;let e=t.split("/");if(e.length>2||e.length<1)return!1;if(2==e.length){let t=e[1];if(isNaN(t)||parseInt(t)!=t||t<0||t>32)return!1}let a=e[0];return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(a)},loadDetails:function(){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null),this.firewall_id=this.$route.params.firewall_id,n.Z.get({url:"api/firewall/"+encodeURIComponent(this.firewall_id)}).then((t=>{if(console.log(t.data),1==t.data.status){console.log("loadDetails: Success"),this.firewall_name=t.data.firewall_name,this.rules=t.data.rules,this.rows=t.data.users,this.rulesHeaders=[{text:this.$t("Destination"),value:"destination"},{text:this.$t("Protocol"),value:"prot"},{text:this.$t("Port"),value:"dport"},{text:this.$t("Description"),value:"description"},{text:"Actions",value:"actions",sortable:!1}],this.requiredRules=[t=>!!t||this.$t("Field is required")],this.ipRules=[t=>this.validateIP(t)||this.$t("IP address is not valid")],this.dportRules=[t=>this.validatePort(t)||this.$t("Port number is not valid")],this.headers=[{text:this.$t("Last Name"),value:"user.lastname"},{text:this.$t("First Name"),value:"user.firstname"},{text:this.$t("Email"),value:"email"},{text:"Actions",value:"actions",sortable:!1}],this.loading=!1,this.groupLoading=!1,this.groupRows=t.data.groups,this.groupHeaders=[{text:this.$t("Group Name"),value:"groupname"},{text:this.$t("Group Type"),value:"addomain"},{text:"Actions",value:"actions",sortable:!1}],this.dportItems=["All","80 (HTTP)","443 (HTTPS)","22 (SSH)","3389 (RDP)","5900 (VNC)"],this.protItems=["tcp","udp","icmp"];let e=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Firewalls"),to:"/Firewalls",disabled:!1},{text:this.firewall_name,to:"/Firewall/"+this.firewall_id,disabled:!1}];this.$emit("updatePage",e),this.refreshTimeout=setTimeout(this.loadDetails,5e3)}else console.log(`status: ${t.data.status}`),this.$router.push("/Login")})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},saveDetails:function(){this.saveLoading=!0,n.Z.post({url:"api/firewall/"+encodeURIComponent(this.firewall_id),data:{firewall_name:this.firewall_name}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.saveLoading=!1,this.snackbarText="Saved",this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.saveLoading=!1))},addGroup:function(){this.groupDialog=!0,this.loadAllGroups()},loadAllGroups:function(){this.allGroupsLoading=!0,this.allGroupsHeaders=[{text:this.$t("Group Name"),value:"groupName"},{text:this.$t("Group Type"),value:"adDomain"}],n.Z.get({url:"api/groups"}).then((t=>{console.log(t.data),1==t.data.status?(this.allGroupsRows=t.data.groups,this.allGroupsLoading=!1):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},groupClick:async function(t){console.log(`groupClick: ${JSON.stringify(t,null,2)}`);try{await n.Z.put({url:`api/firewall/${this.firewall_id}/group`,data:{groupname:t.groupName,addomain:t.adDomain}}),this.saveLoading=!1,this.groupDialog=!1,this.snackbarText="Added",this.snackbarSave=!0,this.loadDetails()}catch(e){console.error(`Error: ${e}`,e),this.dialog=!1,this.snackbarText="Error",this.snackbarSave=!0}},addProfile:function(){this.dialog=!0,this.allSelected=[],this.addSelectedDisabled=!0},addSelected:async function(){try{for(const t of this.profilesSelected)await n.Z.put({url:`api/firewall/${this.firewall_id}/user`,data:{email:t.email}});this.saveLoading=!1,this.dialog=!1,this.snackbarText="Saved",this.snackbarSave=!0,this.loadDetails()}catch(t){console.error(`Error: ${t}`,t),this.dialog=!1,this.snackbarText="Error",this.snackbarSave=!0}},refreshProfiles:function(){this.profilesLoading=!0;let t=this.options.itemsPerPage>0?this.options.itemsPerPage:1e4,e=(this.options.page-1)*t;n.Z.post({url:"api/profiles",data:{offset:e,limit:t,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,search:this.search}}).then((t=>{if(this.profilesLoading=!1,console.log(t.data),1==t.data.status){this.profilesRows=t.data.profiles,this.totalItems=t.data.totalItems;let e=[];this.profilesRows.forEach((t=>{this.allSelected[t.email]&&e.push(t)})),this.profilesSelected=e}else console.log(`status: ${t.data.status}`),this.$router.push("/Login")})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Firewalls"),to:"/Firewalls",disabled:!1},{text:this.$route.params.firewall_id,to:"/Firewall/"+this.$route.params.firewall_id,disabled:!1}];this.$emit("updatePage",t),this.profilesHeaders=[{text:this.$t("Last Name"),value:"lastName"},{text:this.$t("First Name"),value:"firstName"},{text:this.$t("Email"),value:"email"}],n.Z.loadPageData(l.name,this),this.loadDetails()},beforeDestroy:function(){console.log("lifecycle: beforeDestroy"),this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null)},watch:{tab:function(t){console.log(`tab: ${t}`),this.savePage()},search:function(t){console.log(`search: ${t}`),this.savePage(),(t.length>1||0==t.length)&&this.refreshProfiles()},profilesSelected:function(t){console.log(`profilesSelected: ${JSON.stringify(t,null,2)}`);let e={};t.forEach((t=>{e[t.email]=t.email})),Object.assign(this.allSelected,e),this.profilesRows.forEach((t=>{e[t.email]||delete this.allSelected[t.email]})),Object.keys(this.allSelected).length>0?this.addSelectedDisabled=!1:this.addSelectedDisabled=!0}}};var c=l,d=c,u=a(1001),h=a(3453),p=a.n(h),m=a(3150),v=a(2371),f=a(7118),g=a(2102),b=a(5359),y=a(4228),k=a(4998),x=a(4497),w=a(6232),$=a(6428),S=a(2877),D=a(7032),_=a(3202),C=a(9762),T=a(4227),P=a(1759),A=a(8697),O=a(1954),I=a(1208),R=a(5978),Z=a(6656),E=a(7921),V=(0,u.Z)(d,i,s,!1,null,"3c685289",null),L=V.exports;p()(V,{VBtn:m.Z,VCard:v.Z,VCardText:f.ZB,VCardTitle:f.EB,VCol:g.Z,VCombobox:b.Z,VContainer:y.Z,VDataTable:k.Z,VDialog:x.Z,VForm:w.Z,VIcon:$.Z,VRow:S.Z,VSelect:D.Z,VSnackbar:_.Z,VSpacer:C.Z,VTab:T.Z,VTabItem:P.Z,VTabs:A.Z,VTabsItems:O.Z,VTabsSlider:I.Z,VTextField:R.Z,VToolbar:Z.Z,VToolbarTitle:E.qW})},1453:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return _}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Firewalls"))+" ")]),a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.headers,items:t.rows,"items-per-page":10,search:t.search},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:function(e){t.dialogNew=!0}}},[t._v(t._s(t.$t("New Firewall")))]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteFirewall(i,e)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"500px","overlay-color":"bg"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Remove Firewall")))]),a("v-card-subtitle",{staticClass:"mt-4"},[t._v(t._s(t.$t("Are you sure you want to remove the selected firewall? \n All resules will be deleted.")))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialogDelete=!1}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogDelete=!1|t.removeFirewall()}}},[t._v(t._s(t.$t("Remove Firewall")))]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px","overlay-color":"bg"},model:{value:t.dialogNew,callback:function(e){t.dialogNew=e},expression:"dialogNew"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("New Firewall")))]),a("v-container",{staticClass:"ma-4"},[a("v-form",{ref:"addForm",model:{value:t.addValid,callback:function(e){t.addValid=e},expression:"addValid"}},[a("v-text-field",{attrs:{label:t.$t("Firewall Name"),rules:t.requiredRules},model:{value:t.addFirewallName,callback:function(e){t.addFirewallName=e},expression:"addFirewallName"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialogNew=!1}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.addFirewall()}}},[t._v(t._s(t.$t("Add Firewall")))]),a("v-spacer")],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"primary",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"Groups",data:()=>({headers:[],rows:[],search:"",totalItems:0,loading:!0,options:{},dialogDelete:!1,removeItem:null,snackbarSave:!1,snackbarText:"",addFirewallName:"",dialogNew:!1,requiredRules:[],addValid:!0,appData:o.Z}),methods:{rowClick:function(t){console.log(`rowClick: ${t.firewall_id}`),this.$router.push("/Firewall/"+t.firewall_id)},addFirewall:function(){let t=this.$refs.addForm.validate();this.addValid?(this.dialogNew=!1,n.Z.put({url:"api/firewall",data:{firewall_name:this.addFirewallName}}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Firewall Added"),this.snackbarSave=!0,this.addFirewallName="",this.refresh(),this.$router.push("/Firewall/"+t.data.firewall.firewall_id)):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))):console.log(`addValid: ${this.addValid}, v: ${t}`)},deleteFirewall:function(t,e){return console.log(`deleteFirewall: ${t.firewall_id}`),e.stopPropagation(),this.dialogDelete=!0,this.removeItem=t,!1},removeFirewall:function(){let t=this.removeItem.firewall_id;console.log("firewall_id: "+t),n.Z["delete"]({url:`api/firewall/${encodeURIComponent(t)}`}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Firewall removed"),this.snackbarSave=!0,this.dialogDelete=!1,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refresh:function(){n.Z.get({url:"api/firewall"}).then((t=>{console.log(t.data),1==t.data.status?this.rows=t.data.results:(console.log(`status: ${t.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Firewalls"),to:"/Firewalls",disabled:!1}];this.$emit("updatePage",t),this.requiredRules=[t=>!!t||this.$t("Field is required")],this.headers=[{text:this.$t("Name"),value:"firewall_name"},{text:this.$t("Actions"),value:"actions",sortable:!1}],this.refresh()}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(4228),g=a(4998),b=a(4497),y=a(6232),k=a(6428),x=a(3202),w=a(9762),$=a(5978),S=a(6656),D=(0,d.Z)(c,i,s,!1,null,null,null),_=D.exports;h()(D,{VBtn:p.Z,VCard:m.Z,VCardActions:v.h7,VCardSubtitle:v.Qq,VCardTitle:v.EB,VContainer:f.Z,VDataTable:g.Z,VDialog:b.Z,VForm:y.Z,VIcon:k.Z,VSnackbar:x.Z,VSpacer:w.Z,VTextField:$.Z,VToolbar:S.Z})},7672:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return S}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[a("v-text-field",{attrs:{label:t.$t("Group Name"),readonly:!t.newgroup,rules:[t.checkGroupName]},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.headers,items:t.rows,"items-per-page":10,loading:t.loading,search:t.search,"multi-sort":"","show-select":"","item-key":"email"},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[t.appData.checkPermission("/groups","w")?a("v-btn",{staticClass:"ma-4",attrs:{color:"primary",disabled:t.readonly||""==t.groupName||!0!==t.checkGroupName(t.groupName)},on:{click:t.openAddProfiles}},[t._v(t._s(t.$t("Add Profiles")))]):t._e(),t.appData.checkPermission("/groups","w")?a("v-btn",{staticClass:"ma-4",attrs:{color:"primary",disabled:t.removeSelectedDisable||t.readonly},on:{click:function(e){t.dialogDelete=!0}}},[t._v(t._s(t.$t("Remove Selected Profiles")))]):t._e()],1)]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("v-dialog",{attrs:{"max-width":"800px","overlay-color":"bg"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Add Profiles"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.searchProfiles,callback:function(e){t.searchProfiles=e},expression:"searchProfiles"}})],1),a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.profilesHeaders,items:t.profilesRows,loading:t.profilesLoading,"server-items-length":t.totalItems,"items-per-page":5,options:t.options,search:t.searchProfiles,"show-select":"","multi-sort":"","item-key":"email"},on:{"update:options":[function(e){t.options=e},t.updateOptions]},scopedSlots:t._u([{key:"header.data-table-select",fn:function(){return[t._v("   ")]},proxy:!0},{key:"item.data-table-select",fn:function(e){var i=e.isSelected,s=e.select,o=e.item;return[a("v-simple-checkbox",{attrs:{disabled:!t.isItemExists(o),value:i},on:{input:function(t){return s(t)}}})]}},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",disabled:t.addSelectedDisabled,loading:t.addSelectedLoading},on:{click:t.addSelected}},[t._v(" "+t._s(t.$t("Assign Selected Profiles"))+" ")])],1)]},proxy:!0}],null,!0),model:{value:t.profilesSelected,callback:function(e){t.profilesSelected=e},expression:"profilesSelected"}})],1)],1),a("v-dialog",{attrs:{"max-width":"500px","overlay-color":"bg"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Remove Selected Profiles")))]),a("v-card-subtitle",{staticClass:"mt-4"},[t._v(t._s(t.$t("Are you sure you want to remove the selected profiles?")))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialogDelete=!1}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogDelete=!1|t.removeProfiles(t.selected)}}},[t._v(t._s(t.$t("Remove Profiles")))]),a("v-spacer")],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"primary",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"Group",data:()=>({headers:[],rows:[],search:"",totalItems:0,loading:!0,options:{},groupName:{},adDomain:{},appData:o.Z,groupParam:"",selected:[],removeSelectedDisable:!0,dialogDelete:!1,dialog:!1,profilesHeaders:[],profilesRows:[],profilesLoading:!0,profilesSelected:[],searchProfiles:"",addSelectedDisabled:!0,addSelectedLoading:!1,readonly:!1,newgroup:!0,snackbarSave:!1,snackbarText:"",groupNames:{}}),methods:{openAddProfiles:function(){console.log("openAddProfiles"),this.dialog=!0,this.profilesSelected=[],this.refreshProfiles()},addSelected:function(){this.addSelectedLoading=!0,this.addProfiles(this.profilesSelected)},refreshProfiles:function(){this.profilesLoading=!0;let t=this.options.itemsPerPage>0?this.options.itemsPerPage:1e4,e=(this.options.page-1)*t;n.Z.post({url:"api/profiles",data:{offset:e,limit:t,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,search:this.search}}).then((t=>{this.profilesLoading=!1,console.log(t.data),1==t.data.status?(this.profilesRows=t.data.profiles,this.totalItems=t.data.totalItems):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},isItemExists:function(t){return!this.emailMap[t.email]},updateOptions(t){console.log("update:options",t),this.refreshProfiles()},rowClick:function(t){console.log(`rowClick: ${t.email}`),this.$router.push("/Profile/"+t.email)},refresh:function(){console.log(`groupParam: ${this.groupParam}`),n.Z.get({url:"api/groups/"+encodeURIComponent(this.groupParam)}).then((t=>{console.log(t.data),1==t.data.status?(this.rows=t.data.profiles,this.emailMap={},this.rows.forEach((t=>{this.emailMap[t.email]=1}))):(console.log(`status: ${t.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},loadGroupNames:function(){n.Z.get({url:"api/groups"}).then((t=>{console.log(t.data),1==t.data.status?t.data.groups.forEach((t=>{this.groupNames[t.groupName]="1"})):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},addProfiles:function(t){Array.isArray(t)||(t=[t]);let e,a,i=[];t.forEach((t=>{let e;e="string"===typeof t?t:t.email,i.push(e)})),console.log(`addProfiles: ${i}`),this.newgroup?(e="put",a="",this.groupParam=this.groupName):(e="post",a="addProfiles"),n.Z.req({method:e,url:`api/groups/${encodeURIComponent(this.groupParam)}/${a}`,data:{email:i}}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.addSelectedLoading=!1,this.dialog=!1,this.newgroup?(this.newgroup=!1,this.updatePageHead(),this.snackbarText=this.$t("Group Added")):this.snackbarText=this.$t("Profiles Added"),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.addSelectedLoading=!1,this.snackbarText=this.$t("Error")+" - "+t.data.message,this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},removeProfiles:function(t){Array.isArray(t)||(t=[t]);let e="";t.forEach((t=>{let a;a="string"===typeof t?t:t.email,e+="&email="+encodeURIComponent(a)})),n.Z.get({url:`api/groups/${encodeURIComponent(this.groupParam)}/removeProfiles?${e}`}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.refresh()):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},updatePageHead:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Groups"),to:"/Groups",disabled:!1},{text:this.newgroup?this.$t("New Group"):this.groupName,to:"/Group/"+this.groupName+"/"+this.adDomain,disabled:!1}];this.$emit("updatePage",t)},checkGroupName:function(t){return t&&""!=t?!this.groupNames[t]||this.$t("Group name already exists"):this.$t("Enter group name")}},created:function(){this.groupName=this.$route.params.groupName,"All"==this.groupName?this.readonly=!0:this.readonly=!1,this.groupName||(this.groupName=""),""==this.groupName?(this.newgroup=!0,this.adDomain="",this.loadGroupNames()):(this.newgroup=!1,this.adDomain=this.$route.params.adDomain?this.$route.params.adDomain:""),this.adDomain&&""!=this.adDomain?this.groupParam=`${this.groupName}#${this.adDomain}`:this.groupParam=this.groupName,this.updatePageHead(),this.headers=[{text:this.$t("First Name"),value:"firstName"},{text:this.$t("Last Name"),value:"lastName"},{text:this.$t("Email"),value:"email"}],this.profilesHeaders=[{text:this.$t("Last Name"),value:"lastName"},{text:this.$t("First Name"),value:"firstName"},{text:this.$t("Email"),value:"email"}],this.refresh()},watch:{selected:function(t){console.log(`selected: ${JSON.stringify(t,null,2)}`),this.removeSelectedDisable=0==t.length},profilesSelected:function(t){console.log(`profilesSelected: ${JSON.stringify(t,null,2)}`),this.addSelectedDisabled=0==t.length},searchProfiles:function(t){console.log(`searchProfiles: ${JSON.stringify(t,null,2)}`),this.refreshProfiles()}}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(4998),g=a(4497),b=a(128),y=a(3202),k=a(9762),x=a(5978),w=a(6656),$=(0,d.Z)(c,i,s,!1,null,null,null),S=$.exports;h()($,{VBtn:p.Z,VCard:m.Z,VCardActions:v.h7,VCardSubtitle:v.Qq,VCardTitle:v.EB,VDataTable:f.Z,VDialog:g.Z,VSimpleCheckbox:b.Z,VSnackbar:y.Z,VSpacer:k.Z,VTextField:x.Z,VToolbar:w.Z})},9296:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return S}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Groups"))+" ")]),a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.headers,items:t.rows,"items-per-page":10,search:t.search},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[t.appData.checkPermission("/groups","w")?a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:function(e){return t.$router.push("/Group/")}}},[t._v(t._s(t.$t("New Group")))]):t._e(),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.adDomain",fn:function(e){var i=e.item;return["All"==i.groupName?a("div",[t._v(t._s(t.$t("Automatic")))]):""==i.adDomain?a("div",[t._v(t._s(t.$t("Manual")))]):a("div",[t._v(t._s(t.$t("Active Directory")))])]}},{key:"item.actions",fn:function(e){var i=e.item;return["All"!=i.groupName&&t.appData.checkPermission("/groups","w")?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteGroup(i,e)}}},[t._v(" mdi-delete ")]):t._e()]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"500px","overlay-color":"bg"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Remove Group")))]),a("v-card-subtitle",{staticClass:"mt-4"},[t._v(t._s(t.$t("Are you sure you want to remove the selected group?")))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialogDelete=!1}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialogDelete=!1|t.removeGroup()}}},[t._v(t._s(t.$t("Remove Group")))]),a("v-spacer")],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"primary",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"Groups",data:()=>({headers:[],rows:[],search:"",totalItems:0,loading:!0,options:{},dialogDelete:!1,removeItem:null,snackbarSave:!1,snackbarText:"",appData:o.Z}),methods:{rowClick:function(t){console.log(`rowClick: ${t.groupName}`),this.$router.push("/Group/"+t.groupName+"/"+t.adDomain)},deleteGroup:function(t,e){return console.log(`deleteGroup: ${t.groupName} ${t.adDomain}`),e.stopPropagation(),this.dialogDelete=!0,this.removeItem=t,!1},removeGroup:function(){let t;t=this.removeItem.adDomain&&""!=this.removeItem.adDomain?`${this.removeItem.groupName}#${this.removeItem.adDomain}`:this.removeItem.groupName,console.log("groupParam: "+t),n.Z["delete"]({url:`api/groups/${encodeURIComponent(t)}`}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Group removed"),this.snackbarSave=!0,this.dialogDelete=!1,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refresh:function(){n.Z.get({url:"api/groups"}).then((t=>{console.log(t.data),1==t.data.status?this.rows=t.data.groups:(console.log(`status: ${t.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Groups"),to:"/Groups",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("Name"),value:"groupName"},{text:this.$t("Group Type"),value:"adDomain"},{text:this.$t("Actions"),value:"actions",sortable:!1}],this.refresh()}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(4998),g=a(4497),b=a(6428),y=a(3202),k=a(9762),x=a(5978),w=a(6656),$=(0,d.Z)(c,i,s,!1,null,null,null),S=$.exports;h()($,{VBtn:p.Z,VCard:m.Z,VCardActions:v.h7,VCardSubtitle:v.Qq,VCardTitle:v.EB,VDataTable:f.Z,VDialog:g.Z,VIcon:b.Z,VSnackbar:y.Z,VSpacer:k.Z,VTextField:x.Z,VToolbar:w.Z})},6661:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return $}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("LDAP Domains")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.headers,items:t.rows,"items-per-page":20,loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.addLDAP}},[t._v(" "+t._s(t.$t("Add LDAP Domain"))+" ")])],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.rowClick(i)}}},[t._v(" mdi-pencil ")]),a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteLDAP(i)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(" Delete "+t._s(t.deleteDomain)+" LDAP Domain? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.deleteOK}},[t._v(" OK ")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"LDAP",data:()=>({headers:[],rows:[],search:"",totalItems:0,loading:!0,options:{},dialog:!1,deleteObj:null,deleteDomain:"",snackbarSave:!1,snackbarText:"",appData:o.Z}),methods:{rowClick:function(t){console.log(`rowClick: ${t.addomain}`),this.$router.push("/LDAP/"+t.addomain)},deleteLDAP:function(t){this.deleteObj=t,this.deleteDomain=t.addomain,this.dialog=!0},deleteOK:function(){console.log(`deleteLDAP: ${this.deleteDomain}`),this.dialog=!1,n.Z["delete"]({url:"api/ldap/"+encodeURIComponent(this.deleteDomain)}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Saved"),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},addLDAP:function(){this.$router.push("/LDAP/CREATELDAP")},refresh:function(){n.Z.get({url:"api/ldap"}).then((t=>{console.log(t.data),1==t.data.status?this.rows=t.data.ldapDomains:(console.log(`status: ${t.data.status}`),this.rows=[])})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("LDAP"),to:"/LDAP",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("LDAP Domain"),value:"addomain"},{text:this.$t("URL"),value:"connectionurl"},{text:this.$t("Base DN"),value:"basedn"},{text:"Actions",value:"actions",sortable:!1}],this.refresh()}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(4998),g=a(4497),b=a(6428),y=a(3202),k=a(9762),x=a(6656),w=(0,d.Z)(c,i,s,!1,null,null,null),$=w.exports;h()(w,{VBtn:p.Z,VCard:m.Z,VCardActions:v.h7,VCardTitle:v.EB,VDataTable:f.Z,VDialog:g.Z,VIcon:b.Z,VSnackbar:y.Z,VSpacer:k.Z,VToolbar:x.Z})},3056:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return W}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"setup"},[t._v(" Setup ")]),a("v-tab",{key:"ous",attrs:{disabled:t.disableOUs}},[t._v(" Organization Units ")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(t._s(t.$t("LDAP Domain"))+": "+t._s(t.addomain))]),a("v-spacer")],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"setup"},[a("v-card",{attrs:{flat:"",color:"bg"}},[a("v-form",{ref:"form",model:{value:t.formValid,callback:function(e){t.formValid=e},expression:"formValid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("LDAP Domain"),disabled:t.addominReadonly,rules:[function(e){return!!e||t.$t("Required")}]},on:{change:t.addomainChanged},model:{value:t.ldapDetails.addomain,callback:function(e){t.$set(t.ldapDetails,"addomain",e)},expression:"ldapDetails.addomain"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Host"),rules:[function(e){return!!e||t.$t("Required")}]},model:{value:t.ldapDetails.host,callback:function(e){t.$set(t.ldapDetails,"host",e)},expression:"ldapDetails.host"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Port"),disabled:t.portReadonly,rules:[function(e){return!!e||t.$t("Required")},function(t){return/^[0-9]{1,5}$/.test(t)||"Port must be a number"}]},model:{value:t.ldapDetails.port,callback:function(e){t.$set(t.ldapDetails,"port",e)},expression:"ldapDetails.port"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-select",{attrs:{items:t.connectionTypeItems,label:t.$t("Connection Type"),value:t.connectionType,rules:[function(e){return!!e||t.$t("Required")}]},on:{change:t.connectionTypeChanged}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("User Name"),rules:[function(e){return!!e||t.$t("Required")}]},model:{value:t.ldapDetails.username,callback:function(e){t.$set(t.ldapDetails,"username",e)},expression:"ldapDetails.username"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Password"),rules:[function(e){return!!e||t.$t("Password is required")}],type:t.showPass?"text":"password","append-icon":t.showPass?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(e){t.showPass=!t.showPass}},model:{value:t.ldapDetails.password,callback:function(e){t.$set(t.ldapDetails,"password",e)},expression:"ldapDetails.password"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Base DN"),rules:[function(e){return!!e||t.$t("Required")}]},model:{value:t.ldapDetails.basedn,callback:function(e){t.$set(t.ldapDetails,"basedn",e)},expression:"ldapDetails.basedn"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.formValid,color:"primary",loading:t.saveLoading},on:{click:t.saveForm}},[t._v(" "+t._s(t.$t("Save"))+" ")])],1)],1)],1)],1)],1)],1),a("v-tab-item",{key:"ous"},[a("v-card",{attrs:{flat:"",color:"bg"}},[a("v-treeview",{staticClass:"bg",attrs:{selectable:"","item-disabled":"locked","selection-type":"independent",items:t.items,value:t.value,"open-all":""},on:{input:t.input}}),a("v-btn",{staticClass:"ma-4",attrs:{color:"primary",loading:t.saveOULoading,disabled:t.disableOUs},on:{click:t.saveOUs}},[t._v(" Save OUs ")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"LDAP",data:()=>({createLDAP:!1,tab:{},addomain:{},ldapDetails:{},items:[],ousList:[],value:[],inputValues:[],formValid:!0,showPass:!1,connectionTypeItems:[],connectionType:"auto",snackbarSave:!1,snackbarText:"",saveLoading:!1,saveOULoading:!1,portReadonly:!1,addominReadonly:!1,disableOUs:!0,appData:o.Z}),watch:{"ldapDetails.addomain":function(t){if(console.log("ldapDetails.addomain: "+t),this.createLDAP&&t.length>0){let e=t.split(".");for(let t=0;t<e.length;t++)e[t]="DC="+e[t];this.ldapDetails.basedn=e.join(",")}}},methods:{input:function(t){console.log(`input: ${t}`),this.inputValues=t},connectionTypeChanged:function(t){console.log(`connectionTypeChanged: ${t}`),"auto"==t?this.portReadonly=!0:(this.portReadonly=!1,"ldaps://"==t?(console.log("Change port to 636"),this.ldapDetails.port="636"):(console.log("Change port to 389"),this.ldapDetails.port="389"),this.$forceUpdate())},saveForm:function(){this.$refs.form.validate(),this.formValid?(this.saveLoading=!0,n.Z.put({url:"api/ldap/"+encodeURIComponent(this.ldapDetails.addomain),data:{host:this.ldapDetails.host,user:this.ldapDetails.username,password:this.ldapDetails.password,port:this.ldapDetails.port,baseDN:this.ldapDetails.basedn,sync:!0,SSL:this.connectionType}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.saveLoading=!1,this.snackbarText="Saved",this.snackbarSave=!0,this.addomain=this.ldapDetails.addomain,this.createLDAP=!1,this.addominReadonly=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.saveLoading=!1,t.data.message?t.data.message.message&&t.data.message.name?this.snackbarText=`${this.$t("Error")}: ${t.data.message.name} - ${t.data.message.message}`:this.snackbarText=`${this.$t("Error")}: ${t.data.message}`:this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))):console.log("Invalid!")},addomainChanged:function(t){console.log(`addomainChanged: ${t}`)},saveOUs:function(){let t=[];for(let e=0;e<this.inputValues.length;e++){let a=this.inputValues[e];t.push(this.ousList[a].key)}console.log("Selected orgUnits: "+JSON.stringify(t)),0!=t.length&&(this.saveOULoading=!0,n.Z.post({url:"api/ldap/"+encodeURIComponent(this.addomain),data:{orgUnits:t}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.saveOULoading=!1,this.snackbarText="Saved",this.snackbarSave=!0):(console.log(`status: ${t.data.status}`),this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1)))},refresh:function(){this.disableOUs=!0,n.Z.get({url:"api/ldap"}).then((t=>{console.log(t.data),1==t.data.status?t.data.ldapDomains.forEach((t=>{if(t.addomain==this.addomain){this.addominReadonly=!0;let e=t.connectionurl.split("://");if(2==e.length){let t=e[1].split(":");this.ldapDetails.host=t[0],this.ldapDetails.port=t[1],"ldaps"!=e[0]&&"ldap"!=e[0]||(this.connectionType=e[0]+"://")}this.ldapDetails.password=t.password,this.ldapDetails.addomain=t.addomain,this.ldapDetails.username=t.username,this.ldapDetails.basedn=t.basedn}})):(console.log(`status: ${t.data.status}`),this.rows=[])})).catch((t=>console.log(t))).finally((()=>this.loading=!1)),n.Z.get({url:"api/ldap/"+encodeURIComponent(this.addomain)}).then((t=>{if(console.log(t.data),1==t.data.status){console.log(`status: ${t.data.status}`),this.ousList=t.data.ousList;let e={};this.items=[],this.value=[];for(let t=0;t<this.ousList.length;t++){let a=this.ousList[t],i={id:t,name:a.ouName,children:[]};if(e[a.key]=i,a.checked&&this.value.push(t),0==a.level)this.items.push(i),this.disableOUs=!1;else{let t=a.key.split(",");t.shift();let s=t.join(","),o=e[s];o?o.children.push(i):console.log("Parent not found: "+s)}}console.log(`values: ${this.value}`),this.inputValues=this.value}else console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){"CREATELDAP"!=this.$route.params.addomain?this.addomain=this.$route.params.addomain:(this.addomain="",this.createLDAP=!0,this.addominReadonly=!1,this.ldapDetails={addomain:"",port:"389",host:"",username:"",basedn:""});let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("LDAP"),to:"/LDAP",disabled:!1},{text:this.addomain,to:"/LDAP/"+encodeURIComponent(this.addomain),disabled:!1}];this.$emit("updatePage",t),this.connectionTypeItems=[{text:this.$t("Automatic"),value:"auto"},{text:this.$t("LDAP Over SSL"),value:"ldaps://"},{text:this.$t("LDAP"),value:"ldap://"}],this.createLDAP||this.refresh()}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(2102),f=a(4228),g=a(6232),b=a(2877),y=a(7032),k=a(3202),x=a(9762),w=a(4227),$=a(1759),S=a(8697),D=a(1954),_=a(1208),C=a(5978),T=a(6656),P=a(7921),A=(a(6699),a(5827)),O=a(6428),I=a(6257),R=a(6952),Z=a(3325),E=a(4589);const V=(0,Z.Z)(R.Z,(0,I.f)("treeview")),L={activatable:Boolean,activeClass:{type:String,default:"v-treeview-node--active"},color:{type:String,default:"primary"},disablePerNode:Boolean,expandIcon:{type:String,default:"$subgroup"},indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},itemChildren:{type:String,default:"children"},itemDisabled:{type:String,default:"disabled"},itemKey:{type:String,default:"id"},itemText:{type:String,default:"name"},loadChildren:Function,loadingIcon:{type:String,default:"$loading"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"},openOnClick:Boolean,rounded:Boolean,selectable:Boolean,selectedColor:{type:String,default:"accent"},shaped:Boolean,transition:Boolean,selectionType:{type:String,default:"leaf",validator:t=>["leaf","independent"].includes(t)}},N=V.extend().extend({name:"v-treeview-node",inject:{treeview:{default:null}},props:{level:Number,item:{type:Object,default:()=>null},parentIsDisabled:Boolean,...L},data:()=>({hasLoaded:!1,isActive:!1,isIndeterminate:!1,isLoading:!1,isOpen:!1,isSelected:!1}),computed:{disabled(){return(0,E.vO)(this.item,this.itemDisabled)||!this.disablePerNode&&this.parentIsDisabled&&"leaf"===this.selectionType},key(){return(0,E.vO)(this.item,this.itemKey)},children(){const t=(0,E.vO)(this.item,this.itemChildren);return t&&t.filter((t=>!this.treeview.isExcluded((0,E.vO)(t,this.itemKey))))},text(){return(0,E.vO)(this.item,this.itemText)},scopedProps(){return{item:this.item,leaf:!this.children,selected:this.isSelected,indeterminate:this.isIndeterminate,active:this.isActive,open:this.isOpen}},computedIcon(){return this.isIndeterminate?this.indeterminateIcon:this.isSelected?this.onIcon:this.offIcon},hasChildren(){return!!this.children&&(!!this.children.length||!!this.loadChildren)}},created(){this.treeview.register(this)},beforeDestroy(){this.treeview.unregister(this)},methods:{checkChildren(){return new Promise((t=>{if(!this.children||this.children.length||!this.loadChildren||this.hasLoaded)return t();this.isLoading=!0,t(this.loadChildren(this.item))})).then((()=>{this.isLoading=!1,this.hasLoaded=!0}))},open(){this.isOpen=!this.isOpen,this.treeview.updateOpen(this.key,this.isOpen),this.treeview.emitOpen()},genLabel(){const t=[];return this.$scopedSlots.label?t.push(this.$scopedSlots.label(this.scopedProps)):t.push(this.text),this.$createElement("div",{slot:"label",staticClass:"v-treeview-node__label"},t)},genPrependSlot(){return this.$scopedSlots.prepend?this.$createElement("div",{staticClass:"v-treeview-node__prepend"},this.$scopedSlots.prepend(this.scopedProps)):null},genAppendSlot(){return this.$scopedSlots.append?this.$createElement("div",{staticClass:"v-treeview-node__append"},this.$scopedSlots.append(this.scopedProps)):null},genContent(){const t=[this.genPrependSlot(),this.genLabel(),this.genAppendSlot()];return this.$createElement("div",{staticClass:"v-treeview-node__content"},t)},genToggle(){return this.$createElement(O.Z,{staticClass:"v-treeview-node__toggle",class:{"v-treeview-node__toggle--open":this.isOpen,"v-treeview-node__toggle--loading":this.isLoading},slot:"prepend",on:{click:t=>{t.stopPropagation(),this.isLoading||this.checkChildren().then((()=>this.open()))}}},[this.isLoading?this.loadingIcon:this.expandIcon])},genCheckbox(){return this.$createElement(O.Z,{staticClass:"v-treeview-node__checkbox",props:{color:this.isSelected||this.isIndeterminate?this.selectedColor:void 0,disabled:this.disabled},on:{click:t=>{t.stopPropagation(),this.isLoading||this.checkChildren().then((()=>{this.$nextTick((()=>{this.isSelected=!this.isSelected,this.isIndeterminate=!1,this.treeview.updateSelected(this.key,this.isSelected),this.treeview.emitSelected()}))}))}}},[this.computedIcon])},genLevel(t){return(0,E.MT)(t).map((()=>this.$createElement("div",{staticClass:"v-treeview-node__level"})))},genNode(){const t=[this.genContent()];return this.selectable&&t.unshift(this.genCheckbox()),this.hasChildren?t.unshift(this.genToggle()):t.unshift(...this.genLevel(1)),t.unshift(...this.genLevel(this.level)),this.$createElement("div",this.setTextColor(this.isActive&&this.color,{staticClass:"v-treeview-node__root",class:{[this.activeClass]:this.isActive},on:{click:()=>{this.openOnClick&&this.hasChildren?this.checkChildren().then(this.open):this.activatable&&!this.disabled&&(this.isActive=!this.isActive,this.treeview.updateActive(this.key,this.isActive),this.treeview.emitActive())}}}),t)},genChild(t,e){return this.$createElement(N,{key:(0,E.vO)(t,this.itemKey),props:{activatable:this.activatable,activeClass:this.activeClass,item:t,selectable:this.selectable,selectedColor:this.selectedColor,color:this.color,disablePerNode:this.disablePerNode,expandIcon:this.expandIcon,indeterminateIcon:this.indeterminateIcon,offIcon:this.offIcon,onIcon:this.onIcon,loadingIcon:this.loadingIcon,itemKey:this.itemKey,itemText:this.itemText,itemDisabled:this.itemDisabled,itemChildren:this.itemChildren,loadChildren:this.loadChildren,transition:this.transition,openOnClick:this.openOnClick,rounded:this.rounded,shaped:this.shaped,level:this.level+1,selectionType:this.selectionType,parentIsDisabled:e},scopedSlots:this.$scopedSlots})},genChildrenWrapper(){if(!this.isOpen||!this.children)return null;const t=[this.children.map((t=>this.genChild(t,this.disabled)))];return this.$createElement("div",{staticClass:"v-treeview-node__children"},t)},genTransition(){return this.$createElement(A.Fx,[this.genChildrenWrapper()])}},render(t){const e=[this.genNode()];return this.transition?e.push(this.genTransition()):e.push(this.genChildrenWrapper()),t("div",{staticClass:"v-treeview-node",class:{"v-treeview-node--leaf":!this.hasChildren,"v-treeview-node--click":this.openOnClick,"v-treeview-node--disabled":this.disabled,"v-treeview-node--rounded":this.rounded,"v-treeview-node--shaped":this.shaped,"v-treeview-node--selected":this.isSelected},attrs:{"aria-expanded":String(this.isOpen)}},e)}});var j=N,F=a(8085),B=a(1824);function M(t,e,a){const i=(0,E.vO)(t,a);return i.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1}function z(t,e,a,i,s,o,n){if(t(e,a,s))return!0;const r=(0,E.vO)(e,o);if(r){let e=!1;for(let l=0;l<r.length;l++)z(t,r[l],a,i,s,o,n)&&(e=!0);if(e)return!0}return n.add((0,E.vO)(e,i)),!1}var U=(0,Z.Z)((0,I.J)("treeview"),F.Z).extend({name:"v-treeview",provide(){return{treeview:this}},props:{active:{type:Array,default:()=>[]},dense:Boolean,disabled:Boolean,filter:Function,hoverable:Boolean,items:{type:Array,default:()=>[]},multipleActive:Boolean,open:{type:Array,default:()=>[]},openAll:Boolean,returnObject:{type:Boolean,default:!1},search:String,value:{type:Array,default:()=>[]},...L},data:()=>({level:-1,activeCache:new Set,nodes:{},openCache:new Set,selectedCache:new Set}),computed:{excludedItems(){const t=new Set;if(!this.search)return t;for(let e=0;e<this.items.length;e++)z(this.filter||M,this.items[e],this.search,this.itemKey,this.itemText,this.itemChildren,t);return t}},watch:{items:{handler(){const t=Object.keys(this.nodes).map((t=>(0,E.vO)(this.nodes[t].item,this.itemKey))),e=this.getKeys(this.items),a=(0,E.tX)(e,t);if(!a.length&&e.length<t.length)return;a.forEach((t=>delete this.nodes[t]));const i=[...this.selectedCache];this.selectedCache=new Set,this.activeCache=new Set,this.openCache=new Set,this.buildTree(this.items),(0,E.vZ)(i,[...this.selectedCache])||this.emitSelected()},deep:!0},active(t){this.handleNodeCacheWatcher(t,this.activeCache,this.updateActive,this.emitActive)},value(t){this.handleNodeCacheWatcher(t,this.selectedCache,this.updateSelected,this.emitSelected)},open(t){this.handleNodeCacheWatcher(t,this.openCache,this.updateOpen,this.emitOpen)}},created(){const t=t=>this.returnObject?(0,E.vO)(t,this.itemKey):t;this.buildTree(this.items);for(const e of this.value.map(t))this.updateSelected(e,!0,!0);for(const e of this.active.map(t))this.updateActive(e,!0)},mounted(){(this.$slots.prepend||this.$slots.append)&&(0,B.Kd)("The prepend and append slots require a slot-scope attribute",this),this.openAll?this.updateAll(!0):(this.open.forEach((t=>this.updateOpen(this.returnObject?(0,E.vO)(t,this.itemKey):t,!0))),this.emitOpen())},methods:{updateAll(t){Object.keys(this.nodes).forEach((e=>this.updateOpen((0,E.vO)(this.nodes[e].item,this.itemKey),t))),this.emitOpen()},getKeys(t,e=[]){for(let a=0;a<t.length;a++){const i=(0,E.vO)(t[a],this.itemKey);e.push(i);const s=(0,E.vO)(t[a],this.itemChildren);s&&e.push(...this.getKeys(s))}return e},buildTree(t,e=null){for(let i=0;i<t.length;i++){var a;const s=t[i],o=(0,E.vO)(s,this.itemKey),n=null!=(a=(0,E.vO)(s,this.itemChildren))?a:[],r=this.nodes.hasOwnProperty(o)?this.nodes[o]:{isSelected:!1,isIndeterminate:!1,isActive:!1,isOpen:!1,vnode:null},l={vnode:r.vnode,parent:e,children:n.map((t=>(0,E.vO)(t,this.itemKey))),item:s};if(this.buildTree(n,o),!this.nodes.hasOwnProperty(o)&&null!==e&&this.nodes.hasOwnProperty(e)?l.isSelected=this.nodes[e].isSelected:(l.isSelected=r.isSelected,l.isIndeterminate=r.isIndeterminate),l.isActive=r.isActive,l.isOpen=r.isOpen,this.nodes[o]=l,n.length&&"independent"!==this.selectionType){const{isSelected:t,isIndeterminate:e}=this.calculateState(o,this.nodes);l.isSelected=t,l.isIndeterminate=e}!this.nodes[o].isSelected||"independent"!==this.selectionType&&0!==l.children.length||this.selectedCache.add(o),this.nodes[o].isActive&&this.activeCache.add(o),this.nodes[o].isOpen&&this.openCache.add(o),this.updateVnodeState(o)}},calculateState(t,e){const a=e[t].children,i=a.reduce(((t,a)=>(t[0]+=+Boolean(e[a].isSelected),t[1]+=+Boolean(e[a].isIndeterminate),t)),[0,0]),s=!!a.length&&i[0]===a.length,o=!s&&(i[0]>0||i[1]>0);return{isSelected:s,isIndeterminate:o}},emitOpen(){this.emitNodeCache("update:open",this.openCache)},emitSelected(){this.emitNodeCache("input",this.selectedCache)},emitActive(){this.emitNodeCache("update:active",this.activeCache)},emitNodeCache(t,e){this.$emit(t,this.returnObject?[...e].map((t=>this.nodes[t].item)):[...e])},handleNodeCacheWatcher(t,e,a,i){t=this.returnObject?t.map((t=>(0,E.vO)(t,this.itemKey))):t;const s=[...e];(0,E.vZ)(s,t)||(s.forEach((t=>a(t,!1))),t.forEach((t=>a(t,!0))),i())},getDescendants(t,e=[]){const a=this.nodes[t].children;e.push(...a);for(let i=0;i<a.length;i++)e=this.getDescendants(a[i],e);return e},getParents(t){let e=this.nodes[t].parent;const a=[];while(null!==e)a.push(e),e=this.nodes[e].parent;return a},register(t){const e=(0,E.vO)(t.item,this.itemKey);this.nodes[e].vnode=t,this.updateVnodeState(e)},unregister(t){const e=(0,E.vO)(t.item,this.itemKey);this.nodes[e]&&(this.nodes[e].vnode=null)},isParent(t){return this.nodes[t].children&&this.nodes[t].children.length},updateActive(t,e){if(!this.nodes.hasOwnProperty(t))return;this.multipleActive||this.activeCache.forEach((t=>{this.nodes[t].isActive=!1,this.updateVnodeState(t),this.activeCache.delete(t)}));const a=this.nodes[t];a&&(e?this.activeCache.add(t):this.activeCache.delete(t),a.isActive=e,this.updateVnodeState(t))},updateSelected(t,e,a=!1){if(!this.nodes.hasOwnProperty(t))return;const i=new Map;if("independent"!==this.selectionType){for(const o of this.getDescendants(t))(0,E.vO)(this.nodes[o].item,this.itemDisabled)&&!a||(this.nodes[o].isSelected=e,this.nodes[o].isIndeterminate=!1,i.set(o,e));const s=this.calculateState(t,this.nodes);this.nodes[t].isSelected=e,this.nodes[t].isIndeterminate=s.isIndeterminate,i.set(t,e);for(const e of this.getParents(t)){const t=this.calculateState(e,this.nodes);this.nodes[e].isSelected=t.isSelected,this.nodes[e].isIndeterminate=t.isIndeterminate,i.set(e,t.isSelected)}}else this.nodes[t].isSelected=e,this.nodes[t].isIndeterminate=!1,i.set(t,e);for(const[s,o]of i.entries())this.updateVnodeState(s),"leaf"===this.selectionType&&this.isParent(s)||(!0===o?this.selectedCache.add(s):this.selectedCache.delete(s))},updateOpen(t,e){if(!this.nodes.hasOwnProperty(t))return;const a=this.nodes[t],i=(0,E.vO)(a.item,this.itemChildren);i&&!i.length&&a.vnode&&!a.vnode.hasLoaded?a.vnode.checkChildren().then((()=>this.updateOpen(t,e))):i&&i.length&&(a.isOpen=e,a.isOpen?this.openCache.add(t):this.openCache.delete(t),this.updateVnodeState(t))},updateVnodeState(t){const e=this.nodes[t];e&&e.vnode&&(e.vnode.isSelected=e.isSelected,e.vnode.isIndeterminate=e.isIndeterminate,e.vnode.isActive=e.isActive,e.vnode.isOpen=e.isOpen)},isExcluded(t){return!!this.search&&this.excludedItems.has(t)}},render(t){const e=this.items.length?this.items.filter((t=>!this.isExcluded((0,E.vO)(t,this.itemKey)))).map((t=>{const e=j.options.methods.genChild.bind(this);return e(t,this.disabled||(0,E.vO)(t,this.itemDisabled))})):this.$slots.default;return t("div",{staticClass:"v-treeview",class:{"v-treeview--hoverable":this.hoverable,"v-treeview--dense":this.dense,...this.themeClasses}},e)}}),H=(0,d.Z)(c,i,s,!1,null,null,null),W=H.exports;h()(H,{VBtn:p.Z,VCard:m.Z,VCol:v.Z,VContainer:f.Z,VForm:g.Z,VRow:b.Z,VSelect:y.Z,VSnackbar:k.Z,VSpacer:x.Z,VTab:w.Z,VTabItem:$.Z,VTabs:S.Z,VTabsItems:D.Z,VTabsSlider:_.Z,VTextField:C.Z,VToolbar:T.Z,VToolbarTitle:P.qW,VTreeview:U})},1522:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return $}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"bg",attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{flex:"","align-center":"","justify-center":"",color:"bg"}},[a("v-flex",{attrs:{xs12:"",sm4:"","elevation-6":"",color:"bg"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-text",{staticClass:"pt-4"},[""!=t.messageText?a("div",[a("v-alert",{attrs:{type:t.msgType}},[t._v(" "+t._s(t.messageText)+" ")])],1):t._e(),a("div",[t.validationWait?a("v-layout",{attrs:{"justify-space-between":""}},[a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.validationWait=!1}}},[t._v(t._s(t.$t("Cancel")))])],1):a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.setPassword?t._e():a("v-text-field",{attrs:{label:t.$t("Enter your email address"),rules:t.emailRules,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t.resetPassword?t._e():a("v-text-field",{attrs:{label:t.$t("Enter your password"),min:"8","append-icon":t.e1?"mdi-eye ":"mdi-eye-off","append-icon-cb":function(){return t.e1=!t.e1},type:t.e1?"password":"text",rules:t.passwordRules,counter:"",required:""},on:{"click:append":function(){return t.e1=!t.e1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),!t.resetPassword&&t.setPassword?a("v-text-field",{attrs:{label:t.$t("Re-enter your password"),min:"8","append-icon":t.e2?"eye":"mdi-eye-off","append-icon-cb":function(){return t.e2=!t.e2},type:t.e2?"password":"text",rules:t.checkPasswordRules,counter:"",required:""},on:{"click:append":function(){return t.e2=!t.e2}},model:{value:t.passwordCheck,callback:function(e){t.passwordCheck=e},expression:"passwordCheck"}}):t._e(),t.resetPassword?t._e():a("v-layout",{attrs:{"justify-space-between":""}},[a("v-btn",{class:{"blue darken-4 white--text":t.valid,disabled:!t.valid},on:{click:t.submit}},[t._v(t._s(t.$t("login")))]),a("a",{attrs:{href:"#"},on:{click:t.resetPasswordClick}},[t._v(t._s(t.$t("Forgot Password")))])],1),t.resetPassword?a("v-layout",[a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:t.resetPasswordSubmit}},[t._v(t._s(t.$t("Reset Password")))]),a("v-btn",{staticClass:"ma-4",attrs:{color:"warning"},on:{click:function(e){t.resetPassword=!1}}},[t._v(t._s(t.$t("Cancel")))])],1):t._e()],1)],1)])],1)],1)],1)],1)},s=[],o=a(3888),n=a(3144),r={name:"LoginPage",data:()=>({validationWait:!1,resetPassword:!1,setPassword:!1,messageText:"",msgType:"info",valid:!1,e1:!0,e2:!0,password:"",passwordCheck:"",passwordRules:[t=>!!t||"Password is required"],checkPasswordRules:[t=>!!t||"Password is required"],email:"",emailRules:[t=>!!t||"Email is required",t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(t)||"Email must be valid"],appData:o.Z}),methods:{checkValidationLoop:function(){let t=this;setTimeout((function(){t.validationWait&&n.Z.post({url:"api/auth/validate",data:{email:t.email,deviceid:o.Z.deviceid,activationkey:o.Z.activationkey}}).then((e=>{console.log(e.data),200==e.data.status||202==e.data.status?(console.log("Pending..."),t.validationWait&&t.checkValidationLoop()):201==e.data.status?(console.log("Validatd!"),1!=e.data.resetpasscode?(t.validationWait=!1,t.messageText=t.$t("Validated!"),t.submit()):(console.log("Reset passcode"),t.messageText=t.$t("Please select new password"),t.password="",t.passwordCheck="",t.validationWait=!1,t.setPassword=!0)):(console.log("Error"),t.validationWait=!1,t.messageText=t.$t("Log in to the Admin Control Panel"))})).catch((e=>{console.log(e),t.validationWait&&t.checkValidationLoop()}))}),1e3)},resetPasswordClick:function(){this.resetPassword=!0,this.messageText=this.$t("Reset password")},resetPasswordSubmit:function(){console.log("resetPasswordSubmit.."),n.Z.post({url:"api/auth/reset",data:{userName:this.email,deviceid:o.Z.deviceid,deviceName:o.Z.deviceName,activationkey:o.Z.activationkey}}).then((t=>{console.log(t.data),this.resetPassword=!1,200==t.data.status?(o.Z.activationkey=t.data.activationkey,o.Z.email=this.email,this.validationWait=!0,this.messageText=this.$t("A verification messaage has been sent to your email address. Please click the verification link in that email."),this.checkValidationLoop()):(this.messageText=this.$t("Reset password error"),this.msgType="error",console.log("Error"))})).catch((t=>console.log(t)))},submit:function(){console.log("submit"),this.messageText=this.$t("Checking login information"),this.msgType="info";let t={userName:this.email,password:this.password,deviceid:o.Z.deviceid,deviceName:o.Z.deviceName,activationkey:o.Z.activationkey,selectedDomain:o.Z.mainDomain};this.setPassword&&(t.setPassword=this.passwordCheck),setTimeout((()=>{n.Z.post({url:"api/auth",data:t}).then((t=>{if(console.log(t.data),this.setPassword=!1,200==t.data.status)o.Z.activationkey=t.data.activationkey,o.Z.email=this.email,this.validationWait=!0,this.messageText=this.$t("A verification messaage has been sent to your email address. Please click the verification link in that email."),this.checkValidationLoop();else if(1!=t.data.status)this.messageText=this.$t("Incorrect email address or password"),this.msgType="error",console.log("Error");else{this.messageText=this.$t("Login successful"),this.msgType="success",o.Z.isAuthenticated=!0,o.Z.adminLoginToken=t.data.loginToken,o.Z.mainDomain=t.data.mainDomain,o.Z.firstname=t.data.firstname,o.Z.lastname=t.data.lastname,o.Z.imageurl=t.data.imageurl,o.Z.email=this.email,o.Z.resetOrgs(t.data.orgs),o.Z.siteAdmin=t.data.siteAdmin,o.Z.siteAdminDomain=t.data.siteAdminDomain;try{o.Z.permissions=JSON.parse(t.data.permissions)}catch(e){console.log("Error parse permissions",e),o.Z.permissions={}}console.log("appData.permissions: "+JSON.stringify(o.Z.permissions,null,2)),o.Z.orgname=t.data.orgname&&""!=t.data.orgname?t.data.orgname:t.data.mainDomain,o.Z.edition=t.data.edition,o.Z.edition||(o.Z.edition="enterprise"),o.Z.deviceTypes=t.data.deviceTypes,o.Z.deviceTypes||(o.Z.deviceTypes=["mobile"]),o.Z.commit(),this.$emit("checkLoginLoop",t.data.loginToken),this.$emit("updatePermissions"),this.$router.push("/")}})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}),100)}},watch:{validationWait:function(t){console.log(`validationWait: ${t}`),o.Z.validationWait=t}},created:function(){this.validationWait=o.Z.validationWait,this.email=o.Z.email,this.validationWait?(this.messageText=this.$t("A verification messaage has been sent to your email address. Please click the verification link in that email."),this.checkValidationLoop()):this.messageText=this.$t("Log in to the Admin Control Panel"),this.passwordRules=[t=>!!t||this.$t("Password is required")],this.checkPasswordRules=[t=>!!t||this.$t("Password is required"),t=>t===this.password||"Passwords do not match"],this.emailRules=[t=>!!t||this.$t("Email is required"),t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(t)||this.$t("Email must be valid")],this.$emit("updatePage","Login")}},l=r,c=a(1001),d=a(3453),u=a.n(d),h=a(1234),p=a(3150),m=a(2371),v=a(7118),f=a(4228),g=(a(8582),a(5109)),b=(0,g.Z)("flex"),y=a(6232),k=(0,g.Z)("layout"),x=a(5978),w=(0,c.Z)(l,i,s,!1,null,null,null),$=w.exports;u()(w,{VAlert:h.Z,VBtn:p.Z,VCard:m.Z,VCardText:v.ZB,VContainer:f.Z,VFlex:b,VForm:y.Z,VLayout:k,VTextField:x.Z})},7371:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return T}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"events"},[t._v(" "+t._s(t.$t("Events"))+" ")]),t.appData.checkPermission("@/","r")?a("v-tab",{key:"list"},[t._v(" "+t._s(t.$t("Syslog"))+" ")]):t._e()],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(" "+t._s(t.$t("Logs")))]),a("v-spacer")],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"events",staticClass:"bg"},[a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.eventsHeaders,items:t.eventsRows,"items-per-page":20,loading:t.eventsLoading,search:t.eventsSearch},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:t.$t("Search"),"single-line":"","hide-details":""},model:{value:t.eventsSearch,callback:function(e){t.eventsSearch=e},expression:"eventsSearch"}})],1)]},proxy:!0},{key:"item.time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.time).format("LLL"))+" ")]}}],null,!0)})],1),a("v-tab-item",{key:"list",staticClass:"bg"},[a("v-data-table",{staticClass:"ma-4 bg",attrs:{color:"bg",headers:t.headers,items:t.rows,"server-items-length":t.totalItems,"items-per-page":10,loading:t.loading,options:t.options,search:t.search,"multi-sort":""},on:{"update:options":[function(e){t.options=e},t.updateOptions],"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"header.ComponentType",fn:function(e){var i=e.header;return[a("v-combobox",{staticClass:"input-combobox",attrs:{items:t.itemsComponentType,label:i.text},on:{change:t.compChanged},model:{value:t.selectComponentType,callback:function(e){t.selectComponentType=e},expression:"selectComponentType"}})]}},{key:"header.ServerName",fn:function(e){var i=e.header;return[a("v-combobox",{staticClass:"input-combobox",attrs:{items:t.itemsServerName,label:i.text},on:{change:t.serverNameChanged},model:{value:t.selectServerName,callback:function(e){t.selectServerName=e},expression:"selectServerName"}})]}},{key:"header.LogLevel",fn:function(e){var i=e.header;return[a("v-combobox",{staticClass:"input-combobox",attrs:{items:t.itemsLogLevel,label:i.text},on:{change:t.logLevelChanged},model:{value:t.selectLogLevel,callback:function(e){t.selectLogLevel=e},expression:"selectLogLevel"}})]}},{key:"item.LogLevel",fn:function(e){var i=e.item;return[i.LogLevel<=3?a("v-chip",{staticClass:"ma-2",attrs:{color:"error","text-color":"white"}},[t._v(" "+t._s(t.$t("Error"))+" ")]):4==i.LogLevel?a("v-chip",{staticClass:"ma-2",attrs:{color:"warning","text-color":"white"}},[t._v(" "+t._s(t.$t("Warning"))+" ")]):i.LogLevel<=6?a("v-chip",{staticClass:"ma-2"},[t._v(" "+t._s(t.$t("Information"))+" ")]):a("v-chip",{staticClass:"ma-2"},[t._v(" "+t._s(t.$t("Debug"))+" ")])]}},{key:"item.Time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.Time).format("LLL"))+" ")]}}],null,!0)})],1)],1)],1)},s=[],o=a(3888),n=a(3144);const r=a(381);let l={name:"Logs",data:()=>({tab:{},headers:[],rows:[],search:"",totalItems:0,loading:!0,options:{},selectComponentType:[],itemsComponentType:[],selectServerName:[],itemsServerName:[],selectLogLevel:[],itemsLogLevel:[],logLevel:1e3,comp:null,serverName:null,eventsHeaders:[],eventsRows:[],eventsSearch:"",eventsLoading:!1,moment:r,appData:o.Z}),methods:{updateOptions(t){console.log("update:options",t),this.refresh()},rowClick:function(t){console.log(`rowClick: ${t.email}`)},refresh:function(){let t=this.options.itemsPerPage>0?this.options.itemsPerPage:1e4,e=(this.options.page-1)*t,a=Math.round((new Date).getTime()/1e3-432e3);console.log("refresh.."),n.Z.post({url:"api/logs",data:{s:a,offset:e,limit:t,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,search:this.search,level:this.logLevel,comp:this.comp,serverName:this.serverName}}).then((t=>{console.log("refresh reponse.."),console.log(t.data),1==t.data.status?(this.rows=t.data.logs,this.totalItems=t.data.count):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},logLevelChanged:function(t){console.log(t),this.logLevel=t.value,this.refresh()},compChanged:function(t){console.log(t),this.comp=t,this.refresh()},serverNameChanged:function(t){console.log(t),this.serverName=t,this.refresh()},getFilters:function(){console.log("getFilters"),n.Z.get({url:"api/logs/getFilters"}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.itemsComponentType=[],t.data.ComponentType.forEach((t=>{""!=t.ComponentType&&this.itemsComponentType.push(t.ComponentType)})),this.itemsServerName=[],t.data.ServerName.forEach((t=>{""!=t.ServerName&&this.itemsServerName.push(t.ServerName)})),this.itemsLogLevel=[{value:"3",text:this.$t("Error")},{value:"4",text:this.$t("Warning")},{value:"6",text:this.$t("Info")},{value:"7",text:this.$t("Debug")}]):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refreshEvents:function(){this.eventsLoading=!0,n.Z.get({url:"api/events"}).then((t=>{this.eventsLoading=!1,console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.eventsRows=t.data.events):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1)),this.eventsHeaders=[{text:this.$t("Time"),value:"time"},{text:this.$t("Event Type"),value:"eventTypeStr"},{text:this.$t("User"),value:"email"},{text:this.$t("Information"),value:"extrainfo"}]}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Logs"),to:"/Logs",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("Time"),value:"Time"},{text:this.$t("Log Level"),value:"LogLevel"},{text:this.$t("Server Name"),value:"ServerName"},{text:this.$t("Component Type"),value:"ComponentType"},{text:this.$t("Message"),value:"Message"}],this.getFilters()},watch:{tab:function(t){0==t&&this.refreshEvents()},search:function(t){console.log(`search: ${t}`),(t.length>1||0==t.length)&&this.refresh()}}};var c=l,d=c,u=a(1001),h=a(3453),p=a.n(h),m=a(2371),v=a(5424),f=a(5359),g=a(4998),b=a(9762),y=a(4227),k=a(1759),x=a(8697),w=a(1954),$=a(1208),S=a(5978),D=a(6656),_=a(7921),C=(0,u.Z)(d,i,s,!1,null,null,null),T=C.exports;p()(C,{VCard:m.Z,VChip:v.Z,VCombobox:f.Z,VDataTable:g.Z,VSpacer:b.Z,VTab:y.Z,VTabItem:k.Z,VTabs:x.Z,VTabsItems:w.Z,VTabsSlider:$.Z,VTextField:S.Z,VToolbar:D.Z,VToolbarTitle:_.qW})},9717:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return $}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Organization"))+" ")]),a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-text-field",{attrs:{label:t.$t("Domain"),readonly:!t.newOrg,rules:t.requiredRules},model:{value:t.details.maindomain,callback:function(e){t.$set(t.details,"maindomain",e)},expression:"details.maindomain"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-text-field",{attrs:{label:t.$t("Organization Name")},model:{value:t.details.orgname,callback:function(e){t.$set(t.details,"orgname",e)},expression:"details.orgname"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-text-field",{attrs:{label:t.$t("Invite Profile URL")},model:{value:t.details.inviteurl,callback:function(e){t.$set(t.details,"inviteurl",e)},expression:"details.inviteurl"}})],1)],1),a("v-row",[a("v-col",{staticClass:"py-2"},[a("v-text-field",{attrs:{label:t.$t("Watermark")},model:{value:t.details.watermark,callback:function(e){t.$set(t.details,"watermark",e)},expression:"details.watermark"}})],1)],1)],1),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"mr-4",attrs:{color:"primary",loading:t.saveLoading},on:{click:t.saveDetails}},[t._v(" "+t._s(t.$t("Save"))+" ")])],1)],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"primary",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"Org",data:()=>({domain:"",newOrg:!0,snackbarSave:!1,snackbarText:"",details:{},valid:!0,appData:o.Z}),methods:{saveDetails:function(){if(this.$refs.form.validate(),!this.valid)return;this.newOrg&&(this.domain=this.details.maindomain);let t=this.details;this.saveLoading=!0,console.log(t),n.Z.post({url:"api/orgs/"+encodeURIComponent(this.domain),data:t}).then((t=>{this.saveLoading=!1,console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Saved"),this.newOrg&&(this.newOrg=!1,this.snackbarText=this.$t("Domain added"),this.snackbarSave=!0,this.updatePageHead(),this.$router.replace("/Org/"+encodeURIComponent(this.domain)),this.refreshAppDataOrgs()),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))})).catch((t=>console.log(t)))},refresh:function(){this.newOrg||(console.log(`domain: ${this.domain}`),n.Z.get({url:"api/orgs/"+encodeURIComponent(this.domain)}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),t.data.orgs&&1==t.data.orgs.length?this.details=t.data.orgs[0]:this.details={}):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1)))},refreshAppDataOrgs:function(){n.Z.get({url:"api/orgs"}).then((t=>{console.log(t.data),1==t.data.status?(this.rows=t.data.orgs,this.rows&&o.Z.resetOrgs(this.rows)):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},updatePageHead:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Organizations"),to:"/Orgs",disabled:!1},{text:this.domain,to:"/Org/"+this.domain,disabled:!1}];this.$emit("updatePage",t)}},created:function(){this.domain=this.$route.params.domain,this.domain||(this.domain=""),""==this.domain?this.newOrg=!0:this.newOrg=!1,this.requiredRules=[t=>!!t||this.$t("Field is required")],this.updatePageHead(),this.refresh()},watch:{}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(2102),g=a(4228),b=a(6232),y=a(2877),k=a(3202),x=a(5978),w=(0,d.Z)(c,i,s,!1,null,null,null),$=w.exports;h()(w,{VBtn:p.Z,VCard:m.Z,VCardTitle:v.EB,VCol:f.Z,VContainer:g.Z,VForm:b.Z,VRow:y.Z,VSnackbar:k.Z,VTextField:x.Z})},4121:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return $}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Organization List"))+" "),a("v-spacer")],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.headers,items:t.rows,loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.addOrg}},[t._v(" "+t._s(t.$t("Add Organization"))+" ")])],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.$router.push("/Org/"+i.maindomain)}}},[t._v(" mdi-pencil ")]),i.maindomain!=t.appData.mainDomain?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteOrgDialog(i)}}},[t._v(" mdi-delete ")]):t._e()]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"500px",color:"bg"},model:{value:t.dialogDeleteOrg,callback:function(e){t.dialogDeleteOrg=e},expression:"dialogDeleteOrg"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-subtitle",{staticClass:"headline"},[t._v(t._s(t.$t("Are you sure you want to delete organization",{domain:t.deleteItem.maindomain})))]),a("v-card-text",[t._v(t._s(t.$t("Warning: All data including profiles, apps, and configuration data will be deleted!")))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialogDeleteOrg=!1}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteOrg()}}},[t._v(t._s(t.$t("OK")))]),a("v-spacer")],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"Orgs",data:()=>({headers:[],rows:[],dialog:!1,search:"",totalItems:0,loading:!0,options:{},snackbarSave:!1,snackbarText:"",dialogDeleteOrg:!1,deleteItem:{},resetOrgsInAppData:!1,appData:o.Z}),methods:{addOrg:function(){this.$router.push("/Org/")},rowClick:function(t){console.log(`rowClick: ${t.maindomain}`),this.$router.push("/Admin/"+t.maindomain)},deleteOrgDialog:function(t){this.deleteItem=t,this.dialogDeleteOrg=!0},deleteOrg:function(){console.log(`Delete org: ${this.deleteItem.maindomain}`),this.dialogDeleteOrg=!1,n.Z["delete"]({url:"api/orgs/"+encodeURIComponent(this.deleteItem.maindomain)}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Organization removed"),this.snackbarSave=!0,this.resetOrgsInAppData=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error")+` - ${t.data.message}`,this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refresh:function(){n.Z.get({url:"api/orgs"}).then((t=>{console.log(t.data),1==t.data.status?(this.rows=t.data.orgs,this.resetOrgsInAppData&&o.Z.resetOrgs(this.rows)):(console.log(`status: ${t.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Organizations"),to:"/Orgs",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("Domain"),value:"maindomain"},{text:this.$t("Organization Name"),value:"orgname"},{text:this.$t("Actions"),value:"actions",sortable:!1}],this.refresh()},watch:{}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(4998),g=a(4497),b=a(6428),y=a(3202),k=a(9762),x=a(6656),w=(0,d.Z)(c,i,s,!1,null,null,null),$=w.exports;h()(w,{VBtn:p.Z,VCard:m.Z,VCardActions:v.h7,VCardSubtitle:v.Qq,VCardText:v.ZB,VCardTitle:v.EB,VDataTable:f.Z,VDialog:g.Z,VIcon:b.Z,VSnackbar:y.Z,VSpacer:k.Z,VToolbar:x.Z})},1831:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return D}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Platforms")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.headers,items:t.rows,"items-per-page":20,loading:t.loading},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.startNew}},[t._v(" "+t._s(t.$t("Start New Platform"))+" ")])],1)]},proxy:!0},{key:"item.status",fn:function(e){var i=e.item;return["running"==i.status?a("v-chip",{staticClass:"ma-2",attrs:{color:"success","text-color":"white"}},[t._v(" "+t._s(t.$t("Running"))+" ")]):t._e(),"error"==i.status?a("v-chip",{staticClass:"ma-2",attrs:{color:"error","text-color":"white"}},[t._v(" "+t._s(t.$t("Error"))+" ")]):t._e(),"revive"==i.status?a("v-chip",{staticClass:"ma-2",attrs:{color:"warning","text-color":"white"}},[t._v(" "+t._s(t.$t("Revive"))+" ")]):t._e(),"starting"==i.status?a("v-chip",{staticClass:"ma-2",attrs:{color:"warning","text-color":"white"}},[t._v(" "+t._s(t.$t("Starting"))+" ")]):t._e(),"stopping"==i.status?a("v-chip",{staticClass:"ma-2",attrs:{color:"warning","text-color":"white"}},[t._v(" "+t._s(t.$t("Stopping"))+" ")]):t._e(),"available"==i.status?a("v-chip",{staticClass:"ma-2",attrs:{"text-color":"white"}},[t._v(" "+t._s(t.$t("Available"))+" ")]):t._e(),"not_available"==i.status?a("v-chip",{staticClass:"ma-2",attrs:{"text-color":"white"}},[t._v(" "+t._s(t.$t("Not Available"))+" ")]):t._e()]}},{key:"item.actions",fn:function(e){var i=e.item;return["running"==i.status||"error"==i.status||"revive"==i.status?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.stopCheck(i,e)}}},[t._v(" mdi-stop ")]):t._e(),"available"==i.status?a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.start(i,e)}}},[t._v(" mdi-play ")]):t._e()]}}],null,!0)}),a("v-dialog",{attrs:{persistent:"","max-width":"590"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.$t("Stop platform",{stopPlatID:t.stopPlatID}))+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" "+t._s(t.$t("Cancel"))+" ")]),"running"==t.stopStatus?a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.stopGracefully}},[t._v(" "+t._s(t.$t("Stop Gracefully"))+" ")]):t._e(),a("v-btn",{attrs:{color:"orange darken-1",text:""},on:{click:t.stopNow}},[t._v(" "+t._s(t.$t("Stop Now"))+" ")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);const r=a(381);let l={name:"Platforms",data:()=>({headers:[],rows:[],search:"",totalItems:0,loading:!0,options:{},dialog:!1,stopPlatID:0,stopStatus:"",snackbarSave:!1,snackbarText:"",appData:o.Z}),methods:{rowClick:function(t){console.log(`rowClick: ${t.platID}`),this.$router.push("/Platform/"+t.platID)},stopCheck:function(t,e){e.stopPropagation(),this.stopStatus=t.status,this.stopPlatID=t.platID,this.dialog=!0},scheduleLongOperCheck:function(t,e){console.log("scheduleLongOperCheck: "+t),n.Z.get({url:"api/longOperations/"+t}).then((a=>{console.log(a.data),50==a.data.status?setTimeout(this.scheduleLongOperCheck,5e3,t,e):1==a.data.status?(console.log("response.data.status == 1"),this.$notification.success(a.data.message,{title:e,infiniteTimer:!0,showCloseIcn:!0})):(console.log("response.data.status != 1"),this.$notification.error(a.data.message,{title:e,infiniteTimer:!0,showCloseIcn:!0}))})).catch((t=>console.log(t)))},stopGracefully:function(){this.stop(!0)},stopNow:function(){this.stop(!1)},stop:function(t){this.dialog=!1;let e=t?"?gracefully=Y":"?gracefully=N";console.log(`stop: ${this.stopPlatID}, gracefully: ${t}`),n.Z["delete"]({url:"api/platforms/"+this.stopPlatID+e}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Stopping platform")+" "+this.stopPlatID,this.snackbarSave=!0,t.data.notifToken&&this.scheduleLongOperCheck(t.data.notifToken,this.$t("Stopping platform")+" "+this.stopPlatID)):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},startNew:function(){let t=!1;this.rows.forEach((e=>{t||"available"!=e.status||(t=!0,this.start(e))})),t||(this.snackbarText=this.$t("Cannot find available platform"),this.snackbarSave=!0)},start:function(t,e){e.stopPropagation(),n.Z.put({url:"api/platforms/"+t.platID}).then((e=>{console.log(e.data),1==e.data.status?(this.snackbarText=this.$t("Starting platform")+" "+t.platID,this.snackbarSave=!0,e.data.notifToken&&this.scheduleLongOperCheck(e.data.notifToken,this.$t("Starting platform")+" "+t.platID)):(console.log(`status: ${e.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},printMem:function(t){if(isNaN(t))return"";const e=t/1024;if(e<1)return`${t} bytes`;const a=e/1024;if(a<1)return`${e.toFixed(1)} kb`;const i=a/1024;return i<1?`${a.toFixed(1)} mb`:`${i.toFixed(1)} gb`},refresh:function(){console.log("Platforms refresh. route: "+this.$route.name),"Platforms"==this.$route.name&&n.Z.get({url:"api/platforms"}).then((t=>{if(console.log(t.data),1==t.data.status){for(const e of t.data.platforms)e.availMem=e.params?`${this.printMem(e.params.memAvailable)}`:"",e.cpuLoad=e.params&&!isNaN(e.params.currentLoad)?`${(1*e.params.currentLoad).toFixed(1)}%`:"",e.uptime=e.params&&e.params.startTime?r(e.params.startTime).fromNow():"";this.rows=t.data.platforms,setTimeout(this.refresh,5e3)}else console.log(`status: ${t.data.status}`),this.rows=[]})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Platforms"),to:"/Platforms",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("Platform ID"),value:"platID"},{text:this.$t("Status"),value:"status"},{text:this.$t("Current Sessions"),value:"sessions"},{text:this.$t("Created Sessions"),value:"params.created_sessions_cnt"},{text:this.$t("Available Memory"),value:"availMem"},{text:this.$t("CPU Load"),value:"cpuLoad"},{text:this.$t("Up Time"),value:"uptime"},{text:this.$t("IP Address"),value:"platform_ip"},{text:"Actions",value:"actions",sortable:!1}],this.refresh()}};var c=l,d=c,u=a(1001),h=a(3453),p=a.n(h),m=a(3150),v=a(2371),f=a(7118),g=a(5424),b=a(4998),y=a(4497),k=a(6428),x=a(3202),w=a(9762),$=a(6656),S=(0,u.Z)(d,i,s,!1,null,null,null),D=S.exports;p()(S,{VBtn:m.Z,VCard:v.Z,VCardActions:f.h7,VCardTitle:f.EB,VChip:g.Z,VDataTable:b.Z,VDialog:y.Z,VIcon:k.Z,VSnackbar:x.Z,VSpacer:w.Z,VToolbar:$.Z})},5276:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return F}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"details"},[t._v(" "+t._s(t.$t("Details"))+" ")]),t.newProfile?t._e():a("v-tab",{key:"activity"},[t._v(" "+t._s(t.$t("Activity"))+" ")]),t.newProfile?t._e():a("v-tab",{key:"apps"},[t._v(" "+t._s(t.$t("Apps"))+" ")]),t.newProfile?t._e():a("v-tab",{key:"devices"},[t._v(" "+t._s(t.$t("Devices"))+" ")]),t.newProfile?t._e():a("v-tab",{key:"groups"},[t._v(" "+t._s(t.$t("Groups"))+" ")])],1)]},proxy:!0}])},[t.newProfile?a("v-toolbar-title",[t._v(t._s(t.$t("New Profile")))]):a("v-toolbar-title",[t._v(t._s(t.details.firstname)+" "+t._s(t.details.lastname))]),a("v-spacer"),!t.newProfile&&t.appData.checkPermission("/profiles","w")?a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,1510716892)},[a("v-list",[a("v-list-item",{on:{click:function(e){return t.sendInvitation()}}},[a("v-list-item-title",[t._v(t._s(t.$t("Send invitation")))])],1),a("v-list-item",{on:{click:function(e){t.dialogDeleteProfile=!0}}},[a("v-list-item-title",[t._v(t._s(t.$t("Delete profile")))])],1)],1)],1):t._e(),a("v-dialog",{attrs:{"max-width":"500px",color:"bg"},model:{value:t.dialogDeleteProfile,callback:function(e){t.dialogDeleteProfile=e},expression:"dialogDeleteProfile"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-subtitle",{staticClass:"headline"},[t._v(t._s(t.$t("Are you sure you want to delete profile",{profileName:t.details.firstname+" "+t.details.lastname})))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialogDeleteProfile=!1}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteProfile()}}},[t._v(t._s(t.$t("OK")))]),a("v-spacer")],1)],1)],1)],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"details"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("First Name"),rules:t.requiredRules},model:{value:t.details.firstname,callback:function(e){t.$set(t.details,"firstname",e)},expression:"details.firstname"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Last Name"),rules:t.requiredRules},model:{value:t.details.lastname,callback:function(e){t.$set(t.details,"lastname",e)},expression:"details.lastname"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Office Phone")},model:{value:t.details.officePhone,callback:function(e){t.$set(t.details,"officePhone",e)},expression:"details.officePhone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Mobile Phone")},model:{value:t.details.mobilePhone,callback:function(e){t.$set(t.details,"mobilePhone",e)},expression:"details.mobilePhone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Manager")},model:{value:t.details.manager,callback:function(e){t.$set(t.details,"manager",e)},expression:"details.manager"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Country")},model:{value:t.details.country,callback:function(e){t.$set(t.details,"country",e)},expression:"details.country"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Email"),readonly:!t.newProfile,rules:t.emailRules},model:{value:t.details.email,callback:function(e){t.$set(t.details,"email",e)},expression:"details.email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("User Name"),readonly:""},model:{value:t.details.userName,callback:function(e){t.$set(t.details,"userName",e)},expression:"details.userName"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"mr-4",attrs:{color:"primary",loading:t.saveLoading},on:{click:t.saveDetails}},[t._v(" "+t._s(t.$t("Save"))+" ")]):t._e()],1)],1)],1)],1)],1)],1),a("v-tab-item",{key:"activity"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-form",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Last Login"),readonly:""},model:{value:t.details.lastActivityTimeFormat,callback:function(e){t.$set(t.details,"lastActivityTimeFormat",e)},expression:"details.lastActivityTimeFormat"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Data Center"),readonly:""},model:{value:t.details.dataCenter,callback:function(e){t.$set(t.details,"dataCenter",e)},expression:"details.dataCenter"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("Storage Usage"),readonly:""},model:{value:t.details.storageUsage,callback:function(e){t.$set(t.details,"storageUsage",e)},expression:"details.storageUsage"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{attrs:{label:t.$t("EWS Subscription"),readonly:""},model:{value:t.details.subscriptionUpdateDateFormat,callback:function(e){t.$set(t.details,"subscriptionUpdateDateFormat",e)},expression:"details.subscriptionUpdateDateFormat"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[t.appData.checkPermission("/profiles","w")?a("v-btn",{attrs:{color:"primary"},on:{click:t.notificationTest}},[t._v(t._s(t.$t("Notification Test")))]):t._e()],1)],1),a("v-row",[a("v-card",{staticClass:"mt-6",attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Activity Log")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.logsHead,items:t.logsRows,"items-per-page":20,loading:t.logsLoading,"sort-by":t.logsSort,"sort-desc":t.logsSortDesc},on:{"update:sortBy":function(e){t.logsSort=e},"update:sort-by":function(e){t.logsSort=e},"update:sortDesc":function(e){t.logsSortDesc=e},"update:sort-desc":function(e){t.logsSortDesc=e}},scopedSlots:t._u([{key:"item.Time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.Time).format("LLL"))+" ")]}}],null,!0)})],1)],1)],1)],1)],1)],1),a("v-tab-item",{key:"apps"},[a("v-card",{attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("App List")))]),a("v-dialog",{attrs:{"max-width":"500px",color:"bg"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",{staticClass:"headline"},[t._v(t._s(t.$t("Are you sure you want to delete",{deleteAppName:t.deleteAppItem.appName})))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:t.closeDelete}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"primary"},on:{click:t.deleteAppConfirm}},[t._v(t._s(t.$t("OK")))]),a("v-spacer")],1)],1)],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.appsHead,items:t.apps,"items-per-page":10,loading:t.appsLoading,"sort-by":t.appsSort,"sort-desc":t.appsSortDesc},on:{"update:sortBy":function(e){t.appsSort=e},"update:sort-by":function(e){t.appsSort=e},"update:sortDesc":function(e){t.appsSortDesc=e},"update:sort-desc":function(e){t.appsSortDesc=e}},scopedSlots:t._u([{key:"item.imageUrl",fn:function(t){var e=t.item;return[a("v-img",{attrs:{"max-height":"40","max-width":"40",src:e.imageUrl}})]}},{key:"item.actions",fn:function(e){var i=e.item;return[t.appData.checkPermission("/apps","i")?a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.reinstallItem(i)}}},[t._v(" mdi-refresh ")]):t._e(),1==i.privateApp&&t.appData.checkPermission("/apps","i")?a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteApp(i)}}},[t._v(" mdi-delete ")]):t._e()]}}],null,!0)})],1)],1),a("v-tab-item",{key:"devices"},[a("v-card",{attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Devices")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.devicesHead,items:t.devices,"items-per-page":10},scopedSlots:t._u([{key:"item.isOnline",fn:function(e){var i=e.item;return[i.isOnline?a("v-chip",{staticClass:"ma-2",attrs:{color:"success","text-color":"white"}},[t._v(" "+t._s(t.$t("Online"))+" ")]):t._e(),!i.isOnline&&i.isActive?a("v-chip",{staticClass:"ma-2",attrs:{color:"warning"}},[t._v(" "+t._s(t.$t("Offline"))+" ")]):t._e(),i.isActive?t._e():a("v-chip",{staticClass:"ma-2",attrs:{color:"error","text-color":"white"}},[t._v(" "+t._s(t.$t("Disabled"))+" ")])]}},{key:"item.actions",fn:function(e){var i=e.item;return[i.isOnline&&t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"ma-1",attrs:{small:"",color:"primary",dark:""},on:{click:function(e){return t.endSession(i)}}},[t._v(" "+t._s(t.$t("End Session"))+" ")]):i.isActive&&t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"ma-1",attrs:{small:"",color:"primary",dark:""},on:{click:function(e){return t.disableDevice(i)}}},[t._v(" "+t._s(t.$t("Disable"))+" ")]):t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"ma-1",attrs:{small:"",color:"primary",dark:""},on:{click:function(e){return t.enableDevice(i)}}},[t._v(" "+t._s(t.$t("Enable"))+" ")]):t._e()]}}],null,!0)})],1)],1),a("v-tab-item",{key:"groups"},[a("v-card",{attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Groups")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.groupHeaders,items:t.groupRows},scopedSlots:t._u([{key:"item.adDomain",fn:function(e){var i=e.item;return["All"==i.groupName?a("div",[t._v(t._s(t.$t("Automatic")))]):""==i.adDomain?a("div",[t._v(t._s(t.$t("Manual")))]):a("div",[t._v(t._s(t.$t("Active Directory")))])]}}],null,!0)})],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);const r=a(381);var l={name:"ProfilePage",components:{},data:()=>({details:{},tab:{},appData:o.Z,saveLoading:!1,snackbarSave:!1,snackbarText:"",moment:r,logsHead:[],logsRows:[],logsLoading:!0,logsSort:"Time",logsSortDesc:!0,appsHead:[],apps:[],appsLoading:!0,appsSort:"appName",appsSortDesc:!1,dialogDelete:!1,deleteAppItem:{},devicesHead:[],devices:[],groupHeaders:[],groupRows:[],newProfile:!1,profileID:null,emailRules:[],requiredRules:[],dialogDeleteProfile:!1,valid:!0}),methods:{deleteApp:function(t){this.deleteAppItem=t,this.dialogDelete=!0},deleteAppConfirm:function(){console.log(this.deleteAppItem),this.dialogDelete=!1,n.Z.get({url:`api/apps/${encodeURIComponent(this.deleteAppItem.packageName)}/deleteFromProfiles?email=${encodeURIComponent(this.details.email)}`}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.snackbarText="App deleted",this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>{}))},closeDelete:function(){this.dialogDelete=!1},reinstallItem:function(t){console.log("reinstallItem.."),n.Z.get({url:`api/apps/${encodeURIComponent(t.packageName)}/install?email=${encodeURIComponent(this.details.email)}&privateApp=${encodeURIComponent(t.privateApp)}&appStoreOnly=0`}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.snackbarText="App re-installed",this.snackbarSave=!0):(console.log(`status: ${t.data.status}`),this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>{}))},endSession:function(t){n.Z.post({url:`api/devices/${encodeURIComponent(this.details.email)}/${encodeURIComponent(t.IMEI)}`,data:{action:"endSession"}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.snackbarText=this.$t("Session closed"),this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>{}))},disableDevice:function(t){n.Z.post({url:`api/devices/${encodeURIComponent(this.details.email)}/${encodeURIComponent(t.IMEI)}`,data:{action:"disable"}}).then((t=>{console.log(t.data),1==t.data.status||0==t.data.status?(console.log("Success"),this.snackbarText=this.$t("Device disabled"),this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>{}))},enableDevice:function(t){n.Z.post({url:`api/devices/${encodeURIComponent(this.details.email)}/${encodeURIComponent(t.IMEI)}`,data:{action:"enable"}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.snackbarText=this.$t("Device enabled"),this.snackbarSave=!0,this.loadDetails()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error"),this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>{}))},loadDetails:function(){this.newProfile?console.log("loadDetails new profile.."):n.Z.get({url:"api/profiles/"+encodeURIComponent(this.profileID)}).then((t=>{if(console.log(t.data),1==t.data.status){this.details=t.data.details,this.details.email=this.profileID;let e=r(this.details.lastActivityTime);e.isValid()?this.details.lastActivityTimeFormat=e.format("LLL"):this.details.lastActivityTimeFormat="",e=r(this.details.subscriptionUpdateDate),e.isValid()?this.details.subscriptionUpdateDateFormat=e.format("LLL"):this.details.subscriptionUpdateDateFormat="",this.apps=t.data.apps,this.appsHead=[{text:this.$t("Icon"),value:"imageUrl",sortable:!1},{text:this.$t("Name"),value:"appName"},{text:this.$t("Package"),value:"packageName"},{text:"Actions",value:"actions",sortable:!1}],this.appsLoading=!1,this.devices=t.data.devices,this.devicesHead=[{text:this.$t("Name"),value:"deviceName"},{text:this.$t("ID"),value:"IMEI"},{text:this.$t("Created"),value:"insertTime"},{text:this.$t("Online"),value:"isOnline"},{text:this.$t("Platform"),value:"platform"},{text:this.$t("Gateway"),value:"gateway"},{text:"Actions",value:"actions",sortable:!1}],this.groupRows=t.data.groups,this.groupHeaders=[{text:this.$t("Group Name"),value:"groupName"},{text:this.$t("Group Type"),value:"adDomain"}]}else console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},sendInvitation:function(){console.log("sendInvitation"),n.Z.put({url:"api/profiles/"+encodeURIComponent(this.profileID)+"/invite"}).then((t=>{console.log(t.data),1==t.data.status?(this.saveLoading=!1,this.snackbarText=this.$t("Invitation sent"),this.snackbarSave=!0):(this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>{this.snackbarText="Error",this.snackbarSave=!0,console.log(t)}))},deleteProfile:function(){console.log("deleteProfile"),n.Z["delete"]({url:"api/profiles/"+encodeURIComponent(this.profileID)}).then((t=>{console.log(t.data),1==t.data.status?(this.saveLoading=!1,this.snackbarText=this.$t("Profile deleted"),this.snackbarSave=!0,this.$router.push("/Profiles")):(this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>{this.snackbarText="Error",this.snackbarSave=!0,console.log(t)}))},saveDetails:function(){if(this.$refs.form.validate(),!this.valid)return;let t;this.newProfile?(this.profileID=this.details.email,t="put"):t="post",this.saveLoading=!0,n.Z.req({method:t,url:"api/profiles/"+encodeURIComponent(this.profileID),data:{first:this.details.firstname,last:this.details.lastname,manager:this.details.manager,country:this.details.country,officePhone:this.details.officePhone,mobilePhone:this.details.mobilePhone}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.saveLoading=!1,this.snackbarText=this.$t("Profile saved"),this.snackbarSave=!0,this.newProfile&&(this.newProfile=!1,this.snackbarText=this.$t("Profile added"),this.updatePageHead(),this.$router.replace("/Profile/"+encodeURIComponent(this.profileID)),this.loadDetails())):(console.log(`status: ${t.data.status}`),this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.saveLoading=!1))},notificationTest:function(){console.log("notificationTest"),n.Z.put({url:"api/notifications",data:{email:this.details.email,titleText:"Test",notifyTime:"Test Notification",notifyLocation:"Test Notification",appName:"test",authKey:"test"}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),this.snackbarText="Notification Sent",this.snackbarSave=!0):(console.log(`status: ${t.data.status}`),this.snackbarText="Notification Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},resetLogin:function(){console.log("resetLogin")},updatePageHead:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Profiles"),to:"/Profiles",disabled:!1},{text:""!=this.profileID?this.profileID:this.$t("New Profile"),to:"/Profile/"+this.profileID,disabled:!1}];this.$emit("updatePage",t)}},created:function(){this.profileID=this.$route.params.id,this.profileID&&""!=this.profileID?this.newProfile=!1:(this.profileID="",this.newProfile=!0),this.updatePageHead(),this.emailRules=[t=>!!t||this.$t("Field is required"),t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(t)||this.$t("Email must be valid")],this.requiredRules=[t=>!!t||this.$t("Field is required")],this.loadDetails()},watch:{tab:function(t){if(1==t){this.logsHead=[{text:this.$t("Time"),value:"Time"},{text:this.$t("Component"),value:"ComponentType"},{text:this.$t("Message"),value:"Message"}];let t=Math.round((new Date).getTime()/1e3-432e3);this.logsLoading=!0,n.Z.get({url:"api/logs?u="+encodeURIComponent(this.details.email)+"&mtype=important&limit=200"+`&s=${t}`}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Success"),t.data.logs&&(this.logsRows=t.data.logs,this.logsLoading=!1)):(console.log(`status: ${t.data.status}`),this.snackbarText="Error",this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.saveLoading=!1))}}}},c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(5424),g=a(2102),b=a(4228),y=a(4998),k=a(4497),x=a(6232),w=a(6428),$=a(7047),S=a(6816),D=a(7620),_=a(413),C=a(6768),T=a(2877),P=a(3202),A=a(9762),O=a(4227),I=a(1759),R=a(8697),Z=a(1954),E=a(1208),V=a(5978),L=a(6656),N=a(7921),j=(0,d.Z)(c,i,s,!1,null,null,null),F=j.exports;h()(j,{VBtn:p.Z,VCard:m.Z,VCardActions:v.h7,VCardSubtitle:v.Qq,VCardTitle:v.EB,VChip:f.Z,VCol:g.Z,VContainer:b.Z,VDataTable:y.Z,VDialog:k.Z,VForm:x.Z,VIcon:w.Z,VImg:$.Z,VList:S.Z,VListItem:D.Z,VListItemTitle:_.V9,VMenu:C.Z,VRow:T.Z,VSnackbar:P.Z,VSpacer:A.Z,VTab:O.Z,VTabItem:I.Z,VTabs:R.Z,VTabsItems:Z.Z,VTabsSlider:E.Z,VTextField:V.Z,VToolbar:L.Z,VToolbarTitle:N.qW})},5932:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return T}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"list"},[t._v(" "+t._s(t.$t("Profile List"))+" ")]),a("v-tab",{key:"online"},[t._v(" "+t._s(t.$t("Online Profiles"))+" ")]),a("v-tab",{key:"approvals"},[t._v(" "+t._s(t.$t("Approvals"))+" ")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(" "+t._s(t.$t("Profiles")))]),a("v-spacer")],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"list",staticClass:"bg"},[a("v-data-table",{staticClass:"ma-4 bg",attrs:{color:"bg",headers:t.headers,items:t.rows,"server-items-length":t.totalItems,"items-per-page":5,loading:t.loading,options:t.options,search:t.search,"multi-sort":""},on:{"update:options":[function(e){t.options=e},t.updateOptions],"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:function(e){return t.$router.push("/Profile/")}}},[t._v(t._s(t.$t("New Profile")))]):t._e(),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0}])})],1),a("v-tab-item",{key:"online",staticClass:"bg"},[a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.onlineHeads,items:t.onlineRows,"items-per-page":10,loading:t.onlineLoad,expanded:t.onlineExpanded,"item-key":"email","show-expand":"",options:t.onlineOptions},on:{"update:expanded":function(e){t.onlineExpanded=e},"click:row":t.rowClick,"update:options":[function(e){t.onlineOptions=e},t.updateOnlineOptions]},scopedSlots:t._u([{key:"expanded-item",fn:function(e){var i=e.headers,s=e.item;return[a("td",{attrs:{colspan:i.length}},[a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.devicesHeads,items:s.user_devices,"items-per-page":10}})],1)]}}])})],1),a("v-tab-item",{key:"approvals",staticClass:"bg"},[a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.approvalHeads,items:t.approvalRows,"items-per-page":10,loading:t.approvalLoad,expanded:t.approvalsExpanded,"group-by":"Profile","show-expand":"","show-select":"","item-key":"item_key",options:t.approvalOptions},on:{"update:expanded":function(e){t.approvalsExpanded=e},"update:options":[function(e){t.approvalOptions=e},t.updateApprovalOptions]},scopedSlots:t._u([{key:"top",fn:function(){return[t.selectedApprovals.length>0?a("v-toolbar",{attrs:{flat:"",color:"bg"}},[t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"ma-4",attrs:{color:"success"},on:{click:function(e){return t.approveSelected(!0)}}},[t._v(t._s(t.$t("Approve Selected")))]):t._e(),t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"ma-4",attrs:{color:"error"},on:{click:function(e){return t.approveSelected(!1)}}},[t._v(t._s(t.$t("Disapprove Selected")))]):t._e()],1):t._e()]},proxy:!0},{key:"group.header",fn:function(e){var i=e.isOpen,s=e.toggle,o=e.group,n=e.headers;return[a("td",{staticClass:"accent",attrs:{colspan:n.length}},[a("v-btn",{attrs:{icon:""},on:{click:s}},[a("v-icon",[t._v(" "+t._s(i?"$minus":"$plus")+" ")])],1),t._v(" "+t._s(o)+" ")],1)]}},{key:"expanded-item",fn:function(e){var i=e.headers,s=e.item;return[a("td",{attrs:{colspan:i.length}},[t._v(" "+t._s(t.$t("Device ID"))+": "+t._s(s.deviceid)+" ")])]}},{key:"item.approvalType",fn:function(e){var i=e.item;return["activate"==i.approvalType?a("v-chip",[t._v(t._s(t.$t("Activate Device")))]):t._e(),"unlock passcode"==i.approvalType?a("v-chip",[t._v(t._s(t.$t("Unlock Device")))]):t._e(),"reset passcode"==i.approvalType?a("v-chip",[t._v(t._s(t.$t("Reset Password")))]):t._e(),"reset biometric"==i.approvalType?a("v-chip",[t._v(t._s(t.$t("Reset Biometric Key")))]):t._e(),"admin"==i.approvalType?a("v-chip",[t._v(t._s(t.$t("Activate Control Panel")))]):t._e(),"admin reset"==i.approvalType?a("v-chip",[t._v(t._s(t.$t("Reset Admin Password")))]):t._e(),"reset otp"==i.approvalType?a("v-chip",[t._v(t._s(t.$t("Reset OTP Code")))]):t._e()]}},{key:"item.actions",fn:function(e){var i=e.item;return[t.appData.checkPermission("/profiles","w")?a("v-icon",{staticClass:"mx-2",attrs:{color:"success"},on:{click:function(e){return t.approveItem(i,!0)}}},[t._v(" mdi-check-bold ")]):t._e(),t.appData.checkPermission("/profiles","w")?a("v-icon",{staticClass:"mx-2",attrs:{color:"error"},on:{click:function(e){return t.approveItem(i,!1)}}},[t._v(" mdi-close-thick ")]):t._e()]}}],null,!0),model:{value:t.selectedApprovals,callback:function(e){t.selectedApprovals=e},expression:"selectedApprovals"}})],1)],1)],1)},s=[],o=a(3888),n=a(3144);let r={name:"ProfilesPage",data:()=>({tab:{},headers:[],rows:[],search:"",totalItems:0,loading:!0,options:{},approvalLoad:!1,approvalRows:[],approvalHeads:[],approvalsExpanded:[],approvalOptions:{},selectedApprovals:[],onlineLoad:!1,onlineRows:[],onlineHeads:[],onlineExpanded:[],onlineOptions:{},devicesHeads:[],appData:o.Z}),methods:{savePage:function(){n.Z.savePageData(`${r.name}`,this,["options","search","approvalOptions","onlineOptions","tab"])},updateOptions(){this.savePage(),this.refresh()},updateOnlineOptions(){this.savePage()},updateApprovalOptions(){this.savePage()},rowClick:function(t){console.log(`rowClick: ${t.email}`),this.$router.push("/Profile/"+t.email)},approveSelected:function(t){console.log("approveSelected"),this.selectedApprovals.forEach((e=>{this.approveItem(e,t)})),this.selectedApprovals=[]},approveItem:function(t,e){let a;a=e?"put":"delete",n.Z.req({method:a,url:`api/approvals/${encodeURIComponent(t.email)}/${encodeURIComponent(t.deviceid)}/${encodeURIComponent(t.approvalType)}`}).then((e=>{if(1==e.data.status){console.log(`status: ${e.data.status}`);for(var a=0;a<this.approvalRows.length;a++)this.approvalRows[a].deviceid==t.deviceid&&this.approvalRows[a].email==t.email&&this.approvalRows.splice(a,1)}else console.log(`status: ${e.data.status}`)})).catch((t=>{console.log(t)}))},loadApprovals:function(){console.log("loadApprovals"),this.approvalLoad=!0,n.Z.get({url:"api/approvals"}).then((t=>{if(this.approvalLoad=!1,1==t.data.status){console.log(`status: ${t.data.status}`);let e=[];t.data.profiles.forEach((t=>{t.devices.forEach((a=>{e.push({Profile:`${t.firstName} ${t.lastName} <${t.email}>`,deviceid:a.deviceid,devicetype:a.devicetype,approvalType:a.type,email:t.email,item_key:`${t.email}_${a.deviceid}`})}))})),this.approvalRows=e,this.approvalHeads=[{text:this.$t("Profile"),value:"Profile"},{text:this.$t("Device Type"),value:"devicetype"},{text:this.$t("Approval Type"),value:"approvalType"},{text:this.$t("Actions"),value:"actions",sortable:!1}]}else console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},loadOnline:function(){this.onlineLoad=!0,n.Z.get({url:"api/onlineProfiles"}).then((t=>{this.onlineLoad=!1,1==t.data.status?(this.onlineRows=t.data.profiles,this.onlineHeads=[{text:this.$t("Last Name"),value:"lastname"},{text:this.$t("First Name"),value:"firstname"},{text:this.$t("Email"),value:"email"}],this.devicesHeads=[{text:this.$t("Device Name"),value:"devicename"},{text:this.$t("Device ID"),value:"imei"},{text:this.$t("Gateway"),value:"gateway"},{text:this.$t("Platform"),value:"platform"}]):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},refresh:function(){let t=this.options.itemsPerPage>0?this.options.itemsPerPage:1e4,e=(this.options.page-1)*t;n.Z.post({url:"api/profiles",data:{offset:e,limit:t,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,search:this.search}}).then((t=>{1==t.data.status?(this.rows=t.data.profiles,this.totalItems=t.data.totalItems):(console.log(`status: ${t.data.status}`),this.$router.push("/Login"))})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Profiles"),to:"/Profiles",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("Last Name"),value:"lastName"},{text:this.$t("First Name"),value:"firstName"},{text:this.$t("Email"),value:"email"}],n.Z.loadPageData(`${r.name}`,this)},watch:{tab:function(t){this.savePage(),1==t?this.loadOnline():2==t&&this.loadApprovals()},selectedApprovals:function(t){console.log(`selectedApprovals: ${JSON.stringify(t)}`)},search:function(t){console.log(`search: ${t}`),this.savePage(),(t.length>1||0==t.length)&&this.refresh()}}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(5424),f=a(4998),g=a(6428),b=a(9762),y=a(4227),k=a(1759),x=a(8697),w=a(1954),$=a(1208),S=a(5978),D=a(6656),_=a(7921),C=(0,d.Z)(c,i,s,!1,null,null,null),T=C.exports;h()(C,{VBtn:p.Z,VCard:m.Z,VChip:v.Z,VDataTable:f.Z,VIcon:g.Z,VSpacer:b.Z,VTab:y.Z,VTabItem:k.Z,VTabs:x.Z,VTabsItems:w.Z,VTabsSlider:$.Z,VTextField:S.Z,VToolbar:D.Z,VToolbarTitle:_.qW})},7285:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return M}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"settings"},[t._v(" "+t._s(t.$t("Settings"))+" ")]),a("v-tab",{key:"view"},[t._v(" "+t._s(t.$t("View Recordings"))+" ")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(" "+t._s(t.$t("Recordings")))]),a("v-spacer")],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"settings",staticClass:"bg"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-form",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-checkbox",{staticClass:"py-0 my-0",attrs:{label:t.$t("Record all users")},model:{value:t.recordingall,callback:function(e){t.recordingall=e},expression:"recordingall"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{staticClass:"shrink>",attrs:{rules:t.numberRules,required:"",label:t.$t("Retention days")},model:{value:t.details.recordingretentiondays,callback:function(e){t.$set(t.details,"recordingretentiondays",e)},expression:"details.recordingretentiondays"}})],1)],1)],1),a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:t.saveSettings}},[t._v("Save ")])],1)],1),t.recordingall?t._e():a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Profiles")))]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.recProfilesHeaders,items:t.recProfilesRows},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.addProfile}},[t._v(" "+t._s(t.$t("Add Profiles"))+" ")])],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteProfile(i)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),a("v-dialog",{attrs:{"max-width":"800px","overlay-color":"bg"},model:{value:t.profilesDialog,callback:function(e){t.profilesDialog=e},expression:"profilesDialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Add Profiles"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.profileSearch,callback:function(e){t.profileSearch=e},expression:"profileSearch"}})],1),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.profilesHeaders,items:t.profilesRows,loading:t.profilesLoading,"server-items-length":t.profilesTotalItems,"items-per-page":5,options:t.profileOptions,search:t.profileSearch,"show-select":"","multi-sort":""},on:{"update:options":[function(e){t.profileOptions=e},t.updateProfileOptions],"click:row":t.profileRowClick},scopedSlots:t._u([{key:"header.data-table-select",fn:function(){return[t._v("   ")]},proxy:!0},{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",disabled:t.addSelectedDisabled,loading:t.addSelectedLoading},on:{click:t.addSelected}},[t._v(" "+t._s(t.$t("Assign Selected Profiles"))+" ")])],1)]},proxy:!0}],null,!0),model:{value:t.profilesSelected,callback:function(e){t.profilesSelected=e},expression:"profilesSelected"}})],1)],1)],1)],1),a("v-tab-item",{key:"view",staticClass:"bg"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-card-title",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:t.dateRanges,label:t.$t("Time Period"),value:t.selectedDateRange},on:{change:t.dateRangeChanged}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t.customdDateRange?a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"From","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}},"v-text-field",s,!1),i))]}}],null,!1,3323294146),model:{value:t.fromMenu,callback:function(e){t.fromMenu=e},expression:"fromMenu"}},[a("v-date-picker",{on:{input:function(e){t.fromMenu=!1}},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1):t._e()],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t.customdDateRange?a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"To","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}},"v-text-field",s,!1),i))]}}],null,!1,1337146914),model:{value:t.toMenu,callback:function(e){t.toMenu=e},expression:"toMenu"}},[a("v-date-picker",{on:{input:function(e){t.toMenu=!1}},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1):t._e()],1)],1)],1),a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.headers,items:t.rows,loading:t.loading,"server-items-length":t.totalItems,search:t.search,options:t.options,"multi-sort":""},on:{"update:options":[function(e){t.options=e},t.updateOptions]},scopedSlots:t._u([{key:"item.start_time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.start_time).format("LLL"))+" ")]}},{key:"item.end_time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.end_time).format("LLL"))+" ")]}},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.prepare(i,e)}}},[t._v(" mdi-play ")])]}}],null,!0)})],1)],1)],1),a("v-dialog",{attrs:{"max-width":"660","overlay-color":"primary"},model:{value:t.playDialog,callback:function(e){t.playDialog=e},expression:"playDialog"}},[a("v-card",{attrs:{color:"primary"}},[a("v-container",[a("div",{attrs:{id:"artplayer-app"}},[t._v(" ")])])],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.prepDialog,callback:function(e){t.prepDialog=e},expression:"prepDialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[t._v(" Preparing recording video "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"primary",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" "+t._s(t.$t("Close"))+" ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144),r=a(8755),l=a.n(r);const c=a(381);let d={name:"Recordings",data:()=>({tab:{},headers:[],rows:[],search:"",totalItems:0,loading:!0,options:{},details:{},hasDateRange:!1,dateRanges:[],selectedDateRange:"",customdDateRange:!1,fromDate:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fromMenu:!1,toDate:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),toMenu:!1,numberRules:[],snackbarSave:!1,snackbarText:"",recordingall:!1,prepDialog:!1,playDialog:!1,playItem:{},playerOption:{url:"https://artplayer.org/assets/sample/video.mp4"},playerStyle:{width:"640px",height:"480px",margin:"0 auto 0"},recProfilesHeaders:[],recProfilesRows:[],profilesDialog:!1,profilesHeaders:[],profilesRows:[],profilesLoading:!0,profilesSelected:[],profileOptions:{},profileSearch:"",profilesTotalItems:0,allSelected:[],moment:c,appData:o.Z}),methods:{getInstance(t){console.log(t)},savePage:function(){n.Z.savePageData(`${d.name}`,this,["options","search","selectedDateRange","fromDate","toDate","tab"])},saveSettings:function(){console.log(this.details),this.recordingall?this.details.recordingall="1":this.details.recordingall="0",n.Z.post({url:"api/orgs/"+encodeURIComponent(o.Z.mainDomain),data:this.details}).then((t=>{console.log(t.data),1==t.data.status?(this.snackbarText=this.$t("Saved"),this.snackbarSave=!0,this.loadSettings()):(console.log(`status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))})).catch((t=>console.log(t)))},loadSettings:function(){console.log(`loadSettings: ${o.Z.mainDomain}`),this.recProfilesHeaders=[{text:this.$t("Last Name"),value:"lastname"},{text:this.$t("First Name"),value:"firstname"},{text:this.$t("Email"),value:"email"},{text:"Actions",value:"actions",sortable:!1}],n.Z.get({url:"api/orgs/"+encodeURIComponent(o.Z.mainDomain)}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),t.data.orgs&&1==t.data.orgs.length?(this.details=t.data.orgs[0],this.recordingall=!!this.details.recordingall):this.details={}):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1)),n.Z.get({url:"api/recordings/profiles"}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.recProfilesRows=t.data.results):console.log(`api/recordings/profiles status: ${t.data.status}`)})).catch((t=>console.log(t)))},deleteProfile:function(t){console.log(`deleteProfile: ${t.email}`);let e=[t.email];n.Z["delete"]({url:"api/recordings/profiles",data:{emails:e}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Deleted"),this.snackbarSave=!0,this.snackbarText=this.$t("Deleted"),this.loadSettings()):(console.log(`deleteProfile status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))})).catch((t=>{console.log(t),this.snackbarSave=!0,this.snackbarText=this.$t("Error")}))},addProfile:function(){this.profilesHeaders=[{text:this.$t("Last Name"),value:"lastName"},{text:this.$t("First Name"),value:"firstName"},{text:this.$t("Email"),value:"email"}],this.profilesDialog=!0,this.addSelectedDisabled=!0,this.allSelected=[]},updateProfileOptions:function(){console.log("updateProfileOptions"),this.savePage(),this.refreshProfiles()},addSelected:function(){console.log("addSelected");let t=[];for(const[e]of Object.entries(this.allSelected))t.push(e);n.Z.put({url:"api/recordings/profiles",data:{emails:t}}).then((t=>{console.log(t.data),1==t.data.status?(console.log("Added"),this.snackbarSave=!0,this.snackbarText=this.$t("Added"),this.profilesDialog=!1,this.loadSettings()):(console.log(`addSelected status: ${t.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))})).catch((t=>{console.log(t),this.snackbarSave=!0,this.snackbarText=this.$t("Error")}))},refreshProfiles:function(){this.profilesLoading=!0;let t=this.profileOptions.itemsPerPage>0?this.profileOptions.itemsPerPage:1e4,e=(this.profileOptions.page-1)*t;n.Z.post({url:"api/profiles",data:{offset:e,limit:t,sortBy:this.profileOptions.sortBy,sortDesc:this.profileOptions.sortDesc,search:this.profileSearch}}).then((t=>{if(this.profilesLoading=!1,console.log(t.data),1==t.data.status){this.profilesRows=t.data.profiles,this.profilesTotalItems=t.data.totalItems;let e=[];this.profilesRows.forEach((t=>{this.allSelected[t.email]&&e.push(t)})),this.profilesSelected=e}else console.log(`status: ${t.data.status}`),this.$router.push("/Login")})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},applyDateRange:function(t){let e;for(const a of this.dateRanges)if(a.value==t){e=a;break}e?(e.dvalue?(this.fromDate=e.dvalue.from,this.toDate=e.dvalue.to,this.customdDateRange=!1):this.customdDateRange=!0,this.selectedDateRange=t,console.log(`applyDateRange. from ${this.fromDate}, to: ${this.toDate}, val: ${t}, selectedDateRange: ${this.selectedDateRange}`)):console.error(`Error date range not found for value: ${t}`)},dateRangeChanged:function(t){this.applyDateRange(t),this.loadRecordings()},dateChanged:function(){this.customdDateRange&&this.loadRecordings()},loadRecordings:function(){this.headers=[{text:this.$t("Start"),value:"start_time"},{text:this.$t("End"),value:"end_time"},{text:this.$t("Seconds"),value:"active_seconds"},{text:this.$t("Email"),value:"session_history.email"},{text:this.$t("First Name"),value:"session_history.user.firstname",sortable:!1},{text:this.$t("Last Name"),value:"session_history.user.lastname",sortable:!1},{text:this.$t("Device ID"),value:"session_history.device_id"},{text:this.$t("Device Name"),value:"session_history.devicename"},{text:"Actions",value:"actions",sortable:!1}];let t=c().format("YYYY-MM-DD");this.dateRanges=[{value:"this_day",text:"Today",dvalue:{from:t,to:t}},{value:"last_7_days",text:"Last 7 days",dvalue:{from:c().subtract(7,"days").format("YYYY-MM-DD"),to:t}},{value:"this_month",text:"This month",dvalue:{from:c().startOf("month").format("YYYY-MM-DD"),to:t}},{value:"last_month",text:"Last month",dvalue:{from:c().subtract(1,"months").format("YYYY-MM-DD"),to:t}},{value:"this_year",text:"This year",dvalue:{from:c().startOf("year").format("YYYY-MM-DD"),to:t}},{value:"last_12_months",text:"Last 12 months",dvalue:{from:c().subtract(12,"months").format("YYYY-MM-DD"),to:t}},{value:"custom",text:"Custom"}],console.log(`loadRecordings: ${o.Z.mainDomain}`),this.selectedDateRange||(this.selectedDateRange=this.dateRanges[3].value),this.applyDateRange(this.selectedDateRange);let e=this.options.itemsPerPage>0?this.options.itemsPerPage:1e4,a=(this.options.page-1)*e,i={from:this.fromDate,to:this.toDate,offset:a,limit:e,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,search:this.search};n.Z.get({url:"api/recordings",params:i}).then((t=>{console.log(t.data),1==t.data.status?(console.log(`status: ${t.data.status}`),this.rows=t.data.results,this.totalItems=t.data.count,this.savePage()):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},updateOptions:function(t){console.log(`updateOptions: ${t}`),this.savePage(),this.loadRecordings()},prepare:function(t){console.log(`prepare: ${JSON.stringify(t,null,2)}`),this.prepDialog=!0,this.playItem=t,n.Z.post({url:`api/recordings/${t.session_id}/${t.start_time}`}).then((t=>{if(console.log(t.data),1==t.data.status)console.log("File is ready!"),this.prepDialog=!1,this.play();else if(2==t.data.status){console.log("Preparing file...");let e=t.data.notifToken;this.scheduleLongOperCheck(e)}else console.log(`status: ${t.data.status}`),this.prepDialog=!1,this.snackbarSave=!0,this.snackbarText=this.$t("Error")})).catch((t=>{console.log(t),this.snackbarSave=!0,this.snackbarText=this.$t("Error")}))},scheduleLongOperCheck:function(t){console.log("scheduleLongOperCheck: "+t),n.Z.get({url:"api/longOperations/"+t}).then((e=>{console.log(e.data),50==e.data.status||2==e.data.status?setTimeout(this.scheduleLongOperCheck,1e3,t):1==e.data.status?(console.log("response.data.status == 1"),this.prepDialog=!1,this.play()):(console.log("response.data.status != 1"),this.prepDialog=!1,this.snackbarSave=!0,this.snackbarText=this.$t("Error"))})).catch((t=>{console.log(t),this.prepDialog=!1,this.snackbarSave=!0,this.snackbarText=this.$t("Error")}))},downloadVideo:function(){let t=`api/recordings/${this.playItem.session_id}/${this.playItem.start_time}?download=Y`;console.log(`downloadVideo: ${t}`),n.Z.get({url:t,responseType:"blob"}).then((t=>{const e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=e,a.setAttribute("download",`recording_${this.playItem.session_history.email}_${this.playItem.start_time}.mp4`),document.body.appendChild(a),a.click()})).catch((t=>{console.log(t),this.snackbarSave=!0,this.snackbarText=this.$t("Download Error")}))},play:function(){let t=`api/recordings/${this.playItem.session_id}/${this.playItem.start_time}?adminLoginToken=${o.Z.adminLoginToken}`;o.Z.postURL&&(t=o.Z.postURL+t),this.playDialog=!0,this.art&&(this.art.destroy(),this.art=null);const e=this;setTimeout((()=>{this.art=new(l())({container:"#artplayer-app",url:t,autoplay:!0,autoSize:!0,fullscreen:!0,screenshot:!0,layers:[{index:1,name:"timestamp",disable:!1,html:`<div id="vidts">${this.playItem.start_time}</div>`,style:{position:"absolute",top:"20px",right:"20px",opacity:".9",backgroundColor:"#000000"}}],controls:[{position:"right",html:'<i class="art-icon mdi mdi-download player-icon" />',click:function(){console.log("Download!"),e.downloadVideo()}}]});let a=new Date(this.playItem.start_time).getTime()/1e3;this.art.on("video:timeupdate",(()=>{let t=c(new Date(1e3*(a+this.art.currentTime))).format("LL LTS");document.getElementById("vidts").textContent=`${t}`})),console.log(`url: ${t}`)}),1e3)}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Recordings"),to:"/Recordings",disabled:!1}];this.$emit("updatePage",t),this.numberRules=[t=>!isNaN(t)||this.$t("Please enter a valid number")],n.Z.loadPageData(`${d.name}`,this)},watch:{tab:function(t){console.log(`tab: ${t}`),this.savePage(),0==t?this.loadSettings():1==t&&this.loadRecordings()},search:function(t){console.log(`search: ${t}`),this.savePage(),(t.length>1||0==t.length)&&this.loadRecordings()},toDate(t){this.customdDateRange&&(console.log(`toDate watch: ${t}`),this.loadRecordings())},fromDate(t){this.customdDateRange&&(console.log(`fromDate watch: ${t}`),this.loadRecordings())},profileSearch:function(t){console.log(`profileSearch: ${t}`),this.savePage(),(t.length>1||0==t.length)&&this.refreshProfiles()},profilesSelected:function(t){console.log(`profilesSelected: ${JSON.stringify(t,null,2)}`);let e={};t.forEach((t=>{e[t.email]=t.email})),Object.assign(this.allSelected,e),this.profilesRows.forEach((t=>{e[t.email]||delete this.allSelected[t.email]})),Object.keys(this.allSelected).length>0?this.addSelectedDisabled=!1:this.addSelectedDisabled=!0}}};var u=d,h=u,p=a(1001),m=a(3453),v=a.n(m),f=a(3150),g=a(2371),b=a(7118),y=a(3702),k=a(2102),x=a(4228),w=a(4998),$=a(4484),S=a(4497),D=a(6232),_=a(6428),C=a(6768),T=a(7003),P=a(2877),A=a(7032),O=a(3202),I=a(9762),R=a(4227),Z=a(1759),E=a(8697),V=a(1954),L=a(1208),N=a(5978),j=a(6656),F=a(7921),B=(0,p.Z)(h,i,s,!1,null,null,null),M=B.exports;v()(B,{VBtn:f.Z,VCard:g.Z,VCardText:b.ZB,VCardTitle:b.EB,VCheckbox:y.Z,VCol:k.Z,VContainer:x.Z,VDataTable:w.Z,VDatePicker:$.Z,VDialog:S.Z,VForm:D.Z,VIcon:_.Z,VMenu:C.Z,VProgressLinear:T.Z,VRow:P.Z,VSelect:A.Z,VSnackbar:O.Z,VSpacer:I.Z,VTab:R.Z,VTabItem:Z.Z,VTabs:E.Z,VTabsItems:V.Z,VTabsSlider:L.Z,VTextField:N.Z,VToolbar:j.Z,VToolbarTitle:F.qW})},7864:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return A}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[t.reportCode&&""!=t.reportCode?a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.reportName)+" ")]),t.hasDateRange?a("v-card-title",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-select",{attrs:{items:t.dateRanges,label:t.$t("Time Period"),value:t.selectedDateRange},on:{change:t.dateRangeChanged}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t.customdDateRange?a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"From","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}},"v-text-field",s,!1),i))]}}],null,!1,3323294146),model:{value:t.fromMenu,callback:function(e){t.fromMenu=e},expression:"fromMenu"}},[a("v-date-picker",{on:{input:function(e){t.fromMenu=!1}},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1):t._e()],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[t.customdDateRange?a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"To","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}},"v-text-field",s,!1),i))]}}],null,!1,1337146914),model:{value:t.toMenu,callback:function(e){t.toMenu=e},expression:"toMenu"}},[a("v-date-picker",{on:{input:function(e){t.toMenu=!1}},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1):t._e()],1)],1)],1):t._e(),a("v-card-title",[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:function(e){return t.downloadCSV()}}},[t._v(" "+t._s(t.$t("Download CSV"))+" "),a("v-icon",{attrs:{right:"",dark:""}},[t._v(" mdi-microsoft-excel ")])],1)],1),t.hasChart?a("v-card-title",[a("bar-chart",{attrs:{"chart-data":t.chartData,options:t.chartOptions,width:1e3,height:300}})],1):t._e(),a("v-data-table",{staticClass:"ma-4 bg",attrs:{headers:t.headers,items:t.rows,loading:t.loading,search:t.search,options:t.options,"multi-sort":""},on:{"update:options":[function(e){t.options=e},t.updateOptions],"current-items":t.getFiltered},scopedSlots:t._u([{key:"item.Insert_Time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.Insert_Time).format("LLL"))+" ")]}},{key:"item.Start_Time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.Start_Time).format("LLL"))+" ")]}},{key:"item.End_Time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.End_Time).format("LLL"))+" ")]}},{key:"item.Session_Duration",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.getHHMM(a.Session_Duration))+" ")]}},{key:"item.Event_Time",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.moment(a.Event_Time).format("LLL"))+" ")]}}],null,!0)})],1):a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Reports"))+" ")]),a("v-data-table",{staticClass:"ma-4 bg",attrs:{color:"bg",headers:t.reportsHeaders,items:t.items,"sort-by":t.sortBy,"sort-desc":t.sortDesc},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},"click:row":t.openReport},scopedSlots:t._u([{key:"item.text",fn:function(e){var i=e.item;return[a("v-icon",{domProps:{textContent:t._s(i.icon)}}),t._v("   "+t._s(i.text)+" ")]}},{key:"item.icon",fn:function(e){var i=e.item;return[a("v-icon",{domProps:{textContent:t._s(i.icon)}})]}}],null,!0)})],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144),r=a(6663);const{reactiveProp:l}=r.tA;var c={extends:r.$Q,mixins:[l],props:["options"],mounted(){this.renderChart(this.chartData,this.options)}};const d=a(381);var u={name:"ReportsPage",components:{BarChart:c},data:()=>({selectedItem:-1,items:[],reportsHeaders:[],sortBy:"text",sortDesc:!1,headers:[],rows:[],options:{},loading:!0,snackbarSave:!1,snackbarText:"",reportCode:null,search:"",moment:d,appData:o.Z,filteredItems:"",hasDateRange:!1,dateRanges:[],selectedDateRange:"",customdDateRange:!1,fromDate:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),fromMenu:!1,toDate:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),toMenu:!1,hasChart:!1,chartData:{},chartOptions:{responsive:!0,aspectRatio:2}}),methods:{openReport:function(t){console.log("Open report: "+t),this.$router.push("/Report/"+t.reportCode)},applyDateRange:function(t){let e;for(const a of this.dateRanges)if(a.value==t){e=a;break}e?(e.dvalue?(this.fromDate=e.dvalue.from,this.toDate=e.dvalue.to,this.customdDateRange=!1):this.customdDateRange=!0,this.selectedDateRange=t,console.log(`applyDateRange. from ${this.fromDate}, to: ${this.toDate}, val: ${t}, selectedDateRange: ${this.selectedDateRange}`)):console.error(`Error date range not found for value: ${t}`)},dateRangeChanged:function(t){this.applyDateRange(t),this.refresh()},dateChanged:function(){this.customdDateRange&&this.refresh()},updateOptions(){console.log(`Update options: ${JSON.stringify(this.options,null,2)}`),this.savePage()},getFiltered(t){this.filteredItems=t},downloadCSV:function(){console.log("downloadCSV..");let t=document.querySelector("#download-csv");t&&document.body.removeChild(t);let e="",a=this.headers.length,i=0;this.headers.forEach((t=>{e+=t.text+(i+1<a?",":""),i++})),e+="\r\n";for(let o=0;o<this.filteredItems.length;o++){let t=Object.keys(this.filteredItems[o]).length,a=0;this.headers.forEach((i=>{let s=this.rows[o][i.value];console.log("head.value: "+i.value),"Insert_Time"==i.value&&(s=d(s).format("LLL")),e+='"'+s+'"'+(a+1<t?",":"\r\n"),a++})),a=0}let s=document.createElement("a");s.id="download-csv",s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),s.setAttribute("download",this.reportName+".csv"),document.body.appendChild(s),document.querySelector("#download-csv").click()},getHHMM:function(t){return`${parseInt(t/60)}:${(t%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}`},savePage:function(){n.Z.savePageData(`report_${this.reportCode}`,this,["options","search","selectedDateRange","fromDate","toDate"])},refresh:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Reports"),to:"/Reports",disabled:!1}];if(!this.reportCode||""==this.reportCode)return void this.$emit("updatePage",t);this.items.forEach((t=>{t.reportCode==this.reportCode&&(this.reportName=t.text,this.hasDateRange=t.hasDateRange,this.hasChart=t.hasChart)}));let e={};this.hasDateRange&&(this.selectedDateRange||(this.selectedDateRange=this.dateRanges[3].value,this.applyDateRange(this.selectedDateRange)),e={from:this.fromDate,to:this.toDate}),t.push({text:this.reportName,to:"/Report/"+this.reportCode,disabled:!1}),this.$emit("updatePage",t),this.loading=!0,n.Z.get({url:"api/reports/"+this.reportCode,params:e}).then((t=>{if(console.log(t.data),1==t.data.status){if(console.log(`status: ${t.data.status}`),this.loading=!1,this.rows=[],this.headers=[],t.data.headers.forEach((t=>{let e=t.replace(/ /g,"_"),a={text:t,value:e};this.headers.push(a)})),t.data.values.forEach((e=>{let a={};e.forEach(((e,i)=>{let s=t.data.headers[i].replace(/ /g,"_");a[s]=e})),this.rows.push(a)})),this.hasChart){this.chartOptions={scales:{yAxes:[{ticks:{suggestedMin:0}}]}};let e=t.data.values.map((t=>t[1])),a=t.data.values.map((t=>t[0])),i=this.$vuetify.theme.themes.light;this.chartData={datasets:[{data:e,backgroundColor:i.primary,label:this.headers[1].text,fill:!1}],labels:a},this.height=100}this.savePage()}else console.log(`status: ${t.data.status}`),this.$router.push("/Login")})).catch((t=>{console.log(t),this.$router.push("/Login")}))}},watch:{$route(t){console.log(t),this.reportCode=t.params.reportCode,this.reportCode&&(n.Z.loadPageData(`report_${this.reportCode}`,this),this.selectedDateRange&&this.applyDateRange(this.selectedDateRange)),this.refresh()},toDate(t){this.customdDateRange&&(console.log(`toDate watch: ${t}`),this.refresh())},fromDate(t){this.customdDateRange&&(console.log(`fromDate watch: ${t}`),this.refresh())},search(t){console.log(`search watch: ${t}`),this.savePage()}},created:function(){this.reportCode=this.$route.params.reportCode;let t=d().format("YYYY-MM-DD");this.dateRanges=[{value:"this_day",text:"Today",dvalue:{from:t,to:t}},{value:"last_7_days",text:"Last 7 days",dvalue:{from:d().subtract(7,"days").format("YYYY-MM-DD"),to:t}},{value:"this_month",text:"This month",dvalue:{from:d().startOf("month").format("YYYY-MM-DD"),to:t}},{value:"last_month",text:"Last month",dvalue:{from:d().subtract(1,"months").format("YYYY-MM-DD"),to:t}},{value:"this_year",text:"This year",dvalue:{from:d().startOf("year").format("YYYY-MM-DD"),to:t}},{value:"last_12_months",text:"Last 12 months",dvalue:{from:d().subtract(12,"months").format("YYYY-MM-DD"),to:t}},{value:"custom",text:"Custom"}],this.reportCode&&(n.Z.loadPageData(`report_${this.reportCode}`,this),this.selectedDateRange&&this.applyDateRange(this.selectedDateRange)),this.reportsHeaders=[{text:this.$t("Report"),value:"text"}],this.items=[{text:this.$t("Blocked/Disabled Logins"),icon:"mdi-account-off",reportCode:"8",hasDateRange:!0,hasChart:!1},{text:this.$t("Active users"),icon:"mdi-account-check",reportCode:"3",hasDateRange:!1},{text:this.$t("App list by user"),icon:"mdi-apps",reportCode:"1"},{text:this.$t("Number of users per platform"),icon:"mdi-account-multiple-outline",reportCode:"2",hasDateRange:!1},{text:this.$t("App usage by user"),icon:"mdi-book-clock",reportCode:"4",hasDateRange:!1},{text:this.$t("Session Report"),icon:"mdi-clipboard-list-outline",reportCode:"5",hasDateRange:!0},{text:this.$t("Daily Active Sessions"),icon:"mdi-calendar-multiple-check",reportCode:"6",hasDateRange:!0,hasChart:!0},{text:this.$t("Daily Active Users"),icon:"mdi-account-details",reportCode:"7",hasDateRange:!0,hasChart:!0}],this.refresh()}},h=u,p=a(1001),m=a(3453),v=a.n(m),f=a(3150),g=a(2371),b=a(7118),y=a(2102),k=a(4998),x=a(4484),w=a(6428),$=a(6768),S=a(2877),D=a(7032),_=a(3202),C=a(9762),T=a(5978),P=(0,p.Z)(h,i,s,!1,null,null,null),A=P.exports;v()(P,{VBtn:f.Z,VCard:g.Z,VCardTitle:b.EB,VCol:y.Z,VDataTable:k.Z,VDatePicker:x.Z,VIcon:w.Z,VMenu:$.Z,VRow:S.Z,VSelect:D.Z,VSnackbar:_.Z,VSpacer:C.Z,VTextField:T.Z})},1946:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Q}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":"",flat:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"approval"},[t._v(" Device approval ")]),a("v-tab",{key:"auth"},[t._v(" Authentication ")]),t.appData.isMobile()?a("v-tab",{key:"rules"},[t._v(" Device Rules ")]):t._e()],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(" "+t._s(t.$t("Security Settings"))+" ")]),a("v-spacer")],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"approval"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg",tile:""}},[a("v-card-title",[t._v(t._s(t.$t("Device approval options")))]),a("v-form",{ref:"formApproval",model:{value:t.validFormApproval,callback:function(e){t.validFormApproval=e},expression:"validFormApproval"}},[a("v-radio-group",{staticClass:"mx-4 my-0",attrs:{column:""},model:{value:t.deviceApproval.deviceApprovalType,callback:function(e){t.$set(t.deviceApproval,"deviceApprovalType",e)},expression:"deviceApproval.deviceApprovalType"}},[a("v-radio",{staticClass:"mb-4",attrs:{label:"Automatically approve/reset devices",value:"0"}}),a("v-radio",t._g({staticClass:"mb-4",attrs:{label:"Manualy approve/reset devices",value:"1"}},t.on)),a("v-radio",t._g({attrs:{label:"Both",value:"2"}},t.on))],1),"0"!=t.deviceApproval.deviceApprovalType?a("v-sheet",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Notify admins by:")))]),a("v-radio-group",{staticClass:"mx-4 my-0",attrs:{column:""},on:{change:t.notifTypeChange},model:{value:t.notifType,callback:function(e){t.notifType=e},expression:"notifType"}},[a("v-radio",{staticClass:"mb-4",attrs:{label:t.$t("Push notification to admins devices"),value:"pushnotif"}}),a("v-radio",t._g({attrs:{label:t.$t("Email to a dedicated email address"),value:"emailnotif"}},t.on))],1),"emailnotif"==t.notifType?a("v-text-field",{staticClass:"mx-8 my-0",attrs:{label:"Email",rules:t.emailRules,required:""},model:{value:t.deviceApproval.notifierAdmin,callback:function(e){t.$set(t.deviceApproval,"notifierAdmin",e)},expression:"deviceApproval.notifierAdmin"}}):t._e()],1):t._e(),a("v-btn",{staticClass:"ma-4",attrs:{color:"primary",loading:t.updateDeviceApprovalLoading},on:{click:t.updateDeviceApproval}},[t._v("Save ")])],1)],1)],1),a("v-tab-item",{key:"auth"},[a("v-card",{staticClass:"ma-0",attrs:{flat:"",color:"bg"}},[a("v-form",{ref:"formAuth",model:{value:t.validFormAuth,callback:function(e){t.validFormAuth=e},expression:"validFormAuth"}},[a("v-select",{staticClass:"ma-4",attrs:{items:t.authFactors,label:t.$t("Authentication methods")},model:{value:t.authentication.clientauthtype,callback:function(e){t.$set(t.authentication,"clientauthtype",e)},expression:"authentication.clientauthtype"}}),1==t.authentication.clientauthtype||3==t.authentication.clientauthtype||4==t.authentication.clientauthtype?a("v-container",[a("v-card-subtitle",[t._v(t._s(t.$t("Password options")))]),a("v-radio-group",{staticClass:"mx-4 my-0",attrs:{column:""},model:{value:t.authentication.passcodeType,callback:function(e){t.$set(t.authentication,"passcodeType",e)},expression:"authentication.passcodeType"}},[a("v-radio",{staticClass:"mb-4",attrs:{label:t.$t("Passcode (digits)"),value:"0"}}),a("v-radio",{staticClass:"mb-4",attrs:{label:t.$t("Password (contains characters)"),value:"1"}})],1),"1"==t.authentication.passcodeType?a("v-container",[a("v-card-subtitle",[t._v(t._s(t.$t("Password requirements")))]),a("v-card-text",{staticClass:"shrink"},[a("div",[t._v(" "+t._s(t.$t("- Use upper-case or lower-case letters (case sensitive)"))+" ")]),a("div",[t._v(t._s(t.$t("- Include one or more numerical digits")))]),a("div",[t._v(" "+t._s(t.$t("- Include one or more special characters:"))+" ><)(&$+;:=?@#|.^*_~{}%!-' ")])])],1):t._e(),a("v-sheet",{attrs:{color:"bg"}},[a("v-card-subtitle",[t._v(t._s(t.$t("Password minimum length")))]),a("v-row",{staticClass:"mx-4 my-0"},[a("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[a("v-text-field",{staticClass:"shrink",attrs:{dense:"",rules:t.passLengthRules,required:"",label:t.$t("Password length")},model:{value:t.authentication.passcodeMinChars,callback:function(e){t.$set(t.authentication,"passcodeMinChars",e)},expression:"authentication.passcodeMinChars"}})],1)],1),a("v-card-subtitle",[t._v(t._s(t.$t("Set Expiration Time")))]),a("v-card-subtitle",[t._v(t._s(t.$t("Ask users to change password every (insert 0 for unlimited)")))]),a("v-row",{staticClass:"mx-4 my-0"},[a("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[a("number-input",{attrs:{step:1,inline:"",controls:""}}),a("v-text-field",{staticClass:"shrink>",attrs:{dense:"",rules:t.numberRules,required:"",label:t.$t("Expiration days")},model:{value:t.authentication.passcodeExpirationDays,callback:function(e){t.$set(t.authentication,"passcodeExpirationDays",e)},expression:"authentication.passcodeExpirationDays"}})],1)],1)],1)],1):t._e(),2==t.authentication.clientauthtype||3==t.authentication.clientauthtype||4==t.authentication.clientauthtype?a("v-container",[a("v-select",{staticClass:"ma-4",attrs:{items:t.secondFactorMethods,label:t.$t("Second factor authentication methods")},model:{value:t.authentication.secondauthmethod,callback:function(e){t.$set(t.authentication,"secondauthmethod",e)},expression:"authentication.secondauthmethod"}})],1):t._e(),(2==t.authentication.clientauthtype||3==t.authentication.clientauthtype||4==t.authentication.clientauthtype)&&t.authentication.secondauthmethod>1?a("v-container",[a("v-select",{staticClass:"ma-4",attrs:{items:t.otpTypes,label:t.$t("OTP methods")},model:{value:t.authentication.otptype,callback:function(e){t.$set(t.authentication,"otptype",e)},expression:"authentication.otptype"}})],1):t._e(),a("v-btn",{staticClass:"ma-4",attrs:{color:"primary",loading:t.loadingUpdateAuth},on:{click:t.updateAuthentication}},[t._v("Save ")])],1)],1)],1),a("v-tab-item",{key:"rules",staticClass:"bg"},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Rules List"))+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"ma-4 bg",attrs:{color:"bg",headers:t.deviceRulesHead,items:t.deviceRules.blockedDevices,search:t.search,loading:t.loading},on:{"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:function(e){t.ruleDialog=!0}}},[t._v(t._s(t.$t("New Rule")))])],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mx-2",attrs:{small:""},on:{click:function(e){return t.deleteDeviceRule(i,e)}}},[t._v(" mdi-delete ")])]}}],null,!0)}),a("v-dialog",{attrs:{"overlay-color":"bg","max-width":"800px"},model:{value:t.ruleDialog,callback:function(e){t.ruleDialog=e},expression:"ruleDialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(t._s(t.$t("Add Rule")))]),a("v-form",{ref:"formAddRule",model:{value:t.validFormAddRule,callback:function(e){t.validFormAddRule=e},expression:"validFormAddRule"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{staticClass:"mx-8 my-0",attrs:{label:"Rule Title",rules:t.reqRules,required:""},model:{value:t.addRuleTitle,callback:function(e){t.addRuleTitle=e},expression:"addRuleTitle"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-text-field",{staticClass:"mx-8 my-0",attrs:{label:"Filter",rules:t.reqRules,required:""},model:{value:t.addRuleFilter,callback:function(e){t.addRuleFilter=e},expression:"addRuleFilter"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[a("v-btn",{staticClass:"ma-4",attrs:{color:"primary",loading:t.addRuleLoading},on:{click:t.addDeviceRule}},[t._v("Save ")])],1)],1)],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"690"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.$t("WarningPasswordOptionChange"))+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"error darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" "+t._s(t.$t("No"))+" ")]),a("v-btn",{attrs:{color:"success darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" "+t._s(t.$t("Yes"))+" ")])],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);let r={name:"EmailSetup",data:()=>({tab:{},deviceApproval:{},authentication:{},deviceRules:{},loading:!0,snackbarSave:!1,snackbarText:"",approveType:"selfapprove",notifType:"pushnotif",emailRules:[],numberRules:[],passLengthRules:[],deviceRulesHead:[],search:"",ruleDialog:!1,updateDeviceApprovalLoading:!1,validFormApproval:null,loadingUpdateAuth:!1,validFormAuth:null,dialog:!1,validFormAddRule:!1,addRuleTitle:"",addRuleFilter:"",addRuleLoading:!1,reqRules:[],appData:o.Z}),methods:{notifTypeChange:function(t){"pushnotif"==t?this.deviceApproval.notifierAdmin="PUSH@nubo.local":"PUSH@nubo.local"==this.deviceApproval.notifierAdmin&&(this.deviceApproval.notifierAdmin="")},refresh:function(){n.Z.get({url:"api/security/deviceApproval"}).then((t=>{console.log(`deviceApproval: ${JSON.stringify(t.data,null,2)}`),1==t.data.status?(console.log(`status: ${t.data.status}`),this.deviceApproval=t.data,this.deviceApproval.deviceApprovalType=this.deviceApproval.deviceApprovalType.toString(10),"PUSH@nubo.local"==this.deviceApproval.notifierAdmin?this.notifType="pushnotif":this.notifType="emailnotif"):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1)),n.Z.get({url:"api/security/authentication"}).then((t=>{console.log(`authentication: ${JSON.stringify(t.data,null,2)}`),1==t.data.status?(console.log(`status: ${t.data.status}`),this.authentication=t.data,1==this.authentication.passcodeType||"1"==this.authentication.passcodeType?this.authentication.passcodeType="1":this.authentication.passcodeType="0"):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1)),n.Z.get({url:"api/security/deviceRules"}).then((t=>{console.log(`deviceRules: ${JSON.stringify(t.data,null,2)}`),1==t.data.status?(console.log(`status: ${t.data.status}`),this.deviceRules=t.data):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},updateDeviceApproval:function(){this.$refs.formApproval.validate(),this.validFormApproval&&(this.updateDeviceApprovalLoading=!0,n.Z.post({url:"api/security/deviceApproval",data:this.deviceApproval}).then((t=>{this.updateDeviceApprovalLoading=!1,console.log(`updateDeviceApproval: ${JSON.stringify(t.data,null,2)}`),1==t.data.status?(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Device approval updated"),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error")+" - "+t.data.message,this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1)))},updateAuthentication:function(){if(this.$refs.formAuth.validate(),!this.validFormAuth)return;this.loadingUpdateAuth=!0;let t={passcodeType:this.authentication.passcodeType,minChars:this.authentication.passcodeMinChars,expirationDays:this.authentication.passcodeExpirationDays.toString(10),clientauthtype:this.authentication.clientauthtype,secondauthmethod:this.authentication.secondauthmethod,otptype:this.authentication.otptype};console.log("updateAuthentication: "+JSON.stringify(t)),n.Z.post({url:"api/security/authentication",data:t}).then((t=>{this.loadingUpdateAuth=!1,console.log(`updateAuthentication: ${JSON.stringify(t.data,null,2)}`),1==t.data.status?(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Authentication method updated"),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error")+" - "+t.data.message,this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},addDeviceRule:function(){if(this.$refs.formAddRule.validate(),!this.validFormAddRule)return;let t={ruleName:this.addRuleTitle,filterName:this.addRuleFilter};this.addRuleLoading=!0,n.Z.put({url:"api/security/deviceRules",data:t}).then((t=>{console.log(`addDeviceRule: ${JSON.stringify(t.data,null,2)}`),this.addRuleLoading=!1,1==t.data.status?(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Device rule was added"),this.snackbarSave=!0,this.refresh(),this.addRuleTitle="",this.addRuleFilter="",this.ruleDialog=!1):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error")+" - "+t.data.message,this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},updateDeviceRule:function(t,e){let a={ruleid:t,filterName:e};n.Z.post({url:"api/security/deviceRules",data:a}).then((t=>{console.log(`updateDeviceRule: ${JSON.stringify(t.data,null,2)}`),1==t.data.status?(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Device rule was updated"),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error")+" - "+t.data.message,this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))},deleteDeviceRule:function(t){let e={ruleid:t.ruleId,ruleName:t.ruleName,filterName:t.filterName};n.Z["delete"]({url:"api/security/deviceRules",data:e}).then((t=>{console.log(`deleteDeviceRule: ${JSON.stringify(t.data,null,2)}`),1==t.data.status?(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Device rule was deleted"),this.snackbarSave=!0,this.refresh()):(console.log(`status: ${t.data.status}`),this.snackbarText=this.$t("Error")+" - "+t.data.message,this.snackbarSave=!0)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Security Settings"),to:"/Security",disabled:!1}];this.$emit("updatePage",t),this.reqRules=[t=>!!t||this.$t("Field is required")],this.emailRules=[t=>!!t||this.$t("Email is required"),t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(t)||this.$t("Email must be valid")],this.numberRules=[t=>!isNaN(t)||this.$t("Please enter a valid number")],this.passLengthRules=[t=>!isNaN(t)||this.$t("Please enter a valid number"),t=>t>=6&&t<=18||this.$t("Valid range: 6 - 18")],this.deviceRulesHead=[{text:this.$t("Title"),value:"ruleName"},{text:this.$t("Filter"),value:"filterName"},{text:this.$t("Actions"),value:"actions",sortable:!1}],this.authFactors=[{text:this.$t("None"),value:0},{text:this.$t("Password only"),value:1},{text:this.$t("Biometric/OTP only"),value:2},{text:this.$t("Both password and biometric/OTP"),value:3},{text:this.$t("Password or biometric/OTP"),value:4}],this.secondFactorMethods=[{text:this.$t("Biometric only"),value:1},{text:this.$t("OTP only"),value:2},{text:this.$t("Biometric or OTP"),value:3}],this.otpTypes=[{text:this.$t("Time-based One-time Password (TOTP)"),value:0},{text:this.$t("SMS"),value:1}],this.refresh()}};var l=r,c=l,d=a(1001),u=a(3453),h=a.n(u),p=a(3150),m=a(2371),v=a(7118),f=a(2102),g=a(4228),b=a(4998),y=a(4497),k=a(6232),x=a(6428),w=a(5097),$=a(172),S=a(8230),D=a(6210),_=a(6952),C=a(7352),T=a(9155),P=a(8085),A=a(7764),O=a(4589),I=a(3325),R=a(6290);const Z=(0,I.Z)(D.Z,_.Z,T.Z,(0,C.d)("radioGroup"),P.Z);var E=Z.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:()=>({isFocused:!1}),computed:{classes(){return{"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused,...this.themeClasses,...this.groupClasses}},computedColor(){return A.Z.options.computed.computedColor.call(this)},computedIcon(){return this.isActive?this.onIcon:this.offIcon},computedId(){return S.Z.options.computed.computedId.call(this)},hasLabel:S.Z.options.computed.hasLabel,hasState(){return(this.radioGroup||{}).hasState},isDisabled(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||`radio-${this.radioGroup._uid}`},rippleState(){return A.Z.options.computed.rippleState.call(this)},validationState(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput(t){return A.Z.options.methods.genInput.call(this,"radio",t)},genLabel(){return this.hasLabel?this.$createElement(w.Z,{on:{click:A.X},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},(0,O.z9)(this,"label")||this.label):null},genRadio(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement($.Z,this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput({name:this.computedName,value:this.value,...e}),this.genRipple(this.setTextColor(this.rippleState))])},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onChange(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:()=>{}},render(t){const e={staticClass:"v-radio",class:this.classes,on:(0,R.bp)({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return t("div",e,[this.genRadio(),this.genLabel()])}}),V=(a(2245),a(4622));const L=(0,I.Z)(V.y,S.Z);var N=L.extend({name:"v-radio-group",provide(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes(){return{...S.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row}}},methods:{genDefaultSlot(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},S.Z.options.methods.genDefaultSlot.call(this))},genInputSlot(){const t=S.Z.options.methods.genInputSlot.call(this);return delete t.data.on.click,t},genLabel(){const t=S.Z.options.methods.genLabel.call(this);return t?(t.data.attrs.id=this.computedId,delete t.data.attrs.for,t.tag="legend",t):null},onClick:V.y.options.methods.onClick},render(t){const e=S.Z.options.render.call(this,t);return this._b(e.data,"div",this.attrs$),e}}),j=a(2877),F=a(7032),B=a(3385),M=a(3202),z=a(9762),U=a(4227),H=a(1759),W=a(8697),q=a(1954),G=a(1208),Y=a(5978),K=a(6656),J=a(7921),X=(0,d.Z)(c,i,s,!1,null,null,null),Q=X.exports;h()(X,{VBtn:p.Z,VCard:m.Z,VCardActions:v.h7,VCardSubtitle:v.Qq,VCardText:v.ZB,VCardTitle:v.EB,VCol:f.Z,VContainer:g.Z,VDataTable:b.Z,VDialog:y.Z,VForm:k.Z,VIcon:x.Z,VRadio:E,VRadioGroup:N,VRow:j.Z,VSelect:F.Z,VSheet:B.Z,VSnackbar:M.Z,VSpacer:z.Z,VTab:U.Z,VTabItem:H.Z,VTabs:W.Z,VTabsItems:q.Z,VTabsSlider:G.Z,VTextField:Y.Z,VToolbar:K.Z,VToolbarTitle:J.qW})},6116:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return A}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{color:"bg"}},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tabs-slider",{attrs:{color:"primary"}}),a("v-tab",{key:"list"},[t._v(" "+t._s(t.$t("Devices"))+" ")])],1)]},proxy:!0}])},[a("v-toolbar-title",[t._v(" "+t._s(t.$t("Telephony")))]),a("v-spacer")],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{key:"list",staticClass:"bg"},[a("v-data-table",{staticClass:"ma-4 bg",attrs:{color:"bg",headers:t.headers,items:t.rows,"server-items-length":t.totalItems,"items-per-page":5,loading:t.loading,options:t.options,search:t.search,"multi-sort":"","show-select":"","item-key":"item_key"},on:{"update:options":[function(e){t.options=e},t.updateOptions],"click:row":t.rowClick},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"bg"}},[t.selectedDevices.length>0&&t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:function(e){return t.setExtension(!0)}}},[t._v(t._s(t.$t("Add Local Extension"))+" ")]):t._e(),t.selectedDevices.length>0&&t.appData.checkPermission("/profiles","w")?a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:function(e){t.dialogRemoveExtension=!0}}},[t._v(t._s(t.$t("Remove Local Extension"))+" ")]):t._e(),1!=t.selectedDevices.length||!t.appData.checkPermission("@/","rw")||t.selectedDevices[0].assigned_phone_number&&""!=t.selectedDevices[0].assigned_phone_number?t._e():a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:function(e){return t.addExternalNumber()}}},[t._v(t._s(t.$t("Add External Number"))+" ")]),1==t.selectedDevices.length&&t.appData.checkPermission("@/","rw")&&t.selectedDevices[0].assigned_phone_number&&""!=t.selectedDevices[0].assigned_phone_number?a("v-btn",{staticClass:"ma-4",attrs:{color:"primary"},on:{click:function(e){t.dialogRemoveExternal=!0}}},[t._v(t._s(t.$t("Remove External Number"))+" ")]):t._e(),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.last_login",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.last_login?t.moment(a.last_login).format("LLL"):"")+" ")]}}],null,!0),model:{value:t.selectedDevices,callback:function(e){t.selectedDevices=e},expression:"selectedDevices"}})],1),a("v-tab-item",{key:"settings",staticClass:"bg"})],1),a("v-dialog",{attrs:{"overlay-color":"bg","max-width":"800px"},model:{value:t.numberDialog,callback:function(e){t.numberDialog=e},expression:"numberDialog"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-title",[t._v(" "+t._s(t.$t("Select Number"))+" ")]),a("v-data-table",{staticClass:"elevation-1 ma-4 bg",attrs:{headers:t.numberHeaders,items:t.numberRows,loading:t.numberLoading,"items-per-page":5},on:{"click:row":t.numberClick}})],1)],1),a("v-dialog",{attrs:{"max-width":"500px",color:"bg"},model:{value:t.dialogRemoveExternal,callback:function(e){t.dialogRemoveExternal=e},expression:"dialogRemoveExternal"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-subtitle",{staticClass:"headline"},[t._v(t._s(t.$t("Are you sure you want to remove external number?")))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialogRemoveExternal=!1}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.removeNumber()}}},[t._v(t._s(t.$t("OK")))]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px",color:"bg"},model:{value:t.dialogRemoveExtension,callback:function(e){t.dialogRemoveExtension=e},expression:"dialogRemoveExtension"}},[a("v-card",{attrs:{color:"bg"}},[a("v-card-subtitle",{staticClass:"headline"},[t._v(t._s(t.$t("Are you sure you want to remove local extensions?")))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.dialogRemoveExtension=!1}}},[t._v(t._s(t.$t("Cancel")))]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.setExtension(!1)}}},[t._v(t._s(t.$t("OK")))]),a("v-spacer")],1)],1)],1),a("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"info",text:""},on:{click:function(e){t.snackbarSave=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSave,callback:function(e){t.snackbarSave=e},expression:"snackbarSave"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},s=[],o=a(3888),n=a(3144);const r=a(381);let l={name:"Telephony",data:()=>({tab:{},headers:[],rows:[],search:"",selectedDevices:[],totalItems:0,loading:!0,options:{sortBy:["last_login"],sortDesc:[!0]},numberDialog:!1,c:[],numberRows:[],numberLoading:!1,snackbarSave:!1,dialogRemoveExternal:!1,dialogRemoveExtension:!1,appData:o.Z,moment:r}),methods:{updateOptions(){this.refresh()},rowClick:function(t){console.log(`rowClick: ${t.email}`),this.$router.push("/Profile/"+t.email)},setExtension:async function(t){let e;t?e="assignLocalExtension":(e="removeLocalExtension",this.dialogRemoveExtension=!1);for(const a of this.selectedDevices)await this.setExtensionToDevice(a,e);this.selectedDevices=[],this.refresh()},setExtensionToDevice:async function(t,e){try{let a=await n.Z.post({url:`api/telephony/${t.email}/${t.imei}`,data:{action:e}});console.log(a.data),1==a.data.status?(this.snackbarSave=!0,this.snackbarText=this.$t("Saved")):(console.log(`status: ${a.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))}catch(a){console.error(a)}},addExternalNumber:async function(){try{const t=this.selectedDevices[0];this.numberLoading=!0,this.numberDialog=!0,this.numberRows=[];let e=await n.Z.post({url:`api/telephony/${t.email}/${t.imei}`,data:{action:"getAvailableNumbers"}});console.log(e.data),1==e.data.status?(this.numberHeaders=[{text:this.$t("Phone"),value:"phoneNumber"}],this.numberRows=e.data.availablePhoneNumbers,this.numberLoading=!1):(console.log(`status: ${e.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))}catch(t){console.error(t),this.numberLoading=!1,this.numberDialog=!1,this.snackbarSave=!0,this.snackbarText=this.$t("Error")}},numberClick:async function(t){try{const e=this.selectedDevices[0];let a=await n.Z.post({url:`api/telephony/${e.email}/${e.imei}`,data:{action:"subscribeToNumber",phoneNumber:t.phoneNumber}});console.log(a.data),1==a.data.status?(this.selectedDevices=[],this.snackbarSave=!0,this.snackbarText=this.$t("Number Added"),this.refresh()):(console.log(`status: ${a.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error")),this.numberDialog=!1}catch(e){console.error(e),this.numberLoading=!1,this.numberDialog=!1,this.snackbarSave=!0,this.snackbarText=this.$t("Error")}},removeNumber:async function(){try{this.dialogRemoveExternal=!1;const t=this.selectedDevices[0];let e=await n.Z.post({url:`api/telephony/${t.email}/${t.imei}`,data:{action:"removeNumber"}});console.log(e.data),1==e.data.status?(this.selectedDevices=[],this.snackbarSave=!0,this.snackbarText=this.$t("Number Removed"),this.refresh()):(console.log(`status: ${e.data.status}`),this.snackbarSave=!0,this.snackbarText=this.$t("Error"))}catch(t){console.error(t),this.snackbarSave=!0,this.snackbarText=this.$t("Error")}},refresh:function(){let t=this.options.itemsPerPage>0?this.options.itemsPerPage:1e4,e=(this.options.page-1)*t;console.log(this.options),n.Z.get({url:"api/devices",params:{offset:e,limit:t,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,search:this.search}}).then((t=>{console.log(t.data),1==t.data.status?(this.rows=t.data.devices,this.rows.forEach((t=>{t.item_key=`${t.email}:${t.imei}`})),this.totalItems=t.data.count):console.log(`status: ${t.data.status}`)})).catch((t=>console.log(t))).finally((()=>this.loading=!1))}},created:function(){let t=[{text:this.$t("control-panel"),to:"/",disabled:!1},{text:this.$t("Telephony"),to:"/Telephony",disabled:!1}];this.$emit("updatePage",t),this.headers=[{text:this.$t("Connect Time"),value:"last_login"},{text:this.$t("Last Name"),value:"user.lastname"},{text:this.$t("First Name"),value:"user.firstname"},{text:this.$t("Email"),value:"email"},{text:this.$t("Device Name"),value:"devicename"},{text:this.$t("Device ID"),value:"imei"},{text:this.$t("Extension"),value:"local_extension"},{text:this.$t("External Number"),value:"assigned_phone_number"}]},watch:{tab:function(t){console.log(`tab: ${t}`)},search:function(t){console.log(`search: ${t}`),(t.length>1||0==t.length)&&this.refresh()}}};var c=l,d=c,u=a(1001),h=a(3453),p=a.n(h),m=a(3150),v=a(2371),f=a(7118),g=a(4998),b=a(4497),y=a(3202),k=a(9762),x=a(4227),w=a(1759),$=a(8697),S=a(1954),D=a(1208),_=a(5978),C=a(6656),T=a(7921),P=(0,u.Z)(d,i,s,!1,null,null,null),A=P.exports;p()(P,{VBtn:m.Z,VCard:v.Z,VCardActions:f.h7,VCardSubtitle:f.Qq,VCardTitle:f.EB,VDataTable:g.Z,VDialog:b.Z,VSnackbar:y.Z,VSpacer:k.Z,VTab:x.Z,VTabItem:w.Z,VTabs:$.Z,VTabsItems:S.Z,VTabsSlider:D.Z,VTextField:_.Z,VToolbar:C.Z,VToolbarTitle:T.qW})}}]);
//# sourceMappingURL=about.e56a4e61.js.map