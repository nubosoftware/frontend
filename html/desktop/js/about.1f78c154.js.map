{"version":3,"sources":["webpack:///./node_modules/qrcode/lib/core/byte-data.js","webpack:///./node_modules/qrcode/lib/core/regex.js","webpack:///../../../src/mixins/transitionable/index.ts","webpack:///../../../src/components/VAlert/VAlert.ts","webpack:///./node_modules/core-js/internals/to-index.js","webpack:///../../../src/components/VGrid/VFlex.ts","webpack:///./node_modules/dijkstrajs/dijkstra.js","webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./node_modules/core-js/internals/typed-array-from-species-and-list.js","webpack:///./node_modules/core-js/internals/array-copy-within.js","webpack:///../../../src/components/VThemeProvider/VThemeProvider.ts","webpack:///../../../src/mixins/delayable/index.ts","webpack:///../../../src/mixins/activatable/index.ts","webpack:///../../../src/mixins/dependent/index.ts","webpack:///../../../src/mixins/bootable/index.ts","webpack:///../../../src/mixins/detachable/index.ts","webpack:///../../../src/components/VOverlay/VOverlay.ts","webpack:///../../../src/components/VOverlay/index.ts","webpack:///../../../src/mixins/overlayable/index.ts","webpack:///../../../src/mixins/returnable/index.ts","webpack:///../../../src/mixins/stackable/index.ts","webpack:///../../../src/directives/click-outside/index.ts","webpack:///../../../src/components/VDialog/VDialog.ts","webpack:///./node_modules/core-js/modules/es.typed-array.subarray.js","webpack:///./node_modules/core-js/internals/to-offset.js","webpack:///./src/views/OTP.vue?3459","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/vue-qrcode/lib/index.js","webpack:///src/views/OTP.vue","webpack:///./src/views/OTP.vue?9a09","webpack:///./src/views/OTP.vue","webpack:///./node_modules/crypto-js/hmac-sha1.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/core-js/modules/es.typed-array.sort.js","webpack:///./node_modules/crypto-js/core.js","webpack:///./node_modules/core-js/modules/es.typed-array.reduce-right.js","webpack:///./node_modules/qrcode/lib/core/polynomial.js","webpack:///./node_modules/qrcode/lib/core/version-check.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./node_modules/core-js/modules/es.typed-array.slice.js","webpack:///./node_modules/core-js/modules/es.object.is.js","webpack:///./node_modules/qrcode/lib/core/kanji-data.js","webpack:///./node_modules/core-js/modules/es.typed-array.last-index-of.js","webpack:///./src/views/Signup.vue?afb1","webpack:///src/views/Signup.vue","webpack:///./src/views/Signup.vue?98ec","webpack:///./src/views/Signup.vue","webpack:///./node_modules/qrcode/lib/core/error-correction-code.js","webpack:///./node_modules/core-js/modules/es.typed-array.find-index.js","webpack:///./node_modules/core-js/modules/es.typed-array.set.js","webpack:///./node_modules/core-js/modules/es.typed-array.map.js","webpack:///./node_modules/qrcode/lib/renderer/svg-tag.js","webpack:///./node_modules/qrcode/lib/renderer/canvas.js","webpack:///./src/views/Client.vue?308c","webpack:///./src/views/Password.vue?b930","webpack:///src/views/Password.vue","webpack:///./src/views/Password.vue?ba7e","webpack:///./src/views/Password.vue","webpack:///./node_modules/qrcode/lib/renderer/utils.js","webpack:///./node_modules/qrcode/lib/core/bit-matrix.js","webpack:///./node_modules/crypto-js/hmac.js","webpack:///./node_modules/qrcode/lib/utils/typedarray-buffer.js","webpack:///./node_modules/core-js/modules/es.typed-array.uint8-array.js","webpack:///./node_modules/core-js/modules/es.typed-array.join.js","webpack:///./node_modules/core-js/modules/es.typed-array.iterator.js","webpack:///./node_modules/core-js/internals/array-buffer.js","webpack:///./node_modules/crypto-js/enc-hex.js","webpack:///./node_modules/core-js/modules/es.typed-array.some.js","webpack:///./node_modules/qrcode/lib/can-promise.js","webpack:///./node_modules/qrcode/lib/core/galois-field.js","webpack:///../../../src/components/VToolbar/VToolbar.ts","webpack:///./node_modules/core-js/modules/es.typed-array.to-string.js","webpack:///./node_modules/core-js/modules/es.typed-array.fill.js","webpack:///./node_modules/core-js/internals/typed-array-constructor.js","webpack:///./node_modules/core-js/internals/ieee754.js","webpack:///./node_modules/qrcode/lib/core/mask-pattern.js","webpack:///./node_modules/qrcode/lib/core/error-correction-level.js","webpack:///./src/views/Client.vue?e92d","webpack:///./src/modules/guacClient.js","webpack:///src/views/Client.vue","webpack:///./src/views/Client.vue?3cc3","webpack:///./src/views/Client.vue?ef63","webpack:///./node_modules/qrcode/lib/core/bit-buffer.js","webpack:///./src/modules/loginController.js","webpack:///./node_modules/qrcode/lib/core/utils.js","webpack:///./node_modules/core-js/modules/es.typed-array.includes.js","webpack:///../../../src/components/VLabel/VLabel.ts","webpack:///../../../src/components/VLabel/index.ts","webpack:///../../../src/components/VMessages/VMessages.ts","webpack:///../../../src/components/VMessages/index.ts","webpack:///../../../src/mixins/validatable/index.ts","webpack:///../../../src/components/VInput/VInput.ts","webpack:///../../../src/components/VInput/index.ts","webpack:///../../../src/components/VCounter/VCounter.ts","webpack:///../../../src/components/VCounter/index.ts","webpack:///../../../src/mixins/intersectable/index.ts","webpack:///../../../src/directives/resize/index.ts","webpack:///../../../src/components/VTextField/VTextField.ts","webpack:///./node_modules/core-js/modules/es.string.ends-with.js","webpack:///./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js","webpack:///./node_modules/qrcode/lib/core/reed-solomon-encoder.js","webpack:///./src/views/Splash.vue?c8ea","webpack:///src/views/Splash.vue","webpack:///./src/views/Splash.vue?e23e","webpack:///./src/views/Splash.vue","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/qrcode/lib/core/finder-pattern.js","webpack:///./node_modules/qrcode/lib/core/format-info.js","webpack:///./node_modules/core-js/modules/es.typed-array.copy-within.js","webpack:///../../../src/components/VIcon/VIcon.ts","webpack:///../../../src/components/VIcon/index.ts","webpack:///./node_modules/qrcode/lib/core/alphanumeric-data.js","webpack:///./node_modules/core-js/internals/typed-array-from.js","webpack:///../../../src/components/VGrid/VLayout.ts","webpack:///./node_modules/core-js/modules/es.typed-array.every.js","webpack:///./node_modules/core-js/internals/array-buffer-native.js","webpack:///./node_modules/guacamole-common-js/dist/guacamole-common.js","webpack:///./node_modules/qrcode/lib/core/qrcode.js","webpack:///./node_modules/thirty-two/lib/thirty-two/index.js","webpack:///../../../src/components/VResponsive/VResponsive.ts","webpack:///../../../src/components/VResponsive/index.ts","webpack:///../../../src/components/VImg/VImg.ts","webpack:///../../../src/components/VBtn/index.ts","webpack:///./node_modules/thirty-two/lib/thirty-two/thirty-two.js","webpack:///./node_modules/core-js/modules/es.typed-array.to-locale-string.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/core-js/internals/typed-array-species-constructor.js","webpack:///./node_modules/qrcode/lib/core/mode.js","webpack:///./node_modules/qrcode/lib/core/segments.js","webpack:///./node_modules/core-js/modules/es.typed-array.filter.js","webpack:///./node_modules/qrcode/lib/core/version.js","webpack:///./node_modules/core-js/modules/es.typed-array.reduce.js","webpack:///./node_modules/core-js/modules/es.typed-array.reverse.js","webpack:///./src/assets/logo.png","webpack:///./node_modules/qrcode/lib/browser.js","webpack:///./node_modules/core-js/modules/es.typed-array.find.js","webpack:///./node_modules/core-js/internals/array-reduce.js","webpack:///./node_modules/core-js/modules/es.typed-array.for-each.js","webpack:///./node_modules/qrcode/lib/core/alignment-pattern.js","webpack:///./node_modules/qrcode/lib/core/numeric-data.js","webpack:///../../src/util/dom.ts","webpack:///./node_modules/crypto-js/sha1.js","webpack:///./node_modules/core-js/internals/array-from-constructor-and-list.js","webpack:///./node_modules/isarray/index.js","webpack:///../../../src/components/VAvatar/VAvatar.ts","webpack:///../../../src/components/VAvatar/index.ts","webpack:///../../../src/mixins/mobile/index.ts","webpack:///../../../src/components/VBanner/VBanner.ts","webpack:///./node_modules/core-js/internals/array-last-index-of.js","webpack:///./node_modules/core-js/modules/es.typed-array.index-of.js","webpack:///./node_modules/core-js/internals/is-integral-number.js","webpack:///./node_modules/core-js/internals/array-buffer-view-core.js","webpack:///./node_modules/qrcode/node_modules/isarray/index.js","webpack:///./src/views/About.vue?95e7","webpack:///src/views/About.vue","webpack:///./src/views/About.vue?f1da","webpack:///../../../src/components/VDataTable/VSimpleTable.ts","webpack:///../../../src/components/VGrid/VSpacer.ts","webpack:///./src/views/About.vue","webpack:///./node_modules/core-js/internals/to-positive-integer.js"],"names":["BufferUtil","Mode","ByteData","data","this","mode","BYTE","from","getBitsLength","length","prototype","getLength","write","bitBuffer","i","l","put","module","exports","numeric","alphanumeric","kanji","replace","byte","KANJI","RegExp","BYTE_KANJI","NUMERIC","ALPHANUMERIC","TEST_KANJI","TEST_NUMERIC","TEST_ALPHANUMERIC","testKanji","str","test","testNumeric","testAlphanumeric","name","props","origin","transition","String","mixins","border","type","validator","closeLabel","default","coloredBorder","dense","dismissible","closeIcon","icon","Boolean","val","outlined","prominent","text","value","computed","__cachedBorder","staticClass","class","setBackgroundColor","$createElement","__cachedDismissible","color","VBtn","small","attrs","$vuetify","lang","t","on","click","VIcon","__cachedIcon","iconColor","classes","VSheet","computedColor","computedIcon","includes","hasColoredIcon","hasText","isDark","created","$attrs","hasOwnProperty","methods","genWrapper","children","$slots","prepend","$scopedSlots","close","toggle","genContent","genAlert","role","style","directives","isActive","setColor","render","h","toIntegerOrInfinity","toLength","it","undefined","number","RangeError","dijkstra","single_source_shortest_paths","graph","s","d","predecessors","costs","closest","u","v","cost_of_s_to_u","adjacent_nodes","cost_of_e","cost_of_s_to_u_plus_cost_of_e","cost_of_s_to_v","first_visit","open","PriorityQueue","make","push","empty","pop","cost","msg","join","Error","extract_shortest_path_from_predecessor_list","nodes","reverse","find_path","opts","key","T","queue","sorter","default_sorter","a","b","item","sort","shift","Object","is","x","y","arrayFromConstructorAndList","typedArraySpeciesConstructor","instance","list","toObject","toAbsoluteIndex","lengthOfArrayLike","min","Math","copyWithin","target","start","O","len","to","end","arguments","count","inc","root","node","openDelay","Number","closeDelay","openTimeout","closeTimeout","clearDelay","clearTimeout","runDelay","delay","parseInt","setTimeout","cb","baseMixins","activator","disabled","internalActivator","openOnHover","openOnFocus","activatorElement","activatorNode","events","listeners","watch","mounted","slotType","beforeDestroy","addActivatorEvents","keys","genActivator","genActivatorAttributes","genActivatorListeners","e","getActivator","vm","m","Node","getContentSlot","getValueProxy","self","removeActivatorEvents","resetActivator","searchChildren","results","index","child","closeDependents","isDependent","openDependents","getOpenDependents","getOpenDependentElements","result","getClickableDependentElements","$refs","overlay","eager","isBooted","hasContent","showLazyContent","content","validateAttachTarget","attach","contentClass","hasDetached","beforeMount","Array","deactivated","console","getScopeIdAttrs","scopeId","initDetach","_isDestroyed","document","absolute","dark","opacity","zIndex","__scrim","computedOpacity","themeClasses","styles","hideOverlay","overlayColor","overlayOpacity","animationFrame","genOverlay","createOverlay","propsData","parent","$el","requestAnimationFrame","removeOverlay","showScroll","cancelAnimationFrame","scrollListener","up","down","checkPath","hasScrollbar","el","window","shouldScroll","alreadyAtTop","alreadyAtBottom","scrollingUp","delta","scrollingDown","isInside","path","composedPath","dialog","selected","hideScroll","breakpoint","passive","returnValue","originalValue","save","stackElement","stackExclude","stackMinZIndex","activeZIndex","getMaxZIndex","exclude","base","zis","activeElements","defaultConditional","checkEvent","checkIsActive","ShadowRoot","elements","binding","directive","handler","handleShadow","callback","ClickOutside","inserted","onClick","onMousedown","app","lastMousedownWasOutside","unbind","fullscreen","light","maxWidth","noClickAnimation","persistent","retainFocus","scrollable","width","activatedBy","animate","animateTimeout","previousActiveElement","contentClasses","hasActivator","animateClick","closeConditional","contains","show","bind","onClickOutside","onKeydown","onFocusin","some","focusable","querySelectorAll","tabindex","keydown","ref","genTransition","appear","genInnerContent","include","transformOrigin","ArrayBufferViewCore","aTypedArray","exportTypedArrayMethod","begin","beginIndex","C","buffer","byteOffset","BYTES_PER_ELEMENT","toPositiveInteger","BYTES","offset","_vm","_h","_c","_self","staticStyle","_v","_s","$t","messageText","alertText","alertType","_e","model","$$v","valid","expression","resetOTP","appData","canSetOTPToken","e1","passwordRules","random","otpcode","submit","$event","cancelOTP","resetPasswordSubmit","setPageParams","otpURL","scanComplete","staticRenderFns","__rest","p","call","indexOf","getOwnPropertySymbols","propertyIsEnumerable","create","LEVELS","MASK_PATTERNS","MODES","TYPES","MAX_QR_VERSION","version","errorCorrectionLevel","level","maskPattern","toSJISFunc","Function","margin","scale","every","c","quality","parseFloat","required","dataUrl","$props","deep","immediate","_a","toDataURL","assign","renderOptions","then","catch","err","$emit","domProps","src","base32","components","VueQrcode","resetPasswordClick","log","loginToken","action","appUtils","submitSetPassword","passcode","password","OTPCode","token","isValid","array","Uint8Array","crypto","getRandomValues","otpField","input","focus","setAttribute","component","VAlert","VBanner","VCard","VCardText","VContainer","VFlex","VForm","VImg","VLayout","VRow","VTextField","VToolbar","factory","undef","CryptoJS","HmacSHA1","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","code","charCodeAt","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","output","extraBytes","parts","maxChunkLength","len2","global","fails","aCallable","internalSort","FF","IE_OR_EDGE","V8","WEBKIT","Uint16Array","nativeSort","ACCEPT_INCORRECT_ARGUMENTS","STABLE_SORT","mod","expected","getSortCompare","comparefn","arrayLength","items","globalThis","msCrypto","cryptoSecureRandomInt","Uint32Array","randomBytes","readInt32LE","F","obj","subtype","C_lib","lib","Base","extend","overrides","mixIn","init","$super","apply","properties","propertyName","toString","clone","WordArray","words","sigBytes","encoder","Hex","stringify","concat","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","thatByte","j","ceil","slice","nBytes","C_enc","enc","hexChars","bite","parse","hexStr","hexStrLength","substr","Latin1","latin1Chars","fromCharCode","latin1Str","latin1StrLength","Utf8","decodeURIComponent","escape","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","doFlush","processedWords","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","max","_minBufferSize","nWordsReady","nBytesReady","_doProcessBlock","splice","C_algo","Hasher","cfg","_doReset","update","messageUpdate","finalize","hash","_doFinalize","_createHelper","hasher","message","_createHmacHelper","HMAC","algo","$reduceRight","right","callbackfn","GF","mul","p1","p2","coeff","alloc","divident","divisor","generateECPolynomial","degree","poly","exp","isNaN","_arrayWithoutHoles","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","$slice","FORCED","Int8Array","$","stat","Utils","KanjiData","toSJIS","$lastIndexOf","searchElement","reqRule","firstName","lastName","emailRules","email","cancelClick","$router","msgType","signature","deviceid","regid","first","last","title","deviceType","deviceName","activate_text","ECLevel","EC_BLOCKS_TABLE","EC_CODEWORDS_TABLE","getBlocksCount","L","M","Q","H","getTotalCodewordsCount","$findIndex","findIndex","predicate","toOffset","set","arrayLike","$map","map","mapfn","getColorAttrib","attrib","alpha","hex","toFixed","svgCmd","cmd","qrToPath","size","moveBy","newRow","lineLength","col","floor","row","qrData","options","getOptions","modules","qrcodesize","bg","viewBox","svgTag","clearCanvas","ctx","canvas","clearRect","height","getCanvasElement","createElement","canvasEl","getContext","getImageWidth","image","createImageData","qrToImageData","putImageData","renderToDataURL","rendererOpts","resetPassword","setPassword","e2","checkPasswordRules","passwordCheck","minChars","passcodeminchars","passcodetype","resetPasswordCancel","form","hex2rgba","hexCode","split","hexValue","r","g","getScale","qrSize","imgData","qr","symbolSize","scaledMargin","palette","posDst","pxColor","iSrc","jSrc","BitMatrix","reservedBit","reserved","get","xor","isReserved","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","hmac","typedArraySupport","__proto__","foo","Buffer","TYPED_ARRAY_SUPPORT","K_MAX_LENGTH","arg","allocUnsafe","checked","isnan","createBuffer","that","buf","fromString","string","actual","fromArrayLike","fromArrayBuffer","fromObject","isBuffer","copy","ArrayBuffer","utf8ToBytes","units","codePoint","Infinity","leadSurrogate","bytes","isView","blitBuffer","dst","utf8Write","species","defineProperty","configurable","enumerable","writable","isFinite","remaining","newBuf","subarray","sliceLen","targetStart","fill","pos","_isBuffer","createTypedArrayConstructor","$join","separator","PROPER_FUNCTION_NAME","PROPER","ArrayIterators","wellKnownSymbol","ITERATOR","arrayValues","values","arrayKeys","arrayEntries","entries","nativeTypedArrayIterator","PROPER_ARRAY_VALUES_NAME","typedArrayValues","DESCRIPTORS","NATIVE_ARRAY_BUFFER","FunctionName","createNonEnumerableProperty","redefineAll","anInstance","toIndex","IEEE754","getPrototypeOf","setPrototypeOf","getOwnPropertyNames","f","arrayFill","setToStringTag","InternalStateModule","CONFIGURABLE_FUNCTION_NAME","CONFIGURABLE","getInternalState","setInternalState","ARRAY_BUFFER","DATA_VIEW","PROTOTYPE","WRONG_LENGTH","WRONG_INDEX","NativeArrayBuffer","$ArrayBuffer","$DataView","$DataViewPrototype","ObjectPrototype","packIEEE754","pack","unpackIEEE754","unpack","packInt8","packInt16","packInt32","unpackInt32","packFloat32","packFloat64","addGetter","Constructor","view","isLittleEndian","intIndex","store","conversion","INCORRECT_ARRAY_BUFFER_NAME","NaN","ArrayBufferPrototype","constructor","testView","$setInt8","setInt8","getInt8","setUint8","unsafe","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","DataView","$some","Promise","EXP_TABLE","LOG_TABLE","n","bottom","collapse","extended","extensionHeight","flat","floating","short","tag","isExtended","computedHeight","isCollapsed","computedContentHeight","isProminent","breakingProps","original","replacement","genBackground","img","genExtension","$listeners","Uint8ArrayPrototype","arrayToString","arrayJoin","IS_NOT_ARRAY_METHOD","$fill","TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS","ArrayBufferModule","createPropertyDescriptor","isIntegralNumber","toPropertyKey","hasOwn","classof","isObject","isSymbol","typedArrayFrom","forEach","setSpecies","definePropertyModule","getOwnPropertyDescriptorModule","inheritIfRequired","nativeDefineProperty","nativeGetOwnPropertyDescriptor","round","NATIVE_ARRAY_BUFFER_VIEWS","TYPED_ARRAY_CONSTRUCTOR","TYPED_ARRAY_TAG","TypedArray","TypedArrayPrototype","aTypedArrayConstructor","isTypedArray","fromList","isArrayBuffer","klass","isTypedArrayIndex","wrappedGetOwnPropertyDescriptor","wrappedDefineProperty","descriptor","forced","getOwnPropertyDescriptor","TYPE","wrapper","CLAMPED","match","CONSTRUCTOR_NAME","GETTER","SETTER","NativeTypedArrayConstructor","TypedArrayConstructor","TypedArrayConstructorPrototype","exported","getter","setter","addElement","dummy","typedArrayOffset","$length","$len","sham","abs","pow","LN2","mantissaLength","exponent","mantissa","exponentLength","eMax","eBias","rt","sign","nBits","Patterns","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PenaltyScores","N1","N2","N3","N4","getMaskAt","mask","getPenaltyN1","points","sameCountCol","sameCountRow","lastCol","lastRow","getPenaltyN2","getPenaltyN3","bitsCol","bitsRow","getPenaltyN4","darkCount","modulesCount","k","applyMask","pattern","getBestMask","setupFormatFunc","numPatterns","bestPattern","lowerPenalty","penalty","lcStr","toLowerCase","bit","defaultValue","loaddingText","msgDialog","alert","GuacClient","display","sessID","url","guacURL","tunnel","Guacamole","WebSocketTunnel","onstatechange","state","Tunnel","State","CLOSED","guac","disconnect","Client","appendChild","getDisplay","getElement","onname","thisClass","AUDIO_INPUT_MIMETYPE","requestAudioStream","client","stream","createAudioStream","recorder","AudioRecorder","getInstance","onclose","sendEnd","videoTypes","VideoPlayer","getSupportedTypes","audioType","AudioPlayer","onerror","error","connect","onunload","mouse","Mouse","handleMouseEvent","sendMouseState","onmousedown","onmouseup","onmousemove","sink","InputSink","body","keyboard","Keyboard","listenTo","keyDownFunc","keysym","sendKeyEvent","keyUpFunc","onblur","onkeydown","onkeyup","onEnd","onsync","ts","onargv","mimetype","reader","StringReader","ontext","onend","onclipboard","exec","BlobReader","sendSize","beforeRouteLeave","next","VDialog","VProgressLinear","BitBuffer","bufIndex","putBit","getLengthInBits","LoginConstants","CLIENT_AUTH_TYPE_NONE","CLIENT_AUTH_TYPE_PASSWORD","CLIENT_AUTH_TYPE_BIOMETRICOTP","CLIENT_AUTH_TYPE_PASSWORD_AND_BIOMETRICOTP","CLIENT_AUTH_TYPE_PASSWORD_OR_BIOMETRICOTP","SECOND_AUTH_METOD_BIOMETRIC","SECOND_AUTH_METOD_OTP","SECOND_AUTH_METOD_BIOMETRIC_OR_OTP","AUTH_PREFERENCE_UNKNOWN","AUTH_PREFERENCE_BIOMETRIC","AUTH_PREFERENCE_OTP","AUTH_PREFERENCE_PASSWORD","OTP_TYPE_TOTP","OTP_TYPE_SMS","LoginController","caller","authComplete","clientauthtype","passwordValidated","tryPassword","biometricValidated","tryBiometricOTPAuth","authUserPreference","commit","isCancelPassword","isCancelOTP","secondauthmethod","toSJISFunction","CODEWORDS_COUNT","getSymbolSize","getSymbolTotalCodewords","getBCHDigit","digit","setToSJISFunction","isKanjiModeEnabled","$includes","functional","focused","for","left","position","genChildren","genMessage","setTextColor","errorCount","errorMessages","messages","readonly","rules","success","successMessages","validateOnBlur","errorBucket","hasColor","hasFocused","hasInput","isFocused","isResetting","lazyValue","hasError","internalErrorMessages","hasSuccess","internalSuccessMessages","externalError","hasMessages","validationTarget","hasState","shouldValidate","genInternalMessages","internalMessages","internalValue","isDisabled","isInteractive","isReadonly","validations","validationState","newVal","$nextTick","register","unregister","resetValidation","validate","force","rule","inheritAttrs","appendIcon","backgroundColor","hideDetails","hint","id","label","loading","persistentHint","prependIcon","hasMouseDown","computedId","hasDetails","messagesToDisplay","hasHint","hasLabel","isDirty","isLabelActive","validation","validationResult","showDetails","beforeCreate","$options","genControl","attrs$","genDefaultSlot","genIcon","extraData","eventName","hasListener","listeners$","mergeData","mouseup","genInputSlot","mousedown","onMouseUp","genLabel","genMessages","scopedSlots","genSlot","slot","genPrependSlot","genAppendSlot","onMouseDown","isGreater","onObserve","destroyed","Resize","onVisible","dirtyTypes","resize","ripple","appendOuterIcon","autofocus","clearable","clearIcon","counter","counterValue","filled","fullWidth","placeholder","prefix","prependInnerIcon","persistentPlaceholder","rounded","shaped","singleLine","solo","soloInverted","suffix","badInput","labelWidth","prefixWidth","prependWidth","initialValue","isClearing","computedCounterValue","hasCounter","isEnclosed","isSingle","isSolo","labelPosition","labelValue","rtl","showLabel","blur","clearableCallback","genPrependInnerSlot","genIconSlot","genClearIcon","genCounter","genFieldset","genLegend","span","innerHTML","genInput","inputAttrs","onKeyDown","modifiers","quiet","onResize","messagesNode","counterNode","genTextFieldSlot","genAffix","onBlur","onFocus","onInput","setLabelWidth","scrollWidth","setPrefixWidth","setPrependWidth","tryAutofocus","updateValue","notARegExp","requireObjectCoercible","correctIsRegExpLogic","IS_PURE","$endsWith","endsWith","CORRECT_IS_REGEXP_LOGIC","MDN_POLYFILL_BUG","proto","searchString","endPosition","search","checkCorrectnessOfIteration","iterable","Polynomial","ReedSolomonEncoder","genPoly","initialize","encode","pad","paddedData","remainder","buff","validationWait","passwordLocked","resentBtn","resetActivation","signupClick","_u","fn","_b","snackbarSave","snackbarText","validationWaitStatus","activationKey","checkValidation","thisPage","checkValidationLoop","deviceID","alreadyUser","VSnackbar","read","isLE","mLen","eLen","FINDER_PATTERN_SIZE","getPositions","G15","G15_MASK","G15_BCH","getEncodedBits","$copyWithin","isFontAwesome5","iconType","isSvgPath","SIZE_MAP","medium","hasClickListener","getIcon","iconName","getSize","sizes","xSmall","large","xLarge","explicitSize","getDefaultData","getSvgWrapperData","fontSize","wrapperData","applyColors","renderFontIcon","newChildren","delimiterIndex","isMaterialIcon","renderSvgIcon","svgData","xmlns","renderSvgIconComponent","$_wrapperFor","ALPHA_NUM_CHARS","AlphanumericData","aConstructor","getIterator","getIteratorMethod","isArrayIteratorMethod","source","step","argumentsLength","mapping","iteratorMethod","done","$every","ArrayBufferReader","guac_reader","onblob","binary","atob","arrayBuffer","bufferView","ondata","ArrayBufferWriter","guac_writer","__send_blob","sendBlob","btoa","onack","status","blobLength","DEFAULT_BLOB_LENGTH","sendData","AudioContextFactory","AudioContext","webkitAudioContext","singleton","sync","isSupportedType","RawAudioPlayer","format","RawAudioFormat","context","getAudioContext","nextPacketTime","currentTime","MIN_SPLIT_SIZE","maxLatency","SampleArray","bytesPerSample","Int16Array","maxSampleValue","packetQueue","joinAudioPackets","packets","totalLength","packet","joined","splitAudioPacket","minValue","MAX_VALUE","optimalSplitLength","samples","channels","minSplitSamples","rate","totalValue","channel","pushAudioPacket","shiftAudioPacket","toAudioBuffer","packetTime","audioBuffer","audioData","getChannelData","createBufferSource","destination","noteOn","now","RawAudioRecorder","BUFFER_SIZE","LANCZOS_WINDOW_SIZE","navigator","mediaDevices","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","writer","readSamples","writtenSamples","mediaStream","processor","sinc","piX","PI","sin","lanczos","interpolateSample","sum","toSampleArray","inSamples","expectedWrittenSamples","sampleRate","outSamples","streamReceived","createScriptProcessor","onaudioprocess","inputBuffer","createMediaStreamSource","resume","streamDenied","beginAudioCapture","promise","stopAudioCapture","tracks","getTracks","stop","Status","Code","SUCCESS","RESOURCE_CLOSED","blob_builder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","blobs","append","Blob","getBlob","onprogress","sendAck","BlobWriter","guacWriter","arrayBufferWriter","blob","sliceImplementation","webkitSlice","mozSlice","sliceResult","FileReader","readNextChunk","oncomplete","chunk","readAsArrayBuffer","onload","isError","guac_client","STATE_IDLE","STATE_CONNECTING","STATE_WAITING","STATE_CONNECTED","STATE_DISCONNECTING","STATE_DISCONNECTED","currentState","currentTimestamp","pingInterval","lineCap","0","1","2","lineJoin","Display","layers","audioPlayers","videoPlayers","parsers","streams","objects","stream_indices","IntegerPool","output_streams","setState","isConnected","exportState","layersSnapshot","flush","layer","toCanvas","exportLayer","z","matrix","getLayerIndex","importState","dispose","importLayer","getLayer","setChannelMask","Layer","SRC","draw","move","shade","distort","sendMessage","pressed","mouseState","moveCursor","buttonMask","middle","createOutputStream","OutputStream","createFileStream","filename","createPipeStream","createClipboardStream","createArgumentValueStream","createObjectOutputStream","requestObjectInputStream","endStream","free","onaudio","onvideo","onfile","onfilesystem","onpipe","onrequired","getDefaultLayer","createLayer","getParser","parser","Parser","oninstruction","layerPropertyHandlers","setMiterLimit","instructionHandlers","parameters","stream_index","reason","radius","startAngle","endAngle","negative","arc","InputStream","audioPlayer","objectIndex","object","streamIndex","onbody","channelMask","fillColor","clip","srcL","srcX","srcY","srcWidth","srcHeight","dstL","dstX","dstY","cap","thickness","strokeColor","cursorHotspotX","cursorHotspotY","setCursor","cp1x","cp1y","cp2x","cp2y","curveTo","layer_index","setTransform","drawStream","srcLayer","fillLayer","lineTo","strokeLayer","showCursor","parent_index","receive","w","rect","moveTo","timestamp","function_index","transfer","DefaultTransferFunction","transform","onundefine","videoPlayer","opcode","clearInterval","setInterval","red","green","blue","DataURIReader","uri","getURI","guac_display","displayWidth","displayHeight","displayScale","webkitTransformOrigin","MozTransformOrigin","OTransformOrigin","msTransformOrigin","default_layer","VisibleLayer","cursor","bounds","cursorX","cursorY","onresize","oncursor","tasks","frames","__flush_frames","rendered_frames","frame","isReady","Frame","blocked","execute","Task","taskHandler","task","unblock","scheduleTask","getWidth","getHeight","getCursorLayer","autosize","hotspotX","hotspotY","srcx","srcy","srcw","srch","shown","element","parentNode","removeChild","translate","drawImage","drawBlob","createImageBitmap","bitmap","decoded","URL","createObjectURL","revokeObjectURL","Image","play","duration","video","addEventListener","render_callback","ended","dstLayer","transferFunction","limit","WebkitTransform","MozTransform","OTransform","msTransform","flatten","get_children","diff","a_element","b_element","compareDocumentPosition","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","draw_layer","initial_alpha","globalAlpha","getCanvas","__unique_id","__next_id","top","div","overflow","__super_resize","parent_element","field","outline","padding","background","isComposing","select","activeElement","getBoundingClientRect","guac_stream","guac_pool","pool","next_int","integer","JSONReader","guacReader","stringReader","json","getJSON","JSON","guac_keyboard","guacKeyboardID","_nextID","EVENT_MARKER","quirks","keyupUnreliable","altIsTypableOnly","capsLockKeyupUnreliable","platform","KeyEvent","key_event","Date","getTime","defaultPrevented","reliable","getAge","KeydownEvent","keyCode","keyIdentifier","location","keysym_from_key_identifier","keysym_from_keycode","keyupReliable","isPrintable","key_identifier_sane","meta","prevent_alt","ctrl","prevent_ctrl","alt","hyper","recentKeysym","KeypressEvent","charCode","keysym_from_charcode","KeyupEvent","eventLog","keycodeKeysyms","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","91","92","93","96","97","98","99","100","101","102","103","104","105","106","107","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","144","145","225","keyidentifier_keysym","no_repeat","ModifierState","implicitlyPressed","last_keydown_result","key_repeat_timeout","key_repeat_interval","get_keysym","keysyms","identifier","shifted","typedCharacter","unicodePrefixLocation","substring","toUpperCase","codepoint","isControlCharacter","press","release","codePointAt","updateModifierState","remoteState","localState","keyEvent","syncModifierStates","fromKeyboardEvent","isStateImplicit","interpret_events","last_event","handled_event","interpret_event","release_simulated_altgr","accepted_events","getEventLocation","keyLocation","markEvent","event","which","keydownEvent","preventDefault","keypressEvent","keyupEvent","handleInput","removeEventListener","handleComposition","shiftKey","ctrlKey","altKey","metaKey","getModifierState","CANVAS_SIZE_FACTOR","pathClosed","stackSize","compositeOperation","newWidth","newHeight","canvasWidth","canvasHeight","oldData","oldDataContext","oldCompositeOperation","globalCompositeOperation","fitRect","resizeWidth","resizeHeight","opBoundX","opBoundY","srcCanvas","getImageData","src_pixel","Pixel","dst_pixel","beginPath","bezierCurveTo","closePath","lineWidth","strokeStyle","stroke","fillStyle","createPattern","restore","miterLimit","ROUT","ATOP","XOR","ROVER","OVER","PLUS","RIN","IN","OUT","RATOP","guac_mouse","touchMouseThreshold","scrollThreshold","PIXELS_PER_LINE","PIXELS_PER_PAGE","onmouseout","ignore_mouse","scroll_delta","cancelEvent","stopPropagation","ignorePendingMouseEvents","mousewheel_handler","deltaY","wheelDeltaY","wheelDelta","deltaMode","detail","fromClientPosition","clientX","clientY","button","relatedTarget","toElement","CSS3_CURSOR_SUPPORTED","dataURL","guac_state","offsetLeft","offsetTop","offsetParent","scrollLeft","scrollTop","documentScrollLeft","documentElement","documentScrollTop","Touchpad","guac_touchpad","devicePixelRatio","clickTimingThreshold","clickMoveThreshold","touch_count","last_touch_x","last_touch_y","last_touch_time","pixels_moved","touch_buttons","3","gesture_in_progress","click_release_timeout","touches","time","starting_touch","touch","delta_x","delta_y","velocity","offsetWidth","offsetHeight","Touchscreen","guac_touchscreen","gesture_start_x","gesture_start_y","long_press_timeout","press_button","release_button","click_button","move_mouse","finger_moved","changedTouches","sqrt","begin_gesture","end_gesture","longPressThreshold","guacObject","bodyCallbacks","dequeueBodyCallback","callbacks","enqueueBodyCallback","inputStream","requestInputStream","bodyCallback","ROOT_STREAM","STREAM_INDEX_MIMETYPE","OnScreenKeyboard","layout","osk","modifierKeysyms","scaledElements","addClass","classname","classList","add","className","removeClass","remove","testClassname","ignoreMouse","ScaledElement","scaleFont","pixels","lineHeight","modifiersPressed","names","getActiveKey","keyName","candidate","requires","keyElement","modifier","modifierClass","getCSSName","originalKeysym","onselectstart","Layout","unit","scaledElement","asKeyArray","Key","getKeys","keyArrays","cssName","appendElements","capElement","textContent","requirement","keyWidths","touchPress","touchRelease","mousePress","mouseRelease","template","language","element_buffer","element_end","start_index","terminator","length_end","parameter","equals","SessionRecording","recording","KEYFRAME_CHAR_INTERVAL","KEYFRAME_TIME_INTERVAL","MAXIMUM_SEEK_TIME","instructions","charactersSinceLastKeyframe","lastKeyframeTimestamp","playbackTunnel","_PlaybackTunnel","playbackClient","currentFrame","startVideoTimestamp","startRealTimestamp","seekTimeout","args","instruction","_Frame","Instruction","keyframe","getDuration","toRelativeTimestamp","findFrame","minIndex","maxIndex","midIndex","midTimestamp","replayFrame","receiveInstruction","clientState","seekToFrame","abortSeek","startIndex","startTime","onseek","getPosition","continuePlayback","nextRealTimestamp","pause","onplay","onpause","isPlaying","seek","originallyPlaying","guac_status","fromHTTPCode","CLIENT_BAD_REQUEST","CLIENT_FORBIDDEN","RESOURCE_NOT_FOUND","CLIENT_TOO_MANY","SERVER_BUSY","SERVER_ERROR","fromWebSocketCode","UPSTREAM_NOT_FOUND","UPSTREAM_UNAVAILABLE","array_reader","bytes_remaining","__decode_utf8","StringWriter","array_writer","__expand","new_buffer","__append_utf8","__encode_utf8","out_buffer","sendText","setUUID","uuid","onuuid","OPEN","UNSTABLE","CONNECTING","receiveTimeout","unstableThreshold","INTERNAL_DATA_OPCODE","HTTPTunnel","tunnelURL","crossDomain","extraTunnelHeaders","TUNNEL_CONNECT","TUNNEL_READ","TUNNEL_WRITE","POLLING_ENABLED","POLLING_DISABLED","pollingMode","sendingMessages","outputMessageBuffer","withCredentials","receive_timeout","unstableTimeout","PING_FREQUENCY","extraHeaders","addExtraHeaders","request","headers","setRequestHeader","reset_timeout","close_tunnel","UPSTREAM_TIMEOUT","sendPendingMessages","message_xmlhttprequest","XMLHttpRequest","onreadystatechange","readyState","handleHTTPTunnelError","send","xmlhttprequest","getResponseHeader","statusText","handleResponse","interval","nextRequest","dataUpdateEvents","elementEnd","parseResponse","makeRequest","current","responseText","lengthEnd","abort","request_id","connect_xmlhttprequest","socket","ws_protocol","protocol","host","slash","pathname","lastIndexOf","WebSocket","onopen","onmessage","ChainedTunnel","tunnelChain","connect_data","chained_tunnel","tunnels","committedTunnel","failTunnel","next_tunnel","commit_tunnel","StaticHTTPTunnel","xhr","responseType","API_VERSION","AlignmentPattern","FinderPattern","MaskPattern","ECCode","Version","FormatInfo","Segments","setupFinderPattern","setupTimingPattern","setupAlignmentPattern","setupVersionInfo","bits","setupFormatInfo","setupData","bitIndex","byteIndex","createData","segments","getCharCountIndicator","totalCodewords","ecTotalCodewords","dataTotalCodewordsBits","remainingByte","createCodewords","dataTotalCodewords","ecTotalBlocks","blocksInGroup2","blocksInGroup1","totalCodewordsInGroup1","dataCodewordsInGroup1","dataCodewordsInGroup2","ecCount","rs","dcData","ecData","maxDataSize","dataSize","createSymbol","fromArray","estimatedVersion","rawSegments","rawSplit","getBestVersionForData","bestVersion","dataBits","moduleCount","decode","aspectRatio","computedAspectRatio","aspectStyle","paddingBottom","__cachedSizer","hasIntersect","intersect","contain","gradient","lazySrc","rootMargin","threshold","srcset","currentSrc","isLoading","calculatedAspectRatio","naturalWidth","normalisedSrc","aspect","__cachedImage","backgroundImage","backgroundPosition","loadImage","lazyImg","onLoad","startsWith","naturalHeight","onError","getSrc","pollForSize","timeout","poll","__genPlaceholder","once","charTable","byteTable","quintetCount","quintets","plain","shiftIndex","encoded","plainChar","plainDigit","plainPos","encodedByte","$toLocaleString","toLocaleString","TO_LOCALE_STRING_BUG","base64","ieee754","kMaxLength","encodingOrOffset","assertSize","encoding","isEncoding","SlowBuffer","loweredCase","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","hexWrite","strLen","parsed","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","bytesPerSequence","decodeCodePointsArray","INSPECT_MAX_BYTES","poolSize","_augment","allocUnsafeSlow","compare","swap16","swap32","swap64","inspect","thisStart","thisEnd","thisCopy","targetCopy","toJSON","_arr","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","toHex","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","readUIntLE","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","INVALID_BASE64_RE","base64clean","stringtrim","trim","byteArray","hi","lo","speciesConstructor","originalArray","VersionCheck","Regex","ccBits","MIXED","getBestModeForData","dataStr","NumericData","getStringByteLength","getSegments","regex","getSegmentsFromString","byteSegs","kanjiSegs","numSegs","alphaNumSegs","segs","s1","s2","getSegmentBitsLength","mergeSegments","reduce","acc","curr","prevSeg","buildNodes","seg","buildGraph","table","prevNodeIds","nodeGroup","currentNodeIds","lastCount","prevNodeId","buildSingleSegment","modesHint","bestMode","optimizedSegs","$filter","filter","fromSpeciesAndList","G18","G18_BCH","getBestVersionForDataLength","currentVersion","getCapacity","getReservedBitsCount","getTotalBitsFromDataArray","totalBits","reservedBits","getBestVersionForMixedData","usableBits","ecl","$reduce","canPromise","QRCode","CanvasRenderer","SvgRenderer","renderCanvas","renderFunc","argsNum","isLastArgCb","resolve","reject","_","$find","find","IndexedObject","createMethod","IS_RIGHT","memo","$forEach","getRowColCoords","posCount","intervals","positions","coords","posLength","group","remainingNum","composed","W","SHA1","_hash","nBitsTotal","nBitsLeft","roundedClasses","minWidth","measurableStyles","mobileBreakpoint","isMobile","mobile","mobileWidth","isNumber","sticky","isSticky","hasIcon","application","bar","iconClick","genText","genActions","dismiss","toIndexedObject","arrayMethodIsStrict","NEGATIVE_ZERO","STRICT_METHOD","$indexOf","isInteger","NAME","Prototype","isCallable","tryToString","redefine","uid","Int8ArrayPrototype","Uint8ClampedArray","Uint8ClampedArrayPrototype","isPrototypeOf","TO_STRING_TAG","opera","TYPED_ARRAY_TAG_REQIRED","TypedArrayConstructorsList","Int32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","KEY","property","ARRAY","exportTypedArrayStaticMethod","appName","_l","proxy","back","logout","deleteOK","fixedHeader","VCardActions","VCardTitle","VSimpleTable","VSpacer"],"mappings":"4FAAA,IAAIA,EAAa,EAAQ,QACrBC,EAAO,EAAQ,QAEnB,SAASC,EAAUC,GACjBC,KAAKC,KAAOJ,EAAKK,KACjBF,KAAKD,KAAOH,EAAWO,KAAKJ,GAG9BD,EAASM,cAAgB,SAAwBC,GAC/C,OAAgB,EAATA,GAGTP,EAASQ,UAAUC,UAAY,WAC7B,OAAOP,KAAKD,KAAKM,QAGnBP,EAASQ,UAAUF,cAAgB,WACjC,OAAON,EAASM,cAAcJ,KAAKD,KAAKM,SAG1CP,EAASQ,UAAUE,MAAQ,SAAUC,GACnC,IAAK,IAAIC,EAAI,EAAGC,EAAIX,KAAKD,KAAKM,OAAQK,EAAIC,EAAGD,IAC3CD,EAAUG,IAAIZ,KAAKD,KAAKW,GAAI,IAIhCG,EAAOC,QAAUhB,G,qBC1BjB,IAAIiB,EAAU,SACVC,EAAe,oBACfC,EAAQ,mNAIZA,EAAQA,EAAMC,QAAQ,KAAM,OAE5B,IAAIC,EAAO,6BAA+BF,EAAQ,kBAElDH,EAAQM,MAAQ,IAAIC,OAAOJ,EAAO,KAClCH,EAAQQ,WAAa,IAAID,OAAO,wBAAyB,KACzDP,EAAQZ,KAAO,IAAImB,OAAOF,EAAM,KAChCL,EAAQS,QAAU,IAAIF,OAAON,EAAS,KACtCD,EAAQU,aAAe,IAAIH,OAAOL,EAAc,KAEhD,IAAIS,EAAa,IAAIJ,OAAO,IAAMJ,EAAQ,KACtCS,EAAe,IAAIL,OAAO,IAAMN,EAAU,KAC1CY,EAAoB,IAAIN,OAAO,0BAEnCP,EAAQc,UAAY,SAAoBC,GACtC,OAAOJ,EAAWK,KAAKD,IAGzBf,EAAQiB,YAAc,SAAsBF,GAC1C,OAAOH,EAAaI,KAAKD,IAG3Bf,EAAQkB,iBAAmB,SAA2BH,GACpD,OAAOF,EAAkBG,KAAKD,K,uLC3BjB,gBAAW,CACxBI,KADwB,iBAGxBC,MAAO,CACLjC,KADK,OAELkC,OAFK,OAGLC,WAAYC,U,wBCgBD,cAAAC,EAAA,MAAO,EAAD,YAAN,UAIN,CACPL,KADO,UAGPC,MAAO,CACLK,OAAQ,CACNC,KADM,OAENC,UAFM,SAEG,GACP,MAAO,CAAC,MAAD,kCAAP,KAQJC,WAAY,CACVF,KADU,OAEVG,QAAS,kBAEXC,cAhBK,QAiBLC,MAjBK,QAkBLC,YAlBK,QAmBLC,UAAW,CACTP,KADS,OAETG,QAAS,WAEXK,KAAM,CACJL,QADI,GAEJH,KAAM,CAACS,QAFH,QAGJR,UAHI,SAGK,GACP,MAAsB,kBAARS,IAAd,IAAkCA,IAGtCC,SA9BK,QA+BLC,UA/BK,QAgCLC,KAhCK,QAiCLb,KAAM,CACJA,KADI,OAEJC,UAFI,SAEK,GACP,MAAO,CAAC,OAAD,sCAAP,KAQJa,MAAO,CACLd,KADK,QAELG,SAAS,IAIbY,SAAU,CACRC,eADQ,WAEN,IAAKxD,KAAL,OAAkB,OAAO,KAEzB,IAAID,EAAkB,CACpB0D,YADoB,kBAEpBC,MAAO,6CACgB1D,KAArB,SAAqC,IASzC,OALIA,KAAJ,gBACED,EAAOC,KAAK2D,mBAAmB3D,KAAxB,cAAPD,GACAA,EAAA,wCAGKC,KAAK4D,eAAe,MAA3B,IAEFC,oBAlBQ,WAkBW,WACjB,IAAK7D,KAAL,YAAuB,OAAO,KAE9B,IAAM8D,EAAQ9D,KAAd,UAEA,OAAOA,KAAK4D,eAAeG,EAApB,KAA0B,CAC/BN,YAD+B,uBAE/BvB,MAAO,CACL4B,QACAd,MAFK,EAGLgB,OAAO,GAETC,MAAO,CACL,aAAcjE,KAAKkE,SAASC,KAAKC,EAAEpE,KAArB,aAEhBqE,GAAI,CACFC,MAAO,kBAAO,YAAgB,KAE/B,CACDtE,KAAK4D,eAAeW,EAApB,KAA2B,CACzBrC,MAAO,CAAE4B,UACR9D,KAhBL,cAmBFwE,aA1CQ,WA2CN,OAAKxE,KAAL,aAEOA,KAAK4D,eAAeW,EAApB,KAA2B,CAChCd,YADgC,gBAEhCvB,MAAO,CAAE4B,MAAO9D,KAAKyE,YACpBzE,KAHH,cAF+B,MAOjC0E,QAlDQ,WAmDN,IAAMA,EAAO,iCACRC,EAAA,mCADoC,OAA5B,IAEX,kBAAmB1B,QAAQjD,KAFY,QAGvC,iBAAkBA,KAHqB,MAIvC,oBAAqBA,KAJkB,SAKvC,qBAAsBA,KALiB,UAMvC,gBAAiBA,KAAKqD,OAOxB,OAJIrD,KAAJ,SACE0E,EAAQ,mBAAD,OAAoB1E,KAA3B,aAGF,GAEF4E,cAlEQ,WAmEN,OAAO5E,KAAK8D,OAAS9D,KAArB,MAEF6E,aArEQ,WAsEN,WAAI7E,KAAKgD,OACL,kBAAOhD,KAAP,MAAiCA,KAArC,KAAuDA,KAAP,OAC3C,CAAC,QAAS,OAAQ,UAAW,WAAW8E,SAAS9E,KAAtD,OAEA,WAAWA,KAAX,QAEF+E,eA5EQ,WA6EN,OACE/E,KAAKgF,SACJ/B,QAAQjD,KAAR,SAAwBA,KAF3B,eAKFgF,QAlFQ,WAmFN,OAAOhF,KAAKqD,MAAQrD,KAApB,UAEFyE,UArFQ,WAsFN,OAAOzE,KAAK+E,eAAiB/E,KAAtB,mBAAP,GAEFiF,OAxFQ,WAyFN,SACEjF,KAAKwC,MACJxC,KADD,eAECA,KAHH,WAMO,oCAAP,QAIJkF,QAxJO,WA0JDlF,KAAKmF,OAAOC,eAAhB,YACE,eAAS,UAAW,WAApB,OAIJC,QAAS,CACPC,WADO,WAEL,IAAMC,EAAW,CACfvF,KAAKwF,OAAOC,SAAWzF,KADR,aAEfA,KAFe,aAGfA,KAHe,eAIfA,KAAKwF,OAJU,OAKfxF,KAAK0F,aAAaC,MACd3F,KAAK0F,aAAaC,MAAM,CAAEC,OAAQ5F,KAAK4F,SACvC5F,KAPN,qBAUMD,EAAkB,CACtB0D,YAAa,oBAGf,OAAOzD,KAAK4D,eAAe,MAAO7D,EAAlC,IAEF8F,WAlBO,WAmBL,OAAO7F,KAAK4D,eAAe,MAAO,CAChCH,YAAa,oBACZzD,KAAKwF,OAFR,UAIFM,SAvBO,WAwBL,IAAI/F,EAAkB,CACpB0D,YADoB,UAEpBQ,MAAO,CACL8B,KAAM,SAER1B,GAAIrE,KALgB,WAMpB0D,MAAO1D,KANa,QAOpBgG,MAAOhG,KAPa,OAQpBiG,WAAY,CAAC,CACXhE,KADW,OAEXqB,MAAOtD,KAAKkG,YAIhB,IAAKlG,KAAL,cAAyB,CACvB,IAAMmG,EAAWnG,KAAKgF,QAAUhF,KAAf,aAAmCA,KAApD,mBACAD,EAAOoG,EAASnG,KAAD,cAAfD,GAGF,OAAOC,KAAK4D,eAAe,MAAO7D,EAAM,CAACC,KAAzC,gBAGF4F,OA9CO,WA+CL5F,KAAA,UAAiBA,KAAjB,WAIJoG,OAlNO,SAkND,GACJ,IAAMA,EAASpG,KAAf,WAEA,OAAKA,KAAL,WAEOqG,EAAE,aAAc,CACrBnE,MAAO,CACLD,KAAMjC,KADD,WAELmC,OAAQnC,KAFH,OAGLC,KAAMD,KAAKC,OAEZ,CANH,IAF6BmG,M,uBCjPjC,IAAIE,EAAsB,EAAQ,QAC9BC,EAAW,EAAQ,QAIvB1F,EAAOC,QAAU,SAAU0F,GACzB,QAAWC,IAAPD,EAAkB,OAAO,EAC7B,IAAIE,EAASJ,EAAoBE,GAC7BnG,EAASkG,EAASG,GACtB,GAAIA,IAAWrG,EAAQ,MAAMsG,WAAW,yBACxC,OAAOtG,I,6DCVT,0BAIe,sBAAf,S,sDCmBA,IAAIuG,EAAW,CACbC,6BAA8B,SAASC,EAAOC,EAAGC,GAG/C,IAAIC,EAAe,GAIfC,EAAQ,GACZA,EAAMH,GAAK,EAMX,IAGII,EACAC,EAAGC,EACHC,EACAC,EACAC,EACAC,EACAC,EACAC,EAVAC,EAAOhB,EAASiB,cAAcC,OAClCF,EAAKG,KAAKhB,EAAG,GAUb,OAAQa,EAAKI,QAaX,IAAKX,KAVLF,EAAUS,EAAKK,MACfb,EAAID,EAAQ7D,MACZgE,EAAiBH,EAAQe,KAGzBX,EAAiBT,EAAMM,IAAM,GAKnBG,EACJA,EAAenC,eAAeiC,KAEhCG,EAAYD,EAAeF,GAK3BI,EAAgCH,EAAiBE,EAMjDE,EAAiBR,EAAMG,GACvBM,EAAmC,qBAAbT,EAAMG,IACxBM,GAAeD,EAAiBD,KAClCP,EAAMG,GAAKI,EACXG,EAAKG,KAAKV,EAAGI,GACbR,EAAaI,GAAKD,IAM1B,GAAiB,qBAANJ,GAAyC,qBAAbE,EAAMF,GAAoB,CAC/D,IAAImB,EAAM,CAAC,8BAA+BpB,EAAG,OAAQC,EAAG,KAAKoB,KAAK,IAClE,MAAM,IAAIC,MAAMF,GAGlB,OAAOlB,GAGTqB,4CAA6C,SAASrB,EAAcD,GAClE,IAAIuB,EAAQ,GACRnB,EAAIJ,EAER,MAAOI,EACLmB,EAAMR,KAAKX,GACGH,EAAaG,GAC3BA,EAAIH,EAAaG,GAGnB,OADAmB,EAAMC,UACCD,GAGTE,UAAW,SAAS3B,EAAOC,EAAGC,GAC5B,IAAIC,EAAeL,EAASC,6BAA6BC,EAAOC,EAAGC,GACnE,OAAOJ,EAAS0B,4CACdrB,EAAcD,IAMlBa,cAAe,CACbC,KAAM,SAAUY,GACd,IAEIC,EAFAC,EAAIhC,EAASiB,cACbzD,EAAI,GAGR,IAAKuE,KADLD,EAAOA,GAAQ,GACHE,EACNA,EAAExD,eAAeuD,KACnBvE,EAAEuE,GAAOC,EAAED,IAKf,OAFAvE,EAAEyE,MAAQ,GACVzE,EAAE0E,OAASJ,EAAKI,QAAUF,EAAEG,eACrB3E,GAGT2E,eAAgB,SAAUC,EAAGC,GAC3B,OAAOD,EAAEd,KAAOe,EAAEf,MAOpBH,KAAM,SAAUzE,EAAO4E,GACrB,IAAIgB,EAAO,CAAC5F,MAAOA,EAAO4E,KAAMA,GAChClI,KAAK6I,MAAMd,KAAKmB,GAChBlJ,KAAK6I,MAAMM,KAAKnJ,KAAK8I,SAMvBb,IAAK,WACH,OAAOjI,KAAK6I,MAAMO,SAGpBpB,MAAO,WACL,OAA6B,IAAtBhI,KAAK6I,MAAMxI,UAQtBQ,EAAOC,QAAU8F,G,qBChKnB/F,EAAOC,QAAUuI,OAAOC,IAAM,SAAYC,EAAGC,GAE3C,OAAOD,IAAMC,EAAU,IAAND,GAAW,EAAIA,IAAM,EAAIC,EAAID,GAAKA,GAAKC,GAAKA,I,qBCL/D,IAAIC,EAA8B,EAAQ,QACtCC,EAA+B,EAAQ,QAE3C7I,EAAOC,QAAU,SAAU6I,EAAUC,GACnC,OAAOH,EAA4BC,EAA6BC,GAAWC,K,oCCH7E,IAAIC,EAAW,EAAQ,QACnBC,EAAkB,EAAQ,QAC1BC,EAAoB,EAAQ,QAE5BC,EAAMC,KAAKD,IAKfnJ,EAAOC,QAAU,GAAGoJ,YAAc,SAAoBC,EAAkBC,GACtE,IAAIC,EAAIR,EAAS7J,MACbsK,EAAMP,EAAkBM,GACxBE,EAAKT,EAAgBK,EAAQG,GAC7BnK,EAAO2J,EAAgBM,EAAOE,GAC9BE,EAAMC,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,EAC5CiE,EAAQV,QAAavD,IAAR+D,EAAoBF,EAAMR,EAAgBU,EAAKF,IAAQnK,EAAMmK,EAAMC,GAChFI,EAAM,EACNxK,EAAOoK,GAAMA,EAAKpK,EAAOuK,IAC3BC,GAAO,EACPxK,GAAQuK,EAAQ,EAChBH,GAAMG,EAAQ,GAEhB,MAAOA,KAAU,EACXvK,KAAQkK,EAAGA,EAAEE,GAAMF,EAAElK,UACbkK,EAAEE,GACdA,GAAMI,EACNxK,GAAQwK,EACR,OAAON,I,sJCrBI,gBAAiB,CAC9BpI,KAD8B,mBAG9BC,MAAO,CAAE0I,KAAM3H,SAEfM,SAAU,CACR0B,OADQ,WAEN,OAAOjF,KAAK4K,KACR5K,KADG,WAEH,oCAFJ,QAMJoG,OAb8B,WAe5B,OACEpG,KAAKwF,OAAO7C,SACZ3C,KAAKwF,OAAO7C,QAAZ,MAA0B,SAAAkI,GAAI,OAAKA,EAAD,WAFpC,MAEuDA,EAAA,W,8CCf5C,yBAAkD,CAC/D5I,KAD+D,YAG/DC,MAAO,CACL4I,UAAW,CACTtI,KAAM,CAACuI,OADE,QAETpI,QAAS,GAEXqI,WAAY,CACVxI,KAAM,CAACuI,OADG,QAEVpI,QAAS,IAIb5C,KAAM,iBAAO,CACXkL,iBADW,EAEXC,kBAAczE,IAGhBpB,QAAS,CAIP8F,WAJO,WAKLC,aAAapL,KAAb,aACAoL,aAAapL,KAAb,eAKFqL,SAXO,SAWC,KAAyC,WAC/CrL,KAAA,aAEA,IAAMsL,EAAQC,SAAUvL,KAAA,UAAF,EAAE,UAAxB,IAEEA,KAAA,wBAAiCwL,WAAWC,GAAO,WACnD,WAAgB,CAAE7D,MAAF,EAAcjC,OAAO,GAArC,IADA,O,gDC9BF+F,EAAa,OAAApJ,EAAA,MAAO,EAA1B,QAMe,EAAAoJ,EAAA,OAAkB,CAC/BzJ,KAD+B,cAG/BC,MAAO,CACLyJ,UAAW,CACThJ,QADS,KAETF,UAAY,SAAAS,GACV,MAAO,CAAC,SAAU,UAAU4B,SAAS,OAA9B,OAA8B,CAArC,MAGJ8G,SAPK,QAQLC,kBARK,QASLC,YATK,QAULC,YAAa9I,SAGflD,KAAM,iBAAO,CAEXiM,iBAFW,KAGXC,cAHW,GAIXC,OAAQ,CAAC,QAAS,aAAc,aAJrB,SAKXC,UAAW,KAGbC,MAAO,CACLT,UADK,iBAELI,YAFK,iBAGLD,YAAa,kBAGfO,QA9B+B,WA+B7B,IAAMC,EAAW,eAAYtM,KAAM,aAAnC,GAEIsM,GAAY,CAAC,SAAU,UAAUxH,SAArC,IACE,eAAa,kGAAb,MAGF9E,KAAA,sBAGFuM,cAxC+B,WAyC7BvM,KAAA,yBAGFqF,QAAS,CACPmH,mBADO,WAEL,GACGxM,KAAD,YACAA,KADA,UAECA,KAHH,gBAMAA,KAAA,UAAiBA,KAAjB,wBAGA,IAFA,IAAMyM,EAAOpD,OAAA,KAAYrJ,KAAzB,WAEA,uBAAwB,CAAnB,IAAM2I,EAAX,KACE3I,KAAA,kCAA2CA,KAAKmM,UAAhD,OAGJO,aAfO,WAgBL,IAAM7B,EAAO,eAAQ7K,KAAM,YAAaqJ,OAAA,OAAcrJ,KAAd,gBAAoC,CAC1EqE,GAAIrE,KADsE,wBAE1EiE,MAAOjE,KAAK2M,6BAFd,GAOA,OAFA3M,KAAA,gBAEA,GAEF2M,uBAzBO,WA0BL,MAAO,CACL5G,KADK,SAEL,iBAFK,EAGL,gBAAiB1D,OAAOrC,KAAD,YAG3B4M,sBAhCO,WAgCc,WACnB,GAAI5M,KAAJ,SAAmB,MAAO,GAE1B,IAAMmM,EAAN,GAgCA,OA9BInM,KAAJ,aACEmM,EAAA,WAAwB,SAAAU,GACtB,kBACA,oBAEFV,EAAA,WAAwB,SAAAU,GACtB,kBACA,sBAGFV,EAAA,MAAmB,SAAAU,GACjB,IAAMlB,EAAY,eAAlB,GACA,GAAeA,EAAA,QAEfkB,EAAA,kBAEA,YAAiB,EAAjB,UAIA7M,KAAJ,cACEmM,EAAA,MAAmB,SAAAU,GACjB,kBAEAA,EAAA,kBAEA,YAAiB,EAAjB,WAIJ,GAEFC,aArEO,SAqEK,GAAW,MAErB,GAAI9M,KAAJ,iBAA2B,OAAOA,KAAP,iBAE3B,IAAI2L,EAAJ,KAEA,GAAI3L,KAAJ,UAAoB,CAClB,IAAMmK,EAASnK,KAAK6L,kBAAoB7L,KAAzB,IAAf,SAIE2L,EAFF,kBAAW3L,KAAP,UAEUmK,EAAA,cAAqBnK,KAAjC2L,WACU3L,KAAK2L,UAAV,IAEQ3L,KAAK2L,UAAlB,IAGY3L,KAAZ2L,eAEG,GAAkC,IAA9B3L,KAAKiM,cAAc5L,QAAiBL,KAAKiM,cAAc5L,SAA3D,EAA0E,CAI/E,IAAM0M,EAAK/M,KAAKiM,cAAc,GAA9B,kBAOEN,EALAoB,GACAA,EAAA,SADA,QAEAA,EAAA,sBAAyB,SAAAC,GAAD,OAAYA,EAAA,SAAa,CAAC,cAAe,YAAYlI,SAASkI,EAAA,QAHxF,SAMeD,EAAb,eAEY/M,KAAKiM,cAAc,GAA/B,SAEOY,IAETlB,EAAakB,EAAA,eAAmBA,EAAhC,QAMF,OAFA7M,KAAA,kBAAwB,SAAA2L,QAAA,gBAAwBsB,KAAxB,aAAAtB,EAAxB,KAEO3L,KAAP,kBAEFkN,eAjHO,WAkHL,OAAO,eAAQlN,KAAM,UAAWA,KAAlB,iBAAd,IAEFmN,cApHO,WAqHL,IAAMC,EAAN,KACA,MAAO,CACL,YACE,OAAOA,EAAP,UAEF,aACEA,EAAA,cAINC,sBA/HO,WAgIL,GACGrN,KAAD,WACCA,KAFH,kBAOA,IAFA,IAAMyM,EAAOpD,OAAA,KAAYrJ,KAAzB,WAEA,uBAAwB,CAAnB,IAAM2I,EAAX,KACG3I,KAAA,uCAAuDA,KAAKmM,UAA5D,IAGHnM,KAAA,eAEFsN,eA7IO,WA8ILtN,KAAA,wBACAA,KAAA,sBACAA,KAAA,eACAA,KAAA,yBC/LN,SAASuN,EAAT,GAEE,IADA,IAAMC,EAAN,GACSC,EAAT,EAAoBA,EAAQlI,EAA5B,OAA6CkI,IAAS,CACpD,IAAMC,EAAQnI,EAAd,GACImI,EAAA,UAAkBA,EAAtB,YACEF,EAAA,QAEAA,EAAA,WAAAA,EAAO,eAASD,EAAeG,EAA/B,aAIJ,SAIa,aAAApL,EAAA,eAAyB,CACtCL,KADsC,YAGtClC,KAHsC,WAIpC,MAAO,CACL4N,iBADK,EAELzH,UAFK,EAGL0H,aAAa,IAIjBxB,MAAO,CACLlG,SADK,SACG,GACN,MAGA,IADA,IAAM2H,EAAiB7N,KAAvB,oBACSyN,EAAT,EAAoBA,EAAQI,EAA5B,OAAmDJ,IACjDI,EAAA,iBAKNxI,QAAS,CACPyI,kBADO,WAEL,OAAI9N,KAAJ,gBAAiCuN,EAAevN,KAAtB,WAE1B,IAEF+N,yBANO,WAUL,IAHA,IAAMC,EAAN,GACMH,EAAiB7N,KAAvB,oBAESyN,EAAT,EAAoBA,EAAQI,EAA5B,OAAmDJ,IACjDO,EAAA,WAAAA,EAAM,eAASH,EAAA,GAAf,kCAGF,UAEFI,8BAhBO,WAiBL,IAAMD,EAAS,CAAChO,KAAhB,KAKA,OAJIA,KAAKkO,MAAT,SAAwBF,EAAA,KAAYhO,KAAKkO,MAAjB,SACpBlO,KAAJ,SAAkBgO,EAAA,KAAYhO,KAAKmO,QAAjB,KAClBH,EAAA,WAAAA,EAAM,eAAShO,KAAf,6BAEA,MC3DS,G,UAAA,uBAAsC,CACnDiC,KADmD,WAGnDC,MAAO,CACLkM,MAAOnL,SAGTlD,KAAM,iBAAO,CACXsO,UAAU,IAGZ9K,SAAU,CACR+K,WADQ,WAEN,OAAOtO,KAAKqO,UAAYrO,KAAjB,OAA+BA,KAAtC,WAIJoM,MAAO,CACLlG,SADK,WAEHlG,KAAA,cAIJkF,QAvBmD,WAyB7C,SAAUlF,KAAd,QACE,eAAQ,OAAR,OAIJqF,QAAS,CACPkJ,gBADO,SACQ,GACb,OAAQvO,KAAKsO,YAAN,EAA+BE,IAAY,CAACxO,KAAnD,uBC/BN,SAASyO,EAAT,GACE,IAAMjM,EAAO,eAAb,GAEA,MAAI,YAAAA,GAAJ,WAA0BA,GAEnBU,EAAA,WAAiB+J,KAAxB,aAIa,aAAA3K,EAAA,gBAII,CACjBL,KADiB,aAGjBC,MAAO,CACLwM,OAAQ,CACN/L,SADM,EAENF,UAAWgM,GAEbE,aAAc,CACZnM,KADY,OAEZG,QAAS,KAIb5C,KAAM,iBAAO,CACXkM,cADW,KAEX2C,aAAa,IAGfxC,MAAO,CACLsC,OADK,WAEH1O,KAAA,eACAA,KAAA,cAEFsO,WALK,WAMHtO,KAAA,UAAeA,KAAf,cAIJ6O,YA7BiB,WA6BN,WACT7O,KAAA,WAAe,WACb,GAAI,EAAJ,cAAwB,CACtB,IAAM2L,EAAYmD,MAAA,QAAc,EAAd,eAAoC,EAApC,cAAyD,CAAC,EAA5E,eAEAnD,EAAA,SAAkB,SAAAd,GAChB,GAAKA,EAAL,KACK,MAAL,YAEA,IAAMV,EAAS,QAAa,iBAAb,WACX,EADW,IAEX,MAFJ,YAIA,8BAAiCU,EAAjC,gBAMRwB,QAhDiB,WAiDfrM,KAAA,YAAmBA,KAAnB,cAGF+O,YApDiB,WAqDf/O,KAAA,aAGFuM,cAxDiB,WA0Df,IAQE,GANEvM,KAAKkO,MAAMM,SACXxO,KAAKkO,MAAMM,QAFb,YAIExO,KAAA,qCAA0CA,KAAKkO,MAA/C,SAGElO,KAAJ,cAAwB,CACtB,IAAM2L,EAAYmD,MAAA,QAAc9O,KAAd,eAAoCA,KAApC,cAAyD,CAACA,KAA5E,eACA2L,EAAA,SAAkB,SAAAd,GAChBA,EAAA,KACEA,EAAA,IADF,YAEEA,EAAA,2BAAgCA,EAFlC,SAKJ,MAAOgC,GAAKmC,QAAA,SAGhB3J,QAAS,CACP4J,gBADO,WAEL,IAAMC,EAAU,eAAqBlP,KAAD,OAApC,6BAEA,OAAOkP,GAAW,kBAChB,EAAW,KAGfC,WARO,WAmBL,MAVInP,KAAKoP,eACNpP,KAAKkO,MADJ,SAEFlO,KAFE,kBAKFA,KAAA,SALE,IAMFA,KAAA,QANF,WAOEA,KAAA,SAMAmK,GAFF,IAAInK,KAAK0O,OAEEW,SAAA,cAAT,cACK,kBAAWrP,KAAP,OAEAqP,SAAA,cAAuBrP,KAAhC,QAGSA,KAAT,OAGF,GAKAmK,EAAA,YAAmBnK,KAAKkO,MAAxB,SAEAlO,KAAA,gBANE,eAAY,2BAAD,OAA4BA,KAAK0O,QAAjC,cAAX,W,wBC9HO,SAAApM,EAAA,MAAO,EAAD,YAAN,eAIN,CACPL,KADO,YAGPC,MAAO,CACLoN,SADK,QAELxL,MAAO,CACLtB,KADK,OAELG,QAAS,WAEX4M,KAAM,CACJ/M,KADI,QAEJG,SAAS,GAEX6M,QAAS,CACPhN,KAAM,CAACuI,OADA,QAEPpI,QAAS,KAEXW,MAAO,CACLX,SAAS,GAEX8M,OAAQ,CACNjN,KAAM,CAACuI,OADD,QAENpI,QAAS,IAIbY,SAAU,CACRmM,QADQ,WAEN,IAAM3P,EAAOC,KAAK2D,mBAAmB3D,KAAxB,MAAoC,CAC/CyD,YAD+C,mBAE/CuC,MAAO,CACLwJ,QAASxP,KAAK2P,mBAIlB,OAAO3P,KAAK4D,eAAe,MAA3B,IAEFc,QAXQ,WAYN,uBACE,sBAAuB1E,KADlB,SAEL,oBAAqBA,KAFhB,UAGFA,KAAK4P,eAGZD,gBAlBQ,WAmBN,OAAO5E,OAAO/K,KAAKkG,SAAWlG,KAAhB,QAAd,IAEF6P,OArBQ,WAsBN,MAAO,CACLJ,OAAQzP,KAAKyP,UAKnBpK,QAAS,CACPQ,WADO,WAEL,OAAO7F,KAAK4D,eAAe,MAAO,CAChCH,YAAa,sBACZzD,KAAKwF,OAFR,WAMJY,OA9DO,SA8DD,GACJ,IAAMb,EAAW,CAACvF,KAAlB,SAIA,OAFIA,KAAJ,UAAmBuF,EAAA,KAAcvF,KAAd,cAEZqG,EAAE,MAAO,CACd5C,YADc,YAEdC,MAAO1D,KAFO,QAGdgG,MAAOhG,KAAK6P,QAHd,MClFJ,IC2Be,yBAA4D,CACzE5N,KADyE,cAGzEC,MAAO,CACL4N,YADK,QAELC,aAFK,OAGLC,eAAgB,CAACjF,OAAQ1I,SAG3BtC,KATyE,WAUvE,MAAO,CACLkQ,eADK,EAEL9B,QAAS,OAIb/B,MAAO,CACL0D,YADK,SACM,GACJ9P,KAAL,WAEA,EAAWA,KAAX,gBACKA,KAAKkQ,gBAId3D,cAzByE,WA0BvEvM,KAAA,iBAGFqF,QAAS,CACP8K,cADO,WAEL,IAAMhC,EAAU,IAAI,EAAS,CAC3BiC,UAAW,CACTd,SAAUtP,KADD,SAETsD,OAFS,EAGTQ,MAAO9D,KAHE,aAITwP,QAASxP,KAAKgQ,kBAIlB7B,EAAA,SAEA,IAAMkC,EAASrQ,KAAKsP,SAChBtP,KAAKsQ,IADM,WAEXjB,SAAA,cAFJ,cAIAgB,GAAUA,EAAA,aAAoBlC,EAApB,IAAiCkC,EAA3C,YAEArQ,KAAA,WAEFkQ,WArBO,WAqBG,WAGR,GAFAlQ,KAAA,cAEIA,KAAJ,YAgBA,OAdKA,KAAL,SAAmBA,KAAKmQ,gBAExBnQ,KAAA,eAAsBuQ,uBAAsB,WACrC,EAAL,eAEA,IAAI,eACF,iBAAsBlO,OAAO,eAA7B,GACS,EAAJ,MACL,iBAAsB,eAAU,EAAhC,MAGF,wBAGF,GAGFmO,cA3CO,WA2CyB,WAAjBC,IAAiB,yDAC1BzQ,KAAJ,UACE,eAAqBA,KAAKmO,QAAN,qBAAoC,WAEnD,EAAD,SACC,UADD,KAEC,cAFD,aAGA,UAHA,QAIA,EALF,WAQA,qCAAwC,UAAxC,KACA,qBACA,mBAMFuC,qBAAqB1Q,KAArB,gBAEAA,KAAA,kBAGFyQ,GAAczQ,KAAdyQ,cAEFE,eArEO,SAqEO,GACZ,eAAI9D,EAAA,KAAsB,CACxB,GACE,CAAC,QAAS,WAAY,UAAU/H,SAAU+H,EAAA,OAA1C,UAECA,EAAA,OAHH,kBAIE,OAEF,IAAM+D,EAAK,CAAC,OAAD,GAAc,OAAzB,QACMC,EAAO,CAAC,OAAD,KAAgB,OAA7B,UAEA,GAAID,EAAA,SAAY/D,EAAhB,SACGA,EAAA,cACI,KAAIgE,EAAA,SAAchE,EAAlB,SAGL,OAFCA,EAAA,WAMDA,EAAA,SAAa7M,KAAb,SACD,YAAA6M,EAAA,MAAwBA,EAAA,SAAawC,SADpC,MAEFrP,KAAK8Q,UAFP,KAEqBjE,EAAA,kBAEvBkE,aA7FO,SA6FK,GACV,IAAKC,GAAMA,EAAA,WAAgB/D,KAA3B,aAA8C,OAAO,EAErD,IAAMjH,EAAQiL,OAAA,iBAAd,GACA,MAAO,CAAC,OAAQ,UAAUnM,SAASkB,EAA5B,YAAiDgL,EAAA,aAAkBA,EAA1E,cAEFE,aAnGO,SAmGK,KACV,GAAIF,EAAA,aAAJ,YAAiC,OAAO,EAExC,IAAMG,EAAN,IAAqBH,EAAA,UACfI,EAAkBJ,EAAA,UAAeA,EAAf,eAAmCA,EAA3D,aACMK,EAAcC,EAApB,EACMC,EAAgBD,EAAtB,EAEA,QAAKH,IAAL,OACKC,IAAL,OACKD,IAAL,IACSnR,KAAKkR,aAAaF,EAAlB,WAAP,KAKJQ,SAnHO,SAmHC,KACN,OAAIR,IAAJ,GAEW,OAAAA,GAAeA,IAAO3B,SAA1B,MAGErP,KAAKwR,SAASR,EAAd,WAAP,IAGJF,UA5HO,SA4HE,GACP,IAAMW,EAAO5E,EAAA,MAAU7M,KAAK0R,aAA5B,GACMJ,EAAQzE,EAAd,OAEA,GAAI,YAAAA,EAAA,MAAwB4E,EAAA,KAAYpC,SAAxC,KAAuD,CACrD,IAAMsC,EAAS3R,KAAKkO,MADiC,OAG/C0D,EAAWX,OAAA,eAAjB,WACA,QAAIU,GAAU3R,KAAK+Q,aAAfY,IAAuC3R,KAAKwR,SAASI,EAAzD,MACU5R,KAAKkR,aAAaS,EAA1B,GAKJ,IAAK,IAAIlE,EAAT,EAAoBA,EAAQgE,EAA5B,OAAyChE,IAAS,CAChD,IAAMuD,EAAKS,EAAX,GAEA,GAAIT,IAAJ,SAAqB,OAAO,EAC5B,GAAIA,IAAO3B,SAAX,gBAAqC,OAAO,EAC5C,GAAI2B,IAAOhR,KAAKkO,MAAhB,QAA+B,OAAO,EAEtC,GAAIlO,KAAK+Q,aAAT,GAAsC,OAAQ/Q,KAAKkR,aAAaF,EAA1B,GAGxC,UAKFU,aAzJO,SAyJK,GACV,GAAI7E,EAAJ,aAAoB,OAAOA,EAAP,eAEpB,IAAM4E,EAAN,GACIT,EAAKnE,EAAT,OAEA,QAAW,CAGT,GAFA4E,EAAA,QAEA,SAAIT,EAAA,QAIF,OAHAS,EAAA,eACAA,EAAA,aAEA,EAGFT,EAAKA,EAAL,cAEF,UAEFa,WA7KO,WA8KD7R,KAAKkE,SAAS4N,WAAlB,UACEzC,SAAA,oDAEA,eAAwB4B,OAAQ,QAASjR,KAAlB,eAA8D,CAAE+R,SAAS,IAChGd,OAAA,2BAAmCjR,KAAnC,kBAGJyQ,WArLO,WAsLLpB,SAAA,sDACA4B,OAAA,4BAAoCjR,KAApC,gBACAiR,OAAA,8BAAsCjR,KAAtC,oBCjPS,gBAAW,CACxBiC,KADwB,aAGxBC,MAAO,CACL8P,YAAa,MAGfjS,KAAM,iBAAO,CACXmG,UADW,EAEX+L,cAAe,OAGjB7F,MAAO,CACLlG,SADK,SACG,GACN,EACElG,KAAA,cAAqBA,KAArB,YAEAA,KAAA,4BAAkCA,KAAlC,iBAKNqF,QAAS,CACP6M,KADO,SACH,GAAY,WACdlS,KAAA,gBACAwL,YAAW,WACT,qBClBO,G,UAAA,uBAA6B,CAC1CvJ,KAD0C,YAG1ClC,KAH0C,WAIxC,MAAO,CACLoS,aADK,KAELC,aAFK,KAGLC,eAHK,EAILnM,UAAU,IAGd3C,SAAU,CACR+O,aADQ,WAEN,wBAAWrB,OAAwB,OAAO,EAE1C,IAAMzC,EAAUxO,KAAKmS,cAAgBnS,KAAKkO,MAHhC,QAMJT,EAASzN,KAAD,SAEVA,KAAKuS,aAAavS,KAAKoS,cAAgB,CAAvC,IAFJ,EACI,eADU,GAId,aAAI3E,EAVM,EAcHlC,SAAP,KAGJlG,QAAS,CACPkN,aADO,WAeL,IAdmC,IAAvBC,EAAuB,uDAAzB,GACJC,EAAOzS,KADsB,IAI7B0S,EAAM,CAAC1S,KAAD,eAAsB,eAJC,IAQ7B2S,EAAiB,GAAH,sBACftD,SAAA,uBADkB,4BAAH,eAEfA,SAAA,uBAV8B,+BAc1B5B,EAAT,EAAoBA,EAAQkF,EAA5B,OAAmDlF,IAC5C+E,EAAA,SAAiBG,EAAtB,KACED,EAAA,KAAS,eAAUC,EAAnB,KAIJ,OAAO1I,KAAA,UAAAA,KAAP,Q,YChDN,SAAS2I,IACP,SAGF,SAASC,EAAT,OAKE,IAAKhG,IAAL,IAAUiG,EAAcjG,EAAd,GAAqC,OALoC,EAUnF,IAAMjC,EAAO,eAAb,GACA,GACwB,qBAAfmI,YACPnI,aADA,YAEAA,EAAA,OAAciC,EAHhB,OAIE,OAfiF,EAmBnF,IAAMmG,GAAa,0BAAOC,EAAP,QAAqCA,EAAA,MAAtC,SAAiE,iBAnBA,OA4BnF,OAPAD,EAAA,KArBmF,IA4B3EA,EAAA,MAAc,SAAAhC,GAAE,OAAIA,EAAA,SAAYnE,EAAxC,WAGF,SAASiG,EAAT,KACE,IAAM5M,EAAY,0BAAO+M,EAAP,QAAqCA,EAAA,MAAtC,kBAAjB,EAEA,OAAO/M,EAAP,GAGF,SAASgN,EAAT,OACE,IAAMC,EAAU,oBAAOF,EAAP,MAAsCA,EAAtC,MAAsDA,EAAA,MAAtE,QAEAjC,EAAA,uCAA6C6B,EAAWhG,EAAGmE,EAA3D,IAA2ExF,YAAW,WACpFsH,EAAcjG,EAAd,OAAwCsG,EAAxC,KADF,GAKF,SAASC,EAAT,KACE,IAAMxI,EAAO,eAAb,GAEAyI,EAAA,UAEIzI,aAAJ,YACEyI,EAAA,GAIG,IAAMC,EAAe,CAM1BC,SAN0B,SAMlB,KACN,IAAMC,EAAW,SAAA3G,GAAD,OAAcqG,EAAUrG,EAAD,EAAvC,IACM4G,EAAe,SAAA5G,GACnBmE,EAAA,sCAA4C6B,EAAWhG,EAAD,EAAtD,IAGFuG,EAAapC,GAAK,SAAA0C,GAChBA,EAAA,+BACAA,EAAA,sCAGF1C,EAAA,cAAmB,CACjB2C,yBADiB,EAEjBH,UACAC,gBAIJG,OAxB0B,SAwBpB,GACC5C,EAAL,gBAEAoC,EAAapC,GAAK,SAAA0C,GACXA,GAAQ1C,EAAb,gBACA0C,EAAA,4BAAiC1C,EAAA,cAAjC,YACA0C,EAAA,gCAAqC1C,EAAA,cAArC,2BAGKA,EAAP,iBAIJ,IChFM,EAAa,OAAA1O,EAAA,MAAO,EAAD,UAAzB,QAWe,gBAAkB,CAC/BL,KAD+B,WAG/BgE,WAAY,CAAEqN,aAAA,GAEdpR,MAAO,CACLqN,KADK,QAEL3D,SAFK,QAGLiI,WAHK,QAILC,MAJK,QAKLC,SAAU,CACRvR,KAAM,CAACH,OADC,QAERM,QAAS,QAEXqR,iBATK,QAUL7R,OAAQ,CACNK,KADM,OAENG,QAAS,iBAEXsR,WAdK,QAeLC,YAAa,CACX1R,KADW,QAEXG,SAAS,GAEXwR,WAnBK,QAoBL/R,WAAY,CACVI,KAAM,CAACH,OADG,SAEVM,QAAS,qBAEXyR,MAAO,CACL5R,KAAM,CAACH,OADF,QAELM,QAAS,SAIb5C,KAnC+B,WAoC7B,MAAO,CACLsU,YADK,KAELC,SAFK,EAGLC,gBAHK,EAILrO,WAAYlG,KAJP,MAKLqS,eALK,IAMLmC,sBAAuB,OAI3BjR,SAAU,CACRmB,QADQ,WACD,MACL,6BACI,mBAAY1E,KAAb,cAAD,QADK,GAAP,iBAEE,mBAAoBA,KAFf,UAAP,iBAGE,uBAAwBA,KAHnB,YAAP,iBAIE,uBAAwBA,KAJnB,YAAP,iBAKE,uBAAwBA,KALnB,YAAP,iBAME,qBAAsBA,KAAKsU,SAN7B,GASFG,eAXQ,WAYN,MAAO,CACL,qBADK,EAEL,4BAA6BzU,KAAKkG,WAGtCwO,aAjBQ,WAkBN,OAAOzR,UACHjD,KAAKwF,OAAP,aACExF,KAAK0F,aAFT,aAOJ0G,MAAO,CACLlG,SADK,SACG,GAIC,MAHP,GACElG,KAAA,OACAA,KAAA,eAEAA,KAAA,gBACAA,KAAA,SACA,SAAAA,KAAA,oCAGJ6T,WAXK,SAWK,GACH7T,KAAL,WAEA,GACEA,KAAA,aACAA,KAAA,oBAEAA,KAAA,aACAA,KAAA,iBAKNkF,QA/F+B,WAiGzBlF,KAAKmF,OAAOC,eAAhB,eACE,eAAQ,aAAR,OAIJyJ,YAtG+B,WAsGpB,WACT7O,KAAA,WAAe,WACb,WAAgB,EAAhB,SACA,YAAiB,EAAjB,WAIJuM,cA7G+B,WA8G7B,qBAAW0E,QAAwBjR,KAAK4T,UAG1CvO,QAAS,CACPsP,aADO,WACK,WACV3U,KAAA,SADU,EAIVA,KAAA,WAAe,WACb,aACAiR,OAAA,aAAoB,EAApB,gBACA,iBAAsBA,OAAA,YAAkB,kBAAO,WAAzB,IAAtB,SAGJ2D,iBAXO,SAWS,GACd,IAAMzK,EAAS0C,EADS,OAMxB,QACE7M,KAAKoP,eACJpP,KADD,UAEAA,KAAKkO,MAAMM,QAAQqG,SAFnB,IAGC7U,KAAKmO,SAAWhE,IAAWnK,KAAKmO,QAAQmC,IAAIuE,SAJxC,KAKF7U,KAAKsS,cAAgBtS,KAL1B,gBAOF6R,WAxBO,WAyBD7R,KAAJ,WACEqP,SAAA,mDAEA,yCAGJyF,KA/BO,WA+BH,YACD9U,KAAD,aAAqBA,KAArB,aAAyCA,KADvC,aAGFA,KAAA,WAAe,WACb,aAAe,WACb,wBAA6BqP,SAA7B,cACA,wBACA,gBAIN0F,KA1CO,WA2CL9D,OAAA,2BAAmCjR,KAAnC,YAEF4T,OA7CO,WA8CL3C,OAAA,8BAAsCjR,KAAtC,YAEFgV,eAhDO,SAgDO,GACZhV,KAAA,yBAEIA,KAAJ,WACEA,KAAA,kBAAyBA,KAAzB,eAEAA,KAAA,aAGJiV,UAzDO,SAyDE,GACP,GAAIpI,EAAA,UAAc,OAAd,MAA+B7M,KAAK8N,oBAAxC,OACE,GAAK9N,KAAL,WAIYA,KAAL,kBACLA,KAAA,mBALoB,CACpBA,KAAA,YACA,IAAM2L,EAAY3L,KAAlB,eACAA,KAAA,WAAe,kBAAM2L,GAAcA,EAAnC,WAKJ3L,KAAA,oBAIFkV,UAvEO,SAuEE,GACP,GAAKrI,GAAM7M,KAAX,aAEA,IAAMmK,EAAS0C,EAAf,OAEA,GACE,IAEC,CAACwC,SAAUrP,KAAKkO,MAAhB,kBAFD,KAIClO,KAAKkO,MAAMM,QAAQqG,SAJpB,IAMA7U,KAAA,cAAqBA,KANrB,iBAQCA,KAAK+N,2BAA2BoH,MAAK,SAAAnE,GAAE,OAAIA,EAAA,SAT9C,MAWE,CAEA,IAAMoE,EAAYpV,KAAKkO,MAAMM,QAAQ6G,iBAArC,4EACMrE,EAAK,wBAAoB,SAAAA,GAAE,OAAKA,EAAA,aAAtC,eACAA,GAAMA,EAAN,WAGJnL,WA9FO,WA8FG,WACR,OAAO7F,KAAKuO,iBAAgB,iBAAM,CAChC,mBAAoC,CAClCrM,MAAO,CACL0I,MADK,EAELkJ,MAAO,EAFF,MAGLvE,KAAM,EAAKA,OAEZ,CACD,uBAA2B,CACzB7L,MAAO,EADkB,eAEzBO,MAAO,gBACL8B,KADK,WAELuP,SAAU,kBAFL,GAGF,qBAELjR,GAAI,CAAEkR,QAAS,EAAKN,WACpBjP,MAAO,CAAEyJ,OAAQ,EAAK6C,cACtBkD,IAAK,WACJ,CAAC,EAlBR,yBAsBFC,cArHO,WAsHL,IAAMjH,EAAUxO,KAAhB,kBAEA,OAAKA,KAAL,WAEOA,KAAK4D,eAAe,aAAc,CACvC1B,MAAO,CACLD,KAAMjC,KADD,WAELmC,OAAQnC,KAFH,OAGL0V,QAAQ,IAET,CANH,IAF6BlH,GAU/BmH,gBAlIO,WAmIL,IAAM5V,EAAkB,CACtB2D,MAAO1D,KADe,QAEtBwV,IAFsB,SAGtBvP,WAAY,CACV,CACEhE,KADF,gBAEEqB,MAAO,CACL6P,QAASnT,KADJ,eAEL4U,iBAAkB5U,KAFb,iBAGL4V,QAAS5V,KAAK+N,2BAGlB,CAAE9L,KAAF,OAAgBqB,MAAOtD,KAAKkG,WAE9BF,MAAO,CACL6P,gBAAiB7V,KAAKmC,SAY1B,OARKnC,KAAL,aACED,EAAA,uCACKA,EADQ,OAAb,IAEEgU,SAA4B,SAAlB/T,KAAK+T,cAAsBtN,EAAY,eAAczG,KAFpD,UAGXoU,MAAsB,SAAfpU,KAAKoU,WAAmB3N,EAAY,eAAczG,KAAD,UAIrDA,KAAK4D,eAAe,MAAO7D,EAAMC,KAAxC,oBAIJoG,OAnR+B,SAmRzB,GACJ,OAAOC,EAAE,MAAO,CACd5C,YADc,sBAEdC,MAAO,CACL,gCACkB,KAAhB1D,KAAK0O,SAAL,IACA1O,KAAK0O,QACW,WAAhB1O,KAAK0O,QAETzK,MAAO,CAAE8B,KAAM,WACd,CACD/F,KADC,eAEDA,KAXF,mB,oCC3TJ,IAAI8V,EAAsB,EAAQ,QAC9BvP,EAAW,EAAQ,QACnBuD,EAAkB,EAAQ,QAC1BJ,EAA+B,EAAQ,QAEvCqM,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,YAAY,SAAkBC,EAAOzL,GAC1D,IAAIH,EAAI0L,EAAY/V,MAChBK,EAASgK,EAAEhK,OACX6V,EAAapM,EAAgBmM,EAAO5V,GACpC8V,EAAIzM,EAA6BW,GACrC,OAAO,IAAI8L,EACT9L,EAAE+L,OACF/L,EAAEgM,WAAaH,EAAa7L,EAAEiM,kBAC9B/P,QAAkBE,IAAR+D,EAAoBnK,EAASyJ,EAAgBU,EAAKnK,IAAW6V,Q,uBCnB3E,IAAIK,EAAoB,EAAQ,QAEhC1V,EAAOC,QAAU,SAAU0F,EAAIgQ,GAC7B,IAAIC,EAASF,EAAkB/P,GAC/B,GAAIiQ,EAASD,EAAO,MAAM7P,WAAW,gBACrC,OAAO8P,I,2CCLT,IAAIrQ,EAAS,WAAa,IAAIsQ,EAAI1W,KAAS2W,EAAGD,EAAI9S,eAAmBgT,EAAGF,EAAIG,MAAMD,IAAID,EAAG,OAAOC,EAAG,cAAc,CAACnT,YAAY,KAAKQ,MAAM,CAAC,MAAQ,GAAG,cAAc,KAAK,CAAC2S,EAAG,WAAW,CAAC3S,MAAM,CAAC,KAAO,GAAG,eAAe,GAAG,iBAAiB,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,KAAO,GAAG,IAAM,GAAG,cAAc,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,MAAQ,OAAO,CAAC2S,EAAG,cAAc,CAACnT,YAAY,QAAQ,CAACmT,EAAG,YAAY,CAACE,YAAY,CAAC,aAAa,QAAQ7S,MAAM,CAAC,MAAQ,KAAK,cAAc,KAAK,CAAC2S,EAAG,QAAQ,CAACnT,YAAY,UAAUQ,MAAM,CAAC,aAAa,KAAK,YAAY,MAAM,IAAM,EAAQ,YAA0B,GAAG2S,EAAG,MAAM,CAACnT,YAAY,8BAA8B,CAACmT,EAAG,WAAW,CAACnT,YAAY,WAAW,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,mBAAmB,QAAQ,GAAGL,EAAG,MAAM,CAACnT,YAAY,8CAA8C,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIQ,aAAa,OAAyB,IAAjBR,EAAIS,UAAiBP,EAAG,MAAM,CAACA,EAAG,UAAU,CAAC3S,MAAM,CAAC,KAAOyS,EAAIU,YAAY,CAACV,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIS,WAAW,QAAQ,GAAGT,EAAIW,KAAKT,EAAG,MAAM,CAACA,EAAG,SAAS,CAACpB,IAAI,OAAO8B,MAAM,CAAChU,MAAOoT,EAAS,MAAErD,SAAS,SAAUkE,GAAMb,EAAIc,MAAMD,GAAKE,WAAW,UAAU,CAAGf,EAAIgB,UAAahB,EAAIiB,QAAQC,eAAkelB,EAAIW,KAAtdT,EAAG,eAAe,CAACpB,IAAI,WAAWvR,MAAM,CAAC,MAAQyS,EAAIO,GAAG,YAAY,cAAcP,EAAImB,GAAK,WAAa,cAAc,iBAAiB,WAAc,OAAQnB,EAAImB,IAAMnB,EAAImB,IAAO,KAAOnB,EAAImB,GAAK,WAAa,OAAO,MAAQnB,EAAIoB,cAAc,QAAU,GAAG,SAAW,GAAG,aAAe,MAAM,KAAO7N,KAAK8N,UAAU1T,GAAG,CAAC,eAAe,WAAc,OAAQqS,EAAImB,IAAMnB,EAAImB,KAAQP,MAAM,CAAChU,MAAOoT,EAAW,QAAErD,SAAS,SAAUkE,GAAMb,EAAIsB,QAAQT,GAAKE,WAAW,aAAwBf,EAAIgB,UAAahB,EAAIiB,QAAQC,eAUxhDlB,EAAIW,KAVoiDT,EAAG,WAAW,CAAC3S,MAAM,CAAC,wBAAwB,KAAK,CAAC2S,EAAG,QAAQ,CAAClT,MAAM,CAC5sD,4BAA6BgT,EAAIc,MACjC5L,UAAW8K,EAAIc,OACfvT,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAIuB,SAAS,CAACvB,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,aAAaL,EAAG,QAAQ,CAAClT,MAAM,CACxG,4BAA6BgT,EAAIc,MACjC5L,UAAW8K,EAAIc,OACfvT,MAAM,CAAC,MAAQ,SAASI,GAAG,CAAC,MAAQ,SAAS6T,GAAQxB,EAAIgB,UAAW,EACpEhB,EAAIQ,YAAcR,EAAIO,GAAG,2BAA4B,CAACP,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,2BAA2BL,EAAG,QAAQ,CAAClT,MAAM,CACxH,4BAA6BgT,EAAIc,MACjC5L,UAAW8K,EAAIc,OACfvT,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAIyB,YAAY,CAACzB,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,eAAe,GAAaP,EAAY,SAAEE,EAAG,WAAW,CAACA,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAI0B,sBAAsB,CAAC1B,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,sBAAsBL,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQ,SAAS6T,GAAQxB,EAAIgB,SAAoBhB,EAAI2B,mBAAmB,CAAC3B,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,eAAe,GAAGP,EAAIW,KAAMX,EAAIiB,QAAsB,eAAEf,EAAG,WAAW,CAACA,EAAG,cAAc,CAACA,EAAG,QAAQ,CAAC3S,MAAM,CAAC,QAAU,WAAW,CAAC2S,EAAG,aAAa,CAAC3S,MAAM,CAAC,MAAQyS,EAAI4B,WAAW,GAAG1B,EAAG,QAAQ,CAAC3S,MAAM,CAAC,QAAU,WAAW,CAAC2S,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQ,SAAS6T,GAAQ,OAAOxB,EAAI6B,kBAAkB,CAAC7B,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,qBAAqBL,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQ,SAAS6T,GAAQ,OAAOxB,EAAIyB,eAAe,CAACzB,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,eAAe,IAAI,IAAI,GAAGP,EAAIW,MAAM,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IACx/BmB,EAAkB,G,0SC+Bf,SAASC,EAAO1R,EAAG8F,GACtB,IAAIzI,EAAI,GACR,IAAK,IAAIsU,KAAK3R,EAAOsC,OAAO/I,UAAU8E,eAAeuT,KAAK5R,EAAG2R,IAAM7L,EAAE+L,QAAQF,GAAK,IAC9EtU,EAAEsU,GAAK3R,EAAE2R,IACb,GAAS,MAAL3R,GAAqD,oBAAjCsC,OAAOwP,sBACtB,KAAInY,EAAI,EAAb,IAAgBgY,EAAIrP,OAAOwP,sBAAsB9R,GAAIrG,EAAIgY,EAAErY,OAAQK,IAC3DmM,EAAE+L,QAAQF,EAAEhY,IAAM,GAAK2I,OAAO/I,UAAUwY,qBAAqBH,KAAK5R,EAAG2R,EAAEhY,MACvE0D,EAAEsU,EAAEhY,IAAMqG,EAAE2R,EAAEhY,KAE1B,OAAO0D,EAwDkBiF,OAAO0P,OAsGX1P,OAAO0P,O,yBC/MzB,MAAMC,EAAS,CAClB,MACA,SACA,WACA,OACA,IACA,IACA,IACA,KAGSC,EAAgB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACtCC,EAAQ,CAAC,eAAgB,UAAW,QAAS,QAC7CC,EAAQ,CAAC,YAAa,aAAc,cAC3CC,EAAiB,GACR,OACXlX,MAAO,CACHmX,QAAS,CACL7W,KAAMuI,OACNtI,UAAY4W,GAAYA,IAAYtO,OAAOQ,SAASlJ,OAAOgX,GAAU,KACjEA,GAAW,GACXA,GAAWD,GAEnBE,qBAAsB,CAClB9W,KAAMH,OACNI,UAAY8W,GAAUP,EAAOlU,SAASyU,IAE1CC,YAAa,CACThX,KAAMuI,OACNtI,UAAY+W,GAAgBP,EAAcnU,SAAS0U,IAEvDC,WAAYC,SACZC,OAAQ5O,OACR6O,MAAO7O,OACPqJ,MAAOrJ,OACPjH,MAAO,CACHtB,KAAM6G,OACN5G,UAAYqB,GAAU,CAAC,OAAQ,SAAS+V,MAAMC,GAAK,CAAC,SAAU,aAAahV,gBAAgBhB,EAAMgW,MAErGtX,KAAM,CACFA,KAAMH,OACNI,UAAYD,GAAS2W,EAAMrU,SAAStC,IAExCuX,QAAS,CACLvX,KAAMuI,OACNtI,UAAYsX,GAAYA,IAAYhP,OAAOiP,WAAW3X,OAAO0X,KACzDA,GAAW,GACXA,GAAW,GAEnBzW,MAAO,CACHd,KAAM,CAACH,OAAQyM,OACfmL,UAAU,EACV,UAAU3W,GACN,MAAqB,kBAAVA,GAGJA,EAAMuW,MAAM,EAAG9Z,OAAME,UAA2B,kBAATF,IAA8B,MAARE,GAAgBiZ,EAAMpU,SAAS7E,QAI/G,OACI,MAAO,CACHia,QAAS,KAGjB9N,MAAO,CACH+N,OAAQ,CACJC,MAAM,EACNC,WAAW,EACXlH,QAAS,cAGjB9N,QAAS,CACL,YACI,MAAMiV,EAAKta,KAAKma,QAAQ,QAAEJ,GAAYO,EAAIpY,EAAQuW,EAAO6B,EAAI,CAAC,YAC9D,OAAO,IAAOC,UAAUva,KAAKsD,MAAO+F,OAAOmR,OAAOtY,EAAkB,MAAX6X,GAAmB,CACxEU,cAAe,CACXV,cAGHW,KAAKR,GAAYla,KAAKka,QAAUA,GAChCS,MAAMC,GAAO5a,KAAK6a,MAAM,QAASD,MAG9C,SACI,OAAO5a,KAAK4D,eAAe,MAAO,CAC9BkX,SAAUzR,OAAOmR,OAAOnR,OAAOmR,OAAO,GAAIxa,KAAKmF,QAAS,CAAE4V,IAAK/a,KAAKka,cCkD5Ec,EAAS,EAAb,QAIA,GACE/Y,KAAM,MACNgZ,WAAY,CACVC,UAAJ,GAGEnb,KAAM,WAAR,OACA,YACA,eACA,eACA,aACA,kBACA,SACA,MACA,MACA,WACA,iBACA,gBACA,SACA,2DACA,iBAEEsF,QAAS,CACP8V,mBAAoB,WAClBnb,KAAK0X,UAAW,EAChB1X,KAAKkX,YAAclX,KAAKiX,GAAG,oBAE7BmB,oBAAqB,WAAzB,WACMpJ,QAAQoM,IAAI,yBACZ,IAAN,GACQC,WAAY1D,EAApB,gBACQ2D,OAAQ,KAEVC,EAAN,KACA,KACQ,IAAR,gBACQ,OAAR,IAEA,kBAGQ,OAFA,QAAR,YAEA,oCACU,EAAV,0BACU,EAAV,0BAGU,EAAV,sBACU,EAAV,oBAIA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,iBAEIC,kBAAmB,WAAvB,WACMxb,KAAKkX,YAAclX,KAAKiX,GAAG,oBAC3B,IAAN,GACQoE,WAAY1D,EAApB,gBACQ8D,SAAUzb,KAAK0b,UAEjBH,EAAN,KACA,KACQ,IAAR,cACQ,OAAR,IAEA,kBACQ,QAAR,YAEA,kBACU,QAAV,qBACU,EAAV,0BACU,EAAV,kCACA,mBACU,EAAV,qCACU,EAAV,gBACU,QAAV,iBAGA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,iBAEIpD,UAAW,WACTR,EAAN,oBACMA,EAAN,wBACA,8CACM,EAAN,qCAEIY,aAAc,WAAlB,WACMvY,KAAKkX,YAAclX,KAAKiX,GAAG,qBAC3B,IAAN,GACQoE,WAAY1D,EAApB,gBACQgE,QAAS3b,KAAK4b,OAEhB5M,QAAQoM,IAAI,WAAlB,kCACMG,EAAN,KACA,KACQ,IAAR,eACQ,OAAR,IAEA,kBACQ,QAAR,YAEA,kBACU,QAAV,gBACU,EAAV,uBACU,EAAV,iBACA,mBACU,EAAV,0BACU,EAAV,gBACU,QAAV,iBAGA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,iBAEItD,OAAQ,WAAZ,WACA,6BAEM,GAAK4D,EAAL,CAGA7b,KAAKkX,YAAclX,KAAKiX,GAAG,uBAC3B,IAAN,GACQoE,WAAY1D,EAApB,gBACQgE,QAAS3b,KAAKgY,SAEhBhJ,QAAQoM,IAAI,WAAlB,kCACMG,EAAN,KACA,KACQ,IAAR,eACQ,OAAR,IAEA,kBACQ,QAAR,YACQ,EAAR,gBACA,kBACU,QAAV,sBACU,EAAV,2BACU,EAAV,wBACA,0CACU,EAAV,cACU,EAAV,kCACA,mBACU,EAAV,mCACU,EAAV,oBAEU,EAAV,yCACU,EAAV,sBAGA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,kBAEIlD,cAAe,WAAnB,WAEM,GAAIV,EAAV,qBAGQ,GAFA3X,KAAKkX,YAAclX,KAAKiX,GAAG,kCAEtBjX,KAAK4b,MAAO,CACf,IAAIE,EAAQ,IAAIC,WAAW,IAC3B9K,OAAO+K,OAAOC,gBAAgBH,GAE9B9b,KAAK4b,MAAQ,GAAvB,oBAEQ5b,KAAKsY,OAAS,uBAAtB,kEACQtJ,QAAQoM,IAAI,gBAApB,0BAEQpb,KAAKkX,YAAclX,KAAKiX,GAAG,oFAC3BjX,KAAK8X,cAAgB,CAC7B,YAAU,QAAV,iCACA,YAAU,MAAV,yDAKE1L,MAAO,GACPlH,QAAS,WACPlF,KAAKqY,iBAIPhM,QAAS,WACP,IAAJ,yBACQ6P,IACFA,EAAShO,MAAMiO,MAAMC,QACrBF,EAAShO,MAAMiO,MAAME,aAAa,eAAgB,WCvUqR,I,6LCOzUC,EAAY,eACd,EACAlW,EACAoS,GACA,EACA,KACA,KACA,MAIa,aAAA8D,EAAiB,QAiBhC,IAAkBA,EAAW,CAACC,SAAA,KAAOC,UAAA,KAAQzY,OAAA,KAAK0Y,QAAA,KAAMC,UAAA,OAAUC,aAAA,KAAWC,QAAA,KAAMC,QAAA,KAAMC,OAAA,KAAKC,UAAA,KAAQC,OAAA,KAAKC,aAAA,KAAWC,WAAA,Q,wBCnCpH,SAAUtS,EAAMuS,EAASC,GAGzBvc,EAAOC,QAAoBqc,EAAQ,EAAQ,QAAW,EAAQ,QAAW,EAAQ,UAHlF,CAaCnd,GAAM,SAAUqd,GAEjB,OAAOA,EAASC,a,6DCbjBxc,EAAQyc,WAAaA,EACrBzc,EAAQ0c,YAAcA,EACtB1c,EAAQ2c,cAAgBA,EAOxB,IALA,IAAIC,EAAS,GACTC,EAAY,GACZC,EAA4B,qBAAf7B,WAA6BA,WAAajN,MAEvD+O,EAAO,mEACFnd,EAAI,EAAG4J,EAAMuT,EAAKxd,OAAQK,EAAI4J,IAAO5J,EAC5Cgd,EAAOhd,GAAKmd,EAAKnd,GACjBid,EAAUE,EAAKC,WAAWpd,IAAMA,EAQlC,SAASqd,EAASC,GAChB,IAAI1T,EAAM0T,EAAI3d,OAEd,GAAIiK,EAAM,EAAI,EACZ,MAAM,IAAIjC,MAAM,kDAKlB,IAAI4V,EAAWD,EAAIpF,QAAQ,MACT,IAAdqF,IAAiBA,EAAW3T,GAEhC,IAAI4T,EAAkBD,IAAa3T,EAC/B,EACA,EAAK2T,EAAW,EAEpB,MAAO,CAACA,EAAUC,GAIpB,SAASX,EAAYS,GACnB,IAAIG,EAAOJ,EAAQC,GACfC,EAAWE,EAAK,GAChBD,EAAkBC,EAAK,GAC3B,OAAuC,GAA9BF,EAAWC,GAAuB,EAAKA,EAGlD,SAASE,EAAaJ,EAAKC,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,EAGlD,SAASV,EAAaQ,GACpB,IAAIK,EAcA3d,EAbAyd,EAAOJ,EAAQC,GACfC,EAAWE,EAAK,GAChBD,EAAkBC,EAAK,GAEvBG,EAAM,IAAIV,EAAIQ,EAAYJ,EAAKC,EAAUC,IAEzCK,EAAU,EAGVjU,EAAM4T,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAKvd,EAAI,EAAGA,EAAI4J,EAAK5J,GAAK,EACxB2d,EACGV,EAAUK,EAAIF,WAAWpd,KAAO,GAChCid,EAAUK,EAAIF,WAAWpd,EAAI,KAAO,GACpCid,EAAUK,EAAIF,WAAWpd,EAAI,KAAO,EACrCid,EAAUK,EAAIF,WAAWpd,EAAI,IAC/B4d,EAAIC,KAAcF,GAAO,GAAM,IAC/BC,EAAIC,KAAcF,GAAO,EAAK,IAC9BC,EAAIC,KAAmB,IAANF,EAmBnB,OAhBwB,IAApBH,IACFG,EACGV,EAAUK,EAAIF,WAAWpd,KAAO,EAChCid,EAAUK,EAAIF,WAAWpd,EAAI,KAAO,EACvC4d,EAAIC,KAAmB,IAANF,GAGK,IAApBH,IACFG,EACGV,EAAUK,EAAIF,WAAWpd,KAAO,GAChCid,EAAUK,EAAIF,WAAWpd,EAAI,KAAO,EACpCid,EAAUK,EAAIF,WAAWpd,EAAI,KAAO,EACvC4d,EAAIC,KAAcF,GAAO,EAAK,IAC9BC,EAAIC,KAAmB,IAANF,GAGZC,EAGT,SAASE,EAAiBC,GACxB,OAAOf,EAAOe,GAAO,GAAK,IACxBf,EAAOe,GAAO,GAAK,IACnBf,EAAOe,GAAO,EAAI,IAClBf,EAAa,GAANe,GAGX,SAASC,EAAaC,EAAOvU,EAAOI,GAGlC,IAFA,IAAI6T,EACAO,EAAS,GACJle,EAAI0J,EAAO1J,EAAI8J,EAAK9J,GAAK,EAChC2d,GACIM,EAAMje,IAAM,GAAM,WAClBie,EAAMje,EAAI,IAAM,EAAK,QACP,IAAfie,EAAMje,EAAI,IACbke,EAAO7W,KAAKyW,EAAgBH,IAE9B,OAAOO,EAAOxW,KAAK,IAGrB,SAASqV,EAAekB,GAQtB,IAPA,IAAIN,EACA/T,EAAMqU,EAAMte,OACZwe,EAAavU,EAAM,EACnBwU,EAAQ,GACRC,EAAiB,MAGZre,EAAI,EAAGse,EAAO1U,EAAMuU,EAAYne,EAAIse,EAAMte,GAAKqe,EACtDD,EAAM/W,KAAK2W,EAAYC,EAAOje,EAAIA,EAAIqe,EAAkBC,EAAOA,EAAQte,EAAIqe,IAqB7E,OAjBmB,IAAfF,GACFR,EAAMM,EAAMrU,EAAM,GAClBwU,EAAM/W,KACJ2V,EAAOW,GAAO,GACdX,EAAQW,GAAO,EAAK,IACpB,OAEsB,IAAfQ,IACTR,GAAOM,EAAMrU,EAAM,IAAM,GAAKqU,EAAMrU,EAAM,GAC1CwU,EAAM/W,KACJ2V,EAAOW,GAAO,IACdX,EAAQW,GAAO,EAAK,IACpBX,EAAQW,GAAO,EAAK,IACpB,MAIGS,EAAM1W,KAAK,IAlIpBuV,EAAU,IAAIG,WAAW,IAAM,GAC/BH,EAAU,IAAIG,WAAW,IAAM,I,oCClB/B,IAAIhI,EAAsB,EAAQ,QAC9BmJ,EAAS,EAAQ,QACjBC,EAAQ,EAAQ,QAChBC,EAAY,EAAQ,QACpBpV,EAAoB,EAAQ,QAC5BqV,EAAe,EAAQ,QACvBC,EAAK,EAAQ,QACbC,EAAa,EAAQ,QACrBC,EAAK,EAAQ,QACbC,EAAS,EAAQ,QAEjBzJ,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAC7CyJ,EAAcR,EAAOQ,YACrBC,EAAaD,GAAeA,EAAYnf,UAAU6I,KAGlDwW,IAA+BD,IAAeR,GAAM,WACtD,IAAIpD,EAAQ,IAAI2D,EAAY,GAC5B3D,EAAM3S,KAAK,MACX2S,EAAM3S,KAAK,OAGTyW,IAAgBF,IAAeR,GAAM,WAEvC,GAAIK,EAAI,OAAOA,EAAK,GACpB,GAAIF,EAAI,OAAOA,EAAK,GACpB,GAAIC,EAAY,OAAO,EACvB,GAAIE,EAAQ,OAAOA,EAAS,IAE5B,IAEI/R,EAAOoS,EAFP/D,EAAQ,IAAI2D,EAAY,KACxBK,EAAWhR,MAAM,KAGrB,IAAKrB,EAAQ,EAAGA,EAAQ,IAAKA,IAC3BoS,EAAMpS,EAAQ,EACdqO,EAAMrO,GAAS,IAAMA,EACrBqS,EAASrS,GAASA,EAAQ,EAAIoS,EAAM,EAOtC,IAJA/D,EAAM3S,MAAK,SAAUH,EAAGC,GACtB,OAAQD,EAAI,EAAI,IAAMC,EAAI,EAAI,MAG3BwE,EAAQ,EAAGA,EAAQ,IAAKA,IAC3B,GAAIqO,EAAMrO,KAAWqS,EAASrS,GAAQ,OAAO,KAI7CsS,EAAiB,SAAUC,GAC7B,OAAO,SAAUzW,EAAGC,GAClB,YAAkB/C,IAAduZ,GAAiCA,EAAUzW,EAAGC,IAAM,EAEpDA,IAAMA,GAAW,EAEjBD,IAAMA,EAAU,EACV,IAANA,GAAiB,IAANC,EAAgB,EAAID,EAAI,GAAK,EAAIC,EAAI,EAAI,GAAK,EACtDD,EAAIC,IAMfwM,EAAuB,QAAQ,SAAcgK,GAC3C,IAAIlE,EAAQ9b,KAEZ,QADkByG,IAAduZ,GAAyBb,EAAUa,GACnCJ,EAAa,OAAOF,EAAW/G,KAAKmD,EAAOkE,GAE/CjK,EAAY+F,GACZ,IAEIrO,EAFAwS,EAAclW,EAAkB+R,GAChCoE,EAAQpR,MAAMmR,GAGlB,IAAKxS,EAAQ,EAAGA,EAAQwS,EAAaxS,IACnCyS,EAAMzS,GAASqO,EAAMrO,GAKvB,IAFAyS,EAAQd,EAAatD,EAAOiE,EAAeC,IAEtCvS,EAAQ,EAAGA,EAAQwS,EAAaxS,IACnCqO,EAAMrO,GAASyS,EAAMzS,GAGvB,OAAOqO,KACL8D,GAAeD,I,wBCrFnB,aAAE,SAAU/U,EAAMuS,GAGhBtc,EAAOC,QAAoBqc,KAH5B,CAaCnd,GAAM,WAOP,IAAIqd,EAAWA,GAAa,SAAUpT,EAAMxD,GAExC,IAAIuV,EA4BJ,GAzBsB,qBAAX/K,QAA0BA,OAAO+K,SACxCA,EAAS/K,OAAO+K,QAIA,qBAAT5O,MAAwBA,KAAK4O,SACpCA,EAAS5O,KAAK4O,QAIQ,qBAAfmE,YAA8BA,WAAWnE,SAChDA,EAASmE,WAAWnE,SAInBA,GAA4B,qBAAX/K,QAA0BA,OAAOmP,WACnDpE,EAAS/K,OAAOmP,WAIfpE,GAA4B,qBAAXiD,GAA0BA,EAAOjD,SACnDA,EAASiD,EAAOjD,SAIfA,EACD,IACIA,EAAS,EAAQ,GACnB,MAAOpB,IAQb,IAAIyF,EAAwB,WACxB,GAAIrE,EAAQ,CAER,GAAsC,oBAA3BA,EAAOC,gBACd,IACI,OAAOD,EAAOC,gBAAgB,IAAIqE,YAAY,IAAI,GACpD,MAAO1F,IAIb,GAAkC,oBAAvBoB,EAAOuE,YACd,IACI,OAAOvE,EAAOuE,YAAY,GAAGC,cAC/B,MAAO5F,KAIjB,MAAM,IAAIvS,MAAM,wEAOhB0Q,EAAS1P,OAAO0P,QAAW,WAC3B,SAAS0H,KAET,OAAO,SAAUC,GACb,IAAIC,EAQJ,OANAF,EAAEngB,UAAYogB,EAEdC,EAAU,IAAIF,EAEdA,EAAEngB,UAAY,KAEPqgB,GAZe,GAmB1BxK,EAAI,GAKJyK,EAAQzK,EAAE0K,IAAM,GAKhBC,EAAOF,EAAME,KAAQ,WAGrB,MAAO,CAmBHC,OAAQ,SAAUC,GAEd,IAAIL,EAAU5H,EAAO/Y,MAoBrB,OAjBIghB,GACAL,EAAQM,MAAMD,GAIbL,EAAQvb,eAAe,SAAWpF,KAAKkhB,OAASP,EAAQO,OACzDP,EAAQO,KAAO,WACXP,EAAQQ,OAAOD,KAAKE,MAAMphB,KAAMyK,aAKxCkW,EAAQO,KAAK5gB,UAAYqgB,EAGzBA,EAAQQ,OAASnhB,KAEV2gB,GAeX5H,OAAQ,WACJ,IAAIpP,EAAW3J,KAAK+gB,SAGpB,OAFApX,EAASuX,KAAKE,MAAMzX,EAAUc,WAEvBd,GAeXuX,KAAM,aAcND,MAAO,SAAUI,GACb,IAAK,IAAIC,KAAgBD,EACjBA,EAAWjc,eAAekc,KAC1BthB,KAAKshB,GAAgBD,EAAWC,IAKpCD,EAAWjc,eAAe,cAC1BpF,KAAKuhB,SAAWF,EAAWE,WAanCC,MAAO,WACH,OAAOxhB,KAAKkhB,KAAK5gB,UAAUygB,OAAO/gB,QAnHtB,GA8HpByhB,EAAYb,EAAMa,UAAYX,EAAKC,OAAO,CAa1CG,KAAM,SAAUQ,EAAOC,GACnBD,EAAQ1hB,KAAK0hB,MAAQA,GAAS,GAG1B1hB,KAAK2hB,SADLA,GAAYlb,EACIkb,EAEe,EAAfD,EAAMrhB,QAiB9BkhB,SAAU,SAAUK,GAChB,OAAQA,GAAWC,GAAKC,UAAU9hB,OActC+hB,OAAQ,SAAUC,GAEd,IAAIC,EAAYjiB,KAAK0hB,MACjBQ,EAAYF,EAAUN,MACtBS,EAAeniB,KAAK2hB,SACpBS,EAAeJ,EAAUL,SAM7B,GAHA3hB,KAAKqiB,QAGDF,EAAe,EAEf,IAAK,IAAIzhB,EAAI,EAAGA,EAAI0hB,EAAc1hB,IAAK,CACnC,IAAI4hB,EAAYJ,EAAUxhB,IAAM,KAAQ,GAAMA,EAAI,EAAK,EAAM,IAC7DuhB,EAAWE,EAAezhB,IAAO,IAAM4hB,GAAa,IAAOH,EAAezhB,GAAK,EAAK,OAIxF,IAAK,IAAI6hB,EAAI,EAAGA,EAAIH,EAAcG,GAAK,EACnCN,EAAWE,EAAeI,IAAO,GAAKL,EAAUK,IAAM,GAM9D,OAHAviB,KAAK2hB,UAAYS,EAGVpiB,MAUXqiB,MAAO,WAEH,IAAIX,EAAQ1hB,KAAK0hB,MACbC,EAAW3hB,KAAK2hB,SAGpBD,EAAMC,IAAa,IAAM,YAAe,GAAMA,EAAW,EAAK,EAC9DD,EAAMrhB,OAAS4J,EAAKuY,KAAKb,EAAW,IAYxCH,MAAO,WACH,IAAIA,EAAQV,EAAKU,MAAM7I,KAAK3Y,MAG5B,OAFAwhB,EAAME,MAAQ1hB,KAAK0hB,MAAMe,MAAM,GAExBjB,GAgBXzJ,OAAQ,SAAU2K,GAGd,IAFA,IAAIhB,EAAQ,GAEHhhB,EAAI,EAAGA,EAAIgiB,EAAQhiB,GAAK,EAC7BghB,EAAM3Z,KAAKsY,KAGf,OAAO,IAAIoB,EAAUP,KAAKQ,EAAOgB,MAOrCC,EAAQxM,EAAEyM,IAAM,GAKhBf,EAAMc,EAAMd,IAAM,CAclBC,UAAW,SAAUE,GAOjB,IALA,IAAIN,EAAQM,EAAUN,MAClBC,EAAWK,EAAUL,SAGrBkB,EAAW,GACNniB,EAAI,EAAGA,EAAIihB,EAAUjhB,IAAK,CAC/B,IAAIoiB,EAAQpB,EAAMhhB,IAAM,KAAQ,GAAMA,EAAI,EAAK,EAAM,IACrDmiB,EAAS9a,MAAM+a,IAAS,GAAGvB,SAAS,KACpCsB,EAAS9a,MAAa,GAAP+a,GAAavB,SAAS,KAGzC,OAAOsB,EAASza,KAAK,KAgBzB2a,MAAO,SAAUC,GAMb,IAJA,IAAIC,EAAeD,EAAO3iB,OAGtBqhB,EAAQ,GACHhhB,EAAI,EAAGA,EAAIuiB,EAAcviB,GAAK,EACnCghB,EAAMhhB,IAAM,IAAM6K,SAASyX,EAAOE,OAAOxiB,EAAG,GAAI,KAAQ,GAAMA,EAAI,EAAK,EAG3E,OAAO,IAAI+gB,EAAUP,KAAKQ,EAAOuB,EAAe,KAOpDE,EAASR,EAAMQ,OAAS,CAcxBrB,UAAW,SAAUE,GAOjB,IALA,IAAIN,EAAQM,EAAUN,MAClBC,EAAWK,EAAUL,SAGrByB,EAAc,GACT1iB,EAAI,EAAGA,EAAIihB,EAAUjhB,IAAK,CAC/B,IAAIoiB,EAAQpB,EAAMhhB,IAAM,KAAQ,GAAMA,EAAI,EAAK,EAAM,IACrD0iB,EAAYrb,KAAK1F,OAAOghB,aAAaP,IAGzC,OAAOM,EAAYhb,KAAK,KAgB5B2a,MAAO,SAAUO,GAMb,IAJA,IAAIC,EAAkBD,EAAUjjB,OAG5BqhB,EAAQ,GACHhhB,EAAI,EAAGA,EAAI6iB,EAAiB7iB,IACjCghB,EAAMhhB,IAAM,KAAiC,IAA1B4iB,EAAUxF,WAAWpd,KAAe,GAAMA,EAAI,EAAK,EAG1E,OAAO,IAAI+gB,EAAUP,KAAKQ,EAAO6B,KAOrCC,EAAOb,EAAMa,KAAO,CAcpB1B,UAAW,SAAUE,GACjB,IACI,OAAOyB,mBAAmBC,OAAOP,EAAOrB,UAAUE,KACpD,MAAOnV,GACL,MAAM,IAAIxE,MAAM,0BAiBxB0a,MAAO,SAAUY,GACb,OAAOR,EAAOJ,MAAMa,SAASC,mBAAmBF,OAWpDG,EAAyBlD,EAAMkD,uBAAyBhD,EAAKC,OAAO,CAQpEgD,MAAO,WAEH/jB,KAAKgkB,MAAQ,IAAIvC,EAAUP,KAC3BlhB,KAAKikB,YAAc,GAavBC,QAAS,SAAUnkB,GAEI,iBAARA,IACPA,EAAOyjB,EAAKT,MAAMhjB,IAItBC,KAAKgkB,MAAMjC,OAAOhiB,GAClBC,KAAKikB,aAAelkB,EAAK4hB,UAiB7BwC,SAAU,SAAUC,GAChB,IAAIC,EAGAtkB,EAAOC,KAAKgkB,MACZM,EAAYvkB,EAAK2hB,MACjB6C,EAAexkB,EAAK4hB,SACpB6C,EAAYxkB,KAAKwkB,UACjBC,EAA6B,EAAZD,EAGjBE,EAAeH,EAAeE,EAG9BC,EAFAN,EAEena,EAAKuY,KAAKkC,GAIVza,EAAK0a,KAAoB,EAAfD,GAAoB1kB,KAAK4kB,eAAgB,GAItE,IAAIC,EAAcH,EAAeF,EAG7BM,EAAc7a,EAAKD,IAAkB,EAAd6a,EAAiBN,GAG5C,GAAIM,EAAa,CACb,IAAK,IAAIpO,EAAS,EAAGA,EAASoO,EAAapO,GAAU+N,EAEjDxkB,KAAK+kB,gBAAgBT,EAAW7N,GAIpC4N,EAAiBC,EAAUU,OAAO,EAAGH,GACrC9kB,EAAK4hB,UAAYmD,EAIrB,OAAO,IAAIrD,EAAUP,KAAKmD,EAAgBS,IAY9CtD,MAAO,WACH,IAAIA,EAAQV,EAAKU,MAAM7I,KAAK3Y,MAG5B,OAFAwhB,EAAMwC,MAAQhkB,KAAKgkB,MAAMxC,QAElBA,GAGXoD,eAAgB,IA2IhBK,GAnISrE,EAAMsE,OAASpB,EAAuB/C,OAAO,CAItDoE,IAAKrE,EAAKC,SAWVG,KAAM,SAAUiE,GAEZnlB,KAAKmlB,IAAMnlB,KAAKmlB,IAAIpE,OAAOoE,GAG3BnlB,KAAK+jB,SAUTA,MAAO,WAEHD,EAAuBC,MAAMpL,KAAK3Y,MAGlCA,KAAKolB,YAeTC,OAAQ,SAAUC,GAQd,OANAtlB,KAAKkkB,QAAQoB,GAGbtlB,KAAKmkB,WAGEnkB,MAiBXulB,SAAU,SAAUD,GAEZA,GACAtlB,KAAKkkB,QAAQoB,GAIjB,IAAIE,EAAOxlB,KAAKylB,cAEhB,OAAOD,GAGXhB,UAAW,GAeXkB,cAAe,SAAUC,GACrB,OAAO,SAAUC,EAAST,GACtB,OAAO,IAAIQ,EAAOzE,KAAKiE,GAAKI,SAASK,KAiB7CC,kBAAmB,SAAUF,GACzB,OAAO,SAAUC,EAASjd,GACtB,OAAO,IAAIsc,EAAOa,KAAK5E,KAAKyE,EAAQhd,GAAK4c,SAASK,OAQjDzP,EAAE4P,KAAO,IAEtB,OAAO5P,EA5wBgB,CA6wBzBlM,MAGF,OAAOoT,O,0DCnyBR,IAAIvH,EAAsB,EAAQ,QAC9BkQ,EAAe,EAAQ,QAA6BC,MAEpDlQ,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,eAAe,SAAqBkQ,GACzD,OAAOF,EAAajQ,EAAY/V,MAAOkmB,EAAYzb,UAAUpK,OAAQoK,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,qBCV7G,IAAI7G,EAAa,EAAQ,QACrBumB,EAAK,EAAQ,QASjBrlB,EAAQslB,IAAM,SAAcC,EAAIC,GAG9B,IAFA,IAAIC,EAAQ3mB,EAAW4mB,MAAMH,EAAGhmB,OAASimB,EAAGjmB,OAAS,GAE5CK,EAAI,EAAGA,EAAI2lB,EAAGhmB,OAAQK,IAC7B,IAAK,IAAI6hB,EAAI,EAAGA,EAAI+D,EAAGjmB,OAAQkiB,IAC7BgE,EAAM7lB,EAAI6hB,IAAM4D,EAAGC,IAAIC,EAAG3lB,GAAI4lB,EAAG/D,IAIrC,OAAOgE,GAUTzlB,EAAQ+e,IAAM,SAAc4G,EAAUC,GACpC,IAAI1Y,EAASpO,EAAWO,KAAKsmB,GAE7B,MAAQzY,EAAO3N,OAASqmB,EAAQrmB,QAAW,EAAG,CAG5C,IAFA,IAAIkmB,EAAQvY,EAAO,GAEVtN,EAAI,EAAGA,EAAIgmB,EAAQrmB,OAAQK,IAClCsN,EAAOtN,IAAMylB,EAAGC,IAAIM,EAAQhmB,GAAI6lB,GAIlC,IAAI9P,EAAS,EACb,MAAOA,EAASzI,EAAO3N,QAA6B,IAAnB2N,EAAOyI,GAAeA,IACvDzI,EAASA,EAAOyU,MAAMhM,GAGxB,OAAOzI,GAUTlN,EAAQ6lB,qBAAuB,SAA+BC,GAE5D,IADA,IAAIC,EAAOjnB,EAAWO,KAAK,CAAC,IACnBO,EAAI,EAAGA,EAAIkmB,EAAQlmB,IAC1BmmB,EAAO/lB,EAAQslB,IAAIS,EAAM,CAAC,EAAGV,EAAGW,IAAIpmB,KAGtC,OAAOmmB,I,qBCvDT/lB,EAAQ+a,QAAU,SAAkBxC,GAClC,OAAQ0N,MAAM1N,IAAYA,GAAW,GAAKA,GAAW,K,oFCNxC,SAAS2N,EAAmB1I,GACzC,GAAIxP,MAAMmY,QAAQ3I,GAAM,OAAO4I,eAAiB5I,G,sECFnC,SAAS6I,EAAiBC,GACvC,GAAsB,qBAAXC,QAAmD,MAAzBD,EAAKC,OAAOC,WAA2C,MAAtBF,EAAK,cAAuB,OAAOtY,MAAM3O,KAAKinB,G,gBCDvG,SAASG,IACtB,MAAM,IAAIC,UAAU,wICGP,SAASC,EAAmBnJ,GACzC,OAAOoJ,EAAkBpJ,IAAQqJ,EAAgBrJ,IAAQsJ,eAA2BtJ,IAAQuJ,M,kCCJ9F,IAAI/R,EAAsB,EAAQ,QAC9BpM,EAA+B,EAAQ,QACvCwV,EAAQ,EAAQ,QAEhBnJ,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAC7C8R,EAAS,GAAGrF,MAEZsF,EAAS7I,GAAM,WAEjB,IAAI8I,UAAU,GAAGvF,WAKnBzM,EAAuB,SAAS,SAAe5L,EAAOI,GACpD,IAAIZ,EAAOke,EAAOnP,KAAK5C,EAAY/V,MAAOoK,EAAOI,GAC7C2L,EAAIzM,EAA6B1J,MACjCyN,EAAQ,EACRpN,EAASuJ,EAAKvJ,OACd2N,EAAS,IAAImI,EAAE9V,GACnB,MAAOA,EAASoN,EAAOO,EAAOP,GAAS7D,EAAK6D,KAC5C,OAAOO,IACN+Z,I,uBCxBH,IAAIE,EAAI,EAAQ,QACZ3e,EAAK,EAAQ,QAIjB2e,EAAE,CAAE9d,OAAQ,SAAU+d,MAAM,GAAQ,CAClC5e,GAAIA,K,uBCNN,IAAIzJ,EAAO,EAAQ,QACfsoB,EAAQ,EAAQ,QAEpB,SAASC,EAAWroB,GAClBC,KAAKC,KAAOJ,EAAKuB,MACjBpB,KAAKD,KAAOA,EAGdqoB,EAAUhoB,cAAgB,SAAwBC,GAChD,OAAgB,GAATA,GAGT+nB,EAAU9nB,UAAUC,UAAY,WAC9B,OAAOP,KAAKD,KAAKM,QAGnB+nB,EAAU9nB,UAAUF,cAAgB,WAClC,OAAOgoB,EAAUhoB,cAAcJ,KAAKD,KAAKM,SAG3C+nB,EAAU9nB,UAAUE,MAAQ,SAAUC,GACpC,IAAIC,EAKJ,IAAKA,EAAI,EAAGA,EAAIV,KAAKD,KAAKM,OAAQK,IAAK,CACrC,IAAI4C,EAAQ6kB,EAAME,OAAOroB,KAAKD,KAAKW,IAGnC,GAAI4C,GAAS,OAAUA,GAAS,MAE9BA,GAAS,UAGJ,MAAIA,GAAS,OAAUA,GAAS,OAIrC,MAAM,IAAI+E,MACR,2BAA6BrI,KAAKD,KAAKW,GAAvC,qCAHF4C,GAAS,MASXA,EAAkC,KAAvBA,IAAU,EAAK,MAAyB,IAARA,GAG3C7C,EAAUG,IAAI0C,EAAO,MAIzBzC,EAAOC,QAAUsnB,G,kCCpDjB,IAAItS,EAAsB,EAAQ,QAC9BwS,EAAe,EAAQ,QAEvBvS,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAKjDA,EAAuB,eAAe,SAAqBuS,GACzD,OAAOD,EAAalH,MAAMrL,EAAY/V,MAAOyK,e,kECX/C,IAAIrE,EAAS,WAAa,IAAIsQ,EAAI1W,KAAS2W,EAAGD,EAAI9S,eAAmBgT,EAAGF,EAAIG,MAAMD,IAAID,EAAG,OAAOC,EAAG,cAAc,CAACnT,YAAY,KAAKQ,MAAM,CAAC,MAAQ,GAAG,cAAc,KAAK,CAAC2S,EAAG,WAAW,CAAC3S,MAAM,CAAC,KAAO,GAAG,eAAe,GAAG,iBAAiB,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,KAAO,GAAG,IAAM,GAAG,cAAc,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,MAAQ,OAAO,CAAC2S,EAAG,cAAc,CAACnT,YAAY,QAAQ,CAACmT,EAAG,YAAY,CAACE,YAAY,CAAC,aAAa,QAAQ7S,MAAM,CAAC,MAAQ,KAAK,cAAc,KAAK,CAAC2S,EAAG,QAAQ,CAACnT,YAAY,UAAUQ,MAAM,CAAC,aAAa,KAAK,YAAY,MAAM,IAAM,EAAQ,YAA0B,GAAG2S,EAAG,MAAM,CAACnT,YAAY,8BAA8B,CAACmT,EAAG,OAAO,CAACnT,YAAY,WAAW,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,0BAA0B,SAASL,EAAG,MAAM,CAACnT,YAAY,8CAA8C,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIQ,aAAa,OAAON,EAAG,MAAM,CAACA,EAAG,SAAS,CAACpB,IAAI,OAAO8B,MAAM,CAAChU,MAAOoT,EAAS,MAAErD,SAAS,SAAUkE,GAAMb,EAAIc,MAAMD,GAAKE,WAAW,UAAU,CAACb,EAAG,eAAe,CAAC3S,MAAM,CAAC,MAAQyS,EAAIO,GAAG,cAAc,MAAQP,EAAI8R,QAAQ,SAAW,IAAIlR,MAAM,CAAChU,MAAOoT,EAAa,UAAErD,SAAS,SAAUkE,GAAMb,EAAI+R,UAAUlR,GAAKE,WAAW,eAAeb,EAAG,eAAe,CAAC3S,MAAM,CAAC,MAAQyS,EAAIO,GAAG,aAAa,MAAQP,EAAI8R,QAAQ,SAAW,IAAIlR,MAAM,CAAChU,MAAOoT,EAAY,SAAErD,SAAS,SAAUkE,GAAMb,EAAIgS,SAASnR,GAAKE,WAAW,cAAcb,EAAG,eAAe,CAAC3S,MAAM,CAAC,MAAQyS,EAAIO,GAAG,4BAA4B,MAAQP,EAAIiS,WAAW,SAAW,IAAIrR,MAAM,CAAChU,MAAOoT,EAAS,MAAErD,SAAS,SAAUkE,GAAMb,EAAIkS,MAAMrR,GAAKE,WAAW,WAAWb,EAAG,WAAW,CAAC3S,MAAM,CAAC,wBAAwB,KAAK,CAAC2S,EAAG,QAAQ,CAAClT,MAAM,CAC1kD,4BAA6BgT,EAAIc,MACjC5L,UAAW8K,EAAIc,OACfvT,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAIuB,SAAS,CAACvB,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,gBAAgBL,EAAG,IAAI,CAAC3S,MAAM,CAAC,KAAO,KAAKI,GAAG,CAAC,MAAQqS,EAAImS,cAAc,CAACnS,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,eAAe,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IACnOuB,EAAkB,G,8ECiFtB,GACEvW,KAAM,SACNlC,KAAM,WAAR,OACA,eACA,eACA,SACA,aACA,YACA,MACA,MACA,SACA,YACA,4CACA,kBACA,wDACA,wBAEA,SACA,oCAEA,iBACA,iBAEEsF,QAAS,CACPwjB,YAAa,WACX7oB,KAAK8oB,QAAQ/gB,KAAK,YAEpBkQ,OAAQ,WAAZ,WACA,6BAEM,GADAjJ,QAAQoM,IAAI,YAAlB,WACWS,EAAL,CAGA7M,QAAQoM,IAAI,UACZpb,KAAKkX,YAAclX,KAAKiX,GAAG,wBAC3BjX,KAAK+oB,QAAU,OAEf,IAAN,iCAEA,oBACA,EACA,qDAEM/Z,QAAQoM,IAAI,aAAe4N,GAE3B,IAAN,GACQC,SAAUtR,EAAlB,cACQiR,MAAO5oB,KAAK4oB,MACZI,UAAWA,EACXE,MAAO,OACPC,MAAOnpB,KAAKyoB,UACZW,KAAMppB,KAAK0oB,SACXW,MAAO,KACPC,WAAY3R,EAApB,gBACQ4R,WAAY5R,EAApB,iBAIM,EAAN,KACA,KACQ,IAAR,WACQ,OAAR,IAEA,kBACQ,QAAR,YAEA,kBACU,EAAV,wCACU,EAAV,mBACU,EAAV,2BACU,EAAV,yBACU,EAAV,uBACU,EAAV,qIACU,EAAV,cACU,EAAV,0BAEU,EAAV,mDACU,EAAV,gBACU,QAAV,iBAGA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,mBAOEvL,MAAO,GAGPlH,QAAS,WAAX,WAEIlF,KAAKwpB,cAAT,0DACIxpB,KAAK4oB,MAAQjR,EAAjB,WACI3X,KAAKyoB,UAAY9Q,EAArB,eACI3X,KAAK0oB,SAAW/Q,EAApB,cACI3X,KAAKkX,YAAclX,KAAKwpB,cAExBxpB,KAAK2oB,WAAa,CACtB,YAAM,QAAN,8BACA,YAAM,MACN,wDACA,gCC7LgV,I,yJCO5UrM,EAAY,eACd,EACAlW,EACAoS,GACA,EACA,KACA,KACA,MAIa,aAAA8D,EAAiB,QAchC,IAAkBA,EAAW,CAACvY,OAAA,KAAK0Y,QAAA,KAAMC,UAAA,OAAUC,aAAA,KAAWC,QAAA,KAAMC,QAAA,KAAMC,OAAA,KAAKC,UAAA,KAAQE,aAAA,KAAWC,WAAA,Q,uBChClG,IAAIuM,EAAU,EAAQ,QAElBC,EAAkB,CAEpB,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GACT,EAAG,EAAG,GAAI,GACV,EAAG,EAAG,GAAI,GACV,EAAG,EAAG,GAAI,GACV,EAAG,GAAI,GAAI,GACX,EAAG,GAAI,GAAI,GACX,EAAG,GAAI,GAAI,GACX,EAAG,GAAI,GAAI,GACX,EAAG,GAAI,GAAI,GACX,EAAG,GAAI,GAAI,GACX,EAAG,GAAI,GAAI,GACX,EAAG,GAAI,GAAI,GACX,EAAG,GAAI,GAAI,GACX,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,IAGVC,EAAqB,CAEvB,EAAG,GAAI,GAAI,GACX,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,IACZ,GAAI,GAAI,IAAK,IACb,GAAI,GAAI,IAAK,IACb,GAAI,IAAK,IAAK,IACd,GAAI,IAAK,IAAK,IACd,GAAI,IAAK,IAAK,IACd,GAAI,IAAK,IAAK,IACd,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,IACf,IAAK,IAAK,IAAK,KACf,IAAK,IAAK,IAAK,KACf,IAAK,IAAK,KAAM,KAChB,IAAK,IAAK,KAAM,KAChB,IAAK,IAAK,KAAM,KAChB,IAAK,IAAK,KAAM,KAChB,IAAK,IAAK,KAAM,KAChB,IAAK,IAAK,KAAM,KAChB,IAAK,IAAK,KAAM,KAChB,IAAK,KAAM,KAAM,KACjB,IAAK,KAAM,KAAM,KACjB,IAAK,KAAM,KAAM,KACjB,IAAK,KAAM,KAAM,KACjB,IAAK,KAAM,KAAM,KACjB,IAAK,KAAM,KAAM,KACjB,IAAK,KAAM,KAAM,MAWnB7oB,EAAQ8oB,eAAiB,SAAyBvQ,EAASC,GACzD,OAAQA,GACN,KAAKmQ,EAAQI,EACX,OAAOH,EAAgC,GAAfrQ,EAAU,GAAS,GAC7C,KAAKoQ,EAAQK,EACX,OAAOJ,EAAgC,GAAfrQ,EAAU,GAAS,GAC7C,KAAKoQ,EAAQM,EACX,OAAOL,EAAgC,GAAfrQ,EAAU,GAAS,GAC7C,KAAKoQ,EAAQO,EACX,OAAON,EAAgC,GAAfrQ,EAAU,GAAS,GAC7C,QACE,SAYNvY,EAAQmpB,uBAAyB,SAAiC5Q,EAASC,GACzE,OAAQA,GACN,KAAKmQ,EAAQI,EACX,OAAOF,EAAmC,GAAftQ,EAAU,GAAS,GAChD,KAAKoQ,EAAQK,EACX,OAAOH,EAAmC,GAAftQ,EAAU,GAAS,GAChD,KAAKoQ,EAAQM,EACX,OAAOJ,EAAmC,GAAftQ,EAAU,GAAS,GAChD,KAAKoQ,EAAQO,EACX,OAAOL,EAAmC,GAAftQ,EAAU,GAAS,GAChD,QACE,U,+GCnIN,IAAIvD,EAAsB,EAAQ,QAC9BoU,EAAa,EAAQ,QAAgCC,UAErDpU,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,aAAa,SAAmBoU,GACrD,OAAOF,EAAWnU,EAAY/V,MAAOoqB,EAAW3f,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,oCCTxF,IAAIqP,EAAsB,EAAQ,QAC9B/L,EAAoB,EAAQ,QAC5BsgB,EAAW,EAAQ,QACnBxgB,EAAW,EAAQ,QACnBqV,EAAQ,EAAQ,QAEhBnJ,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAE7C+R,EAAS7I,GAAM,WAEjB,IAAI8I,UAAU,GAAGsC,IAAI,OAKvBtU,EAAuB,OAAO,SAAauU,GACzCxU,EAAY/V,MACZ,IAAIyW,EAAS4T,EAAS5f,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,EAAW,GACnEpG,EAASL,KAAKK,OACd0a,EAAMlR,EAAS0gB,GACfjgB,EAAMP,EAAkBgR,GACxBtN,EAAQ,EACZ,GAAInD,EAAMmM,EAASpW,EAAQ,MAAMsG,WAAW,gBAC5C,MAAO8G,EAAQnD,EAAKtK,KAAKyW,EAAShJ,GAASsN,EAAItN,OAC9Csa,I,6DCzBH,IAAIjS,EAAsB,EAAQ,QAC9B0U,EAAO,EAAQ,QAAgCC,IAC/C/gB,EAA+B,EAAQ,QAEvCqM,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,OAAO,SAAa0U,GACzC,OAAOF,EAAKzU,EAAY/V,MAAO0qB,EAAOjgB,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,GAAW,SAAU4D,EAAGhK,GAClG,OAAO,IAAKqJ,EAA6BW,GAAlC,CAAsChK,U,qBCZjD,IAAI8nB,EAAQ,EAAQ,QAEpB,SAASwC,EAAgB7mB,EAAO8mB,GAC9B,IAAIC,EAAQ/mB,EAAMkF,EAAI,IAClBnH,EAAM+oB,EAAS,KAAO9mB,EAAMgnB,IAAM,IAEtC,OAAOD,EAAQ,EACXhpB,EAAM,IAAM+oB,EAAS,aAAeC,EAAME,QAAQ,GAAGtI,MAAM,GAAK,IAChE5gB,EAGN,SAASmpB,EAAQC,EAAK1hB,EAAGC,GACvB,IAAI3H,EAAMopB,EAAM1hB,EAGhB,MAFiB,qBAANC,IAAmB3H,GAAO,IAAM2H,GAEpC3H,EAGT,SAASqpB,EAAUnrB,EAAMorB,EAAMxR,GAM7B,IALA,IAAIlI,EAAO,GACP2Z,EAAS,EACTC,GAAS,EACTC,EAAa,EAER5qB,EAAI,EAAGA,EAAIX,EAAKM,OAAQK,IAAK,CACpC,IAAI6qB,EAAMthB,KAAKuhB,MAAM9qB,EAAIyqB,GACrBM,EAAMxhB,KAAKuhB,MAAM9qB,EAAIyqB,GAEpBI,GAAQF,IAAQA,GAAS,GAE1BtrB,EAAKW,IACP4qB,IAEM5qB,EAAI,GAAK6qB,EAAM,GAAKxrB,EAAKW,EAAI,KACjC+Q,GAAQ4Z,EACJL,EAAO,IAAKO,EAAM5R,EAAQ,GAAM8R,EAAM9R,GACtCqR,EAAO,IAAKI,EAAQ,GAExBA,EAAS,EACTC,GAAS,GAGLE,EAAM,EAAIJ,GAAQprB,EAAKW,EAAI,KAC/B+Q,GAAQuZ,EAAO,IAAKM,GACpBA,EAAa,IAGfF,IAIJ,OAAO3Z,EAGT3Q,EAAQsF,OAAS,SAAiBslB,EAAQC,EAASlgB,GACjD,IAAI/C,EAAOyf,EAAMyD,WAAWD,GACxBR,EAAOO,EAAOG,QAAQV,KACtBprB,EAAO2rB,EAAOG,QAAQ9rB,KACtB+rB,EAAaX,EAAqB,EAAdziB,EAAKiR,OAEzBoS,EAAMrjB,EAAK5E,MAAMgQ,MAAM9K,EAEvB,SAAW2hB,EAAejiB,EAAK5E,MAAMgQ,MAAO,QAC5C,YAAcgY,EAAa,IAAMA,EAAa,SAF9C,GAIAra,EACF,SAAWkZ,EAAejiB,EAAK5E,MAAMyL,KAAM,UAC3C,OAAS2b,EAASnrB,EAAMorB,EAAMziB,EAAKiR,QAAU,MAE3CqS,EAAU,gBAAuBF,EAAa,IAAMA,EAAa,IAEjE1X,EAAS1L,EAAK0L,MAAa,UAAY1L,EAAK0L,MAAQ,aAAe1L,EAAK0L,MAAQ,KAA1D,GAEtB6X,EAAS,2CAA6C7X,EAAQ4X,EAAU,iCAAmCD,EAAKta,EAAO,WAM3H,MAJkB,oBAAPhG,GACTA,EAAG,KAAMwgB,GAGJA,I,qBC/ET,IAAI9D,EAAQ,EAAQ,QAEpB,SAAS+D,EAAaC,EAAKC,EAAQjB,GACjCgB,EAAIE,UAAU,EAAG,EAAGD,EAAOhY,MAAOgY,EAAOE,QAEpCF,EAAOpmB,QAAOomB,EAAOpmB,MAAQ,IAClComB,EAAOE,OAASnB,EAChBiB,EAAOhY,MAAQ+W,EACfiB,EAAOpmB,MAAMsmB,OAASnB,EAAO,KAC7BiB,EAAOpmB,MAAMoO,MAAQ+W,EAAO,KAG9B,SAASoB,IACP,IACE,OAAOld,SAASmd,cAAc,UAC9B,MAAO3f,GACP,MAAM,IAAIxE,MAAM,yCAIpBvH,EAAQsF,OAAS,SAAiBslB,EAAQU,EAAQT,GAChD,IAAIjjB,EAAOijB,EACPc,EAAWL,EAEK,qBAAT1jB,GAA0B0jB,GAAWA,EAAOM,aACrDhkB,EAAO0jB,EACPA,OAAS3lB,GAGN2lB,IACHK,EAAWF,KAGb7jB,EAAOyf,EAAMyD,WAAWljB,GACxB,IAAIyiB,EAAOhD,EAAMwE,cAAcjB,EAAOG,QAAQV,KAAMziB,GAEhDyjB,EAAMM,EAASC,WAAW,MAC1BE,EAAQT,EAAIU,gBAAgB1B,EAAMA,GAMtC,OALAhD,EAAM2E,cAAcF,EAAM7sB,KAAM2rB,EAAQhjB,GAExCwjB,EAAYC,EAAKM,EAAUtB,GAC3BgB,EAAIY,aAAaH,EAAO,EAAG,GAEpBH,GAGT3rB,EAAQksB,gBAAkB,SAA0BtB,EAAQU,EAAQT,GAClE,IAAIjjB,EAAOijB,EAES,qBAATjjB,GAA0B0jB,GAAWA,EAAOM,aACrDhkB,EAAO0jB,EACPA,OAAS3lB,GAGNiC,IAAMA,EAAO,IAElB,IAAI+jB,EAAW3rB,EAAQsF,OAAOslB,EAAQU,EAAQ1jB,GAE1ClG,EAAOkG,EAAKlG,MAAQ,YACpByqB,EAAevkB,EAAKukB,cAAgB,GAExC,OAAOR,EAASlS,UAAU/X,EAAMyqB,EAAalT,W,oCC7D/C,W,2CCAA,IAAI3T,EAAS,WAAa,IAAIsQ,EAAI1W,KAAS2W,EAAGD,EAAI9S,eAAmBgT,EAAGF,EAAIG,MAAMD,IAAID,EAAG,OAAOC,EAAG,cAAc,CAACnT,YAAY,KAAKQ,MAAM,CAAC,MAAQ,GAAG,cAAc,KAAK,CAAC2S,EAAG,WAAW,CAAC3S,MAAM,CAAC,KAAO,GAAG,eAAe,GAAG,iBAAiB,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,KAAO,GAAG,IAAM,GAAG,cAAc,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,MAAQ,OAAO,CAAC2S,EAAG,cAAc,CAACnT,YAAY,QAAQ,CAACmT,EAAG,YAAY,CAACE,YAAY,CAAC,aAAa,QAAQ7S,MAAM,CAAC,MAAQ,KAAK,cAAc,KAAK,CAAC2S,EAAG,QAAQ,CAACnT,YAAY,UAAUQ,MAAM,CAAC,aAAa,KAAK,YAAY,MAAM,IAAM,EAAQ,YAA0B,GAAG2S,EAAG,MAAM,CAACnT,YAAY,8BAA8B,CAACmT,EAAG,WAAW,CAACnT,YAAY,WAAW,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,mBAAmB,QAAQ,GAAGL,EAAG,MAAM,CAACnT,YAAY,8CAA8C,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIQ,aAAa,OAAyB,IAAjBR,EAAIS,UAAiBP,EAAG,MAAM,CAACA,EAAG,UAAU,CAAC3S,MAAM,CAAC,KAAOyS,EAAIU,YAAY,CAACV,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIS,WAAW,QAAQ,GAAGT,EAAIW,KAAKT,EAAG,MAAM,CAACA,EAAG,SAAS,CAACpB,IAAI,OAAOvR,MAAM,CAAC,aAAe,OAAOqT,MAAM,CAAChU,MAAOoT,EAAS,MAAErD,SAAS,SAAUkE,GAAMb,EAAIc,MAAMD,GAAKE,WAAW,UAAU,CAAGf,EAAIwW,cAAgfxW,EAAIW,KAAreT,EAAG,eAAe,CAACpB,IAAI,gBAAgBvR,MAAM,CAAC,MAAQyS,EAAIO,GAAG,uBAAuB,IAAM,IAAI,cAAcP,EAAImB,GAAK,WAAa,cAAc,iBAAiB,WAAc,OAAQnB,EAAImB,IAAMnB,EAAImB,IAAO,KAAOnB,EAAImB,GAAK,WAAa,OAAO,MAAQnB,EAAIoB,cAAc,QAAU,GAAG,SAAW,GAAG,aAAe,cAAczT,GAAG,CAAC,eAAe,WAAc,OAAQqS,EAAImB,IAAMnB,EAAImB,KAAQP,MAAM,CAAChU,MAAOoT,EAAY,SAAErD,SAAS,SAAUkE,GAAMb,EAAIgF,SAASnE,GAAKE,WAAW,eAAyBf,EAAIwW,eAAiBxW,EAAIyW,YAAavW,EAAG,eAAe,CAAC3S,MAAM,CAAC,MAAQyS,EAAIO,GAAG,0BAA0B,IAAM,IAAI,cAAcP,EAAI0W,GAAK,UAAY,cAAc,iBAAiB,WAAc,OAAQ1W,EAAI0W,IAAM1W,EAAI0W,IAAO,KAAO1W,EAAI0W,GAAK,WAAa,OAAO,MAAQ1W,EAAI2W,mBAAmB,QAAU,GAAG,SAAW,GAAG,aAAe,cAAchpB,GAAG,CAAC,eAAe,WAAc,OAAQqS,EAAI0W,IAAM1W,EAAI0W,KAAQ9V,MAAM,CAAChU,MAAOoT,EAAiB,cAAErD,SAAS,SAAUkE,GAAMb,EAAI4W,cAAc/V,GAAKE,WAAW,mBAAmBf,EAAIW,MAAOX,EAAIwW,eAAiBxW,EAAIyW,YAAavW,EAAG,MAAM,CAACF,EAAIK,GAAG,cAAcH,EAAG,MAAMF,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,qBAAqB,CAACsW,SAAU7W,EAAIiB,QAAQ6V,qBAAqB5W,EAAG,MAAmC,GAA5BF,EAAIiB,QAAQ8V,aAAmB7W,EAAG,OAAO,CAACF,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,+CAA+CL,EAAG,MAAMF,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,oCAAoC,KAAKL,EAAG,MAAMF,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,uCAAuCL,EAAG,QAAQF,EAAIW,KAAKT,EAAG,QAAQF,EAAIW,KAAOX,EAAIwW,cAGlzExW,EAAIW,KAH6zET,EAAG,WAAW,CAAC3S,MAAM,CAAC,wBAAwB,KAAK,CAAC2S,EAAG,QAAQ,CAAClT,MAAM,CACxrF,4BAA6BgT,EAAIc,MACjC5L,UAAW8K,EAAIc,OACfvT,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAIuB,SAAS,CAACvB,EAAIK,GAAGL,EAAIM,GAAKN,EAAIyW,YAAgCzW,EAAIO,GAAG,gBAAzBP,EAAIO,GAAG,aAAyCP,EAAIwW,eAAkBxW,EAAIyW,YAAoIzW,EAAIW,KAA3HT,EAAG,IAAI,CAAC3S,MAAM,CAAC,KAAO,cAAcI,GAAG,CAAC,MAAQqS,EAAIyE,qBAAqB,CAACzE,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,yBAAkC,GAAaP,EAAiB,cAAEE,EAAG,WAAW,CAACA,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAI0B,sBAAsB,CAAC1B,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,sBAAsBL,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAIgX,sBAAsB,CAAChX,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,eAAe,GAAGP,EAAIW,MAAM,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IACnqBmB,EAAkB,G,gDC8HtB,GACEvW,KAAM,WACNlC,KAAM,WAAR,OACA,iBACA,eACA,eACA,aACA,kBACA,SACA,MACA,MACA,YACA,iBACA,+DACA,oEACA,iBAEEsF,QAAS,CACP8V,mBAAoB,WAClBnb,KAAKktB,eAAgB,EACrBltB,KAAKkX,YAAclX,KAAKiX,GAAG,kDAE7ByW,oBAAqB,WACnB1tB,KAAKktB,eAAgB,EACrBvV,EAAN,yBACMA,EAAN,sEACMA,EAAN,cACM,EAAN,qCAEIS,oBAAqB,WAAzB,WACMpJ,QAAQoM,IAAI,yBACZ,IAAN,GACQC,WAAY1D,EAApB,iBAEM4D,EAAN,KACA,KACQ,IAAR,gBACQ,OAAR,IAEA,kBAGQ,OAFA,QAAR,YAEA,oCACU,EAAV,qBACU,EAAV,uEACU,EAAV,mBACU,EAAV,0BAGU,EAAV,sBACU,EAAV,oBAIA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,iBAEIC,kBAAmB,WAAvB,WACMxb,KAAKmX,UAAYnX,KAAKiX,GAAG,oBACzBjX,KAAKoX,UAAY,OACjB,IAAN,GACQiE,WAAY1D,EAApB,gBACQ8D,SAAUzb,KAAK0b,UAEjBH,EAAN,KACA,KACQ,IAAR,cACQ,OAAR,IAEA,kBACQ,QAAR,YACQ,EAAR,aACA,kBACU,QAAV,qBACU,EAAV,0BACU,EAAV,kCACA,mBACU,EAAV,wBACU,EAAV,kBACU,QAAV,iBAGA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,iBAEItD,OAAQ,WAAZ,WACA,6BAEM,GAAK4D,EAGL,GAAI7b,KAAKmtB,YACPntB,KAAKwb,wBADP,CAIAxb,KAAKmX,UAAYnX,KAAKiX,GAAG,8BACzBjX,KAAKoX,UAAY,OAEjB,IAAN,GACQiE,WAAY1D,EAApB,gBACQ8D,SAAUzb,KAAK0b,UAEjBH,EAAN,KACA,KACQ,IAAR,gBACQ,OAAR,IAEA,kBACQ,QAAR,YACQ,EAAR,aACA,kBACU,QAAV,yBACU,EAAV,0BACU,EAAV,uEACU,EAAV,cACU,EAAV,kCACA,kBACU,EAAV,qCACU,EAAV,kBACU,QAAV,cAGU,EAAV,2BAGA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,kBAEIlD,cA/GJ,WA+GA,WACMrY,KAAKmtB,YAAcxV,EAAzB,gCACU3X,KAAKmtB,aACPntB,KAAKkX,YAAclX,KAAKiX,GAAG,yBAC3BjX,KAAK8X,cAAgB,CAC7B,YAAU,QAAV,iCACA,YAAU,OAAV,kGACA,YACU,GAAV,wBACY,IAAZ,mBACA,mBACY,OAAZ,KAGA,mBAGA,2CACA,kDAHA,gDAHA,yDAUY,OAAZ,MAKQ9X,KAAKkX,YAAclX,KAAKiX,GAAG,wBAC3BjX,KAAK8X,cAAgB,CAAC,SAA9B,8CAIM9X,KAAKqtB,mBAAqB,CAChC,YAAQ,QAAR,iCACA,YAAQ,OAAR,oDAIEjhB,MAAO,GACPlH,QAAS,WACPlF,KAAKqY,iBAKPhM,QAAS,WACPrM,KAAKkO,MAAM,iBAAiBA,MAAMiO,MAAMC,QACxCpc,KAAKkO,MAAM,iBAAiBA,MAAMiO,MAAME,aAAa,eAAzD,QACIrc,KAAKkO,MAAM,QAAQA,MAAMyf,KAAKtR,aAAa,eAA/C,WClTkV,I,iLCO9UC,EAAY,eACd,EACAlW,EACAoS,GACA,EACA,KACA,KACA,MAIa,aAAA8D,EAAiB,QAgBhC,IAAkBA,EAAW,CAACC,SAAA,KAAOC,UAAA,KAAQzY,OAAA,KAAK0Y,QAAA,KAAMC,UAAA,OAAUC,aAAA,KAAWC,QAAA,KAAMC,QAAA,KAAMC,OAAA,KAAKC,UAAA,KAAQE,aAAA,KAAWC,WAAA,Q,qBClCjH,SAAS0Q,EAAU9C,GAKjB,GAJmB,kBAARA,IACTA,EAAMA,EAAIvJ,YAGO,kBAARuJ,EACT,MAAM,IAAIziB,MAAM,yCAGlB,IAAIwlB,EAAU/C,EAAIrI,QAAQvhB,QAAQ,IAAK,IAAI4sB,MAAM,IACjD,GAAID,EAAQxtB,OAAS,GAAwB,IAAnBwtB,EAAQxtB,QAAgBwtB,EAAQxtB,OAAS,EACjE,MAAM,IAAIgI,MAAM,sBAAwByiB,GAInB,IAAnB+C,EAAQxtB,QAAmC,IAAnBwtB,EAAQxtB,SAClCwtB,EAAU/e,MAAMxO,UAAUyhB,OAAOX,MAAM,GAAIyM,EAAQpD,KAAI,SAAU3Q,GAC/D,MAAO,CAACA,EAAGA,QAKQ,IAAnB+T,EAAQxtB,QAAcwtB,EAAQ9lB,KAAK,IAAK,KAE5C,IAAIgmB,EAAWxiB,SAASsiB,EAAQzlB,KAAK,IAAK,IAE1C,MAAO,CACL4lB,EAAID,GAAY,GAAM,IACtBE,EAAIF,GAAY,GAAM,IACtB9kB,EAAI8kB,GAAY,EAAK,IACrB/kB,EAAc,IAAX+kB,EACHjD,IAAK,IAAM+C,EAAQpL,MAAM,EAAG,GAAGra,KAAK,KAIxCtH,EAAQ8qB,WAAa,SAAqBD,GACnCA,IAASA,EAAU,IACnBA,EAAQ7nB,QAAO6nB,EAAQ7nB,MAAQ,IAEpC,IAAI6V,EAAmC,qBAAnBgS,EAAQhS,QACP,OAAnBgS,EAAQhS,QACRgS,EAAQhS,OAAS,EAAI,EAAIgS,EAAQhS,OAE/BvF,EAAQuX,EAAQvX,OAASuX,EAAQvX,OAAS,GAAKuX,EAAQvX,WAAQ3N,EAC/DmT,EAAQ+R,EAAQ/R,OAAS,EAE7B,MAAO,CACLxF,MAAOA,EACPwF,MAAOxF,EAAQ,EAAIwF,EACnBD,OAAQA,EACR7V,MAAO,CACLyL,KAAMqe,EAASjC,EAAQ7nB,MAAMyL,MAAQ,aACrCuE,MAAO8Z,EAASjC,EAAQ7nB,MAAMgQ,OAAS,cAEzCtR,KAAMmpB,EAAQnpB,KACdyqB,aAActB,EAAQsB,cAAgB,KAI1CnsB,EAAQotB,SAAW,SAAmBC,EAAQzlB,GAC5C,OAAOA,EAAK0L,OAAS1L,EAAK0L,OAAS+Z,EAAuB,EAAdzlB,EAAKiR,OAC7CjR,EAAK0L,OAAS+Z,EAAuB,EAAdzlB,EAAKiR,QAC5BjR,EAAKkR,OAGX9Y,EAAQ6rB,cAAgB,SAAwBwB,EAAQzlB,GACtD,IAAIkR,EAAQ9Y,EAAQotB,SAASC,EAAQzlB,GACrC,OAAOuB,KAAKuhB,OAAO2C,EAAuB,EAAdzlB,EAAKiR,QAAcC,IAGjD9Y,EAAQgsB,cAAgB,SAAwBsB,EAASC,EAAI3lB,GAQ3D,IAPA,IAAIyiB,EAAOkD,EAAGxC,QAAQV,KAClBprB,EAAOsuB,EAAGxC,QAAQ9rB,KAClB6Z,EAAQ9Y,EAAQotB,SAAS/C,EAAMziB,GAC/B4lB,EAAarkB,KAAKuhB,OAAOL,EAAqB,EAAdziB,EAAKiR,QAAcC,GACnD2U,EAAe7lB,EAAKiR,OAASC,EAC7B4U,EAAU,CAAC9lB,EAAK5E,MAAMgQ,MAAOpL,EAAK5E,MAAMyL,MAEnC7O,EAAI,EAAGA,EAAI4tB,EAAY5tB,IAC9B,IAAK,IAAI6hB,EAAI,EAAGA,EAAI+L,EAAY/L,IAAK,CACnC,IAAIkM,EAAgC,GAAtB/tB,EAAI4tB,EAAa/L,GAC3BmM,EAAUhmB,EAAK5E,MAAMgQ,MAEzB,GAAIpT,GAAK6tB,GAAgBhM,GAAKgM,GAC5B7tB,EAAI4tB,EAAaC,GAAgBhM,EAAI+L,EAAaC,EAAc,CAChE,IAAII,EAAO1kB,KAAKuhB,OAAO9qB,EAAI6tB,GAAgB3U,GACvCgV,EAAO3kB,KAAKuhB,OAAOjJ,EAAIgM,GAAgB3U,GAC3C8U,EAAUF,EAAQzuB,EAAK4uB,EAAOxD,EAAOyD,GAAQ,EAAI,GAGnDR,EAAQK,KAAYC,EAAQV,EAC5BI,EAAQK,KAAYC,EAAQT,EAC5BG,EAAQK,KAAYC,EAAQzlB,EAC5BmlB,EAAQK,GAAUC,EAAQ1lB,K,wEC7FhC,IAAIpJ,EAAa,EAAQ,QAOzB,SAASivB,EAAW1D,GAClB,IAAKA,GAAQA,EAAO,EAClB,MAAM,IAAI9iB,MAAM,qDAGlBrI,KAAKmrB,KAAOA,EACZnrB,KAAKD,KAAOH,EAAW4mB,MAAM2E,EAAOA,GACpCnrB,KAAK8uB,YAAclvB,EAAW4mB,MAAM2E,EAAOA,GAY7C0D,EAAUvuB,UAAUgqB,IAAM,SAAUmB,EAAKF,EAAKjoB,EAAOyrB,GACnD,IAAIthB,EAAQge,EAAMzrB,KAAKmrB,KAAOI,EAC9BvrB,KAAKD,KAAK0N,GAASnK,EACfyrB,IAAU/uB,KAAK8uB,YAAYrhB,IAAS,IAU1CohB,EAAUvuB,UAAU0uB,IAAM,SAAUvD,EAAKF,GACvC,OAAOvrB,KAAKD,KAAK0rB,EAAMzrB,KAAKmrB,KAAOI,IAWrCsD,EAAUvuB,UAAU2uB,IAAM,SAAUxD,EAAKF,EAAKjoB,GAC5CtD,KAAKD,KAAK0rB,EAAMzrB,KAAKmrB,KAAOI,IAAQjoB,GAUtCurB,EAAUvuB,UAAU4uB,WAAa,SAAUzD,EAAKF,GAC9C,OAAOvrB,KAAK8uB,YAAYrD,EAAMzrB,KAAKmrB,KAAOI,IAG5C1qB,EAAOC,QAAU+tB,G,sBClEf,SAAUjkB,EAAMuS,GAGhBtc,EAAOC,QAAoBqc,EAAQ,EAAQ,UAH5C,CAaCnd,GAAM,SAAUqd,IAEhB,WAEG,IAAIlH,EAAIkH,EACJuD,EAAQzK,EAAE0K,IACVC,EAAOF,EAAME,KACb6B,EAAQxM,EAAEyM,IACVY,EAAOb,EAAMa,KACbyB,EAAS9O,EAAE4P,KAKJd,EAAOa,KAAOhF,EAAKC,OAAO,CAWjCG,KAAM,SAAUyE,EAAQhd,GAEpBgd,EAAS3lB,KAAKmvB,QAAU,IAAIxJ,EAAOzE,KAGjB,iBAAPvY,IACPA,EAAM6a,EAAKT,MAAMpa,IAIrB,IAAIymB,EAAkBzJ,EAAOnB,UACzB6K,EAAyC,EAAlBD,EAGvBzmB,EAAIgZ,SAAW0N,IACf1mB,EAAMgd,EAAOJ,SAAS5c,IAI1BA,EAAI0Z,QAWJ,IARA,IAAIiN,EAAOtvB,KAAKuvB,MAAQ5mB,EAAI6Y,QACxBgO,EAAOxvB,KAAKyvB,MAAQ9mB,EAAI6Y,QAGxBkO,EAAYJ,EAAK5N,MACjBiO,EAAYH,EAAK9N,MAGZhhB,EAAI,EAAGA,EAAI0uB,EAAiB1uB,IACjCgvB,EAAUhvB,IAAM,WAChBivB,EAAUjvB,IAAM,UAEpB4uB,EAAK3N,SAAW6N,EAAK7N,SAAW0N,EAGhCrvB,KAAK+jB,SAUTA,MAAO,WAEH,IAAI4B,EAAS3lB,KAAKmvB,QAGlBxJ,EAAO5B,QACP4B,EAAON,OAAOrlB,KAAKyvB,QAevBpK,OAAQ,SAAUC,GAId,OAHAtlB,KAAKmvB,QAAQ9J,OAAOC,GAGbtlB,MAiBXulB,SAAU,SAAUD,GAEhB,IAAIK,EAAS3lB,KAAKmvB,QAGdS,EAAYjK,EAAOJ,SAASD,GAChCK,EAAO5B,QACP,IAAI8L,EAAOlK,EAAOJ,SAASvlB,KAAKuvB,MAAM/N,QAAQO,OAAO6N,IAErD,OAAOC,MAzHnB,O,oCCND,IAAI5I,EAAU,EAAQ,QAEtB,SAAS6I,IAEP,IACE,IAAIxR,EAAM,IAAIvC,WAAW,GAEzB,OADAuC,EAAIyR,UAAY,CAACA,UAAWhU,WAAWzb,UAAW0vB,IAAK,WAAc,OAAO,KACvD,KAAd1R,EAAI0R,MACX,MAAOnjB,GACP,OAAO,GAIXojB,EAAOC,oBAAsBJ,IAE7B,IAAIK,EAAeF,EAAOC,oBACpB,WACA,WAEN,SAASD,EAAQG,EAAK3Z,EAAQpW,GAC5B,OAAK4vB,EAAOC,qBAAyBlwB,gBAAgBiwB,EAIlC,kBAARG,EACFC,EAAYrwB,KAAMowB,GAGpBjwB,EAAKH,KAAMowB,EAAK3Z,EAAQpW,GAPtB,IAAI4vB,EAAOG,EAAK3Z,EAAQpW,GA0BnC,SAASiwB,EAASjwB,GAGhB,GAAIA,GAAU8vB,EACZ,MAAM,IAAIxpB,WAAW,0DACawpB,EAAa5O,SAAS,IAAM,UAEhE,OAAgB,EAATlhB,EAGT,SAASkwB,EAAOrtB,GACd,OAAOA,IAAQA,EAGjB,SAASstB,EAAcC,EAAMpwB,GAC3B,IAAIqwB,EAaJ,OAZIT,EAAOC,qBACTQ,EAAM,IAAI3U,WAAW1b,GACrBqwB,EAAIX,UAAYE,EAAO3vB,YAGvBowB,EAAMD,EACM,OAARC,IACFA,EAAM,IAAIT,EAAO5vB,IAEnBqwB,EAAIrwB,OAASA,GAGRqwB,EAGT,SAASL,EAAaI,EAAMtF,GAC1B,IAAIuF,EAAMF,EAAaC,EAAMtF,EAAO,EAAI,EAAoB,EAAhBmF,EAAQnF,IAEpD,IAAK8E,EAAOC,oBACV,IAAK,IAAIxvB,EAAI,EAAGA,EAAIyqB,IAAQzqB,EAC1BgwB,EAAIhwB,GAAK,EAIb,OAAOgwB,EAGT,SAASC,EAAYF,EAAMG,GACzB,IAAIvwB,EAA8B,EAArBkd,EAAWqT,GACpBF,EAAMF,EAAaC,EAAMpwB,GAEzBwwB,EAASH,EAAIlwB,MAAMowB,GASvB,OAPIC,IAAWxwB,IAIbqwB,EAAMA,EAAIjO,MAAM,EAAGoO,IAGdH,EAGT,SAASI,EAAeL,EAAM3U,GAG5B,IAFA,IAAIzb,EAASyb,EAAMzb,OAAS,EAAI,EAA4B,EAAxBiwB,EAAQxU,EAAMzb,QAC9CqwB,EAAMF,EAAaC,EAAMpwB,GACpBK,EAAI,EAAGA,EAAIL,EAAQK,GAAK,EAC/BgwB,EAAIhwB,GAAgB,IAAXob,EAAMpb,GAEjB,OAAOgwB,EAGT,SAASK,EAAiBN,EAAM3U,EAAOzF,EAAYhW,GACjD,GAAIgW,EAAa,GAAKyF,EAAMyB,WAAalH,EACvC,MAAM,IAAI1P,WAAW,6BAGvB,GAAImV,EAAMyB,WAAalH,GAAchW,GAAU,GAC7C,MAAM,IAAIsG,WAAW,6BAGvB,IAAI+pB,EAiBJ,OAfEA,OADiBjqB,IAAf4P,QAAuC5P,IAAXpG,EACxB,IAAI0b,WAAWD,QACDrV,IAAXpG,EACH,IAAI0b,WAAWD,EAAOzF,GAEtB,IAAI0F,WAAWD,EAAOzF,EAAYhW,GAGtC4vB,EAAOC,oBAETQ,EAAIX,UAAYE,EAAO3vB,UAGvBowB,EAAMI,EAAcL,EAAMC,GAGrBA,EAGT,SAASM,EAAYP,EAAM/P,GACzB,GAAIuP,EAAOgB,SAASvQ,GAAM,CACxB,IAAIpW,EAA4B,EAAtBgmB,EAAQ5P,EAAIrgB,QAClBqwB,EAAMF,EAAaC,EAAMnmB,GAE7B,OAAmB,IAAfomB,EAAIrwB,QAIRqgB,EAAIwQ,KAAKR,EAAK,EAAG,EAAGpmB,GAHXomB,EAOX,GAAIhQ,EAAK,CACP,GAA4B,qBAAhByQ,aACRzQ,EAAItK,kBAAkB+a,aAAgB,WAAYzQ,EACpD,MAA0B,kBAAfA,EAAIrgB,QAAuBkwB,EAAM7P,EAAIrgB,QACvCmwB,EAAaC,EAAM,GAErBK,EAAcL,EAAM/P,GAG7B,GAAiB,WAAbA,EAAIle,MAAqBsM,MAAMmY,QAAQvG,EAAI3gB,MAC7C,OAAO+wB,EAAcL,EAAM/P,EAAI3gB,MAInC,MAAM,IAAIynB,UAAU,sFAGtB,SAAS4J,EAAaR,EAAQS,GAE5B,IAAIC,EADJD,EAAQA,GAASE,IAMjB,IAJA,IAAIlxB,EAASuwB,EAAOvwB,OAChBmxB,EAAgB,KAChBC,EAAQ,GAEH/wB,EAAI,EAAGA,EAAIL,IAAUK,EAAG,CAI/B,GAHA4wB,EAAYV,EAAO9S,WAAWpd,GAG1B4wB,EAAY,OAAUA,EAAY,MAAQ,CAE5C,IAAKE,EAAe,CAElB,GAAIF,EAAY,MAAQ,EAEjBD,GAAS,IAAM,GAAGI,EAAM1pB,KAAK,IAAM,IAAM,KAC9C,SACK,GAAIrH,EAAI,IAAML,EAAQ,EAEtBgxB,GAAS,IAAM,GAAGI,EAAM1pB,KAAK,IAAM,IAAM,KAC9C,SAIFypB,EAAgBF,EAEhB,SAIF,GAAIA,EAAY,MAAQ,EACjBD,GAAS,IAAM,GAAGI,EAAM1pB,KAAK,IAAM,IAAM,KAC9CypB,EAAgBF,EAChB,SAIFA,EAAkE,OAArDE,EAAgB,OAAU,GAAKF,EAAY,YAC/CE,IAEJH,GAAS,IAAM,GAAGI,EAAM1pB,KAAK,IAAM,IAAM,KAMhD,GAHAypB,EAAgB,KAGZF,EAAY,IAAM,CACpB,IAAKD,GAAS,GAAK,EAAG,MACtBI,EAAM1pB,KAAKupB,QACN,GAAIA,EAAY,KAAO,CAC5B,IAAKD,GAAS,GAAK,EAAG,MACtBI,EAAM1pB,KACJupB,GAAa,EAAM,IACP,GAAZA,EAAmB,UAEhB,GAAIA,EAAY,MAAS,CAC9B,IAAKD,GAAS,GAAK,EAAG,MACtBI,EAAM1pB,KACJupB,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,MAAIA,EAAY,SASrB,MAAM,IAAIjpB,MAAM,sBARhB,IAAKgpB,GAAS,GAAK,EAAG,MACtBI,EAAM1pB,KACJupB,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,OAAOG,EAGT,SAASlU,EAAYqT,GACnB,GAAIX,EAAOgB,SAASL,GAClB,OAAOA,EAAOvwB,OAEhB,GAA2B,qBAAhB8wB,aAA6D,oBAAvBA,YAAYO,SACxDP,YAAYO,OAAOd,IAAWA,aAAkBO,aACnD,OAAOP,EAAOrT,WAEM,kBAAXqT,IACTA,EAAS,GAAKA,GAGhB,IAAItmB,EAAMsmB,EAAOvwB,OACjB,OAAY,IAARiK,EAAkB,EAEf8mB,EAAYR,GAAQvwB,OAG7B,SAASsxB,EAAY5W,EAAK6W,EAAKnb,EAAQpW,GACrC,IAAK,IAAIK,EAAI,EAAGA,EAAIL,IAAUK,EAAG,CAC/B,GAAKA,EAAI+V,GAAUmb,EAAIvxB,QAAYK,GAAKqa,EAAI1a,OAAS,MACrDuxB,EAAIlxB,EAAI+V,GAAUsE,EAAIra,GAExB,OAAOA,EAGT,SAASmxB,EAAWnB,EAAKE,EAAQna,EAAQpW,GACvC,OAAOsxB,EAAWP,EAAYR,EAAQF,EAAIrwB,OAASoW,GAASia,EAAKja,EAAQpW,GAG3E,SAASF,EAAMswB,EAAMntB,EAAOmT,EAAQpW,GAClC,GAAqB,kBAAViD,EACT,MAAM,IAAIkkB,UAAU,yCAGtB,MAA2B,qBAAhB2J,aAA+B7tB,aAAiB6tB,YAClDJ,EAAgBN,EAAMntB,EAAOmT,EAAQpW,GAGzB,kBAAViD,EACFqtB,EAAWF,EAAMntB,EAAOmT,GAG1Bua,EAAWP,EAAMntB,GA1QtB2sB,EAAOC,sBACTD,EAAO3vB,UAAUyvB,UAAYhU,WAAWzb,UACxC2vB,EAAOF,UAAYhU,WAGG,qBAAXsL,QAA0BA,OAAOyK,SACxC7B,EAAO5I,OAAOyK,WAAa7B,GAC7B5mB,OAAO0oB,eAAe9B,EAAQ5I,OAAOyK,QAAS,CAC5CxuB,MAAO,KACP0uB,cAAc,EACdC,YAAY,EACZC,UAAU,KAkQhBjC,EAAO3vB,UAAUE,MAAQ,SAAgBowB,EAAQna,EAAQpW,QAExCoG,IAAXgQ,QAIkBhQ,IAAXpG,GAA0C,kBAAXoW,GAHxCpW,EAASL,KAAKK,OACdoW,EAAS,GAMA0b,SAAS1b,KAClBA,GAAkB,EACd0b,SAAS9xB,GACXA,GAAkB,EAElBA,OAASoG,GAIb,IAAI2rB,EAAYpyB,KAAKK,OAASoW,EAG9B,SAFehQ,IAAXpG,GAAwBA,EAAS+xB,KAAW/xB,EAAS+xB,GAEpDxB,EAAOvwB,OAAS,IAAMA,EAAS,GAAKoW,EAAS,IAAOA,EAASzW,KAAKK,OACrE,MAAM,IAAIsG,WAAW,0CAGvB,OAAOkrB,EAAU7xB,KAAM4wB,EAAQna,EAAQpW,IAGzC4vB,EAAO3vB,UAAUmiB,MAAQ,SAAgBrY,EAAOI,GAC9C,IAoBI6nB,EApBA/nB,EAAMtK,KAAKK,OAqBf,GApBA+J,IAAUA,EACVI,OAAc/D,IAAR+D,EAAoBF,IAAQE,EAE9BJ,EAAQ,GACVA,GAASE,EACLF,EAAQ,IAAGA,EAAQ,IACdA,EAAQE,IACjBF,EAAQE,GAGNE,EAAM,GACRA,GAAOF,EACHE,EAAM,IAAGA,EAAM,IACVA,EAAMF,IACfE,EAAMF,GAGJE,EAAMJ,IAAOI,EAAMJ,GAGnB6lB,EAAOC,oBACTmC,EAASryB,KAAKsyB,SAASloB,EAAOI,GAE9B6nB,EAAOtC,UAAYE,EAAO3vB,cACrB,CACL,IAAIiyB,EAAW/nB,EAAMJ,EACrBioB,EAAS,IAAIpC,EAAOsC,OAAU9rB,GAC9B,IAAK,IAAI/F,EAAI,EAAGA,EAAI6xB,IAAY7xB,EAC9B2xB,EAAO3xB,GAAKV,KAAKU,EAAI0J,GAIzB,OAAOioB,GAGTpC,EAAO3vB,UAAU4wB,KAAO,SAAe/mB,EAAQqoB,EAAapoB,EAAOI,GAQjE,GAPKJ,IAAOA,EAAQ,GACfI,GAAe,IAARA,IAAWA,EAAMxK,KAAKK,QAC9BmyB,GAAeroB,EAAO9J,SAAQmyB,EAAcroB,EAAO9J,QAClDmyB,IAAaA,EAAc,GAC5BhoB,EAAM,GAAKA,EAAMJ,IAAOI,EAAMJ,GAG9BI,IAAQJ,EAAO,OAAO,EAC1B,GAAsB,IAAlBD,EAAO9J,QAAgC,IAAhBL,KAAKK,OAAc,OAAO,EAGrD,GAAImyB,EAAc,EAChB,MAAM,IAAI7rB,WAAW,6BAEvB,GAAIyD,EAAQ,GAAKA,GAASpK,KAAKK,OAAQ,MAAM,IAAIsG,WAAW,6BAC5D,GAAI6D,EAAM,EAAG,MAAM,IAAI7D,WAAW,2BAG9B6D,EAAMxK,KAAKK,SAAQmK,EAAMxK,KAAKK,QAC9B8J,EAAO9J,OAASmyB,EAAchoB,EAAMJ,IACtCI,EAAML,EAAO9J,OAASmyB,EAAcpoB,GAGtC,IACI1J,EADA4J,EAAME,EAAMJ,EAGhB,GAAIpK,OAASmK,GAAUC,EAAQooB,GAAeA,EAAchoB,EAE1D,IAAK9J,EAAI4J,EAAM,EAAG5J,GAAK,IAAKA,EAC1ByJ,EAAOzJ,EAAI8xB,GAAexyB,KAAKU,EAAI0J,QAEhC,GAAIE,EAAM,MAAS2lB,EAAOC,oBAE/B,IAAKxvB,EAAI,EAAGA,EAAI4J,IAAO5J,EACrByJ,EAAOzJ,EAAI8xB,GAAexyB,KAAKU,EAAI0J,QAGrC2R,WAAWzb,UAAUgqB,IAAI3R,KACvBxO,EACAnK,KAAKsyB,SAASloB,EAAOA,EAAQE,GAC7BkoB,GAIJ,OAAOloB,GAGT2lB,EAAO3vB,UAAUmyB,KAAO,SAAevvB,EAAKkH,EAAOI,GAEjD,GAAmB,kBAARtH,GAOT,GANqB,kBAAVkH,GACTA,EAAQ,EACRI,EAAMxK,KAAKK,QACa,kBAARmK,IAChBA,EAAMxK,KAAKK,QAEM,IAAf6C,EAAI7C,OAAc,CACpB,IAAIwd,EAAO3a,EAAI4a,WAAW,GACtBD,EAAO,MACT3a,EAAM2a,QAGc,kBAAR3a,IAChBA,GAAY,KAId,GAAIkH,EAAQ,GAAKpK,KAAKK,OAAS+J,GAASpK,KAAKK,OAASmK,EACpD,MAAM,IAAI7D,WAAW,sBAGvB,GAAI6D,GAAOJ,EACT,OAAOpK,KAQT,IAAIU,EACJ,GANA0J,KAAkB,EAClBI,OAAc/D,IAAR+D,EAAoBxK,KAAKK,OAASmK,IAAQ,EAE3CtH,IAAKA,EAAM,GAGG,kBAARA,EACT,IAAKxC,EAAI0J,EAAO1J,EAAI8J,IAAO9J,EACzBV,KAAKU,GAAKwC,MAEP,CACL,IAAIuuB,EAAQxB,EAAOgB,SAAS/tB,GACxBA,EACA,IAAI+sB,EAAO/sB,GACXoH,EAAMmnB,EAAMpxB,OAChB,IAAKK,EAAI,EAAGA,EAAI8J,EAAMJ,IAAS1J,EAC7BV,KAAKU,EAAI0J,GAASqnB,EAAM/wB,EAAI4J,GAIhC,OAAOtK,MAGTiwB,EAAOlO,OAAS,SAAiBnY,EAAMvJ,GACrC,IAAK4mB,EAAQrd,GACX,MAAM,IAAI4d,UAAU,+CAGtB,GAAoB,IAAhB5d,EAAKvJ,OACP,OAAOmwB,EAAa,KAAM,GAG5B,IAAI9vB,EACJ,QAAe+F,IAAXpG,EAEF,IADAA,EAAS,EACJK,EAAI,EAAGA,EAAIkJ,EAAKvJ,SAAUK,EAC7BL,GAAUuJ,EAAKlJ,GAAGL,OAItB,IAAI+V,EAASia,EAAY,KAAMhwB,GAC3BqyB,EAAM,EACV,IAAKhyB,EAAI,EAAGA,EAAIkJ,EAAKvJ,SAAUK,EAAG,CAChC,IAAIgwB,EAAM9mB,EAAKlJ,GACf,IAAKuvB,EAAOgB,SAASP,GACnB,MAAM,IAAIlJ,UAAU,+CAEtBkJ,EAAIQ,KAAK9a,EAAQsc,GACjBA,GAAOhC,EAAIrwB,OAEb,OAAO+V,GAGT6Z,EAAO1S,WAAaA,EAEpB0S,EAAO3vB,UAAUqyB,WAAY,EAC7B1C,EAAOgB,SAAW,SAAmBhoB,GACnC,QAAe,MAALA,IAAaA,EAAE0pB,YAG3B9xB,EAAOC,QAAQ0lB,MAAQ,SAAU2E,GAC/B,IAAI/U,EAAS,IAAI6Z,EAAO9E,GAExB,OADA/U,EAAOqc,KAAK,GACLrc,GAGTvV,EAAOC,QAAQX,KAAO,SAAUJ,GAC9B,OAAO,IAAIkwB,EAAOlwB,K,uBCtgBpB,IAAI6yB,EAA8B,EAAQ,QAI1CA,EAA4B,SAAS,SAAU1R,GAC7C,OAAO,SAAoBnhB,EAAMsW,EAAYhW,GAC3C,OAAO6gB,EAAKlhB,KAAMD,EAAMsW,EAAYhW,Q,6DCLxC,IAAIyV,EAAsB,EAAQ,QAE9BC,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAC7C6c,EAAQ,GAAGzqB,KAKf4N,EAAuB,QAAQ,SAAc8c,GAC3C,OAAOD,EAAMzR,MAAMrL,EAAY/V,MAAOyK,e,oCCVxC,IAAIwU,EAAS,EAAQ,QACjB8T,EAAuB,EAAQ,QAA8BC,OAC7Dld,EAAsB,EAAQ,QAC9Bmd,EAAiB,EAAQ,QACzBC,EAAkB,EAAQ,QAE1BC,EAAWD,EAAgB,YAC3BnX,EAAakD,EAAOlD,WACpBqX,EAAcH,EAAeI,OAC7BC,EAAYL,EAAexmB,KAC3B8mB,EAAeN,EAAeO,QAC9Bzd,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAC7Cyd,EAA2B1X,GAAcA,EAAWzb,UAAU6yB,GAE9DO,IAA6BD,GAA8D,WAAlCA,EAAyBxxB,KAElF0xB,EAAmB,WACrB,OAAOP,EAAYza,KAAK5C,EAAY/V,QAKtCgW,EAAuB,WAAW,WAChC,OAAOud,EAAa5a,KAAK5C,EAAY/V,UAIvCgW,EAAuB,QAAQ,WAC7B,OAAOsd,EAAU3a,KAAK5C,EAAY/V,UAIpCgW,EAAuB,SAAU2d,EAAkBZ,IAAyBW,GAG5E1d,EAAuBmd,EAAUQ,EAAkBZ,IAAyBW,I,oCCpC5E,IAAIzU,EAAS,EAAQ,QACjB2U,EAAc,EAAQ,QACtBC,EAAsB,EAAQ,QAC9BC,EAAe,EAAQ,QACvBC,EAA8B,EAAQ,QACtCC,EAAc,EAAQ,QACtB9U,EAAQ,EAAQ,QAChB+U,EAAa,EAAQ,QACrB3tB,EAAsB,EAAQ,QAC9BC,EAAW,EAAQ,QACnB2tB,EAAU,EAAQ,QAClBC,EAAU,EAAQ,QAClBC,EAAiB,EAAQ,QACzBC,EAAiB,EAAQ,QACzBC,EAAsB,EAAQ,QAA8CC,EAC5ExC,EAAiB,EAAQ,QAAuCwC,EAChEC,EAAY,EAAQ,QACpBC,EAAiB,EAAQ,QACzBC,EAAsB,EAAQ,QAE9B3B,EAAuBe,EAAad,OACpC2B,EAA6Bb,EAAac,aAC1CC,EAAmBH,EAAoB1F,IACvC8F,EAAmBJ,EAAoBpK,IACvCyK,EAAe,cACfC,EAAY,WACZC,EAAY,YACZC,EAAe,eACfC,EAAc,cACdC,EAAoBnW,EAAO8V,GAC3BM,EAAeD,EACfE,EAAYrW,EAAO+V,GACnBO,EAAqBD,GAAaA,EAAUL,GAC5CO,EAAkBnsB,OAAO/I,UACzBqG,EAAasY,EAAOtY,WAEpB8uB,EAActB,EAAQuB,KACtBC,EAAgBxB,EAAQyB,OAExBC,EAAW,SAAUnvB,GACvB,MAAO,CAAU,IAATA,IAGNovB,EAAY,SAAUpvB,GACxB,MAAO,CAAU,IAATA,EAAeA,GAAU,EAAI,MAGnCqvB,EAAY,SAAUrvB,GACxB,MAAO,CAAU,IAATA,EAAeA,GAAU,EAAI,IAAMA,GAAU,GAAK,IAAMA,GAAU,GAAK,MAG7EsvB,EAAc,SAAU5f,GAC1B,OAAOA,EAAO,IAAM,GAAKA,EAAO,IAAM,GAAKA,EAAO,IAAM,EAAIA,EAAO,IAGjE6f,EAAc,SAAUvvB,GAC1B,OAAO+uB,EAAY/uB,EAAQ,GAAI,IAG7BwvB,EAAc,SAAUxvB,GAC1B,OAAO+uB,EAAY/uB,EAAQ,GAAI,IAG7ByvB,EAAY,SAAUC,EAAaztB,GACrCopB,EAAeqE,EAAYnB,GAAYtsB,EAAK,CAAEqmB,IAAK,WAAc,OAAO6F,EAAiB70B,MAAM2I,OAG7FqmB,EAAM,SAAUqH,EAAM3rB,EAAO+C,EAAO6oB,GACtC,IAAIC,EAAWrC,EAAQzmB,GACnB+oB,EAAQ3B,EAAiBwB,GAC7B,GAAIE,EAAW7rB,EAAQ8rB,EAAMjZ,WAAY,MAAM5W,EAAWwuB,GAC1D,IAAI1D,EAAQoD,EAAiB2B,EAAMpgB,QAAQqb,MACvCrnB,EAAQmsB,EAAWC,EAAMngB,WACzBqf,EAAOjE,EAAMhP,MAAMrY,EAAOA,EAAQM,GACtC,OAAO4rB,EAAiBZ,EAAOA,EAAKltB,WAGlC8hB,EAAM,SAAU+L,EAAM3rB,EAAO+C,EAAOgpB,EAAYnzB,EAAOgzB,GACzD,IAAIC,EAAWrC,EAAQzmB,GACnB+oB,EAAQ3B,EAAiBwB,GAC7B,GAAIE,EAAW7rB,EAAQ8rB,EAAMjZ,WAAY,MAAM5W,EAAWwuB,GAI1D,IAHA,IAAI1D,EAAQoD,EAAiB2B,EAAMpgB,QAAQqb,MACvCrnB,EAAQmsB,EAAWC,EAAMngB,WACzBqf,EAAOe,GAAYnzB,GACd5C,EAAI,EAAGA,EAAIgK,EAAOhK,IAAK+wB,EAAMrnB,EAAQ1J,GAAKg1B,EAAKY,EAAiB51B,EAAIgK,EAAQhK,EAAI,IAG3F,GAAKmzB,EA0FE,CACL,IAAI6C,EAA8B3D,GAAwBqC,EAAkBnzB,OAAS8yB,EAErF,GAAK7V,GAAM,WACTkW,EAAkB,OACblW,GAAM,WACX,IAAIkW,GAAmB,QACnBlW,GAAM,WAIV,OAHA,IAAIkW,EACJ,IAAIA,EAAkB,KACtB,IAAIA,EAAkBuB,KACfD,IAAgC/B,KAc9B+B,GAA+B/B,GACxCZ,EAA4BqB,EAAmB,OAAQL,OAdrD,CAEFM,EAAe,SAAqBh1B,GAElC,OADA4zB,EAAWj0B,KAAMq1B,GACV,IAAID,EAAkBlB,EAAQ7zB,KAGvC,IADA,IAC+DsI,EAD3DiuB,EAAuBvB,EAAaJ,GAAaG,EAAkBH,GAC9DxoB,EAAO6nB,EAAoBc,GAAoB7S,EAAI,EAAQ9V,EAAKpM,OAASkiB,IACzE5Z,EAAM8D,EAAK8V,QAAS8S,GACzBtB,EAA4BsB,EAAc1sB,EAAKysB,EAAkBzsB,IAGrEiuB,EAAqBC,YAAcxB,EAMjChB,GAAkBD,EAAemB,KAAwBC,GAC3DnB,EAAekB,EAAoBC,GAIrC,IAAIsB,EAAW,IAAIxB,EAAU,IAAID,EAAa,IAC1C0B,GAAWxB,EAAmByB,QAClCF,EAASE,QAAQ,EAAG,YACpBF,EAASE,QAAQ,EAAG,aAChBF,EAASG,QAAQ,IAAOH,EAASG,QAAQ,IAAIjD,EAAYuB,EAAoB,CAC/EyB,QAAS,SAAiB3gB,EAAY/S,GACpCyzB,GAASpe,KAAK3Y,KAAMqW,EAAY/S,GAAS,IAAM,KAEjD4zB,SAAU,SAAkB7gB,EAAY/S,GACtCyzB,GAASpe,KAAK3Y,KAAMqW,EAAY/S,GAAS,IAAM,MAEhD,CAAE6zB,QAAQ,SAvIb9B,EAAe,SAAqBh1B,GAClC4zB,EAAWj0B,KAAMq1B,EAAcN,GAC/B,IAAIxX,EAAa2W,EAAQ7zB,GACzBy0B,EAAiB90B,KAAM,CACrByxB,MAAO+C,EAAU7b,KAAK,IAAI7J,MAAMyO,GAAa,GAC7CA,WAAYA,IAETqW,IAAa5zB,KAAKud,WAAaA,IAGtC+X,EAAY,SAAkBlf,EAAQC,EAAYkH,GAChD0W,EAAWj0B,KAAMs1B,EAAWN,GAC5Bf,EAAW7d,EAAQif,EAAcL,GACjC,IAAIoC,EAAevC,EAAiBze,GAAQmH,WACxC9G,EAASnQ,EAAoB+P,GACjC,GAAII,EAAS,GAAKA,EAAS2gB,EAAc,MAAMzwB,EAAW,gBAE1D,GADA4W,OAA4B9W,IAAf8W,EAA2B6Z,EAAe3gB,EAASlQ,EAASgX,GACrE9G,EAAS8G,EAAa6Z,EAAc,MAAMzwB,EAAWuuB,GACzDJ,EAAiB90B,KAAM,CACrBoW,OAAQA,EACRmH,WAAYA,EACZlH,WAAYI,IAETmd,IACH5zB,KAAKoW,OAASA,EACdpW,KAAKud,WAAaA,EAClBvd,KAAKqW,WAAaI,IAIlBmd,IACFuC,EAAUd,EAAc,cACxBc,EAAUb,EAAW,UACrBa,EAAUb,EAAW,cACrBa,EAAUb,EAAW,eAGvBtB,EAAYsB,EAAUL,GAAY,CAChCgC,QAAS,SAAiB5gB,GACxB,OAAO2Y,EAAIhvB,KAAM,EAAGqW,GAAY,IAAM,IAAM,IAE9CghB,SAAU,SAAkBhhB,GAC1B,OAAO2Y,EAAIhvB,KAAM,EAAGqW,GAAY,IAElCihB,SAAU,SAAkBjhB,GAC1B,IAAIob,EAAQzC,EAAIhvB,KAAM,EAAGqW,EAAY5L,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,GAC3E,OAAQgrB,EAAM,IAAM,EAAIA,EAAM,KAAO,IAAM,IAE7C8F,UAAW,SAAmBlhB,GAC5B,IAAIob,EAAQzC,EAAIhvB,KAAM,EAAGqW,EAAY5L,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,GAC3E,OAAOgrB,EAAM,IAAM,EAAIA,EAAM,IAE/B+F,SAAU,SAAkBnhB,GAC1B,OAAO2f,EAAYhH,EAAIhvB,KAAM,EAAGqW,EAAY5L,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,KAEpFgxB,UAAW,SAAmBphB,GAC5B,OAAO2f,EAAYhH,EAAIhvB,KAAM,EAAGqW,EAAY5L,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,MAAgB,GAEpGixB,WAAY,SAAoBrhB,GAC9B,OAAOsf,EAAc3G,EAAIhvB,KAAM,EAAGqW,EAAY5L,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,GAAY,KAElGkxB,WAAY,SAAoBthB,GAC9B,OAAOsf,EAAc3G,EAAIhvB,KAAM,EAAGqW,EAAY5L,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,GAAY,KAElGuwB,QAAS,SAAiB3gB,EAAY/S,GACpCgnB,EAAItqB,KAAM,EAAGqW,EAAYwf,EAAUvyB,IAErC4zB,SAAU,SAAkB7gB,EAAY/S,GACtCgnB,EAAItqB,KAAM,EAAGqW,EAAYwf,EAAUvyB,IAErCs0B,SAAU,SAAkBvhB,EAAY/S,GACtCgnB,EAAItqB,KAAM,EAAGqW,EAAYyf,EAAWxyB,EAAOmH,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,IAEnFoxB,UAAW,SAAmBxhB,EAAY/S,GACxCgnB,EAAItqB,KAAM,EAAGqW,EAAYyf,EAAWxyB,EAAOmH,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,IAEnFqxB,SAAU,SAAkBzhB,EAAY/S,GACtCgnB,EAAItqB,KAAM,EAAGqW,EAAY0f,EAAWzyB,EAAOmH,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,IAEnFsxB,UAAW,SAAmB1hB,EAAY/S,GACxCgnB,EAAItqB,KAAM,EAAGqW,EAAY0f,EAAWzyB,EAAOmH,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,IAEnFuxB,WAAY,SAAoB3hB,EAAY/S,GAC1CgnB,EAAItqB,KAAM,EAAGqW,EAAY4f,EAAa3yB,EAAOmH,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,IAErFwxB,WAAY,SAAoB5hB,EAAY/S,GAC1CgnB,EAAItqB,KAAM,EAAGqW,EAAY6f,EAAa5yB,EAAOmH,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,MAoDzFguB,EAAeY,EAAcN,GAC7BN,EAAea,EAAWN,GAE1Bn0B,EAAOC,QAAU,CACfqwB,YAAakE,EACb6C,SAAU5C,I,wBCxOV,SAAU1qB,EAAMuS,GAGhBtc,EAAOC,QAAoBqc,EAAQ,EAAQ,UAH5C,CAaCnd,GAAM,SAAUqd,GAEjB,OAAOA,EAASuF,IAAIf,Q,oCCdrB,IAAI/L,EAAsB,EAAQ,QAC9BqiB,EAAQ,EAAQ,QAAgChjB,KAEhDY,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,QAAQ,SAAckQ,GAC3C,OAAOiS,EAAMpiB,EAAY/V,MAAOkmB,EAAYzb,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,qBCNpF5F,EAAOC,QAAU,WACf,MAA0B,oBAAZs3B,SAA0BA,QAAQ93B,WAAa83B,QAAQ93B,UAAUoa,O,uBCLjF,IAAI9a,EAAa,EAAQ,QAErBy4B,EAAYz4B,EAAW4mB,MAAM,KAC7B8R,EAAY14B,EAAW4mB,MAAM,MAS/B,WAEA,IADA,IAAIjd,EAAI,EACC7I,EAAI,EAAGA,EAAI,IAAKA,IACvB23B,EAAU33B,GAAK6I,EACf+uB,EAAU/uB,GAAK7I,EAEf6I,IAAM,EAIE,IAAJA,IACFA,GAAK,KAQT,IAAK7I,EAAI,IAAKA,EAAI,IAAKA,IACrB23B,EAAU33B,GAAK23B,EAAU33B,EAAI,MApBhC,GA8BDI,EAAQsa,IAAM,SAAcmd,GAC1B,GAAIA,EAAI,EAAG,MAAM,IAAIlwB,MAAM,OAASkwB,EAAI,KACxC,OAAOD,EAAUC,IASnBz3B,EAAQgmB,IAAM,SAAcyR,GAC1B,OAAOF,EAAUE,IAUnBz3B,EAAQslB,IAAM,SAAc7c,EAAGC,GAC7B,OAAU,IAAND,GAAiB,IAANC,EAAgB,EAIxB6uB,EAAUC,EAAU/uB,GAAK+uB,EAAU9uB,M,gJCpD7B,qBAAc,CAC3BvH,KAD2B,YAG3BC,MAAO,CACLoN,SADK,QAELkpB,OAFK,QAGLC,SAHK,QAIL51B,MAJK,QAKL61B,SALK,QAMLC,gBAAiB,CACfh2B,QADe,GAEfH,KAAM,CAACuI,OAAQ1I,SAEjBu2B,KAVK,QAWLC,SAXK,QAYLz1B,UAZK,QAaL01B,MAbK,QAcL/d,IAAK,CACHvY,KAAM,CAACH,OADJ,QAEHM,QAAS,IAEXo2B,IAAK,CACHv2B,KADG,OAEHG,QAAS,WAIb5C,KAAM,iBAAO,CACXi5B,YAAY,IAGdz1B,SAAU,CACR01B,eADQ,WAEN,IAAM3M,EAAStsB,KAAf,sBAEA,IAAKA,KAAL,WAAsB,OAAOssB,EAE7B,IAAMqM,EAAkBptB,SAASvL,KAAjC,iBAEA,OAAOA,KAAKk5B,YAAL,EAEH5M,GAAWvF,MAAD,GAFd,EAEc,IAEhBoS,sBAZQ,WAaN,OAAIn5B,KAAJ,OAAwBuL,SAASvL,KAAhB,QACbA,KAAKo5B,aAAep5B,KAAxB,MAA2C,GACvCA,KAAKo5B,aAAep5B,KAAxB,MAA2C,IACvCA,KAAJ,YAA6B,IACzBA,KAAJ,MAAuB,GACnBA,KAAK84B,OAAS94B,KAAKkE,SAAS4N,WAAhC,UAA6D,GAC7D,IAEFpN,QArBQ,WAsBN,wCACK,qCADE,OAAP,IAEE,aAFK,EAGL,sBAAuB1E,KAHlB,SAIL,oBAAqBA,KAJhB,OAKL,sBAAuBA,KALlB,SAML,uBAAwBA,KANnB,YAOL,mBAAoBA,KAPf,MAQL,sBAAuBA,KARlB,WASL,kBAAmBA,KATd,KAUL,sBAAuBA,KAVlB,SAWL,uBAAwBA,KAAKo5B,eAGjCF,YApCQ,WAqCN,OAAOl5B,KAAP,UAEFo5B,YAvCQ,WAwCN,OAAOp5B,KAAP,WAEF6P,OA1CQ,WA2CN,wCACK7P,KADE,kBAAP,IAEEssB,OAAQ,eAActsB,KAAD,oBAK3BkF,QAjF2B,WAiFpB,WACCm0B,EAAgB,CACpB,CAAC,MADmB,mBAEpB,CAAC,gBAFmB,8BAGpB,CAAC,eAHmB,4BAIpB,CAAC,gBAJmB,6BAKpB,CAAC,kBALmB,+BAMpB,CAAC,oBANmB,iCAOpB,CAAC,gBAPmB,6BAQpB,CAAC,mBARmB,gCASpB,CAAC,OATH,qBAaAA,EAAA,SAAsB,YAA4B,0BAA3B,EAA2B,KAA5B,EAA4B,KAC5C,wBAAJ,IAA0C,eAASC,EAAUC,EAAnB,OAI9Cl0B,QAAS,CACPm0B,cADO,WAEL,IAAMt3B,EAAQ,CACZoqB,OAAQ,eAActsB,KADV,gBAEZ+a,IAAK/a,KAAK+a,KAGN6R,EAAQ5sB,KAAK0F,aAAa+zB,IAC5Bz5B,KAAK0F,aAAa+zB,IAAI,CAAEv3B,UACxBlC,KAAK4D,eAAe,EAApB,KAA0B,CAAE1B,UAEhC,OAAOlC,KAAK4D,eAAe,MAAO,CAChCH,YAAa,oBACZ,CAFH,KAIFoC,WAfO,WAgBL,OAAO7F,KAAK4D,eAAe,MAAO,CAChCH,YADgC,qBAEhCuC,MAAO,CACLsmB,OAAQ,eAActsB,KAAD,yBAEtB,eALH,QAOF05B,aAvBO,WAwBL,OAAO15B,KAAK4D,eAAe,MAAO,CAChCH,YADgC,uBAEhCuC,MAAO,CACLsmB,OAAQ,eAActsB,KAAD,mBAEtB,eAAQA,KALX,gBASJoG,OArI2B,SAqIrB,GACJpG,KAAA,WAAkBA,KAAK04B,YAAc14B,KAAK0F,aAA1C,UAEA,IAAMH,EAAW,CAACvF,KAAlB,cACMD,EAAOC,KAAK2D,mBAAmB3D,KAAxB,MAAoC,CAC/C0D,MAAO1D,KADwC,QAE/CgG,MAAOhG,KAFwC,OAG/CqE,GAAIrE,KAAK25B,aAMX,OAHI35B,KAAJ,YAAqBuF,EAAA,KAAcvF,KAAd,iBACjBA,KAAK+a,KAAO/a,KAAK0F,aAArB,MAAuCH,EAAA,QAAiBvF,KAAjB,iBAEhCqG,EAAErG,KAAD,MAAR,O,oCClKJ,IAAIgW,EAAyB,EAAQ,QAAuCA,uBACxEkJ,EAAQ,EAAQ,QAChBD,EAAS,EAAQ,QAEjBlD,EAAakD,EAAOlD,WACpB6d,EAAsB7d,GAAcA,EAAWzb,WAAa,GAC5Du5B,EAAgB,GAAGtY,SACnBuY,EAAY,GAAG1xB,KAEf8W,GAAM,WAAc2a,EAAclhB,KAAK,SACzCkhB,EAAgB,WACd,OAAOC,EAAUnhB,KAAK3Y,QAI1B,IAAI+5B,EAAsBH,EAAoBrY,UAAYsY,EAI1D7jB,EAAuB,WAAY6jB,EAAeE,I,oCCnBlD,IAAIjkB,EAAsB,EAAQ,QAC9BkkB,EAAQ,EAAQ,QAEhBjkB,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAKjDA,EAAuB,QAAQ,SAAc1S,GAC3C,OAAO02B,EAAM5Y,MAAMrL,EAAY/V,MAAOyK,e,oCCVxC,IAAIwd,EAAI,EAAQ,QACZhJ,EAAS,EAAQ,QACjB2U,EAAc,EAAQ,QACtBqG,EAA8C,EAAQ,QACtDnkB,EAAsB,EAAQ,QAC9BokB,EAAoB,EAAQ,QAC5BjG,EAAa,EAAQ,QACrBkG,EAA2B,EAAQ,QACnCpG,EAA8B,EAAQ,QACtCqG,EAAmB,EAAQ,QAC3B7zB,EAAW,EAAQ,QACnB2tB,EAAU,EAAQ,QAClB7J,EAAW,EAAQ,QACnBgQ,EAAgB,EAAQ,QACxBC,EAAS,EAAQ,QACjBC,EAAU,EAAQ,QAClBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnB1hB,EAAS,EAAQ,QACjBsb,EAAiB,EAAQ,QACzBC,EAAsB,EAAQ,QAA8CC,EAC5EmG,EAAiB,EAAQ,QACzBC,EAAU,EAAQ,QAAgCA,QAClDC,EAAa,EAAQ,QACrBC,EAAuB,EAAQ,QAC/BC,EAAiC,EAAQ,QACzCpG,EAAsB,EAAQ,QAC9BqG,EAAoB,EAAQ,QAE5BlG,EAAmBH,EAAoB1F,IACvC8F,EAAmBJ,EAAoBpK,IACvC0Q,EAAuBH,EAAqBtG,EAC5C0G,EAAiCH,EAA+BvG,EAChE2G,EAAQjxB,KAAKixB,MACbv0B,EAAasY,EAAOtY,WACpBwqB,EAAc+I,EAAkB/I,YAChC+G,EAAWgC,EAAkBhC,SAC7BiD,EAA4BrlB,EAAoBqlB,0BAChDC,EAA0BtlB,EAAoBslB,wBAC9CC,EAAkBvlB,EAAoBulB,gBACtCC,EAAaxlB,EAAoBwlB,WACjCC,EAAsBzlB,EAAoBylB,oBAC1CC,EAAyB1lB,EAAoB0lB,uBAC7CC,EAAe3lB,EAAoB2lB,aACnCnlB,EAAoB,oBACpB4e,EAAe,eAEfwG,EAAW,SAAUvlB,EAAGvM,GAC1B,IAAI6D,EAAQ,EACRpN,EAASuJ,EAAKvJ,OACd2N,EAAS,IAAKwtB,EAAuBrlB,GAA5B,CAAgC9V,GAC7C,MAAOA,EAASoN,EAAOO,EAAOP,GAAS7D,EAAK6D,KAC5C,OAAOO,GAGLmoB,EAAY,SAAU3vB,EAAImC,GAC5BqyB,EAAqBx0B,EAAImC,EAAK,CAAEqmB,IAAK,WACnC,OAAO6F,EAAiB70B,MAAM2I,OAI9BgzB,EAAgB,SAAUn1B,GAC5B,IAAIo1B,EACJ,OAAOp1B,aAAc2qB,GAAwC,gBAAxByK,EAAQrB,EAAQ/zB,KAAkC,qBAATo1B,GAG5EC,EAAoB,SAAU1xB,EAAQxB,GACxC,OAAO8yB,EAAatxB,KACdswB,EAAS9xB,IACVA,KAAOwB,GACPiwB,GAAkBzxB,IAClBA,GAAO,GAGVmzB,EAAkC,SAAkC3xB,EAAQxB,GAE9E,OADAA,EAAM0xB,EAAc1xB,GACbkzB,EAAkB1xB,EAAQxB,GAC7BwxB,EAAyB,EAAGhwB,EAAOxB,IACnCsyB,EAA+B9wB,EAAQxB,IAGzCozB,EAAwB,SAAwB5xB,EAAQxB,EAAKqzB,GAE/D,OADArzB,EAAM0xB,EAAc1xB,KAChBkzB,EAAkB1xB,EAAQxB,IACzB6xB,EAASwB,IACT1B,EAAO0B,EAAY,WAClB1B,EAAO0B,EAAY,QACnB1B,EAAO0B,EAAY,QAEnBA,EAAWhK,cACVsI,EAAO0B,EAAY,cAAeA,EAAW9J,UAC7CoI,EAAO0B,EAAY,gBAAiBA,EAAW/J,WAI7C+I,EAAqB7wB,EAAQxB,EAAKqzB,IAFzC7xB,EAAOxB,GAAOqzB,EAAW14B,MAClB6G,IAIPypB,GACGuH,IACHL,EAA+BvG,EAAIuH,EACnCjB,EAAqBtG,EAAIwH,EACzB5F,EAAUoF,EAAqB,UAC/BpF,EAAUoF,EAAqB,cAC/BpF,EAAUoF,EAAqB,cAC/BpF,EAAUoF,EAAqB,WAGjCtT,EAAE,CAAE9d,OAAQ,SAAU+d,MAAM,EAAM+T,QAASd,GAA6B,CACtEe,yBAA0BJ,EAC1B/J,eAAgBgK,IAGlBl7B,EAAOC,QAAU,SAAUq7B,EAAMC,EAASC,GACxC,IAAI7lB,EAAQ2lB,EAAKG,MAAM,QAAQ,GAAK,EAChCC,EAAmBJ,GAAQE,EAAU,UAAY,IAAM,QACvDG,EAAS,MAAQL,EACjBM,EAAS,MAAQN,EACjBO,EAA8Bzd,EAAOsd,GACrCI,EAAwBD,EACxBE,EAAiCD,GAAyBA,EAAsBr8B,UAChFu8B,EAAW,GAEXC,EAAS,SAAUrM,EAAMhjB,GAC3B,IAAI1N,EAAO80B,EAAiBpE,GAC5B,OAAO1wB,EAAKs2B,KAAKmG,GAAQ/uB,EAAQ+I,EAAQzW,EAAKsW,YAAY,IAGxD0mB,EAAS,SAAUtM,EAAMhjB,EAAOnK,GAClC,IAAIvD,EAAO80B,EAAiBpE,GACxB4L,IAAS/4B,GAASA,EAAQ43B,EAAM53B,IAAU,EAAI,EAAIA,EAAQ,IAAO,IAAe,IAARA,GAC5EvD,EAAKs2B,KAAKoG,GAAQhvB,EAAQ+I,EAAQzW,EAAKsW,WAAY/S,GAAO,IAGxD05B,EAAa,SAAUvM,EAAMhjB,GAC/ButB,EAAqBvK,EAAMhjB,EAAO,CAChCuhB,IAAK,WACH,OAAO8N,EAAO98B,KAAMyN,IAEtB6c,IAAK,SAAUhnB,GACb,OAAOy5B,EAAO/8B,KAAMyN,EAAOnK,IAE7B2uB,YAAY,KAIXkJ,EAwCMlB,IACT0C,EAAwBP,GAAQ,SAAUa,EAAOl9B,EAAMm9B,EAAkBC,GAEvE,OADAlJ,EAAWgJ,EAAON,EAAuBJ,GAClCxB,EAAkB,WACvB,OAAKP,EAASz6B,GACV47B,EAAc57B,QAA0B0G,IAAZ02B,EAC5B,IAAIT,EAA4B38B,EAAMsqB,EAAS6S,EAAkB1mB,GAAQ2mB,QACpD12B,IAArBy2B,EACE,IAAIR,EAA4B38B,EAAMsqB,EAAS6S,EAAkB1mB,IACjE,IAAIkmB,EAA4B38B,GAClC07B,EAAa17B,GAAc27B,EAASiB,EAAuB58B,GACxD26B,EAAe/hB,KAAKgkB,EAAuB58B,GAPtB,IAAI28B,EAA4BxI,EAAQn0B,IAD7C,GASpBk9B,EAAON,MAGVtI,GAAgBA,EAAesI,EAAuBrB,GAC1DX,EAAQrG,EAAoBoI,IAA8B,SAAU/zB,GAC5DA,KAAOg0B,GACX5I,EAA4B4I,EAAuBh0B,EAAK+zB,EAA4B/zB,OAGxFg0B,EAAsBr8B,UAAYs8B,IA5DlCD,EAAwBP,GAAQ,SAAU3L,EAAM1wB,EAAM0W,EAAQ0mB,GAC5DlJ,EAAWxD,EAAMkM,EAAuBJ,GACxC,IAEInmB,EAAQmH,EAAYld,EAFpBoN,EAAQ,EACR4I,EAAa,EAEjB,GAAKmkB,EAASz6B,GAIP,KAAI47B,EAAc57B,GAalB,OAAI07B,EAAa17B,GACf27B,EAASiB,EAAuB58B,GAEhC26B,EAAe/hB,KAAKgkB,EAAuB58B,GAflDqW,EAASrW,EACTsW,EAAagU,EAAS5T,EAAQD,GAC9B,IAAI4mB,EAAOr9B,EAAKwd,WAChB,QAAgB9W,IAAZ02B,EAAuB,CACzB,GAAIC,EAAO5mB,EAAO,MAAM7P,EAAWuuB,GAEnC,GADA3X,EAAa6f,EAAO/mB,EAChBkH,EAAa,EAAG,MAAM5W,EAAWuuB,QAGrC,GADA3X,EAAahX,EAAS42B,GAAW3mB,EAC7B+G,EAAalH,EAAa+mB,EAAM,MAAMz2B,EAAWuuB,GAEvD70B,EAASkd,EAAa/G,OAftBnW,EAAS6zB,EAAQn0B,GACjBwd,EAAald,EAASmW,EACtBJ,EAAS,IAAI+a,EAAY5T,GAmB3BuX,EAAiBrE,EAAM,CACrBra,OAAQA,EACRC,WAAYA,EACZkH,WAAYA,EACZld,OAAQA,EACRg2B,KAAM,IAAI6B,EAAS9hB,KAErB,MAAO3I,EAAQpN,EAAQ28B,EAAWvM,EAAMhjB,QAGtC4mB,GAAgBA,EAAesI,EAAuBrB,GAC1DsB,EAAiCD,EAAsBr8B,UAAYyY,EAAOwiB,IAyBxEqB,EAA+B/F,cAAgB8F,GACjD5I,EAA4B6I,EAAgC,cAAeD,GAG7E5I,EAA4B6I,EAAgCxB,EAAyBuB,GAEjFtB,GACFtH,EAA4B6I,EAAgCvB,EAAiBkB,GAG/EM,EAASN,GAAoBI,EAE7B1U,EAAE,CACAhJ,QAAQ,EAAMgd,OAAQU,GAAyBD,EAA6BW,MAAOlC,GAClF0B,GAEGvmB,KAAqBqmB,GACzB5I,EAA4B4I,EAAuBrmB,EAAmBE,GAGlEF,KAAqBsmB,GACzB7I,EAA4B6I,EAAgCtmB,EAAmBE,GAGjFokB,EAAW2B,KAER17B,EAAOC,QAAU,c,qBC5OxB,IAAIw8B,EAAMrzB,KAAKqzB,IACXC,EAAMtzB,KAAKszB,IACX/R,EAAQvhB,KAAKuhB,MACbpQ,EAAMnR,KAAKmR,IACXoiB,EAAMvzB,KAAKuzB,IAEX9H,EAAO,SAAUhvB,EAAQ+2B,EAAgBhM,GAC3C,IAOIiM,EAAUC,EAAU7jB,EAPpB1D,EAAS,IAAItH,MAAM2iB,GACnBmM,EAAyB,EAARnM,EAAYgM,EAAiB,EAC9CI,GAAQ,GAAKD,GAAkB,EAC/BE,EAAQD,GAAQ,EAChBE,EAAwB,KAAnBN,EAAwBF,EAAI,GAAI,IAAMA,EAAI,GAAI,IAAM,EACzDS,EAAOt3B,EAAS,GAAgB,IAAXA,GAAgB,EAAIA,EAAS,EAAI,EAAI,EAC1D+G,EAAQ,EAkCZ,IAhCA/G,EAAS42B,EAAI52B,GAETA,GAAUA,GAAUA,IAAW6qB,KAEjCoM,EAAWj3B,GAAUA,EAAS,EAAI,EAClCg3B,EAAWG,IAEXH,EAAWlS,EAAMpQ,EAAI1U,GAAU82B,GAC3B92B,GAAUoT,EAAIyjB,EAAI,GAAIG,IAAa,IACrCA,IACA5jB,GAAK,GAGLpT,GADEg3B,EAAWI,GAAS,EACZC,EAAKjkB,EAELikB,EAAKR,EAAI,EAAG,EAAIO,GAExBp3B,EAASoT,GAAK,IAChB4jB,IACA5jB,GAAK,GAEH4jB,EAAWI,GAASD,GACtBF,EAAW,EACXD,EAAWG,GACFH,EAAWI,GAAS,GAC7BH,GAAYj3B,EAASoT,EAAI,GAAKyjB,EAAI,EAAGE,GACrCC,GAAsBI,IAEtBH,EAAWj3B,EAAS62B,EAAI,EAAGO,EAAQ,GAAKP,EAAI,EAAGE,GAC/CC,EAAW,IAGRD,GAAkB,EAAGrnB,EAAO3I,KAAsB,IAAXkwB,EAAgBA,GAAY,IAAKF,GAAkB,GAGjG,IAFAC,EAAWA,GAAYD,EAAiBE,EACxCC,GAAkBH,EACXG,EAAiB,EAAGxnB,EAAO3I,KAAsB,IAAXiwB,EAAgBA,GAAY,IAAKE,GAAkB,GAEhG,OADAxnB,IAAS3I,IAAiB,IAAPuwB,EACZ5nB,GAGLwf,EAAS,SAAUxf,EAAQqnB,GAC7B,IAQIE,EARAlM,EAAQrb,EAAO/V,OACfu9B,EAAyB,EAARnM,EAAYgM,EAAiB,EAC9CI,GAAQ,GAAKD,GAAkB,EAC/BE,EAAQD,GAAQ,EAChBI,EAAQL,EAAiB,EACzBnwB,EAAQgkB,EAAQ,EAChBuM,EAAO5nB,EAAO3I,KACdiwB,EAAkB,IAAPM,EAGf,IADAA,IAAS,EACFC,EAAQ,EAAGP,EAAsB,IAAXA,EAAiBtnB,EAAO3I,GAAQA,IAASwwB,GAAS,GAI/E,IAHAN,EAAWD,GAAY,IAAMO,GAAS,EACtCP,KAAcO,EACdA,GAASR,EACFQ,EAAQ,EAAGN,EAAsB,IAAXA,EAAiBvnB,EAAO3I,GAAQA,IAASwwB,GAAS,GAC/E,GAAiB,IAAbP,EACFA,EAAW,EAAII,MACV,IAAIJ,IAAaG,EACtB,OAAOF,EAAWhH,IAAMqH,GAAQzM,IAAWA,IAE3CoM,GAAsBJ,EAAI,EAAGE,GAC7BC,GAAsBI,EACtB,OAAQE,GAAQ,EAAI,GAAKL,EAAWJ,EAAI,EAAGG,EAAWD,IAG1D58B,EAAOC,QAAU,CACf40B,KAAMA,EACNE,OAAQA,I,mBChFV90B,EAAQo9B,SAAW,CACjBC,WAAY,EACZC,WAAY,EACZC,WAAY,EACZC,WAAY,EACZC,WAAY,EACZC,WAAY,EACZC,WAAY,EACZC,WAAY,GAOd,IAAIC,EAAgB,CAClBC,GAAI,EACJC,GAAI,EACJC,GAAI,GACJC,GAAI,IAkJN,SAASC,EAAWxlB,EAAa9Y,EAAG6hB,GAClC,OAAQ/I,GACN,KAAK1Y,EAAQo9B,SAASC,WAAY,OAAQz9B,EAAI6hB,GAAK,IAAM,EACzD,KAAKzhB,EAAQo9B,SAASE,WAAY,OAAO19B,EAAI,IAAM,EACnD,KAAKI,EAAQo9B,SAASG,WAAY,OAAO9b,EAAI,IAAM,EACnD,KAAKzhB,EAAQo9B,SAASI,WAAY,OAAQ59B,EAAI6hB,GAAK,IAAM,EACzD,KAAKzhB,EAAQo9B,SAASK,WAAY,OAAQt0B,KAAKuhB,MAAM9qB,EAAI,GAAKuJ,KAAKuhB,MAAMjJ,EAAI,IAAM,IAAM,EACzF,KAAKzhB,EAAQo9B,SAASM,WAAY,OAAQ99B,EAAI6hB,EAAK,EAAK7hB,EAAI6hB,EAAK,IAAM,EACvE,KAAKzhB,EAAQo9B,SAASO,WAAY,OAAS/9B,EAAI6hB,EAAK,EAAK7hB,EAAI6hB,EAAK,GAAK,IAAM,EAC7E,KAAKzhB,EAAQo9B,SAASQ,WAAY,OAASh+B,EAAI6hB,EAAK,GAAK7hB,EAAI6hB,GAAK,GAAK,IAAM,EAE7E,QAAS,MAAM,IAAIla,MAAM,mBAAqBmR,IApJlD1Y,EAAQ+a,QAAU,SAAkBojB,GAClC,OAAe,MAARA,GAAyB,KAATA,IAAgBlY,MAAMkY,IAASA,GAAQ,GAAKA,GAAQ,GAU7En+B,EAAQX,KAAO,SAAemD,GAC5B,OAAOxC,EAAQ+a,QAAQvY,GAASiI,SAASjI,EAAO,SAAMmD,GAUxD3F,EAAQo+B,aAAe,SAAuBn/B,GAQ5C,IAPA,IAAIorB,EAAOprB,EAAKorB,KACZgU,EAAS,EACTC,EAAe,EACfC,EAAe,EACfC,EAAU,KACVC,EAAU,KAEL9T,EAAM,EAAGA,EAAMN,EAAMM,IAAO,CACnC2T,EAAeC,EAAe,EAC9BC,EAAUC,EAAU,KAEpB,IAAK,IAAIhU,EAAM,EAAGA,EAAMJ,EAAMI,IAAO,CACnC,IAAI1qB,EAASd,EAAKivB,IAAIvD,EAAKF,GACvB1qB,IAAWy+B,EACbF,KAEIA,GAAgB,IAAGD,GAAUR,EAAcC,IAAMQ,EAAe,IACpEE,EAAUz+B,EACVu+B,EAAe,GAGjBv+B,EAASd,EAAKivB,IAAIzD,EAAKE,GACnB5qB,IAAW0+B,EACbF,KAEIA,GAAgB,IAAGF,GAAUR,EAAcC,IAAMS,EAAe,IACpEE,EAAU1+B,EACVw+B,EAAe,GAIfD,GAAgB,IAAGD,GAAUR,EAAcC,IAAMQ,EAAe,IAChEC,GAAgB,IAAGF,GAAUR,EAAcC,IAAMS,EAAe,IAGtE,OAAOF,GAQTr+B,EAAQ0+B,aAAe,SAAuBz/B,GAI5C,IAHA,IAAIorB,EAAOprB,EAAKorB,KACZgU,EAAS,EAEJ1T,EAAM,EAAGA,EAAMN,EAAO,EAAGM,IAChC,IAAK,IAAIF,EAAM,EAAGA,EAAMJ,EAAO,EAAGI,IAAO,CACvC,IAAInC,EAAOrpB,EAAKivB,IAAIvD,EAAKF,GACvBxrB,EAAKivB,IAAIvD,EAAKF,EAAM,GACpBxrB,EAAKivB,IAAIvD,EAAM,EAAGF,GAClBxrB,EAAKivB,IAAIvD,EAAM,EAAGF,EAAM,GAEb,IAATnC,GAAuB,IAATA,GAAY+V,IAIlC,OAAOA,EAASR,EAAcE,IAShC/9B,EAAQ2+B,aAAe,SAAuB1/B,GAM5C,IALA,IAAIorB,EAAOprB,EAAKorB,KACZgU,EAAS,EACTO,EAAU,EACVC,EAAU,EAELlU,EAAM,EAAGA,EAAMN,EAAMM,IAAO,CACnCiU,EAAUC,EAAU,EACpB,IAAK,IAAIpU,EAAM,EAAGA,EAAMJ,EAAMI,IAC5BmU,EAAYA,GAAW,EAAK,KAAS3/B,EAAKivB,IAAIvD,EAAKF,GAC/CA,GAAO,KAAmB,OAAZmU,GAAiC,KAAZA,IAAoBP,IAE3DQ,EAAYA,GAAW,EAAK,KAAS5/B,EAAKivB,IAAIzD,EAAKE,GAC/CF,GAAO,KAAmB,OAAZoU,GAAiC,KAAZA,IAAoBR,IAI/D,OAAOA,EAASR,EAAcG,IAWhCh+B,EAAQ8+B,aAAe,SAAuB7/B,GAI5C,IAHA,IAAI8/B,EAAY,EACZC,EAAe//B,EAAKA,KAAKM,OAEpBK,EAAI,EAAGA,EAAIo/B,EAAcp/B,IAAKm/B,GAAa9/B,EAAKA,KAAKW,GAE9D,IAAIq/B,EAAI91B,KAAKqzB,IAAIrzB,KAAKuY,KAAkB,IAAZqd,EAAkBC,EAAgB,GAAK,IAEnE,OAAOC,EAAIpB,EAAcI,IAgC3Bj+B,EAAQk/B,UAAY,SAAoBC,EAASlgC,GAG/C,IAFA,IAAIorB,EAAOprB,EAAKorB,KAEPI,EAAM,EAAGA,EAAMJ,EAAMI,IAC5B,IAAK,IAAIE,EAAM,EAAGA,EAAMN,EAAMM,IACxB1rB,EAAKmvB,WAAWzD,EAAKF,IACzBxrB,EAAKkvB,IAAIxD,EAAKF,EAAKyT,EAAUiB,EAASxU,EAAKF,KAWjDzqB,EAAQo/B,YAAc,SAAsBngC,EAAMogC,GAKhD,IAJA,IAAIC,EAAc/2B,OAAOoD,KAAK3L,EAAQo9B,UAAU79B,OAC5CggC,EAAc,EACdC,EAAe/O,IAEV7Y,EAAI,EAAGA,EAAI0nB,EAAa1nB,IAAK,CACpCynB,EAAgBznB,GAChB5X,EAAQk/B,UAAUtnB,EAAG3Y,GAGrB,IAAIwgC,EACFz/B,EAAQo+B,aAAan/B,GACrBe,EAAQ0+B,aAAaz/B,GACrBe,EAAQ2+B,aAAa1/B,GACrBe,EAAQ8+B,aAAa7/B,GAGvBe,EAAQk/B,UAAUtnB,EAAG3Y,GAEjBwgC,EAAUD,IACZA,EAAeC,EACfF,EAAc3nB,GAIlB,OAAO2nB,I,qBCnOT,SAAS1P,EAAYC,GACnB,GAAsB,kBAAXA,EACT,MAAM,IAAIvoB,MAAM,yBAGlB,IAAIm4B,EAAQ5P,EAAO6P,cAEnB,OAAQD,GACN,IAAK,IACL,IAAK,MACH,OAAO1/B,EAAQ+oB,EAEjB,IAAK,IACL,IAAK,SACH,OAAO/oB,EAAQgpB,EAEjB,IAAK,IACL,IAAK,WACH,OAAOhpB,EAAQipB,EAEjB,IAAK,IACL,IAAK,OACH,OAAOjpB,EAAQkpB,EAEjB,QACE,MAAM,IAAI3hB,MAAM,qBAAuBuoB,IA9B7C9vB,EAAQ+oB,EAAI,CAAE6W,IAAK,GACnB5/B,EAAQgpB,EAAI,CAAE4W,IAAK,GACnB5/B,EAAQipB,EAAI,CAAE2W,IAAK,GACnB5/B,EAAQkpB,EAAI,CAAE0W,IAAK,GA+BnB5/B,EAAQ+a,QAAU,SAAkBtC,GAClC,OAAOA,GAA8B,qBAAdA,EAAMmnB,KAC3BnnB,EAAMmnB,KAAO,GAAKnnB,EAAMmnB,IAAM,GAGlC5/B,EAAQX,KAAO,SAAemD,EAAOq9B,GACnC,GAAI7/B,EAAQ+a,QAAQvY,GAClB,OAAOA,EAGT,IACE,OAAOqtB,EAAWrtB,GAClB,MAAOuJ,GACP,OAAO8zB,K,2CC/CX,IAAIv6B,EAAS,WAAa,IAAIsQ,EAAI1W,KAAS2W,EAAGD,EAAI9S,eAAmBgT,EAAGF,EAAIG,MAAMD,IAAID,EAAG,OAAOC,EAAG,MAAM,CAACnT,YAAY,UAAUQ,MAAM,CAAC,GAAK,YAAY,CAAC2S,EAAG,WAAW,CAAC3S,MAAM,CAAC,eAAe,GAAG,MAAQ,OAAOqT,MAAM,CAAChU,MAAOoT,EAAU,OAAErD,SAAS,SAAUkE,GAAMb,EAAI/E,OAAO4F,GAAKE,WAAW,WAAW,CAACb,EAAG,SAAS,CAAC3S,MAAM,CAAC,MAAQ,UAAU,KAAO,KAAK,CAAC2S,EAAG,cAAc,CAACF,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIkqB,cAAc,KAAKhqB,EAAG,oBAAoB,CAACnT,YAAY,OAAOQ,MAAM,CAAC,cAAgB,GAAG,MAAQ,YAAY,IAAI,IAAI,GAAG2S,EAAG,WAAW,CAAC3S,MAAM,CAAC,eAAe,GAAG,MAAQ,OAAOqT,MAAM,CAAChU,MAAOoT,EAAa,UAAErD,SAAS,SAAUkE,GAAMb,EAAImqB,UAAUtpB,GAAKE,WAAW,cAAc,CAACb,EAAG,SAAS,CAACA,EAAG,UAAU,CAAC3S,MAAM,CAAC,KAAOyS,EAAIU,UAAU,OAAS,SAAS,iBAAiB,GAAG,UAAY,IAAI,YAAc,IAAIE,MAAM,CAAChU,MAAOoT,EAAS,MAAErD,SAAS,SAAUkE,GAAMb,EAAIoqB,MAAMvpB,GAAKE,WAAW,UAAU,CAACf,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIQ,aAAa,QAAQ,IAAI,IAAI,IAC35BsB,EAAkB,G,uGCChBuoB,E,WACF,WAAYC,EAAQ5sB,EAAOkY,EAAO2U,EAAOC,GAAK,uBAC1ClyB,QAAQoM,IAAR,8BAAmC6lB,EAAnC,oBAAqD7sB,EAArD,qBAAuEkY,IACvEtsB,KAAKghC,QAAUA,EACfhhC,KAAKoU,MAAQA,EACbpU,KAAKssB,OAASA,EACdtsB,KAAKihC,OAASA,EACdjhC,KAAKmhC,QAAUD,EACflhC,KAAKoK,Q,4CAET,WACSpK,KAAKmhC,UACNnhC,KAAKmhC,QAAU,kBAGnB,IAAIC,EAAS,IAAIC,IAAUC,gBAAgBthC,KAAKmhC,SAChDC,EAAOG,cAAgB,SAAUC,GAC7BxyB,QAAQoM,IAAR,gCAAqComB,IACjCA,GAASH,IAAUI,OAAOC,MAAMC,QAC5BC,GACAA,EAAKC,cAIjB,IAAID,EAAO,IAAIP,IAAUS,OACrBV,GASJphC,KAAKghC,QAAQe,YAAYH,EAAKI,aAAaC,cAG3CL,EAAKM,OAAS,SAAUjgC,GACpB+M,QAAQoM,IAAR,wBAA6BnZ,KAGjC,IAAMkgC,EAAYniC,KAEZoiC,EAAuB,kCAEzBC,EAAqB,SAASA,EAAmBC,GAGjD,IAAIC,EAASD,EAAOE,kBAAkBJ,GAClCK,EAAWpB,IAAUqB,cAAcC,YAAYJ,EAAQH,GAGtDK,GAMDA,EAASG,QAAUP,EAAmBttB,KAAK/U,KAAMsiC,GACjDtzB,QAAQoM,IAAR,qDANAmnB,EAAOM,WAWXC,EAAazB,IAAU0B,YAAYC,oBACnCC,EAAY5B,IAAU6B,YAAYF,oBACtCh0B,QAAQoM,IAAI,aAAa0nB,GACzB9zB,QAAQoM,IAAI,YAAY6nB,GAGxBrB,EAAKL,cAAgB,SAAUC,GAC3BxyB,QAAQoM,IAAR,yBAA8BomB,IAC1BW,EAAUZ,gBACVY,EAAUZ,cAAcC,GACX,GAATA,GACAa,EAAmBT,KAM/BA,EAAKuB,QAAU,SAASC,GACpBp0B,QAAQo0B,MAAMA,GAEVjB,EAAUgB,SACVhB,EAAUgB,QAAQC,IAe1BxB,EAAKyB,QAAL,iBAAuBrjC,KAAKihC,OAA5B,kBAA4CjhC,KAAKoU,MAAjD,mBAAiEpU,KAAKssB,SAGtErb,OAAOqyB,SAAW,WACd1B,EAAKC,cAGT7hC,KAAK4hC,KAAOA,EAGZ,IAAI2B,EAAQ,IAAIlC,IAAUmC,MAAMxjC,KAAKghC,SAE/ByC,EAAmB,SAAUjC,GAM1BI,GAQLA,EAAK8B,eAAelC,IAWxB+B,EAAMI,YAAcF,EACpBF,EAAMK,UAAYH,EAClBF,EAAMM,YAAcJ,EAQpB,IAAIK,EAAO,IAAIzC,IAAU0C,UACzB10B,SAAS20B,KAAKjC,YAAY+B,EAAK7B,cAG/B,IAAIgC,EAAW,IAAI5C,IAAU6C,SAAS70B,UACtC40B,EAASE,SAASL,EAAK7B,cAIvB,IAAMmC,EAAc,SAAUC,GAC1Br1B,QAAQoM,IAAR,6BAAkCipB,IAElCzC,EAAK0C,aAAa,EAAGD,IAKnBE,EAAY,SAAUF,GAGxBzC,EAAK0C,aAAa,EAAGD,IAIzBpzB,OAAOuzB,OAAS,WACZx1B,QAAQoM,IAAR,YACA6oB,EAASlgB,SAEbkgB,EAASQ,UAAYL,EACrBH,EAASS,QAAUH,EAInBvkC,KAAK2kC,MAAQ,WACT31B,QAAQoM,IAAI,uBACZ6oB,EAASQ,UAAY,KACrBR,EAASS,QAAU,KACnBnB,EAAMI,YAAc,KACpBJ,EAAMK,UAAY,KAClBL,EAAMM,YAAc,KACpBjC,EAAKC,cAITD,EAAKgD,OAAS,SAAsBC,GAWhC71B,QAAQoM,IAAR,kBAAuBypB,KAM3BjD,EAAKkD,OAAS,SAAqCvC,EAAQwC,EAAU9iC,GAKjE,GAHA+M,QAAQoM,IAAR,6BAAkC2pB,EAAlC,mBAAqD9iC,IAGpC,eAAb8iC,EAAJ,CAGA,IAAIC,EAAS,IAAI3D,IAAU4D,aAAa1C,GAGpCj/B,EAAQ,GACZ0hC,EAAOE,OAAS,SAAsB7hC,GAClCC,GAASD,GAKb2hC,EAAOG,MAAQ,WAIXn2B,QAAQoM,IAAR,iCAAsC9X,OAM9Cs+B,EAAKwD,YAAc,SAAiC7C,EAAQwC,GAGxD,IAAIC,EAGJ,GAJAh2B,QAAQoM,IAAR,kCAAuC2pB,IAInC,UAAUM,KAAKN,GAAW,CAE1BC,EAAS,IAAI3D,IAAU4D,aAAa1C,GAGpC,IAAIxiC,EAAO,GACXilC,EAAOE,OAAS,SAAsB7hC,GAClCtD,GAAQsD,GAIZ2hC,EAAOG,MAAQ,WAMXn2B,QAAQoM,IAAR,qCAA0Crb,UAO9CilC,EAAS,IAAI3D,IAAUiE,WAAW/C,EAAQwC,GAC1CC,EAAOG,MAAQ,gB,8BAY3B,SAAiB57B,EAAEC,GACfwF,QAAQoM,IAAI,oBACZpb,KAAKoU,MAAQ7K,EACbvJ,KAAKssB,OAAS9iB,EACdxJ,KAAK4hC,KAAK2D,SAASvlC,KAAKoU,MAAMpU,KAAKssB,U,iBAIvC,WACQtsB,KAAK2kC,OACL3kC,KAAK2kC,Y,KAKF5D,IC5Of,GACE9+B,KAAM,SAENlC,KAAM,WAAR,OACA,kBACA,aACA,eACA,iBACA,UACA,gBACA,UACA,SACA,iBAEEmF,QAAS,WAAX,WACI,GAAKyS,EAAT,kBAAI,CAIA3X,KAAK2R,QAAS,EACd3R,KAAK4gC,aAAe5gC,KAAKiX,GAAG,uBAE5B,IAAJ,GACM,WAAN,mBAEI,EAAJ,KACA,KACM,IAAN,eACM,OAAN,IAEA,kBAGM,GAFA,QAAN,YAEA,kBACQ,EAAR,oDACQ,EAAR,UACQ,EAAR,eACQ,QAAR,wBACQ,IAAR,mBACA,SACA,WACA,oBACA,oCACA,6CACA,gDAEQ,QAAR,uBAMQ,IAIR,EAJA,qCAEA,0CAIU,EADV,kBACA,yDAEA,+BAGQ,QAAR,mEACQ,EAAR,sBAEQ,EAAR,+BACU,QAAV,2CACA,MACY,EAAZ,UACY,EAAZ,gBACA,OACY,EAAZ,UACY,EAAZ,aACY,EAAZ,gDACY,EAAZ,sBAIQ,EAAR,yBACU,QAAV,qCACU,EAAV,UACU,EAAV,aACU,EAAV,yCAAY,IAAZ,eACU,EAAV,qBAGQ,IAAR,aACU,IAAV,6CACA,gDACA,aACY,QAAZ,qDACY,EAAZ,EACY,EAAZ,EACY,EAAZ,6BAIQ,OAAR,kCAEQ,QAAR,aACQ,EAAR,UAEQ,EAAR,aACQ,EAAR,wCAAU,IAAV,eAAU,KAAV,gBACQ,EAAR,uBAIA,mBAAM,OAAN,kBACA,oBAAM,OAAN,qBA9FMjX,KAAK8oB,QAAQ/gB,KAAK,YAgGtB1C,QAAS,GAGT+G,MAAF,CACIy0B,UAAJ,eACA,MAEQ7gC,KAAK8oB,QAAQ/gB,KAAK,YAGtB+4B,MAAO,SAAX,MACA,OACQ9gC,KAAK6gC,WAAY,KAKvB2E,iBAjIF,SAiIA,OACIx2B,QAAQoM,IAAI,4BACRpb,KAAK4hC,MACP5hC,KAAK4hC,KAAKp3B,MAEZi7B,MAIJ,ICtMgV,I,yGCQ5UnpB,EAAY,eACd,EACAlW,EACAoS,GACA,EACA,KACA,KACA,MAIa,aAAA8D,EAAiB,QAShC,IAAkBA,EAAW,CAACC,SAAA,KAAOE,QAAA,KAAMC,UAAA,OAAUgpB,UAAA,KAAQC,kBAAA,Q,qBC5B7D,SAASC,IACP5lC,KAAKoW,OAAS,GACdpW,KAAKK,OAAS,EAGhBulC,EAAUtlC,UAAY,CAEpB0uB,IAAK,SAAUvhB,GACb,IAAIo4B,EAAW57B,KAAKuhB,MAAM/d,EAAQ,GAClC,OAA6D,KAApDzN,KAAKoW,OAAOyvB,KAAe,EAAIp4B,EAAQ,EAAM,IAGxD7M,IAAK,SAAU6d,EAAKpe,GAClB,IAAK,IAAIK,EAAI,EAAGA,EAAIL,EAAQK,IAC1BV,KAAK8lC,OAA4C,KAAnCrnB,IAASpe,EAASK,EAAI,EAAM,KAI9CqlC,gBAAiB,WACf,OAAO/lC,KAAKK,QAGdylC,OAAQ,SAAUpF,GAChB,IAAImF,EAAW57B,KAAKuhB,MAAMxrB,KAAKK,OAAS,GACpCL,KAAKoW,OAAO/V,QAAUwlC,GACxB7lC,KAAKoW,OAAOrO,KAAK,GAGf24B,IACF1gC,KAAKoW,OAAOyvB,IAAc,MAAU7lC,KAAKK,OAAS,GAGpDL,KAAKK,WAITQ,EAAOC,QAAU8kC,G,wFCjCXI,EAAiB,CACnBC,sBAAuB,EACvBC,0BAA2B,EAC3BC,8BAA+B,EAC/BC,2CAA4C,EAC5CC,0CAA2C,EAE3CC,4BAA6B,EAC7BC,sBAAuB,EACvBC,mCAAoC,EAEpCC,wBAAyB,EACzBC,0BAA2B,EAC3BC,oBAAqB,EACrBC,yBAA0B,EAE1BC,cAAe,EACfC,aAAc,GAMZC,E,qGAMF,SAAgBC,GACZh4B,QAAQoM,IAAI,mBAGZ,IAAI6rB,GAAe,EACnB,GAAItvB,OAAQuvB,gBAAkBlB,EAAeE,2BACzC,GAAIvuB,OAAQwvB,kBACRF,GAAe,OAEf,GAAIjnC,KAAKonC,YAAYJ,GACjB,OAAO,OAGZ,GAAIrvB,OAAQuvB,gBAAkBlB,EAAeG,+BAChD,GAAIxuB,OAAQ0vB,mBACRJ,GAAe,OAEf,GAAIjnC,KAAKsnC,oBAAoBN,GACzB,OAAO,OAGZ,GAAIrvB,OAAQuvB,gBAAkBlB,EAAeI,2CAChD,GAAIzuB,OAAQwvB,mBAAqBxvB,OAAQ0vB,mBACrCJ,GAAe,MACZ,CACH,IAAKtvB,OAAQwvB,mBACLnnC,KAAKonC,YAAYJ,GACjB,OAAO,EAGf,GAAIhnC,KAAKsnC,oBAAoBN,GACzB,OAAO,OAGZ,GAAIrvB,OAAQuvB,gBAAkBlB,EAAeK,0CAChD,GAAI1uB,OAAQwvB,mBAAqBxvB,OAAQ0vB,mBACrCJ,GAAe,MACZ,CAEH,GADAj4B,QAAQoM,IAAR,sCAA2CzD,OAAQ4vB,qBAC/C5vB,OAAQ4vB,oBAAsBvB,EAAeY,0BACzC5mC,KAAKsnC,oBAAoBN,GACzB,OAAO,EAGf,GAAIhnC,KAAKonC,YAAYJ,GACjB,OAAO,OAIfC,GAAe,EAMnB,OAHAtvB,OAAQsvB,aAAeA,EACvBtvB,OAAQ6vB,SAEJP,GACAD,EAAOle,QAAQ/gB,KAAK,YACb,IAEPi/B,EAAOle,QAAQ/gB,KAAK,YACb,K,yBAIf,SAAYi/B,GACR,OAAKrvB,OAAQ8vB,mBACTT,EAAOle,QAAQ/gB,KAAK,cACb,K,iCAMf,SAAoBi/B,GAOhB,QAAKrvB,OAAQ+vB,aACL/vB,OAAQgwB,kBAAqB3B,EAAeO,uBAAyB5uB,OAAQgwB,kBAAoB3B,EAAeQ,sCAChHQ,EAAOle,QAAQ/gB,KAAK,SACb,O,oBAzFjBg/B,E,WA0GgB,IAAIA,G,eA1GpBA,E,iBA2GsBf,GAMbe,U,qBC3If,IAAIa,EACAC,EAAkB,CACpB,EACA,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC1C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC7C,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KACtD,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MASxD/mC,EAAQgnC,cAAgB,SAAwBzuB,GAC9C,IAAKA,EAAS,MAAM,IAAIhR,MAAM,yCAC9B,GAAIgR,EAAU,GAAKA,EAAU,GAAI,MAAM,IAAIhR,MAAM,6CACjD,OAAiB,EAAVgR,EAAc,IASvBvY,EAAQinC,wBAA0B,SAAkC1uB,GAClE,OAAOwuB,EAAgBxuB,IASzBvY,EAAQknC,YAAc,SAAUjoC,GAC9B,IAAIkoC,EAAQ,EAEZ,MAAgB,IAATloC,EACLkoC,IACAloC,KAAU,EAGZ,OAAOkoC,GAGTnnC,EAAQonC,kBAAoB,SAA4B3T,GACtD,GAAiB,oBAANA,EACT,MAAM,IAAIlsB,MAAM,yCAGlBu/B,EAAiBrT,GAGnBzzB,EAAQqnC,mBAAqB,WAC3B,MAAiC,qBAAnBP,GAGhB9mC,EAAQunB,OAAS,SAAiBpnB,GAChC,OAAO2mC,EAAe3mC,K,oCC5DxB,IAAI6U,EAAsB,EAAQ,QAC9BsyB,EAAY,EAAQ,QAA+BtjC,SAEnDiR,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,YAAY,SAAkBuS,GACnD,OAAO6f,EAAUryB,EAAY/V,MAAOuoB,EAAe9d,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,sRCK5E,SAAAnE,EAAA,qBAAyB,CACtCL,KADsC,UAGtComC,YAHsC,EAKtCnmC,MAAO,CACLoN,SADK,QAELxL,MAAO,CACLtB,KADK,OAELG,QAAS,WAEXiJ,SANK,QAOL08B,QAPK,QAQLC,IARK,OASLC,KAAM,CACJhmC,KAAM,CAACuI,OADH,QAEJpI,QAAS,GAEXsjB,MAAO,CACLzjB,KAAM,CAACuI,OADF,QAELpI,QAAS,QAEXW,MAAOL,SAGTmD,OAzBsC,SAyBhC,KACJ,IAAM,EAAN,EAAM,WAAN,EAAM,UAAuBlE,EAA7B,EAA6BA,MACvBnC,EAAO,CACX0D,YADW,UAEXC,MAAO,gBACL,kBAAmBxB,EADd,MAEL,uBAAwBA,EAFnB,UAGF,eAAuBiqB,IAE5BloB,MAAO,CACLskC,IAAKrmC,EADA,IAEL,eAAgBA,EAAMqmC,KAExBlkC,GAXW,EAYX2B,MAAO,CACLwiC,KAAM,eAActmC,EADf,MAEL+jB,MAAO,eAAc/jB,EAFhB,OAGLumC,SAAUvmC,EAAA,oBAA8B,YAE1CsT,IAAK,SAGP,OAAOnP,EAAE,QAAS,oCAAuCnE,EAAA,SAAiBA,EAAxD,MAAV,GAAR,MC3DJ,ICae,G,UAAA,OAAAI,EAAA,MAAO,EAAD,KAAN,eAAoC,CACjDL,KADiD,aAGjDC,MAAO,CACLoB,MAAO,CACLd,KADK,MAELG,QAAS,iBAAO,MAIpB0C,QAAS,CACPqjC,YADO,WAEL,OAAO1oC,KAAK4D,eAAe,mBAAoB,CAC7CH,YAD6C,sBAE7CQ,MAAO,CACLhC,KADK,qBAEL82B,IAAK,QAEN/4B,KAAKsD,MAAMmnB,IAAIzqB,KANlB,cAQF2oC,WAVO,SAUG,KACR,OAAO3oC,KAAK4D,eAAe,MAAO,CAChCH,YADgC,sBAEhCkF,OACC,eAAQ3I,KAAM,UAAW,CAAE4lB,UAASjd,SAAU,CAHjD,MAOJvC,OA5BiD,SA4B3C,GACJ,OAAOC,EAAE,MAAOrG,KAAK4oC,aAAa5oC,KAAlB,MAA8B,CAC5CyD,YAD4C,aAE5CC,MAAO1D,KAAK4P,eACV,CAAC5P,KAHL,oBC1CJ,I,4DCWM0L,EAAa,OAAApJ,EAAA,MAAO,EAAD,KAEvB,eAFuB,QAAzB,QAOe,EAAAoJ,EAAA,OAAkB,CAC/BzJ,KAD+B,cAG/BC,MAAO,CACL0J,SADK,QAELw3B,MAFK,QAGLyF,WAAY,CACVrmC,KAAM,CAACuI,OADG,QAEVpI,QAAS,GAEXmmC,cAAe,CACbtmC,KAAM,CAACH,OADM,OAEbM,QAAS,iBAAM,KAEjBomC,SAAU,CACRvmC,KAAM,CAACH,OADC,OAERM,QAAS,iBAAM,KAEjBqmC,SAfK,QAgBLC,MAAO,CACLzmC,KADK,MAELG,QAAS,iBAAM,KAEjBumC,QApBK,QAqBLC,gBAAiB,CACf3mC,KAAM,CAACH,OADQ,OAEfM,QAAS,iBAAM,KAEjBymC,eAzBK,QA0BL9lC,MAAO,CAAE2W,UAAU,IAGrBla,KAhC+B,WAiC7B,MAAO,CACLspC,YADK,GAELC,UAFK,EAGLC,YAHK,EAILC,UAJK,EAKLC,WALK,EAMLC,aANK,EAOLC,UAAW3pC,KAPN,MAQLwX,OAAO,IAIXjU,SAAU,CACRqB,cADQ,WAEN,IAAI5E,KAAJ,WACA,OAAIA,KAAJ,MAAuBA,KAFZ,MAQPA,KAAKiF,SAAWjF,KAApB,kBACY,WAEd4pC,SAZQ,WAaN,OACE5pC,KAAK6pC,sBAAsBxpC,OAAS,GACpCL,KAAKqpC,YAAYhpC,OADjB,GAEAL,KAHF,OAQF8pC,WArBQ,WAsBN,OACE9pC,KAAK+pC,wBAAwB1pC,OAAS,GACtCL,KAFF,SAKFgqC,cA3BQ,WA4BN,OAAOhqC,KAAK6pC,sBAAsBxpC,OAAS,GAAKL,KAAhD,OAEFiqC,YA9BQ,WA+BN,OAAOjqC,KAAKkqC,iBAAiB7pC,OAA7B,GAEF8pC,SAjCQ,WAkCN,OAAInqC,KAAJ,aAGEA,KAAK8pC,YACJ9pC,KAAKoqC,gBAAkBpqC,KAF1B,WAKF6pC,sBAzCQ,WA0CN,OAAO7pC,KAAKqqC,oBAAoBrqC,KAAhC,gBAEFsqC,iBA5CQ,WA6CN,OAAOtqC,KAAKqqC,oBAAoBrqC,KAAhC,WAEF+pC,wBA/CQ,WAgDN,OAAO/pC,KAAKqqC,oBAAoBrqC,KAAhC,kBAEFuqC,cAAe,CACbvb,IADa,WAEX,OAAOhvB,KAAP,WAEFsqB,IAJa,SAIV,GACDtqB,KAAA,YAEAA,KAAA,mBAGJwqC,WA5DQ,WA6DN,OAAOxqC,KAAK4L,YACR5L,KAAF,MACAA,KAAK2tB,KAFP,UAKF8c,cAlEQ,WAmEN,OAAQzqC,KAAD,aAAqBA,KAA5B,YAEF0qC,WArEQ,WAsEN,OAAO1qC,KAAKgpC,YACRhpC,KAAF,MACAA,KAAK2tB,KAFP,UAKFyc,eA3EQ,WA4EN,QAAIpqC,KAAJ,gBACIA,KAAJ,cAEOA,KAAKopC,eACRppC,KAAKupC,aAAevpC,KADjB,UAEFA,KAAKwpC,UAAYxpC,KAFtB,aAIF2qC,YAnFQ,WAoFN,OAAO3qC,KAAKkqC,iBAAiBznB,MAAM,EAAG1X,OAAO/K,KAA7C,cAEF4qC,gBAtFQ,WAuFN,IAAI5qC,KAAJ,WACA,OAAIA,KAAK4pC,UAAY5pC,KAArB,eAAiD,QAC7CA,KAAJ,WAA4B,UACxBA,KAAJ,SAA0BA,KAAP,mBAAnB,GAGFkqC,iBA7FQ,WA8FN,OAAIlqC,KAAK6pC,sBAAsBxpC,OAA/B,EACSL,KAAP,sBACSA,KAAKmpC,iBAAmBnpC,KAAKmpC,gBAAgB9oC,OAAjD,EACEL,KAAP,wBACSA,KAAK+oC,UAAY/oC,KAAK+oC,SAAS1oC,OAAnC,EACEL,KAAP,iBACSA,KAAJ,eACEA,KAAP,YACY,KAIlBoM,MAAO,CACL68B,MAAO,CACL91B,QADK,SACE,KACD,eAAU03B,EAAd,IACA7qC,KAAA,YAEFoa,MAAM,GAERmwB,cARK,WAWHvqC,KAAA,YACAA,KAAA,gBAAuBA,KAAK8qC,UAAU9qC,KAAtC,WAEFypC,UAdK,SAcI,GAIJvmC,GACAlD,KAFH,aAIEA,KAAA,cACAA,KAAA,gBAAuBA,KAAK8qC,UAAU9qC,KAAtC,YAGJ0pC,YAzBK,WAyBM,WACTl+B,YAAW,WACT,cACA,gBACA,iBACA,eAJF,IAOFo+B,SAjCK,SAiCG,GACF5pC,KAAJ,gBACEA,KAAA,yBAGJsD,MAtCK,SAsCA,GACHtD,KAAA,cAIJ6O,YAlM+B,WAmM7B7O,KAAA,YAGFkF,QAtM+B,WAuM7BlF,KAAA,MAAaA,KAAK2tB,KAAKod,SAAvB/qC,OAGFuM,cA1M+B,WA2M7BvM,KAAA,MAAaA,KAAK2tB,KAAKqd,WAAvBhrC,OAGFqF,QAAS,CACPglC,oBADO,SACY,GACjB,SACSv7B,MAAA,QAAJ,KACO,CAAP,GAFL,IAKFiV,MAPO,WAQL/jB,KAAA,eACAA,KAAA,cAAqB8O,MAAA,QAAc9O,KAAd,kBAArB,MAKFirC,gBAdO,WAeLjrC,KAAA,gBAGFkrC,SAlBO,WAkB6B,IAA1BC,EAA0B,wDAA5B,EAA4B,uCAC5B9B,EAAN,GACA/lC,EAAQA,GAAStD,KAAjB,cAEA,IAAWA,KAAKwpC,SAAWxpC,KAAKupC,YAArB,GAEX,IAAK,IAAI97B,EAAT,EAAoBA,EAAQzN,KAAKipC,MAAjC,OAA+Cx7B,IAAS,CACtD,IAAM29B,EAAOprC,KAAKipC,MAAlB,GACMzxB,EAAwB,oBAAT4zB,EAAsBA,EAA7B,GAAd,GAEI,IAAA5zB,GAAJ,kBAA8BA,EAC5B6xB,EAAA,KAAiB7xB,GAAjB,IACK,mBAAWA,GAChB,OAAAxI,EAAA,MAAa,sDAAD,sCAAZ,MAOJ,OAHAhP,KAAA,cACAA,KAAA,UAAaqpC,EAAA,OAENrpC,KAAP,U,YChPA,EAAa,OAAAsC,EAAA,MAAO,EAAD,KAAzB,GAWe,oBAAoC,CACjDL,KADiD,UAGjDopC,cAHiD,EAKjDnpC,MAAO,CACLopC,WADK,OAELC,gBAAiB,CACf/oC,KADe,OAEfG,QAAS,IAEXE,MANK,QAOLypB,OAAQ,CAACvhB,OAPJ,QAQLygC,YAAa,CAACvoC,QART,QASLwoC,KATK,OAULC,GAVK,OAWLC,MAXK,OAYLC,QAZK,QAaLC,eAbK,QAcLC,YAdK,OAeLxoC,MAAO,MAGTvD,KAvBiD,WAwB/C,MAAO,CACL4pC,UAAW3pC,KADN,MAEL+rC,cAAc,IAIlBxoC,SAAU,CACRmB,QADQ,WAEN,uBACE,qBAAsB1E,KADjB,SAEL,yBAA0BA,KAFrB,YAGL,2BAA4BA,KAHvB,cAIL,oBAAqBA,KAJhB,QAKL,uBAAwBA,KALnB,WAML,sBAAuBA,KANlB,UAQL,uBAAwC,IAAjBA,KAAK4rC,SARvB,MAQ4C5rC,KAAK4rC,QACtD,uBAAwB5rC,KATnB,WAUL,iBAAkBA,KAVb,OAWFA,KAAK4P,eAGZo8B,WAhBQ,WAiBN,OAAOhsC,KAAK0rC,IAAM,SAAX,OAAoB1rC,KAA3B,OAEFisC,WAnBQ,WAoBN,OAAOjsC,KAAKksC,kBAAkB7rC,OAA9B,GAEF8rC,QAtBQ,WAuBN,OAAQnsC,KAAD,eACHA,KADG,OAEJA,KAAK6rC,gBAAkB7rC,KAF1B,YAIFosC,SA3BQ,WA4BN,SAAUpsC,KAAKwF,OAAOmmC,QAAS3rC,KAA/B,QAMFuqC,cAAe,CACbvb,IADa,WAEX,OAAOhvB,KAAP,WAEFsqB,IAJa,SAIV,GACDtqB,KAAA,YACAA,KAAA,MAAWA,KAAX,kBAGJqsC,QA3CQ,WA4CN,QAASrsC,KAAT,WAEFssC,cA9CQ,WA+CN,OAAOtsC,KAAP,SAEFksC,kBAjDQ,WAiDS,WACf,OAAIlsC,KAAJ,QAAyB,CAACA,KAAR,MAEbA,KAAL,YAEOA,KAAK2qC,YAAYlgB,KAAK,SAAA8hB,GAC3B,qBAAWA,EAAyB,OAAOA,EAE3C,IAAMC,EAAmBD,EAAW,EAApC,eAEA,MAAmC,kBAArBC,EAAgCA,EAA9C,MALK,QAMG,SAAA5mB,GAAO,MANjB,KAMqBA,KARS,IAUhC6mB,YA9DQ,WA+DN,OAA4B,IAArBzsC,KAAKwrC,aAA+C,SAArBxrC,KAAKwrC,aAA0BxrC,KAArE,aAIJoM,MAAO,CACL9I,MADK,SACA,GACHtD,KAAA,cAIJ0sC,aAvGiD,WA0G/C1sC,KAAA,aAAqBA,KAAK2sC,SAASr1B,OAAStX,KAAK2sC,SAASr1B,MAAtC,OAApB,SAGFjS,QAAS,CACPQ,WADO,WAEL,MAAO,CACL7F,KADK,iBAELA,KAFK,aAGLA,KAHF,kBAMF4sC,WARO,WASL,OAAO5sC,KAAK4D,eAAe,MAAO,CAChCH,YADgC,mBAEhCQ,MAAO,CAAEolB,MAAOrpB,KAAK6sC,OAAOxjB,QAC3B,CACDrpB,KADC,eAEDA,KALF,iBAQF8sC,eAjBO,WAkBL,MAAO,CACL9sC,KADK,WAELA,KAAKwF,OAFP,UAKFunC,QAvBO,SAuBA,KAGoB,WAAzBC,EAAyB,uDAHpB,GAKChqC,EAAQhD,KAAA,UAAd,EAAc,SACRitC,EAAY,SAAH,OAAY,eAA3B,IACMC,KAAiBltC,KAAKmtC,WAAWF,KAAvC,GAEMltC,EAAO,OAAAqtC,EAAA,MAAU,CACrBnpC,MAAO,CACL,aAAcipC,EAAc,gCAAH,aADpB,EAELppC,MAAO9D,KAFF,gBAGLuP,KAAMvP,KAHD,KAIL4L,SAAU5L,KAJL,WAKL8T,MAAO9T,KAAK8T,OAEdzP,GAAK6oC,EAED,CACA5oC,MAAQ,SAAAuI,GACNA,EAAA,iBACAA,EAAA,kBAEA,aACApB,GAAMA,EAAN,IAIF4hC,QAAU,SAAAxgC,GACRA,EAAA,iBACAA,EAAA,yBAdF,GARN,GA2BA,OAAO7M,KAAK4D,eAAe,MAAO,CAChCH,YADgC,gBAEhCC,MAAOlB,EAAO,kBAAH,OAAqB,eAArB,SAAyCiE,GACnD,CACDzG,KAAK4D,eAAe,EAApB,OAJF,MAWF0pC,aAtEO,WAuEL,OAAOttC,KAAK4D,eAAe,MAAO5D,KAAK2D,mBAAmB3D,KAAxB,gBAA8C,CAC9EyD,YAD8E,gBAE9EuC,MAAO,CAAEsmB,OAAQ,eAActsB,KAAD,SAC9BqE,GAAI,CACFC,MAAOtE,KADL,QAEFutC,UAAWvtC,KAFT,YAGFqtC,QAASrtC,KAAKwtC,WAEhBh4B,IAAK,eACH,CAACxV,KATL,oBAWFytC,SAlFO,WAmFL,OAAKztC,KAAL,SAEOA,KAAK4D,eAAe,EAAQ,CACjC1B,MAAO,CACL4B,MAAO9D,KADF,gBAELuP,KAAMvP,KAFD,KAGL4L,SAAU5L,KAHL,WAILsoC,QAAStoC,KAJJ,SAKLuoC,IAAKvoC,KALA,WAML8T,MAAO9T,KAAK8T,QAEb9T,KAAKwF,OAAOmmC,OAAS3rC,KATxB,OAF2B,MAa7B0tC,YAhGO,WAgGI,WACT,OAAK1tC,KAAL,YAEOA,KAAK4D,eAAe,EAAW,CACpC1B,MAAO,CACL4B,MAAO9D,KAAKmsC,QAAU,GAAKnsC,KADtB,gBAELuP,KAAMvP,KAFD,KAGL8T,MAAO9T,KAHF,MAILsD,MAAOtD,KAAKksC,mBAEdjoC,MAAO,CACL8B,KAAM/F,KAAKiqC,YAAc,QAAU,MAErC0D,YAAa,CACXhrC,QAAS,SAAAT,GAAK,OAAI,eAAQ,EAAD,iBAbC,MAiBhC0rC,QAlHO,SAkHA,OAKL,IAAKC,EAAL,OAAkB,OAAO,KAEzB,IAAMr4B,EAAM,GAAH,OAAMhT,EAAN,YAAT,GAEA,OAAOxC,KAAK4D,eAAe,MAAO,CAChCH,YAAa,YAAF,OADqB,GAEhC+R,OAFF,IAKFs4B,eAhIO,WAiIL,IAAMD,EAAN,GAQA,OANI7tC,KAAKwF,OAAT,QACEqoC,EAAA,KAAU7tC,KAAKwF,OAAf,SACSxF,KAAJ,aACL6tC,EAAA,KAAU7tC,KAAK+sC,QAAf,YAGK/sC,KAAK4tC,QAAQ,UAAW,QAA/B,IAEFG,cA3IO,WA4IL,IAAMF,EADK,GAaX,OANI7tC,KAAKwF,OAAT,OACEqoC,EAAA,KAAU7tC,KAAKwF,OAAf,QACSxF,KAAJ,YACL6tC,EAAA,KAAU7tC,KAAK+sC,QAAf,WAGK/sC,KAAK4tC,QAAQ,SAAU,QAA9B,IAEFp6B,QA1JO,SA0JA,GACLxT,KAAA,kBAEFguC,YA7JO,SA6JI,GACThuC,KAAA,gBACAA,KAAA,sBAEFwtC,UAjKO,SAiKE,GACPxtC,KAAA,gBACAA,KAAA,qBAIJoG,OApRiD,SAoR3C,GACJ,OAAOC,EAAE,MAAOrG,KAAK4oC,aAAa5oC,KAAlB,gBAAwC,CACtDyD,YADsD,UAEtDC,MAAO1D,KAAK0E,UACV1E,KAHJ,iBCtTJ,ICQe,G,UAAA,OAAAsC,EAAA,qBAAyB,CACtCL,KADsC,YAGtComC,YAHsC,EAKtCnmC,MAAO,CACLoB,MAAO,CACLd,KAAM,CAACuI,OADF,QAELpI,QAAS,IAEXgiB,IAAK,CAAC5Z,OAAQ1I,SAGhB+D,OAbsC,SAahC,KACJ,IAAQlE,EAAR,EAAQA,MACFyiB,EAAMpZ,SAASrJ,EAAD,IAApB,IACMoB,EAAQiI,SAASrJ,EAAD,MAAtB,IACMsM,EAAUmW,EAAM,GAAH,OAAMrhB,EAAN,iBAAyBjB,OAAOH,EAAnD,OACM+rC,EAAYtpB,GAAQrhB,EAA1B,EAEA,OAAO+C,EAAE,MAAO,CACd5C,YADc,YAEdC,MAAO,gBACL,cADK,GAEF,eAAuByoB,KAJ9B,OC5BJ,I,wBCMc,cACZ,OAAO,cAAW,CAChBlqB,KADgB,gBAGhBoK,QAHgB,WAId,gBAAmBrM,KAAnB,IAA4C,CAC1CiC,KAD0C,YAE1CqB,MAAOtD,KAAKkuC,aAIhBC,UAVgB,WAWd,cAAiBnuC,KAAjB,MAGFqF,QAAS,CACP6oC,UADO,SACE,OACP,KAEA,IAAK,IAAIxtC,EAAJ,EAAWL,EAASsrB,EAAA,UAAzB,OAAmDjrB,EAAnD,EAA+DA,IAAK,CAClE,IAAM2S,EAAYrT,KAAa2rB,EAAA,UAA/B,IAEA,oBAAWtY,EAKX,OAAArE,EAAA,MAAY2c,EAAA,aAAZ,0FAJEtY,S,gBCzBZ,SAASE,EAAT,KACE,IAAMF,EAAWJ,EAAjB,MACM0Y,EAAU1Y,EAAA,SAAmB,CAAElB,SAAS,GAE9Cd,OAAA,+BACAD,EAAA,UAAe,CACbqC,WACAsY,WAGG1Y,EAAD,WAAuBA,EAAA,UAA3B,OACEI,IAIJ,SAASO,EAAT,GACE,GAAK5C,EAAL,WAEA,MAA8BA,EAA9B,UAAM,EAAN,EAAM,SAAY2a,EAAlB,EAAkBA,QAClB1a,OAAA,yCACOD,EAAP,WAGK,IAAMo9B,EAAS,CACpB76B,WACAK,UAGF,I,oCCPM,EAAa,OAAAtR,EAAA,MAAO,EAExB,EAAc,CACZ+rC,UAAW,CAAC,WAAD,kBAHf,QAoBMC,EAAa,CAAC,QAAS,OAAQ,OAAQ,OAAQ,iBAAkB,OAAvE,SAGe,yBAAoC,CACjDrsC,KADiD,eAGjDgE,WAAY,CACVsoC,SACAC,SAAA,MAGFnD,cARiD,EAUjDnpC,MAAO,CACLusC,gBADK,OAELC,UAFK,QAGLC,UAHK,QAILC,UAAW,CACTpsC,KADS,OAETG,QAAS,UAEXksC,QAAS,CAAC5rC,QAAS8H,OARd,QASL+jC,aATK,SAULC,OAVK,QAWLnW,KAXK,QAYLoW,UAZK,QAaLrD,MAbK,OAcLxoC,SAdK,QAeL8rC,YAfK,OAgBLC,OAhBK,OAiBLC,iBAjBK,OAkBLC,sBAlBK,QAmBL5mC,QAnBK,QAoBL6mC,QApBK,QAqBLC,OArBK,QAsBLC,WAtBK,QAuBLC,KAvBK,QAwBLC,aAxBK,QAyBLC,OAzBK,OA0BLltC,KAAM,CACJA,KADI,OAEJG,QAAS,SAIb5C,KAAM,iBAAO,CACX4vC,UADW,EAEXC,WAFW,EAGXC,YAHW,EAIXC,aAJW,EAKXC,aALW,KAMX1hC,UANW,EAOX2hC,YAAY,IAGdzsC,SAAU,CACRmB,QADQ,WAEN,wCACK,gCADE,OAAP,IAEE,gBAFK,EAGL,2BAA4B1E,KAHvB,UAIL,uBAAwBA,KAJnB,OAKL,4BAA6BA,KALxB,SAML,qBAAsBA,KANjB,OAOL,8BAA+BA,KAP1B,aAQL,0BAA2BA,KARtB,KASL,uBAAwBA,KATnB,OAUL,0BAA2BA,KAVtB,SAWL,yBAA0BA,KAXrB,WAYL,wBAAyBA,KAZpB,QAaL,yBAA0BA,KAbrB,SAcL,4BAA6BA,KAdxB,YAeL,wBAAyBA,KAfpB,QAgBL,uBAAwBA,KAAKsvC,UAGjC1qC,cArBQ,WAsBN,IAAMA,EAAgB,sCAAtB,MAEA,OAAK5E,KAAD,cAAuBA,KAA3B,UAEOA,KAAK8D,OAAZ,UAFkDc,GAIpDqrC,qBA5BQ,WA6BN,0BAAWjwC,KAAP,aACKA,KAAK8uC,aAAa9uC,KAAzB,eAEK,gBAAKA,KAAKuqC,eAAN,IAAJ,YAAP,QAEF2F,WAlCQ,WAmCN,OAAwB,IAAjBlwC,KAAK6uC,SAAZ,MAAiC7uC,KAAK6uC,SAExC5C,WArCQ,WAsCN,OAAO,0CAAiDjsC,KAAxD,YAEFuqC,cAAe,CACbvb,IADa,WAEX,OAAOhvB,KAAP,WAEFsqB,IAJa,SAIV,GACDtqB,KAAA,YACAA,KAAA,cAAoBA,KAApB,aAGJqsC,QAjDQ,WAiDD,MACL,OAAO,SAAArsC,KAAA,0CAAyCA,KAAhD,UAEFmwC,WApDQ,WAqDN,OACEnwC,KAAK+uC,QACL/uC,KADA,QAEAA,KAHF,UAMFssC,cA3DQ,WA4DN,OAAOtsC,KAAKqsC,SAAWiC,EAAA,SAAoBtuC,KAA3C,OAEFowC,SA9DQ,WA+DN,OACEpwC,KAAKqwC,QACLrwC,KADA,YAEAA,KAFA,WAICA,KAAA,SAAgBA,KALnB,UAQFqwC,OAvEQ,WAwEN,OAAOrwC,KAAKwvC,MAAQxvC,KAApB,cAEFswC,cA1EQ,WA2EN,IAAI75B,EAAUzW,KAAKkvC,SAAWlvC,KAAjB,WAAoCA,KAApC,YAAb,EAIA,OAFIA,KAAKuwC,YAAcvwC,KAAvB,eAA0CyW,GAAUzW,KAAV,cAElCA,KAAKkE,SAASssC,MAAQxwC,KAAvB,QAAuC,CAC5CwoC,KAD4C,EAE5CviB,MAAO,QACL,CACFuiB,KADE,OAEFviB,MAAOxP,IAGXg6B,UAvFQ,WAwFN,OAAOzwC,KAAKosC,YAAcpsC,KAAKowC,UAAYpwC,KAA3C,aAEFuwC,WA1FQ,WA2FN,OAAOvwC,KAAKypC,WAAazpC,KAAlB,eAAwCA,KAA/C,wBAIJoM,MAAO,CAELjJ,SAFK,gBAGLwoC,MAHK,WAIH3rC,KAAA,UAAeA,KAAf,gBAEFkvC,OANK,WAOHlvC,KAAA,UAAeA,KAAf,iBAEFypC,UATK,cAULnmC,MAVK,SAUA,GACHtD,KAAA,cAIJkF,QAlKiD,WAoK3ClF,KAAKmF,OAAOC,eAAhB,QACE,eAAS,MAAO,SAAhB,MAIEpF,KAAKmF,OAAOC,eAAhB,yBACE,eAAS,uBAAwB,eAAjC,MAIEpF,KAAKsvC,UAAYtvC,KAAK+uC,QAAU/uC,KAAf,UAAgCA,KAArD,SACE,OAAAgP,EAAA,MAAY,uDAAZ,OAIJ3C,QAnLiD,WAmL1C,WAELrM,KAAA,QAAY,kBAAM,EAAlB,aAAmCA,KAAnC,eAEAA,KAAA,WAAkBA,KAAlB,eAEAuQ,uBAAsB,kBAAO,YAA7B,MAGFlL,QAAS,CAEP+W,MAFO,WAGLpc,KAAA,WAGF0wC,KANO,SAMH,GAAW,WAGbz/B,OAAA,uBAA6B,WAC3B,eAAoB,cAApB,WAGJ0/B,kBAbO,WAaU,WACf3wC,KAAA,aAAoBA,KAAKkO,MAAMiO,MAA/B,QACAnc,KAAA,WAAe,kBAAM,gBAArB,SAEF+tC,cAjBO,WAkBL,IAAMF,EAAN,GAQA,OANI7tC,KAAKwF,OAAT,gBACEqoC,EAAA,KAAU7tC,KAAKwF,OAAf,iBACSxF,KAAJ,iBACL6tC,EAAA,KAAU7tC,KAAK+sC,QAAf,gBAGK/sC,KAAK4tC,QAAQ,SAAU,QAA9B,IAEFgD,oBA5BO,WA6BL,IAAM/C,EAAN,GAQA,OANI7tC,KAAKwF,OAAT,iBACEqoC,EAAA,KAAU7tC,KAAKwF,OAAf,kBACSxF,KAAJ,kBACL6tC,EAAA,KAAU7tC,KAAK+sC,QAAf,iBAGK/sC,KAAK4tC,QAAQ,UAAW,QAA/B,IAEFiD,YAvCO,WAwCL,IAAMhD,EAAN,GAQA,OANI7tC,KAAKwF,OAAT,OACEqoC,EAAA,KAAU7tC,KAAKwF,OAAf,QACSxF,KAAJ,YACL6tC,EAAA,KAAU7tC,KAAK+sC,QAAf,WAGK/sC,KAAK4tC,QAAQ,SAAU,QAA9B,IAEFN,aAlDO,WAmDL,IAAMnxB,EAAQ,oCAAd,MAEM1W,EAAUzF,KAAhB,sBAOA,OALA,IACEmc,EAAA,SAAiBA,EAAA,UAAjB,GACAA,EAAA,qBAGF,GAEF20B,aA9DO,WA+DL,OAAK9wC,KAAL,UAIKA,KAAL,QAMOA,KAAK4tC,QAAQ,SAAU,QAAS,CACrC5tC,KAAK+sC,QAAQ,QAAS/sC,KADxB,qBALSA,KAAK4tC,QAAQ,SAAU,QAAS,CACrC5tC,KAAK4D,eADP,SANQ,MAeZmtC,WA7EO,WA6EG,UACR,IAAK/wC,KAAL,WAAsB,OAAO,KAE7B,IAAM2kB,GAAuB,IAAjB3kB,KAAK6uC,QAAmB7uC,KAAK6sC,OAA7B,UAAgD7sC,KAA5D,QAEMkC,EAAQ,CACZqN,KAAMvP,KADM,KAEZ8T,MAAO9T,KAFK,MAGZ2kB,MACArhB,MAAOtD,KAAKiwC,sBAGd,0BAAO,EAAAjwC,KAAA,cAAP,gBAAO,SAA4B,CAAEkC,WAArC,EAAiDlC,KAAK4D,eAAe,EAAU,CAAE1B,WAEnF0qC,WA3FO,WA4FL,OAAO,kCAAP,OAEFE,eA9FO,WA+FL,MAAO,CACL9sC,KADK,cAELA,KAFK,mBAGLA,KAHK,eAILA,KAJK,cAKLA,KALF,gBAQFgxC,YAvGO,WAwGL,OAAKhxC,KAAL,SAEOA,KAAK4D,eAAe,WAAY,CACrCK,MAAO,CACL,eAAe,IAEhB,CAACjE,KAJJ,cAF2B,MAQ7BytC,SAhHO,WAiHL,IAAKztC,KAAL,UAAqB,OAAO,KAE5B,IAAMD,EAAO,CACXmC,MAAO,CACLoN,UADK,EAELxL,MAAO9D,KAFF,gBAGLuP,KAAMvP,KAHD,KAIL4L,SAAU5L,KAJL,WAKLsoC,SAAUtoC,KAAD,WAAmBA,KAAKypC,aAAezpC,KAL3C,iBAMLuoC,IAAKvoC,KANA,WAOLwoC,KAAMxoC,KAAKswC,cAPN,KAQLx8B,MAAO9T,KARF,MASLimB,MAAOjmB,KAAKswC,cATP,MAULhtC,MAAOtD,KAAKuwC,aAIhB,OAAOvwC,KAAK4D,eAAe,EAApB,EAAkC5D,KAAKwF,OAAOmmC,OAAS3rC,KAA9D,QAEFixC,UApIO,WAqIL,IAAM78B,EAASpU,KAAD,aAAqBA,KAAKuwC,aAAcvwC,KAAxC,QAAd,EAAsEA,KAAxD,WACRkxC,EAAOlxC,KAAK4D,eAAe,OAAQ,CACvCkX,SAAU,CAAEq2B,UAAW,WACvB1tC,YAAa,gBAGf,OAAOzD,KAAK4D,eAAe,SAAU,CACnCoC,MAAO,CACLoO,MAAQpU,KAAD,cAAwCyG,EAAvB,eAAjB,KAER,CAJH,KAMF2qC,SAjJO,WAkJL,IAAMjlC,EAAY9C,OAAA,UAAkBrJ,KAApC,mBACOmM,EAFD,OAGN,MAAiCnM,KAAjC,OAAkBqxC,GAAlB,EAAM,MAAN,qBAEA,OAAOrxC,KAAK4D,eAAe,QAAS,CAClCoC,MADkC,GAElC8U,SAAU,CACRxX,MAAsB,WAAdtD,KAAKwC,MAAqB6G,OAAA,GAAUrJ,KAAV,WAA3B,QAAmEA,KAAK2pC,WAEjF1lC,MAAO,oCAAF,IAEHyqC,UAAW1uC,KAFN,UAGL4L,SAAU5L,KAHL,WAIL0rC,GAAI1rC,KAJC,WAKLivC,YAAajvC,KAAKovC,uBAAyBpvC,KAA9B,YAAiDA,KAAjD,SAAiEA,KAAjE,iBALR,EAMLgpC,SAAUhpC,KANL,WAOLwC,KAAMxC,KAAKwC,OAEb6B,GAAIgF,OAAA,SAAyB,CAC3BqnC,KAAM1wC,KADqB,OAE3Bmc,MAAOnc,KAFoB,QAG3Boc,MAAOpc,KAHoB,QAI3BuV,QAASvV,KAAKsxC,YAEhB97B,IApBkC,QAqBlCvP,WAAY,CAAC,CACXhE,KADW,SAEXsvC,UAAW,CAAEC,OAAO,GACpBluC,MAAOtD,KAAKyxC,cAIlB/D,YAlLO,WAmLL,IAAK1tC,KAAL,YAAuB,OAAO,KAE9B,IAAM0xC,EAAe,mCAArB,MACMC,EAAc3xC,KAApB,aAEA,OAAOA,KAAK4D,eAAe,MAAO,CAChCH,YAAa,yBACZ,CAAC,EAFJ,KAOFmuC,iBA/LO,WAgML,OAAO5xC,KAAK4D,eAAe,MAAO,CAChCH,YAAa,sBACZ,CACDzD,KADC,WAEDA,KAAKkvC,OAASlvC,KAAK6xC,SAAnB,UAFC,KAGD7xC,KAHC,WAIDA,KAAK0vC,OAAS1vC,KAAK6xC,SAAnB,UANF,QASFA,SAzMO,SAyMC,GACN,OAAO7xC,KAAK4D,eAAe,MAAO,CAChCF,MAAO,iBAAF,OAD2B,GAEhC8R,IAAKhT,GACJxC,KAHH,KAKF8xC,OA/MO,SA+MD,GAAW,WACf9xC,KAAA,aACA6M,GAAK7M,KAAK8qC,WAAU,kBAAM,eAA1Bj+B,OAEF2G,QAnNO,WAoNDxT,KAAKypC,WAAazpC,KAAlB,aAAsCA,KAAKkO,MAA/C,OAEAlO,KAAA,qBAEF+xC,QAxNO,SAwNA,GACL,GAAK/xC,KAAKkO,MAAV,OAEA,IAAMtD,EAAO,eAAa5K,KAA1B,KACA,KAEA,OAAI4K,EAAA,gBAAuB5K,KAAKkO,MAAhC,MACSlO,KAAKkO,MAAMiO,MAAlB,aAGGnc,KAAL,YACEA,KAAA,aACA6M,GAAK7M,KAAK6a,MAAM,QAAhBhO,OAGJmlC,QAvOO,SAuOA,GACL,IAAM7nC,EAAS0C,EAAf,OACA7M,KAAA,cAAqBmK,EAArB,MACAnK,KAAA,SAAgBmK,EAAA,UAAmBA,EAAA,SAAnC,UAEFmnC,UA5OO,SA4OE,GAELzkC,EAAA,UAAc,OAAd,OACA7M,KAAK2pC,YAAc3pC,KAFrB,eAIEA,KAAA,aAAoBA,KAApB,UACAA,KAAA,eAAqBA,KAArB,eAGFA,KAAA,oBAEFguC,YAvPO,SAuPI,GAELnhC,EAAA,SAAa7M,KAAKkO,MAAtB,QACErB,EAAA,iBACAA,EAAA,mBAGF,4CAEF2gC,UAhQO,SAgQE,GACHxtC,KAAJ,cAAuBA,KAAKoc,QAE5B,0CAEF61B,cArQO,WAsQAjyC,KAAL,WAEAA,KAAA,WAAkBA,KAAKkO,MAAMy9B,MACzB1hC,KAAA,IAAwC,IAA/BjK,KAAKkO,MAAMy9B,MAAMuG,YAA1B,EAAmDlyC,KAAKsQ,IAAL,YADrC,IAAlB,IAIF6hC,eA5QO,WA6QAnyC,KAAKkO,MAAV,SAEAlO,KAAA,YAAmBA,KAAKkO,MAAMghC,OAA9B,cAEFkD,gBAjRO,WAkRApyC,KAAD,UAAmBA,KAAKkO,MAA5B,mBAEAlO,KAAA,aAAoBA,KAAKkO,MAAM,iBAA/B,cAEFmkC,aAtRO,WAuRL,IACGryC,KAAD,gCACOqP,WACNrP,KAAKkO,MAHR,MAGqB,OAAO,EAE5B,IAAMtD,EAAO,eAAa5K,KAA1B,KACA,SAAK4K,GAAQA,EAAA,gBAAuB5K,KAAKkO,MAAzC,SAEAlO,KAAA,qBAEA,IAEFsyC,YAnSO,SAmSI,GAETtyC,KAAA,WAEA,EACEA,KAAA,aAAoBA,KAApB,UACSA,KAAK+vC,eAAiB/vC,KAA1B,WACLA,KAAA,eAAqBA,KAArB,YAGJyxC,SA7SO,WA8SLzxC,KAAA,gBACAA,KAAA,iBACAA,KAAA,uB,oCC9hBN,IAAIioB,EAAI,EAAQ,QACZiU,EAA2B,EAAQ,QAAmD3H,EACtFhuB,EAAW,EAAQ,QACnBgb,EAAW,EAAQ,QACnBgxB,EAAa,EAAQ,QACrBC,EAAyB,EAAQ,QACjCC,EAAuB,EAAQ,QAC/BC,EAAU,EAAQ,QAGlBC,EAAY,GAAGC,SACf5oC,EAAMC,KAAKD,IAEX6oC,EAA0BJ,EAAqB,YAE/CK,GAAoBJ,IAAYG,KAA6B,WAC/D,IAAI7W,EAAaE,EAAyB75B,OAAO/B,UAAW,YAC5D,OAAO07B,IAAeA,EAAW9J,SAF8B,GAOjEjK,EAAE,CAAE9d,OAAQ,SAAU4oC,OAAO,EAAM9W,QAAS6W,IAAqBD,GAA2B,CAC1FD,SAAU,SAAkBI,GAC1B,IAAIviB,EAAOlP,EAASixB,EAAuBxyC,OAC3CuyC,EAAWS,GACX,IAAIC,EAAcxoC,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,EACpD6D,EAAMmmB,EAAKpwB,OACXmK,OAAsB/D,IAAhBwsC,EAA4B3oC,EAAMN,EAAIzD,EAAS0sC,GAAc3oC,GACnE4oC,EAAS3xB,EAASyxB,GACtB,OAAOL,EACHA,EAAUh6B,KAAK8X,EAAMyiB,EAAQ1oC,GAC7BimB,EAAKhO,MAAMjY,EAAM0oC,EAAO7yC,OAAQmK,KAAS0oC,M,uBChCjD,IAAIj0B,EAAS,EAAQ,QACjBC,EAAQ,EAAQ,QAChBi0B,EAA8B,EAAQ,QACtChY,EAA4B,EAAQ,QAAuCA,0BAE3EhK,EAAclS,EAAOkS,YACrBnJ,EAAY/I,EAAO+I,UAEvBnnB,EAAOC,SAAWq6B,IAA8Bjc,GAAM,WACpD8I,EAAU,QACL9I,GAAM,WACX,IAAI8I,GAAW,QACVmrB,GAA4B,SAAUC,GAC3C,IAAIprB,EACJ,IAAIA,EAAU,MACd,IAAIA,EAAU,KACd,IAAIA,EAAUorB,MACb,IAASl0B,GAAM,WAEhB,OAAkE,IAA3D,IAAI8I,EAAU,IAAImJ,EAAY,GAAI,OAAG1qB,GAAWpG,W,gDCpBzD,IAAIT,EAAa,EAAQ,QACrByzC,EAAa,EAAQ,QACrBpjB,EAAS,EAAQ,QAAUA,OAE/B,SAASqjB,EAAoB1sB,GAC3B5mB,KAAKuzC,aAAU9sC,EACfzG,KAAK4mB,OAASA,EAEV5mB,KAAK4mB,QAAQ5mB,KAAKwzC,WAAWxzC,KAAK4mB,QASxC0sB,EAAmBhzC,UAAUkzC,WAAa,SAAqB5sB,GAE7D5mB,KAAK4mB,OAASA,EACd5mB,KAAKuzC,QAAUF,EAAW1sB,qBAAqB3mB,KAAK4mB,SAStD0sB,EAAmBhzC,UAAUmzC,OAAS,SAAiB1zC,GACrD,IAAKC,KAAKuzC,QACR,MAAM,IAAIlrC,MAAM,2BAKlB,IAAIqrC,EAAM9zC,EAAW4mB,MAAMxmB,KAAK4mB,QAC5B+sB,EAAa1jB,EAAOlO,OAAO,CAAChiB,EAAM2zC,GAAM3zC,EAAKM,OAASL,KAAK4mB,QAI3DgtB,EAAYP,EAAWxzB,IAAI8zB,EAAY3zC,KAAKuzC,SAK5CnpC,EAAQpK,KAAK4mB,OAASgtB,EAAUvzC,OACpC,GAAI+J,EAAQ,EAAG,CACb,IAAIypC,EAAOj0C,EAAW4mB,MAAMxmB,KAAK4mB,QAGjC,OAFAgtB,EAAU1iB,KAAK2iB,EAAMzpC,GAEdypC,EAGT,OAAOD,GAGT/yC,EAAOC,QAAUwyC,G,oECzDjB,IAAIltC,EAAS,WAAa,IAAIsQ,EAAI1W,KAAS2W,EAAGD,EAAI9S,eAAmBgT,EAAGF,EAAIG,MAAMD,IAAID,EAAG,OAAOC,EAAG,cAAc,CAACnT,YAAY,KAAKQ,MAAM,CAAC,MAAQ,GAAG,cAAc,KAAK,CAAC2S,EAAG,WAAW,CAAC3S,MAAM,CAAC,KAAO,GAAG,eAAe,GAAG,iBAAiB,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,KAAO,GAAG,IAAM,GAAG,cAAc,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,MAAQ,OAAO,CAAC2S,EAAG,cAAc,CAACnT,YAAY,QAAQ,CAACmT,EAAG,YAAY,CAACE,YAAY,CAAC,aAAa,QAAQ7S,MAAM,CAAC,MAAQ,KAAK,cAAc,KAAK,CAAC2S,EAAG,QAAQ,CAACnT,YAAY,UAAUQ,MAAM,CAAC,aAAa,KAAK,YAAY,MAAM,IAAM,EAAQ,YAA0B,GAAG2S,EAAG,MAAM,CAACnT,YAAY,8BAA8B,CAACmT,EAAG,WAAW,CAACnT,YAAY,WAAW,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,mBAAmB,QAAQ,GAAGL,EAAG,MAAM,CAACnT,YAAY,8CAA8C,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIQ,aAAa,OAAON,EAAG,MAAM,CAAGF,EAAIo9B,eAGnpBl9B,EAAG,WAAW,CAAC3S,MAAM,CAAC,wBAAwB,KAAK,CAAGyS,EAAIq9B,eAAuJn9B,EAAG,QAAQ,CAAC3S,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQ,SAAS6T,GAAQ,OAAOxB,EAAIs9B,eAAe,CAACt9B,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,wBAAwB,OAAtRL,EAAG,QAAQ,CAAC3S,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQ,SAAS6T,GAAQ,OAAOxB,EAAIu9B,qBAAqB,CAACv9B,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,eAAqK,GAH2TL,EAAG,SAAS,CAACpB,IAAI,OAAO8B,MAAM,CAAChU,MAAOoT,EAAS,MAAErD,SAAS,SAAUkE,GAAMb,EAAIc,MAAMD,GAAKE,WAAW,UAAU,CAACb,EAAG,eAAe,CAAC3S,MAAM,CAAC,MAAQyS,EAAIO,GAAG,4BAA4B,MAAQP,EAAIiS,WAAW,SAAW,IAAIrR,MAAM,CAAChU,MAAOoT,EAAS,MAAErD,SAAS,SAAUkE,GAAMb,EAAIkS,MAAMrR,GAAKE,WAAW,WAAaf,EAAIwW,cAGv+BxW,EAAIW,KAHk/BT,EAAG,WAAW,CAAC3S,MAAM,CAAC,wBAAwB,KAAK,CAAC2S,EAAG,QAAQ,CAAClT,MAAM,CAC9vC,4BAA6BgT,EAAIc,MACjC5L,UAAW8K,EAAIc,OACfvT,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAIuB,SAAS,CAACvB,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,gBAAgBL,EAAG,IAAI,CAAC3S,MAAM,CAAC,KAAO,YAAYI,GAAG,CAAC,MAAQqS,EAAIw9B,cAAc,CAACx9B,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,gBAAgB,IAAa,IAA+W,IAAI,IAAI,IAAI,IAAI,GAAGL,EAAG,aAAa,CAAC3S,MAAM,CAAC,QAAU,KAAM0pC,YAAYj3B,EAAIy9B,GAAG,CAAC,CAACxrC,IAAI,SAASyrC,GAAG,SAAS5+B,GACtqB,IAAIvR,EAAQuR,EAAIvR,MAClC,MAAO,CAAC2S,EAAG,QAAQF,EAAI29B,GAAG,CAACpwC,MAAM,CAAC,MAAQ,OAAO,KAAO,IAAII,GAAG,CAAC,MAAQ,SAAS6T,GAAQxB,EAAI49B,cAAe,KAAS,QAAQrwC,GAAM,GAAO,CAACyS,EAAIK,GAAG,kBAAkBO,MAAM,CAAChU,MAAOoT,EAAgB,aAAErD,SAAS,SAAUkE,GAAMb,EAAI49B,aAAa/8B,GAAKE,WAAW,iBAAiB,CAACf,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAI69B,cAAc,QAAQ,IACxT/7B,EAAkB,G,oGCwHtB,GACEvW,KAAM,QACNlC,KAAM,WAAR,OACA,kBACA,uBACA,iBACA,kBACA,eACA,eACA,eACA,gBACA,gBACA,SACA,MACA,MACA,YACA,iBACA,+DACA,oEACA,SACA,YACA,4CACA,kBACA,wDACA,wBAEA,iBACA,iBAEEsF,QAAS,CACP6uC,YADJ,WAGM,OADAl0C,KAAK8oB,QAAQ/gB,KAAK,YACX,GAETisC,UALJ,WAKA,WACA,GACQ,cAAR,sBAEM,EAAN,KACA,KACQ,IAAR,2BACQ,OAAR,IAEA,kBACQ,QAAR,iCACQ,QAAR,YACA,mBACU,EAAV,uCACU,EAAV,oBAIA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,iBAEIC,gBA1BJ,WA0BA,WAGM,GAFAjlC,QAAQoM,IAAI,0CAAlB,mCAEuC,GAA7Bpb,KAAKw0C,qBACP78B,EAAR,sBACQ3X,KAAKkX,YAAclX,KAAKwpB,cACxB7R,EAAR,mBACA,mEAEQ3I,QAAQoM,IAAI,2BACZ,IAAR,GACUC,WAAY1D,EAAtB,gBACU88B,cAAe98B,EAAzB,mBACU2D,OAAQ,KAEVC,EAAR,KACA,KACU,IAAV,gBACU,OAAV,IAEA,kBACU,QAAV,iCACU,QAAV,YACA,iBAMA,mBAAU,OAAV,kBACA,oBAAU,OAAV,kBAGIm5B,gBAAiB,WAArB,WACA,OACUC,EAASb,iBACXn8B,EAAR,qBACQ4D,EAAR,KACA,KACU,IAAV,WACU,OAAV,CACY,SAAZ,QACY,SAAZ,gBACY,cAAZ,qBACY,cAAZ,YAGA,kBACU,QAAV,YACU,EAAV,mCACA,kBACY,QAAZ,kBACY,EAAZ,oIACA,kBACc,EAAd,uBAEA,oBAEY,EAAZ,qHACA,kBACc,EAAd,uBAEA,oBAEY,EAAZ,oHACA,kBACc,EAAd,uBAEA,kBAEY,EAAZ,qJACY,EAAZ,kBACA,kBACc,EAAd,uBAEA,kBACY,QAAZ,iBACY,EAAZ,kCACY,EAAZ,0CACY,EAAZ,8CACY,EAAZ,0CACY,EAAZ,sDACY,EAAZ,oBACY,EAAZ,2BACY,EAAZ,gCACA,kCACY,EAAZ,sCACY,EAAZ,kDACY,EAAZ,8CACY,EAAZ,kBACY,EAAZ,+BACY,EAAZ,mCAIY,QAAZ,aACY,EAAZ,kBACY,EAAZ,4DAGA,mBACU,QAAV,OACA,kBACY,EAAZ,2BAKIq5B,oBAAqB,WACnB,IAAN,OACMppC,YAAW,WACTmpC,EAASD,oBACjB,MAEIv5B,mBAAoB,WAClBnb,KAAKktB,eAAgB,EACrBltB,KAAKkX,YAAclX,KAAKiX,GAAG,mBAE7BmB,oBAAqB,WAAzB,WACMpJ,QAAQoM,IAAI,yBACZG,EAAN,KACA,MACQ,IAAR,iBACQ,KAAR,CACU,SAAV,WACU,SAAV,gBACU,WAAV,kBACU,cAAV,wBAGA,kBACQ,QAAR,YACQ,EAAR,iBACA,oBACU,EAAV,wCACU,EAAV,mBACU,EAAV,kBACU,EAAV,qIACU,EAAV,wBAEU,EAAV,yCACU,EAAV,gBACU,QAAV,iBAGA,mBAAQ,OAAR,mBAEItD,OAAQ,WAAZ,WAEMjJ,QAAQoM,IAAI,UACZpb,KAAKkX,YAAclX,KAAKiX,GAAG,8BAC3BjX,KAAK+oB,QAAU,OAEf,IAAN,kBACA,mBAEA,gBACA,2DAEM/Z,QAAQoM,IAAI,aAAe4N,GAE3B,IAAN,GACQC,SAAU4rB,EACVjsB,MAAO5oB,KAAK4oB,MACZI,UAAWA,EACXE,MAAO,OACP4rB,YAAa,IACbxrB,WAAY3R,EAApB,gBACQ4R,WAAY5R,EAApB,iBAGM4D,EAAN,KACA,KACQ,IAAR,WACQ,OAAR,IAEA,kBACQ,QAAR,YAEA,kBACU,EAAV,wCACU,EAAV,mBACU,EAAV,uBACU,EAAV,kBACU,EAAV,qIACU,EAAV,cACU,EAAV,wBAEU,EAAV,sFACU,EAAV,gBACU,QAAV,iBAGA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,kBAOEnP,MAAO,GAMPlH,QAAS,WAAX,WACIlF,KAAKwpB,cAAgBxpB,KAAKiX,GAAG,uCAC7BjX,KAAK8zC,eAAiBn8B,EAA1B,mBACI3I,QAAQoM,IAAI,mBAAhB,OACA,sBADA,oCACA,uBAEIpb,KAAK4oB,MAAQjR,EAAjB,WACQ3X,KAAK8zC,gBACP9zC,KAAKkX,YAAclX,KAAKiX,GAAG,0BAC3BjX,KAAK00C,mBAEL10C,KAAKkX,YAAclX,KAAKwpB,cAG1BxpB,KAAK8X,cAAgB,CAAC,SAA1B,6CACI9X,KAAKqtB,mBAAqB,CAC9B,YAAM,QAAN,iCACA,YAAM,OAAN,2CAEIrtB,KAAK2oB,WAAa,CACtB,YAAM,QAAN,8BACA,YAAM,MACN,wDACA,gCC3ZgV,I,iLCO5UrM,EAAY,eACd,EACAlW,EACAoS,GACA,EACA,KACA,KACA,MAIa,aAAA8D,EAAiB,QAgBhC,IAAkBA,EAAW,CAACE,UAAA,KAAQzY,OAAA,KAAK0Y,QAAA,KAAMC,UAAA,OAAUC,aAAA,KAAWC,QAAA,KAAMC,QAAA,KAAMC,OAAA,KAAKC,UAAA,KAAQg4B,YAAA,KAAU93B,aAAA,KAAWC,WAAA,Q;;ACjCpHpc,EAAQk0C,KAAO,SAAU5+B,EAAQK,EAAQw+B,EAAMC,EAAMxyB,GACnD,IAAI7V,EAAGG,EACHmoC,EAAiB,EAATzyB,EAAcwyB,EAAO,EAC7BrX,GAAQ,GAAKsX,GAAQ,EACrBrX,EAAQD,GAAQ,EAChBI,GAAS,EACTv9B,EAAIu0C,EAAQvyB,EAAS,EAAK,EAC1B1b,EAAIiuC,GAAQ,EAAI,EAChBluC,EAAIqP,EAAOK,EAAS/V,GAOxB,IALAA,GAAKsG,EAEL6F,EAAI9F,GAAM,IAAOk3B,GAAU,EAC3Bl3B,KAAQk3B,EACRA,GAASkX,EACFlX,EAAQ,EAAGpxB,EAAS,IAAJA,EAAWuJ,EAAOK,EAAS/V,GAAIA,GAAKsG,EAAGi3B,GAAS,GAKvE,IAHAjxB,EAAIH,GAAM,IAAOoxB,GAAU,EAC3BpxB,KAAQoxB,EACRA,GAASiX,EACFjX,EAAQ,EAAGjxB,EAAS,IAAJA,EAAWoJ,EAAOK,EAAS/V,GAAIA,GAAKsG,EAAGi3B,GAAS,GAEvE,GAAU,IAANpxB,EACFA,EAAI,EAAIixB,MACH,IAAIjxB,IAAMgxB,EACf,OAAO7wB,EAAI2pB,IAAsBpF,KAAdxqB,GAAK,EAAI,GAE5BiG,GAAQ/C,KAAKszB,IAAI,EAAG2X,GACpBroC,GAAQixB,EAEV,OAAQ/2B,GAAK,EAAI,GAAKiG,EAAI/C,KAAKszB,IAAI,EAAG1wB,EAAIqoC,IAG5Cp0C,EAAQN,MAAQ,SAAU4V,EAAQ9S,EAAOmT,EAAQw+B,EAAMC,EAAMxyB,GAC3D,IAAI7V,EAAGG,EAAG8M,EACNq7B,EAAiB,EAATzyB,EAAcwyB,EAAO,EAC7BrX,GAAQ,GAAKsX,GAAQ,EACrBrX,EAAQD,GAAQ,EAChBE,EAAe,KAATmX,EAAcjrC,KAAKszB,IAAI,GAAI,IAAMtzB,KAAKszB,IAAI,GAAI,IAAM,EAC1D78B,EAAIu0C,EAAO,EAAKvyB,EAAS,EACzB1b,EAAIiuC,EAAO,GAAK,EAChBluC,EAAIzD,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQ2G,KAAKqzB,IAAIh6B,GAEbyjB,MAAMzjB,IAAUA,IAAUiuB,KAC5BvkB,EAAI+Z,MAAMzjB,GAAS,EAAI,EACvBuJ,EAAIgxB,IAEJhxB,EAAI5C,KAAKuhB,MAAMvhB,KAAKmR,IAAI9X,GAAS2G,KAAKuzB,KAClCl6B,GAASwW,EAAI7P,KAAKszB,IAAI,GAAI1wB,IAAM,IAClCA,IACAiN,GAAK,GAGLxW,GADEuJ,EAAIixB,GAAS,EACNC,EAAKjkB,EAELikB,EAAK9zB,KAAKszB,IAAI,EAAG,EAAIO,GAE5Bx6B,EAAQwW,GAAK,IACfjN,IACAiN,GAAK,GAGHjN,EAAIixB,GAASD,GACf7wB,EAAI,EACJH,EAAIgxB,GACKhxB,EAAIixB,GAAS,GACtB9wB,GAAM1J,EAAQwW,EAAK,GAAK7P,KAAKszB,IAAI,EAAG2X,GACpCroC,GAAQixB,IAER9wB,EAAI1J,EAAQ2G,KAAKszB,IAAI,EAAGO,EAAQ,GAAK7zB,KAAKszB,IAAI,EAAG2X,GACjDroC,EAAI,IAIDqoC,GAAQ,EAAG9+B,EAAOK,EAAS/V,GAAS,IAAJsM,EAAUtM,GAAKsG,EAAGgG,GAAK,IAAKkoC,GAAQ,GAI3E,IAFAroC,EAAKA,GAAKqoC,EAAQloC,EAClBmoC,GAAQD,EACDC,EAAO,EAAG/+B,EAAOK,EAAS/V,GAAS,IAAJmM,EAAUnM,GAAKsG,EAAG6F,GAAK,IAAKsoC,GAAQ,GAE1E/+B,EAAOK,EAAS/V,EAAIsG,IAAU,IAAJD,I,uBCnF5B,IAAI+gC,EAAgB,EAAQ,QAAWA,cACnCsN,EAAsB,EAS1Bt0C,EAAQu0C,aAAe,SAAuBh8B,GAC5C,IAAI8R,EAAO2c,EAAczuB,GAEzB,MAAO,CAEL,CAAC,EAAG,GAEJ,CAAC8R,EAAOiqB,EAAqB,GAE7B,CAAC,EAAGjqB,EAAOiqB,M,qBCnBf,IAAIjtB,EAAQ,EAAQ,QAEhBmtB,EAAM,KACNC,EAAW,MACXC,EAAUrtB,EAAM6f,YAAYsN,GAYhCx0C,EAAQ20C,eAAiB,SAAyBn8B,EAAsB2lB,GACtE,IAAIl/B,EAASuZ,EAAqBonB,KAAO,EAAKzB,EAC1Cj4B,EAAIjH,GAAQ,GAEhB,MAAOooB,EAAM6f,YAAYhhC,GAAKwuC,GAAW,EACvCxuC,GAAMsuC,GAAQntB,EAAM6f,YAAYhhC,GAAKwuC,EAMvC,OAASz1C,GAAQ,GAAMiH,GAAKuuC,I,oCC1B9B,IAAIz/B,EAAsB,EAAQ,QAC9B4/B,EAAc,EAAQ,QAEtB3/B,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,cAAc,SAAoB7L,EAAQC,GAC/D,OAAOsrC,EAAY/8B,KAAK5C,EAAY/V,MAAOmK,EAAQC,EAAOK,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,wCCMlG,E,kLASA,SAASkvC,EAAT,GACE,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,OAAOxgC,MAAK,SAAAjS,GAAG,OAAI0yC,EAAA,SAA9D,MAGF,SAASC,EAAT,GACE,MAAQ,0CAA0C/zC,KAAKkB,IAAS,UAAUlB,KAAlE,IAAgFkB,EAAA,OAAxF,GAdF,YACE,mBACA,kBACA,oBACA,mBACA,kBACA,oBANF,CAAK8yC,MAAL,KAiBA,IAAM,EAAQ,OAAAxzC,EAAA,MAAO,EAAD,mBAIlB,QAJY,OAML,CACPL,KADO,SAGPC,MAAO,CACLW,MADK,QAEL+I,SAFK,QAGL48B,KAHK,QAILviB,MAJK,QAKLkF,KAAM,CAACpgB,OALF,QAMLguB,IAAK,CACHv2B,KADG,OAEHyX,UAFG,EAGHtX,QAAS,MAIbY,SAAU,CACRwyC,OADQ,WAEN,UAEFC,iBAJQ,WAKN,OAAO/yC,QACLjD,KAAKmtC,WAAW7oC,OAAStE,KAAKmtC,WADhC,aAMJ9nC,QAAS,CACP4wC,QADO,WAEL,IAAIC,EAAJ,GAGA,OAFIl2C,KAAKwF,OAAT,UAAyB0wC,EAAWl2C,KAAKwF,OAAO7C,QAAQ,GAAGU,KAAlC,QAElB,eAAkBrD,KAAzB,IAEFm2C,QAPO,WAQL,IAAMC,EAAQ,CACZC,OAAQr2C,KADI,OAEZgE,MAAOhE,KAFK,MAGZ+1C,OAAQ/1C,KAHI,OAIZs2C,MAAOt2C,KAJK,MAKZu2C,OAAQv2C,KAAKu2C,QAGTC,EAAe,wBAAiB,SAAA7tC,GAAG,OAAIytC,EAA7C,MAEA,OACGI,GAAgBV,EAAjB,IAA4C,eAAc91C,KAD5D,OAKFy2C,eAvBO,WAwBL,MAAO,CACLhzC,YADK,qBAELC,MAAO,CACL,mBAAoB1D,KADf,SAEL,eAAgBA,KAFX,KAGL,eAAgBA,KAHX,iBAIL,gBAAiBA,KAJZ,MAKL,gBAAiBA,KAAK6C,OAExBoB,MAAO,gBACL,eAAgBjE,KADX,iBAEL4L,SAAU5L,KAAKg2C,kBAAoBh2C,KAF9B,SAGLwC,KAAMxC,KAAKg2C,iBAAmB,cAHzB,GAIFh2C,KAAK6sC,QAEVxoC,GAAIrE,KAAKmtC,aAGbuJ,kBA1CO,WA2CL,IAAMC,EAAW32C,KAAjB,UACM42C,EAAc,iCACf52C,KADe,kBAAH,IAEfgG,MAAO2wC,EAAW,CAChBA,WACArqB,OAFgB,EAGhBlY,MAAOuiC,QACLlwC,IAIN,OAFAzG,KAAA,eAEA,GAEF62C,YAxDO,SAwDI,GACT92C,EAAA,uCAAkBA,EAAL,OAAoBC,KAAK4P,cACtC5P,KAAA,aAAkBA,KAAlB,UAEF82C,eA5DO,SA4DO,KACZ,IAAMC,EAAN,GACMh3C,EAAOC,KAAb,iBAEI41C,EAJwC,iBAOtCoB,EAAiBh0C,EAAA,QAAvB,KACMi0C,EAAiBD,IAAvB,EAEA,EAEED,EAAA,SAEAnB,EAAW5yC,EAAA,QAAX,GACI2yC,EAAJ,KAA8BC,EAAA,KAGhC71C,EAAA,YACAA,EAAA,YAEA,IAAM42C,EAAW32C,KAAjB,UAKA,OAJA,IAAcD,EAAA,MAAa,CAAE42C,aAE7B32C,KAAA,eAEOqG,EAAErG,KAAKg2C,iBAAmB,SAAWh2C,KAApC,MAAR,IAEFk3C,cAxFO,SAwFM,KACX,IAAMC,EAAqB,CACzBzzC,MADyB,cAEzBO,MAAO,CACLmzC,MADK,6BAELprB,QAFK,YAGLjmB,KAHK,MAIL,eAAe,IAIbolB,EAAOnrB,KAAb,UASA,OARA,IACEm3C,EAAA,MAAgB,CACdR,SADc,EAEdrqB,OAFc,EAGdlY,MAAO+W,IAIJ9kB,EAAErG,KAAKg2C,iBAAmB,SAAzB,OAA4Ch2C,KAA5C,oBAAsE,CAC5EqG,EAAE,MAAO8wC,EAAS,CAChB9wC,EAAE,OAAQ,CACRpC,MAAO,CACL+C,EAAGhE,UAMbq0C,uBAtHO,SAsHe,KAIpB,IAAMt3C,EAAkB,CACtB2D,MAAO,CACL,qBAAqB,IAInBynB,EAAOnrB,KAAb,UACA,IACED,EAAA,MAAa,CACX42C,SADW,EAEXrqB,OAFW,EAGXlY,MAAO+W,IAIXnrB,KAAA,eAEA,IAAMsc,EAAYtZ,EAAlB,UAIA,OAHAjD,EAAA,MAAaiD,EAAb,MACAjD,EAAA,SAAgBA,EAAhB,GAEOsG,EAAErG,KAAKg2C,iBAAmB,SAAzB,OAA4Ch2C,KAA5C,oBAAsE,CAC5EqG,EAAEiW,EADJ,OAMJlW,OAhLO,SAgLD,GACJ,IAAMpD,EAAOhD,KAAb,UAEA,wBAAWgD,EACL6yC,EAAJ,GACS71C,KAAKk3C,cAAcl0C,EAA1B,GAEKhD,KAAK82C,eAAe9zC,EAA3B,GAGKhD,KAAKq3C,uBAAuBr0C,EAAnC,MAIW,gBAAW,CACxBf,KADwB,SAGxBq1C,aAHwB,EAKxBjP,YALwB,EAOxBjiC,OAPwB,SAOlB,EAPkB,GAOK,IAAlB,EAAkB,EAAlB,KAAQb,EAAU,EAAVA,SACb2wC,EADuB,GAe3B,OAXIn2C,EAAJ,WACEm2C,EAAWn2C,EAAA,sBACTA,EAAA,SADS,WADM,SAOVA,EAAA,SAAP,mBACOA,EAAA,SAAP,WAGKsG,EAAE,EAAD,EAAc6vC,EAAW,CAAH,GAA9B,MCxPJ,U,uBCHA,IAAIr2C,EAAO,EAAQ,QAWf03C,EAAkB,CACpB,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC7C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC5D,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC5D,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAG1C,SAASC,EAAkBz3C,GACzBC,KAAKC,KAAOJ,EAAK2B,aACjBxB,KAAKD,KAAOA,EAGdy3C,EAAiBp3C,cAAgB,SAAwBC,GACvD,OAAO,GAAK4J,KAAKuhB,MAAMnrB,EAAS,GAAUA,EAAS,EAAd,GAGvCm3C,EAAiBl3C,UAAUC,UAAY,WACrC,OAAOP,KAAKD,KAAKM,QAGnBm3C,EAAiBl3C,UAAUF,cAAgB,WACzC,OAAOo3C,EAAiBp3C,cAAcJ,KAAKD,KAAKM,SAGlDm3C,EAAiBl3C,UAAUE,MAAQ,SAAgBC,GACjD,IAAIC,EAIJ,IAAKA,EAAI,EAAGA,EAAI,GAAKV,KAAKD,KAAKM,OAAQK,GAAK,EAAG,CAE7C,IAAI4C,EAAgD,GAAxCi0C,EAAgB3+B,QAAQ5Y,KAAKD,KAAKW,IAG9C4C,GAASi0C,EAAgB3+B,QAAQ5Y,KAAKD,KAAKW,EAAI,IAG/CD,EAAUG,IAAI0C,EAAO,IAKnBtD,KAAKD,KAAKM,OAAS,GACrBI,EAAUG,IAAI22C,EAAgB3+B,QAAQ5Y,KAAKD,KAAKW,IAAK,IAIzDG,EAAOC,QAAU02C,G,qBC1DjB,IAAIC,EAAe,EAAQ,QACvB5tC,EAAW,EAAQ,QACnBE,EAAoB,EAAQ,QAC5B2tC,EAAc,EAAQ,QACtBC,EAAoB,EAAQ,QAC5BC,EAAwB,EAAQ,QAChC7iC,EAAO,EAAQ,QACfymB,EAAyB,EAAQ,QAAuCA,uBAE5E36B,EAAOC,QAAU,SAAc+2C,GAC7B,IAMIn3C,EAAGL,EAAQ2N,EAAQ8pC,EAAMxwB,EAAUme,EANnCtvB,EAAIshC,EAAaz3C,MACjBqK,EAAIR,EAASguC,GACbE,EAAkBttC,UAAUpK,OAC5BqqB,EAAQqtB,EAAkB,EAAIttC,UAAU,QAAKhE,EAC7CuxC,OAAoBvxC,IAAVikB,EACVutB,EAAiBN,EAAkBttC,GAEvC,GAAI4tC,IAAmBL,EAAsBK,GAAiB,CAC5D3wB,EAAWowB,EAAYrtC,EAAG4tC,GAC1BxS,EAAOne,EAASme,KAChBp7B,EAAI,GACJ,QAASytC,EAAOrS,EAAK9sB,KAAK2O,IAAW4wB,KACnC7tC,EAAEtC,KAAK+vC,EAAKx0C,OAQhB,IALI00C,GAAWD,EAAkB,IAC/BrtB,EAAQ3V,EAAK2V,EAAOjgB,UAAU,GAAI,IAEpCpK,EAAS0J,EAAkBM,GAC3B2D,EAAS,IAAKwtB,EAAuBrlB,GAA5B,CAAgC9V,GACpCK,EAAI,EAAGL,EAASK,EAAGA,IACtBsN,EAAOtN,GAAKs3C,EAAUttB,EAAMrgB,EAAE3J,GAAIA,GAAK2J,EAAE3J,GAE3C,OAAOsN,I,kCCjCT,0BAIe,sBAAf,W,kCCHA,IAAI8H,EAAsB,EAAQ,QAC9BqiC,EAAS,EAAQ,QAAgCt+B,MAEjD9D,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,SAAS,SAAekQ,GAC7C,OAAOiyB,EAAOpiC,EAAY/V,MAAOkmB,EAAYzb,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,mBCTrF5F,EAAOC,QAAiC,qBAAhBqwB,aAAmD,qBAAb+G,U,mBCkB9D,IAAImJ,EAAYA,GAAa,GAW7BA,EAAU+W,kBAAoB,SAAS7V,GAMnC,IAAI8V,EAAcr4C,KAGlBuiC,EAAO+V,OAAS,SAASv4C,GAOrB,IAJA,IAAIw4C,EAAStnC,OAAOunC,KAAKz4C,GACrB04C,EAAc,IAAItnB,YAAYonB,EAAOl4C,QACrCq4C,EAAa,IAAI38B,WAAW08B,GAEvB/3C,EAAE,EAAGA,EAAE63C,EAAOl4C,OAAQK,IAC3Bg4C,EAAWh4C,GAAK63C,EAAOz6B,WAAWpd,GAGlC23C,EAAYM,QACZN,EAAYM,OAAOF,IAK3BlW,EAAO4C,MAAQ,WACPkT,EAAYlT,OACZkT,EAAYlT,SASpBnlC,KAAK24C,OAAS,KAMd34C,KAAKmlC,MAAQ,MAsBb9D,EAAYA,GAAa,GAU7BA,EAAUuX,kBAAoB,SAASrW,GAMnC,IAAIsW,EAAc74C,KAelB,SAAS84C,EAAYrnB,GAKjB,IAHA,IAAI8mB,EAAS,GAGJ73C,EAAE,EAAGA,EAAE+wB,EAAMlU,WAAY7c,IAC9B63C,GAAUl2C,OAAOghB,aAAaoO,EAAM/wB,IAGxC6hC,EAAOwW,SAAS9nC,OAAO+nC,KAAKT,IArBhChW,EAAO0W,MAAQ,SAASC,GAChBL,EAAYI,OACZJ,EAAYI,MAAMC,IAmC1Bl5C,KAAKm5C,WAAa9X,EAAUuX,kBAAkBQ,oBAO9Cp5C,KAAKq5C,SAAW,SAASt5C,GAErB,IAAI0xB,EAAQ,IAAI1V,WAAWhc,GAG3B,GAAI0xB,EAAMpxB,QAAUw4C,EAAYM,WAC5BL,EAAYrnB,QAIZ,IAAK,IAAIhb,EAAO,EAAGA,EAAOgb,EAAMpxB,OAAQoW,GAAUoiC,EAAYM,WAC1DL,EAAYrnB,EAAMa,SAAS7b,EAAQA,EAASoiC,EAAYM,cASpEn5C,KAAK6iC,QAAU,WACXN,EAAOM,WAQX7iC,KAAKi5C,MAAQ,MAWjB5X,EAAUuX,kBAAkBQ,oBAAsB,KAqB9C/X,EAAYA,GAAa,GAW7BA,EAAUiY,oBAAsB,CAY5B,UAAc,KASd,gBAAoB,WAGhB,IAAIC,EAAetoC,OAAOsoC,cAAgBtoC,OAAOuoC,mBAGjD,GAAID,EACA,IAOI,OAJKlY,EAAUiY,oBAAoBG,YAC/BpY,EAAUiY,oBAAoBG,UAAY,IAAIF,GAG3ClY,EAAUiY,oBAAoBG,UAGzC,MAAO5sC,IAMX,OAAO,OAyBXw0B,EAAYA,GAAa,GAU7BA,EAAU6B,YAAc,WAQpBljC,KAAK05C,KAAO,cAkBhBrY,EAAU6B,YAAYyW,gBAAkB,SAAyB5U,GAE7D,OAAO1D,EAAUuY,eAAeD,gBAAgB5U,IAiBpD1D,EAAU6B,YAAYF,kBAAoB,WAEtC,OAAO3B,EAAUuY,eAAe5W,qBAoBpC3B,EAAU6B,YAAYP,YAAc,SAAqBJ,EAAQwC,GAG7D,OAAI1D,EAAUuY,eAAeD,gBAAgB5U,GAClC,IAAI1D,EAAUuY,eAAerX,EAAQwC,GAGzC,MAmBX1D,EAAUuY,eAAiB,SAAwBrX,EAAQwC,GAQvD,IAAI8U,EAASxY,EAAUyY,eAAe/2B,MAAMgiB,GASxCgV,EAAU1Y,EAAUiY,oBAAoBU,kBAWxCC,EAAiBF,EAAQG,YASzBlV,EAAS,IAAI3D,EAAU+W,kBAAkB7V,GAYzC4X,EAAiB,IAUjBC,EAAa,GAUbC,EAAyC,IAA1BR,EAAOS,eAAwBrpC,OAAO+W,UAAY/W,OAAOspC,WAUxEC,EAA4C,IAA1BX,EAAOS,eAAwB,IAAM,MAYvDG,EAAc,GAcdC,EAAmB,SAA0BC,GAG7C,GAAIA,EAAQt6C,QAAU,EAClB,OAAOs6C,EAAQ,GAGnB,IAAIC,EAAc,EAClBD,EAAQhgB,SAAQ,SAA0BkgB,GACtCD,GAAeC,EAAOx6C,UAI1B,IAAIoW,EAAS,EACTqkC,EAAS,IAAIT,EAAYO,GAM7B,OALAD,EAAQhgB,SAAQ,SAAsBkgB,GAClCC,EAAOxwB,IAAIuwB,EAAQpkC,GACnBA,GAAUokC,EAAOx6C,UAGdy6C,GAsBPC,EAAmB,SAA0Bh7C,GAmB7C,IAjBA,IAAIi7C,EAAWjwC,OAAOkwC,UAClBC,EAAqBn7C,EAAKM,OAI1B86C,EAAUlxC,KAAKuhB,MAAMzrB,EAAKM,OAASw5C,EAAOuB,UAC1CC,EAAkBpxC,KAAKuhB,MAAMquB,EAAOyB,KAAOnB,GAG3C/vC,EAAQH,KAAK0a,IACbk1B,EAAOuB,SAAWC,EAClBxB,EAAOuB,UAAYD,EAAUE,IAMxB5kC,EAASrM,EAAOqM,EAAS1W,EAAKM,OAAQoW,GAAUojC,EAAOuB,SAAU,CAKtE,IADA,IAAIG,EAAa,EACRC,EAAU,EAAGA,EAAU3B,EAAOuB,SAAUI,IAC7CD,GAActxC,KAAKqzB,IAAIv9B,EAAK0W,EAAS+kC,IAKrCD,GAAcP,IACdE,EAAqBzkC,EAASojC,EAAOuB,SACrCJ,EAAWO,GAMnB,OAAIL,IAAuBn7C,EAAKM,OACrB,CAACN,GAIL,CACH,IAAIs6C,EAAYt6C,EAAKqW,OAAOqM,MAAM,EAAGy4B,EAAqBrB,EAAOS,iBACjE,IAAID,EAAYt6C,EAAKqW,OAAOqM,MAAMy4B,EAAqBrB,EAAOS,mBAkBlEmB,EAAkB,SAAyB17C,GAC3C06C,EAAY1yC,KAAK,IAAIsyC,EAAYt6C,KAcjC27C,EAAmB,WAGnB,IAAI37C,EAAO26C,EAAiBD,GAC5B,OAAK16C,GAIL06C,EAAcM,EAAiBh7C,GAC/BA,EAAO06C,EAAYrxC,QAEZrJ,GANI,MAyBX47C,EAAgB,SAAuB57C,GAGvC,IAAIo7C,EAAUp7C,EAAKM,OAASw5C,EAAOuB,SAG/BQ,EAAa7B,EAAQG,YACrBD,EAAiB2B,IACjB3B,EAAiB2B,GAMrB,IAHA,IAAIC,EAAc9B,EAAQvpB,aAAaqpB,EAAOuB,SAAUD,EAAStB,EAAOyB,MAG/DE,EAAU,EAAGA,EAAU3B,EAAOuB,SAAUI,IAM7C,IAJA,IAAIM,EAAYD,EAAYE,eAAeP,GAGvC/kC,EAAS+kC,EACJ96C,EAAI,EAAGA,EAAIy6C,EAASz6C,IACzBo7C,EAAUp7C,GAAKX,EAAK0W,GAAU+jC,EAC9B/jC,GAAUojC,EAAOuB,SAKzB,OAAOS,GAKX7W,EAAO2T,OAAS,SAA2B54C,GAGvC07C,EAAgB,IAAIpB,EAAYt6C,IAIhC,IAAI86C,EAASa,IACb,GAAKb,EAAL,CAIA,IAAIe,EAAa7B,EAAQG,YACrBD,EAAiB2B,IACjB3B,EAAiB2B,GAGrB,IAAI/D,EAASkC,EAAQiC,qBACrBnE,EAAOxU,QAAQ0W,EAAQkC,aAGlBpE,EAAOztC,QACRytC,EAAOztC,MAAQytC,EAAOqE,QAG1BrE,EAAOzhC,OAASulC,EAAcd,GAC9BhD,EAAOztC,MAAM6vC,GAGbA,GAAkBY,EAAOx6C,OAASw5C,EAAOuB,SAAWvB,EAAOyB,OAK/Dt7C,KAAK05C,KAAO,WAGR,IAAIyC,EAAMpC,EAAQG,YAIlBD,EAAiBhwC,KAAKD,IAAIiwC,EAAgBkC,EAAM/B,KAMxD/Y,EAAUuY,eAAet5C,UAAY,IAAI+gC,EAAU6B,YAanD7B,EAAUuY,eAAeD,gBAAkB,SAAyB5U,GAGhE,QAAK1D,EAAUiY,oBAAoBU,mBAGiB,OAA7C3Y,EAAUyY,eAAe/2B,MAAMgiB,IAiB1C1D,EAAUuY,eAAe5W,kBAAoB,WAGzC,OAAK3B,EAAUiY,oBAAoBU,kBAI5B,CACH,WACA,aALO,IA6BX3Y,EAAYA,GAAa,GAU7BA,EAAUqB,cAAgB,WAUtB1iC,KAAK4iC,QAAU,KAWf5iC,KAAKmjC,QAAU,MAgBnB9B,EAAUqB,cAAciX,gBAAkB,SAAyB5U,GAE/D,OAAO1D,EAAU+a,iBAAiBzC,gBAAgB5U,IAiBtD1D,EAAUqB,cAAcM,kBAAoB,WAExC,OAAO3B,EAAU+a,iBAAiBpZ,qBAoBtC3B,EAAUqB,cAAcC,YAAc,SAAqBJ,EAAQwC,GAG/D,OAAI1D,EAAU+a,iBAAiBzC,gBAAgB5U,GACpC,IAAI1D,EAAU+a,iBAAiB7Z,EAAQwC,GAG3C,MAmBX1D,EAAU+a,iBAAmB,SAA0B7Z,EAAQwC,GAQ3D,IAAItC,EAAWziC,KAYXq8C,EAAc,KAWdC,EAAsB,EAQtBzC,EAASxY,EAAUyY,eAAe/2B,MAAMgiB,GASxCgV,EAAU1Y,EAAUiY,oBAAoBU,kBAIvCuC,UAAUC,eACXD,UAAUC,aAAe,IAMxBD,UAAUC,aAAaC,eACxBF,UAAUC,aAAaC,cAAgBF,UAAUE,cACtCF,UAAUG,oBACVH,UAAUI,iBACVJ,UAAUK,gBAAgB7nC,KAAKwnC,YAS9C,IAAIM,EAAS,IAAIxb,EAAUuX,kBAAkBrW,GAUzC8X,EAAyC,IAA1BR,EAAOS,eAAwBrpC,OAAO+W,UAAY/W,OAAOspC,WAUxEC,EAA4C,IAA1BX,EAAOS,eAAwB,IAAM,MASvDwC,EAAc,EASdC,EAAiB,EAQjBC,EAAc,KAQdnF,EAAS,KASToF,EAAY,KAeZC,EAAO,SAAc3zC,GAGrB,GAAU,IAANA,EACA,OAAO,EAGX,IAAI4zC,EAAMlzC,KAAKmzC,GAAK7zC,EACpB,OAAOU,KAAKozC,IAAIF,GAAOA,GAoBvBG,EAAU,SAAiB/zC,EAAGP,GAG9B,OAAKA,EAAIO,GAAKA,EAAIP,EACPk0C,EAAK3zC,GAAK2zC,EAAK3zC,EAAIP,GAGvB,GAuBPu0C,EAAoB,SAAoBzB,EAAW13C,GAanD,IAVA,IAAIqJ,GAASquC,EAAUz7C,OAAS,GAAK+D,EAIjCgG,EAAQH,KAAKuhB,MAAM/d,GAAS6uC,EAAsB,EAClD9xC,EAAMP,KAAKuhB,MAAM/d,GAAS6uC,EAI1BkB,EAAM,EACD98C,EAAI0J,EAAO1J,GAAK8J,EAAK9J,IAC1B88C,IAAQ1B,EAAUp7C,IAAM,GAAK48C,EAAQ7vC,EAAQ/M,EAAG47C,GAGpD,OAAOkB,GAmBPC,EAAgB,SAAuB5B,GAGvC,IAAI6B,EAAY7B,EAAYx7C,OAC5By8C,GAAeY,EAKf,IAAIC,EAAyB1zC,KAAKixB,MAAM4hB,EAAcjD,EAAOyB,KAAOO,EAAY+B,YAC5EC,EAAaF,EAAyBZ,EAG1CA,GAAkBc,EAMlB,IAHA,IAAI99C,EAAO,IAAIs6C,EAAYwD,EAAahE,EAAOuB,UAGtCI,EAAU,EAAGA,EAAU3B,EAAOuB,SAAUI,IAM7C,IAJA,IAAIM,EAAYD,EAAYE,eAAeP,GAGvC/kC,EAAS+kC,EACJ96C,EAAI,EAAGA,EAAIm9C,EAAYn9C,IAC5BX,EAAK0W,GAAU8mC,EAAkBzB,EAAWp7C,GAAKm9C,EAAa,IAAMrD,EACpE/jC,GAAUojC,EAAOuB,SAKzB,OAAOr7C,GAaP+9C,EAAiB,SAAwBvb,GAGzC0a,EAAYlD,EAAQgE,sBAAsB1B,EAAaxC,EAAOuB,SAAUvB,EAAOuB,UAC/E6B,EAAU5Z,QAAQ0W,EAAQkC,aAG1BgB,EAAUe,eAAiB,SAAsBnxC,GAC7CgwC,EAAOxD,SAASoE,EAAc5wC,EAAEoxC,aAAa7nC,SAIjDyhC,EAASkC,EAAQmE,wBAAwB3b,GACzCsV,EAAOxU,QAAQ4Z,GAIO,cAAlBlD,EAAQvY,OACRuY,EAAQoE,SAGZnB,EAAcza,GAWd6b,EAAe,WAGfvB,EAAOha,UAGHJ,EAASU,SACTV,EAASU,WAabkb,EAAoB,WAGpB,IAAIC,EAAU/B,UAAUC,aAAaC,aAAa,CAC9C,OAAU,GACXqB,EAAgBM,GAIfE,GAAWA,EAAQ5jC,MACnB4jC,EAAQ5jC,KAAKojC,EAAgBM,IAWjCG,EAAmB,WAWnB,GARI1G,GACAA,EAAOhW,aAGPob,GACAA,EAAUpb,aAGVmb,EAEA,IADA,IAAIwB,EAASxB,EAAYyB,YAChB/9C,EAAI,EAAGA,EAAI89C,EAAOn+C,OAAQK,IAC/B89C,EAAO99C,GAAGg+C,OAIlBzB,EAAY,KACZpF,EAAS,KACTmF,EAAc,KAGdH,EAAOha,WAKXga,EAAO5D,MAAQ,SAAiCC,GAGxCA,EAAOr7B,OAASwjB,EAAUsd,OAAOC,KAAKC,SAAY7B,GAOlDuB,IACA1B,EAAO5D,MAAQ,KAGXC,EAAOr7B,OAASwjB,EAAUsd,OAAOC,KAAKE,gBAClCrc,EAASG,SACTH,EAASG,UAKTH,EAASU,SACTV,EAASU,WAlBjBkb,MA2BZhd,EAAU+a,iBAAiB97C,UAAY,IAAI+gC,EAAUqB,cAarDrB,EAAU+a,iBAAiBzC,gBAAkB,SAAyB5U,GAGlE,QAAK1D,EAAUiY,oBAAoBU,mBAGiB,OAA7C3Y,EAAUyY,eAAe/2B,MAAMgiB,IAiB1C1D,EAAU+a,iBAAiBpZ,kBAAoB,WAG3C,OAAK3B,EAAUiY,oBAAoBU,kBAI5B,CACH,WACA,aALO,IA6BX3Y,EAAYA,GAAa,GAa7BA,EAAUiE,WAAa,SAAS/C,EAAQwC,GAMpC,IASIga,EATA1G,EAAcr4C,KAMdK,EAAS,EAIsB0+C,EAA1B9tC,OAAO+tC,YAAkC,IAAIA,YAC7C/tC,OAAOguC,kBAAkC,IAAIA,kBAC7ChuC,OAAOiuC,eAAkC,IAAIA,eAEnC,IAAI,WAEf,IAAIC,EAAQ,GAGZn/C,KAAKo/C,OAAS,SAASr/C,GACnBo/C,EAAMp3C,KAAK,IAAIs3C,KAAK,CAACt/C,GAAO,CAAC,KAAQglC,MAIzC/kC,KAAKs/C,QAAU,WACX,OAAO,IAAID,KAAKF,EAAO,CAAC,KAAQpa,MAM5CxC,EAAO+V,OAAS,SAASv4C,GAOrB,IAJA,IAAIw4C,EAAStnC,OAAOunC,KAAKz4C,GACrB04C,EAAc,IAAItnB,YAAYonB,EAAOl4C,QACrCq4C,EAAa,IAAI38B,WAAW08B,GAEvB/3C,EAAE,EAAGA,EAAE63C,EAAOl4C,OAAQK,IAC3Bg4C,EAAWh4C,GAAK63C,EAAOz6B,WAAWpd,GAEtCq+C,EAAaK,OAAO3G,GACpBp4C,GAAUo4C,EAAYl7B,WAGlB86B,EAAYkH,YACZlH,EAAYkH,WAAW9G,EAAYl7B,YAGvCglB,EAAOid,QAAQ,KAAM,IAKzBjd,EAAO4C,MAAQ,WACPkT,EAAYlT,OACZkT,EAAYlT,SAOpBnlC,KAAKO,UAAY,WACb,OAAOF,GAOXL,KAAKs/C,QAAU,WACX,OAAOP,EAAaO,WASxBt/C,KAAKu/C,WAAa,KAMlBv/C,KAAKmlC,MAAQ,MAsBb9D,EAAYA,GAAa,GAU7BA,EAAUoe,WAAa,SAAoBld,GAQvC,IAAImd,EAAa1/C,KASb2/C,EAAoB,IAAIte,EAAUuX,kBAAkBrW,GAGxDod,EAAkB1G,MAAQ,SAASC,GAC3BwG,EAAWzG,OACXyG,EAAWzG,MAAMC,IAsBzB,IAAIz2B,EAAQ,SAAem9B,EAAMx1C,EAAOI,GAGpC,IAAIq1C,GACID,EAAKn9B,OACLm9B,EAAKE,aACLF,EAAKG,UACXhrC,KAAK6qC,GAEHv/C,EAASmK,EAAMJ,EAInB,GAAI/J,IAAWmK,EAAK,CAIhB,IAAIw1C,EAAcH,EAAoBz1C,EAAO/J,GAC7C,GAAI2/C,EAAY70B,OAAS9qB,EACrB,OAAO2/C,EAKf,OAAOH,EAAoBz1C,EAAOI,IAUtCxK,KAAK+4C,SAAW,SAAkB6G,GAE9B,IAAInpC,EAAS,EACTuuB,EAAS,IAAIib,WAUbC,EAAgB,WAGhB,GAAIzpC,GAAUmpC,EAAKz0B,KAGXu0B,EAAWS,YACXT,EAAWS,WAAWP,OAJ9B,CAYA,IAAIQ,EAAQ39B,EAAMm9B,EAAMnpC,EAAQA,EAASkpC,EAAkBxG,YAC3D1iC,GAAUkpC,EAAkBxG,WAI5BnU,EAAOqb,kBAAkBD,KAK7Bpb,EAAOsb,OAAS,WAGZX,EAAkBtG,SAASrU,EAAOh3B,QAIlC2xC,EAAkB1G,MAAQ,SAAwBC,GAE1CwG,EAAWzG,OACXyG,EAAWzG,MAAMC,GAGjBA,EAAOqH,YAIPb,EAAWH,YACXG,EAAWH,WAAWK,EAAMnpC,EAASkpC,EAAkBxG,YAG3D+G,OAORlb,EAAO7B,QAAU,WAGTuc,EAAWvc,SACXuc,EAAWvc,QAAQyc,EAAMnpC,EAAQuuB,EAAO5B,QAKhD8c,KAQJlgD,KAAK6iC,QAAU,WACX8c,EAAkB9c,WAUtB7iC,KAAKi5C,MAAQ,KAiBbj5C,KAAKmjC,QAAU,KAafnjC,KAAKu/C,WAAa,KAWlBv/C,KAAKmgD,WAAa,MAuBlB9e,EAAYA,GAAa,GAW7BA,EAAUS,OAAS,SAASV,GAExB,IAAIof,EAAcxgD,KAEdygD,EAAsB,EACtBC,EAAsB,EACtBC,EAAsB,EACtBC,EAAsB,EACtBC,EAAsB,EACtBC,EAAsB,EAEtBC,EAAeN,EAEfO,EAAmB,EACnBC,EAAe,KAMfC,EAAU,CACVC,EAAG,OACHC,EAAG,QACHC,EAAG,UAOHC,EAAW,CACXH,EAAG,QACHC,EAAG,QACHC,EAAG,SASHrgB,EAAU,IAAIK,EAAUkgB,QAQxBC,EAAS,GASTC,EAAe,GASfC,EAAe,GAGfC,EAAU,GAGVC,EAAU,GASVC,EAAU,GAGVC,EAAiB,IAAIzgB,EAAU0gB,YAG/BC,EAAiB,GAErB,SAASC,EAASzgB,GACVA,GAASuf,IACTA,EAAevf,EACXgf,EAAYjf,eACZif,EAAYjf,cAAcwf,IAItC,SAASmB,IACL,OAAOnB,GAAgBH,GAChBG,GAAgBJ,EAe3B3gD,KAAKmiD,YAAc,SAAqB9uC,GAGpC,IAAImuB,EAAQ,CACR,aAAiBuf,EACjB,iBAAqBC,EACrB,OAAW,IAGXoB,EAAiB,GAGrB,IAAK,IAAIz5C,KAAO64C,EACZY,EAAez5C,GAAO64C,EAAO74C,GAIjCq4B,EAAQqhB,OAAM,WAGV,IAAK,IAAI15C,KAAOy5C,EAAgB,CAE5B,IAAI30C,EAAQlC,SAAS5C,GACjB25C,EAAQF,EAAez5C,GACvByjB,EAASk2B,EAAMC,WAGfC,EAAc,CACd,MAAWF,EAAMluC,MACjB,OAAWkuC,EAAMh2B,QAIjBg2B,EAAMluC,OAASkuC,EAAMh2B,SACrBk2B,EAAYthB,IAAM9U,EAAO7R,UAAU,cAGnC9M,EAAQ,IACR+0C,EAAYj5C,EAAI+4C,EAAM/4C,EACtBi5C,EAAYh5C,EAAI84C,EAAM94C,EACtBg5C,EAAYC,EAAIH,EAAMG,EACtBD,EAAY33B,MAAQy3B,EAAMz3B,MAC1B23B,EAAYE,OAASJ,EAAMI,OAC3BF,EAAYnyC,OAASsyC,EAAcL,EAAMjyC,SAI7CmxB,EAAMggB,OAAO74C,GAAO65C,EAKxBnvC,EAASmuB,OAoBjBxhC,KAAK4iD,YAAc,SAAqBphB,EAAOnuB,GAE3C,IAAI1K,EACA8E,EAMJ,IAAK9E,KAJLo4C,EAAevf,EAAMuf,aACrBC,EAAmBxf,EAAMwf,iBAGbQ,EACR/zC,EAAQlC,SAAS5C,GACb8E,EAAQ,GACRuzB,EAAQ6hB,QAAQrB,EAAO74C,IAM/B,IAAKA,KAHL64C,EAAS,GAGGhgB,EAAMggB,OAAQ,CAEtB/zC,EAAQlC,SAAS5C,GAEjB,IAAIm6C,EAActhB,EAAMggB,OAAO74C,GAC3B25C,EAAQS,EAASt1C,GAYrB,GATAuzB,EAAQuN,OAAO+T,EAAOQ,EAAY1uC,MAAO0uC,EAAYx2B,QAGjDw2B,EAAY5hB,MACZF,EAAQgiB,eAAeV,EAAOjhB,EAAU4hB,MAAMC,KAC9CliB,EAAQmiB,KAAKb,EAAO,EAAG,EAAGQ,EAAY5hB,MAItCzzB,EAAQ,GAAKq1C,EAAYzyC,QAAU,EAAG,CAGtC,IAAIA,EAAS0yC,EAASD,EAAYzyC,QAClC2wB,EAAQoiB,KAAKd,EAAOjyC,EAAQyyC,EAAYv5C,EAAGu5C,EAAYt5C,EAAGs5C,EAAYL,GAGtEzhB,EAAQqiB,MAAMf,EAAOQ,EAAYj4B,OAGjC,IAAI63B,EAASI,EAAYJ,OACzB1hB,EAAQsiB,QAAQhB,EACZI,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAC7BA,EAAO,GAAIA,EAAO,GAAIA,EAAO,KAOzC1hB,EAAQqhB,MAAMhvC,IAYlBrT,KAAKgiC,WAAa,WACd,OAAOhB,GASXhhC,KAAKulC,SAAW,SAASnxB,EAAOkY,GAGvB41B,KAGL9gB,EAAOmiB,YAAY,OAAQnvC,EAAOkY,IAYtCtsB,KAAKskC,aAAe,SAASkf,EAASnf,GAE7B6d,KAGL9gB,EAAOmiB,YAAY,MAAOlf,EAAQmf,IAUtCxjD,KAAK0jC,eAAiB,SAAS+f,GAG3B,GAAKvB,IAAL,CAIAlhB,EAAQ0iB,WACJz5C,KAAKuhB,MAAMi4B,EAAWl6C,GACtBU,KAAKuhB,MAAMi4B,EAAWj6C,IAI1B,IAAIm6C,EAAa,EACbF,EAAWjb,OAAQmb,GAAc,GACjCF,EAAWG,SAAQD,GAAc,GACjCF,EAAWx9B,QAAQ09B,GAAc,GACjCF,EAAW7yC,KAAQ+yC,GAAc,GACjCF,EAAW5yC,OAAQ8yC,GAAc,IAGrCviB,EAAOmiB,YAAY,QAASt5C,KAAKuhB,MAAMi4B,EAAWl6C,GAAIU,KAAKuhB,MAAMi4B,EAAWj6C,GAAIm6C,KAgBpF3jD,KAAK6jD,mBAAqB,WAGtB,IAAIp2C,EAAQq0C,EAAerc,OAGvBlD,EAASyf,EAAev0C,GAAS,IAAI4zB,EAAUyiB,aAAatD,EAAa/yC,GAC7E,OAAO80B,GAgBXviC,KAAKwiC,kBAAoB,SAASuC,GAG9B,IAAIxC,EAASie,EAAYqD,qBAEzB,OADAziB,EAAOmiB,YAAY,QAAShhB,EAAO90B,MAAOs3B,GACnCxC,GAaXviC,KAAK+jD,iBAAmB,SAAShf,EAAUif,GAGvC,IAAIzhB,EAASie,EAAYqD,qBAEzB,OADAziB,EAAOmiB,YAAY,OAAQhhB,EAAO90B,MAAOs3B,EAAUif,GAC5CzhB,GAYXviC,KAAKikD,iBAAmB,SAASlf,EAAU9iC,GAGvC,IAAIsgC,EAASie,EAAYqD,qBAEzB,OADAziB,EAAOmiB,YAAY,OAAQhhB,EAAO90B,MAAOs3B,EAAU9iC,GAC5CsgC,GAYXviC,KAAKkkD,sBAAwB,SAASnf,GAGlC,IAAIxC,EAASie,EAAYqD,qBAEzB,OADAziB,EAAOmiB,YAAY,YAAahhB,EAAO90B,MAAOs3B,GACvCxC,GAoBXviC,KAAKmkD,0BAA4B,SAAmCpf,EAAU9iC,GAG1E,IAAIsgC,EAASie,EAAYqD,qBAEzB,OADAziB,EAAOmiB,YAAY,OAAQhhB,EAAO90B,MAAOs3B,EAAU9iC,GAC5CsgC,GAwBXviC,KAAKokD,yBAA2B,SAAkC32C,EAAOs3B,EAAU9iC,GAG/E,IAAIsgC,EAASie,EAAYqD,qBAEzB,OADAziB,EAAOmiB,YAAY,MAAO91C,EAAO80B,EAAO90B,MAAOs3B,EAAU9iC,GAClDsgC,GAeXviC,KAAKqkD,yBAA2B,SAAkC52C,EAAOxL,GAGhEigD,KAGL9gB,EAAOmiB,YAAY,MAAO91C,EAAOxL,IAYrCjC,KAAKw/C,QAAU,SAAS/xC,EAAOmY,EAAS/H,GAG/BqkC,KAGL9gB,EAAOmiB,YAAY,MAAO91C,EAAOmY,EAAS/H,IAS9C7d,KAAK+4C,SAAW,SAAStrC,EAAO1N,GAGvBmiD,KAGL9gB,EAAOmiB,YAAY,OAAQ91C,EAAO1N,IAYtCC,KAAKskD,UAAY,SAAS72C,GAGjBy0C,MAIL9gB,EAAOmiB,YAAY,MAAO91C,GAGtBu0C,EAAev0C,KACfq0C,EAAeyC,KAAK92C,UACbu0C,EAAev0C,MAW9BzN,KAAKuhC,cAAgB,KAQrBvhC,KAAKkiC,OAAS,KAUdliC,KAAKmjC,QAAU,KAmBfnjC,KAAKwkD,QAAU,KAwBfxkD,KAAKykD,QAAU,KAiBfzkD,KAAK8kC,OAAS,KAUd9kC,KAAKolC,YAAc,KAYnBplC,KAAK0kD,OAAS,KAcd1kD,KAAK2kD,aAAe,KAYpB3kD,KAAK4kD,OAAS,KAYd5kD,KAAK6kD,WAAa,KAWlB7kD,KAAK4kC,OAAS,KAcd,IAAIme,EAAW,SAAkBt1C,GAG7B,IAAI60C,EAAQd,EAAO/zC,GAgBnB,OAfK60C,IAIGA,EADU,IAAV70C,EACQuzB,EAAQ8jB,kBACXr3C,EAAQ,EACLuzB,EAAQ+jB,cAER/jB,EAAQxQ,eAGpBgxB,EAAO/zC,GAAS60C,GAIbA,GAgBPK,EAAgB,SAAuBL,GAGvC,IAAKA,EACD,OAAO,KAIX,IAAK,IAAI35C,KAAO64C,EACZ,GAAIc,IAAUd,EAAO74C,GACjB,OAAO4C,SAAS5C,GAIxB,OAAO,MAIX,SAASq8C,EAAUv3C,GAEf,IAAIw3C,EAAStD,EAAQl0C,GASrB,OALc,MAAVw3C,IACAA,EAAStD,EAAQl0C,GAAS,IAAI4zB,EAAU6jB,OACxCD,EAAOE,cAAgB/jB,EAAO+jB,eAG3BF,EAQX,IAAIG,EAAwB,CAExB,cAAe,SAAS9C,EAAOh/C,GAC3B09B,EAAQqkB,cAAc/C,EAAOtoC,WAAW1W,MAU5CgiD,EAAsB,CAEtB,IAAO,SAASC,GAEZ,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCE,EAASF,EAAW,GACpB1nC,EAAOtS,SAASg6C,EAAW,IAG3BhjB,EAASyf,EAAewD,GACxBjjB,IAGIA,EAAO0W,OACP1W,EAAO0W,MAAM,IAAI5X,EAAUsd,OAAO9gC,EAAM4nC,IAIxC5nC,GAAQ,KAAUmkC,EAAewD,KAAkBjjB,IACnDuf,EAAeyC,KAAKiB,UACbxD,EAAewD,MAOlC,IAAO,SAASD,GAEZ,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IACxBG,EAASn6C,SAASg6C,EAAW,IAC7BI,EAAa3rC,WAAWurC,EAAW,IACnCK,EAAW5rC,WAAWurC,EAAW,IACjCM,EAAWt6C,SAASg6C,EAAW,IAEnCvkB,EAAQ8kB,IAAIxD,EAAO/4C,EAAGC,EAAGk8C,EAAQC,EAAYC,EAAsB,GAAZC,IAI3D,KAAQ,SAASN,GAEb,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCxgB,EAAWwgB,EAAW,GACtBtjD,EAAOsjD,EAAW,GAGtB,GAAI/E,EAAY1b,OAAQ,CACpB,IAAIvC,EAASqf,EAAQ4D,GAAgB,IAAInkB,EAAU0kB,YAAYvF,EAAagF,GAC5EhF,EAAY1b,OAAOvC,EAAQwC,EAAU9iC,QAKrCu+C,EAAYhB,QAAQgG,EAAc,wCAAyC,MAInF,MAAS,SAASD,GAEd,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCxgB,EAAWwgB,EAAW,GAGtBhjB,EAASqf,EAAQ4D,GACb,IAAInkB,EAAU0kB,YAAYvF,EAAagF,GAG3CQ,EAAc,KACdxF,EAAYgE,UACZwB,EAAcxF,EAAYgE,QAAQjiB,EAAQwC,IAGzCihB,IACDA,EAAc3kB,EAAU6B,YAAYP,YAAYJ,EAAQwC,IAGxDihB,GACAvE,EAAa+D,GAAgBQ,EAC7BxF,EAAYhB,QAAQgG,EAAc,KAAM,IAKxChF,EAAYhB,QAAQgG,EAAc,WAAY,MAItD,KAAQ,SAASD,GAGb,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCxlD,EAAOwlD,EAAW,GAClBhjB,EAASqf,EAAQ4D,GAGjBjjB,GAAUA,EAAO+V,QACjB/V,EAAO+V,OAAOv4C,IAItB,KAAS,SAAoBwlD,GAGzB,IAAIU,EAAc16C,SAASg6C,EAAW,IAClCW,EAASrE,EAAQoE,GAEjBE,EAAc56C,SAASg6C,EAAW,IAClCxgB,EAAWwgB,EAAW,GACtBtjD,EAAOsjD,EAAW,GAGtB,GAAIW,GAAUA,EAAOE,OAAQ,CACzB,IAAI7jB,EAASqf,EAAQuE,GAAe,IAAI9kB,EAAU0kB,YAAYvF,EAAa2F,GAC3ED,EAAOE,OAAO7jB,EAAQwC,EAAU9iC,QAKhCu+C,EAAYhB,QAAQ2G,EAAa,8BAA+B,MAIxE,MAAS,SAASZ,GAEd,IAAIc,EAAc96C,SAASg6C,EAAW,IAClCjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCv3B,EAAIziB,SAASg6C,EAAW,IACxBt3B,EAAI1iB,SAASg6C,EAAW,IACxBt8C,EAAIsC,SAASg6C,EAAW,IACxBv8C,EAAIuC,SAASg6C,EAAW,IAE5BvkB,EAAQgiB,eAAeV,EAAO+D,GAC9BrlB,EAAQslB,UAAUhE,EAAOt0B,EAAGC,EAAGhlB,EAAGD,IAItC,KAAQ,SAASu8C,GAEb,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KAEzCvkB,EAAQulB,KAAKjE,IAIjB,UAAa,SAASiD,GAElB,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCxgB,EAAWwgB,EAAW,GAG1B,GAAI/E,EAAYpb,YAAa,CACzB,IAAI7C,EAASqf,EAAQ4D,GAAgB,IAAInkB,EAAU0kB,YAAYvF,EAAagF,GAC5EhF,EAAYpb,YAAY7C,EAAQwC,QAKhCyb,EAAYhB,QAAQgG,EAAc,wBAAyB,MAInE,MAAS,SAASD,GAEd,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KAEzCvkB,EAAQr7B,MAAM28C,IAIlB,KAAQ,SAASiD,GAEb,IAAIiB,EAAOzD,EAASx3C,SAASg6C,EAAW,KACpCkB,EAAOl7C,SAASg6C,EAAW,IAC3BmB,EAAOn7C,SAASg6C,EAAW,IAC3BoB,EAAWp7C,SAASg6C,EAAW,IAC/BqB,EAAYr7C,SAASg6C,EAAW,IAChCc,EAAc96C,SAASg6C,EAAW,IAClCsB,EAAO9D,EAASx3C,SAASg6C,EAAW,KACpCuB,EAAOv7C,SAASg6C,EAAW,IAC3BwB,EAAOx7C,SAASg6C,EAAW,IAE/BvkB,EAAQgiB,eAAe6D,EAAMR,GAC7BrlB,EAAQ9P,KAAKs1B,EAAMC,EAAMC,EAAMC,EAAUC,EAC5BC,EAAMC,EAAMC,IAI7B,QAAW,SAASxB,GAEhB,IAAIc,EAAc96C,SAASg6C,EAAW,IAClCjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCyB,EAAM9F,EAAQ31C,SAASg6C,EAAW,KAClCn9C,EAAOk5C,EAAS/1C,SAASg6C,EAAW,KACpC0B,EAAY17C,SAASg6C,EAAW,IAChCv3B,EAAIziB,SAASg6C,EAAW,IACxBt3B,EAAI1iB,SAASg6C,EAAW,IACxBt8C,EAAIsC,SAASg6C,EAAW,IACxBv8C,EAAIuC,SAASg6C,EAAW,IAE5BvkB,EAAQgiB,eAAeV,EAAO+D,GAC9BrlB,EAAQkmB,YAAY5E,EAAO0E,EAAK5+C,EAAM6+C,EAAWj5B,EAAGC,EAAGhlB,EAAGD,IAI9D,OAAU,SAASu8C,GAEf,IAAI4B,EAAiB57C,SAASg6C,EAAW,IACrC6B,EAAiB77C,SAASg6C,EAAW,IACrCiB,EAAOzD,EAASx3C,SAASg6C,EAAW,KACpCkB,EAAOl7C,SAASg6C,EAAW,IAC3BmB,EAAOn7C,SAASg6C,EAAW,IAC3BoB,EAAWp7C,SAASg6C,EAAW,IAC/BqB,EAAYr7C,SAASg6C,EAAW,IAEpCvkB,EAAQqmB,UAAUF,EAAgBC,EAChBZ,EAAMC,EAAMC,EAAMC,EAAUC,IAIlD,MAAS,SAASrB,GAEd,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrC+B,EAAO/7C,SAASg6C,EAAW,IAC3BgC,EAAOh8C,SAASg6C,EAAW,IAC3BiC,EAAOj8C,SAASg6C,EAAW,IAC3BkC,EAAOl8C,SAASg6C,EAAW,IAC3Bh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IAE5BvkB,EAAQ0mB,QAAQpF,EAAOgF,EAAMC,EAAMC,EAAMC,EAAMl+C,EAAGC,IAItD,WAAe,SAA0B+7C,GAGrC/E,EAAY3e,cAIhB,QAAW,SAAS0jB,GAEhB,IAAIoC,EAAcp8C,SAASg6C,EAAW,IAGtC,GAAIoC,EAAc,EAAG,CAGjB,IAAIrF,EAAQS,EAAS4E,GACrB3mB,EAAQ6hB,QAAQP,UAGTd,EAAOmG,QAKTA,EAAc,UACZnG,EAAOmG,IAMtB,QAAW,SAASpC,GAEhB,IAAIoC,EAAcp8C,SAASg6C,EAAW,IAClCv8C,EAAIgR,WAAWurC,EAAW,IAC1Bt8C,EAAI+Q,WAAWurC,EAAW,IAC1BzrC,EAAIE,WAAWurC,EAAW,IAC1Bv+C,EAAIgT,WAAWurC,EAAW,IAC1B14C,EAAImN,WAAWurC,EAAW,IAC1BhxB,EAAIva,WAAWurC,EAAW,IAG9B,GAAIoC,GAAe,EAAG,CAClB,IAAIrF,EAAQS,EAAS4E,GACrB3mB,EAAQsiB,QAAQhB,EAAOt5C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,KAK9C,MAAS,SAASgxB,GAEd,IAAIE,EAASF,EAAW,GACpB1nC,EAAOtS,SAASg6C,EAAW,IAG3B/E,EAAYrd,SACZqd,EAAYrd,QAAQ,IAAI9B,EAAUsd,OAAO9gC,EAAM4nC,IAEnDjF,EAAY3e,cAIhB,IAAO,SAAS0jB,GAEZ,IAAIC,EAAej6C,SAASg6C,EAAW,IAGnChjB,EAASqf,EAAQ4D,GACjBjjB,IAGIA,EAAO4C,OACP5C,EAAO4C,eAGJyc,EAAQ4D,KAMvB,KAAQ,SAASD,GAEb,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCxgB,EAAWwgB,EAAW,GACtBvB,EAAWuB,EAAW,GAG1B,GAAI/E,EAAYkE,OAAQ,CACpB,IAAIniB,EAASqf,EAAQ4D,GAAgB,IAAInkB,EAAU0kB,YAAYvF,EAAagF,GAC5EhF,EAAYkE,OAAOniB,EAAQwC,EAAUif,QAKrCxD,EAAYhB,QAAQgG,EAAc,4BAA6B,MAIvE,WAAe,SAA0BD,GAErC,IAAIU,EAAc16C,SAASg6C,EAAW,IAClCtjD,EAAOsjD,EAAW,GAGtB,GAAI/E,EAAYmE,aAAc,CAC1B,IAAIuB,EAASrE,EAAQoE,GAAe,IAAI5kB,EAAUh4B,OAAOm3C,EAAayF,GACtEzF,EAAYmE,aAAauB,EAAQjkD,KAOzC,SAAY,SAASsjD,GAEjB,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KAEzCvkB,EAAQ4mB,aAAatF,EAAO,EAAG,EAAG,EAAG,EAAG,EAAG,IAI/C,IAAO,SAASiD,GAEZ,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCc,EAAc96C,SAASg6C,EAAW,IAClCjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCxgB,EAAWwgB,EAAW,GACtBh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IAGxBhjB,EAASqf,EAAQ4D,GAAgB,IAAInkB,EAAU0kB,YAAYvF,EAAagF,GAG5ExkB,EAAQgiB,eAAeV,EAAO+D,GAC9BrlB,EAAQ6mB,WAAWvF,EAAO/4C,EAAGC,EAAG+4B,EAAQwC,IAI5C,KAAQ,SAASwgB,GAEb,IAAIc,EAAc96C,SAASg6C,EAAW,IAClCjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IACxBxlD,EAAOwlD,EAAW,GAEtBvkB,EAAQgiB,eAAeV,EAAO+D,GAC9BrlB,EAAQmiB,KAAKb,EAAO/4C,EAAGC,EAAG,0BAA4BzJ,IAI1D,MAAS,SAASwlD,GAEd,IAAIc,EAAc96C,SAASg6C,EAAW,IAClCjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCuC,EAAW/E,EAASx3C,SAASg6C,EAAW,KAE5CvkB,EAAQgiB,eAAeV,EAAO+D,GAC9BrlB,EAAQ+mB,UAAUzF,EAAOwF,IAI7B,KAAQ,SAASvC,GAEb,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IAE5BvkB,EAAQgnB,OAAO1F,EAAO/4C,EAAGC,IAI7B,QAAW,SAAS+7C,GAEhB,IAAIc,EAAc96C,SAASg6C,EAAW,IAClCjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCuC,EAAW/E,EAASx3C,SAASg6C,EAAW,KAE5CvkB,EAAQgiB,eAAeV,EAAO+D,GAC9BrlB,EAAQinB,YAAY3F,EAAOwF,IAI/B,MAAU,SAAqBvC,GAE3B,IAAIh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IAG5BvkB,EAAQknB,YAAW,GACnBlnB,EAAQ0iB,WAAWn6C,EAAGC,IAI1B,KAAQ,SAAS+7C,GAEb,IAAIoC,EAAcp8C,SAASg6C,EAAW,IAClC4C,EAAe58C,SAASg6C,EAAW,IACnCh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IACxB9C,EAAIl3C,SAASg6C,EAAW,IAG5B,GAAIoC,EAAc,GAAKQ,GAAgB,EAAG,CACtC,IAAI7F,EAAQS,EAAS4E,GACjBt3C,EAAS0yC,EAASoF,GACtBnnB,EAAQoiB,KAAKd,EAAOjyC,EAAQ9G,EAAGC,EAAGi5C,KAK1C,KAAQ,SAAS8C,GACT/E,EAAYte,QAAQse,EAAYte,OAAOqjB,EAAW,KAG1D,KAAQ,SAASA,GACb,IAAIN,EAASD,EAAUz5C,SAASg6C,EAAW,KAC3CN,EAAOmD,QAAQ7C,EAAW,KAG9B,KAAQ,SAASA,GAEb,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCxgB,EAAWwgB,EAAW,GACtBtjD,EAAOsjD,EAAW,GAGtB,GAAI/E,EAAYoE,OAAQ,CACpB,IAAIriB,EAASqf,EAAQ4D,GAAgB,IAAInkB,EAAU0kB,YAAYvF,EAAagF,GAC5EhF,EAAYoE,OAAOriB,EAAQwC,EAAU9iC,QAKrCu+C,EAAYhB,QAAQgG,EAAc,0BAA2B,MAIrE,IAAO,SAASD,GAEZ,IAAIc,EAAc96C,SAASg6C,EAAW,IAClCjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IACxBxlD,EAAOwlD,EAAW,GAEtBvkB,EAAQgiB,eAAeV,EAAO+D,GAC9BrlB,EAAQmiB,KAAKb,EAAO/4C,EAAGC,EAAG,yBAA2BzJ,IAIzD,IAAO,SAASwlD,GAEZ,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KAEzCvkB,EAAQ/4B,IAAIq6C,IAIhB,KAAQ,SAASiD,GAEb,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KAEzCvkB,EAAQj5B,KAAKu6C,IAIjB,KAAQ,SAASiD,GAEb,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IACxB8C,EAAI98C,SAASg6C,EAAW,IACxBl/C,EAAIkF,SAASg6C,EAAW,IAE5BvkB,EAAQsnB,KAAKhG,EAAO/4C,EAAGC,EAAG6+C,EAAGhiD,IAIjC,SAAY,SAAkBk/C,GACtB/E,EAAYqE,YAAYrE,EAAYqE,WAAWU,IAGvD,MAAS,SAASA,GAEd,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KAEzCvkB,EAAQjd,MAAMu+B,IAIlB,IAAO,SAASiD,GAEZ,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCtjD,EAAOsjD,EAAW,GAClBjiD,EAAQiiD,EAAW,GAGnBpyC,EAAUiyC,EAAsBnjD,GAChCkR,GACAA,EAAQmvC,EAAOh/C,IAIvB,MAAS,SAASiiD,GAEd,IAAIoC,EAAcp8C,SAASg6C,EAAW,IAClCv8C,EAAIuC,SAASg6C,EAAW,IAG5B,GAAIoC,GAAe,EAAG,CAClB,IAAIrF,EAAQS,EAAS4E,GACrB3mB,EAAQqiB,MAAMf,EAAOt5C,KAK7B,KAAQ,SAASu8C,GAEb,IAAIoC,EAAcp8C,SAASg6C,EAAW,IAClCjD,EAAQS,EAAS4E,GACjBvzC,EAAQ7I,SAASg6C,EAAW,IAC5Bj5B,EAAS/gB,SAASg6C,EAAW,IAEjCvkB,EAAQuN,OAAO+T,EAAOluC,EAAOkY,IAIjC,MAAS,SAASi5B,GAEd,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCh8C,EAAIgC,SAASg6C,EAAW,IACxB/7C,EAAI+B,SAASg6C,EAAW,IAE5BvkB,EAAQunB,OAAOjG,EAAO/4C,EAAGC,IAI7B,KAAQ,SAAS+7C,GAEb,IAAIiD,EAAYj9C,SAASg6C,EAAW,IAGpCvkB,EAAQqhB,OAAM,WAGV,IAAK,IAAI50C,KAASg0C,EAAc,CAC5B,IAAIuE,EAAcvE,EAAah0C,GAC3Bu4C,GACAA,EAAYtM,OAIhB8O,IAAcxH,IACd5f,EAAOmiB,YAAY,OAAQiF,GAC3BxH,EAAmBwH,MAMvBzH,IAAiBJ,GACjBsB,EAASrB,GAGTJ,EAAY5b,QACZ4b,EAAY5b,OAAO4jB,IAI3B,SAAY,SAASjD,GAEjB,IAAIiB,EAAOzD,EAASx3C,SAASg6C,EAAW,KACpCkB,EAAOl7C,SAASg6C,EAAW,IAC3BmB,EAAOn7C,SAASg6C,EAAW,IAC3BoB,EAAWp7C,SAASg6C,EAAW,IAC/BqB,EAAYr7C,SAASg6C,EAAW,IAChCkD,EAAiBl9C,SAASg6C,EAAW,IACrCsB,EAAO9D,EAASx3C,SAASg6C,EAAW,KACpCuB,EAAOv7C,SAASg6C,EAAW,IAC3BwB,EAAOx7C,SAASg6C,EAAW,IAGR,IAAnBkD,EACAznB,EAAQpgC,IAAI4lD,EAAMC,EAAMC,EAAMC,EAAUC,EACpCC,EAAMC,EAAMC,GAGQ,IAAnB0B,GACLznB,EAAQ0nB,SAASlC,EAAMC,EAAMC,EAAMC,EAAUC,EACzCC,EAAMC,EAAMC,EAAM1lB,EAAUS,OAAO6mB,wBAAwBF,KAIvE,UAAa,SAASlD,GAElB,IAAIjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCv8C,EAAIgR,WAAWurC,EAAW,IAC1Bt8C,EAAI+Q,WAAWurC,EAAW,IAC1BzrC,EAAIE,WAAWurC,EAAW,IAC1Bv+C,EAAIgT,WAAWurC,EAAW,IAC1B14C,EAAImN,WAAWurC,EAAW,IAC1BhxB,EAAIva,WAAWurC,EAAW,IAE9BvkB,EAAQ4nB,UAAUtG,EAAOt5C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,IAI5C,SAAa,SAAwBgxB,GAGjC,IAAIU,EAAc16C,SAASg6C,EAAW,IAClCW,EAASrE,EAAQoE,GAGjBC,GAAUA,EAAO2C,YACjB3C,EAAO2C,cAIf,MAAS,SAAStD,GAEd,IAAIC,EAAej6C,SAASg6C,EAAW,IACnCjD,EAAQS,EAASx3C,SAASg6C,EAAW,KACrCxgB,EAAWwgB,EAAW,GAGtBhjB,EAASqf,EAAQ4D,GACb,IAAInkB,EAAU0kB,YAAYvF,EAAagF,GAG3CsD,EAAc,KACdtI,EAAYiE,UACZqE,EAActI,EAAYiE,QAAQliB,EAAQ+f,EAAOvd,IAGhD+jB,IACDA,EAAcznB,EAAU0B,YAAYJ,YAAYJ,EAAQ+f,EAAOvd,IAG/D+jB,GACApH,EAAa8D,GAAgBsD,EAC7BtI,EAAYhB,QAAQgG,EAAc,KAAM,IAKxChF,EAAYhB,QAAQgG,EAAc,WAAY,OAM1DpkB,EAAO+jB,cAAgB,SAAS4D,EAAQxD,GAEpC,IAAIpyC,EAAUmyC,EAAoByD,GAC9B51C,GACAA,EAAQoyC,IAOhBvlD,KAAK6hC,WAAa,WAGVkf,GAAgBD,GACTC,GAAgBF,IAEvBoB,EAASpB,GAGLI,GACAhwC,OAAO+3C,cAAc/H,GAGzB7f,EAAOmiB,YAAY,cACnBniB,EAAOS,aACPogB,EAASnB,KAcjB9gD,KAAKqjC,QAAU,SAAStjC,GAEpBkiD,EAASvB,GAET,IACItf,EAAOiC,QAAQtjC,GAEnB,MAAOm5C,GAEH,MADA+I,EAASxB,GACHvH,EAIV+H,EAAehwC,OAAOg4C,aAAY,WAC9B7nB,EAAOmiB,YAAY,SACpB,KAEHtB,EAAStB,KASjBtf,EAAUS,OAAO6mB,wBAA0B,CAGvCxH,EAAK,SAAUpmC,EAAK6W,GAChBA,EAAIs3B,IAAMt3B,EAAIu3B,MAAQv3B,EAAIw3B,KAAO,GAIrC,GAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAMt3B,EAAIu3B,MAAQv3B,EAAIw3B,KAAO,KAIrC,EAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAQnuC,EAAImuC,IAChBt3B,EAAIu3B,MAAQpuC,EAAIouC,MAChBv3B,EAAIw3B,KAAQruC,EAAIquC,KAChBx3B,EAAI/G,MAAQ9P,EAAI8P,OAIpB,EAAK,SAAU9P,EAAK6W,KAKpB,GAAK,SAAU7W,EAAK6W,GAChBA,EAAIs3B,IAAQ,KAAQnuC,EAAImuC,IACxBt3B,EAAIu3B,MAAQ,KAAQpuC,EAAIouC,MACxBv3B,EAAIw3B,KAAQ,KAAQruC,EAAIquC,KACxBx3B,EAAI/G,MAAS9P,EAAI8P,OAIrB,GAAK,SAAU9P,EAAK6W,GAChBA,EAAIs3B,IAAQ,KAAQt3B,EAAIs3B,IACxBt3B,EAAIu3B,MAAQ,KAAQv3B,EAAIu3B,MACxBv3B,EAAIw3B,KAAQ,KAAQx3B,EAAIw3B,MAI5B,EAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAWnuC,EAAImuC,IAASt3B,EAAIs3B,IAChCt3B,EAAIu3B,MAAWpuC,EAAIouC,MAASv3B,EAAIu3B,MAChCv3B,EAAIw3B,KAAWruC,EAAIquC,KAASx3B,EAAIw3B,MAIpC,GAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAQ,MAAUnuC,EAAImuC,IAASt3B,EAAIs3B,KACvCt3B,EAAIu3B,MAAQ,MAAUpuC,EAAIouC,MAASv3B,EAAIu3B,OACvCv3B,EAAIw3B,KAAQ,MAAUruC,EAAIquC,KAASx3B,EAAIw3B,OAI3C,EAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAWnuC,EAAImuC,IAASt3B,EAAIs3B,IAChCt3B,EAAIu3B,MAAWpuC,EAAIouC,MAASv3B,EAAIu3B,MAChCv3B,EAAIw3B,KAAWruC,EAAIquC,KAASx3B,EAAIw3B,MAIpC,EAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAQ,MAAUnuC,EAAImuC,IAASt3B,EAAIs3B,KACvCt3B,EAAIu3B,MAAQ,MAAUpuC,EAAIouC,MAASv3B,EAAIu3B,OACvCv3B,EAAIw3B,KAAQ,MAAUruC,EAAIquC,KAASx3B,EAAIw3B,OAI3C,EAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAWnuC,EAAImuC,IAASt3B,EAAIs3B,IAChCt3B,EAAIu3B,MAAWpuC,EAAIouC,MAASv3B,EAAIu3B,MAChCv3B,EAAIw3B,KAAWruC,EAAIquC,KAASx3B,EAAIw3B,MAIpC,EAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAQ,MAAUnuC,EAAImuC,IAASt3B,EAAIs3B,KACvCt3B,EAAIu3B,MAAQ,MAAUpuC,EAAIouC,MAASv3B,EAAIu3B,OACvCv3B,EAAIw3B,KAAQ,MAAUruC,EAAIquC,KAASx3B,EAAIw3B,OAI3C,EAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,KAAkBnuC,EAAImuC,IAASt3B,EAAIs3B,IAA1B,IACbt3B,EAAIu3B,OAAkBpuC,EAAIouC,MAASv3B,EAAIu3B,MAA1B,IACbv3B,EAAIw3B,MAAkBruC,EAAIquC,KAASx3B,EAAIw3B,KAA1B,KAIjB,GAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAS,MAASnuC,EAAImuC,IAASt3B,EAAIs3B,KACvCt3B,EAAIu3B,MAAS,MAASpuC,EAAIouC,MAASv3B,EAAIu3B,OACvCv3B,EAAIw3B,KAAS,MAASruC,EAAIquC,KAASx3B,EAAIw3B,OAI3C,EAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAkBnuC,EAAImuC,KAASt3B,EAAIs3B,IAA1B,IACbt3B,EAAIu3B,MAAkBpuC,EAAIouC,OAASv3B,EAAIu3B,MAA1B,IACbv3B,EAAIw3B,KAAkBruC,EAAIquC,MAASx3B,EAAIw3B,KAA1B,KAIjB,GAAK,SAAUruC,EAAK6W,GAChBA,EAAIs3B,IAAS,KAASnuC,EAAImuC,KAASt3B,EAAIs3B,KACvCt3B,EAAIu3B,MAAS,KAASpuC,EAAIouC,OAASv3B,EAAIu3B,OACvCv3B,EAAIw3B,KAAS,KAASruC,EAAIquC,MAASx3B,EAAIw3B,QAwB3C/nB,EAAYA,GAAa,GAY7BA,EAAUgoB,cAAgB,SAAS9mB,EAAQwC,GAMvC,IAAIsT,EAAcr4C,KAQdspD,EAAM,QAAUvkB,EAAW,WAG/BxC,EAAO+V,OAAS,SAA2Bv4C,GAMvCupD,GAAOvpD,GAKXwiC,EAAO4C,MAAQ,WACPkT,EAAYlT,OACZkT,EAAYlT,SAWpBnlC,KAAKupD,OAAS,WACV,OAAOD,GAQXtpD,KAAKmlC,MAAQ,MAsBb9D,EAAYA,GAAa,GAW7BA,EAAUkgB,QAAU,WAMhB,IAAIiI,EAAexpD,KAEfypD,EAAe,EACfC,EAAgB,EAChBC,EAAe,EAGf3oB,EAAU3xB,SAASmd,cAAc,OACrCwU,EAAQh7B,MAAMyiC,SAAW,WACzBzH,EAAQh7B,MAAMoO,MAAQq1C,EAAe,KACrCzoB,EAAQh7B,MAAMsmB,OAASo9B,EAAgB,KAGvC1oB,EAAQh7B,MAAM6P,gBACdmrB,EAAQh7B,MAAM4jD,sBACd5oB,EAAQh7B,MAAM6jD,mBACd7oB,EAAQh7B,MAAM8jD,iBACd9oB,EAAQh7B,MAAM+jD,kBACV,MAGJ,IAAIC,EAAgB,IAAI3oB,EAAUkgB,QAAQ0I,aAAaR,EAAcC,GAGjEQ,EAAS,IAAI7oB,EAAUkgB,QAAQ0I,aAAa,EAAG,GACnDC,EAAOlH,eAAe3hB,EAAU4hB,MAAMC,KAGtCliB,EAAQe,YAAYioB,EAAc/nB,cAClCjB,EAAQe,YAAYmoB,EAAOjoB,cAG3B,IAAIkoB,EAAS96C,SAASmd,cAAc,OACpC29B,EAAOnkD,MAAMyiC,SAAW,WACxB0hB,EAAOnkD,MAAMoO,MAASq1C,EAAaE,EAAgB,KACnDQ,EAAOnkD,MAAMsmB,OAAUo9B,EAAcC,EAAgB,KAGrDQ,EAAOpoB,YAAYf,GASnBhhC,KAAKmnD,eAAiB,EAStBnnD,KAAKonD,eAAiB,EAUtBpnD,KAAKoqD,QAAU,EAUfpqD,KAAKqqD,QAAU,EAUfrqD,KAAKsqD,SAAW,KAYhBtqD,KAAKuqD,SAAW,KAUhB,IAAIC,EAAQ,GAQRC,EAAS,GAMb,SAASC,IAEL,IAAIC,EAAkB,EAGtB,MAAOA,EAAkBF,EAAOpqD,OAAQ,CAEpC,IAAIuqD,EAAQH,EAAOE,GACnB,IAAKC,EAAMC,UACP,MAEJD,EAAMvI,QACNsI,IAKJF,EAAOzlC,OAAO,EAAG2lC,GAerB,SAASG,EAAMz3C,EAAUm3C,GASrBxqD,KAAK6qD,QAAU,WAGX,IAAK,IAAInqD,EAAE,EAAGA,EAAI8pD,EAAMnqD,OAAQK,IAC5B,GAAI8pD,EAAM9pD,GAAGqqD,QACT,OAAO,EAIf,OAAO,GAUX/qD,KAAKqiD,MAAQ,WAGT,IAAK,IAAI3hD,EAAE,EAAGA,EAAI8pD,EAAMnqD,OAAQK,IAC5B8pD,EAAM9pD,GAAGsqD,UAGT33C,GAAUA,KAkBtB,SAAS43C,EAAKC,EAAaH,GAEvB,IAAII,EAAOnrD,KAOXA,KAAK+qD,QAAUA,EAKf/qD,KAAKorD,QAAU,WACPD,EAAKJ,UACLI,EAAKJ,SAAU,EACfL,MASR1qD,KAAKgrD,QAAU,WACPE,GAAaA,KAiBzB,SAASG,EAAal4C,EAAS43C,GAC3B,IAAII,EAAO,IAAIF,EAAK93C,EAAS43C,GAE7B,OADAP,EAAMziD,KAAKojD,GACJA,EAQXnrD,KAAKiiC,WAAa,WACd,OAAOkoB,GAQXnqD,KAAKsrD,SAAW,WACZ,OAAO7B,GAQXzpD,KAAKurD,UAAY,WACb,OAAO7B,GAWX1pD,KAAK8kD,gBAAkB,WACnB,OAAOkF,GAUXhqD,KAAKwrD,eAAiB,WAClB,OAAOtB,GAUXlqD,KAAK+kD,YAAc,WACf,IAAIzC,EAAQ,IAAIjhB,EAAUkgB,QAAQ0I,aAAaR,EAAcC,GAE7D,OADApH,EAAMc,KAAK4G,EAAe,EAAG,EAAG,GACzB1H,GAUXtiD,KAAKwwB,aAAe,WAChB,IAAIpa,EAAS,IAAIirB,EAAU4hB,MAAM,EAAG,GAEpC,OADA7sC,EAAOq1C,SAAW,EACXr1C,GAYXpW,KAAKqiD,MAAQ,SAAShvC,GAGlBo3C,EAAO1iD,KAAK,IAAI+iD,EAAMz3C,EAAUm3C,IAChCA,EAAQ,GAGRE,KAwBJ1qD,KAAKqnD,UAAY,SAASqE,EAAUC,EAAUrJ,EAAOsJ,EAAMC,EAAMC,EAAMC,GACnEV,GAAa,WAGT7B,EAAarC,eAAiBuE,EAC9BlC,EAAapC,eAAiBuE,EAG9BzB,EAAO3b,OAAOud,EAAMC,GAGpB7B,EAAOh5B,KAAKoxB,EAAOsJ,EAAMC,EAAMC,EAAMC,EAAM,EAAG,GAC9CvC,EAAa9F,WAAW8F,EAAaY,QAASZ,EAAaa,SAGvDb,EAAae,UACbf,EAAae,SAASL,EAAO3H,WAAYmJ,EAAUC,OAY/D3rD,KAAKkoD,WAAa,SAAS8D,GAEvB,IAAIC,EAAU/B,EAAOjoB,aACjB5xB,EAAS47C,EAAQC,YAGP,IAAVF,EACI37C,GACAA,EAAO87C,YAAYF,GAIlB57C,IAAW2wB,GAChBA,EAAQe,YAAYkqB,IAY5BjsD,KAAK0jD,WAAa,SAASn6C,EAAGC,GAG1B0gD,EAAOkC,UAAU7iD,EAAIigD,EAAarC,eACjB39C,EAAIggD,EAAapC,gBAGlCoC,EAAaY,QAAU7gD,EACvBigD,EAAaa,QAAU7gD,GAa3BxJ,KAAKuuC,OAAS,SAAS+T,EAAOluC,EAAOkY,GACjC++B,GAAa,WAET/I,EAAM/T,OAAOn6B,EAAOkY,GAGhBg2B,IAAU0H,IAGVP,EAAer1C,EACfs1C,EAAgBp9B,EAChB0U,EAAQh7B,MAAMoO,MAAQq1C,EAAe,KACrCzoB,EAAQh7B,MAAMsmB,OAASo9B,EAAgB,KAGvCS,EAAOnkD,MAAMoO,MAASq1C,EAAaE,EAAgB,KACnDQ,EAAOnkD,MAAMsmB,OAAUo9B,EAAcC,EAAgB,KAGjDH,EAAac,UACbd,EAAac,SAASl2C,EAAOkY,QAuB7CtsB,KAAKqsD,UAAY,SAAS/J,EAAO/4C,EAAGC,EAAGojB,GACnCy+B,GAAa,WACT/I,EAAM+J,UAAU9iD,EAAGC,EAAGojB,OAqB9B5sB,KAAKssD,SAAW,SAAShK,EAAO/4C,EAAGC,EAAGo2C,GAElC,IAAIuL,EAGJ,GAAIl6C,OAAOs7C,kBAAmB,CAE1B,IAAIC,EAGJrB,EAAOE,GAAa,WAChB/I,EAAM+J,UAAU9iD,EAAGC,EAAGgjD,MACvB,GAGHv7C,OAAOs7C,kBAAkB3M,GAAMllC,MAAK,SAAsB+xC,GACtDD,EAASC,EACTtB,EAAKC,iBAOR,CAGD,IAAIlqB,EAAMwrB,IAAIC,gBAAgB/M,GAG9BuL,EAAOE,GAAa,WAGZz+B,EAAMxY,OAASwY,EAAMN,QACrBg2B,EAAM+J,UAAU9iD,EAAGC,EAAGojB,GAG1B8/B,IAAIE,gBAAgB1rB,MAErB,GAGH,IAAItU,EAAQ,IAAIigC,MAChBjgC,EAAM0zB,OAAS6K,EAAKC,QACpBx+B,EAAMuW,QAAUgoB,EAAKC,QACrBx+B,EAAM7R,IAAMmmB,IA6BpBlhC,KAAK6nD,WAAa,SAAoBvF,EAAO/4C,EAAGC,EAAG+4B,EAAQwC,GAIvD,GAAI9zB,OAAOs7C,kBAAmB,CAC1B,IAAIvnB,EAAS,IAAI3D,EAAUiE,WAAW/C,EAAQwC,GAC9CC,EAAOG,MAAQ,WACXqkB,EAAa8C,SAAShK,EAAO/4C,EAAGC,EAAGw7B,EAAOsa,gBAM7C,CACGta,EAAS,IAAI3D,EAAUgoB,cAAc9mB,EAAQwC,GACjDC,EAAOG,MAAQ,WACXqkB,EAAarG,KAAKb,EAAO/4C,EAAGC,EAAGw7B,EAAOukB,aAgBlDvpD,KAAKmjD,KAAO,SAASb,EAAO/4C,EAAGC,EAAG03B,GAE9B,IAAIiqB,EAAOE,GAAa,WAGhBz+B,EAAMxY,OAASwY,EAAMN,QACrBg2B,EAAM+J,UAAU9iD,EAAGC,EAAGojB,MAE3B,GAECA,EAAQ,IAAIigC,MAChBjgC,EAAM0zB,OAAS6K,EAAKC,QACpBx+B,EAAMuW,QAAUgoB,EAAKC,QACrBx+B,EAAM7R,IAAMmmB,GAehBlhC,KAAK8sD,KAAO,SAASxK,EAAOvd,EAAUgoB,EAAU7rB,GAG5C,IAAI8rB,EAAQ39C,SAASmd,cAAc,SACnCwgC,EAAMxqD,KAAOuiC,EACbioB,EAAMjyC,IAAMmmB,EAGZ8rB,EAAMC,iBAAiB,QAAQ,WAE3B,SAASC,IACL5K,EAAM+J,UAAU,EAAG,EAAGW,GACjBA,EAAMG,OACPl8C,OAAOzF,WAAW0hD,EAAiB,IAG3CA,OAED,GAEH7B,EAAa2B,EAAMF,OA0BvB9sD,KAAK0oD,SAAW,SAASZ,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMqB,EAAU7jD,EAAGC,EAAG6jD,GACvEhC,GAAa,WACT+B,EAAS1E,SAASZ,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMxiD,EAAGC,EAAG6jD,OAuBlErtD,KAAKY,IAAM,SAASknD,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMqB,EAAU7jD,EAAGC,GAC/D6hD,GAAa,WACT+B,EAASxsD,IAAIknD,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMxiD,EAAGC,OA0B1DxJ,KAAKkxB,KAAO,SAAS42B,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMqB,EAAU7jD,EAAGC,GAChE6hD,GAAa,WACT+B,EAASl8B,KAAK42B,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMxiD,EAAGC,OAW3DxJ,KAAKuoD,OAAS,SAASjG,EAAO/4C,EAAGC,GAC7B6hD,GAAa,WACT/I,EAAMiG,OAAOh/C,EAAGC,OAWxBxJ,KAAKgoD,OAAS,SAAS1F,EAAO/4C,EAAGC,GAC7B6hD,GAAa,WACT/I,EAAM0F,OAAOz+C,EAAGC,OAkBxBxJ,KAAK8lD,IAAM,SAASxD,EAAO/4C,EAAGC,EAAGk8C,EAAQC,EAAYC,EAAUC,GAC3DwF,GAAa,WACT/I,EAAMwD,IAAIv8C,EAAGC,EAAGk8C,EAAQC,EAAYC,EAAUC,OAetD7lD,KAAK0nD,QAAU,SAASpF,EAAOgF,EAAMC,EAAMC,EAAMC,EAAMl+C,EAAGC,GACtD6hD,GAAa,WACT/I,EAAMoF,QAAQJ,EAAMC,EAAMC,EAAMC,EAAMl+C,EAAGC,OAUjDxJ,KAAK2F,MAAQ,SAAS28C,GAClB+I,GAAa,WACT/I,EAAM38C,YAed3F,KAAKsoD,KAAO,SAAShG,EAAO/4C,EAAGC,EAAG6+C,EAAGhiD,GACjCglD,GAAa,WACT/I,EAAMgG,KAAK/+C,EAAGC,EAAG6+C,EAAGhiD,OAY5BrG,KAAKumD,KAAO,SAASjE,GACjB+I,GAAa,WACT/I,EAAMiE,WAqBdvmD,KAAKknD,YAAc,SAAS5E,EAAO0E,EAAK5+C,EAAM6+C,EAAWj5B,EAAGC,EAAGhlB,EAAGD,GAC9DqiD,GAAa,WACT/I,EAAM4E,YAAYF,EAAK5+C,EAAM6+C,EAAWj5B,EAAGC,EAAGhlB,EAAGD,OAgBzDhJ,KAAKsmD,UAAY,SAAShE,EAAOt0B,EAAGC,EAAGhlB,EAAGD,GACtCqiD,GAAa,WACT/I,EAAMgE,UAAUt4B,EAAGC,EAAGhlB,EAAGD,OAoBjChJ,KAAKioD,YAAc,SAAS3F,EAAO0E,EAAK5+C,EAAM6+C,EAAWa,GACrDuD,GAAa,WACT/I,EAAM2F,YAAYjB,EAAK5+C,EAAM6+C,EAAWa,OAehD9nD,KAAK+nD,UAAY,SAASzF,EAAOwF,GAC7BuD,GAAa,WACT/I,EAAMyF,UAAUD,OASxB9nD,KAAK+H,KAAO,SAASu6C,GACjB+I,GAAa,WACT/I,EAAMv6C,WASd/H,KAAKiI,IAAM,SAASq6C,GAChB+I,GAAa,WACT/I,EAAMr6C,UAUdjI,KAAK+jB,MAAQ,SAASu+B,GAClB+I,GAAa,WACT/I,EAAMv+B,YAgBd/jB,KAAK4nD,aAAe,SAAStF,EAAOt5C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,GAC/C82B,GAAa,WACT/I,EAAMsF,aAAa5+C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,OAgB1Cv0B,KAAK4oD,UAAY,SAAStG,EAAOt5C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,GAC5C82B,GAAa,WACT/I,EAAMsG,UAAU5/C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,OAiBvCv0B,KAAKgjD,eAAiB,SAASV,EAAOrjB,GAClCosB,GAAa,WACT/I,EAAMU,eAAe/jB,OAc7Bj/B,KAAKqlD,cAAgB,SAAS/C,EAAOgL,GACjCjC,GAAa,WACT/I,EAAM+C,cAAciI,OAW5BttD,KAAK6iD,QAAU,SAAiBP,GAC5B+I,GAAa,WACT/I,EAAMO,cA6Bd7iD,KAAKsjD,QAAU,SAAiBhB,EAAOt5C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,GAClD82B,GAAa,WACT/I,EAAMgB,QAAQt6C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,OAwBrCv0B,KAAKojD,KAAO,SAAcd,EAAOjyC,EAAQ9G,EAAGC,EAAGi5C,GAC3C4I,GAAa,WACT/I,EAAMc,KAAK/yC,EAAQ9G,EAAGC,EAAGi5C,OAcjCziD,KAAKqjD,MAAQ,SAAef,EAAOz3B,GAC/BwgC,GAAa,WACT/I,EAAMe,MAAMx4B,OAYpB7qB,KAAK4Z,MAAQ,SAASA,GAElBonB,EAAQh7B,MAAM4iD,UACd5nB,EAAQh7B,MAAMunD,gBACdvsB,EAAQh7B,MAAMwnD,aACdxsB,EAAQh7B,MAAMynD,WACdzsB,EAAQh7B,MAAM0nD,YAEV,SAAW9zC,EAAQ,IAAMA,EAAQ,IAErC+vC,EAAe/vC,EAGfuwC,EAAOnkD,MAAMoO,MAASq1C,EAAaE,EAAgB,KACnDQ,EAAOnkD,MAAMsmB,OAAUo9B,EAAcC,EAAgB,MASzD3pD,KAAKkuB,SAAW,WACZ,OAAOy7B,GAUX3pD,KAAK2tD,QAAU,WAGX,IAAIvhC,EAAS/c,SAASmd,cAAc,UACpCJ,EAAOhY,MAAQ41C,EAAc51C,MAC7BgY,EAAOE,OAAS09B,EAAc19B,OAE9B,IAAIytB,EAAU3tB,EAAOM,WAAW,MAGhC,SAASkhC,EAAatL,GAGlB,IAAI/8C,EAAW,GACf,IAAK,IAAIkI,KAAS60C,EAAM/8C,SACpBA,EAASwC,KAAKu6C,EAAM/8C,SAASkI,IAwBjC,OArBAlI,EAAS4D,MAAK,SAA6BH,EAAGC,GAG1C,IAAI4kD,EAAO7kD,EAAEy5C,EAAIx5C,EAAEw5C,EACnB,GAAa,IAAToL,EACA,OAAOA,EAGX,IAAIC,EAAY9kD,EAAEi5B,aACd8rB,EAAY9kD,EAAEg5B,aACdwG,EAAWslB,EAAUC,wBAAwBF,GAEjD,OAAIrlB,EAAWx7B,KAAKghD,6BAAqC,EACrDxlB,EAAWx7B,KAAKihD,4BAAqC,EAGlD,KAKJ3oD,EAKX,SAAS4oD,EAAW7L,EAAO/4C,EAAGC,GAG1B,GAAI84C,EAAMluC,MAAQ,GAAKkuC,EAAMh2B,OAAS,EAAG,CAGrC,IAAI8hC,EAAgBrU,EAAQsU,YAC5BtU,EAAQsU,aAAe/L,EAAMz3B,MAAQ,IAGrCkvB,EAAQsS,UAAU/J,EAAMgM,YAAa/kD,EAAGC,GAIxC,IADA,IAAIjE,EAAWqoD,EAAatL,GACnB5hD,EAAE,EAAGA,EAAE6E,EAASlF,OAAQK,IAAK,CAClC,IAAIgN,EAAQnI,EAAS7E,GACrBytD,EAAWzgD,EAAOnE,EAAImE,EAAMnE,EAAGC,EAAIkE,EAAMlE,GAI7CuwC,EAAQsU,YAAcD,GAU9B,OAHAD,EAAWnE,EAAe,EAAG,GAGtB59B,IAkBfiV,EAAUkgB,QAAQ0I,aAAe,SAAS71C,EAAOkY,GAE7C+U,EAAU4hB,MAAM7hC,MAAMphB,KAAM,CAACoU,EAAOkY,IAMpC,IAAIg2B,EAAQtiD,KAUZA,KAAKuuD,YAAcltB,EAAUkgB,QAAQ0I,aAAauE,YAMlDxuD,KAAK6qB,MAAQ,IAOb7qB,KAAKuJ,EAAI,EAOTvJ,KAAKwJ,EAAI,EAMTxJ,KAAKyiD,EAAI,EAUTziD,KAAK0iD,OAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAM9B1iD,KAAKqQ,OAAS,KAMdrQ,KAAKuF,SAAW,GAGhB,IAAI6mB,EAASk2B,EAAMgM,YACnBliC,EAAOpmB,MAAMyiC,SAAW,WACxBrc,EAAOpmB,MAAMwiC,KAAO,MACpBpc,EAAOpmB,MAAMyoD,IAAM,MAGnB,IAAIC,EAAMr/C,SAASmd,cAAc,OACjCkiC,EAAI3sB,YAAY3V,GAChBsiC,EAAI1oD,MAAMoO,MAAQA,EAAQ,KAC1Bs6C,EAAI1oD,MAAMsmB,OAASA,EAAS,KAC5BoiC,EAAI1oD,MAAMyiC,SAAW,WACrBimB,EAAI1oD,MAAMwiC,KAAO,MACjBkmB,EAAI1oD,MAAMyoD,IAAM,MAChBC,EAAI1oD,MAAM2oD,SAAW,SAMrB,IAAIC,EAAiB5uD,KAAKuuC,OAE1BvuC,KAAKuuC,OAAS,SAASn6B,EAAOkY,GAG1BoiC,EAAI1oD,MAAMoO,MAAQA,EAAQ,KAC1Bs6C,EAAI1oD,MAAMsmB,OAASA,EAAS,KAE5BsiC,EAAex6C,EAAOkY,IAS1BtsB,KAAKiiC,WAAa,WACd,OAAOysB,GAOX,IAAItC,EAAY,sBAMZ1J,EAAS,2BASb1iD,KAAKosD,UAAY,SAAS7iD,EAAGC,GAEzB84C,EAAM/4C,EAAIA,EACV+4C,EAAM94C,EAAIA,EAGV4iD,EAAY,aACM7iD,EAAI,MACJC,EAAI,MAGtBklD,EAAI1oD,MAAM4iD,UACV8F,EAAI1oD,MAAMunD,gBACVmB,EAAI1oD,MAAMwnD,aACVkB,EAAI1oD,MAAMynD,WACViB,EAAI1oD,MAAM0nD,YAENtB,EAAY,IAAM1J,GAc1B1iD,KAAKojD,KAAO,SAAS/yC,EAAQ9G,EAAGC,EAAGi5C,GAG/B,GAAIH,EAAMjyC,SAAWA,EAAQ,CAGrBiyC,EAAMjyC,eACCiyC,EAAMjyC,OAAO9K,SAAS+8C,EAAMiM,aACvCjM,EAAMjyC,OAASA,EACfA,EAAO9K,SAAS+8C,EAAMiM,aAAejM,EAGrC,IAAIuM,EAAiBx+C,EAAO4xB,aAC5B4sB,EAAe9sB,YAAY2sB,GAK/BpM,EAAM8J,UAAU7iD,EAAGC,GACnB84C,EAAMG,EAAIA,EACViM,EAAI1oD,MAAMyJ,OAASgzC,GAUvBziD,KAAKqjD,MAAQ,SAASr6C,GAClBs5C,EAAMz3B,MAAQ7hB,EACd0lD,EAAI1oD,MAAMwJ,QAAUxG,EAAE,KAO1BhJ,KAAK6iD,QAAU,WAGPP,EAAMjyC,gBACCiyC,EAAMjyC,OAAO9K,SAAS+8C,EAAMiM,aACnCjM,EAAMjyC,OAAS,MAIfq+C,EAAIxC,YACJwC,EAAIxC,WAAWC,YAAYuC,IAenC1uD,KAAKsjD,QAAU,SAASt6C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,GAGnC+tB,EAAMI,OAAS,CAAC15C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,GAG/BmuB,EAOI,UAAY15C,EAAI,IAAMC,EAAI,IAAM6Q,EAAI,IAAM9S,EAAI,IAAM6F,EAAI,IAAM0nB,EAAI,IAGtEm6B,EAAI1oD,MAAM4iD,UACV8F,EAAI1oD,MAAMunD,gBACVmB,EAAI1oD,MAAMwnD,aACVkB,EAAI1oD,MAAMynD,WACViB,EAAI1oD,MAAM0nD,YAENtB,EAAY,IAAM1J,IAc9BrhB,EAAUkgB,QAAQ0I,aAAauE,UAAY,EAqBvCntB,EAAYA,GAAa,GAY7BA,EAAU0C,UAAY,WAQlB,IAAID,EAAO9jC,KAQP8uD,EAAQz/C,SAASmd,cAAc,YACnCsiC,EAAM9oD,MAAMyiC,SAAa,QACzBqmB,EAAM9oD,MAAM+oD,QAAa,OACzBD,EAAM9oD,MAAMzD,OAAa,OACzBusD,EAAM9oD,MAAM2T,OAAa,IACzBm1C,EAAM9oD,MAAMgpD,QAAa,IACzBF,EAAM9oD,MAAMsmB,OAAa,IACzBwiC,EAAM9oD,MAAMoO,MAAa,IACzB06C,EAAM9oD,MAAMwiC,KAAa,IACzBsmB,EAAM9oD,MAAMwyB,OAAa,IACzBs2B,EAAM9oD,MAAMuoC,OAAa,OACzBugB,EAAM9oD,MAAMipD,WAAa,cACzBH,EAAM9oD,MAAMlC,MAAa,cAGzBgrD,EAAM7B,iBAAiB,YAAY,SAAuBpgD,GACtDiiD,EAAMxrD,MAAQ,MACf,GAGHwrD,EAAM7B,iBAAiB,kBAAkB,SAAmCpgD,GACpEA,EAAE9M,OACF+uD,EAAMxrD,MAAQ,OACnB,GAGHwrD,EAAM7B,iBAAiB,SAAS,SAA6BpgD,GACrDA,EAAE9M,OAAS8M,EAAEqiD,cACbJ,EAAMxrD,MAAQ,OACnB,GAKHwrD,EAAM7B,iBAAiB,SAAS,WAC5Bh8C,OAAOzF,YAAW,WACdsjD,EAAMxqD,QACNwqD,EAAMK,WACP,MACJ,GAMHnvD,KAAKoc,MAAQ,WACTnL,OAAOzF,YAAW,WACdsjD,EAAM1yC,UACP,IASPpc,KAAKiiC,WAAa,WACd,OAAO6sB,GAIXz/C,SAAS49C,iBAAiB,WAAW,SAAqBpgD,GAGtD,IAAIy7B,EAAUj5B,SAAS+/C,cACvB,GAAI9mB,GAAWA,IAAYj5B,SAAS20B,KAAM,CAGtC,IAAIskB,EAAOhgB,EAAQ+mB,wBACnB,GAAI/G,EAAK9f,KAAO8f,EAAKl0C,MAAQ,GAAKk0C,EAAKmG,IAAMnG,EAAKh8B,OAAS,EACvD,OAKRwX,EAAK1nB,WAEN,IAuBHilB,EAAYA,GAAa,GAU7BA,EAAU0kB,YAAc,SAASzjB,EAAQ70B,GAMrC,IAAI6hD,EAActvD,KAMlBA,KAAKyN,MAAQA,EAQbzN,KAAKs4C,OAAS,KAOdt4C,KAAKmlC,MAAQ,KASbnlC,KAAKw/C,QAAU,SAAS55B,EAAS/H,GAC7BykB,EAAOkd,QAAQ8P,EAAY7hD,MAAOmY,EAAS/H,KAwB/CwjB,EAAYA,GAAa,GAO7BA,EAAU0gB,YAAc,WAOpB,IAAIwN,EAAYvvD,KAQZwvD,EAAO,GAMXxvD,KAAKyvD,SAAW,EAQhBzvD,KAAKylC,KAAO,WAGR,OAAI+pB,EAAKnvD,OAAS,EACPmvD,EAAKpmD,QAGTmmD,EAAUE,YASrBzvD,KAAKukD,KAAO,SAASmL,GACjBF,EAAKznD,KAAK2nD,KAwBdruB,EAAYA,GAAa,GAY7BA,EAAUsuB,WAAa,SAA6BptB,GAQhD,IAAIqtB,EAAa5vD,KAQb6vD,EAAe,IAAIxuB,EAAU4D,aAAa1C,GAQ1CutB,EAAO,GAQX9vD,KAAKO,UAAY,WACb,OAAOuvD,EAAKzvD,QAWhBL,KAAK+vD,QAAU,WACX,OAAOC,KAAKjtC,MAAM+sC,IAItBD,EAAa3qB,OAAS,SAAgB7hC,GAGlCysD,GAAQzsD,EAGJusD,EAAWrQ,YACXqQ,EAAWrQ,WAAWl8C,EAAKhD,SAKnCwvD,EAAa1qB,MAAQ,WACbyqB,EAAWzqB,OACXyqB,EAAWzqB,SAUnBnlC,KAAKu/C,WAAa,KAOlBv/C,KAAKmlC,MAAQ,MAuBb9D,EAAYA,GAAa,GAa7BA,EAAU6C,SAAW,SAAkB+nB,GAMnC,IAAIgE,EAAgBjwD,KAShBkwD,EAAiB7uB,EAAU6C,SAASisB,UAUpCC,EAAe,6BAA+BF,EAWlDlwD,KAAKykC,UAAY,KASjBzkC,KAAK0kC,QAAU,KAUf,IAAI2rB,EAAS,CAOTC,iBAAiB,EAQjBC,kBAAkB,EAQlBC,yBAAyB,GAMzBjU,WAAaA,UAAUkU,WAGnBlU,UAAUkU,SAASn0B,MAAM,qBACzB+zB,EAAOC,iBAAkB,EAIpB/T,UAAUkU,SAASn0B,MAAM,WAC9B+zB,EAAOE,kBAAmB,EAC1BF,EAAOG,yBAA0B,IAazC,IAAIE,EAAW,WAKX,IAAIC,EAAY3wD,KAQhBA,KAAKwoD,WAAY,IAAIoI,MAAOC,UAO5B7wD,KAAK8wD,kBAAmB,EASxB9wD,KAAKqkC,OAAS,KASdrkC,KAAK+wD,UAAW,EAShB/wD,KAAKgxD,OAAS,WACV,OAAO,IAAIJ,MAAOC,UAAYF,EAAUnI,YAuB5CyI,EAAe,SAASC,EAASC,EAAexoD,EAAKyoD,GAGrDV,EAAStvC,MAAMphB,MAOfA,KAAKkxD,QAAUA,EAQflxD,KAAKmxD,cAAgBA,EAQrBnxD,KAAK2I,IAAMA,EASX3I,KAAKoxD,SAAWA,EAGhBpxD,KAAKqkC,OAAUgtB,EAA2B1oD,EAAKyoD,IAChCE,EAAoBJ,EAASE,GAQ5CpxD,KAAKuxD,eAAiBlB,EAAOC,gBAIzBtwD,KAAKqkC,SAAWmtB,EAAYxxD,KAAKqkC,UACjCrkC,KAAK+wD,UAAW,IAGf/wD,KAAKqkC,QAAUotB,EAAoBP,EAASC,KAC7CnxD,KAAKqkC,OAASgtB,EAA2BF,EAAeC,EAAUnB,EAAc1e,UAAUnoC,SAI1F6mD,EAAc1e,UAAUmgB,MAAwB,QAAhB1xD,KAAKqkC,QAAqC,QAAhBrkC,KAAKqkC,QAI1C,QAAhBrkC,KAAKqkC,QAAqBgsB,EAAOG,2BAHtCxwD,KAAKuxD,eAAgB,GAOzB,IAAII,GAAe1B,EAAc1e,UAAUqgB,OAASvB,EAAOE,iBAGvDsB,GAAgB5B,EAAc1e,UAAUugB,KAIvCD,GAAgB5B,EAAc1e,UAAUqgB,MACxCD,GAAgB1B,EAAc1e,UAAUugB,KACzC7B,EAAc1e,UAAUmgB,MACxBzB,EAAc1e,UAAUwgB,SACxB/xD,KAAK+wD,UAAW,GAGpBiB,EAAad,GAAWlxD,KAAKqkC,QAIjC4sB,EAAa3wD,UAAY,IAAIowD,EAa7B,IAAIuB,EAAgB,SAASC,GAGzBxB,EAAStvC,MAAMphB,MAQfA,KAAKkyD,SAAWA,EAGhBlyD,KAAKqkC,OAAS8tB,EAAqBD,GAGnClyD,KAAK+wD,UAAW,GAIpBkB,EAAc3xD,UAAY,IAAIowD,EAoB9B,IAAI0B,EAAa,SAASlB,EAASC,EAAexoD,EAAKyoD,GAGnDV,EAAStvC,MAAMphB,MAOfA,KAAKkxD,QAAUA,EAQflxD,KAAKmxD,cAAgBA,EAQrBnxD,KAAK2I,IAAMA,EASX3I,KAAKoxD,SAAWA,EAGhBpxD,KAAKqkC,OAAUitB,EAAoBJ,EAASE,IAC7BC,EAA2B1oD,EAAKyoD,GAI1CnB,EAAczM,QAAQxjD,KAAKqkC,UAC5BrkC,KAAKqkC,OAAS2tB,EAAad,IAAYlxD,KAAKqkC,QAGhDrkC,KAAK+wD,UAAW,GAIpBqB,EAAW9xD,UAAY,IAAIowD,EAS3B,IAAI2B,EAAW,GAOXC,EAAiB,CACjBC,EAAK,CAAC,OACNC,EAAK,CAAC,OACNC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,OACNC,GAAK,CAAC,MAAQ,MAAQ,OACtBC,GAAK,CAAC,MAAQ,MAAQ,OACtBC,GAAK,CAAC,MAAQ,MAAQ,OACtBC,GAAK,CAAC,OACNC,GAAK,CAAC,OACNC,GAAK,CAAC,OACNC,GAAK,CAAC,IACNC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,MAAQ,MAAQ,MAAQ,OAC9BC,GAAK,CAAC,OACNC,GAAK,CAAC,OACNC,GAAK,KACLC,GAAK,CAAC,OACNC,GAAK,CAAC,OACNC,GAAK,CAAC,OACNC,GAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,OACNC,IAAK,CAAC,QAQNC,EAAuB,CACvB,MAAS,CAAC,OACV,cAAiB,CAAC,OAClB,aAAgB,CAAC,OACjB,IAAO,CAAC,MAAQ,MAAQ,OACxB,KAAQ,CAAC,OACT,SAAY,CAAC,OACb,UAAa,CAAC,OACd,UAAa,CAAC,OACd,WAAc,CAAC,OACf,QAAW,CAAC,OACZ,UAAa,CAAC,OACd,SAAY,CAAC,OACb,OAAU,CAAC,OACX,MAAS,CAAC,OACV,QAAW,CAAC,OACZ,KAAQ,CAAC,OACT,MAAS,CAAC,OACV,MAAS,CAAC,OACV,UAAa,CAAC,OACd,QAAW,CAAC,OACZ,QAAW,CAAC,MAAQ,MAAQ,OAC5B,YAAe,CAAC,OAChB,OAAU,CAAC,OACX,KAAQ,CAAC,OACT,IAAO,CAAC,OACR,MAAS,CAAC,OACV,SAAY,CAAC,OACb,OAAU,CAAC,OACX,QAAW,CAAC,OACZ,MAAS,CAAC,OACV,MAAS,CAAC,OACV,GAAM,CAAC,OACP,GAAM,CAAC,OACP,GAAM,CAAC,OACP,GAAM,CAAC,OACP,GAAM,CAAC,OACP,GAAM,CAAC,OACP,GAAM,CAAC,OACP,GAAM,CAAC,OACP,GAAM,CAAC,OACP,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,IAAO,CAAC,OACR,KAAQ,CAAC,OACT,WAAc,CAAC,OACf,UAAa,CAAC,OACd,UAAa,CAAC,OACd,cAAiB,CAAC,OAClB,UAAa,KACb,UAAa,KACb,WAAc,CAAC,OACf,QAAW,CAAC,OACZ,UAAa,CAAC,OACd,KAAQ,CAAC,OACT,SAAY,CAAC,OACb,iBAAoB,CAAC,OACrB,KAAQ,CAAC,OACT,MAAS,CAAC,MAAQ,MAAQ,OAC1B,OAAU,CAAC,OACX,iBAAoB,CAAC,OACrB,iBAAoB,CAAC,OACrB,eAAkB,CAAC,OACnB,UAAa,CAAC,OACd,SAAY,CAAC,OACb,UAAa,CAAC,OACd,SAAY,CAAC,OACb,KAAQ,CAAC,OACT,KAAQ,CAAC,MAAQ,MAAQ,OACzB,WAAc,CAAC,OACf,QAAW,CAAC,OACZ,SAAY,CAAC,OACb,OAAU,CAAC,OACX,MAAS,CAAC,OACV,KAAQ,CAAC,OACT,kBAAqB,CAAC,OACtB,YAAe,CAAC,OAChB,KAAQ,CAAC,OACT,MAAS,CAAC,OACV,gBAAmB,KACnB,OAAU,CAAC,OACX,OAAU,CAAC,OACX,UAAa,CAAC,OACd,MAAS,CAAC,MAAQ,MAAQ,OAC1B,gBAAmB,CAAC,OACpB,MAAS,CAAC,MAAQ,MAAQ,OAC1B,IAAO,CAAC,OACR,oBAAuB,CAAC,OACxB,iBAAoB,CAAC,OACrB,oBAAuB,CAAC,OACxB,qBAAwB,CAAC,OACzB,kBAAqB,CAAC,OACtB,GAAM,CAAC,OACP,KAAQ,CAAC,OACT,IAAO,CAAC,OACR,QAAW,CAAC,OACZ,eAAkB,CAAC,QAOnBC,EAAY,CACZ,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,EACR,OAAQ,GAMZ91D,KAAKuxC,UAAY,IAAIlQ,EAAU6C,SAAS6xB,cAOxC/1D,KAAKwjD,QAAU,GAaf,IAAIwS,EAAoB,GAUpBC,EAAsB,GAStBjE,EAAe,GAMfkE,EAAqB,KAOrBC,EAAsB,KAgBtBC,EAAa,SAAoBC,EAASjF,GAE1C,OAAKiF,EAGEA,EAAQjF,IAAaiF,EAAQ,GAFzB,MAgBX7E,EAAc,SAAqBntB,GAGnC,OAAQA,GAAU,GAAQA,GAAU,KACH,YAAhB,WAATA,IAIZ,SAASgtB,EAA2BiF,EAAYlF,EAAUmF,GAEtD,IAAKD,EACD,OAAO,KAEX,IAAIE,EAGAC,EAAwBH,EAAW19C,QAAQ,MAC/C,GAAI69C,GAAyB,EAAG,CAC5B,IAAI3rC,EAAMwrC,EAAWI,UAAUD,EAAsB,GACrDD,EAAiBn0D,OAAOghB,aAAa9X,SAASuf,EAAK,SAIlD,IAA0B,IAAtBwrC,EAAWj2D,QAA6B,IAAb+wD,EAKhC,OAAOgF,EAAWP,EAAqBS,GAAalF,GAJpDoF,EAAiBF,GAOL,IAAZC,EACAC,EAAiBA,EAAeG,eACf,IAAZJ,IACLC,EAAiBA,EAAe/1B,eAGpC,IAAIm2B,EAAYJ,EAAe14C,WAAW,GAC1C,OAAOq0C,EAAqByE,GAIhC,SAASC,EAAmBD,GACxB,OAAOA,GAAa,IAASA,GAAa,KAAQA,GAAa,IAGnE,SAASzE,EAAqByE,GAG1B,OAAIC,EAAmBD,GAAmB,MAASA,EAG/CA,GAAa,GAAUA,GAAa,IAC7BA,EAGPA,GAAa,KAAUA,GAAa,QAC7B,SAAaA,EAEjB,KAIX,SAAStF,EAAoBJ,EAASE,GAClC,OAAOgF,EAAW9D,EAAepB,GAAUE,GAqB/C,IAAIK,EAAsB,SAA6BP,EAASC,GAG5D,IAAKA,EACD,OAAO,EAGX,IAAIsF,EAAwBtF,EAAcv4C,QAAQ,MAClD,IAA+B,IAA3B69C,EACA,OAAO,EAIX,IAAIG,EAAYrrD,SAAS4lD,EAAcuF,UAAUD,EAAsB,GAAI,IAC3E,OAAIvF,IAAY0F,IAKX1F,GAAW,IAAMA,GAAW,IAAQA,GAAW,IAAMA,GAAW,KAiBzElxD,KAAK82D,MAAQ,SAASzyB,GAGlB,GAAe,OAAXA,EAAJ,CAGA,IAAK4rB,EAAczM,QAAQnf,KAGvB4rB,EAAczM,QAAQnf,IAAU,EAG5B4rB,EAAcxrB,WAAW,CACzB,IAAIz2B,EAASiiD,EAAcxrB,UAAUJ,GAgBrC,OAfA4xB,EAAoB5xB,GAAUr2B,EAG9BiD,OAAO7F,aAAa8qD,GACpBjlD,OAAO+3C,cAAcmN,GAGhBL,EAAUzxB,KACX6xB,EAAqBjlD,OAAOzF,YAAW,WACnC2qD,EAAsBllD,OAAOg4C,aAAY,WACrCgH,EAAcvrB,QAAQL,GACtB4rB,EAAcxrB,UAAUJ,KACzB,MACJ,MAEAr2B,EAKf,OAAOioD,EAAoB5xB,KAAW,IAS1CrkC,KAAK+2D,QAAU,SAAS1yB,GAGhB4rB,EAAczM,QAAQnf,YAGf4rB,EAAczM,QAAQnf,UACtB2xB,EAAkB3xB,GAGzBpzB,OAAO7F,aAAa8qD,GACpBjlD,OAAO+3C,cAAcmN,GAGN,OAAX9xB,GAAmB4rB,EAAcvrB,SACjCurB,EAAcvrB,QAAQL,KAalCrkC,KAAKwC,KAAO,SAAcX,GAGtB,IAAK,IAAInB,EAAI,EAAGA,EAAImB,EAAIxB,OAAQK,IAAK,CAGjC,IAAIk2D,EAAY/0D,EAAIm1D,YAAcn1D,EAAIm1D,YAAYt2D,GAAKmB,EAAIic,WAAWpd,GAClE2jC,EAAS8tB,EAAqByE,GAGlC3G,EAAc6G,MAAMzyB,GACpB4rB,EAAc8G,QAAQ1yB,KAU9BrkC,KAAK+jB,MAAQ,WAGT,IAAK,IAAIsgB,KAAU4rB,EAAczM,QAC7ByM,EAAc8G,QAAQxrD,SAAS84B,IAGnCguB,EAAW,IAwBf,IAAI4E,EAAsB,SAA6BC,EACnDC,EAAYd,EAASe,GAErB,IAAI12D,EAOJ,IAA0C,IAAtC21D,EAAQz9C,QAAQw+C,EAAS/yB,QAI7B,GAAI6yB,IAA8B,IAAfC,EACf,IAAKz2D,EAAI,EAAGA,EAAI21D,EAAQh2D,OAAQK,IAC5BuvD,EAAc8G,QAAQV,EAAQ31D,SAKjC,IAAKw2D,GAAeC,EAAY,CAIjC,IAAKz2D,EAAI,EAAGA,EAAI21D,EAAQh2D,OAAQK,IAC5B,GAAIuvD,EAAczM,QAAQ6S,EAAQ31D,IAC9B,OAQR,IAAI2jC,EAASgyB,EAAQ,GACjBe,EAAS/yB,SACT2xB,EAAkB3xB,IAAU,GAEhC4rB,EAAc6G,MAAMzyB,KAmBxBgzB,EAAqB,SAA4BxqD,EAAGuqD,GAGpD,IAAI51B,EAAQH,EAAU6C,SAAS6xB,cAAcuB,kBAAkBzqD,GAG/DoqD,EAAoBhH,EAAc1e,UAAUugB,IAAKtwB,EAAMswB,IAAK,CACxD,MACA,MACA,OACDsF,GAGHH,EAAoBhH,EAAc1e,UAAUnoC,MAAOo4B,EAAMp4B,MAAO,CAC5D,MACA,OACDguD,GAGHH,EAAoBhH,EAAc1e,UAAUqgB,KAAMpwB,EAAMowB,KAAM,CAC1D,MACA,OACDwF,GAGHH,EAAoBhH,EAAc1e,UAAUmgB,KAAMlwB,EAAMkwB,KAAM,CAC1D,MACA,OACD0F,GAGHH,EAAoBhH,EAAc1e,UAAUwgB,MAAOvwB,EAAMuwB,MAAO,CAC5D,MACA,OACDqF,GAGHnH,EAAc1e,UAAY/P,GAc1B+1B,EAAkB,WAElB,IAAK,IAAIlzB,KAAU4rB,EAAczM,QAC7B,IAAKwS,EAAkB3xB,GACnB,OAAO,EAGf,OAAO,GAaX,SAASmzB,IAGL,IAKIC,EALAC,EAAgBC,IACpB,IAAKD,EACD,OAAO,EAIX,GACID,EAAaC,EACbA,EAAgBC,UACO,OAAlBD,GAOT,OAHIH,KACAtH,EAAclsC,QAEX0zC,EAAW3G,iBAWtB,IAAI8G,EAA0B,SAAiCvzB,GAGtD4rB,EAAc1e,UAAUqgB,MAAS3B,EAAc1e,UAAUugB,MAI1DztB,GAAU,IAAUA,GAAU,IAI9BA,GAAU,IAAUA,GAAU,MAI9BA,GAAU,KAAkC,YAAhB,WAATA,MACnB4rB,EAAc8G,QAAQ,OACtB9G,EAAc8G,QAAQ,OACtB9G,EAAc8G,QAAQ,OACtB9G,EAAc8G,QAAQ,UAgB1BY,EAAkB,WAGlB,IAAIxuC,EAAQkpC,EAAS,GACrB,IAAKlpC,EACD,OAAO,KAGX,KAAIA,aAAiB8nC,GAqDhB,IAAI9nC,aAAiBipC,IAAe/B,EAAOC,gBAAiB,CAGzDjsB,EAASlb,EAAMkb,OACnB,OAAIA,GACA4rB,EAAc8G,QAAQ1yB,UACf2tB,EAAa7oC,EAAM+nC,SAC1B/nC,EAAM2nC,kBAAmB,EAStBuB,EAASjpD,UAJZ6mD,EAAclsC,QACPoF,GAUX,OAAOkpC,EAASjpD,QA1EhB,IAAIi7B,EAAS,KACTwzB,EAAkB,GAuBtB,GApBI1uC,EAAM4nC,UACN1sB,EAASlb,EAAMkb,OACfwzB,EAAkBxF,EAASrtC,OAAO,EAAG,IAIhCqtC,EAAS,aAAcJ,GAC5B5tB,EAASguB,EAAS,GAAGhuB,OACrBwzB,EAAkBxF,EAASrtC,OAAO,EAAG,IAMhCqtC,EAAS,KACdhuB,EAASlb,EAAMkb,OACfwzB,EAAkBxF,EAASrtC,OAAO,EAAG,IAIrC6yC,EAAgBx3D,OAAS,EAAG,CAE5B,GAAIgkC,EAAQ,CAGRuzB,EAAwBvzB,GACxB,IAAIysB,GAAoBb,EAAc6G,MAAMzyB,GAC5C2tB,EAAa7oC,EAAM+nC,SAAW7sB,EAIzBlb,EAAMooC,eACPtB,EAAc8G,QAAQ1yB,GAG1B,IAAK,IAAI3jC,EAAE,EAAGA,EAAEm3D,EAAgBx3D,OAAQK,IACpCm3D,EAAgBn3D,GAAGowD,iBAAmBA,EAI9C,OAAO3nC,EAiCf,OAAO,MAkBP2uC,EAAmB,SAA0BjrD,GAG7C,MAAI,aAAcA,EACPA,EAAEukD,SAGT,gBAAiBvkD,EACVA,EAAEkrD,YAGN,GAgBPC,EAAY,SAAmBnrD,GAG/B,OAAIA,EAAEujD,KAINvjD,EAAEujD,IAAgB,GACX,IAcXpwD,KAAKmkC,SAAW,SAAkB8nB,GAG9BA,EAAQgB,iBAAiB,WAAW,SAASpgD,GAGzC,GAAKojD,EAAcxrB,WAGduzB,EAAUnrD,GAAf,CAEA,IAAIqkD,EACAjgD,OAAOgnD,MAAO/G,EAAUjgD,OAAOgnD,MAAM/G,QAChCrkD,EAAEqrD,QAAOhH,EAAUrkD,EAAEqrD,OAG9B,IAAIC,EAAe,IAAIlH,EAAaC,EAASrkD,EAAEskD,cAAetkD,EAAElE,IAAKmvD,EAAiBjrD,IACtFwqD,EAAmBxqD,EAAGsrD,GAIN,MAAZjH,IAIJmB,EAAStqD,KAAKowD,GAGVX,KACA3qD,EAAEurD,sBAEP,GAGHnM,EAAQgB,iBAAiB,YAAY,SAASpgD,GAG1C,IAAKojD,EAAcxrB,WAAcwrB,EAAcvrB,UAG1CszB,EAAUnrD,GAAf,CAEA,IAAIqlD,EACAjhD,OAAOgnD,MAAO/F,EAAWjhD,OAAOgnD,MAAM/G,QACjCrkD,EAAEqrD,QAAOhG,EAAWrlD,EAAEqrD,OAG/B,IAAIG,EAAgB,IAAIpG,EAAcC,GACtCmF,EAAmBxqD,EAAGwrD,GAGtBhG,EAAStqD,KAAKswD,GAGVb,KACA3qD,EAAEurD,qBAEP,GAGHnM,EAAQgB,iBAAiB,SAAS,SAASpgD,GAGvC,GAAKojD,EAAcvrB,SAGdszB,EAAUnrD,GAAf,CAIA,IAAIqkD,EAFJrkD,EAAEurD,iBAGEnnD,OAAOgnD,MAAO/G,EAAUjgD,OAAOgnD,MAAM/G,QAChCrkD,EAAEqrD,QAAOhH,EAAUrkD,EAAEqrD,OAG9B,IAAII,EAAa,IAAIlG,EAAWlB,EAASrkD,EAAEskD,cAAetkD,EAAElE,IAAKmvD,EAAiBjrD,IAClFwqD,EAAmBxqD,EAAGyrD,GAGtBjG,EAAStqD,KAAKuwD,GACdd,QAED,GAWH,IAAIe,EAAc,SAAqB1rD,IAG9BojD,EAAcxrB,WAAcwrB,EAAcvrB,UAG1CszB,EAAUnrD,IAGXA,EAAE9M,OAAS8M,EAAEqiD,cACbjD,EAAQuM,oBAAoB,iBAAkBC,GAAmB,GACjExI,EAAcztD,KAAKqK,EAAE9M,QAezB04D,EAAoB,SAA2B5rD,IAG1CojD,EAAcxrB,WAAcwrB,EAAcvrB,UAG1CszB,EAAUnrD,IAGXA,EAAE9M,OACFksD,EAAQuM,oBAAoB,QAASD,GAAa,GAClDtI,EAAcztD,KAAKqK,EAAE9M,QAM7BksD,EAAQgB,iBAAiB,QAASsL,GAAa,GAC/CtM,EAAQgB,iBAAiB,iBAAkBwL,GAAmB,IAK9DxM,GACAgE,EAAc9rB,SAAS8nB,IAW/B5qB,EAAU6C,SAASisB,QAAU,EAM7B9uB,EAAU6C,SAAS6xB,cAAgB,WAM/B/1D,KAAKoJ,OAAQ,EAMbpJ,KAAK4xD,MAAO,EAMZ5xD,KAAK8xD,KAAM,EAMX9xD,KAAK0xD,MAAO,EAMZ1xD,KAAK+xD,OAAQ,GAWjB1wB,EAAU6C,SAAS6xB,cAAcuB,kBAAoB,SAASzqD,GAE1D,IAAI20B,EAAQ,IAAIH,EAAU6C,SAAS6xB,cAgBnC,OAbAv0B,EAAMp4B,MAAQyD,EAAE6rD,SAChBl3B,EAAMowB,KAAQ/kD,EAAE8rD,QAChBn3B,EAAMswB,IAAQjlD,EAAE+rD,OAChBp3B,EAAMkwB,KAAQ7kD,EAAEgsD,QAGZhsD,EAAEisD,mBACFt3B,EAAMuwB,MAAQllD,EAAEisD,iBAAiB,OACnBjsD,EAAEisD,iBAAiB,UACnBjsD,EAAEisD,iBAAiB,UACnBjsD,EAAEisD,iBAAiB,QAG9Bt3B,GAuBPH,EAAYA,GAAa,GAiB7BA,EAAU4hB,MAAQ,SAAS7uC,EAAOkY,GAM9B,IAAIg2B,EAAQtiD,KAWR+4D,EAAqB,GAMrB3sC,EAAS/c,SAASmd,cAAc,UAMhCutB,EAAU3tB,EAAOM,WAAW,MAChCqtB,EAAQ7nC,OAUR,IAAIlK,GAAQ,EAORgxD,GAAa,EAWbC,EAAY,EAOZC,EAAqB,CAErB,EAAK,iBACL,EAAK,kBAEL,EAAK,YAEL,EAAK,cAEL,EAAK,aACL,EAAK,mBACL,GAAK,MACL,GAAK,mBACL,GAAK,OAEL,GAAK,cACL,GAAK,WAcL3qB,EAAS,SAAgB4qB,EAAUC,GAGnCD,EAAWA,GAAY,EACvBC,EAAYA,GAAa,EAGzB,IAAIC,EAAepvD,KAAKuY,KAAK22C,EAAYJ,GAAsBA,EAC3DO,EAAervD,KAAKuY,KAAK42C,EAAYL,GAAsBA,EAG/D,GAAI3sC,EAAOhY,QAAUilD,GAAejtC,EAAOE,SAAWgtC,EAAc,CAGhE,IAAIC,EAAU,KACd,IAAKvxD,GAA0B,IAAjBokB,EAAOhY,OAAiC,IAAlBgY,EAAOE,OAAc,CAGrDitC,EAAUlqD,SAASmd,cAAc,UACjC+sC,EAAQnlD,MAAQnK,KAAKD,IAAIs4C,EAAMluC,MAAO+kD,GACtCI,EAAQjtC,OAASriB,KAAKD,IAAIs4C,EAAMh2B,OAAQ8sC,GAExC,IAAII,EAAiBD,EAAQ7sC,WAAW,MAGxC8sC,EAAenN,UAAUjgC,EACjB,EAAG,EAAGmtC,EAAQnlD,MAAOmlD,EAAQjtC,OAC7B,EAAG,EAAGitC,EAAQnlD,MAAOmlD,EAAQjtC,QAKzC,IAAImtC,EAAwB1f,EAAQ2f,yBAGpCttC,EAAOhY,MAAQilD,EACfjtC,EAAOE,OAASgtC,EAGZC,GACAxf,EAAQsS,UAAUkN,EACd,EAAG,EAAGA,EAAQnlD,MAAOmlD,EAAQjtC,OAC7B,EAAG,EAAGitC,EAAQnlD,MAAOmlD,EAAQjtC,QAGrCytB,EAAQ2f,yBAA2BD,EAGnCR,EAAY,EACZlf,EAAQ7nC,YAMRowC,EAAMv+B,QAGVu+B,EAAMluC,MAAQ+kD,EACd7W,EAAMh2B,OAAS8sC,GAoBnB,SAASO,EAAQpwD,EAAGC,EAAG6+C,EAAGhiD,GAGtB,IAIIuzD,EAOAC,EAXAC,EAAWzR,EAAI9+C,EACfwwD,EAAW1zD,EAAImD,EAKfowD,EADAE,EAAWxX,EAAMluC,MACH0lD,EAEAxX,EAAMluC,MAKpBylD,EADAE,EAAWzX,EAAMh2B,OACFytC,EAEAzX,EAAMh2B,OAGzBg2B,EAAM/T,OAAOqrB,EAAaC,GAuB9B75D,KAAKyrD,UAAW,EAMhBzrD,KAAKoU,MAAQA,EAMbpU,KAAKssB,OAASA,EAUdtsB,KAAKsuD,UAAY,WACb,OAAOliC,GAYXpsB,KAAKuiD,SAAW,WAGZ,IAAIn2B,EAAS/c,SAASmd,cAAc,UACpCJ,EAAOhY,MAAQkuC,EAAMluC,MACrBgY,EAAOE,OAASg2B,EAAMh2B,OAGtB,IAAIytB,EAAU3tB,EAAOM,WAAW,MAGhC,OAFAqtB,EAAQsS,UAAU/J,EAAMgM,YAAa,EAAG,GAEjCliC,GAYXpsB,KAAKuuC,OAAS,SAAS4qB,EAAUC,GACzBD,IAAa7W,EAAMluC,OAASglD,IAAc9W,EAAMh2B,QAChDiiB,EAAO4qB,EAAUC,IAgBzBp5D,KAAKqsD,UAAY,SAAS9iD,EAAGC,EAAGojB,GACxB01B,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAGojB,EAAMxY,MAAOwY,EAAMN,QACrDytB,EAAQsS,UAAUz/B,EAAOrjB,EAAGC,GAC5BxB,GAAQ,GAwBZhI,KAAK0oD,SAAW,SAASZ,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMxiD,EAAGC,EAAG6jD,GAE7D,IAAI2M,EAAYlS,EAASwG,YAGzB,KAAI1C,GAAQoO,EAAU5lD,OAASy3C,GAAQmO,EAAU1tC,UAG7Cs/B,EAAOE,EAAOkO,EAAU5lD,QACxB03C,EAAOkO,EAAU5lD,MAAQw3C,GAEzBC,EAAOE,EAAOiO,EAAU1tC,SACxBy/B,EAAOiO,EAAU1tC,OAASu/B,GAGjB,IAATC,GAAuB,IAATC,GAAlB,CAEIzJ,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAGsiD,EAAMC,GAOxC,IAJA,IAAIhxC,EAAM+sC,EAASwG,YAAY5hC,WAAW,MAAMutC,aAAarO,EAAMC,EAAMC,EAAMC,GAC3En6B,EAAMmoB,EAAQkgB,aAAa1wD,EAAIC,EAAGsiD,EAAMC,GAGnCrrD,EAAE,EAAGA,EAAEorD,EAAKC,EAAK,EAAGrrD,GAAG,EAAG,CAG/B,IAAIw5D,EAAY,IAAI74B,EAAU4hB,MAAMkX,MAChCp/C,EAAIhb,KAAKW,GACTqa,EAAIhb,KAAKW,EAAE,GACXqa,EAAIhb,KAAKW,EAAE,GACXqa,EAAIhb,KAAKW,EAAE,IAIX05D,EAAY,IAAI/4B,EAAU4hB,MAAMkX,MAChCvoC,EAAI7xB,KAAKW,GACTkxB,EAAI7xB,KAAKW,EAAE,GACXkxB,EAAI7xB,KAAKW,EAAE,GACXkxB,EAAI7xB,KAAKW,EAAE,IAIf2sD,EAAiB6M,EAAWE,GAG5BxoC,EAAI7xB,KAAKW,GAAO05D,EAAUlR,IAC1Bt3B,EAAI7xB,KAAKW,EAAE,GAAK05D,EAAUjR,MAC1Bv3B,EAAI7xB,KAAKW,EAAE,GAAK05D,EAAUhR,KAC1Bx3B,EAAI7xB,KAAKW,EAAE,GAAK05D,EAAUvvC,MAK9BkvB,EAAQhtB,aAAa6E,EAAKroB,EAAGC,GAC7BxB,GAAQ,IAsBZhI,KAAKY,IAAM,SAASknD,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMxiD,EAAGC,GAErD,IAAIwwD,EAAYlS,EAASwG,YAGzB,KAAI1C,GAAQoO,EAAU5lD,OAASy3C,GAAQmO,EAAU1tC,UAG7Cs/B,EAAOE,EAAOkO,EAAU5lD,QACxB03C,EAAOkO,EAAU5lD,MAAQw3C,GAEzBC,EAAOE,EAAOiO,EAAU1tC,SACxBy/B,EAAOiO,EAAU1tC,OAASu/B,GAGjB,IAATC,GAAuB,IAATC,GAAlB,CAEIzJ,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAGsiD,EAAMC,GAGxC,IAAIhxC,EAAM+sC,EAASwG,YAAY5hC,WAAW,MAAMutC,aAAarO,EAAMC,EAAMC,EAAMC,GAC/EhS,EAAQhtB,aAAahS,EAAKxR,EAAGC,GAC7BxB,GAAQ,IAyBZhI,KAAKkxB,KAAO,SAAS42B,EAAU8D,EAAMC,EAAMC,EAAMC,EAAMxiD,EAAGC,GAEtD,IAAIwwD,EAAYlS,EAASwG,YAGrB1C,GAAQoO,EAAU5lD,OAASy3C,GAAQmO,EAAU1tC,SAG7Cs/B,EAAOE,EAAOkO,EAAU5lD,QACxB03C,EAAOkO,EAAU5lD,MAAQw3C,GAEzBC,EAAOE,EAAOiO,EAAU1tC,SACxBy/B,EAAOiO,EAAU1tC,OAASu/B,GAGjB,IAATC,GAAuB,IAATC,IAEdzJ,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAGsiD,EAAMC,GACxChS,EAAQsS,UAAU2N,EAAWpO,EAAMC,EAAMC,EAAMC,EAAMxiD,EAAGC,EAAGsiD,EAAMC,GACjE/jD,GAAQ,KAUZhI,KAAKuoD,OAAS,SAASh/C,EAAGC,GAGlBwvD,IACAjf,EAAQsgB,YACRrB,GAAa,GAGb1W,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAG,EAAG,GACrCuwC,EAAQwO,OAAOh/C,EAAGC,IAUtBxJ,KAAKgoD,OAAS,SAASz+C,EAAGC,GAGlBwvD,IACAjf,EAAQsgB,YACRrB,GAAa,GAGb1W,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAG,EAAG,GACrCuwC,EAAQiO,OAAOz+C,EAAGC,IAiBtBxJ,KAAK8lD,IAAM,SAASv8C,EAAGC,EAAGk8C,EAAQC,EAAYC,EAAUC,GAGhDmT,IACAjf,EAAQsgB,YACRrB,GAAa,GAGb1W,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAG,EAAG,GACrCuwC,EAAQ+L,IAAIv8C,EAAGC,EAAGk8C,EAAQC,EAAYC,EAAUC,IAcpD7lD,KAAK0nD,QAAU,SAASJ,EAAMC,EAAMC,EAAMC,EAAMl+C,EAAGC,GAG3CwvD,IACAjf,EAAQsgB,YACRrB,GAAa,GAGb1W,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAG,EAAG,GACrCuwC,EAAQugB,cAAchT,EAAMC,EAAMC,EAAMC,EAAMl+C,EAAGC,IAQrDxJ,KAAK2F,MAAQ,WACTo0C,EAAQwgB,YACRvB,GAAa,GAajBh5D,KAAKsoD,KAAO,SAAS/+C,EAAGC,EAAG6+C,EAAGhiD,GAGtB2yD,IACAjf,EAAQsgB,YACRrB,GAAa,GAGb1W,EAAMmJ,UAAUkO,EAAQpwD,EAAGC,EAAG6+C,EAAGhiD,GACrC0zC,EAAQuO,KAAK/+C,EAAGC,EAAG6+C,EAAGhiD,IAU1BrG,KAAKumD,KAAO,WAGRxM,EAAQwM,OAGRyS,GAAa,GAoBjBh5D,KAAKknD,YAAc,SAASF,EAAK5+C,EAAM6+C,EAAWj5B,EAAGC,EAAGhlB,EAAGD,GAGvD+wC,EAAQmH,QAAU8F,EAClBjN,EAAQuH,SAAWl5C,EACnB2xC,EAAQygB,UAAYvT,EACpBlN,EAAQ0gB,YAAc,QAAUzsC,EAAI,IAAMC,EAAI,IAAMhlB,EAAI,IAAMD,EAAE,IAAQ,IACxE+wC,EAAQ2gB,SACR1yD,GAAQ,EAGRgxD,GAAa,GAejBh5D,KAAKsmD,UAAY,SAASt4B,EAAGC,EAAGhlB,EAAGD,GAG/B+wC,EAAQ4gB,UAAY,QAAU3sC,EAAI,IAAMC,EAAI,IAAMhlB,EAAI,IAAMD,EAAE,IAAQ,IACtE+wC,EAAQtnB,OACRzqB,GAAQ,EAGRgxD,GAAa,GAmBjBh5D,KAAKioD,YAAc,SAASjB,EAAK5+C,EAAM6+C,EAAWa,GAG9C/N,EAAQmH,QAAU8F,EAClBjN,EAAQuH,SAAWl5C,EACnB2xC,EAAQygB,UAAYvT,EACpBlN,EAAQ0gB,YAAc1gB,EAAQ6gB,cAC1B9S,EAASwG,YACT,UAEJvU,EAAQ2gB,SACR1yD,GAAQ,EAGRgxD,GAAa,GAcjBh5D,KAAK+nD,UAAY,SAASD,GAGtB/N,EAAQ4gB,UAAY5gB,EAAQ6gB,cACxB9S,EAASwG,YACT,UAEJvU,EAAQtnB,OACRzqB,GAAQ,EAGRgxD,GAAa,GAOjBh5D,KAAK+H,KAAO,WAGRgyC,EAAQ7nC,OACR+mD,KAOJj5D,KAAKiI,IAAM,WAGHgxD,EAAY,IACZlf,EAAQ8gB,UACR5B,MASRj5D,KAAK+jB,MAAQ,WAGT,MAAOk1C,EAAY,EACflf,EAAQ8gB,UACR5B,IAIJlf,EAAQ8gB,UACR9gB,EAAQ7nC,OAGR6nC,EAAQsgB,YACRrB,GAAa,GAejBh5D,KAAK4nD,aAAe,SAAS5+C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,GACxCwlB,EAAQ6N,aACJ5+C,EAAGC,EAAG6Q,EACN9S,EAAG6F,EAAG0nB,IAgBdv0B,KAAK4oD,UAAY,SAAS5/C,EAAGC,EAAG6Q,EAAG9S,EAAG6F,EAAG0nB,GACrCwlB,EAAQ6O,UACJ5/C,EAAGC,EAAG6Q,EACN9S,EAAG6F,EAAG0nB,IAiBdv0B,KAAKgjD,eAAiB,SAAS/jB,GAC3B8a,EAAQ2f,yBAA2BR,EAAmBj6B,IAY1Dj/B,KAAKqlD,cAAgB,SAASiI,GAC1BvT,EAAQ+gB,WAAaxN,GAIzB/e,EAAOn6B,EAAOkY,GAKdF,EAAOpmB,MAAMyJ,QAAU,GAO3B4xB,EAAU4hB,MAAM8X,KAAQ,EAKxB15B,EAAU4hB,MAAM+X,KAAQ,EAKxB35B,EAAU4hB,MAAMgY,IAAQ,GAKxB55B,EAAU4hB,MAAMiY,MAAQ,GAKxB75B,EAAU4hB,MAAMkY,KAAQ,GAKxB95B,EAAU4hB,MAAMmY,KAAQ,GAQxB/5B,EAAU4hB,MAAMoY,IAAQ,EAQxBh6B,EAAU4hB,MAAMqY,GAAQ,EAQxBj6B,EAAU4hB,MAAMsY,IAAQ,EAQxBl6B,EAAU4hB,MAAMuY,MAAQ,EAQxBn6B,EAAU4hB,MAAMC,IAAQ,GAaxB7hB,EAAU4hB,MAAMkX,MAAQ,SAASnsC,EAAGC,EAAGhlB,EAAGD,GAMtChJ,KAAKkpD,IAAQl7B,EAMbhuB,KAAKmpD,MAAQl7B,EAMbjuB,KAAKopD,KAAQngD,EAMbjJ,KAAK6qB,MAAQ7hB,GAuBbq4B,EAAYA,GAAa,GAW7BA,EAAUmC,MAAQ,SAASyoB,GAMvB,IAAIwP,EAAaz7D,KAMjBA,KAAK07D,oBAAsB,EAM3B17D,KAAK27D,gBAAkB,GAKvB37D,KAAK47D,gBAAkB,GAKvB57D,KAAK67D,gBAAyC,GAAvB77D,KAAK47D,gBAS5B57D,KAAK+gD,aAAe,IAAI1f,EAAUmC,MAAM9B,MACpC,EAAG,GACH,GAAO,GAAO,GAAO,GAAO,GAUnC1hC,KAAK2jC,YAAc,KASnB3jC,KAAK4jC,UAAY,KASjB5jC,KAAK6jC,YAAc,KAQnB7jC,KAAK87D,WAAa,KAOf,IAAIC,EAAe,EASfC,EAAe,EAEnB,SAASC,EAAYpvD,GACjBA,EAAEqvD,kBACErvD,EAAEurD,gBAAgBvrD,EAAEurD,iBACxBvrD,EAAEmF,aAAc,EAmHpB,SAASmqD,IAA6BJ,EAAeN,EAAWC,oBAOhE,SAASU,EAAmBvvD,GAGxB,IAAIyE,EAAQzE,EAAEwvD,SAAWxvD,EAAEyvD,cAAgBzvD,EAAE0vD,WAwB7C,GApBIjrD,EAGoB,IAAhBzE,EAAE2vD,UACFlrD,EAAQzE,EAAEwvD,OAASZ,EAAWG,gBAGT,IAAhB/uD,EAAE2vD,YACPlrD,EAAQzE,EAAEwvD,OAASZ,EAAWI,iBAMlCvqD,EAAQzE,EAAE4vD,OAAShB,EAAWG,gBAGlCI,GAAgB1qD,EAGZ0qD,IAAiBP,EAAWE,gBAAiB,CAG7C,GAEQF,EAAW93B,cACX83B,EAAW1a,aAAanwC,IAAK,EAC7B6qD,EAAW93B,YAAY83B,EAAW1a,eAGlC0a,EAAW73B,YACX63B,EAAW1a,aAAanwC,IAAK,EAC7B6qD,EAAW73B,UAAU63B,EAAW1a,eAGpCib,GAAgBP,EAAWE,sBAEtBK,IAAiBP,EAAWE,iBAGrCK,EAAe,EAKnB,GAAIA,GAAgBP,EAAWE,gBAAiB,CAG5C,GAEQF,EAAW93B,cACX83B,EAAW1a,aAAalwC,MAAO,EAC/B4qD,EAAW93B,YAAY83B,EAAW1a,eAGlC0a,EAAW73B,YACX63B,EAAW1a,aAAalwC,MAAO,EAC/B4qD,EAAW73B,UAAU63B,EAAW1a,eAGpCib,GAAgBP,EAAWE,sBAEtBK,GAAgBP,EAAWE,iBAGpCK,EAAe,EAInBC,EAAYpvD,GAlMhBo/C,EAAQgB,iBAAiB,eAAe,SAASpgD,GAC7CovD,EAAYpvD,MACb,GAEHo/C,EAAQgB,iBAAiB,aAAa,SAASpgD,GAE3CovD,EAAYpvD,GAGRkvD,EACAA,KAIJN,EAAW1a,aAAa2b,mBAAmBzQ,EAASp/C,EAAE8vD,QAAS9vD,EAAE+vD,SAE7DnB,EAAW53B,aACX43B,EAAW53B,YAAY43B,EAAW1a,kBAEvC,GAEHkL,EAAQgB,iBAAiB,aAAa,SAASpgD,GAK3C,GAHAovD,EAAYpvD,IAGRkvD,EAAJ,CAGA,OAAQlvD,EAAEgwD,QACN,KAAK,EACDpB,EAAW1a,aAAavY,MAAO,EAC/B,MACJ,KAAK,EACDizB,EAAW1a,aAAa6C,QAAS,EACjC,MACJ,KAAK,EACD6X,EAAW1a,aAAa96B,OAAQ,EAChC,MAGJw1C,EAAW93B,aACX83B,EAAW93B,YAAY83B,EAAW1a,kBAEvC,GAEHkL,EAAQgB,iBAAiB,WAAW,SAASpgD,GAKzC,GAHAovD,EAAYpvD,IAGRkvD,EAAJ,CAGA,OAAQlvD,EAAEgwD,QACN,KAAK,EACDpB,EAAW1a,aAAavY,MAAO,EAC/B,MACJ,KAAK,EACDizB,EAAW1a,aAAa6C,QAAS,EACjC,MACJ,KAAK,EACD6X,EAAW1a,aAAa96B,OAAQ,EAChC,MAGJw1C,EAAW73B,WACX63B,EAAW73B,UAAU63B,EAAW1a,kBAErC,GAEHkL,EAAQgB,iBAAiB,YAAY,SAASpgD,GAGrCA,IAAGA,EAAIoE,OAAOgnD,OAGnB,IAAI9tD,EAAS0C,EAAEiwD,eAAiBjwD,EAAEkwD,UAClC,MAAO5yD,EAAQ,CACX,GAAIA,IAAW8hD,EACX,OACJ9hD,EAASA,EAAO+hD,WAGpB+P,EAAYpvD,IAGR4uD,EAAW1a,aAAavY,MACrBizB,EAAW1a,aAAa6C,QACxB6X,EAAW1a,aAAa96B,SAE3Bw1C,EAAW1a,aAAavY,MAAO,EAC/BizB,EAAW1a,aAAa6C,QAAS,EACjC6X,EAAW1a,aAAa96B,OAAQ,EAE5Bw1C,EAAW73B,WACX63B,EAAW73B,UAAU63B,EAAW1a,eAIpC0a,EAAWK,YACXL,EAAWK,gBAEhB,GAGH7P,EAAQgB,iBAAiB,eAAe,SAASpgD,GAC7CovD,EAAYpvD,MACb,GAKHo/C,EAAQgB,iBAAiB,YAAckP,GAA0B,GACjElQ,EAAQgB,iBAAiB,aAAckP,GAA0B,GACjElQ,EAAQgB,iBAAiB,WAAckP,GAA0B,GAmFjElQ,EAAQgB,iBAAiB,iBAAkBmP,GAAoB,GAC/DnQ,EAAQgB,iBAAiB,aAAkBmP,GAAoB,GAC/DnQ,EAAQgB,iBAAiB,QAAkBmP,GAAoB,GAS/D,IAAIY,EAAwB,WAExB,IAAItO,EAAMr/C,SAASmd,cAAc,OAGjC,KAAM,WAAYkiC,EAAI1oD,OAClB,OAAO,EAEX,IAEI0oD,EAAI1oD,MAAMkkD,OAAS,wJAMvB,MAAOr9C,GACH,OAAO,EAIX,MAAO,4BAA4B/K,KAAK4sD,EAAI1oD,MAAMkkD,QAAU,IArBpC,GAyC5BlqD,KAAKqnD,UAAY,SAASj7B,EAAQ7iB,EAAGC,GAGjC,GAAIwzD,EAAuB,CACvB,IAAIC,EAAU7wC,EAAO7R,UAAU,aAE/B,OADA0xC,EAAQjmD,MAAMkkD,OAAS,OAAS+S,EAAU,KAAO1zD,EAAI,IAAMC,EAAI,UACxD,EAIX,OAAO,IAoBf63B,EAAUmC,MAAM9B,MAAQ,SAASn4B,EAAGC,EAAGg/B,EAAMob,EAAQ39B,EAAOrV,EAAIC,GAM5D,IAAIqsD,EAAal9D,KAMjBA,KAAKuJ,EAAIA,EAMTvJ,KAAKwJ,EAAIA,EAMTxJ,KAAKwoC,KAAOA,EAMZxoC,KAAK4jD,OAASA,EAMd5jD,KAAKimB,MAAQA,EAQbjmB,KAAK4Q,GAAKA,EAQV5Q,KAAK6Q,KAAOA,EAaZ7Q,KAAK08D,mBAAqB,SAASzQ,EAAS0Q,EAASC,GAEjDM,EAAW3zD,EAAIozD,EAAU1Q,EAAQkR,WACjCD,EAAW1zD,EAAIozD,EAAU3Q,EAAQmR,UAGjC,IAAI/sD,EAAS47C,EAAQoR,aACrB,MAAOhtD,GAAYA,IAAWhB,SAAS20B,KACnCk5B,EAAW3zD,GAAK8G,EAAO8sD,WAAa9sD,EAAOitD,WAC3CJ,EAAW1zD,GAAK6G,EAAO+sD,UAAa/sD,EAAOktD,UAE3CltD,EAASA,EAAOgtD,aAKpB,GAAIhtD,EAAQ,CACR,IAAImtD,EAAqBnuD,SAAS20B,KAAKs5B,YAAcjuD,SAASouD,gBAAgBH,WAC1EI,EAAoBruD,SAAS20B,KAAKu5B,WAAaluD,SAASouD,gBAAgBF,UAE5EL,EAAW3zD,GAAK8G,EAAO8sD,WAAaK,EACpCN,EAAW1zD,GAAK6G,EAAO+sD,UAAaM,KAgBhDr8B,EAAUmC,MAAMm6B,SAAW,SAAS1R,GAMhC,IAAI2R,EAAgB59D,KAMpBA,KAAK27D,gBAAkB,IAAM1qD,OAAO4sD,kBAAoB,GAMxD79D,KAAK89D,qBAAuB,IAM5B99D,KAAK+9D,mBAAqB,IAAM9sD,OAAO4sD,kBAAoB,GAS3D79D,KAAK+gD,aAAe,IAAI1f,EAAUmC,MAAM9B,MACpC,EAAG,GACH,GAAO,GAAO,GAAO,GAAO,GAYnC1hC,KAAK2jC,YAAc,KAWnB3jC,KAAK4jC,UAAY,KASjB5jC,KAAK6jC,YAAc,KAEhB,IAAIm6B,EAAc,EACdC,EAAe,EACfC,EAAe,EACfC,EAAkB,EAClBC,EAAe,EAEfC,EAAgB,CAChBjd,EAAG,OACHC,EAAG,QACHid,EAAG,UAGHC,GAAsB,EACtBC,EAAwB,KAE5BvS,EAAQgB,iBAAiB,YAAY,SAASpgD,GAK1C,GAHAA,EAAEurD,iBAGEmG,GAA4C,IAArB1xD,EAAE4xD,QAAQp+D,OAAc,CAE/C,IAAIq+D,GAAO,IAAI9N,MAAOC,UAGlBgM,EAASwB,EAAcL,GAGvBJ,EAAc7c,aAAa8b,KAG3Be,EAAc7c,aAAa8b,IAAU,EACjCe,EAAch6B,WACdg6B,EAAch6B,UAAUg6B,EAAc7c,cAGtCyd,IACAvtD,OAAO7F,aAAaozD,GACpBA,EAAwB,OAM5BE,EAAOP,GAAmBP,EAAcE,sBACjCM,EAAeR,EAAcG,qBAGpCH,EAAc7c,aAAa8b,IAAU,EACjCe,EAAcj6B,aACdi6B,EAAcj6B,YAAYi6B,EAAc7c,cAI5Cyd,EAAwBvtD,OAAOzF,YAAW,WAGtCoyD,EAAc7c,aAAa8b,IAAU,EACjCe,EAAch6B,WACdg6B,EAAch6B,UAAUg6B,EAAc7c,cAG1Cwd,GAAsB,IAEvBX,EAAcE,uBAKhBU,IACDD,GAAsB,OAI/B,GAEHtS,EAAQgB,iBAAiB,cAAc,SAASpgD,GAe5C,GAbAA,EAAEurD,iBAGF4F,EAAc/zD,KAAKD,IAAI6C,EAAE4xD,QAAQp+D,OAAQ,GAGrCm+D,IACAvtD,OAAO7F,aAAaozD,GACpBA,EAAwB,OAKvBD,EAAqB,CAGtBA,GAAsB,EAGtB,IAAII,EAAiB9xD,EAAE4xD,QAAQ,GAC/BR,EAAeU,EAAehC,QAC9BuB,EAAeS,EAAe/B,QAC9BuB,GAAkB,IAAIvN,MAAOC,UAC7BuN,EAAe,MAIpB,GAEHnS,EAAQgB,iBAAiB,aAAa,SAASpgD,GAE3CA,EAAEurD,iBAGF,IAAIwG,EAAQ/xD,EAAE4xD,QAAQ,GAClBI,EAAUD,EAAMjC,QAAUsB,EAC1Ba,EAAUF,EAAMhC,QAAUsB,EAM9B,GAHAE,GAAgBn0D,KAAKqzB,IAAIuhC,GAAW50D,KAAKqzB,IAAIwhC,GAGzB,IAAhBd,EAAmB,CAGnB,IAAIe,EAAWX,IAAgB,IAAIxN,MAAOC,UAAYsN,GAGlDvkD,EAAQ,EAAImlD,EAGhBnB,EAAc7c,aAAax3C,GAAKs1D,EAAQjlD,EACxCgkD,EAAc7c,aAAav3C,GAAKs1D,EAAQllD,EAIpCgkD,EAAc7c,aAAax3C,EAAI,EAC/Bq0D,EAAc7c,aAAax3C,EAAI,EAC1Bq0D,EAAc7c,aAAax3C,GAAK0iD,EAAQ+S,cAC7CpB,EAAc7c,aAAax3C,EAAI0iD,EAAQ+S,YAAc,GAErDpB,EAAc7c,aAAav3C,EAAI,EAC/Bo0D,EAAc7c,aAAav3C,EAAI,EAC1Bo0D,EAAc7c,aAAav3C,GAAKyiD,EAAQgT,eAC7CrB,EAAc7c,aAAav3C,EAAIyiD,EAAQgT,aAAe,GAGtDrB,EAAc/5B,aACd+5B,EAAc/5B,YAAY+5B,EAAc7c,cAG5Ckd,EAAeW,EAAMjC,QACrBuB,EAAeU,EAAMhC,aAKpB,GAAoB,IAAhBoB,EAAmB,CAMpB,IAAInB,EAHR,GAAI5yD,KAAKqzB,IAAIwhC,IAAYlB,EAAcjC,gBAIlBkB,EAAbiC,EAAU,EAAY,OACA,KAG1BlB,EAAc7c,aAAa8b,IAAU,EACjCe,EAAcj6B,aACdi6B,EAAcj6B,YAAYi6B,EAAc7c,cAG5C6c,EAAc7c,aAAa8b,IAAU,EACjCe,EAAch6B,WACdg6B,EAAch6B,UAAUg6B,EAAc7c,cAI1Ckd,EAAeW,EAAMjC,QACrBuB,EAAeU,EAAMhC,YAM9B,IAcPv7B,EAAUmC,MAAM07B,YAAc,SAASjT,GAMnC,IAAIkT,EAAmBn/D,KAQnBu+D,GAAsB,EAMtBa,EAAkB,KAMlBC,EAAkB,KAOlBb,EAAwB,KAOxBc,EAAqB,KA8EzB,SAASC,EAAa1C,GACbsC,EAAiBpe,aAAa8b,KAC/BsC,EAAiBpe,aAAa8b,IAAU,EACpCsC,EAAiBx7B,aACjBw7B,EAAiBx7B,YAAYw7B,EAAiBpe,eAW1D,SAASye,EAAe3C,GAChBsC,EAAiBpe,aAAa8b,KAC9BsC,EAAiBpe,aAAa8b,IAAU,EACpCsC,EAAiBv7B,WACjBu7B,EAAiBv7B,UAAUu7B,EAAiBpe,eAWxD,SAAS0e,EAAa5C,GAClB0C,EAAa1C,GACb2C,EAAe3C,GAYnB,SAAS6C,EAAWn2D,EAAGC,GACnB21D,EAAiBpe,aAAa2b,mBAAmBzQ,EAAS1iD,EAAGC,GACzD21D,EAAiBt7B,aACjBs7B,EAAiBt7B,YAAYs7B,EAAiBpe,cAYtD,SAAS4e,EAAa9yD,GAClB,IAAI+xD,EAAQ/xD,EAAE4xD,QAAQ,IAAM5xD,EAAE+yD,eAAe,GACzCf,EAAUD,EAAMjC,QAAUyC,EAC1BN,EAAUF,EAAMhC,QAAUyC,EAC9B,OAAOp1D,KAAK41D,KAAKhB,EAAQA,EAAUC,EAAQA,IAAYK,EAAiBpB,mBAU5E,SAAS+B,EAAcjzD,GACnB,IAAI+xD,EAAQ/xD,EAAE4xD,QAAQ,GACtBF,GAAsB,EACtBa,EAAkBR,EAAMjC,QACxB0C,EAAkBT,EAAMhC,QAS5B,SAASmD,IACL9uD,OAAO7F,aAAaozD,GACpBvtD,OAAO7F,aAAak0D,GACpBf,GAAsB,EAjK1Bv+D,KAAK27D,gBAAkB,IAAM1qD,OAAO4sD,kBAAoB,GAMxD79D,KAAK89D,qBAAuB,IAM5B99D,KAAK+9D,mBAAqB,IAAM9sD,OAAO4sD,kBAAoB,GAM3D79D,KAAKggE,mBAAqB,IAS1BhgE,KAAK+gD,aAAe,IAAI1f,EAAUmC,MAAM9B,MACpC,EAAG,GACH,GAAO,GAAO,GAAO,GAAO,GAYnC1hC,KAAK2jC,YAAc,KAWnB3jC,KAAK4jC,UAAY,KAWjB5jC,KAAK6jC,YAAc,KAqGhBooB,EAAQgB,iBAAiB,YAAY,SAASpgD,GAG1C,GAAK0xD,EAIL,GAAyB,IAArB1xD,EAAE4xD,QAAQp+D,QAA4C,IAA5BwM,EAAE+yD,eAAev/D,QAY/C,GANA4Q,OAAO7F,aAAak0D,GAGpBE,EAAe,SAGVG,EAAa9yD,KAEdA,EAAEurD,kBAGG+G,EAAiBpe,aAAavY,MAAM,CAErC,IAAIo2B,EAAQ/xD,EAAE+yD,eAAe,GAC7BF,EAAWd,EAAMjC,QAASiC,EAAMhC,SAChC2C,EAAa,QAGbf,EAAwBvtD,OAAOzF,YAAW,WACtCg0D,EAAe,QACfO,MACDZ,EAAiBrB,4BA1BxBiC,OAgCL,GAEH9T,EAAQgB,iBAAiB,cAAc,SAASpgD,GAGnB,IAArBA,EAAE4xD,QAAQp+D,QAKdwM,EAAEurD,iBAGF0H,EAAcjzD,GAGdoE,OAAO7F,aAAaozD,GAGpBc,EAAqBruD,OAAOzF,YAAW,WACnC,IAAIozD,EAAQ/xD,EAAE4xD,QAAQ,GACtBiB,EAAWd,EAAMjC,QAASiC,EAAMhC,SAChC6C,EAAa,SACbM,MACDZ,EAAiBa,qBAlBhBD,OAoBL,GAEH9T,EAAQgB,iBAAiB,aAAa,SAASpgD,GAG3C,GAAK0xD,EAQL,GAJIoB,EAAa9yD,IACboE,OAAO7F,aAAak0D,GAGC,IAArBzyD,EAAE4xD,QAAQp+D,QAMd,GAAI8+D,EAAiBpe,aAAavY,KAAM,CAEpC37B,EAAEurD,iBAGF,IAAIwG,EAAQ/xD,EAAE4xD,QAAQ,GACtBiB,EAAWd,EAAMjC,QAASiC,EAAMhC,eAXhCmD,OAeL,IA6BH1+B,EAAYA,GAAa,GAqBzBA,EAAYA,GAAa,GAa7BA,EAAUh4B,OAAS,SAAyBi5B,EAAQ70B,GAQhD,IAAIwyD,EAAajgE,KASbkgE,EAAgB,GAehBC,EAAsB,SAA6Bl+D,GAGnD,IAAIm+D,EAAYF,EAAcj+D,GAC9B,IAAKm+D,EACD,OAAO,KAGX,IAAI/sD,EAAW+sD,EAAUh3D,QAKzB,OAJyB,IAArBg3D,EAAU//D,eACH6/D,EAAcj+D,GAGlBoR,GAePgtD,EAAsB,SAA6Bp+D,EAAMoR,GAGzD,IAAI+sD,EAAYF,EAAcj+D,GACzBm+D,IACDA,EAAY,GACZF,EAAcj+D,GAAQm+D,GAI1BA,EAAUr4D,KAAKsL,IASnBrT,KAAKyN,MAAQA,EAmBbzN,KAAKomD,OAAS,SAA4Bka,EAAav7B,EAAU9iC,GAG7D,IAAIoR,EAAW8sD,EAAoBl+D,GAC/BoR,GACAA,EAASitD,EAAav7B,IAU9B/kC,KAAK6oD,WAAa,KAelB7oD,KAAKugE,mBAAqB,SAA4Bt+D,EAAMu+D,GAGpDA,GACAH,EAAoBp+D,EAAMu+D,GAG9Bl+B,EAAO+hB,yBAAyB4b,EAAWxyD,MAAOxL,IAmBtDjC,KAAK6jD,mBAAqB,SAA4B9e,EAAU9iC,GAC5D,OAAOqgC,EAAO8hB,yBAAyB6b,EAAWxyD,MAAOs3B,EAAU9iC,KAY3Eo/B,EAAUh4B,OAAOo3D,YAAc,IAU/Bp/B,EAAUh4B,OAAOq3D,sBAAwB,wDAqBrCr/B,EAAYA,GAAa,GAW7BA,EAAUs/B,iBAAmB,SAASC,GAQlC,IAAIC,EAAM7gE,KAUN8gE,EAAkB,GAUlBtd,EAAU,GAWVud,EAAiB,GAajBC,EAAW,SAAkB/U,EAASgV,GAGlChV,EAAQiV,UACRjV,EAAQiV,UAAUC,IAAIF,GAItBhV,EAAQmV,WAAa,IAAMH,GAe/BI,EAAc,SAAqBpV,EAASgV,GAGxChV,EAAQiV,UACRjV,EAAQiV,UAAUI,OAAOL,GAIzBhV,EAAQmV,UAAYnV,EAAQmV,UAAUlgE,QAAQ,gBAC1C,SAA+Bo7B,EAAOilC,GAGlC,OAAIA,IAAkBN,EACX,GAGJ3kC,MAenBklC,EAAc,EAkCdC,EAAgB,SAAuBxV,EAAS73C,EAAOkY,EAAQo1C,GAQ9D1hE,KAAKoU,MAAQA,EAQbpU,KAAKssB,OAASA,EASftsB,KAAK4Z,MAAQ,SAAS+nD,GAGlB1V,EAAQjmD,MAAMoO,MAAUA,EAASutD,EAAU,KAC3C1V,EAAQjmD,MAAMsmB,OAAUA,EAASq1C,EAAU,KAGvCD,IACAzV,EAAQjmD,MAAM47D,WAAct1C,EAASq1C,EAAU,KAC/C1V,EAAQjmD,MAAM2wC,SAAagrB,EAAS,QAkB5CE,EAAmB,SAA0BC,GAG7C,IAAK,IAAIphE,EAAE,EAAGA,EAAIohE,EAAMzhE,OAAQK,IAAK,CAGjC,IAAIuB,EAAO6/D,EAAMphE,GACjB,KAAMuB,KAAQ6+D,GACV,OAAO,EAKf,OAAO,GAkBPiB,EAAe,SAAsBC,GAGrC,IAAIv1D,EAAOo0D,EAAIp0D,KAAKu1D,GACpB,IAAKv1D,EACD,OAAO,KAGX,IAAK,IAAI/L,EAAI+L,EAAKpM,OAAS,EAAGK,GAAK,EAAGA,IAAK,CAGvC,IAAIuhE,EAAYx1D,EAAK/L,GAGrB,GAAImhE,EAAiBI,EAAUC,UAC3B,OAAOD,EAKf,OAAO,MAgBPnL,EAAQ,SAAekL,EAASG,GAGhC,IAAK3e,EAAQwe,GAAU,CAEnBhB,EAASmB,EAAY,yBAGrB,IAAIx5D,EAAMo5D,EAAaC,GAGvB,GAAIr5D,EAAIy5D,SAAU,CAGd,IAAIC,EAAgB,0BAA4BC,EAAW35D,EAAIy5D,UAG3DG,EAAiBzB,EAAgBn4D,EAAIy5D,UAGpCG,GAcDlB,EAAYp9B,EAAUo+B,UACfvB,EAAgBn4D,EAAIy5D,UAGvBvB,EAAIn8B,SACJm8B,EAAIn8B,QAAQ69B,KAjBhBvB,EAAS/8B,EAAUo+B,GACnBvB,EAAgBn4D,EAAIy5D,UAAYz5D,EAAI07B,OAGhCw8B,EAAIp8B,WACJo8B,EAAIp8B,UAAU97B,EAAI07B,cAmBrBw8B,EAAIp8B,WACTo8B,EAAIp8B,UAAU97B,EAAI07B,QAGtBmf,EAAQwe,IAAW,IAkBvBjL,EAAU,SAAiBiL,EAASG,GAGpC,GAAI3e,EAAQwe,GAAU,CAElBX,EAAYc,EAAY,yBAGxB,IAAIx5D,EAAMo5D,EAAaC,IAGlBr5D,EAAIy5D,UAAYvB,EAAIn8B,SACrBm8B,EAAIn8B,QAAQ/7B,EAAI07B,QAGpBmf,EAAQwe,IAAW,IAOvB/9B,EAAW50B,SAASmd,cAAc,OACtCyX,EAASm9B,UAAY,gBAGrBn9B,EAASu+B,cACTv+B,EAASJ,YACTI,EAASL,UACTK,EAASN,YAAgB,SAA2B92B,GAOhD,OAJI20D,GACAA,IAEJ30D,EAAEqvD,mBACK,GAUXl8D,KAAK07D,oBAAsB,EAQ3B17D,KAAKykC,UAAY,KAQjBzkC,KAAK0kC,QAAU,KAOf1kC,KAAK4gE,OAAS,IAAIv/B,EAAUs/B,iBAAiB8B,OAAO7B,GAMpD5gE,KAAKiiC,WAAa,WACd,OAAOgC,GAWXjkC,KAAKuuC,OAAS,SAASn6B,GAMnB,IAHA,IAAIsuD,EAAOz4D,KAAKuhB,MAAc,GAARpX,EAAaysD,EAAID,OAAOxsD,OAAS,GAG9C1T,EAAE,EAAGA,EAAEqgE,EAAe1gE,OAAQK,IAAK,CACxC,IAAIiiE,EAAgB5B,EAAergE,GACnCiiE,EAAc/oD,MAAM8oD,KAuB5B,IAAIE,EAAa,SAAoB3gE,EAAMikD,GAGvC,GAAIA,aAAkBp3C,MAAO,CAEzB,IADA,IAAIrC,EAAO,GACF/L,EAAE,EAAGA,EAAIwlD,EAAO7lD,OAAQK,IAC7B+L,EAAK1E,KAAK,IAAIs5B,EAAUs/B,iBAAiBkC,IAAI3c,EAAOxlD,GAAIuB,IAE5D,OAAOwK,EAIX,MAAsB,kBAAXy5C,EACA,CAAC,IAAI7kB,EAAUs/B,iBAAiBkC,IAAI,CACvC5gE,KAASA,EACToiC,OAAS6hB,KAKK,kBAAXA,EACA,CAAC,IAAI7kB,EAAUs/B,iBAAiBkC,IAAI,CACvC5gE,KAAQA,EACRonB,MAAQ68B,KAKT,CAAC,IAAI7kB,EAAUs/B,iBAAiBkC,IAAI3c,EAAQjkD,KAoBnD6gE,EAAU,SAAiBr2D,GAE3B,IAAIs2D,EAAY,GAGhB,IAAK,IAAI9gE,KAAQ2+D,EAAOn0D,KACpBs2D,EAAU9gE,GAAQ2gE,EAAW3gE,EAAMwK,EAAKxK,IAG5C,OAAO8gE,GAUX/iE,KAAKyM,KAAOq2D,EAAQlC,EAAOn0D,MAiB3B,IAAI61D,EAAa,SAAoBrgE,GAGjC,IAAI+gE,EAAU/gE,EACNf,QAAQ,kBAAmB,SAC3BA,QAAQ,iBAAkB,KAC1Bu/B,cAER,OAAOuiC,GA2CPC,EAAiB,SAASA,EAAehX,EAAS/F,EAAQjkD,GAE1D,IAAIvB,EAGAguD,EAAMr/C,SAASmd,cAAc,OAOjC,GAJIvqB,GACA++D,EAAStS,EAAK,iBAAmB4T,EAAWrgE,IAG5CikD,aAAkBp3C,MAMlB,IAHAkyD,EAAStS,EAAK,uBAGThuD,EAAE,EAAGA,EAAIwlD,EAAO7lD,OAAQK,IACzBuiE,EAAevU,EAAKxI,EAAOxlD,SAK9B,GAAIwlD,aAAkB78C,OAAQ,CAG/B23D,EAAStS,EAAK,uBAGd,IAAIoT,EAAQz4D,OAAOoD,KAAKy5C,GAAQ/8C,OAChC,IAAKzI,EAAE,EAAGA,EAAIohE,EAAMzhE,OAAQK,IAAK,CACzBuB,EAAO6/D,EAAMphE,GACjBuiE,EAAevU,EAAKxI,EAAOjkD,GAAOA,SAMrC,GAAsB,kBAAXikD,EAGZ8a,EAAStS,EAAK,qBAGdqS,EAAeh5D,KAAK,IAAI05D,EAAc/S,EAAKxI,EAAQA,SAKlD,GAAsB,kBAAXA,EAAqB,CAGjC,IAAI8b,EAAU9b,EACS,IAAnB8b,EAAQ3hE,SACR2hE,EAAU,KAAOA,EAAQlkD,WAAW,GAAGyD,SAAS,KAGpDy/C,EAAStS,EAAK,+BAGd,IAAIyT,EAAa9yD,SAASmd,cAAc,OACxC21C,EAAWf,UAAY,uCACuBkB,EAAWN,GAGzD,IAAIv1D,EAAOo0D,EAAIp0D,KAAKy5C,GACpB,GAAIz5C,EACA,IAAK/L,EAAE,EAAGA,EAAI+L,EAAKpM,OAAQK,IAAK,CAG5B,IAAIiI,EAAM8D,EAAK/L,GAGXwiE,EAAa7zD,SAASmd,cAAc,OACxC02C,EAAW9B,UAAc,oBACzB8B,EAAWC,YAAcx6D,EAAI0gB,MAG7B,IAAK,IAAI9G,EAAE,EAAGA,EAAI5Z,EAAIu5D,SAAS7hE,OAAQkiB,IAAK,CACxC,IAAI6gD,EAAcz6D,EAAIu5D,SAAS3/C,GAC/By+C,EAASkC,EAAY,0BAA4BZ,EAAWc,IAC5DpC,EAASmB,EAAY,sBAA4BG,EAAWc,IAIhEjB,EAAWpgC,YAAYmhC,GAM/BxU,EAAI3sB,YAAYogC,GAChBpB,EAAeh5D,KAAK,IAAI05D,EAAc/S,EAAKmS,EAAID,OAAOyC,UAAUnd,IAAW,EAAG,GAAG,IAWjF,IAAIod,EAAa,SAAoBz2D,GACjCA,EAAEurD,iBACFoJ,EAAcX,EAAInF,oBAClB5E,EAAM5Q,EAAQic,IAYdoB,EAAe,SAAsB12D,GACrCA,EAAEurD,iBACFoJ,EAAcX,EAAInF,oBAClB3E,EAAQ7Q,EAAQic,IAYhBqB,EAAa,SAAoB32D,GACjCA,EAAEurD,iBACkB,IAAhBoJ,GACA1K,EAAM5Q,EAAQic,IAYlBsB,EAAe,SAAsB52D,GACrCA,EAAEurD,iBACkB,IAAhBoJ,GACAzK,EAAQ7Q,EAAQic,IAIxBA,EAAWlV,iBAAiB,aAAcqW,GAAc,GACxDnB,EAAWlV,iBAAiB,WAAcsW,GAAc,GAGxDpB,EAAWlV,iBAAiB,YAAauW,GAAc,GACvDrB,EAAWlV,iBAAiB,UAAawW,GAAc,GACvDtB,EAAWlV,iBAAiB,WAAawW,GAAc,GAK3DxX,EAAQlqB,YAAY2sB,IAKxBuU,EAAeh/B,EAAU28B,EAAOA,SAapCv/B,EAAUs/B,iBAAiB8B,OAAS,SAASiB,GASzC1jE,KAAK2jE,SAAWD,EAASC,SAQzB3jE,KAAKwC,KAAOkhE,EAASlhE,KAUrBxC,KAAKyM,KAAOi3D,EAASj3D,KAarBzM,KAAK4gE,OAAS8C,EAAS9C,OAUvB5gE,KAAKoU,MAAQsvD,EAAStvD,MAUtBpU,KAAKqjE,UAAYK,EAASL,WAAa,IAqB3ChiC,EAAUs/B,iBAAiBkC,IAAM,SAASa,EAAUzhE,GAOhDjC,KAAKiC,KAAOA,GAAQyhE,EAASzhE,KAQ7BjC,KAAKqpB,MAAQq6C,EAASr6C,OAASrpB,KAAKiC,KASpCjC,KAAKqkC,OAASq/B,EAASr/B,QAAU,SAAuBhb,GAGpD,IAAKA,GAA0B,IAAjBA,EAAMhpB,OAChB,OAAO,KAGX,IAAI6xD,EAAW7oC,EAAMvL,WAAW,GAChC,OAAIo0C,GAAY,GAAUA,GAAY,IAC3BA,EAGPA,GAAY,KAAUA,GAAY,QAC3B,SAAaA,EAGjB,KAhBsB,CAkB9BlyD,KAAKqpB,OAWRrpB,KAAKoiE,SAAWsB,EAAStB,SAWzBpiE,KAAKkiE,SAAWwB,EAASxB,UAAY,IAuBrC7gC,EAAYA,GAAa,GAS7BA,EAAUyiB,aAAe,SAASxhB,EAAQ70B,GAMtC,IAAI6hD,EAActvD,KAMlBA,KAAKyN,MAAQA,EASbzN,KAAKi5C,MAAQ,KAObj5C,KAAK+4C,SAAW,SAASh5C,GACrBuiC,EAAOyW,SAASuW,EAAY7hD,MAAO1N,IAMvCC,KAAK6iC,QAAU,WACXP,EAAOgiB,UAAUgL,EAAY7hD,SAwBjC4zB,EAAYA,GAAa,GAQ7BA,EAAU6jB,OAAS,WAMf,IAAID,EAASjlD,KASToW,EAAS,GAQTwtD,EAAiB,GAGjBC,GAAe,EAGfC,EAAc,EASlB9jE,KAAKooD,QAAU,SAASvN,GAGhBipB,EAAc,MAAQD,GAAeC,IAErC1tD,EAASA,EAAOsgD,UAAUoN,GAG1BD,GAAeC,EACfA,EAAc,GAKlB1tD,GAAUykC,EAGV,MAAOgpB,EAAcztD,EAAO/V,OAAQ,CAGhC,GAAIwjE,GAAeC,EAAa,CAG5B,IAAI7X,EAAU71C,EAAOsgD,UAAUoN,EAAaD,GACxCE,EAAa3tD,EAAOsgD,UAAUmN,EAAaA,EAAY,GAM3D,GAHAD,EAAe77D,KAAKkkD,GAGF,KAAd8X,EAAmB,CAGnB,IAAIhb,EAAS6a,EAAex6D,QAGA,MAAxB67C,EAAOE,eACPF,EAAOE,cAAc4D,EAAQ6a,GAGjCA,EAAevjE,OAAS,OAGvB,GAAkB,KAAd0jE,EACL,MAAM,IAAI17D,MAAM,uBAIpBy7D,EAAcD,EAAc,EAKhC,IAAIG,EAAa5tD,EAAOwC,QAAQ,IAAKkrD,GACrC,IAAmB,GAAfE,EAiBC,CACDF,EAAc1tD,EAAO/V,OACrB,MAhBA,IAAIA,EAASkL,SAAS6K,EAAOsgD,UAAUmN,EAAY,EAAGG,IACtD,GAAIj9C,MAAM1mB,GACN,MAAM,IAAIgI,MAAM,4CAGpBy7D,EAAcE,EAAa,EAG3BH,EAAcC,EAAczjE,IAuBxCL,KAAKmlD,cAAgB,MAuBrB9jB,EAAYA,GAAa,GAa7BA,EAAUyY,eAAiB,SAAwB4pB,GAQ/C1jE,KAAKs6C,eAAiBopB,EAASppB,eAO/Bt6C,KAAKo7C,SAAWsoB,EAAStoB,SAOzBp7C,KAAKs7C,KAAOooB,EAASpoB,MAiBzBja,EAAUyY,eAAe/2B,MAAQ,SAAqBgiB,GAElD,IAAIuV,EAIAgB,EAAO,KAGPF,EAAW,EAGf,GAAiC,cAA7BrW,EAAS2xB,UAAU,EAAG,GACtB3xB,EAAWA,EAAS2xB,UAAU,GAC9Bpc,EAAiB,MAIhB,IAAkC,eAA9BvV,EAAS2xB,UAAU,EAAG,IAO3B,OAAO,KANP3xB,EAAWA,EAAS2xB,UAAU,IAC9Bpc,EAAiB,EASrB,IADA,IAAIiL,EAAaxgB,EAASjX,MAAM,KACvBptB,EAAI,EAAGA,EAAI6kD,EAAWllD,OAAQK,IAAK,CAExC,IAAIujE,EAAY1e,EAAW7kD,GAGvBwjE,EAASD,EAAUrrD,QAAQ,KAC/B,IAAgB,IAAZsrD,EACA,OAAO,KAGX,IAAIjiE,EAAQgiE,EAAUvN,UAAU,EAAGwN,GAC/B5gE,EAAQ2gE,EAAUvN,UAAUwN,EAAO,GAGvC,OAAQjiE,GAGJ,IAAK,WACDm5C,EAAW7vC,SAASjI,GACpB,MAGJ,IAAK,OACDg4C,EAAO/vC,SAASjI,GAChB,MAGJ,QACI,OAAO,MAOnB,OAAa,OAATg4C,EACO,KAGJ,IAAIja,EAAUyY,eAAe,CAChCQ,eAAiBA,EACjBc,SAAiBA,EACjBE,KAAiBA,KAwBrBja,EAAYA,GAAa,GAc7BA,EAAU8iC,iBAAmB,SAA0B/iC,GAQnD,IAAIgjC,EAAYpkE,KAUZqkE,EAAyB,MASzBC,EAAyB,IAWzBC,EAAoB,EAQpB9Z,EAAS,GAST+Z,EAAe,GASfC,EAA8B,EAS9BC,EAAwB,EASxBC,EAAiB,IAAItjC,EAAU8iC,iBAAiBS,gBAShDC,EAAiB,IAAIxjC,EAAUS,OAAO6iC,GAStCG,GAAgB,EAShBC,EAAsB,KAStBC,EAAqB,KAUrBC,EAAc,KAGlBJ,EAAexhC,UAGfwhC,EAAe7iC,aAAakmB,YAAW,GAGvC9mB,EAAO+jB,cAAgB,SAA2B4D,EAAQmc,GAGtD,IAAIC,EAAc,IAAI9jC,EAAU8iC,iBAAiBiB,OAAOC,YAAYtc,EAAQmc,EAAKziD,SAMjF,GALA+hD,EAAaz8D,KAAKo9D,GAClBV,GAA+BU,EAAYhvB,UAI5B,SAAX4S,EAAmB,CAGnB,IAAIP,EAAYj9C,SAAS25D,EAAK,IAG1Bta,EAAQ,IAAIvpB,EAAU8iC,iBAAiBiB,OAAO5c,EAAWgc,GAC7D/Z,EAAO1iD,KAAK6iD,IAKU,IAAlBH,EAAOpqD,QAAiBokE,GAA+BJ,GAChD7b,EAAYkc,GAAyBJ,KAC5C1Z,EAAM0a,UAAW,EACjBZ,EAAwBlc,EACxBic,EAA8B,GAIlCD,EAAe,GAGXJ,EAAU7kB,YACV6kB,EAAU7kB,WAAW6kB,EAAUmB,iBAkB3C,IAAIC,EAAsB,SAA6Bhd,GAGnD,OAAsB,IAAlBiC,EAAOpqD,OACA,EAGJmoD,EAAYiC,EAAO,GAAGjC,WAyB7Bid,EAAY,SAASA,EAAUC,EAAUC,EAAUnd,GAGnD,GAAIkd,IAAaC,EACb,OAAOD,EAGX,IAAIE,EAAW37D,KAAKuhB,OAAOk6C,EAAWC,GAAY,GAC9CE,EAAeL,EAAoB/a,EAAOmb,GAAUpd,WAGxD,OAAIA,EAAYqd,GAAgBD,EAAWF,EAChCD,EAAUC,EAAUE,EAAW,EAAGpd,GAGzCA,EAAYqd,GAAgBD,EAAWD,EAChCF,EAAUG,EAAW,EAAGD,EAAUnd,GAItCod,GAaPE,EAAc,SAAqBr4D,GAKnC,IAHA,IAAIm9C,EAAQH,EAAOh9C,GAGV/M,EAAI,EAAGA,EAAIkqD,EAAM4Z,aAAankE,OAAQK,IAAK,CAChD,IAAIykE,EAAcva,EAAM4Z,aAAa9jE,GACrCikE,EAAeoB,mBAAmBZ,EAAYpc,OAAQoc,EAAYD,MAIlEta,EAAM0a,WAAa1a,EAAMob,aACzBnB,EAAe1iB,aAAY,SAA0B3gB,GACjDopB,EAAMob,YAAcxkC,MAyB5BykC,EAAc,SAASA,EAAYx4D,EAAO4F,EAAU/H,GAGpD46D,IAGAjB,EAAch0D,OAAOzF,YAAW,WAE5B,IAAI26D,EAGJ,IAAKA,EAAa14D,EAAO04D,GAAc,EAAGA,IAAc,CAEpD,IAAIvb,EAAQH,EAAO0b,GAInB,GAAIA,IAAerB,EACf,MAIJ,GAAIla,EAAMob,YAAa,CACnBnB,EAAejiB,YAAYgI,EAAMob,aACjC,OAMRG,IAKA,IAHA,IAAIC,GAAY,IAAIxV,MAAOC,UAGpBsV,GAAc14D,EAAO04D,IAAc,CAGtC,IAAIjsB,GAAc,IAAI0W,MAAOC,UAC7B,GAAI3W,EAAcksB,GAAa7B,EAC3B,MAEJuB,EAAYK,GAIhBrB,EAAeqB,EAAa,EAGxB/B,EAAUiC,QACVjC,EAAUiC,OAAOjC,EAAUkC,eAG3BxB,IAAiBr3D,EACjBw4D,EAAYx4D,EAAO4F,EACfpJ,KAAK0a,IAAIrZ,IAAS,IAAIslD,MAAOC,UAAYuV,GAAY,IAIzD/yD,MAEL/H,GAAS,IAUZ46D,EAAY,WACZj1D,OAAO7F,aAAa65D,IAUpBsB,EAAmB,SAASA,IAG5B,GAAIzB,EAAe,EAAIra,EAAOpqD,OAAQ,CAGlC,IAAIolC,EAAOglB,EAAOqa,EAAe,GAI7B0B,EAAoB/gC,EAAK+iB,UAAYuc,EAAsBC,EAI3D15D,EAAQrB,KAAK0a,IAAI6hD,GAAoB,IAAI5V,MAAOC,UAAW,GAG/DoV,EAAYnB,EAAe,GAAG,WAC1ByB,MACDj7D,QAMH84D,EAAUqC,SAYlBzmE,KAAKu/C,WAAa,KAOlBv/C,KAAK0mE,OAAS,KAUd1mE,KAAK2mE,QAAU,KASf3mE,KAAKqmE,OAAS,KAUdrmE,KAAKqjC,QAAU,SAAiBtjC,GAC5BqhC,EAAOiC,QAAQtjC,IAOnBC,KAAK6hC,WAAa,WACdT,EAAOS,cAaX7hC,KAAKgiC,WAAa,WACd,OAAO6iC,EAAe7iC,cAS1BhiC,KAAK4mE,UAAY,WACb,QAAS7B,GAUb/kE,KAAKsmE,YAAc,WAGf,OAAsB,IAAlBxB,EACO,EAIJU,EAAoB/a,EAAOqa,GAActc,YAWpDxoD,KAAKulE,YAAc,WAGf,OAAsB,IAAlB9a,EAAOpqD,OACA,EAGJmlE,EAAoB/a,EAAOA,EAAOpqD,OAAS,GAAGmoD,YAczDxoD,KAAK8sD,KAAO,WAIR,IAAKsX,EAAUwC,aAAe9B,EAAe,EAAIra,EAAOpqD,OAAQ,CAGxD+jE,EAAUsC,QACVtC,EAAUsC,SAId,IAAIjhC,EAAOglB,EAAOqa,EAAe,GACjCC,EAAsBt/B,EAAK+iB,UAC3Bwc,GAAqB,IAAIpU,MAAOC,UAGhC0V,MAoBRvmE,KAAK6mE,KAAO,SAAcp+B,EAAUp1B,GAGhC,GAAsB,IAAlBo3C,EAAOpqD,OAAX,CAIA,IAAIymE,EAAoB1C,EAAUwC,YAClCxC,EAAUqC,QAGVR,EAAYR,EAAU,EAAGhb,EAAOpqD,OAAS,EAAGooC,IAAW,WAG/Cq+B,GACA1C,EAAUtX,OAGVz5C,GACAA,SAaZrT,KAAKymE,MAAQ,WAGTP,IAGI9B,EAAUwC,cAGNxC,EAAUuC,SACVvC,EAAUuC,UAGd5B,EAAsB,KACtBC,EAAqB,QAyBjC3jC,EAAU8iC,iBAAiBiB,OAAS,SAAgB5c,EAAWgc,GAW3DxkE,KAAKslE,UAAW,EAQhBtlE,KAAKwoD,UAAYA,EAQjBxoD,KAAKwkE,aAAeA,EAUpBxkE,KAAKgmE,YAAc,MAgBvB3kC,EAAU8iC,iBAAiBiB,OAAOC,YAAc,SAAqBtc,EAAQmc,GAQzE,IAAIC,EAAcnlE,KAOlBA,KAAK+oD,OAASA,EAOd/oD,KAAKklE,KAAOA,EAWZllE,KAAKm2C,QAAU,WAMX,IAHA,IAAIhrB,EAAOg6C,EAAYpc,OAAO1oD,OAGrBK,EAAI,EAAGA,EAAIykE,EAAYD,KAAK7kE,OAAQK,IACzCyqB,GAAQg6C,EAAYD,KAAKxkE,GAAGL,OAEhC,OAAO8qB,IAcfkW,EAAU8iC,iBAAiBS,gBAAkB,WAQzC,IAAIxjC,EAASphC,KAEbA,KAAKqjC,QAAU,SAAiBtjC,KAIhCC,KAAKujD,YAAc,SAAqBvwC,KAIxChT,KAAK6hC,WAAa,aAgBlB7hC,KAAK+lE,mBAAqB,SAA4Bhd,EAAQmc,GACtD9jC,EAAO+jB,eACP/jB,EAAO+jB,cAAc4D,EAAQmc,KAwBrC7jC,EAAYA,GAAa,GAc7BA,EAAUsd,OAAS,SAAS9gC,EAAM+H,GAM9B,IAAImhD,EAAc/mE,KAOlBA,KAAK6d,KAAOA,EAUZ7d,KAAK4lB,QAAUA,EAOf5lB,KAAKugD,QAAU,WACX,OAAOwmB,EAAYlpD,KAAO,GAAKkpD,EAAYlpD,KAAO,MAQ1DwjB,EAAUsd,OAAOC,KAAO,CAOpB,QAAW,EAOX,YAAe,IAOf,aAAgB,IAOhB,YAAe,IAQf,iBAAoB,IAQpB,eAAkB,IAQlB,mBAAsB,IAQtB,kBAAqB,IAQrB,gBAAmB,IAQnB,mBAAsB,IAQtB,qBAAwB,IAQxB,iBAAoB,IAQpB,gBAAmB,IAOnB,eAAkB,IAOlB,mBAAsB,IAQtB,oBAAuB,IAQvB,iBAAoB,IAOpB,eAAkB,IAOlB,eAAkB,IAOlB,gBAAmB,IAQnB,gBAAmB,KAgBvBvd,EAAUsd,OAAOC,KAAKooB,aAAe,SAAsB9tB,GAGvD,OAAQA,GAGJ,KAAK,IACD,OAAO7X,EAAUsd,OAAOC,KAAKqoB,mBAGjC,KAAK,IACD,OAAO5lC,EAAUsd,OAAOC,KAAKsoB,iBAGjC,KAAK,IACD,OAAO7lC,EAAUsd,OAAOC,KAAKuoB,mBAGjC,KAAK,IACD,OAAO9lC,EAAUsd,OAAOC,KAAKwoB,gBAGjC,KAAK,IACD,OAAO/lC,EAAUsd,OAAOC,KAAKyoB,YAKrC,OAAOhmC,EAAUsd,OAAOC,KAAK0oB,cAgBjCjmC,EAAUsd,OAAOC,KAAK2oB,kBAAoB,SAA2B1pD,GAGjE,OAAQA,GAGJ,KAAK,IACD,OAAOwjB,EAAUsd,OAAOC,KAAKC,QAGjC,KAAK,KACL,KAAK,KACD,OAAOxd,EAAUsd,OAAOC,KAAK4oB,mBAGjC,KAAK,KACL,KAAK,KACL,KAAK,KACL,KAAK,KACD,OAAOnmC,EAAUsd,OAAOC,KAAK6oB,qBAKrC,OAAOpmC,EAAUsd,OAAOC,KAAK0oB,cAuB7BjmC,EAAYA,GAAa,GAW7BA,EAAU4D,aAAe,SAAS1C,GAM9B,IAAI8V,EAAcr4C,KAOd0nE,EAAe,IAAIrmC,EAAU+W,kBAAkB7V,GAQ/ColC,EAAkB,EAQlB/Q,EAAY,EAUhB,SAASgR,EAAcxxD,GAKnB,IAHA,IAAI/S,EAAO,GAEPouB,EAAQ,IAAI1V,WAAW3F,GAClB1V,EAAE,EAAGA,EAAE+wB,EAAMpxB,OAAQK,IAAK,CAG/B,IAAI4C,EAAQmuB,EAAM/wB,GAGM,IAApBinE,EAGuB,OAAV,IAARrkE,GACDD,GAAQhB,OAAOghB,aAAa/f,GAGJ,OAAV,GAARA,IACNszD,EAAoB,GAARtzD,EACZqkE,EAAkB,GAIM,OAAV,GAARrkE,IACNszD,EAAoB,GAARtzD,EACZqkE,EAAkB,GAIM,OAAV,EAARrkE,IACNszD,EAAoB,EAARtzD,EACZqkE,EAAkB,GAKlBtkE,GAAQ,IAKY,OAAV,GAARC,IAENszD,EAAaA,GAAa,EAAc,GAARtzD,EAChCqkE,IAGwB,IAApBA,IACAtkE,GAAQhB,OAAOghB,aAAauzC,MAMhC+Q,EAAkB,EAClBtkE,GAAQ,KAKhB,OAAOA,EAKXqkE,EAAa/uB,OAAS,SAASviC,GAG3B,IAAI/S,EAAOukE,EAAcxxD,GAGrBiiC,EAAYnT,QACZmT,EAAYnT,OAAO7hC,IAK3BqkE,EAAaviC,MAAQ,WACbkT,EAAYlT,OACZkT,EAAYlT,SASpBnlC,KAAKklC,OAAS,KAMdllC,KAAKmlC,MAAQ,MAsBb9D,EAAYA,GAAa,GAU7BA,EAAUwmC,aAAe,SAAStlC,GAM9B,IAAIsW,EAAc74C,KAOd8nE,EAAe,IAAIzmC,EAAUuX,kBAAkBrW,GAM/CnsB,EAAS,IAAI2F,WAAW,MAMxB1b,EAAS,EAgBb,SAAS0nE,EAASt2C,GAGd,GAAIpxB,EAAOoxB,GAASrb,EAAO/V,OAAQ,CAC/B,IAAI2nE,EAAa,IAAIjsD,WAA0B,GAAd1b,EAAOoxB,IACxCu2C,EAAW19C,IAAIlU,GACfA,EAAS4xD,EAGb3nE,GAAUoxB,EAYd,SAASw2C,EAAcrR,GAEnB,IAAI33B,EACAxN,EAGJ,GAAImlC,GAAa,IACb33B,EAAO,EACPxN,EAAQ,OAIP,GAAImlC,GAAa,KAClB33B,EAAO,IACPxN,EAAQ,OAIP,GAAImlC,GAAa,MAClB33B,EAAO,IACPxN,EAAQ,MAIP,MAAImlC,GAAa,SAQlB,YADAqR,EAAc,OANdhpC,EAAO,IACPxN,EAAQ,EAUZs2C,EAASt2C,GAIT,IAHA,IAAIhb,EAASpW,EAAS,EAGbK,EAAE,EAAGA,EAAE+wB,EAAO/wB,IACnB0V,EAAOK,KAAY,IAAoB,GAAZmgD,EAC3BA,IAAc,EAIlBxgD,EAAOK,GAAUwoB,EAAO23B,EAY5B,SAASsR,EAAc7kE,GAGnB,IAAK,IAAI3C,EAAE,EAAGA,EAAE2C,EAAKhD,OAAQK,IAAK,CAC9B,IAAIk2D,EAAYvzD,EAAKya,WAAWpd,GAChCunE,EAAcrR,GAIlB,GAAIv2D,EAAS,EAAG,CACZ,IAAI8nE,EAAa/xD,EAAOkc,SAAS,EAAGjyB,GAEpC,OADAA,EAAS,EACF8nE,GAxGfL,EAAa7uB,MAAQ,SAASC,GACtBL,EAAYI,OACZJ,EAAYI,MAAMC,IAgH1Bl5C,KAAKooE,SAAW,SAAS/kE,GACjBA,EAAKhD,QACLynE,EAAazuB,SAAS6uB,EAAc7kE,KAO5CrD,KAAK6iC,QAAU,WACXilC,EAAajlC,WAQjB7iC,KAAKi5C,MAAQ,MAsBb5X,EAAYA,GAAa,GAW7BA,EAAUI,OAAS,WASfzhC,KAAKqjC,QAAU,SAAStjC,KAKxBC,KAAK6hC,WAAa,aAUlB7hC,KAAKujD,YAAc,SAASvwC,KAU5BhT,KAAKiiD,SAAW,SAASzgB,GAGjBA,IAAUxhC,KAAKwhC,QACfxhC,KAAKwhC,MAAQA,EACTxhC,KAAKuhC,eACLvhC,KAAKuhC,cAAcC,KAa/BxhC,KAAKqoE,QAAU,SAAiBC,GAC5BtoE,KAAKsoE,KAAOA,EACRtoE,KAAKuoE,QACLvoE,KAAKuoE,OAAOD,IASpBtoE,KAAKkiD,YAAc,WACf,OAAOliD,KAAKwhC,QAAUH,EAAUI,OAAOC,MAAM8mC,MACtCxoE,KAAKwhC,QAAUH,EAAUI,OAAOC,MAAM+mC,UAQjDzoE,KAAKwhC,MAAQH,EAAUI,OAAOC,MAAMgnC,WASpC1oE,KAAK2oE,eAAiB,KAWtB3oE,KAAK4oE,kBAAoB,KAQzB5oE,KAAKsoE,KAAO,KASZtoE,KAAKuoE,OAAS,KASdvoE,KAAKmjC,QAAU,KAQfnjC,KAAKuhC,cAAgB,KAUrBvhC,KAAKmlD,cAAgB,MAezB9jB,EAAUI,OAAOonC,qBAAuB,GAKxCxnC,EAAUI,OAAOC,MAAQ,CAQrB,WAAc,EAOd,KAAQ,EASR,OAAU,EAQV,SAAa,GAuBjBL,EAAUynC,WAAa,SAASC,EAAWC,EAAaC,GAMpD,IAAI7nC,EAASphC,KAETkpE,EAAiBH,EAAY,WAC7BI,EAAiBJ,EAAY,SAC7BK,EAAiBL,EAAY,UAE7BM,EAAsB,EACtBC,EAAsB,EAGtBC,EAAcF,EAEdG,GAAkB,EAClBC,EAAsB,GAItBC,IAAoBV,EAMpBW,EAAkB,KAQlBC,EAAkB,KASlB3oB,EAAe,KAUf4oB,EAAiB,IASjBC,EAAeb,GAAsB,GAazC,SAASc,EAAgBC,EAASC,GAC9B,IAAK,IAAIhoE,KAAQgoE,EACbD,EAAQE,iBAAiBjoE,EAAMgoE,EAAQhoE,IAU/C,SAASkoE,IAGLl5D,OAAO7F,aAAau+D,GACpB14D,OAAO7F,aAAaw+D,GAGhBxoC,EAAOI,QAAUH,EAAUI,OAAOC,MAAM+mC,UACxCrnC,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAM8mC,MAG3CmB,EAAkB14D,OAAOzF,YAAW,WAChCwD,QAAQoM,IAAI,mBACZgvD,EAAa,IAAI/oC,EAAUsd,OAAOtd,EAAUsd,OAAOC,KAAKyrB,iBAAkB,sBAC3EjpC,EAAOunC,gBAGViB,EAAkB34D,OAAOzF,YAAW,WAChCwD,QAAQoM,IAAI,mBACZgmB,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAM+mC,YACxCrnC,EAAOwnC,mBAad,SAASwB,EAAalxB,GAGlBjoC,OAAO7F,aAAau+D,GACpB14D,OAAO7F,aAAaw+D,GAGpB34D,OAAO+3C,cAAc/H,GAGjB7f,EAAOI,QAAUH,EAAUI,OAAOC,MAAMC,SAIxCuX,EAAOr7B,OAASwjB,EAAUsd,OAAOC,KAAKC,SAAWzd,EAAO+B,UAIpD/B,EAAOI,QAAUH,EAAUI,OAAOC,MAAMgnC,YACjCxvB,EAAOr7B,OAASwjB,EAAUsd,OAAOC,KAAKuoB,oBAC7C/lC,EAAO+B,QAAQ+V,IAKvBswB,GAAkB,EAGlBpoC,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAMC,SA+C3C,SAAS2oC,IAGL,GAAKlpC,EAAO8gB,cAGZ,GAAIunB,EAAoBppE,OAAS,EAAG,CAEhCmpE,GAAkB,EAElB,IAAIe,EAAyB,IAAIC,eACjCD,EAAuB3iE,KAAK,OAAQwhE,EAAehoC,EAAOknC,MAC1DiC,EAAuBb,gBAAkBA,EACzCK,EAAgBQ,EAAwBT,GACxCS,EAAuBL,iBAAiB,eAAgB,4BAGxDK,EAAuBE,mBAAqB,WACE,IAAtCF,EAAuBG,aAEvBP,IAGsC,MAAlCI,EAAuBrxB,OACvByxB,EAAsBJ,GAItBD,MAKZC,EAAuBK,KAAKnB,GAC5BA,EAAsB,QAItBD,GAAkB,EAI1B,SAASmB,EAAsBE,GAG3B,IAAIhtD,EAAOtS,SAASs/D,EAAeC,kBAAkB,0BACrD,GAAIjtD,EAAM,CACN,IAAI+H,EAAUilD,EAAeC,kBAAkB,2BAC/CV,EAAa,IAAI/oC,EAAUsd,OAAO9gC,EAAM+H,SAKnCilD,EAAe3xB,OACpBkxB,EAAa,IAAI/oC,EAAUsd,OACvBtd,EAAUsd,OAAOC,KAAKooB,aAAa6D,EAAe3xB,QAC9C2xB,EAAeE,aAIvBX,EAAa,IAAI/oC,EAAUsd,OAAOtd,EAAUsd,OAAOC,KAAK4oB,qBAIhE,SAASwD,EAAeH,GAEpB,IAAII,EAAW,KACXC,EAAc,KAEdC,EAAmB,EAGnBC,GAAc,EAGdjF,EAAa,EAGbnzD,EAAW,IAAIlE,MAEnB,SAASu8D,IAGL,GAAKjqC,EAAO8gB,eAUZ,KAAI2oB,EAAeH,WAAa,GAAhC,CAGA,IAAIxxB,EACJ,IAAMA,EAAS2xB,EAAe3xB,OAG9B,MAAOrsC,GAAKqsC,EAAS,IAOrB,GAJKgyB,GAA0B,MAAXhyB,IAChBgyB,EAAcI,KAGgB,IAA9BT,EAAeH,YACe,IAA9BG,EAAeH,WAAkB,CAajC,GAXAP,IAGIZ,IAAgBF,IACkB,IAA9BwB,EAAeH,YAAqBO,EAED,IAA9BJ,EAAeH,YAAoBO,GACxCjiB,cAAciiB,GAFdA,EAAWhiB,YAAYoiB,EAAe,KAMhB,IAA1BR,EAAe3xB,OAEf,YADA9X,EAAOS,aAKN,GAA8B,MAA1BgpC,EAAe3xB,OAEpB,YADAyxB,EAAsBE,GAK1B,IAAIU,EACJ,IAAMA,EAAUV,EAAeW,aAG/B,MAAO3+D,GAAK,OAGZ,MAAOu+D,EAAaG,EAAQlrE,OAAQ,CAGhC,GAAI+qE,GAAcjF,EAAY,CAG1B,IAAIla,EAAUsf,EAAQ7U,UAAUyP,EAAYiF,GACxCrH,EAAawH,EAAQ7U,UAAU0U,EAAYA,EAAW,GAM1D,GAHAp4D,EAASjL,KAAKkkD,GAGK,MAAf8X,EAAoB,CAGpB,IAAIhb,EAAS/1C,EAAS5J,QAGlBg4B,EAAO+jB,eACP/jB,EAAO+jB,cAAc4D,EAAQ/1C,GAGjCA,EAAS3S,OAAS,EAMtB8lE,EAAaiF,EAAa,EAK9B,IAAIK,EAAYF,EAAQ3yD,QAAQ,IAAKutD,GACrC,IAAmB,IAAfsF,EAmCC,CACDtF,EAAaoF,EAAQlrE,OACrB,MAlCA,IAAIA,EAASkL,SAASggE,EAAQ7U,UAAU0U,EAAW,EAAGK,IAGtD,GAAe,IAAXprE,EAAc,CAGV4qE,GACAjiB,cAAciiB,GAGlBJ,EAAeJ,mBAAqB,KACpCI,EAAea,QAGXR,GACAF,EAAeE,GAGnB,MAKJ/E,EAAasF,EAAY,EAGzBL,EAAajF,EAAa9lE,UAtHjB,OAAb4qE,GACAjiB,cAAciiB,GAyItBJ,EAAeJ,mBADflB,IAAgBF,EACoB,WAIE,IAA9BwB,EAAeH,aACfS,IACIA,GAAoB,IACpB5B,EAAcD,EACduB,EAAeJ,mBAAqBY,IAI5CA,KAMgCA,EAExCA,IA9RJrrE,KAAKujD,YAAc,WAGf,GAAKniB,EAAO8gB,eAIa,IAArBz3C,UAAUpK,OAAd,CAoBA,IAHA,IAAIulB,EAAUqc,EAAWx3B,UAAU,IAG1B/J,EAAE,EAAGA,EAAE+J,UAAUpK,OAAQK,IAC9BklB,GAAW,IAAMqc,EAAWx3B,UAAU/J,IAG1CklB,GAAW,IAGX6jD,GAAuB7jD,EAGlB4jD,GACDc,IApBJ,SAASroC,EAAW3+B,GAChB,IAAIstB,EAAS,IAAIvuB,OAAOiB,GACxB,OAAOstB,EAAOvwB,OAAS,IAAMuwB,IAkRrC,IAAI+6C,EAAa,EAEjB,SAASL,IAGL,IAAIT,EAAiB,IAAIL,eAMzB,OALAK,EAAejjE,KAAK,MAAOuhE,EAAc/nC,EAAOknC,KAAO,IAAOqD,KAC9Dd,EAAenB,gBAAkBA,EACjCK,EAAgBc,EAAgBf,GAChCe,EAAeD,KAAK,MAEbC,EAIX7qE,KAAKqjC,QAAU,SAAStjC,GAGpBoqE,IAGA/oC,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAMgnC,YAGvC,IAAIkD,EAAyB,IAAIpB,eACjCoB,EAAuBnB,mBAAqB,WAEE,IAAtCmB,EAAuBlB,aAIW,MAAlCkB,EAAuB1yB,QAK3BixB,IAGA/oC,EAAOinC,QAAQuD,EAAuBJ,cAGtCpqC,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAM8mC,MAGvCvnB,EAAegI,aAAY,WACvB7nB,EAAOmiB,YAAY,SACpBsmB,GAGHmB,EAAeM,MAlBXX,EAAsBiB,KAsB9BA,EAAuBhkE,KAAK,OAAQshE,GAAgB,GACpD0C,EAAuBlC,gBAAkBA,EACzCK,EAAgB6B,EAAwB9B,GACxC8B,EAAuB1B,iBAAiB,eAAgB,oDACxD0B,EAAuBhB,KAAK7qE,IAIhCC,KAAK6hC,WAAa,WACduoC,EAAa,IAAI/oC,EAAUsd,OAAOtd,EAAUsd,OAAOC,KAAKC,QAAS,uBAKzExd,EAAUynC,WAAWxoE,UAAY,IAAI+gC,EAAUI,OAS/CJ,EAAUC,gBAAkB,SAASynC,GAMjC,IAAI3nC,EAASphC,KAMT6rE,EAAS,KAMTlC,EAAkB,KAQlBC,EAAkB,KASlB3oB,EAAe,KAOf6qB,EAAc,CACd,QAAU,MACV,SAAU,QAWVjC,EAAiB,IAKrB,GAAqC,QAA9Bd,EAAUrS,UAAU,EAAG,IACO,SAA9BqS,EAAUrS,UAAU,EAAG,GAAe,CAEzC,IAAIqV,EAAWD,EAAY76D,OAAOmgD,SAAS2a,UAG3C,GAAkC,MAA9BhD,EAAUrS,UAAU,EAAG,GACvBqS,EACIgD,EACE,KAAO96D,OAAOmgD,SAAS4a,KACvBjD,MAGL,CAGD,IAAIkD,EAAQh7D,OAAOmgD,SAAS8a,SAASC,YAAY,KAC7C16D,EAAQR,OAAOmgD,SAAS8a,SAASxV,UAAU,EAAGuV,EAAQ,GAG1DlD,EACIgD,EACE,KAAO96D,OAAOmgD,SAAS4a,KACvBv6D,EACAs3D,GAYd,SAASoB,IAGLl5D,OAAO7F,aAAau+D,GACpB14D,OAAO7F,aAAaw+D,GAKhBxoC,EAAOI,QAAUH,EAAUI,OAAOC,MAAM+mC,UACxCrnC,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAM8mC,MAG3CmB,EAAkB14D,OAAOzF,YAAW,WAChCwD,QAAQoM,IAAI,mBACZgvD,EAAa,IAAI/oC,EAAUsd,OAAOtd,EAAUsd,OAAOC,KAAKyrB,iBAAkB,sBAC3EjpC,EAAOunC,gBAGViB,EAAkB34D,OAAOzF,YAAW,WAChCwD,QAAQoM,IAAI,mBACZgmB,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAM+mC,YACxCrnC,EAAOwnC,mBAad,SAASwB,EAAalxB,GAGlBjoC,OAAO7F,aAAau+D,GACpB14D,OAAO7F,aAAaw+D,GAGpB34D,OAAO+3C,cAAc/H,GAErBjyC,QAAQoM,IAAI,8BAA8B89B,EAAOr7B,uBAAuBujB,EAAOI,SAE3EJ,EAAOI,QAAUH,EAAUI,OAAOC,MAAMC,SAIxCuX,EAAOr7B,OAASwjB,EAAUsd,OAAOC,KAAKC,SAAWzd,EAAO+B,SACxD/B,EAAO+B,QAAQ+V,GAGnB9X,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAMC,QAEvCkqC,EAAOlmE,SAIX3F,KAAKujD,YAAc,SAASvwC,GAGxB,GAAKouB,EAAO8gB,eAIa,IAArBz3C,UAAUpK,OAAd,CAoBA,IAHA,IAAIulB,EAAUqc,EAAWx3B,UAAU,IAG1B/J,EAAE,EAAGA,EAAE+J,UAAUpK,OAAQK,IAC9BklB,GAAW,IAAMqc,EAAWx3B,UAAU/J,IAG1CklB,GAAW,IAEXimD,EAAOjB,KAAKhlD,GAfZ,SAASqc,EAAW3+B,GAChB,IAAIstB,EAAS,IAAIvuB,OAAOiB,GACxB,OAAOstB,EAAOvwB,OAAS,IAAMuwB,IAiBrC5wB,KAAKqjC,QAAU,SAAStjC,GAEpBoqE,IAGA/oC,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAMgnC,YAGvCmD,EAAS,IAAIO,UAAUrD,EAAY,IAAMhpE,EAAM,aAE/C8rE,EAAOQ,OAAS,SAASpU,GACrBjpD,QAAQoM,IAAI,sBACZ+uD,IAGAlpB,EAAegI,aAAY,WACvB7nB,EAAOmiB,YAAYliB,EAAUI,OAAOonC,qBAChC,QAAQ,IAAIjY,MAAOC,aACxBgZ,IAIPgC,EAAOjpC,QAAU,SAASq1B,GAEtBjpD,QAAQoM,IAAI,+BAA+B40C,KAAKluC,UAAUm2C,EAAM,KAAK,IAEjEA,EAAMxS,OACN2kB,EAAa,IAAI/oC,EAAUsd,OAAOpzC,SAAS0sD,EAAMxS,QAASwS,EAAMxS,SAI3DwS,EAAMp6C,KACXusD,EAAa,IAAI/oC,EAAUsd,OAAOtd,EAAUsd,OAAOC,KAAK2oB,kBAAkBtP,EAAMp6C,QAIhFusD,EAAa,IAAI/oC,EAAUsd,OAAOtd,EAAUsd,OAAOC,KAAK4oB,sBAIhEqE,EAAOS,UAAY,SAASrU,GAGxBkS,IAEA,IAEIiB,EAFAxlD,EAAUqyC,EAAMl4D,KAChBomE,EAAa,EAGbnzD,EAAW,GAEf,EAAG,CAGC,IAAIy4D,EAAY7lD,EAAQhN,QAAQ,IAAKutD,GACrC,IAAmB,IAAfsF,EAAkB,CAGlB,IAAIprE,EAASkL,SAASqa,EAAQ8wC,UAAU0U,EAAW,EAAGK,IAGtDtF,EAAasF,EAAY,EAGzBL,EAAajF,EAAa9lE,OAM1B+pE,EAAa,IAAI/oC,EAAUsd,OAAOtd,EAAUsd,OAAOC,KAAK0oB,aAAc,4BAG1E,IAAIrb,EAAUrmC,EAAQ8wC,UAAUyP,EAAYiF,GACxCrH,EAAan+C,EAAQ8wC,UAAU0U,EAAYA,EAAW,GAM1D,GAHAp4D,EAASjL,KAAKkkD,GAGK,MAAf8X,EAAoB,CAGpB,IAAIhb,EAAS/1C,EAAS5J,QAGF,OAAhBg4B,EAAOknC,OAGHvf,IAAW1nB,EAAUI,OAAOonC,sBAC5BznC,EAAOinC,QAAQr1D,EAAS,IAG5BouB,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAM8mC,OAKvCzf,IAAW1nB,EAAUI,OAAOonC,sBAAwBznC,EAAO+jB,eAC3D/jB,EAAO+jB,cAAc4D,EAAQ/1C,GAGjCA,EAAS3S,OAAS,EAMtB8lE,EAAaiF,EAAa,QAErBjF,EAAavgD,EAAQvlB,UAMtCL,KAAK6hC,WAAa,WACduoC,EAAa,IAAI/oC,EAAUsd,OAAOtd,EAAUsd,OAAOC,KAAKC,QAAS,uBAKzExd,EAAUC,gBAAgBhhC,UAAY,IAAI+gC,EAAUI,OAcpDJ,EAAUkrC,cAAgB,SAASC,GAgC/B,IA1BA,IAOIC,EAPAC,EAAiB1sE,KAcjB2sE,EAAU,GASVC,EAAkB,KAGblsE,EAAE,EAAGA,EAAE+J,UAAUpK,OAAQK,IAC9BisE,EAAQ5kE,KAAK0C,UAAU/J,IAQ3B,SAASgO,EAAO0yB,GAGZsrC,EAAe7qC,WAAcT,EAAOS,WACpC6qC,EAAenpB,YAAcniB,EAAOmiB,YAepC,IAAIspB,EAAa,SAAoB3zB,GAGjC,GAAIA,GAAUA,EAAOr7B,OAASwjB,EAAUsd,OAAOC,KAAKyrB,iBAEhD,OADAsC,EAAU,GACH,KAIX,IAAIG,EAAcH,EAAQvjE,QAU1B,OAPI0jE,IACA1rC,EAAO+B,QAAU,KACjB/B,EAAO+jB,cAAgB,KACvB/jB,EAAOG,cAAgB,KACvB7yB,EAAOo+D,IAGJA,GAUX,SAASC,IAEL3rC,EAAOG,cAAgBmrC,EAAenrC,cACtCH,EAAO+jB,cAAgBunB,EAAevnB,cACtC/jB,EAAO+B,QAAUupC,EAAevpC,QAChC/B,EAAOmnC,OAASmE,EAAenE,OAG3BnnC,EAAOknC,MACPoE,EAAerE,QAAQjnC,EAAOknC,MAElCsE,EAAkBxrC,EAKtBA,EAAOG,cAAgB,SAASC,GAE5B,OAAQA,GAGJ,KAAKH,EAAUI,OAAOC,MAAM8mC,KACxBuE,IACIL,EAAenrC,eACfmrC,EAAenrC,cAAcC,GACjC,MAGJ,KAAKH,EAAUI,OAAOC,MAAMC,QACnBkrC,KAAgBH,EAAenrC,eAChCmrC,EAAenrC,cAAcC,GACjC,QAOZJ,EAAO+jB,cAAgB,SAAS4D,EAAQ/1C,GAGpC+5D,IAGIL,EAAevnB,eACfunB,EAAevnB,cAAc4D,EAAQ/1C,IAK7CouB,EAAO+B,QAAU,SAAS+V,IAGjB2zB,EAAW3zB,IAAWwzB,EAAevpC,SACtCupC,EAAevpC,QAAQ+V,IAK/B9X,EAAOiC,QAAQopC,GAInBzsE,KAAKqjC,QAAU,SAAStjC,GAGpB0sE,EAAe1sE,EAGf,IAAI+sE,EAAcF,GAAoCD,EAAQvjE,QAG1D0jE,EACAp+D,EAAOo+D,GAGFJ,EAAevpC,SACpBupC,EAAevpC,QAAQ9B,EAAUsd,OAAOC,KAAK0oB,aAAc,wBAMvEjmC,EAAUkrC,cAAcjsE,UAAY,IAAI+gC,EAAUI,OAsBlDJ,EAAU2rC,iBAAmB,SAA0B9rC,EAAK8nC,EAAaC,GAOrE,IAAI7nC,EAASphC,KASTitE,EAAM,KASNnD,EAAeb,GAAsB,GAazC,SAASc,EAAgBC,EAASC,GAC9B,IAAK,IAAIhoE,KAAQgoE,EACbD,EAAQE,iBAAiBjoE,EAAMgoE,EAAQhoE,IAI/CjC,KAAKujD,YAAc,SAAqBvwC,KAIxChT,KAAKqjC,QAAU,SAAiBtjC,GAG5BqhC,EAAOS,aAGPT,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAMgnC,YAGvCuE,EAAM,IAAIzC,eACVyC,EAAIrlE,KAAK,MAAOs5B,GAChB+rC,EAAIvD,kBAAoBV,EACxBe,EAAgBkD,EAAKnD,GACrBmD,EAAIC,aAAe,OACnBD,EAAIrC,KAAK,MAET,IAAIn0D,EAAS,EAGTwuC,EAAS,IAAI5jB,EAAU6jB,OAG3BD,EAAOE,cAAgB,SAA6B4D,EAAQmc,GACpD9jC,EAAO+jB,eACP/jB,EAAO+jB,cAAc4D,EAAQmc,IAIrC+H,EAAIxC,mBAAqB,WAGrB,GAAuB,IAAnBwC,EAAIvC,YAAuC,IAAnBuC,EAAIvC,WAAkB,CAG9CtpC,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAM8mC,MAEvC,IAAIpyD,EAAS62D,EAAIzB,aACbnrE,EAAS+V,EAAO/V,OAGhBoW,EAASpW,IACT4kD,EAAOmD,QAAQhyC,EAAOsgD,UAAUjgD,IAChCA,EAASpW,GAMM,IAAnB4sE,EAAIvC,YACJtpC,EAAOS,cAKforC,EAAI9pC,QAAU,WAGN/B,EAAO+B,SACP/B,EAAO+B,QAAQ,IAAI9B,EAAUsd,OACzBtd,EAAUsd,OAAOC,KAAKooB,aAAaiG,EAAI/zB,QAAS+zB,EAAIlC,aAE5D3pC,EAAOS,eAKf7hC,KAAK6hC,WAAa,WAGVorC,IACAA,EAAIvB,QACJuB,EAAM,MAIV7rC,EAAO6gB,SAAS5gB,EAAUI,OAAOC,MAAMC,UAM/CN,EAAU2rC,iBAAiB1sE,UAAY,IAAI+gC,EAAUI,OAqBjDJ,EAAYA,GAAa,GAU7BA,EAAU8rC,YAAc,QAqBpB9rC,EAAYA,GAAa,GAW7BA,EAAU0B,YAAc,WAQpB/iC,KAAK05C,KAAO,cAkBhBrY,EAAU0B,YAAY4W,gBAAkB,SAAyB5U,GAI7D,OAAO,GAcX1D,EAAU0B,YAAYC,kBAAoB,WAItC,MAAO,IAwBX3B,EAAU0B,YAAYJ,YAAc,SAAqBJ,EAAQ+f,EAAOvd,GAGpE,OAAO,MAGXlkC,EAAOC,QAAUugC,G,qBC14ajB,IAAIzhC,EAAa,EAAQ,QACrBuoB,EAAQ,EAAQ,QAChBsB,EAAU,EAAQ,QAClBmc,EAAY,EAAQ,QACpB/W,EAAY,EAAQ,SACpBu+C,EAAmB,EAAQ,QAC3BC,EAAgB,EAAQ,QACxBC,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBj6B,EAAqB,EAAQ,QAC7Bk6B,EAAU,EAAQ,QAClBC,EAAa,EAAQ,QACrB5tE,EAAO,EAAQ,QACf6tE,EAAW,EAAQ,QACnBzmD,EAAU,EAAQ,QAkCtB,SAAS0mD,EAAoBjrB,EAAQrpC,GAInC,IAHA,IAAI8R,EAAOu3B,EAAOv3B,KACduH,EAAM26C,EAAch4B,aAAah8B,GAE5B3Y,EAAI,EAAGA,EAAIgyB,EAAIryB,OAAQK,IAI9B,IAHA,IAAI+qB,EAAMiH,EAAIhyB,GAAG,GACb6qB,EAAMmH,EAAIhyB,GAAG,GAERstB,GAAK,EAAGA,GAAK,EAAGA,IACvB,KAAIvC,EAAMuC,IAAM,GAAK7C,GAAQM,EAAMuC,GAEnC,IAAK,IAAIlU,GAAK,EAAGA,GAAK,EAAGA,IACnByR,EAAMzR,IAAM,GAAKqR,GAAQI,EAAMzR,IAE9BkU,GAAK,GAAKA,GAAK,IAAY,IAANlU,GAAiB,IAANA,IAClCA,GAAK,GAAKA,GAAK,IAAY,IAANkU,GAAiB,IAANA,IAChCA,GAAK,GAAKA,GAAK,GAAKlU,GAAK,GAAKA,GAAK,EACpC4oC,EAAOp4B,IAAImB,EAAMuC,EAAGzC,EAAMzR,GAAG,GAAM,GAEnC4oC,EAAOp4B,IAAImB,EAAMuC,EAAGzC,EAAMzR,GAAG,GAAO,IAc9C,SAAS8zD,EAAoBlrB,GAG3B,IAFA,IAAIv3B,EAAOu3B,EAAOv3B,KAET6C,EAAI,EAAGA,EAAI7C,EAAO,EAAG6C,IAAK,CACjC,IAAI1qB,EAAQ0qB,EAAI,IAAM,EACtB00B,EAAOp4B,IAAI0D,EAAG,EAAG1qB,GAAO,GACxBo/C,EAAOp4B,IAAI,EAAG0D,EAAG1qB,GAAO,IAY5B,SAASuqE,EAAuBnrB,EAAQrpC,GAGtC,IAFA,IAAIqZ,EAAM06C,EAAiB/3B,aAAah8B,GAE/B3Y,EAAI,EAAGA,EAAIgyB,EAAIryB,OAAQK,IAI9B,IAHA,IAAI+qB,EAAMiH,EAAIhyB,GAAG,GACb6qB,EAAMmH,EAAIhyB,GAAG,GAERstB,GAAK,EAAGA,GAAK,EAAGA,IACvB,IAAK,IAAIlU,GAAK,EAAGA,GAAK,EAAGA,KACZ,IAAPkU,GAAkB,IAANA,IAAkB,IAAPlU,GAAkB,IAANA,GAC9B,IAANkU,GAAiB,IAANlU,EACZ4oC,EAAOp4B,IAAImB,EAAMuC,EAAGzC,EAAMzR,GAAG,GAAM,GAEnC4oC,EAAOp4B,IAAImB,EAAMuC,EAAGzC,EAAMzR,GAAG,GAAO,GAa9C,SAASg0D,EAAkBprB,EAAQrpC,GAKjC,IAJA,IAEIoS,EAAKF,EAAK1L,EAFVsL,EAAOu3B,EAAOv3B,KACd4iD,EAAOP,EAAQ/3B,eAAep8B,GAGzB3Y,EAAI,EAAGA,EAAI,GAAIA,IACtB+qB,EAAMxhB,KAAKuhB,MAAM9qB,EAAI,GACrB6qB,EAAM7qB,EAAI,EAAIyqB,EAAO,EAAI,EACzBtL,EAA4B,KAApBkuD,GAAQrtE,EAAK,GAErBgiD,EAAOp4B,IAAImB,EAAKF,EAAK1L,GAAK,GAC1B6iC,EAAOp4B,IAAIiB,EAAKE,EAAK5L,GAAK,GAW9B,SAASmuD,EAAiBtrB,EAAQppC,EAAsBE,GACtD,IAEI9Y,EAAGmf,EAFHsL,EAAOu3B,EAAOv3B,KACd4iD,EAAON,EAAWh4B,eAAen8B,EAAsBE,GAG3D,IAAK9Y,EAAI,EAAGA,EAAI,GAAIA,IAClBmf,EAA4B,KAApBkuD,GAAQrtE,EAAK,GAGjBA,EAAI,EACNgiD,EAAOp4B,IAAI5pB,EAAG,EAAGmf,GAAK,GACbnf,EAAI,EACbgiD,EAAOp4B,IAAI5pB,EAAI,EAAG,EAAGmf,GAAK,GAE1B6iC,EAAOp4B,IAAIa,EAAO,GAAKzqB,EAAG,EAAGmf,GAAK,GAIhCnf,EAAI,EACNgiD,EAAOp4B,IAAI,EAAGa,EAAOzqB,EAAI,EAAGmf,GAAK,GACxBnf,EAAI,EACbgiD,EAAOp4B,IAAI,EAAG,GAAK5pB,EAAI,EAAI,EAAGmf,GAAK,GAEnC6iC,EAAOp4B,IAAI,EAAG,GAAK5pB,EAAI,EAAGmf,GAAK,GAKnC6iC,EAAOp4B,IAAIa,EAAO,EAAG,EAAG,GAAG,GAS7B,SAAS8iD,EAAWvrB,EAAQ3iD,GAO1B,IANA,IAAIorB,EAAOu3B,EAAOv3B,KACdxgB,GAAO,EACP8gB,EAAMN,EAAO,EACb+iD,EAAW,EACXC,EAAY,EAEP5iD,EAAMJ,EAAO,EAAGI,EAAM,EAAGA,GAAO,EAAG,CAC9B,IAARA,GAAWA,IAEf,MAAO,EAAM,CACX,IAAK,IAAIzR,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAK4oC,EAAOxzB,WAAWzD,EAAKF,EAAMzR,GAAI,CACpC,IAAIvK,GAAO,EAEP4+D,EAAYpuE,EAAKM,SACnBkP,EAAiD,KAAvCxP,EAAKouE,KAAeD,EAAY,IAG5CxrB,EAAOp4B,IAAImB,EAAKF,EAAMzR,EAAGvK,GACzB2+D,KAEkB,IAAdA,IACFC,IACAD,EAAW,GAOjB,GAFAziD,GAAO9gB,EAEH8gB,EAAM,GAAKN,GAAQM,EAAK,CAC1BA,GAAO9gB,EACPA,GAAOA,EACP,SAcR,SAASyjE,EAAY/0D,EAASC,EAAsB+0D,GAElD,IAAIj4D,EAAS,IAAIwvB,EAEjByoC,EAAS1zC,SAAQ,SAAU56B,GAEzBqW,EAAOxV,IAAIb,EAAKE,KAAKygC,IAAK,GAS1BtqB,EAAOxV,IAAIb,EAAKQ,YAAaV,EAAKyuE,sBAAsBvuE,EAAKE,KAAMoZ,IAGnEtZ,EAAKS,MAAM4V,MAIb,IAAIm4D,EAAiBpmD,EAAM4f,wBAAwB1uB,GAC/Cm1D,EAAmBjB,EAAOtjD,uBAAuB5Q,EAASC,GAC1Dm1D,EAA+D,GAArCF,EAAiBC,GAO3Cp4D,EAAO2vB,kBAAoB,GAAK0oC,GAClCr4D,EAAOxV,IAAI,EAAG,GAQhB,MAAOwV,EAAO2vB,kBAAoB,IAAM,EACtC3vB,EAAO0vB,OAAO,GAQhB,IADA,IAAI4oC,GAAiBD,EAAyBr4D,EAAO2vB,mBAAqB,EACjErlC,EAAI,EAAGA,EAAIguE,EAAehuE,IACjC0V,EAAOxV,IAAIF,EAAI,EAAI,GAAO,IAAM,GAGlC,OAAOiuE,EAAgBv4D,EAAQiD,EAASC,GAY1C,SAASq1D,EAAiBluE,EAAW4Y,EAASC,GAmC5C,IAjCA,IAAIi1D,EAAiBpmD,EAAM4f,wBAAwB1uB,GAG/Cm1D,EAAmBjB,EAAOtjD,uBAAuB5Q,EAASC,GAG1Ds1D,EAAqBL,EAAiBC,EAGtCK,EAAgBtB,EAAO3jD,eAAevQ,EAASC,GAG/Cw1D,EAAiBP,EAAiBM,EAClCE,EAAiBF,EAAgBC,EAEjCE,EAAyB/kE,KAAKuhB,MAAM+iD,EAAiBM,GAErDI,EAAwBhlE,KAAKuhB,MAAMojD,EAAqBC,GACxDK,EAAwBD,EAAwB,EAGhDE,EAAUH,EAAyBC,EAGnCG,EAAK,IAAI97B,EAAmB67B,GAE5B14D,EAAS,EACT44D,EAAS,IAAIvgE,MAAM+/D,GACnBS,EAAS,IAAIxgE,MAAM+/D,GACnBU,EAAc,EACdn5D,EAASxW,EAAWO,KAAKM,EAAU2V,QAG9BnN,EAAI,EAAGA,EAAI4lE,EAAe5lE,IAAK,CACtC,IAAIumE,EAAWvmE,EAAI8lE,EAAiBE,EAAwBC,EAG5DG,EAAOpmE,GAAKmN,EAAOqM,MAAMhM,EAAQA,EAAS+4D,GAG1CF,EAAOrmE,GAAKmmE,EAAG37B,OAAO47B,EAAOpmE,IAE7BwN,GAAU+4D,EACVD,EAActlE,KAAK0a,IAAI4qD,EAAaC,GAKtC,IAEI9uE,EAAGstB,EAFHjuB,EAAOH,EAAW4mB,MAAM+nD,GACxB9gE,EAAQ,EAIZ,IAAK/M,EAAI,EAAGA,EAAI6uE,EAAa7uE,IAC3B,IAAKstB,EAAI,EAAGA,EAAI6gD,EAAe7gD,IACzBttB,EAAI2uE,EAAOrhD,GAAG3tB,SAChBN,EAAK0N,KAAW4hE,EAAOrhD,GAAGttB,IAMhC,IAAKA,EAAI,EAAGA,EAAIyuE,EAASzuE,IACvB,IAAKstB,EAAI,EAAGA,EAAI6gD,EAAe7gD,IAC7BjuB,EAAK0N,KAAW6hE,EAAOthD,GAAGttB,GAI9B,OAAOX,EAYT,SAAS0vE,EAAc1vE,EAAMsZ,EAASC,EAAsBE,GAC1D,IAAI60D,EAEJ,GAAIpnD,EAAQlnB,GACVsuE,EAAWX,EAASgC,UAAU3vE,OACzB,IAAoB,kBAATA,EAehB,MAAM,IAAIsI,MAAM,gBAdhB,IAAIsnE,EAAmBt2D,EAEvB,IAAKs2D,EAAkB,CACrB,IAAIC,EAAclC,EAASmC,SAAS9vE,GAGpC4vE,EAAmBnC,EAAQsC,sBAAsBF,EAC/Ct2D,GAKJ+0D,EAAWX,EAAS/8C,WAAW5wB,EAAM4vE,GAAoB,IAM3D,IAAII,EAAcvC,EAAQsC,sBAAsBzB,EAC5C/0D,GAGJ,IAAKy2D,EACH,MAAM,IAAI1nE,MAAM,2DAIlB,GAAKgR,GAIE,GAAIA,EAAU02D,EACnB,MAAM,IAAI1nE,MAAM,wHAE0C0nE,EAAc,YANxE12D,EAAU02D,EAUZ,IAAIC,EAAW5B,EAAW/0D,EAASC,EAAsB+0D,GAGrD4B,EAAc9nD,EAAM2f,cAAczuB,GAClCwS,EAAU,IAAIgD,EAAUohD,GAgC5B,OA7BAtC,EAAmB9hD,EAASxS,GAC5Bu0D,EAAmB/hD,GACnBgiD,EAAsBhiD,EAASxS,GAM/B20D,EAAgBniD,EAASvS,EAAsB,GAE3CD,GAAW,GACby0D,EAAiBjiD,EAASxS,GAI5B40D,EAAUpiD,EAASmkD,GAEfjpD,MAAMvN,KAERA,EAAc8zD,EAAYptC,YAAYrU,EACpCmiD,EAAgBj5D,KAAK,KAAM8W,EAASvS,KAIxCg0D,EAAYttC,UAAUxmB,EAAaqS,GAGnCmiD,EAAgBniD,EAASvS,EAAsBE,GAExC,CACLqS,QAASA,EACTxS,QAASA,EACTC,qBAAsBA,EACtBE,YAAaA,EACb60D,SAAUA,GAadvtE,EAAQiY,OAAS,SAAiBhZ,EAAM4rB,GACtC,GAAoB,qBAAT5rB,GAAiC,KAATA,EACjC,MAAM,IAAIsI,MAAM,iBAGlB,IACIgR,EACA4lB,EAFA3lB,EAAuBmQ,EAAQK,EAenC,MAXuB,qBAAZ6B,IAETrS,EAAuBmQ,EAAQtpB,KAAKwrB,EAAQrS,qBAAsBmQ,EAAQK,GAC1EzQ,EAAUm0D,EAAQrtE,KAAKwrB,EAAQtS,SAC/B4lB,EAAOquC,EAAYntE,KAAKwrB,EAAQnS,aAE5BmS,EAAQlS,YACV0O,EAAM+f,kBAAkBvc,EAAQlS,aAI7Bg2D,EAAa1vE,EAAMsZ,EAASC,EAAsB2lB,K,qBC3d3D,IAAIjkB,EAAS,EAAQ,QAErBla,EAAQ2yC,OAASz4B,EAAOy4B,OACxB3yC,EAAQovE,OAASl1D,EAAOk1D,Q,sJCbT,SAAA5tE,EAAA,qBAA0B,CACvCL,KADuC,eAGvCC,MAAO,CACLiuE,YAAa,CAAC9tE,OADT,QAELsM,aAActM,QAGhBkB,SAAU,CACR6sE,oBADQ,WAEN,OAAOrlE,OAAO/K,KAAd,cAEFqwE,YAJQ,WAKN,OAAOrwE,KAAKowE,oBACR,CAAEE,cAAgB,EAAItwE,KAAL,wBAAuC,UAD5D,GAIFuwE,cATQ,WAUN,OAAKvwE,KAAL,YAEOA,KAAK4D,eAAe,MAAO,CAChCoC,MAAOhG,KADyB,YAEhCyD,YAAa,wBAJe,KASlC4B,QAAS,CACPQ,WADO,WAEL,OAAO7F,KAAK4D,eAAe,MAAO,CAChCH,YADgC,wBAEhCC,MAAO1D,KAAK2O,cACX3O,KAAKwF,OAHR,WAOJY,OApCuC,SAoCjC,GACJ,OAAOC,EAAE,MAAO,CACd5C,YADc,eAEduC,MAAOhG,KAFO,iBAGdqE,GAAIrE,KAAK25B,YACR,CACD35B,KADC,cAEDA,KANF,kBC9CJ,I,oCC0BMwwE,EAAiC,qBAAXv/D,QAA0B,yBAAtD,OAGe,cAAA3O,EAAA,MAAO,EAAP,eAGN,CACPL,KADO,QAGPgE,WAAY,CAAEwqE,YAAA,MAEdvuE,MAAO,CACL4vD,IADK,OAEL4e,QAFK,QAGLtiE,MAHK,QAILuiE,SAJK,OAKLC,QALK,OAMLjlD,QAAS,CACPnpB,KADO,OAIPG,QAAS,iBAAO,CACdiI,UADc,EAEdimE,gBAFc,EAGdC,eAAWrqE,KAGfgiC,SAAU,CACRjmC,KADQ,OAERG,QAAS,iBAEXyzC,MApBK,OAqBLr7B,IAAK,CACHvY,KAAM,CAACH,OADJ,QAEHM,QAAS,IAEXouE,OAzBK,OA0BL3uE,WAAY,CACVI,KAAM,CAACS,QADG,QAEVN,QAAS,oBAIb5C,KArCO,WAsCL,MAAO,CACLixE,WADK,GAELpkD,MAFK,KAGLqkD,WAHK,EAILC,2BAJK,EAKLC,kBALK,EAMLvnC,UAAU,IAIdrmC,SAAU,CACR6sE,oBADQ,WAEN,OAAOrlE,OAAO/K,KAAKoxE,cAAcC,QAAUrxE,KAA3C,wBAEFoxE,cAJQ,WAKN,OAAOpxE,KAAK+a,KAAL,WAAY,eAAO/a,KAAP,KACf,CACA+a,IAAK/a,KAAK+a,IADV,IAEAg2D,OAAQ/wE,KAAK+wE,QAAU/wE,KAAK+a,IAF5B,OAGA61D,QAAS5wE,KAAK4wE,SAAW5wE,KAAK+a,IAH9B,QAIAs2D,OAAQtmE,OAAO/K,KAAKmwE,aAAenwE,KAAK+a,IAA1B,SACZ,CACFA,IAAK/a,KADH,IAEF+wE,OAAQ/wE,KAFN,OAGF4wE,QAAS5wE,KAHP,QAIFqxE,OAAQtmE,OAAO/K,KAAKmwE,aAAN,KAGpBmB,cAlBQ,WAmBN,KAAMtxE,KAAKoxE,cAAcr2D,KAAO/a,KAAKoxE,cAA/B,SAAwDpxE,KAA9D,UAA8E,MAAO,GAErF,IAAMuxE,EAAN,GACMx2D,EAAM/a,KAAKixE,UAAYjxE,KAAKoxE,cAAtB,QAA8CpxE,KAA1D,WAEIA,KAAJ,UAAmBuxE,EAAA,+BAAwCvxE,KAAxC,eACnB,GAASuxE,EAAA,6BAET,IAAM3kD,EAAQ5sB,KAAK4D,eAAe,MAAO,CACvCH,YADuC,iBAEvCC,MAAO,CACL,0BAA2B1D,KADtB,UAEL,0BAA2BA,KAFtB,QAGL,yBAA0BA,KAAK0wE,SAEjC1qE,MAAO,CACLurE,gBAAiBA,EAAA,KADZ,MAELC,mBAAoBxxE,KAAKyoC,UAE3B9/B,KAAM3I,KAAKixE,YAIb,OAAKjxE,KAAL,WAEOA,KAAK4D,eAAe,aAAc,CACvCK,MAAO,CACLhC,KAAMjC,KADD,WAELC,KAAM,WAEP,CALH,IAF6B2sB,IAWjCxgB,MAAO,CACL2O,IADK,WAGE/a,KAAL,UACKA,KAAKyxE,YADWzxE,KAAKkhB,UAAKza,OAAWA,GAA1C,IAGF,4BAA6B,UAG/B4F,QA9GO,WA+GLrM,KAAA,QAGFqF,QAAS,CACP6b,KADO,SACH,OAQF,IACEsvD,GAAA,GAECxwE,KAHH,OAMA,GAAIA,KAAKoxE,cAAT,QAAgC,CAC9B,IAAMM,EAAU,IAAhB,MACAA,EAAA,IAAc1xE,KAAKoxE,cAAnB,QACApxE,KAAA,oBAGEA,KAAKoxE,cAAT,KAA4BpxE,KAAKyxE,cAEnCE,OAvBO,WAwBL3xE,KAAA,SACAA,KAAA,aACAA,KAAA,aAAmBA,KAAnB,KAGEA,KAAK4sB,QACJ5sB,KAAKoxE,cAAcr2D,IAAI63B,SAAS,SAAW5yC,KAAKoxE,cAAcr2D,IAAI62D,WAFrE,yBAIM5xE,KAAK4sB,MAAMilD,eAAiB7xE,KAAK4sB,MAArC,cACE5sB,KAAA,aAAoBA,KAAK4sB,MAAzB,aACA5sB,KAAA,sBAA6BA,KAAK4sB,MAAMukD,aAAenxE,KAAK4sB,MAA5D,eAEA5sB,KAAA,0BAIN8xE,QAxCO,WAyCL9xE,KAAA,YACAA,KAAA,cAAoBA,KAApB,MAEF+xE,OA5CO,WA8CD/xE,KAAJ,QAAgBA,KAAKgxE,WAAahxE,KAAK4sB,MAAMokD,YAAchxE,KAAK4sB,MAAhD,MAElB6kD,UAhDO,WAgDE,WACD7kD,EAAQ,IAAd,MACA5sB,KAAA,QAEA4sB,EAAA,OAAe,WAETA,EAAJ,OACEA,EAAA,gBAAsB,SAAAhS,GACpB,OAAA5L,EAAA,MACE,qEACQ,gBADR,MAEC4L,EAAA,oCAAmCA,EAAnC,SAHQ,IAAX,MADF,KAOQ,EAPR,QASA,YAGJgS,EAAA,QAAgB5sB,KAAhB,QAEAA,KAAA,YACAA,KAAA,QAAe4sB,EAAA,MAAc5sB,KAA7B,OACAA,KAAA,uBAA8B4sB,EAAA,OAAe5sB,KAAKoxE,cAAlD,QACAxkD,EAAA,IAAY5sB,KAAKoxE,cAAjB,IACApxE,KAAA,kBAAwBA,KAAKoxE,cAA7B,KAEApxE,KAAA,aAAoBA,KAAKgyE,YAAzB,GACAhyE,KAAA,UAEFgyE,YA9EO,SA8EI,GAAqD,WAA5BC,EAA4B,uDAArD,IACHC,EAAO,SAAPA,IACJ,IAAM,EAAN,EAAM,cAAiBf,EAAvB,EAAuBA,aAEnBU,GAAJ,GACE,iBACA,wBAA6BV,EAA7B,GACU13C,EAAD,WAAiB,EAAjB,WAAoC,EAApC,UAAJ,MAAyDw4C,GAC9DzmE,WAAW0mE,EAAX,IAIJA,KAEFrsE,WA5FO,WA6FL,IAAM2I,EAAiB,kCAAvB,MAOA,OANIxO,KAAJ,cACEA,KAAA,GAAQwO,EAAR,WAA8B,CAC5BxI,MAAO,CAAEoO,MAAO,GAAF,OAAKpU,KAAKmxE,aAAV,SAIlB,GAEFgB,iBAtGO,WAuGL,GAAInyE,KAAKwF,OAAT,YAA6B,CAC3B,IAAMypC,EAAcjvC,KAAKixE,UACrB,CAACjxE,KAAK4D,eAAe,MAAO,CAC5BH,YAAa,wBACZzD,KAAKwF,OAHU,cAApB,GAMA,OAAKxF,KAAL,WAEOA,KAAK4D,eAAe,aAAc,CACvC1B,MAAO,CACLwT,QADK,EAELzT,KAAMjC,KAAKoC,aAHf,GAF6B6sC,EAAP,MAY5B7oC,OA5OO,SA4OD,GACJ,IAAMyE,EAAO,2BAAb,GAEM9K,EAAO,OAAAqtC,EAAA,MAAUviC,EAAD,KAAa,CACjCpH,YADiC,UAEjCQ,MAAO,CACL,aAAcjE,KADT,IAEL+F,KAAM/F,KAAK8xD,IAAM,WAAQrrD,GAE3B/C,MAAO1D,KAN0B,aASjCiG,WAAYuqE,EACR,CAAC,CACDvuE,KADC,YAEDsvC,UAAW,CAAE6gC,MAAM,GACnB9uE,MAAO,CACL6P,QAASnT,KADJ,KAEL2rB,QAAS3rB,KAAK2rB,gBAGhBllB,IAUN,OAPAoE,EAAA,SAAgB,CACd7K,KADc,cAEdA,KAFc,cAGdA,KAHc,mBAIdA,KAJF,cAOOqG,EAAEwE,EAAD,MAAiBA,EAAzB,c,kCC9SJ,gBAGA,e,mCCHA,YAuBA,IAAIwnE,EAAY,mCACZC,EAAY,CACZ,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAC1C,IAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EAAM,EAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAAM,GAC1C,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,KAG9C,SAASC,EAAa1+B,GAClB,IAAI2+B,EAAWvoE,KAAKuhB,MAAMqoB,EAAKxzC,OAAS,GACxC,OAAOwzC,EAAKxzC,OAAS,IAAM,EAAImyE,EAAUA,EAAW,EAGxD1xE,EAAQ2yC,OAAS,SAASg/B,GAClBxiD,EAAOgB,SAASwhD,KACnBA,EAAQ,IAAIxiD,EAAOwiD,IAEpB,IAAI/xE,EAAI,EACJ6hB,EAAI,EACJmwD,EAAa,EACbzqC,EAAQ,EACR0qC,EAAU,IAAI1iD,EAA6B,EAAtBsiD,EAAaE,IAItC,MAAM/xE,EAAI+xE,EAAMpyE,OAAQ,CACpB,IAAIkrE,EAAUkH,EAAM/xE,GAEjBgyE,EAAa,GACZzqC,EAAQsjC,EAAW,KAAQmH,EAC3BA,GAAcA,EAAa,GAAK,EAChCzqC,EAASA,GAASyqC,GAAgBhyE,EAAI,EAAI+xE,EAAMpyE,OAC5CoyE,EAAM/xE,EAAI,GAAK,IAAO,EAAIgyE,EAC9BhyE,MAEAunC,EAASsjC,GAAY,GAAKmH,EAAa,GAAO,GAC9CA,GAAcA,EAAa,GAAK,EACd,IAAfA,GAAkBhyE,KAGzBiyE,EAAQpwD,GAAK8vD,EAAUv0D,WAAWmqB,GAClC1lB,IAGJ,IAAI7hB,EAAI6hB,EAAG7hB,EAAIiyE,EAAQtyE,OAAQK,IAC3BiyE,EAAQjyE,GAAK,GAGjB,OAAOiyE,GAGX7xE,EAAQovE,OAAS,SAASyC,GACtB,IAEIC,EAFAF,EAAa,EACbG,EAAa,EAEbC,EAAW,EACX7iD,EAAOgB,SAAS0hD,KACnBA,EAAU,IAAI1iD,EAAO0iD,IAMtB,IAJA,IAAIlmB,EAAU,IAAIx8B,EAAOhmB,KAAKuY,KAAsB,EAAjBmwD,EAAQtyE,OAAa,IAIhDK,EAAI,EAAGA,EAAIiyE,EAAQtyE,OAAQK,IAAK,CACvC,GAAkB,KAAfiyE,EAAQjyE,GACV,MAGE,IAAIqyE,EAAcJ,EAAQjyE,GAAK,GAE/B,KAAGqyE,EAAcT,EAAUjyE,QAuB1B,MAAM,IAAIgI,MAAM,mDAtBbwqE,EAAaP,EAAUS,GAEpBL,GAAc,GACbA,GAAcA,EAAa,GAAK,EAEd,IAAfA,GACCE,GAAaC,EACbpmB,EAAQqmB,GAAYF,EACpBE,IACAF,EAAY,GAEZA,GAAa,IAAQC,GAAe,EAAIH,IAG5CA,GAAcA,EAAa,GAAK,EAChCE,GAAa,IAAQC,IAAeH,EACpCjmB,EAAQqmB,GAAYF,EACpBE,IAEAF,EAAY,IAAQC,GAAe,EAAIH,GAOnD,OAAOjmB,EAAQhqC,MAAM,EAAGqwD,M,+DC7H5B,IAAI7zD,EAAS,EAAQ,QACjBnJ,EAAsB,EAAQ,QAC9BoJ,EAAQ,EAAQ,QAEhB8I,EAAY/I,EAAO+I,UACnBjS,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAC7Cg9D,EAAkB,GAAGC,eACrBnrD,EAAS,GAAGrF,MAGZywD,IAAyBlrD,GAAa9I,GAAM,WAC9C8zD,EAAgBr6D,KAAK,IAAIqP,EAAU,OAGjCD,EAAS7I,GAAM,WACjB,MAAO,CAAC,EAAG,GAAG+zD,kBAAoB,IAAIjrD,EAAU,CAAC,EAAG,IAAIirD,sBACnD/zD,GAAM,WACX8I,EAAU1nB,UAAU2yE,eAAet6D,KAAK,CAAC,EAAG,OAK9C3C,EAAuB,kBAAkB,WACvC,OAAOg9D,EAAgB5xD,MAAM8xD,EAAuBprD,EAAOnP,KAAK5C,EAAY/V,OAAS+V,EAAY/V,MAAOyK,aACvGsd,I,mCC1BH;;;;;;;AAUA,IAAIorD,EAAS,EAAQ,QACjBC,EAAU,EAAQ,QAClBnsD,EAAU,EAAQ,QAuCtB,SAAS6I,IACP,IACE,IAAIxR,EAAM,IAAIvC,WAAW,GAEzB,OADAuC,EAAIyR,UAAY,CAACA,UAAWhU,WAAWzb,UAAW0vB,IAAK,WAAc,OAAO,KACvD,KAAd1R,EAAI0R,OACiB,oBAAjB1R,EAAIgU,UACuB,IAAlChU,EAAIgU,SAAS,EAAG,GAAG/U,WACvB,MAAO1Q,GACP,OAAO,GAIX,SAASwmE,IACP,OAAOpjD,EAAOC,oBACV,WACA,WAGN,SAASM,EAAcC,EAAMpwB,GAC3B,GAAIgzE,IAAehzE,EACjB,MAAM,IAAIsG,WAAW,8BAcvB,OAZIspB,EAAOC,qBAETO,EAAO,IAAI1U,WAAW1b,GACtBowB,EAAKV,UAAYE,EAAO3vB,YAGX,OAATmwB,IACFA,EAAO,IAAIR,EAAO5vB,IAEpBowB,EAAKpwB,OAASA,GAGTowB,EAaT,SAASR,EAAQG,EAAKkjD,EAAkBjzE,GACtC,IAAK4vB,EAAOC,uBAAyBlwB,gBAAgBiwB,GACnD,OAAO,IAAIA,EAAOG,EAAKkjD,EAAkBjzE,GAI3C,GAAmB,kBAAR+vB,EAAkB,CAC3B,GAAgC,kBAArBkjD,EACT,MAAM,IAAIjrE,MACR,qEAGJ,OAAOgoB,EAAYrwB,KAAMowB,GAE3B,OAAOjwB,EAAKH,KAAMowB,EAAKkjD,EAAkBjzE,GAW3C,SAASF,EAAMswB,EAAMntB,EAAOgwE,EAAkBjzE,GAC5C,GAAqB,kBAAViD,EACT,MAAM,IAAIkkB,UAAU,yCAGtB,MAA2B,qBAAhB2J,aAA+B7tB,aAAiB6tB,YAClDJ,EAAgBN,EAAMntB,EAAOgwE,EAAkBjzE,GAGnC,kBAAViD,EACFqtB,EAAWF,EAAMntB,EAAOgwE,GAG1BtiD,EAAWP,EAAMntB,GA4B1B,SAASiwE,EAAYpoD,GACnB,GAAoB,kBAATA,EACT,MAAM,IAAI3D,UAAU,oCACf,GAAI2D,EAAO,EAChB,MAAM,IAAIxkB,WAAW,wCAIzB,SAAS6f,EAAOiK,EAAMtF,EAAMsH,EAAM+gD,GAEhC,OADAD,EAAWpoD,GACPA,GAAQ,EACHqF,EAAaC,EAAMtF,QAEf1kB,IAATgsB,EAIyB,kBAAb+gD,EACVhjD,EAAaC,EAAMtF,GAAMsH,KAAKA,EAAM+gD,GACpChjD,EAAaC,EAAMtF,GAAMsH,KAAKA,GAE7BjC,EAAaC,EAAMtF,GAW5B,SAASkF,EAAaI,EAAMtF,GAG1B,GAFAooD,EAAWpoD,GACXsF,EAAOD,EAAaC,EAAMtF,EAAO,EAAI,EAAoB,EAAhBmF,EAAQnF,KAC5C8E,EAAOC,oBACV,IAAK,IAAIxvB,EAAI,EAAGA,EAAIyqB,IAAQzqB,EAC1B+vB,EAAK/vB,GAAK,EAGd,OAAO+vB,EAgBT,SAASE,EAAYF,EAAMG,EAAQ4iD,GAKjC,GAJwB,kBAAbA,GAAsC,KAAbA,IAClCA,EAAW,SAGRvjD,EAAOwjD,WAAWD,GACrB,MAAM,IAAIhsD,UAAU,8CAGtB,IAAInnB,EAAwC,EAA/Bkd,EAAWqT,EAAQ4iD,GAChC/iD,EAAOD,EAAaC,EAAMpwB,GAE1B,IAAIwwB,EAASJ,EAAKjwB,MAAMowB,EAAQ4iD,GAShC,OAPI3iD,IAAWxwB,IAIbowB,EAAOA,EAAKhO,MAAM,EAAGoO,IAGhBJ,EAGT,SAASK,EAAeL,EAAM3U,GAC5B,IAAIzb,EAASyb,EAAMzb,OAAS,EAAI,EAA4B,EAAxBiwB,EAAQxU,EAAMzb,QAClDowB,EAAOD,EAAaC,EAAMpwB,GAC1B,IAAK,IAAIK,EAAI,EAAGA,EAAIL,EAAQK,GAAK,EAC/B+vB,EAAK/vB,GAAgB,IAAXob,EAAMpb,GAElB,OAAO+vB,EAGT,SAASM,EAAiBN,EAAM3U,EAAOzF,EAAYhW,GAGjD,GAFAyb,EAAMyB,WAEFlH,EAAa,GAAKyF,EAAMyB,WAAalH,EACvC,MAAM,IAAI1P,WAAW,6BAGvB,GAAImV,EAAMyB,WAAalH,GAAchW,GAAU,GAC7C,MAAM,IAAIsG,WAAW,6BAmBvB,OAfEmV,OADiBrV,IAAf4P,QAAuC5P,IAAXpG,EACtB,IAAI0b,WAAWD,QACHrV,IAAXpG,EACD,IAAI0b,WAAWD,EAAOzF,GAEtB,IAAI0F,WAAWD,EAAOzF,EAAYhW,GAGxC4vB,EAAOC,qBAETO,EAAO3U,EACP2U,EAAKV,UAAYE,EAAO3vB,WAGxBmwB,EAAOK,EAAcL,EAAM3U,GAEtB2U,EAGT,SAASO,EAAYP,EAAM/P,GACzB,GAAIuP,EAAOgB,SAASvQ,GAAM,CACxB,IAAIpW,EAA4B,EAAtBgmB,EAAQ5P,EAAIrgB,QAGtB,OAFAowB,EAAOD,EAAaC,EAAMnmB,GAEN,IAAhBmmB,EAAKpwB,OACAowB,GAGT/P,EAAIwQ,KAAKT,EAAM,EAAG,EAAGnmB,GACdmmB,GAGT,GAAI/P,EAAK,CACP,GAA4B,qBAAhByQ,aACRzQ,EAAItK,kBAAkB+a,aAAgB,WAAYzQ,EACpD,MAA0B,kBAAfA,EAAIrgB,QAAuBkwB,GAAM7P,EAAIrgB,QACvCmwB,EAAaC,EAAM,GAErBK,EAAcL,EAAM/P,GAG7B,GAAiB,WAAbA,EAAIle,MAAqBykB,EAAQvG,EAAI3gB,MACvC,OAAO+wB,EAAcL,EAAM/P,EAAI3gB,MAInC,MAAM,IAAIynB,UAAU,sFAGtB,SAAS8I,EAASjwB,GAGhB,GAAIA,GAAUgzE,IACZ,MAAM,IAAI1sE,WAAW,0DACa0sE,IAAa9xD,SAAS,IAAM,UAEhE,OAAgB,EAATlhB,EAGT,SAASqzE,EAAYrzE,GAInB,OAHKA,GAAUA,IACbA,EAAS,GAEJ4vB,EAAOzJ,OAAOnmB,GA+EvB,SAASkd,EAAYqT,EAAQ4iD,GAC3B,GAAIvjD,EAAOgB,SAASL,GAClB,OAAOA,EAAOvwB,OAEhB,GAA2B,qBAAhB8wB,aAA6D,oBAAvBA,YAAYO,SACxDP,YAAYO,OAAOd,IAAWA,aAAkBO,aACnD,OAAOP,EAAOrT,WAEM,kBAAXqT,IACTA,EAAS,GAAKA,GAGhB,IAAItmB,EAAMsmB,EAAOvwB,OACjB,GAAY,IAARiK,EAAW,OAAO,EAItB,IADA,IAAIqpE,GAAc,IAEhB,OAAQH,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOlpE,EACT,IAAK,OACL,IAAK,QACL,UAAK7D,EACH,OAAO2qB,EAAYR,GAAQvwB,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAANiK,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOspE,EAAchjD,GAAQvwB,OAC/B,QACE,GAAIszE,EAAa,OAAOviD,EAAYR,GAAQvwB,OAC5CmzE,GAAY,GAAKA,GAAU/yC,cAC3BkzC,GAAc,GAMtB,SAASE,EAAcL,EAAUppE,EAAOI,GACtC,IAAImpE,GAAc,EAclB,SALcltE,IAAV2D,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQpK,KAAKK,OACf,MAAO,GAOT,SAJYoG,IAAR+D,GAAqBA,EAAMxK,KAAKK,UAClCmK,EAAMxK,KAAKK,QAGTmK,GAAO,EACT,MAAO,GAOT,GAHAA,KAAS,EACTJ,KAAW,EAEPI,GAAOJ,EACT,MAAO,GAGJopE,IAAUA,EAAW,QAE1B,MAAO,EACL,OAAQA,GACN,IAAK,MACH,OAAOM,EAAS9zE,KAAMoK,EAAOI,GAE/B,IAAK,OACL,IAAK,QACH,OAAOupE,EAAU/zE,KAAMoK,EAAOI,GAEhC,IAAK,QACH,OAAOwpE,EAAWh0E,KAAMoK,EAAOI,GAEjC,IAAK,SACL,IAAK,SACH,OAAOypE,EAAYj0E,KAAMoK,EAAOI,GAElC,IAAK,SACH,OAAO0pE,EAAYl0E,KAAMoK,EAAOI,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO2pE,EAAan0E,KAAMoK,EAAOI,GAEnC,QACE,GAAImpE,EAAa,MAAM,IAAInsD,UAAU,qBAAuBgsD,GAC5DA,GAAYA,EAAW,IAAI/yC,cAC3BkzC,GAAc,GAStB,SAASS,EAAMnrE,EAAGsvB,EAAGvrB,GACnB,IAAItM,EAAIuI,EAAEsvB,GACVtvB,EAAEsvB,GAAKtvB,EAAE+D,GACT/D,EAAE+D,GAAKtM,EAmIT,SAAS2zE,EAAsBj+D,EAAQlT,EAAKmT,EAAYm9D,EAAUc,GAEhE,GAAsB,IAAlBl+D,EAAO/V,OAAc,OAAQ,EAmBjC,GAhB0B,kBAAfgW,GACTm9D,EAAWn9D,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAEhBA,GAAcA,EACV0Q,MAAM1Q,KAERA,EAAai+D,EAAM,EAAKl+D,EAAO/V,OAAS,GAItCgW,EAAa,IAAGA,EAAaD,EAAO/V,OAASgW,GAC7CA,GAAcD,EAAO/V,OAAQ,CAC/B,GAAIi0E,EAAK,OAAQ,EACZj+D,EAAaD,EAAO/V,OAAS,OAC7B,GAAIgW,EAAa,EAAG,CACzB,IAAIi+D,EACC,OAAQ,EADJj+D,EAAa,EAUxB,GALmB,kBAARnT,IACTA,EAAM+sB,EAAO9vB,KAAK+C,EAAKswE,IAIrBvjD,EAAOgB,SAAS/tB,GAElB,OAAmB,IAAfA,EAAI7C,QACE,EAEHk0E,EAAan+D,EAAQlT,EAAKmT,EAAYm9D,EAAUc,GAClD,GAAmB,kBAARpxE,EAEhB,OADAA,GAAY,IACR+sB,EAAOC,qBACiC,oBAAjCnU,WAAWzb,UAAUsY,QAC1B07D,EACKv4D,WAAWzb,UAAUsY,QAAQD,KAAKvC,EAAQlT,EAAKmT,GAE/C0F,WAAWzb,UAAU6rE,YAAYxzD,KAAKvC,EAAQlT,EAAKmT,GAGvDk+D,EAAan+D,EAAQ,CAAElT,GAAOmT,EAAYm9D,EAAUc,GAG7D,MAAM,IAAI9sD,UAAU,wCAGtB,SAAS+sD,EAAcj2D,EAAKpb,EAAKmT,EAAYm9D,EAAUc,GACrD,IA0BI5zE,EA1BA8zE,EAAY,EACZC,EAAYn2D,EAAIje,OAChBq0E,EAAYxxE,EAAI7C,OAEpB,QAAiBoG,IAAb+sE,IACFA,EAAWnxE,OAAOmxE,GAAU/yC,cACX,SAAb+yC,GAAoC,UAAbA,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAIl1D,EAAIje,OAAS,GAAK6C,EAAI7C,OAAS,EACjC,OAAQ,EAEVm0E,EAAY,EACZC,GAAa,EACbC,GAAa,EACbr+D,GAAc,EAIlB,SAAS2+B,EAAMtkB,EAAKhwB,GAClB,OAAkB,IAAd8zE,EACK9jD,EAAIhwB,GAEJgwB,EAAIikD,aAAaj0E,EAAI8zE,GAKhC,GAAIF,EAAK,CACP,IAAIM,GAAc,EAClB,IAAKl0E,EAAI2V,EAAY3V,EAAI+zE,EAAW/zE,IAClC,GAAIs0C,EAAK12B,EAAK5d,KAAOs0C,EAAK9xC,GAAqB,IAAhB0xE,EAAoB,EAAIl0E,EAAIk0E,IAEzD,IADoB,IAAhBA,IAAmBA,EAAal0E,GAChCA,EAAIk0E,EAAa,IAAMF,EAAW,OAAOE,EAAaJ,OAEtC,IAAhBI,IAAmBl0E,GAAKA,EAAIk0E,GAChCA,GAAc,OAKlB,IADIv+D,EAAaq+D,EAAYD,IAAWp+D,EAAao+D,EAAYC,GAC5Dh0E,EAAI2V,EAAY3V,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAIm0E,GAAQ,EACHtyD,EAAI,EAAGA,EAAImyD,EAAWnyD,IAC7B,GAAIyyB,EAAK12B,EAAK5d,EAAI6hB,KAAOyyB,EAAK9xC,EAAKqf,GAAI,CACrCsyD,GAAQ,EACR,MAGJ,GAAIA,EAAO,OAAOn0E,EAItB,OAAQ,EAeV,SAASo0E,EAAUpkD,EAAKE,EAAQna,EAAQpW,GACtCoW,EAAS1L,OAAO0L,IAAW,EAC3B,IAAI2b,EAAY1B,EAAIrwB,OAASoW,EACxBpW,GAGHA,EAAS0K,OAAO1K,GACZA,EAAS+xB,IACX/xB,EAAS+xB,IAJX/xB,EAAS+xB,EASX,IAAI2iD,EAASnkD,EAAOvwB,OACpB,GAAI00E,EAAS,IAAM,EAAG,MAAM,IAAIvtD,UAAU,sBAEtCnnB,EAAS00E,EAAS,IACpB10E,EAAS00E,EAAS,GAEpB,IAAK,IAAIr0E,EAAI,EAAGA,EAAIL,IAAUK,EAAG,CAC/B,IAAIs0E,EAASzpE,SAASqlB,EAAO1N,OAAW,EAAJxiB,EAAO,GAAI,IAC/C,GAAIqmB,MAAMiuD,GAAS,OAAOt0E,EAC1BgwB,EAAIja,EAAS/V,GAAKs0E,EAEpB,OAAOt0E,EAGT,SAASmxB,EAAWnB,EAAKE,EAAQna,EAAQpW,GACvC,OAAOsxB,GAAWP,EAAYR,EAAQF,EAAIrwB,OAASoW,GAASia,EAAKja,EAAQpW,GAG3E,SAAS40E,EAAYvkD,EAAKE,EAAQna,EAAQpW,GACxC,OAAOsxB,GAAWujD,EAAatkD,GAASF,EAAKja,EAAQpW,GAGvD,SAAS80E,EAAazkD,EAAKE,EAAQna,EAAQpW,GACzC,OAAO40E,EAAWvkD,EAAKE,EAAQna,EAAQpW,GAGzC,SAAS+0E,EAAa1kD,EAAKE,EAAQna,EAAQpW,GACzC,OAAOsxB,GAAWiiD,EAAchjD,GAASF,EAAKja,EAAQpW,GAGxD,SAASg1E,EAAW3kD,EAAKE,EAAQna,EAAQpW,GACvC,OAAOsxB,GAAW2jD,EAAe1kD,EAAQF,EAAIrwB,OAASoW,GAASia,EAAKja,EAAQpW,GAkF9E,SAAS6zE,EAAaxjD,EAAKtmB,EAAOI,GAChC,OAAc,IAAVJ,GAAeI,IAAQkmB,EAAIrwB,OACtB8yE,EAAO11D,cAAciT,GAErByiD,EAAO11D,cAAciT,EAAIjO,MAAMrY,EAAOI,IAIjD,SAASupE,EAAWrjD,EAAKtmB,EAAOI,GAC9BA,EAAMP,KAAKD,IAAI0mB,EAAIrwB,OAAQmK,GAC3B,IAAI+qE,EAAM,GAEN70E,EAAI0J,EACR,MAAO1J,EAAI8J,EAAK,CACd,IAQMgrE,EAAYC,EAAWC,EAAYC,EARrCC,EAAYllD,EAAIhwB,GAChB4wB,EAAY,KACZukD,EAAoBD,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,EAEJ,GAAIl1E,EAAIm1E,GAAoBrrE,EAG1B,OAAQqrE,GACN,KAAK,EACCD,EAAY,MACdtkD,EAAYskD,GAEd,MACF,KAAK,EACHJ,EAAa9kD,EAAIhwB,EAAI,GACO,OAAV,IAAb80E,KACHG,GAA6B,GAAZC,IAAqB,EAAoB,GAAbJ,EACzCG,EAAgB,MAClBrkD,EAAYqkD,IAGhB,MACF,KAAK,EACHH,EAAa9kD,EAAIhwB,EAAI,GACrB+0E,EAAY/kD,EAAIhwB,EAAI,GACQ,OAAV,IAAb80E,IAAsD,OAAV,IAAZC,KACnCE,GAA6B,GAAZC,IAAoB,IAAoB,GAAbJ,IAAsB,EAAmB,GAAZC,EACrEE,EAAgB,OAAUA,EAAgB,OAAUA,EAAgB,SACtErkD,EAAYqkD,IAGhB,MACF,KAAK,EACHH,EAAa9kD,EAAIhwB,EAAI,GACrB+0E,EAAY/kD,EAAIhwB,EAAI,GACpBg1E,EAAahlD,EAAIhwB,EAAI,GACO,OAAV,IAAb80E,IAAsD,OAAV,IAAZC,IAAsD,OAAV,IAAbC,KAClEC,GAA6B,GAAZC,IAAoB,IAAqB,GAAbJ,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,EAClGC,EAAgB,OAAUA,EAAgB,UAC5CrkD,EAAYqkD,IAMJ,OAAdrkD,GAGFA,EAAY,MACZukD,EAAmB,GACVvkD,EAAY,QAErBA,GAAa,MACbikD,EAAIxtE,KAAKupB,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBikD,EAAIxtE,KAAKupB,GACT5wB,GAAKm1E,EAGP,OAAOC,EAAsBP,GA98B/Bz0E,EAAQmvB,OAASA,EACjBnvB,EAAQ4yE,WAAaA,EACrB5yE,EAAQi1E,kBAAoB,GA0B5B9lD,EAAOC,yBAAqDzpB,IAA/BwY,EAAOiR,oBAChCjR,EAAOiR,oBACPJ,IAKJhvB,EAAQuyE,WAAaA,IAkErBpjD,EAAO+lD,SAAW,KAGlB/lD,EAAOgmD,SAAW,SAAU33D,GAE1B,OADAA,EAAIyR,UAAYE,EAAO3vB,UAChBge,GA2BT2R,EAAO9vB,KAAO,SAAUmD,EAAOgwE,EAAkBjzE,GAC/C,OAAOF,EAAK,KAAMmD,EAAOgwE,EAAkBjzE,IAGzC4vB,EAAOC,sBACTD,EAAO3vB,UAAUyvB,UAAYhU,WAAWzb,UACxC2vB,EAAOF,UAAYhU,WACG,qBAAXsL,QAA0BA,OAAOyK,SACxC7B,EAAO5I,OAAOyK,WAAa7B,GAE7B5mB,OAAO0oB,eAAe9B,EAAQ5I,OAAOyK,QAAS,CAC5CxuB,MAAO,KACP0uB,cAAc,KAiCpB/B,EAAOzJ,MAAQ,SAAU2E,EAAMsH,EAAM+gD,GACnC,OAAOhtD,EAAM,KAAM2E,EAAMsH,EAAM+gD,IAiBjCvjD,EAAOI,YAAc,SAAUlF,GAC7B,OAAOkF,EAAY,KAAMlF,IAK3B8E,EAAOimD,gBAAkB,SAAU/qD,GACjC,OAAOkF,EAAY,KAAMlF,IAiH3B8E,EAAOgB,SAAW,SAAmBhoB,GACnC,QAAe,MAALA,IAAaA,EAAE0pB,YAG3B1C,EAAOkmD,QAAU,SAAkBntE,EAAGC,GACpC,IAAKgnB,EAAOgB,SAASjoB,KAAOinB,EAAOgB,SAAShoB,GAC1C,MAAM,IAAIue,UAAU,6BAGtB,GAAIxe,IAAMC,EAAG,OAAO,EAKpB,IAHA,IAAIM,EAAIP,EAAE3I,OACNmJ,EAAIP,EAAE5I,OAEDK,EAAI,EAAG4J,EAAML,KAAKD,IAAIT,EAAGC,GAAI9I,EAAI4J,IAAO5J,EAC/C,GAAIsI,EAAEtI,KAAOuI,EAAEvI,GAAI,CACjB6I,EAAIP,EAAEtI,GACN8I,EAAIP,EAAEvI,GACN,MAIJ,OAAI6I,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GAGT0mB,EAAOwjD,WAAa,SAAqBD,GACvC,OAAQnxE,OAAOmxE,GAAU/yC,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,IAIbxQ,EAAOlO,OAAS,SAAiBnY,EAAMvJ,GACrC,IAAK4mB,EAAQrd,GACX,MAAM,IAAI4d,UAAU,+CAGtB,GAAoB,IAAhB5d,EAAKvJ,OACP,OAAO4vB,EAAOzJ,MAAM,GAGtB,IAAI9lB,EACJ,QAAe+F,IAAXpG,EAEF,IADAA,EAAS,EACJK,EAAI,EAAGA,EAAIkJ,EAAKvJ,SAAUK,EAC7BL,GAAUuJ,EAAKlJ,GAAGL,OAItB,IAAI+V,EAAS6Z,EAAOI,YAAYhwB,GAC5BqyB,EAAM,EACV,IAAKhyB,EAAI,EAAGA,EAAIkJ,EAAKvJ,SAAUK,EAAG,CAChC,IAAIgwB,EAAM9mB,EAAKlJ,GACf,IAAKuvB,EAAOgB,SAASP,GACnB,MAAM,IAAIlJ,UAAU,+CAEtBkJ,EAAIQ,KAAK9a,EAAQsc,GACjBA,GAAOhC,EAAIrwB,OAEb,OAAO+V,GA8CT6Z,EAAO1S,WAAaA,EA0EpB0S,EAAO3vB,UAAUqyB,WAAY,EAQ7B1C,EAAO3vB,UAAU81E,OAAS,WACxB,IAAI9rE,EAAMtK,KAAKK,OACf,GAAIiK,EAAM,IAAM,EACd,MAAM,IAAI3D,WAAW,6CAEvB,IAAK,IAAIjG,EAAI,EAAGA,EAAI4J,EAAK5J,GAAK,EAC5B0zE,EAAKp0E,KAAMU,EAAGA,EAAI,GAEpB,OAAOV,MAGTiwB,EAAO3vB,UAAU+1E,OAAS,WACxB,IAAI/rE,EAAMtK,KAAKK,OACf,GAAIiK,EAAM,IAAM,EACd,MAAM,IAAI3D,WAAW,6CAEvB,IAAK,IAAIjG,EAAI,EAAGA,EAAI4J,EAAK5J,GAAK,EAC5B0zE,EAAKp0E,KAAMU,EAAGA,EAAI,GAClB0zE,EAAKp0E,KAAMU,EAAI,EAAGA,EAAI,GAExB,OAAOV,MAGTiwB,EAAO3vB,UAAUg2E,OAAS,WACxB,IAAIhsE,EAAMtK,KAAKK,OACf,GAAIiK,EAAM,IAAM,EACd,MAAM,IAAI3D,WAAW,6CAEvB,IAAK,IAAIjG,EAAI,EAAGA,EAAI4J,EAAK5J,GAAK,EAC5B0zE,EAAKp0E,KAAMU,EAAGA,EAAI,GAClB0zE,EAAKp0E,KAAMU,EAAI,EAAGA,EAAI,GACtB0zE,EAAKp0E,KAAMU,EAAI,EAAGA,EAAI,GACtB0zE,EAAKp0E,KAAMU,EAAI,EAAGA,EAAI,GAExB,OAAOV,MAGTiwB,EAAO3vB,UAAUihB,SAAW,WAC1B,IAAIlhB,EAAuB,EAAdL,KAAKK,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArBoK,UAAUpK,OAAqB0zE,EAAU/zE,KAAM,EAAGK,GAC/CwzE,EAAazyD,MAAMphB,KAAMyK,YAGlCwlB,EAAO3vB,UAAU4jE,OAAS,SAAiBj7D,GACzC,IAAKgnB,EAAOgB,SAAShoB,GAAI,MAAM,IAAIue,UAAU,6BAC7C,OAAIxnB,OAASiJ,GACsB,IAA5BgnB,EAAOkmD,QAAQn2E,KAAMiJ,IAG9BgnB,EAAO3vB,UAAUi2E,QAAU,WACzB,IAAI10E,EAAM,GACN8iB,EAAM7jB,EAAQi1E,kBAKlB,OAJI/1E,KAAKK,OAAS,IAChBwB,EAAM7B,KAAKuhB,SAAS,MAAO,EAAGoD,GAAK2X,MAAM,SAASl0B,KAAK,KACnDpI,KAAKK,OAASskB,IAAK9iB,GAAO,UAEzB,WAAaA,EAAM,KAG5BouB,EAAO3vB,UAAU61E,QAAU,SAAkBhsE,EAAQC,EAAOI,EAAKgsE,EAAWC,GAC1E,IAAKxmD,EAAOgB,SAAS9mB,GACnB,MAAM,IAAIqd,UAAU,6BAgBtB,QAbc/gB,IAAV2D,IACFA,EAAQ,QAEE3D,IAAR+D,IACFA,EAAML,EAASA,EAAO9J,OAAS,QAEfoG,IAAd+vE,IACFA,EAAY,QAEE/vE,IAAZgwE,IACFA,EAAUz2E,KAAKK,QAGb+J,EAAQ,GAAKI,EAAML,EAAO9J,QAAUm2E,EAAY,GAAKC,EAAUz2E,KAAKK,OACtE,MAAM,IAAIsG,WAAW,sBAGvB,GAAI6vE,GAAaC,GAAWrsE,GAASI,EACnC,OAAO,EAET,GAAIgsE,GAAaC,EACf,OAAQ,EAEV,GAAIrsE,GAASI,EACX,OAAO,EAQT,GALAJ,KAAW,EACXI,KAAS,EACTgsE,KAAe,EACfC,KAAa,EAETz2E,OAASmK,EAAQ,OAAO,EAS5B,IAPA,IAAIZ,EAAIktE,EAAUD,EACdhtE,EAAIgB,EAAMJ,EACVE,EAAML,KAAKD,IAAIT,EAAGC,GAElBktE,EAAW12E,KAAKyiB,MAAM+zD,EAAWC,GACjCE,EAAaxsE,EAAOsY,MAAMrY,EAAOI,GAE5B9J,EAAI,EAAGA,EAAI4J,IAAO5J,EACzB,GAAIg2E,EAASh2E,KAAOi2E,EAAWj2E,GAAI,CACjC6I,EAAImtE,EAASh2E,GACb8I,EAAImtE,EAAWj2E,GACf,MAIJ,OAAI6I,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GA6HT0mB,EAAO3vB,UAAUwE,SAAW,SAAmB5B,EAAKmT,EAAYm9D,GAC9D,OAAoD,IAA7CxzE,KAAK4Y,QAAQ1V,EAAKmT,EAAYm9D,IAGvCvjD,EAAO3vB,UAAUsY,QAAU,SAAkB1V,EAAKmT,EAAYm9D,GAC5D,OAAOa,EAAqBr0E,KAAMkD,EAAKmT,EAAYm9D,GAAU,IAG/DvjD,EAAO3vB,UAAU6rE,YAAc,SAAsBjpE,EAAKmT,EAAYm9D,GACpE,OAAOa,EAAqBr0E,KAAMkD,EAAKmT,EAAYm9D,GAAU,IAkD/DvjD,EAAO3vB,UAAUE,MAAQ,SAAgBowB,EAAQna,EAAQpW,EAAQmzE,GAE/D,QAAe/sE,IAAXgQ,EACF+8D,EAAW,OACXnzE,EAASL,KAAKK,OACdoW,EAAS,OAEJ,QAAehQ,IAAXpG,GAA0C,kBAAXoW,EACxC+8D,EAAW/8D,EACXpW,EAASL,KAAKK,OACdoW,EAAS,MAEJ,KAAI0b,SAAS1b,GAWlB,MAAM,IAAIpO,MACR,2EAXFoO,GAAkB,EACd0b,SAAS9xB,IACXA,GAAkB,OACDoG,IAAb+sE,IAAwBA,EAAW,UAEvCA,EAAWnzE,EACXA,OAASoG,GASb,IAAI2rB,EAAYpyB,KAAKK,OAASoW,EAG9B,SAFehQ,IAAXpG,GAAwBA,EAAS+xB,KAAW/xB,EAAS+xB,GAEpDxB,EAAOvwB,OAAS,IAAMA,EAAS,GAAKoW,EAAS,IAAOA,EAASzW,KAAKK,OACrE,MAAM,IAAIsG,WAAW,0CAGlB6sE,IAAUA,EAAW,QAG1B,IADA,IAAIG,GAAc,IAEhB,OAAQH,GACN,IAAK,MACH,OAAOsB,EAAS90E,KAAM4wB,EAAQna,EAAQpW,GAExC,IAAK,OACL,IAAK,QACH,OAAOwxB,EAAU7xB,KAAM4wB,EAAQna,EAAQpW,GAEzC,IAAK,QACH,OAAO40E,EAAWj1E,KAAM4wB,EAAQna,EAAQpW,GAE1C,IAAK,SACL,IAAK,SACH,OAAO80E,EAAYn1E,KAAM4wB,EAAQna,EAAQpW,GAE3C,IAAK,SAEH,OAAO+0E,EAAYp1E,KAAM4wB,EAAQna,EAAQpW,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOg1E,EAAUr1E,KAAM4wB,EAAQna,EAAQpW,GAEzC,QACE,GAAIszE,EAAa,MAAM,IAAInsD,UAAU,qBAAuBgsD,GAC5DA,GAAY,GAAKA,GAAU/yC,cAC3BkzC,GAAc,IAKtB1jD,EAAO3vB,UAAUs2E,OAAS,WACxB,MAAO,CACLp0E,KAAM,SACNzC,KAAM+O,MAAMxO,UAAUmiB,MAAM9J,KAAK3Y,KAAK62E,MAAQ72E,KAAM,KAwFxD,IAAI82E,EAAuB,KAE3B,SAAShB,EAAuBiB,GAC9B,IAAIzsE,EAAMysE,EAAW12E,OACrB,GAAIiK,GAAOwsE,EACT,OAAOz0E,OAAOghB,aAAajC,MAAM/e,OAAQ00E,GAI3C,IAAIxB,EAAM,GACN70E,EAAI,EACR,MAAOA,EAAI4J,EACTirE,GAAOlzE,OAAOghB,aAAajC,MACzB/e,OACA00E,EAAWt0D,MAAM/hB,EAAGA,GAAKo2E,IAG7B,OAAOvB,EAGT,SAASvB,EAAYtjD,EAAKtmB,EAAOI,GAC/B,IAAIwsE,EAAM,GACVxsE,EAAMP,KAAKD,IAAI0mB,EAAIrwB,OAAQmK,GAE3B,IAAK,IAAI9J,EAAI0J,EAAO1J,EAAI8J,IAAO9J,EAC7Bs2E,GAAO30E,OAAOghB,aAAsB,IAATqN,EAAIhwB,IAEjC,OAAOs2E,EAGT,SAAS/C,EAAavjD,EAAKtmB,EAAOI,GAChC,IAAIwsE,EAAM,GACVxsE,EAAMP,KAAKD,IAAI0mB,EAAIrwB,OAAQmK,GAE3B,IAAK,IAAI9J,EAAI0J,EAAO1J,EAAI8J,IAAO9J,EAC7Bs2E,GAAO30E,OAAOghB,aAAaqN,EAAIhwB,IAEjC,OAAOs2E,EAGT,SAASlD,EAAUpjD,EAAKtmB,EAAOI,GAC7B,IAAIF,EAAMomB,EAAIrwB,SAET+J,GAASA,EAAQ,KAAGA,EAAQ,KAC5BI,GAAOA,EAAM,GAAKA,EAAMF,KAAKE,EAAMF,GAGxC,IADA,IAAI2sE,EAAM,GACDv2E,EAAI0J,EAAO1J,EAAI8J,IAAO9J,EAC7Bu2E,GAAOC,EAAMxmD,EAAIhwB,IAEnB,OAAOu2E,EAGT,SAAS9C,EAAczjD,EAAKtmB,EAAOI,GAGjC,IAFA,IAAIinB,EAAQf,EAAIjO,MAAMrY,EAAOI,GACzB+qE,EAAM,GACD70E,EAAI,EAAGA,EAAI+wB,EAAMpxB,OAAQK,GAAK,EACrC60E,GAAOlzE,OAAOghB,aAAaoO,EAAM/wB,GAAoB,IAAf+wB,EAAM/wB,EAAI,IAElD,OAAO60E,EA0CT,SAAS4B,EAAa1gE,EAAQ2gE,EAAK/2E,GACjC,GAAKoW,EAAS,IAAO,GAAKA,EAAS,EAAG,MAAM,IAAI9P,WAAW,sBAC3D,GAAI8P,EAAS2gE,EAAM/2E,EAAQ,MAAM,IAAIsG,WAAW,yCA+JlD,SAAS0wE,EAAU3mD,EAAKptB,EAAOmT,EAAQ2gE,EAAKzyD,EAAK3a,GAC/C,IAAKimB,EAAOgB,SAASP,GAAM,MAAM,IAAIlJ,UAAU,+CAC/C,GAAIlkB,EAAQqhB,GAAOrhB,EAAQ0G,EAAK,MAAM,IAAIrD,WAAW,qCACrD,GAAI8P,EAAS2gE,EAAM1mD,EAAIrwB,OAAQ,MAAM,IAAIsG,WAAW,sBAkDtD,SAAS2wE,EAAmB5mD,EAAKptB,EAAOmT,EAAQ8gE,GAC1Cj0E,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,GACxC,IAAK,IAAI5C,EAAI,EAAG6hB,EAAItY,KAAKD,IAAI0mB,EAAIrwB,OAASoW,EAAQ,GAAI/V,EAAI6hB,IAAK7hB,EAC7DgwB,EAAIja,EAAS/V,IAAM4C,EAAS,KAAS,GAAKi0E,EAAe72E,EAAI,EAAIA,MAClC,GAA5B62E,EAAe72E,EAAI,EAAIA,GA8B9B,SAAS82E,EAAmB9mD,EAAKptB,EAAOmT,EAAQ8gE,GAC1Cj0E,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C,IAAK,IAAI5C,EAAI,EAAG6hB,EAAItY,KAAKD,IAAI0mB,EAAIrwB,OAASoW,EAAQ,GAAI/V,EAAI6hB,IAAK7hB,EAC7DgwB,EAAIja,EAAS/V,GAAM4C,IAAuC,GAA5Bi0E,EAAe72E,EAAI,EAAIA,GAAU,IAmJnE,SAAS+2E,EAAc/mD,EAAKptB,EAAOmT,EAAQ2gE,EAAKzyD,EAAK3a,GACnD,GAAIyM,EAAS2gE,EAAM1mD,EAAIrwB,OAAQ,MAAM,IAAIsG,WAAW,sBACpD,GAAI8P,EAAS,EAAG,MAAM,IAAI9P,WAAW,sBAGvC,SAAS+wE,EAAYhnD,EAAKptB,EAAOmT,EAAQ8gE,EAAcI,GAKrD,OAJKA,GACHF,EAAa/mD,EAAKptB,EAAOmT,EAAQ,EAAG,sBAAyB,sBAE/D28D,EAAQ5yE,MAAMkwB,EAAKptB,EAAOmT,EAAQ8gE,EAAc,GAAI,GAC7C9gE,EAAS,EAWlB,SAASmhE,EAAalnD,EAAKptB,EAAOmT,EAAQ8gE,EAAcI,GAKtD,OAJKA,GACHF,EAAa/mD,EAAKptB,EAAOmT,EAAQ,EAAG,uBAA0B,uBAEhE28D,EAAQ5yE,MAAMkwB,EAAKptB,EAAOmT,EAAQ8gE,EAAc,GAAI,GAC7C9gE,EAAS,EA/clBwZ,EAAO3vB,UAAUmiB,MAAQ,SAAgBrY,EAAOI,GAC9C,IAoBI6nB,EApBA/nB,EAAMtK,KAAKK,OAqBf,GApBA+J,IAAUA,EACVI,OAAc/D,IAAR+D,EAAoBF,IAAQE,EAE9BJ,EAAQ,GACVA,GAASE,EACLF,EAAQ,IAAGA,EAAQ,IACdA,EAAQE,IACjBF,EAAQE,GAGNE,EAAM,GACRA,GAAOF,EACHE,EAAM,IAAGA,EAAM,IACVA,EAAMF,IACfE,EAAMF,GAGJE,EAAMJ,IAAOI,EAAMJ,GAGnB6lB,EAAOC,oBACTmC,EAASryB,KAAKsyB,SAASloB,EAAOI,GAC9B6nB,EAAOtC,UAAYE,EAAO3vB,cACrB,CACL,IAAIiyB,EAAW/nB,EAAMJ,EACrBioB,EAAS,IAAIpC,EAAOsC,OAAU9rB,GAC9B,IAAK,IAAI/F,EAAI,EAAGA,EAAI6xB,IAAY7xB,EAC9B2xB,EAAO3xB,GAAKV,KAAKU,EAAI0J,GAIzB,OAAOioB,GAWTpC,EAAO3vB,UAAUu3E,WAAa,SAAqBphE,EAAQ8G,EAAYo6D,GACrElhE,GAAkB,EAClB8G,GAA0B,EACrBo6D,GAAUR,EAAY1gE,EAAQ8G,EAAYvd,KAAKK,QAEpD,IAAI6C,EAAMlD,KAAKyW,GACX2P,EAAM,EACN1lB,EAAI,EACR,QAASA,EAAI6c,IAAe6I,GAAO,KACjCljB,GAAOlD,KAAKyW,EAAS/V,GAAK0lB,EAG5B,OAAOljB,GAGT+sB,EAAO3vB,UAAUw3E,WAAa,SAAqBrhE,EAAQ8G,EAAYo6D,GACrElhE,GAAkB,EAClB8G,GAA0B,EACrBo6D,GACHR,EAAY1gE,EAAQ8G,EAAYvd,KAAKK,QAGvC,IAAI6C,EAAMlD,KAAKyW,IAAW8G,GACtB6I,EAAM,EACV,MAAO7I,EAAa,IAAM6I,GAAO,KAC/BljB,GAAOlD,KAAKyW,IAAW8G,GAAc6I,EAGvC,OAAOljB,GAGT+sB,EAAO3vB,UAAUy3E,UAAY,SAAoBthE,EAAQkhE,GAEvD,OADKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QACpCL,KAAKyW,IAGdwZ,EAAO3vB,UAAU03E,aAAe,SAAuBvhE,EAAQkhE,GAE7D,OADKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QACpCL,KAAKyW,GAAWzW,KAAKyW,EAAS,IAAM,GAG7CwZ,EAAO3vB,UAAUq0E,aAAe,SAAuBl+D,EAAQkhE,GAE7D,OADKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QACnCL,KAAKyW,IAAW,EAAKzW,KAAKyW,EAAS,IAG7CwZ,EAAO3vB,UAAU23E,aAAe,SAAuBxhE,EAAQkhE,GAG7D,OAFKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,SAElCL,KAAKyW,GACTzW,KAAKyW,EAAS,IAAM,EACpBzW,KAAKyW,EAAS,IAAM,IACD,SAAnBzW,KAAKyW,EAAS,IAGrBwZ,EAAO3vB,UAAU43E,aAAe,SAAuBzhE,EAAQkhE,GAG7D,OAFKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QAEpB,SAAfL,KAAKyW,IACTzW,KAAKyW,EAAS,IAAM,GACrBzW,KAAKyW,EAAS,IAAM,EACrBzW,KAAKyW,EAAS,KAGlBwZ,EAAO3vB,UAAU63E,UAAY,SAAoB1hE,EAAQ8G,EAAYo6D,GACnElhE,GAAkB,EAClB8G,GAA0B,EACrBo6D,GAAUR,EAAY1gE,EAAQ8G,EAAYvd,KAAKK,QAEpD,IAAI6C,EAAMlD,KAAKyW,GACX2P,EAAM,EACN1lB,EAAI,EACR,QAASA,EAAI6c,IAAe6I,GAAO,KACjCljB,GAAOlD,KAAKyW,EAAS/V,GAAK0lB,EAM5B,OAJAA,GAAO,IAEHljB,GAAOkjB,IAAKljB,GAAO+G,KAAKszB,IAAI,EAAG,EAAIhgB,IAEhCra,GAGT+sB,EAAO3vB,UAAU83E,UAAY,SAAoB3hE,EAAQ8G,EAAYo6D,GACnElhE,GAAkB,EAClB8G,GAA0B,EACrBo6D,GAAUR,EAAY1gE,EAAQ8G,EAAYvd,KAAKK,QAEpD,IAAIK,EAAI6c,EACJ6I,EAAM,EACNljB,EAAMlD,KAAKyW,IAAW/V,GAC1B,MAAOA,EAAI,IAAM0lB,GAAO,KACtBljB,GAAOlD,KAAKyW,IAAW/V,GAAK0lB,EAM9B,OAJAA,GAAO,IAEHljB,GAAOkjB,IAAKljB,GAAO+G,KAAKszB,IAAI,EAAG,EAAIhgB,IAEhCra,GAGT+sB,EAAO3vB,UAAU+3E,SAAW,SAAmB5hE,EAAQkhE,GAErD,OADKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QACtB,IAAfL,KAAKyW,IAC0B,GAA5B,IAAOzW,KAAKyW,GAAU,GADKzW,KAAKyW,IAI3CwZ,EAAO3vB,UAAUg4E,YAAc,SAAsB7hE,EAAQkhE,GACtDA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QAC3C,IAAI6C,EAAMlD,KAAKyW,GAAWzW,KAAKyW,EAAS,IAAM,EAC9C,OAAc,MAANvT,EAAsB,WAANA,EAAmBA,GAG7C+sB,EAAO3vB,UAAUi4E,YAAc,SAAsB9hE,EAAQkhE,GACtDA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QAC3C,IAAI6C,EAAMlD,KAAKyW,EAAS,GAAMzW,KAAKyW,IAAW,EAC9C,OAAc,MAANvT,EAAsB,WAANA,EAAmBA,GAG7C+sB,EAAO3vB,UAAUkgB,YAAc,SAAsB/J,EAAQkhE,GAG3D,OAFKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QAEnCL,KAAKyW,GACVzW,KAAKyW,EAAS,IAAM,EACpBzW,KAAKyW,EAAS,IAAM,GACpBzW,KAAKyW,EAAS,IAAM,IAGzBwZ,EAAO3vB,UAAUk4E,YAAc,SAAsB/hE,EAAQkhE,GAG3D,OAFKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QAEnCL,KAAKyW,IAAW,GACrBzW,KAAKyW,EAAS,IAAM,GACpBzW,KAAKyW,EAAS,IAAM,EACpBzW,KAAKyW,EAAS,IAGnBwZ,EAAO3vB,UAAUm4E,YAAc,SAAsBhiE,EAAQkhE,GAE3D,OADKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QACpC+yE,EAAQp+B,KAAKh1C,KAAMyW,GAAQ,EAAM,GAAI,IAG9CwZ,EAAO3vB,UAAUo4E,YAAc,SAAsBjiE,EAAQkhE,GAE3D,OADKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QACpC+yE,EAAQp+B,KAAKh1C,KAAMyW,GAAQ,EAAO,GAAI,IAG/CwZ,EAAO3vB,UAAUq4E,aAAe,SAAuBliE,EAAQkhE,GAE7D,OADKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QACpC+yE,EAAQp+B,KAAKh1C,KAAMyW,GAAQ,EAAM,GAAI,IAG9CwZ,EAAO3vB,UAAUs4E,aAAe,SAAuBniE,EAAQkhE,GAE7D,OADKA,GAAUR,EAAY1gE,EAAQ,EAAGzW,KAAKK,QACpC+yE,EAAQp+B,KAAKh1C,KAAMyW,GAAQ,EAAO,GAAI,IAS/CwZ,EAAO3vB,UAAUu4E,YAAc,SAAsBv1E,EAAOmT,EAAQ8G,EAAYo6D,GAI9E,GAHAr0E,GAASA,EACTmT,GAAkB,EAClB8G,GAA0B,GACrBo6D,EAAU,CACb,IAAImB,EAAW7uE,KAAKszB,IAAI,EAAG,EAAIhgB,GAAc,EAC7C85D,EAASr3E,KAAMsD,EAAOmT,EAAQ8G,EAAYu7D,EAAU,GAGtD,IAAI1yD,EAAM,EACN1lB,EAAI,EACRV,KAAKyW,GAAkB,IAARnT,EACf,QAAS5C,EAAI6c,IAAe6I,GAAO,KACjCpmB,KAAKyW,EAAS/V,GAAM4C,EAAQ8iB,EAAO,IAGrC,OAAO3P,EAAS8G,GAGlB0S,EAAO3vB,UAAUy4E,YAAc,SAAsBz1E,EAAOmT,EAAQ8G,EAAYo6D,GAI9E,GAHAr0E,GAASA,EACTmT,GAAkB,EAClB8G,GAA0B,GACrBo6D,EAAU,CACb,IAAImB,EAAW7uE,KAAKszB,IAAI,EAAG,EAAIhgB,GAAc,EAC7C85D,EAASr3E,KAAMsD,EAAOmT,EAAQ8G,EAAYu7D,EAAU,GAGtD,IAAIp4E,EAAI6c,EAAa,EACjB6I,EAAM,EACVpmB,KAAKyW,EAAS/V,GAAa,IAAR4C,EACnB,QAAS5C,GAAK,IAAM0lB,GAAO,KACzBpmB,KAAKyW,EAAS/V,GAAM4C,EAAQ8iB,EAAO,IAGrC,OAAO3P,EAAS8G,GAGlB0S,EAAO3vB,UAAU04E,WAAa,SAAqB11E,EAAOmT,EAAQkhE,GAMhE,OALAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,IAAM,GACjDwZ,EAAOC,sBAAqB5sB,EAAQ2G,KAAKuhB,MAAMloB,IACpDtD,KAAKyW,GAAmB,IAARnT,EACTmT,EAAS,GAWlBwZ,EAAO3vB,UAAU24E,cAAgB,SAAwB31E,EAAOmT,EAAQkhE,GAUtE,OATAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,MAAQ,GACpDwZ,EAAOC,qBACTlwB,KAAKyW,GAAmB,IAARnT,EAChBtD,KAAKyW,EAAS,GAAMnT,IAAU,GAE9Bg0E,EAAkBt3E,KAAMsD,EAAOmT,GAAQ,GAElCA,EAAS,GAGlBwZ,EAAO3vB,UAAU44E,cAAgB,SAAwB51E,EAAOmT,EAAQkhE,GAUtE,OATAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,MAAQ,GACpDwZ,EAAOC,qBACTlwB,KAAKyW,GAAWnT,IAAU,EAC1BtD,KAAKyW,EAAS,GAAc,IAARnT,GAEpBg0E,EAAkBt3E,KAAMsD,EAAOmT,GAAQ,GAElCA,EAAS,GAUlBwZ,EAAO3vB,UAAU64E,cAAgB,SAAwB71E,EAAOmT,EAAQkhE,GAYtE,OAXAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,WAAY,GACxDwZ,EAAOC,qBACTlwB,KAAKyW,EAAS,GAAMnT,IAAU,GAC9BtD,KAAKyW,EAAS,GAAMnT,IAAU,GAC9BtD,KAAKyW,EAAS,GAAMnT,IAAU,EAC9BtD,KAAKyW,GAAmB,IAARnT,GAEhBk0E,EAAkBx3E,KAAMsD,EAAOmT,GAAQ,GAElCA,EAAS,GAGlBwZ,EAAO3vB,UAAU84E,cAAgB,SAAwB91E,EAAOmT,EAAQkhE,GAYtE,OAXAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,WAAY,GACxDwZ,EAAOC,qBACTlwB,KAAKyW,GAAWnT,IAAU,GAC1BtD,KAAKyW,EAAS,GAAMnT,IAAU,GAC9BtD,KAAKyW,EAAS,GAAMnT,IAAU,EAC9BtD,KAAKyW,EAAS,GAAc,IAARnT,GAEpBk0E,EAAkBx3E,KAAMsD,EAAOmT,GAAQ,GAElCA,EAAS,GAGlBwZ,EAAO3vB,UAAU+4E,WAAa,SAAqB/1E,EAAOmT,EAAQ8G,EAAYo6D,GAG5E,GAFAr0E,GAASA,EACTmT,GAAkB,GACbkhE,EAAU,CACb,IAAIrqB,EAAQrjD,KAAKszB,IAAI,EAAG,EAAIhgB,EAAa,GAEzC85D,EAASr3E,KAAMsD,EAAOmT,EAAQ8G,EAAY+vC,EAAQ,GAAIA,GAGxD,IAAI5sD,EAAI,EACJ0lB,EAAM,EACNkzD,EAAM,EACVt5E,KAAKyW,GAAkB,IAARnT,EACf,QAAS5C,EAAI6c,IAAe6I,GAAO,KAC7B9iB,EAAQ,GAAa,IAARg2E,GAAsC,IAAzBt5E,KAAKyW,EAAS/V,EAAI,KAC9C44E,EAAM,GAERt5E,KAAKyW,EAAS/V,IAAO4C,EAAQ8iB,GAAQ,GAAKkzD,EAAM,IAGlD,OAAO7iE,EAAS8G,GAGlB0S,EAAO3vB,UAAUi5E,WAAa,SAAqBj2E,EAAOmT,EAAQ8G,EAAYo6D,GAG5E,GAFAr0E,GAASA,EACTmT,GAAkB,GACbkhE,EAAU,CACb,IAAIrqB,EAAQrjD,KAAKszB,IAAI,EAAG,EAAIhgB,EAAa,GAEzC85D,EAASr3E,KAAMsD,EAAOmT,EAAQ8G,EAAY+vC,EAAQ,GAAIA,GAGxD,IAAI5sD,EAAI6c,EAAa,EACjB6I,EAAM,EACNkzD,EAAM,EACVt5E,KAAKyW,EAAS/V,GAAa,IAAR4C,EACnB,QAAS5C,GAAK,IAAM0lB,GAAO,KACrB9iB,EAAQ,GAAa,IAARg2E,GAAsC,IAAzBt5E,KAAKyW,EAAS/V,EAAI,KAC9C44E,EAAM,GAERt5E,KAAKyW,EAAS/V,IAAO4C,EAAQ8iB,GAAQ,GAAKkzD,EAAM,IAGlD,OAAO7iE,EAAS8G,GAGlB0S,EAAO3vB,UAAUk5E,UAAY,SAAoBl2E,EAAOmT,EAAQkhE,GAO9D,OANAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,KAAO,KAClDwZ,EAAOC,sBAAqB5sB,EAAQ2G,KAAKuhB,MAAMloB,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCtD,KAAKyW,GAAmB,IAARnT,EACTmT,EAAS,GAGlBwZ,EAAO3vB,UAAUm5E,aAAe,SAAuBn2E,EAAOmT,EAAQkhE,GAUpE,OATAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,OAAS,OACrDwZ,EAAOC,qBACTlwB,KAAKyW,GAAmB,IAARnT,EAChBtD,KAAKyW,EAAS,GAAMnT,IAAU,GAE9Bg0E,EAAkBt3E,KAAMsD,EAAOmT,GAAQ,GAElCA,EAAS,GAGlBwZ,EAAO3vB,UAAUo5E,aAAe,SAAuBp2E,EAAOmT,EAAQkhE,GAUpE,OATAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,OAAS,OACrDwZ,EAAOC,qBACTlwB,KAAKyW,GAAWnT,IAAU,EAC1BtD,KAAKyW,EAAS,GAAc,IAARnT,GAEpBg0E,EAAkBt3E,KAAMsD,EAAOmT,GAAQ,GAElCA,EAAS,GAGlBwZ,EAAO3vB,UAAUq5E,aAAe,SAAuBr2E,EAAOmT,EAAQkhE,GAYpE,OAXAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,YAAa,YACzDwZ,EAAOC,qBACTlwB,KAAKyW,GAAmB,IAARnT,EAChBtD,KAAKyW,EAAS,GAAMnT,IAAU,EAC9BtD,KAAKyW,EAAS,GAAMnT,IAAU,GAC9BtD,KAAKyW,EAAS,GAAMnT,IAAU,IAE9Bk0E,EAAkBx3E,KAAMsD,EAAOmT,GAAQ,GAElCA,EAAS,GAGlBwZ,EAAO3vB,UAAUs5E,aAAe,SAAuBt2E,EAAOmT,EAAQkhE,GAapE,OAZAr0E,GAASA,EACTmT,GAAkB,EACbkhE,GAAUN,EAASr3E,KAAMsD,EAAOmT,EAAQ,EAAG,YAAa,YACzDnT,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxC2sB,EAAOC,qBACTlwB,KAAKyW,GAAWnT,IAAU,GAC1BtD,KAAKyW,EAAS,GAAMnT,IAAU,GAC9BtD,KAAKyW,EAAS,GAAMnT,IAAU,EAC9BtD,KAAKyW,EAAS,GAAc,IAARnT,GAEpBk0E,EAAkBx3E,KAAMsD,EAAOmT,GAAQ,GAElCA,EAAS,GAgBlBwZ,EAAO3vB,UAAUu5E,aAAe,SAAuBv2E,EAAOmT,EAAQkhE,GACpE,OAAOD,EAAW13E,KAAMsD,EAAOmT,GAAQ,EAAMkhE,IAG/C1nD,EAAO3vB,UAAUw5E,aAAe,SAAuBx2E,EAAOmT,EAAQkhE,GACpE,OAAOD,EAAW13E,KAAMsD,EAAOmT,GAAQ,EAAOkhE,IAWhD1nD,EAAO3vB,UAAUy5E,cAAgB,SAAwBz2E,EAAOmT,EAAQkhE,GACtE,OAAOC,EAAY53E,KAAMsD,EAAOmT,GAAQ,EAAMkhE,IAGhD1nD,EAAO3vB,UAAU05E,cAAgB,SAAwB12E,EAAOmT,EAAQkhE,GACtE,OAAOC,EAAY53E,KAAMsD,EAAOmT,GAAQ,EAAOkhE,IAIjD1nD,EAAO3vB,UAAU4wB,KAAO,SAAe/mB,EAAQqoB,EAAapoB,EAAOI,GAQjE,GAPKJ,IAAOA,EAAQ,GACfI,GAAe,IAARA,IAAWA,EAAMxK,KAAKK,QAC9BmyB,GAAeroB,EAAO9J,SAAQmyB,EAAcroB,EAAO9J,QAClDmyB,IAAaA,EAAc,GAC5BhoB,EAAM,GAAKA,EAAMJ,IAAOI,EAAMJ,GAG9BI,IAAQJ,EAAO,OAAO,EAC1B,GAAsB,IAAlBD,EAAO9J,QAAgC,IAAhBL,KAAKK,OAAc,OAAO,EAGrD,GAAImyB,EAAc,EAChB,MAAM,IAAI7rB,WAAW,6BAEvB,GAAIyD,EAAQ,GAAKA,GAASpK,KAAKK,OAAQ,MAAM,IAAIsG,WAAW,6BAC5D,GAAI6D,EAAM,EAAG,MAAM,IAAI7D,WAAW,2BAG9B6D,EAAMxK,KAAKK,SAAQmK,EAAMxK,KAAKK,QAC9B8J,EAAO9J,OAASmyB,EAAchoB,EAAMJ,IACtCI,EAAML,EAAO9J,OAASmyB,EAAcpoB,GAGtC,IACI1J,EADA4J,EAAME,EAAMJ,EAGhB,GAAIpK,OAASmK,GAAUC,EAAQooB,GAAeA,EAAchoB,EAE1D,IAAK9J,EAAI4J,EAAM,EAAG5J,GAAK,IAAKA,EAC1ByJ,EAAOzJ,EAAI8xB,GAAexyB,KAAKU,EAAI0J,QAEhC,GAAIE,EAAM,MAAS2lB,EAAOC,oBAE/B,IAAKxvB,EAAI,EAAGA,EAAI4J,IAAO5J,EACrByJ,EAAOzJ,EAAI8xB,GAAexyB,KAAKU,EAAI0J,QAGrC2R,WAAWzb,UAAUgqB,IAAI3R,KACvBxO,EACAnK,KAAKsyB,SAASloB,EAAOA,EAAQE,GAC7BkoB,GAIJ,OAAOloB,GAOT2lB,EAAO3vB,UAAUmyB,KAAO,SAAevvB,EAAKkH,EAAOI,EAAKgpE,GAEtD,GAAmB,kBAARtwE,EAAkB,CAS3B,GARqB,kBAAVkH,GACTopE,EAAWppE,EACXA,EAAQ,EACRI,EAAMxK,KAAKK,QACa,kBAARmK,IAChBgpE,EAAWhpE,EACXA,EAAMxK,KAAKK,QAEM,IAAf6C,EAAI7C,OAAc,CACpB,IAAIwd,EAAO3a,EAAI4a,WAAW,GACtBD,EAAO,MACT3a,EAAM2a,GAGV,QAAiBpX,IAAb+sE,GAA8C,kBAAbA,EACnC,MAAM,IAAIhsD,UAAU,6BAEtB,GAAwB,kBAAbgsD,IAA0BvjD,EAAOwjD,WAAWD,GACrD,MAAM,IAAIhsD,UAAU,qBAAuBgsD,OAErB,kBAARtwE,IAChBA,GAAY,KAId,GAAIkH,EAAQ,GAAKpK,KAAKK,OAAS+J,GAASpK,KAAKK,OAASmK,EACpD,MAAM,IAAI7D,WAAW,sBAGvB,GAAI6D,GAAOJ,EACT,OAAOpK,KAQT,IAAIU,EACJ,GANA0J,KAAkB,EAClBI,OAAc/D,IAAR+D,EAAoBxK,KAAKK,OAASmK,IAAQ,EAE3CtH,IAAKA,EAAM,GAGG,kBAARA,EACT,IAAKxC,EAAI0J,EAAO1J,EAAI8J,IAAO9J,EACzBV,KAAKU,GAAKwC,MAEP,CACL,IAAIuuB,EAAQxB,EAAOgB,SAAS/tB,GACxBA,EACAkuB,EAAY,IAAInB,EAAO/sB,EAAKswE,GAAUjyD,YACtCjX,EAAMmnB,EAAMpxB,OAChB,IAAKK,EAAI,EAAGA,EAAI8J,EAAMJ,IAAS1J,EAC7BV,KAAKU,EAAI0J,GAASqnB,EAAM/wB,EAAI4J,GAIhC,OAAOtK,MAMT,IAAIi6E,EAAoB,qBAExB,SAASC,EAAar4E,GAIpB,GAFAA,EAAMs4E,EAAWt4E,GAAKX,QAAQ+4E,EAAmB,IAE7Cp4E,EAAIxB,OAAS,EAAG,MAAO,GAE3B,MAAOwB,EAAIxB,OAAS,IAAM,EACxBwB,GAAY,IAEd,OAAOA,EAGT,SAASs4E,EAAYt4E,GACnB,OAAIA,EAAIu4E,KAAav4E,EAAIu4E,OAClBv4E,EAAIX,QAAQ,aAAc,IAGnC,SAASg2E,EAAO3+C,GACd,OAAIA,EAAI,GAAW,IAAMA,EAAEhX,SAAS,IAC7BgX,EAAEhX,SAAS,IAGpB,SAAS6P,EAAaR,EAAQS,GAE5B,IAAIC,EADJD,EAAQA,GAASE,IAMjB,IAJA,IAAIlxB,EAASuwB,EAAOvwB,OAChBmxB,EAAgB,KAChBC,EAAQ,GAEH/wB,EAAI,EAAGA,EAAIL,IAAUK,EAAG,CAI/B,GAHA4wB,EAAYV,EAAO9S,WAAWpd,GAG1B4wB,EAAY,OAAUA,EAAY,MAAQ,CAE5C,IAAKE,EAAe,CAElB,GAAIF,EAAY,MAAQ,EAEjBD,GAAS,IAAM,GAAGI,EAAM1pB,KAAK,IAAM,IAAM,KAC9C,SACK,GAAIrH,EAAI,IAAML,EAAQ,EAEtBgxB,GAAS,IAAM,GAAGI,EAAM1pB,KAAK,IAAM,IAAM,KAC9C,SAIFypB,EAAgBF,EAEhB,SAIF,GAAIA,EAAY,MAAQ,EACjBD,GAAS,IAAM,GAAGI,EAAM1pB,KAAK,IAAM,IAAM,KAC9CypB,EAAgBF,EAChB,SAIFA,EAAkE,OAArDE,EAAgB,OAAU,GAAKF,EAAY,YAC/CE,IAEJH,GAAS,IAAM,GAAGI,EAAM1pB,KAAK,IAAM,IAAM,KAMhD,GAHAypB,EAAgB,KAGZF,EAAY,IAAM,CACpB,IAAKD,GAAS,GAAK,EAAG,MACtBI,EAAM1pB,KAAKupB,QACN,GAAIA,EAAY,KAAO,CAC5B,IAAKD,GAAS,GAAK,EAAG,MACtBI,EAAM1pB,KACJupB,GAAa,EAAM,IACP,GAAZA,EAAmB,UAEhB,GAAIA,EAAY,MAAS,CAC9B,IAAKD,GAAS,GAAK,EAAG,MACtBI,EAAM1pB,KACJupB,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,MAAIA,EAAY,SASrB,MAAM,IAAIjpB,MAAM,sBARhB,IAAKgpB,GAAS,GAAK,EAAG,MACtBI,EAAM1pB,KACJupB,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,OAAOG,EAGT,SAASyjD,EAAcrzE,GAErB,IADA,IAAIw4E,EAAY,GACP35E,EAAI,EAAGA,EAAImB,EAAIxB,SAAUK,EAEhC25E,EAAUtyE,KAAyB,IAApBlG,EAAIic,WAAWpd,IAEhC,OAAO25E,EAGT,SAAS/E,EAAgBzzE,EAAKwvB,GAG5B,IAFA,IAAIvX,EAAGwgE,EAAIC,EACPF,EAAY,GACP35E,EAAI,EAAGA,EAAImB,EAAIxB,SAAUK,EAAG,CACnC,IAAK2wB,GAAS,GAAK,EAAG,MAEtBvX,EAAIjY,EAAIic,WAAWpd,GACnB45E,EAAKxgE,GAAK,EACVygE,EAAKzgE,EAAI,IACTugE,EAAUtyE,KAAKwyE,GACfF,EAAUtyE,KAAKuyE,GAGjB,OAAOD,EAGT,SAASzG,EAAe/xE,GACtB,OAAOsxE,EAAO31D,YAAY08D,EAAYr4E,IAGxC,SAAS8vB,GAAY5W,EAAK6W,EAAKnb,EAAQpW,GACrC,IAAK,IAAIK,EAAI,EAAGA,EAAIL,IAAUK,EAAG,CAC/B,GAAKA,EAAI+V,GAAUmb,EAAIvxB,QAAYK,GAAKqa,EAAI1a,OAAS,MACrDuxB,EAAIlxB,EAAI+V,GAAUsE,EAAIra,GAExB,OAAOA,EAGT,SAAS6vB,GAAOrtB,GACd,OAAOA,IAAQA,K,2CC3vDjB,IAAI4S,EAAsB,EAAQ,QAC9B0kE,EAAqB,EAAQ,QAE7Bp/C,EAA0BtlB,EAAoBslB,wBAC9CI,EAAyB1lB,EAAoB0lB,uBAIjD36B,EAAOC,QAAU,SAAU25E,GACzB,OAAOj/C,EAAuBg/C,EAAmBC,EAAeA,EAAcr/C,O,qBCThF,IAAIs/C,EAAe,EAAQ,QACvBC,EAAQ,EAAQ,QA8HpB,SAAShqD,EAAYC,GACnB,GAAsB,kBAAXA,EACT,MAAM,IAAIvoB,MAAM,yBAGlB,IAAIm4B,EAAQ5P,EAAO6P,cAEnB,OAAQD,GACN,IAAK,UACH,OAAO1/B,EAAQS,QACjB,IAAK,eACH,OAAOT,EAAQU,aACjB,IAAK,QACH,OAAOV,EAAQM,MACjB,IAAK,OACH,OAAON,EAAQZ,KACjB,QACE,MAAM,IAAImI,MAAM,iBAAmBuoB,IAtIzC9vB,EAAQS,QAAU,CAChBmqC,GAAI,UACJhL,IAAK,EACLk6C,OAAQ,CAAC,GAAI,GAAI,KAYnB95E,EAAQU,aAAe,CACrBkqC,GAAI,eACJhL,IAAK,EACLk6C,OAAQ,CAAC,EAAG,GAAI,KAQlB95E,EAAQZ,KAAO,CACbwrC,GAAI,OACJhL,IAAK,EACLk6C,OAAQ,CAAC,EAAG,GAAI,KAYlB95E,EAAQM,MAAQ,CACdsqC,GAAI,QACJhL,IAAK,EACLk6C,OAAQ,CAAC,EAAG,GAAI,KASlB95E,EAAQ+5E,MAAQ,CACdn6C,KAAM,GAWR5/B,EAAQwtE,sBAAwB,SAAgCruE,EAAMoZ,GACpE,IAAKpZ,EAAK26E,OAAQ,MAAM,IAAIvyE,MAAM,iBAAmBpI,GAErD,IAAKy6E,EAAa7+D,QAAQxC,GACxB,MAAM,IAAIhR,MAAM,oBAAsBgR,GAGxC,OAAIA,GAAW,GAAKA,EAAU,GAAWpZ,EAAK26E,OAAO,GAC5CvhE,EAAU,GAAWpZ,EAAK26E,OAAO,GACnC36E,EAAK26E,OAAO,IASrB95E,EAAQg6E,mBAAqB,SAA6BC,GACxD,OAAIJ,EAAM54E,YAAYg5E,GAAiBj6E,EAAQS,QACtCo5E,EAAM34E,iBAAiB+4E,GAAiBj6E,EAAQU,aAChDm5E,EAAM/4E,UAAUm5E,GAAiBj6E,EAAQM,MACtCN,EAAQZ,MAStBY,EAAQygB,SAAW,SAAmBthB,GACpC,GAAIA,GAAQA,EAAKyrC,GAAI,OAAOzrC,EAAKyrC,GACjC,MAAM,IAAIrjC,MAAM,iBASlBvH,EAAQ+a,QAAU,SAAkB5b,GAClC,OAAOA,GAAQA,EAAKygC,KAAOzgC,EAAK26E,QAsClC95E,EAAQX,KAAO,SAAemD,EAAOq9B,GACnC,GAAI7/B,EAAQ+a,QAAQvY,GAClB,OAAOA,EAGT,IACE,OAAOqtB,EAAWrtB,GAClB,MAAOuJ,GACP,OAAO8zB,K,qBCpKX,IAAI9gC,EAAO,EAAQ,QACfm7E,EAAc,EAAQ,QACtBxjC,EAAmB,EAAQ,QAC3B13C,EAAW,EAAQ,QACnBsoB,EAAY,EAAQ,QACpBuyD,EAAQ,EAAQ,QAChBxyD,EAAQ,EAAQ,QAChBvhB,EAAW,EAAQ,QAQvB,SAASq0E,EAAqBp5E,GAC5B,OAAO+hB,SAASC,mBAAmBhiB,IAAMxB,OAW3C,SAAS66E,EAAaC,EAAOl7E,EAAM4B,GACjC,IACImM,EADAqgE,EAAW,GAGf,MAAsC,QAA9BrgE,EAASmtE,EAAM91C,KAAKxjC,IAC1BwsE,EAAStmE,KAAK,CACZhI,KAAMiO,EAAO,GACbP,MAAOO,EAAOP,MACdxN,KAAMA,EACNI,OAAQ2N,EAAO,GAAG3N,SAItB,OAAOguE,EAUT,SAAS+M,EAAuBL,GAC9B,IAEIM,EACAC,EAHAC,EAAUL,EAAYP,EAAMp5E,QAAS1B,EAAK0B,QAASw5E,GACnDS,EAAeN,EAAYP,EAAMn5E,aAAc3B,EAAK2B,aAAcu5E,GAIlE5yD,EAAMggB,sBACRkzC,EAAWH,EAAYP,EAAMz6E,KAAML,EAAKK,KAAM66E,GAC9CO,EAAYJ,EAAYP,EAAMv5E,MAAOvB,EAAKuB,MAAO25E,KAEjDM,EAAWH,EAAYP,EAAMr5E,WAAYzB,EAAKK,KAAM66E,GACpDO,EAAY,IAGd,IAAIG,EAAOF,EAAQx5D,OAAOy5D,EAAcH,EAAUC,GAElD,OAAOG,EACJtyE,MAAK,SAAUuyE,EAAIC,GAClB,OAAOD,EAAGjuE,MAAQkuE,EAAGluE,SAEtBgd,KAAI,SAAU/J,GACb,MAAO,CACL3gB,KAAM2gB,EAAI3gB,KACVE,KAAMygB,EAAIzgB,KACVI,OAAQqgB,EAAIrgB,WAapB,SAASu7E,EAAsBv7E,EAAQJ,GACrC,OAAQA,GACN,KAAKJ,EAAK0B,QACR,OAAOy5E,EAAY56E,cAAcC,GACnC,KAAKR,EAAK2B,aACR,OAAOg2C,EAAiBp3C,cAAcC,GACxC,KAAKR,EAAKuB,MACR,OAAOgnB,EAAUhoB,cAAcC,GACjC,KAAKR,EAAKK,KACR,OAAOJ,EAASM,cAAcC,IAUpC,SAASw7E,EAAeJ,GACtB,OAAOA,EAAKK,QAAO,SAAUC,EAAKC,GAChC,IAAIC,EAAUF,EAAI17E,OAAS,GAAK,EAAI07E,EAAIA,EAAI17E,OAAS,GAAK,KAC1D,OAAI47E,GAAWA,EAAQh8E,OAAS+7E,EAAK/7E,MACnC87E,EAAIA,EAAI17E,OAAS,GAAGN,MAAQi8E,EAAKj8E,KAC1Bg8E,IAGTA,EAAIh0E,KAAKi0E,GACFD,KACN,IAmBL,SAASG,EAAYT,GAEnB,IADA,IAAIlzE,EAAQ,GACH7H,EAAI,EAAGA,EAAI+6E,EAAKp7E,OAAQK,IAAK,CACpC,IAAIy7E,EAAMV,EAAK/6E,GAEf,OAAQy7E,EAAIl8E,MACV,KAAKJ,EAAK0B,QACRgH,EAAMR,KAAK,CAACo0E,EACV,CAAEp8E,KAAMo8E,EAAIp8E,KAAME,KAAMJ,EAAK2B,aAAcnB,OAAQ87E,EAAI97E,QACvD,CAAEN,KAAMo8E,EAAIp8E,KAAME,KAAMJ,EAAKK,KAAMG,OAAQ87E,EAAI97E,UAEjD,MACF,KAAKR,EAAK2B,aACR+G,EAAMR,KAAK,CAACo0E,EACV,CAAEp8E,KAAMo8E,EAAIp8E,KAAME,KAAMJ,EAAKK,KAAMG,OAAQ87E,EAAI97E,UAEjD,MACF,KAAKR,EAAKuB,MACRmH,EAAMR,KAAK,CAACo0E,EACV,CAAEp8E,KAAMo8E,EAAIp8E,KAAME,KAAMJ,EAAKK,KAAMG,OAAQ46E,EAAoBkB,EAAIp8E,SAErE,MACF,KAAKF,EAAKK,KACRqI,EAAMR,KAAK,CACT,CAAEhI,KAAMo8E,EAAIp8E,KAAME,KAAMJ,EAAKK,KAAMG,OAAQ46E,EAAoBkB,EAAIp8E,UAK3E,OAAOwI,EAeT,SAAS6zE,EAAY7zE,EAAO8Q,GAK1B,IAJA,IAAIgjE,EAAQ,GACRv1E,EAAQ,CAAC,MAAS,IAClBw1E,EAAc,CAAC,SAEV57E,EAAI,EAAGA,EAAI6H,EAAMlI,OAAQK,IAAK,CAIrC,IAHA,IAAI67E,EAAYh0E,EAAM7H,GAClB87E,EAAiB,GAEZj6D,EAAI,EAAGA,EAAIg6D,EAAUl8E,OAAQkiB,IAAK,CACzC,IAAI1X,EAAO0xE,EAAUh6D,GACjB5Z,EAAM,GAAKjI,EAAI6hB,EAEnBi6D,EAAez0E,KAAKY,GACpB0zE,EAAM1zE,GAAO,CAAEkC,KAAMA,EAAM4xE,UAAW,GACtC31E,EAAM6B,GAAO,GAEb,IAAK,IAAI4vB,EAAI,EAAGA,EAAI+jD,EAAYj8E,OAAQk4B,IAAK,CAC3C,IAAImkD,EAAaJ,EAAY/jD,GAEzB8jD,EAAMK,IAAeL,EAAMK,GAAY7xE,KAAK5K,OAAS4K,EAAK5K,MAC5D6G,EAAM41E,GAAY/zE,GAChBizE,EAAqBS,EAAMK,GAAYD,UAAY5xE,EAAKxK,OAAQwK,EAAK5K,MACrE27E,EAAqBS,EAAMK,GAAYD,UAAW5xE,EAAK5K,MAEzDo8E,EAAMK,GAAYD,WAAa5xE,EAAKxK,SAEhCg8E,EAAMK,KAAaL,EAAMK,GAAYD,UAAY5xE,EAAKxK,QAE1DyG,EAAM41E,GAAY/zE,GAAOizE,EAAqB/wE,EAAKxK,OAAQwK,EAAK5K,MAC9D,EAAIJ,EAAKyuE,sBAAsBzjE,EAAK5K,KAAMoZ,KAKlDijE,EAAcE,EAGhB,IAAKjkD,EAAI,EAAGA,EAAI+jD,EAAYj8E,OAAQk4B,IAClCzxB,EAAMw1E,EAAY/jD,IAAI,OAAS,EAGjC,MAAO,CAAE9N,IAAK3jB,EAAOu1E,MAAOA,GAW9B,SAASM,EAAoB58E,EAAM68E,GACjC,IAAI38E,EACA48E,EAAWh9E,EAAKi7E,mBAAmB/6E,GAKvC,GAHAE,EAAOJ,EAAKM,KAAKy8E,EAAWC,GAGxB58E,IAASJ,EAAKK,MAAQD,EAAKygC,IAAMm8C,EAASn8C,IAC5C,MAAM,IAAIr4B,MAAM,IAAMtI,EAAN,iCACoBF,EAAK0hB,SAASthB,GAChD,0BAA4BJ,EAAK0hB,SAASs7D,IAQ9C,OAJI58E,IAASJ,EAAKuB,OAAU+mB,EAAMggB,uBAChCloC,EAAOJ,EAAKK,MAGND,GACN,KAAKJ,EAAK0B,QACR,OAAO,IAAIy5E,EAAYj7E,GAEzB,KAAKF,EAAK2B,aACR,OAAO,IAAIg2C,EAAiBz3C,GAE9B,KAAKF,EAAKuB,MACR,OAAO,IAAIgnB,EAAUroB,GAEvB,KAAKF,EAAKK,KACR,OAAO,IAAIJ,EAASC,IAmB1Be,EAAQ4uE,UAAY,SAAoB5zD,GACtC,OAAOA,EAAMggE,QAAO,SAAUC,EAAKI,GAOjC,MANmB,kBAARA,EACTJ,EAAIh0E,KAAK40E,EAAmBR,EAAK,OACxBA,EAAIp8E,MACbg8E,EAAIh0E,KAAK40E,EAAmBR,EAAIp8E,KAAMo8E,EAAIl8E,OAGrC87E,IACN,KAWLj7E,EAAQ6vB,WAAa,SAAqB5wB,EAAMsZ,GAQ9C,IAPA,IAAIoiE,EAAOL,EAAsBr7E,EAAMooB,EAAMggB,sBAEzC5/B,EAAQ2zE,EAAWT,GACnB30E,EAAQs1E,EAAW7zE,EAAO8Q,GAC1B5H,EAAO7K,EAAS6B,UAAU3B,EAAM2jB,IAAK,QAAS,OAE9CqyD,EAAgB,GACXp8E,EAAI,EAAGA,EAAI+Q,EAAKpR,OAAS,EAAGK,IACnCo8E,EAAc/0E,KAAKjB,EAAMu1E,MAAM5qE,EAAK/Q,IAAImK,MAG1C,OAAO/J,EAAQ4uE,UAAUmM,EAAciB,KAazCh8E,EAAQ+uE,SAAW,SAAmB9vE,GACpC,OAAOe,EAAQ4uE,UACb0L,EAAsBr7E,EAAMooB,EAAMggB,yB,kCCtUtC,IAAIryB,EAAsB,EAAQ,QAC9BinE,EAAU,EAAQ,QAAgCC,OAClDC,EAAqB,EAAQ,QAE7BlnE,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,UAAU,SAAgBkQ,GAC/C,IAAItc,EAAOmzE,EAAQhnE,EAAY/V,MAAOkmB,EAAYzb,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,GACxF,OAAOw2E,EAAmBj9E,KAAM4J,O,qBCZlC,IAAIue,EAAQ,EAAQ,QAChBolD,EAAS,EAAQ,QACjB9jD,EAAU,EAAQ,QAClB5pB,EAAO,EAAQ,QACf66E,EAAe,EAAQ,QACvBzzD,EAAU,EAAQ,QAGlBi2D,EAAM,KACNC,EAAUh1D,EAAM6f,YAAYk1C,GAEhC,SAASE,EAA6Bn9E,EAAMI,EAAQiZ,GAClD,IAAK,IAAI+jE,EAAiB,EAAGA,GAAkB,GAAIA,IACjD,GAAIh9E,GAAUS,EAAQw8E,YAAYD,EAAgB/jE,EAAsBrZ,GACtE,OAAOo9E,EAOb,SAASE,EAAsBt9E,EAAMoZ,GAEnC,OAAOxZ,EAAKyuE,sBAAsBruE,EAAMoZ,GAAW,EAGrD,SAASmkE,EAA2BnP,EAAUh1D,GAC5C,IAAIokE,EAAY,EAOhB,OALApP,EAAS1zC,SAAQ,SAAU56B,GACzB,IAAI29E,EAAeH,EAAqBx9E,EAAKE,KAAMoZ,GACnDokE,GAAaC,EAAe39E,EAAKK,mBAG5Bq9E,EAGT,SAASE,EAA4BtP,EAAU/0D,GAC7C,IAAK,IAAI+jE,EAAiB,EAAGA,GAAkB,GAAIA,IAAkB,CACnE,IAAIh9E,EAASm9E,EAA0BnP,EAAUgP,GACjD,GAAIh9E,GAAUS,EAAQw8E,YAAYD,EAAgB/jE,EAAsBzZ,EAAKg7E,OAC3E,OAAOwC,GAebv8E,EAAQX,KAAO,SAAemD,EAAOq9B,GACnC,OAAI+5C,EAAa7+D,QAAQvY,GAChBiI,SAASjI,EAAO,IAGlBq9B,GAYT7/B,EAAQw8E,YAAc,SAAsBjkE,EAASC,EAAsBrZ,GACzE,IAAKy6E,EAAa7+D,QAAQxC,GACxB,MAAM,IAAIhR,MAAM,2BAIE,qBAATpI,IAAsBA,EAAOJ,EAAKK,MAG7C,IAAIquE,EAAiBpmD,EAAM4f,wBAAwB1uB,GAG/Cm1D,EAAmBjB,EAAOtjD,uBAAuB5Q,EAASC,GAG1Dm1D,EAA+D,GAArCF,EAAiBC,GAE/C,GAAIvuE,IAASJ,EAAKg7E,MAAO,OAAOpM,EAEhC,IAAImP,EAAanP,EAAyB8O,EAAqBt9E,EAAMoZ,GAGrE,OAAQpZ,GACN,KAAKJ,EAAK0B,QACR,OAAO0I,KAAKuhB,MAAOoyD,EAAa,GAAM,GAExC,KAAK/9E,EAAK2B,aACR,OAAOyI,KAAKuhB,MAAOoyD,EAAa,GAAM,GAExC,KAAK/9E,EAAKuB,MACR,OAAO6I,KAAKuhB,MAAMoyD,EAAa,IAEjC,KAAK/9E,EAAKK,KACV,QACE,OAAO+J,KAAKuhB,MAAMoyD,EAAa,KAYrC98E,EAAQgvE,sBAAwB,SAAgC/vE,EAAMuZ,GACpE,IAAI6iE,EAEA0B,EAAMp0D,EAAQtpB,KAAKmZ,EAAsBmQ,EAAQK,GAErD,GAAI7C,EAAQlnB,GAAO,CACjB,GAAIA,EAAKM,OAAS,EAChB,OAAOs9E,EAA2B59E,EAAM89E,GAG1C,GAAoB,IAAhB99E,EAAKM,OACP,OAAO,EAGT87E,EAAMp8E,EAAK,QAEXo8E,EAAMp8E,EAGR,OAAOq9E,EAA4BjB,EAAIl8E,KAAMk8E,EAAI57E,YAAas9E,IAahE/8E,EAAQ20C,eAAiB,SAAyBp8B,GAChD,IAAKqhE,EAAa7+D,QAAQxC,IAAYA,EAAU,EAC9C,MAAM,IAAIhR,MAAM,2BAGlB,IAAIrB,EAAIqS,GAAW,GAEnB,MAAO8O,EAAM6f,YAAYhhC,GAAKm2E,GAAW,EACvCn2E,GAAMk2E,GAAQ/0D,EAAM6f,YAAYhhC,GAAKm2E,EAGvC,OAAQ9jE,GAAW,GAAMrS,I,kCCjK3B,IAAI8O,EAAsB,EAAQ,QAC9BgoE,EAAU,EAAQ,QAA6Bt1C,KAE/CzyB,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,UAAU,SAAgBkQ,GAC/C,OAAO43D,EAAQ/nE,EAAY/V,MAAOkmB,EAAYzb,UAAUpK,OAAQoK,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,kCCTxG,IAAIqP,EAAsB,EAAQ,QAE9BC,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAC7CwV,EAAQvhB,KAAKuhB,MAIjBxV,EAAuB,WAAW,WAChC,IAII1S,EAJAmtB,EAAOzwB,KACPK,EAAS0V,EAAY0a,GAAMpwB,OAC3BujD,EAASp4B,EAAMnrB,EAAS,GACxBoN,EAAQ,EAEZ,MAAOA,EAAQm2C,EACbtgD,EAAQmtB,EAAKhjB,GACbgjB,EAAKhjB,KAAWgjB,IAAOpwB,GACvBowB,EAAKpwB,GAAUiD,EACf,OAAOmtB,M,qBCnBX5vB,EAAOC,QAAU,IAA0B,yB,qBCC3C,IAAIi9E,EAAa,EAAQ,QAErBC,EAAS,EAAQ,QACjBC,EAAiB,EAAQ,QACzBC,EAAc,EAAQ,QAE1B,SAASC,EAAcC,EAAYhyD,EAAQ/oB,EAAMqF,EAAM+C,GACrD,IAAIy5D,EAAO,GAAGziD,MAAM9J,KAAKlO,UAAW,GAChC4zE,EAAUnZ,EAAK7kE,OACfi+E,EAA2C,oBAAtBpZ,EAAKmZ,EAAU,GAExC,IAAKC,IAAgBP,IACnB,MAAM,IAAI11E,MAAM,sCAGlB,IAAIi2E,EAoBG,CACL,GAAID,EAAU,EACZ,MAAM,IAAIh2E,MAAM,8BAYlB,OATgB,IAAZg2E,GACFh7E,EAAO+oB,EACPA,EAAS1jB,OAAOjC,GACK,IAAZ43E,GAAkBjyD,EAAOM,aAClChkB,EAAOrF,EACPA,EAAO+oB,EACPA,OAAS3lB,GAGJ,IAAI2xB,SAAQ,SAAUmmD,EAASC,GACpC,IACE,IAAIz+E,EAAOi+E,EAAOjlE,OAAO1V,EAAMqF,GAC/B61E,EAAQH,EAAWr+E,EAAMqsB,EAAQ1jB,IACjC,MAAOmE,GACP2xE,EAAO3xE,OAtCX,GAAIwxE,EAAU,EACZ,MAAM,IAAIh2E,MAAM,8BAGF,IAAZg2E,GACF5yE,EAAKpI,EACLA,EAAO+oB,EACPA,EAAS1jB,OAAOjC,GACK,IAAZ43E,IACLjyD,EAAOM,YAA4B,qBAAPjhB,GAC9BA,EAAK/C,EACLA,OAAOjC,IAEPgF,EAAK/C,EACLA,EAAOrF,EACPA,EAAO+oB,EACPA,OAAS3lB,IA2Bf,IACE,IAAI1G,EAAOi+E,EAAOjlE,OAAO1V,EAAMqF,GAC/B+C,EAAG,KAAM2yE,EAAWr+E,EAAMqsB,EAAQ1jB,IAClC,MAAOmE,GACPpB,EAAGoB,IAIP/L,EAAQiY,OAASilE,EAAOjlE,OACxBjY,EAAQyhD,SAAW47B,EAAappE,KAAK,KAAMkpE,EAAe73E,QAC1DtF,EAAQyZ,UAAY4jE,EAAappE,KAAK,KAAMkpE,EAAejxD,iBAG3DlsB,EAAQygB,SAAW48D,EAAappE,KAAK,MAAM,SAAUhV,EAAM0+E,EAAG/1E,GAC5D,OAAOw1E,EAAY93E,OAAOrG,EAAM2I,O,kCCzElC,IAAIoN,EAAsB,EAAQ,QAC9B4oE,EAAQ,EAAQ,QAAgCC,KAEhD5oE,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,QAAQ,SAAcoU,GAC3C,OAAOs0D,EAAM3oE,EAAY/V,MAAOoqB,EAAW3f,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,4CCVnF,IAAI0Y,EAAY,EAAQ,QACpBtV,EAAW,EAAQ,QACnB+0E,EAAgB,EAAQ,QACxB70E,EAAoB,EAAQ,QAG5B80E,EAAe,SAAUC,GAC3B,OAAO,SAAUruD,EAAMvK,EAAY6xB,EAAiBgnC,GAClD5/D,EAAU+G,GACV,IAAI7b,EAAIR,EAAS4mB,GACbrjB,EAAOwxE,EAAcv0E,GACrBhK,EAAS0J,EAAkBM,GAC3BoD,EAAQqxE,EAAWz+E,EAAS,EAAI,EAChCK,EAAIo+E,GAAY,EAAI,EACxB,GAAI/mC,EAAkB,EAAG,MAAO,EAAM,CACpC,GAAItqC,KAASL,EAAM,CACjB2xE,EAAO3xE,EAAKK,GACZA,GAAS/M,EACT,MAGF,GADA+M,GAAS/M,EACLo+E,EAAWrxE,EAAQ,EAAIpN,GAAUoN,EACnC,MAAM+Z,UAAU,+CAGpB,KAAMs3D,EAAWrxE,GAAS,EAAIpN,EAASoN,EAAOA,GAAS/M,EAAO+M,KAASL,IACrE2xE,EAAO74D,EAAW64D,EAAM3xE,EAAKK,GAAQA,EAAOpD,IAE9C,OAAO00E,IAIXl+E,EAAOC,QAAU,CAGf0nC,KAAMq2C,GAAa,GAGnB54D,MAAO44D,GAAa,K,kCCrCtB,IAAI/oE,EAAsB,EAAQ,QAC9BkpE,EAAW,EAAQ,QAAgCrkD,QAEnD5kB,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,WAAW,SAAiBkQ,GACjD84D,EAASjpE,EAAY/V,MAAOkmB,EAAYzb,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,qBCAhF,IAAIqhC,EAAgB,EAAQ,QAAWA,cAgBvChnC,EAAQm+E,gBAAkB,SAA0B5lE,GAClD,GAAgB,IAAZA,EAAe,MAAO,GAO1B,IALA,IAAI6lE,EAAWj1E,KAAKuhB,MAAMnS,EAAU,GAAK,EACrC8R,EAAO2c,EAAczuB,GACrB8lE,EAAqB,MAATh0D,EAAe,GAAmD,EAA9ClhB,KAAKuY,MAAM2I,EAAO,KAAO,EAAI+zD,EAAW,IACxEE,EAAY,CAACj0D,EAAO,GAEfzqB,EAAI,EAAGA,EAAIw+E,EAAW,EAAGx+E,IAChC0+E,EAAU1+E,GAAK0+E,EAAU1+E,EAAI,GAAKy+E,EAKpC,OAFAC,EAAUr3E,KAAK,GAERq3E,EAAU52E,WAuBnB1H,EAAQu0C,aAAe,SAAuBh8B,GAK5C,IAJA,IAAIgmE,EAAS,GACT3sD,EAAM5xB,EAAQm+E,gBAAgB5lE,GAC9BimE,EAAY5sD,EAAIryB,OAEXK,EAAI,EAAGA,EAAI4+E,EAAW5+E,IAC7B,IAAK,IAAI6hB,EAAI,EAAGA,EAAI+8D,EAAW/8D,IAElB,IAAN7hB,GAAiB,IAAN6hB,GACL,IAAN7hB,GAAW6hB,IAAM+8D,EAAY,GAC7B5+E,IAAM4+E,EAAY,GAAW,IAAN/8D,GAI5B88D,EAAOt3E,KAAK,CAAC2qB,EAAIhyB,GAAIgyB,EAAInQ,KAI7B,OAAO88D,I,qBCjFT,IAAIx/E,EAAO,EAAQ,QAEnB,SAASm7E,EAAaj7E,GACpBC,KAAKC,KAAOJ,EAAK0B,QACjBvB,KAAKD,KAAOA,EAAKwhB,WAGnBy5D,EAAY56E,cAAgB,SAAwBC,GAClD,OAAO,GAAK4J,KAAKuhB,MAAMnrB,EAAS,IAAOA,EAAS,EAAOA,EAAS,EAAK,EAAI,EAAK,IAGhF26E,EAAY16E,UAAUC,UAAY,WAChC,OAAOP,KAAKD,KAAKM,QAGnB26E,EAAY16E,UAAUF,cAAgB,WACpC,OAAO46E,EAAY56E,cAAcJ,KAAKD,KAAKM,SAG7C26E,EAAY16E,UAAUE,MAAQ,SAAgBC,GAC5C,IAAIC,EAAG6+E,EAAOj8E,EAId,IAAK5C,EAAI,EAAGA,EAAI,GAAKV,KAAKD,KAAKM,OAAQK,GAAK,EAC1C6+E,EAAQv/E,KAAKD,KAAKmjB,OAAOxiB,EAAG,GAC5B4C,EAAQiI,SAASg0E,EAAO,IAExB9+E,EAAUG,IAAI0C,EAAO,IAKvB,IAAIk8E,EAAex/E,KAAKD,KAAKM,OAASK,EAClC8+E,EAAe,IACjBD,EAAQv/E,KAAKD,KAAKmjB,OAAOxiB,GACzB4C,EAAQiI,SAASg0E,EAAO,IAExB9+E,EAAUG,IAAI0C,EAAsB,EAAfk8E,EAAmB,KAI5C3+E,EAAOC,QAAUk6E,G,kCCrCX,cAEJ,uBAAWnwE,EAAP,YAAwC,CAE1C,MAAOA,EAAP,WAAwBA,EAAOA,EAFW,WAK1C,OAAIA,IAAJ,SAA8B,KAE9B,SAGF,IAAMD,EAAOC,EAZyB,cAetC,OAAID,IAAA,UAAqBA,EAAA,YAAiB,CAAE60E,UAAU,MAAtD,SAAmF,KAEnF,EAtBF,mC,sBCAE,SAAU70E,EAAMuS,GAGhBtc,EAAOC,QAAoBqc,EAAQ,EAAQ,UAH5C,CAaCnd,GAAM,SAAUqd,GAsIjB,OApIC,WAEG,IAAIlH,EAAIkH,EACJuD,EAAQzK,EAAE0K,IACVY,EAAYb,EAAMa,UAClByD,EAAStE,EAAMsE,OACfD,EAAS9O,EAAE4P,KAGX25D,EAAI,GAKJC,EAAO16D,EAAO06D,KAAOz6D,EAAOnE,OAAO,CACnCqE,SAAU,WACNplB,KAAK4/E,MAAQ,IAAIn+D,EAAUP,KAAK,CAC5B,WAAY,WACZ,WAAY,UACZ,cAIR6D,gBAAiB,SAAU+E,EAAGrT,GAY1B,IAVA,IAAIuT,EAAIhqB,KAAK4/E,MAAMl+D,MAGf1Y,EAAIghB,EAAE,GACN/gB,EAAI+gB,EAAE,GACNlQ,EAAIkQ,EAAE,GACNhjB,EAAIgjB,EAAE,GACNnd,EAAImd,EAAE,GAGDtpB,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACzB,GAAIA,EAAI,GACJg/E,EAAEh/E,GAAqB,EAAhBopB,EAAErT,EAAS/V,OACf,CACH,IAAI63B,EAAImnD,EAAEh/E,EAAI,GAAKg/E,EAAEh/E,EAAI,GAAKg/E,EAAEh/E,EAAI,IAAMg/E,EAAEh/E,EAAI,IAChDg/E,EAAEh/E,GAAM63B,GAAK,EAAMA,IAAM,GAG7B,IAAIn0B,GAAM4E,GAAK,EAAMA,IAAM,IAAO6D,EAAI6yE,EAAEh/E,GAEpC0D,GADA1D,EAAI,GACwB,YAArBuI,EAAI6Q,GAAO7Q,EAAIjC,GACftG,EAAI,GACQ,YAAbuI,EAAI6Q,EAAI9S,GACPtG,EAAI,IACJuI,EAAI6Q,EAAM7Q,EAAIjC,EAAM8S,EAAI9S,GAAM,YAE/BiC,EAAI6Q,EAAI9S,GAAK,UAGvB6F,EAAI7F,EACJA,EAAI8S,EACJA,EAAK7Q,GAAK,GAAOA,IAAM,EACvBA,EAAID,EACJA,EAAI5E,EAIR4lB,EAAE,GAAMA,EAAE,GAAKhhB,EAAK,EACpBghB,EAAE,GAAMA,EAAE,GAAK/gB,EAAK,EACpB+gB,EAAE,GAAMA,EAAE,GAAKlQ,EAAK,EACpBkQ,EAAE,GAAMA,EAAE,GAAKhjB,EAAK,EACpBgjB,EAAE,GAAMA,EAAE,GAAKnd,EAAK,GAGxB4Y,YAAa,WAET,IAAI1lB,EAAOC,KAAKgkB,MACZM,EAAYvkB,EAAK2hB,MAEjBm+D,EAAgC,EAAnB7/E,KAAKikB,YAClB67D,EAA4B,EAAhB//E,EAAK4hB,SAYrB,OATA2C,EAAUw7D,IAAc,IAAM,KAAS,GAAKA,EAAY,GACxDx7D,EAA4C,IAA/Bw7D,EAAY,KAAQ,GAAM,IAAW71E,KAAKuhB,MAAMq0D,EAAa,YAC1Ev7D,EAA4C,IAA/Bw7D,EAAY,KAAQ,GAAM,IAAWD,EAClD9/E,EAAK4hB,SAA8B,EAAnB2C,EAAUjkB,OAG1BL,KAAKmkB,WAGEnkB,KAAK4/E,OAGhBp+D,MAAO,WACH,IAAIA,EAAQ0D,EAAO1D,MAAM7I,KAAK3Y,MAG9B,OAFAwhB,EAAMo+D,MAAQ5/E,KAAK4/E,MAAMp+D,QAElBA,KAkBfrL,EAAEwpE,KAAOz6D,EAAOQ,cAAci6D,GAgB9BxpE,EAAEmH,SAAW4H,EAAOW,kBAAkB85D,GAhI1C,GAoIOtiE,EAASsiE,S,mBCnJjB9+E,EAAOC,QAAU,SAAUs1B,EAAaxsB,GACtC,IAAI6D,EAAQ,EACRpN,EAASuJ,EAAKvJ,OACd2N,EAAS,IAAIooB,EAAY/1B,GAC7B,MAAOA,EAASoN,EAAOO,EAAOP,GAAS7D,EAAK6D,KAC5C,OAAOO,I,mBCLT,IAAIuT,EAAW,GAAGA,SAElB1gB,EAAOC,QAAUgO,MAAMmY,SAAW,SAAU3I,GAC1C,MAA6B,kBAAtBiD,EAAS5I,KAAK2F,K,4JCWR,SAAAhc,EAAA,MAAO,EAAD,YAAN,eAKN,CACPL,KADO,WAGPC,MAAO,CACLsmC,KADK,QAELviB,MAFK,QAGLkF,KAAM,CACJ3oB,KAAM,CAACuI,OADH,QAEJpI,QAAS,KAIbY,SAAU,CACRmB,QADQ,WAEN,uBACE,iBAAkB1E,KADb,KAEL,kBAAmBA,KAFd,OAGFA,KAAK+/E,iBAGZlwE,OARQ,WASN,uBACEyc,OAAQ,eAActsB,KADjB,MAELggF,SAAU,eAAchgF,KAFnB,MAGLoU,MAAO,eAAcpU,KAHhB,OAIFA,KAAKigF,oBAKd75E,OA9BO,SA8BD,GACJ,IAAMrG,EAAO,CACX0D,YADW,WAEXC,MAAO1D,KAFI,QAGXgG,MAAOhG,KAHI,OAIXqE,GAAIrE,KAAK25B,YAGX,OAAOtzB,EAAE,MAAOrG,KAAK2D,mBAAmB3D,KAAxB,MAAR,GAAmDA,KAAKwF,OAAhE,YCtDJ,I,sECGe,gBAAW,CACxBvD,KADwB,SAGxBC,MAAO,CACLg+E,iBAAkB,CAChB19E,KAAM,CAACuI,OADS,QAEhBpI,QAFgB,WAKd,OAAO3C,KAAKkE,SACRlE,KAAKkE,SAAS4N,WADX,sBAAP,GAIFrP,UAAW,SAAA4E,GAAC,OACT0f,MAAMhc,OAAP,KACA,CAAC,KAAM,KAAM,KAAM,KAAM,MAAMjG,SAASzC,OAAxC,OAKNkB,SAAU,CACR48E,SADQ,WAEN,MAKIngF,KAAKkE,SANH,WACA,EAAN,EAAM,SAAN,EAAM,QAAN,EAAM,KAIJg8E,EAJF,EAIEA,iBAKF,GAAIA,IAAqBlgF,KAAzB,iBAAgD,OAAOogF,EAEvD,IAAMC,EAAc90E,SAASvL,KAAD,iBAA5B,IACMsgF,GAAYv5D,MAAlB,GAEA,OAAOu5D,EACHlsE,EADW,EAEXnS,IAASjC,KAFb,mBAMJkF,QA1CwB,WA4ClBlF,KAAKmF,OAAOC,eAAhB,uBACE,eAAU,qBAAsB,oBAAhC,S,YCzBS,cAAA9C,EAAA,MAAO,EAAD,OAAN,eAIN,CACPL,KADO,WAGPopC,cAHO,EAKPnpC,MAAO,CACLwR,IADK,QAEL1Q,KAFK,OAGLyB,UAHK,OAIL8qC,WAJK,QAKLgxC,OALK,QAMLj9E,MAAO,CACLd,KADK,QAELG,SAAS,IAIbY,SAAU,CACRmB,QADQ,WAEN,wCACKC,EAAA,mCADE,OAAP,IAEE,qBAAsB3E,KAFjB,QAGL,sBAAuBA,KAHlB,SAIL,wBAAyBA,KAJpB,WAKL,mBAAoBA,KAAKwgF,YAG7BC,QAVQ,WAWN,OAAOx9E,QAAQjD,KAAKgD,MAAQhD,KAAKwF,OAAjC,OAEFg7E,SAbQ,WAcN,OAAOxgF,KAAKugF,QAAUvgF,KAAtB,KAEF6P,OAhBQ,WAiBN,IAAMA,EAAM,kBAA6BlL,EAAA,yCAEzC,GAAI3E,KAAJ,SAAmB,CACjB,IAAMyuD,EAAOzuD,KAAD,IAEPA,KAAKkE,SAASw8E,YAAYC,IAAM3gF,KAAKkE,SAASw8E,YAFnD,IAAY,EAIZ7wE,EAAA,IAAa,eAAb,GACAA,EAAA,kBACAA,EAAA,SAGF,WAIJxK,QAAS,CAEPO,OAFO,WAGL5F,KAAA,UAAiBA,KAAjB,UAEF4gF,UALO,SAKE,GACP5gF,KAAA,uBAEF+sC,QARO,WAWL,MAFA,GAAK/sC,KAAL,QAeA,OAVEwO,EADExO,KAAJ,KACYA,KAAK4D,eAAeW,EAApB,KAA2B,CACnCrC,MAAO,CACL4B,MAAO9D,KADF,UAELmrB,KAAM,KAEP,CAACnrB,KALJ,OAOUA,KAAKwF,OAAf,KAGKxF,KAAK4D,eAAe,EAAS,CAClCH,YADkC,iBAElCvB,MAAO,CACL4B,MAAO9D,KADF,MAELmrB,KAAM,IAER9mB,GAAI,CACFC,MAAOtE,KAAK4gF,YAEb,CATH,KAWFC,QAnCO,WAoCL,OAAO7gF,KAAK4D,eAAe,MAAO,CAChCH,YAAa,kBACZzD,KAAKwF,OAFR,UAIFs7E,WAxCO,WAwCG,WACFv7E,EAAW,eAAQvF,KAAM,UAAW,CACxC+gF,QAAS,kBAAM,YAAgB,KAGjC,KAEA,OAAO/gF,KAAK4D,eAAe,MAAO,CAChCH,YAAa,qBADf,IAIFoC,WAnDO,WAoDL,OAAO7F,KAAK4D,eAAe,MAAO,CAChCH,YAAa,qBACZ,CACDzD,KADC,UAEDA,KAJF,aAOFsF,WA3DO,WA4DL,OAAOtF,KAAK4D,eAAe,MAAO,CAChCH,YAAa,qBACZ,CACDzD,KADC,aAEDA,KAJF,iBASJoG,OAvHO,SAuHD,GACJ,OAAOC,EAAE,EAAD,KAAoB,CAC1BA,EAAE,MAAOrG,KAAK2D,mBAAmB3D,KAAxB,MAAoC,CAC3CyD,YAD2C,WAE3CQ,MAAOjE,KAFoC,OAG3C0D,MAAO1D,KAHoC,QAI3CgG,MAAOhG,KAJoC,OAK3CiG,WAAY,CAAC,CACXhE,KADW,OAEXqB,MAAOtD,KAAKkG,aAEZ,CAAClG,KAVP,qB,kCCpJJ,IAAIghF,EAAkB,EAAQ,QAC1B16E,EAAsB,EAAQ,QAC9ByD,EAAoB,EAAQ,QAC5Bk3E,EAAsB,EAAQ,QAE9Bj3E,EAAMC,KAAKD,IACXse,EAAe,GAAG6jD,YAClB+U,IAAkB54D,GAAgB,EAAI,CAAC,GAAG6jD,YAAY,GAAI,GAAK,EAC/DgV,EAAgBF,EAAoB,eACpCl5D,EAASm5D,IAAkBC,EAI/BtgF,EAAOC,QAAUinB,EAAS,SAAqBQ,GAE7C,GAAI24D,EAAe,OAAO54D,EAAalH,MAAMphB,KAAMyK,YAAc,EACjE,IAAIJ,EAAI22E,EAAgBhhF,MACpBK,EAAS0J,EAAkBM,GAC3BoD,EAAQpN,EAAS,EAGrB,IAFIoK,UAAUpK,OAAS,IAAGoN,EAAQzD,EAAIyD,EAAOnH,EAAoBmE,UAAU,MACvEgD,EAAQ,IAAGA,EAAQpN,EAASoN,GAC1BA,GAAS,EAAGA,IAAS,GAAIA,KAASpD,GAAKA,EAAEoD,KAAW8a,EAAe,OAAO9a,GAAS,EACzF,OAAQ,GACN6a,G,kCCxBJ,IAAIxS,EAAsB,EAAQ,QAC9BsrE,EAAW,EAAQ,QAA+BxoE,QAElD7C,EAAcD,EAAoBC,YAClCC,EAAyBF,EAAoBE,uBAIjDA,EAAuB,WAAW,SAAiBuS,GACjD,OAAO64D,EAASrrE,EAAY/V,MAAOuoB,EAAe9d,UAAUpK,OAAS,EAAIoK,UAAU,QAAKhE,O,4CCV1F,IAAI+zB,EAAW,EAAQ,QAEnBhP,EAAQvhB,KAAKuhB,MAKjB3qB,EAAOC,QAAUiK,OAAOs2E,WAAa,SAAmB76E,GACtD,OAAQg0B,EAASh0B,IAAO2rB,SAAS3rB,IAAOglB,EAAMhlB,KAAQA,I,kCCPxD,IA+BI86E,EAAMlrD,EAAamrD,EA/BnB1tD,EAAsB,EAAQ,QAC9BD,EAAc,EAAQ,QACtB3U,EAAS,EAAQ,QACjBuiE,EAAa,EAAQ,QACrBhnD,EAAW,EAAQ,QACnBF,EAAS,EAAQ,QACjBC,EAAU,EAAQ,QAClBknD,EAAc,EAAQ,QACtB1tD,EAA8B,EAAQ,QACtC2tD,EAAW,EAAQ,QACnB3vD,EAAiB,EAAQ,QAAuCwC,EAChEH,EAAiB,EAAQ,QACzBC,EAAiB,EAAQ,QACzBnB,EAAkB,EAAQ,QAC1ByuD,EAAM,EAAQ,QAEd35D,EAAY/I,EAAO+I,UACnB45D,EAAqB55D,GAAaA,EAAU1nB,UAC5CuhF,EAAoB5iE,EAAO4iE,kBAC3BC,EAA6BD,GAAqBA,EAAkBvhF,UACpEg7B,EAAatT,GAAaoM,EAAepM,GACzCuT,EAAsBqmD,GAAsBxtD,EAAewtD,GAC3DpsD,EAAkBnsB,OAAO/I,UACzByhF,EAAgBvsD,EAAgBusD,cAEhCC,EAAgB9uD,EAAgB,eAChCmI,EAAkBsmD,EAAI,mBACtBvmD,EAA0BumD,EAAI,2BAE9BxmD,EAA4BtH,KAAyBQ,GAA4C,UAA1BkG,EAAQtb,EAAOgjE,OACtFC,GAA0B,EAG1BC,EAA6B,CAC/Bn6D,UAAW,EACXjM,WAAY,EACZ8lE,kBAAmB,EACnBtnC,WAAY,EACZ96B,YAAa,EACb2iE,WAAY,EACZ9hE,YAAa,EACb+hE,aAAc,EACdC,aAAc,GAGZC,EAA8B,CAChCC,cAAe,EACfC,eAAgB,GAGd/wD,EAAS,SAAgBlrB,GAC3B,IAAKg0B,EAASh0B,GAAK,OAAO,EAC1B,IAAIo1B,EAAQrB,EAAQ/zB,GACpB,MAAiB,aAAVo1B,GACFtB,EAAO6nD,EAA4BvmD,IACnCtB,EAAOioD,EAA6B3mD,IAGvCH,EAAe,SAAUj1B,GAC3B,IAAKg0B,EAASh0B,GAAK,OAAO,EAC1B,IAAIo1B,EAAQrB,EAAQ/zB,GACpB,OAAO8zB,EAAO6nD,EAA4BvmD,IACrCtB,EAAOioD,EAA6B3mD,IAGvC7lB,EAAc,SAAUvP,GAC1B,GAAIi1B,EAAaj1B,GAAK,OAAOA,EAC7B,MAAMghB,UAAU,gCAGdgU,EAAyB,SAAUrlB,GACrC,GAAIqrE,EAAWrrE,MAAQke,GAAkB0tD,EAAcppE,KAAK2iB,EAAYnlB,IAAK,OAAOA,EACpF,MAAMqR,UAAUi6D,EAAYtrE,GAAK,sCAG/BH,EAAyB,SAAU0sE,EAAKC,EAAU1mD,GACpD,GAAKrI,EAAL,CACA,GAAIqI,EAAQ,IAAK,IAAI2mD,KAAST,EAA4B,CACxD,IAAIxlD,EAAwB1d,EAAO2jE,GACnC,GAAIjmD,GAAyBrC,EAAOqC,EAAsBr8B,UAAWoiF,GAAM,WAClE/lD,EAAsBr8B,UAAUoiF,GACvC,MAAOt/C,KAEN7H,EAAoBmnD,KAAQzmD,GAC/BylD,EAASnmD,EAAqBmnD,EAAKzmD,EAAS0mD,EACxCxnD,GAA6BymD,EAAmBc,IAAQC,KAI5DE,EAA+B,SAAUH,EAAKC,EAAU1mD,GAC1D,IAAI2mD,EAAOjmD,EACX,GAAK/I,EAAL,CACA,GAAIS,EAAgB,CAClB,GAAI4H,EAAQ,IAAK2mD,KAAST,EAExB,GADAxlD,EAAwB1d,EAAO2jE,GAC3BjmD,GAAyBrC,EAAOqC,EAAuB+lD,GAAM,WACxD/lD,EAAsB+lD,GAC7B,MAAOt/C,IAEX,GAAK9H,EAAWonD,KAAQzmD,EAKjB,OAHL,IACE,OAAOylD,EAASpmD,EAAYonD,EAAKzmD,EAAS0mD,EAAWxnD,GAA6BG,EAAWonD,IAAQC,GACrG,MAAOv/C,KAGb,IAAKw/C,KAAST,EACZxlD,EAAwB1d,EAAO2jE,IAC3BjmD,GAA2BA,EAAsB+lD,KAAQzmD,GAC3DylD,EAAS/kD,EAAuB+lD,EAAKC,KAK3C,IAAKrB,KAAQa,EACX/rD,EAAcnX,EAAOqiE,GACrBC,EAAYnrD,GAAeA,EAAY91B,UACnCihF,EAAWxtD,EAA4BwtD,EAAWnmD,EAAyBhF,GAC1E+E,GAA4B,EAGnC,IAAKmmD,KAAQiB,EACXnsD,EAAcnX,EAAOqiE,GACrBC,EAAYnrD,GAAeA,EAAY91B,UACnCihF,GAAWxtD,EAA4BwtD,EAAWnmD,EAAyBhF,GAIjF,KAAK+E,IAA8BqmD,EAAWlmD,IAAeA,IAAe5hB,SAASpZ,aAEnFg7B,EAAa,WACX,MAAM9T,UAAU,yBAEd2T,GAA2B,IAAKmmD,KAAQa,EACtCljE,EAAOqiE,IAAOjtD,EAAepV,EAAOqiE,GAAOhmD,GAInD,KAAKH,IAA8BI,GAAuBA,IAAwB/F,KAChF+F,EAAsBD,EAAWh7B,UAC7B66B,GAA2B,IAAKmmD,KAAQa,EACtCljE,EAAOqiE,IAAOjtD,EAAepV,EAAOqiE,GAAMhhF,UAAWi7B,GAS7D,GAJIJ,GAA6B/G,EAAe0tD,KAAgCvmD,GAC9ElH,EAAeytD,EAA4BvmD,GAGzC3H,IAAgB0G,EAAOiB,EAAqBymD,GAK9C,IAAKV,KAJLY,GAA0B,EAC1BnwD,EAAewJ,EAAqBymD,EAAe,CAAEhzD,IAAK,WACxD,OAAOwL,EAASx6B,MAAQA,KAAKq7B,QAAmB50B,KAErC07E,EAAgCljE,EAAOqiE,IAClDvtD,EAA4B9U,EAAOqiE,GAAOjmD,EAAiBimD,GAI/DzgF,EAAOC,QAAU,CACfq6B,0BAA2BA,EAC3BC,wBAAyBA,EACzBC,gBAAiB6mD,GAA2B7mD,EAC5CtlB,YAAaA,EACbylB,uBAAwBA,EACxBxlB,uBAAwBA,EACxB6sE,6BAA8BA,EAC9BnxD,OAAQA,EACR+J,aAAcA,EACdH,WAAYA,EACZC,oBAAqBA,I,mBC5KvB,IAAIha,EAAW,GAAGA,SAElB1gB,EAAOC,QAAUgO,MAAMmY,SAAW,SAAU3I,GAC1C,MAA6B,kBAAtBiD,EAAS5I,KAAK2F,K,yCCHvB,IAAIlY,EAAS,WAAa,IAAIsQ,EAAI1W,KAAS2W,EAAGD,EAAI9S,eAAmBgT,EAAGF,EAAIG,MAAMD,IAAID,EAAG,OAAOC,EAAG,cAAc,CAACnT,YAAY,KAAKQ,MAAM,CAAC,MAAQ,GAAG,cAAc,KAAK,CAAC2S,EAAG,WAAW,CAAC3S,MAAM,CAAC,KAAO,GAAG,eAAe,GAAG,iBAAiB,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,KAAO,GAAG,IAAM,GAAG,cAAc,GAAG,MAAQ,OAAO,CAAC2S,EAAG,SAAS,CAAC3S,MAAM,CAAC,MAAQ,OAAO,CAAC2S,EAAG,YAAY,CAACE,YAAY,CAAC,aAAa,QAAQ7S,MAAM,CAAC,MAAQ,KAAK,cAAc,KAAK,CAAC2S,EAAG,QAAQ,CAACnT,YAAY,UAAUQ,MAAM,CAAC,aAAa,KAAK,YAAY,MAAM,IAAM,EAAQ,YAA0B,GAAG2S,EAAG,MAAM,CAACnT,YAAY,8BAA8B,CAACmT,EAAG,WAAW,CAACnT,YAAY,WAAW,CAACiT,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,UAAU,IAAIP,EAAIM,GAAGN,EAAIiB,QAAQmrE,SAAS,QAAQ,GAAGlsE,EAAG,iBAAiB,CAAC+2B,YAAYj3B,EAAIy9B,GAAG,CAAC,CAACxrC,IAAI,UAAUyrC,GAAG,WAAW,MAAO,CAACx9B,EAAG,QAAQF,EAAIqsE,GAAIrsE,EAAS,OAAE,SAASxN,GAAM,OAAO0N,EAAG,KAAK,CAACjO,IAAIO,EAAKjH,KAAKwB,YAAY,MAAM,CAACmT,EAAG,KAAK,CAACF,EAAIK,GAAGL,EAAIM,GAAG9N,EAAKjH,SAAS2U,EAAG,KAAK,CAACF,EAAIK,GAAGL,EAAIM,GAAG9N,EAAK5F,eAAc,KAAK0/E,OAAM,OAAUpsE,EAAG,QAAQ,CAAC3S,MAAM,CAAC,QAAU,WAAW,CAAC2S,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQ,SAAS6T,GAAQ,OAAOxB,EAAIusE,UAAU,CAACvsE,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,YAAaP,EAAIiB,QAAa,MAAEf,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQ,SAAS6T,GAAQ,OAAOxB,EAAIwsE,YAAY,CAACxsE,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,mBAAmBP,EAAIW,KAAKT,EAAG,QAAQ,CAACnT,YAAY,OAAOQ,MAAM,CAAC,MAAQ,SAASI,GAAG,CAAC,MAAQ,SAAS6T,GAAQxB,EAAI/E,QAAS,KAAQ,CAAC+E,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,6BAA6B,IAAI,IAAI,IAAI,GAAGL,EAAG,aAAa,CAAC3S,MAAM,CAAC,QAAU,KAAM0pC,YAAYj3B,EAAIy9B,GAAG,CAAC,CAACxrC,IAAI,SAASyrC,GAAG,SAAS5+B,GACjmD,IAAIvR,EAAQuR,EAAIvR,MAChB,MAAO,CAAC2S,EAAG,QAAQF,EAAI29B,GAAG,CAACpwC,MAAM,CAAC,MAAQ,OAAO,KAAO,IAAII,GAAG,CAAC,MAAQ,SAAS6T,GAAQxB,EAAI49B,cAAe,KAAS,QAAQrwC,GAAM,GAAO,CAACyS,EAAIK,GAAG,kBAAkBO,MAAM,CAAChU,MAAOoT,EAAgB,aAAErD,SAAS,SAAUkE,GAAMb,EAAI49B,aAAa/8B,GAAKE,WAAW,iBAAiB,CAACf,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAI69B,cAAc,OAAO39B,EAAG,WAAW,CAAC3S,MAAM,CAAC,WAAa,GAAG,YAAY,MAAM,gBAAgB,MAAMqT,MAAM,CAAChU,MAAOoT,EAAU,OAAErD,SAAS,SAAUkE,GAAMb,EAAI/E,OAAO4F,GAAKE,WAAW,WAAW,CAACb,EAAG,SAAS,CAACA,EAAG,eAAe,CAACF,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,yBAAyB,OAAOL,EAAG,cAAc,CAACF,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIO,GAAG,oEAAoE,OAAOL,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAAC3S,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQ,SAAS6T,GAAQxB,EAAI/E,QAAS,KAAS,CAAC+E,EAAIK,GAAG,cAAcH,EAAG,QAAQ,CAAC3S,MAAM,CAAC,MAAQ,WAAWI,GAAG,CAAC,MAAQqS,EAAIysE,WAAW,CAACzsE,EAAIK,GAAG,WAAW,IAAI,IAAI,IAAI,IACj6ByB,EAAkB,G,6EC0EtB,GACEvW,KAAM,OACNlC,KAAM,WAAR,OACA,kBACA,SACA,UACA,gBACA,gBACA,iBAEEsF,QAAS,CACP89E,SAAU,WACRnjF,KAAK2R,QAAS,EACdgG,EAAN,iBACM3X,KAAK8oB,QAAQ/gB,KAAK,YAEpBk7E,KAAM,WACJjjF,KAAK8oB,QAAQ/gB,KAAK,YAEpBm7E,OAAQ,WAAZ,WAEMl0E,QAAQoM,IAAI,kBACZ,IAAN,GACQC,WAAY1D,EAApB,iBAEM4D,EAAN,KACA,KACQ,IAAR,aACQ,OAAR,IAEA,kBACQ,QAAR,YACQ,EAAR,qBACQ,EAAR,2BAGA,mBAAQ,OAAR,kBACA,oBAAQ,OAAR,gBACM,KAAN,qDACM,KAAN,kBAGErW,QAAS,WACP,IAAJ,iCACIlF,KAAKkgB,MAAQ,CACjB,CACM,KAAN,oBACM,MAAN,gBAEA,CACM,KAAN,uBACM,MAAN,mBAEA,CACM,KAAN,mBACM,MAAN,cAEA,CACM,KAAN,qBACM,MAAN,iBAEA,CACM,KAAN,mBACM,MAAN,yDAEA,CACM,KAAN,4BACM,MAAN,kDChJ+U,I,+NCOhU,SAAA5d,EAAA,qBAAyB,CACtCL,KADsC,iBAGtCC,MAAO,CACLW,MADK,QAELugF,YAFK,QAGL92D,OAAQ,CAACvhB,OAAQ1I,SAGnBkB,SAAU,CACRmB,QADQ,WAEN,uBACE,sBAAuB1E,KADlB,MAEL,+BAAgCA,KAAF,SAAkBA,KAF3C,YAGL,6BAA8BA,KAHzB,YAIL,0BAA2BA,KAAKwF,OAJ3B,IAKL,6BAA8BxF,KAAKwF,OAL9B,QAMFxF,KAAK4P,gBAKdvK,QAAS,CACPC,WADO,WAEL,OAAOtF,KAAKwF,OAAO42B,SAAWp8B,KAAK4D,eAAe,MAAO,CACvDH,YADuD,wBAEvDuC,MAAO,CACLsmB,OAAQ,eAActsB,KAAD,UAEtB,CACDA,KAAK4D,eAAe,QAAS5D,KAAKwF,OANpC,aAWJY,OAnCsC,SAmChC,GACJ,OAAOC,EAAE,MAAO,CACd5C,YADc,eAEdC,MAAO1D,KAAK0E,SACX,CACD1E,KAAKwF,OADJ,IAEDxF,KAFC,aAGDA,KAAKwF,OANP,Y,YCxCW,G,UAAA,eAAuB,SAAU,MAAhD,a,YCII8W,EAAY,eACd,EACAlW,EACAoS,GACA,EACA,KACA,KACA,MAIa,aAAA8D,EAAiB,QAoBhC,IAAkBA,EAAW,CAACE,UAAA,KAAQzY,OAAA,KAAK0Y,QAAA,KAAM4mE,aAAA,OAAa3mE,UAAA,OAAU4mE,WAAA,OAAW3mE,aAAA,KAAW+oB,UAAA,KAAQ9oB,QAAA,KAAME,OAAA,KAAKC,UAAA,KAAQC,OAAA,KAAKumE,aAAA,EAAaxuC,YAAA,KAAUyuC,UAAQtmE,WAAA,Q,qBCtC7J,IAAI5W,EAAsB,EAAQ,QAElCzF,EAAOC,QAAU,SAAU0F,GACzB,IAAIwH,EAAS1H,EAAoBE,GACjC,GAAIwH,EAAS,EAAG,MAAMrH,WAAW,qCACjC,OAAOqH","file":"js/about.1f78c154.js","sourcesContent":["var BufferUtil = require('../utils/buffer')\nvar Mode = require('./mode')\n\nfunction ByteData (data) {\n  this.mode = Mode.BYTE\n  this.data = BufferUtil.from(data)\n}\n\nByteData.getBitsLength = function getBitsLength (length) {\n  return length * 8\n}\n\nByteData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nByteData.prototype.getBitsLength = function getBitsLength () {\n  return ByteData.getBitsLength(this.data.length)\n}\n\nByteData.prototype.write = function (bitBuffer) {\n  for (var i = 0, l = this.data.length; i < l; i++) {\n    bitBuffer.put(this.data[i], 8)\n  }\n}\n\nmodule.exports = ByteData\n","var numeric = '[0-9]+'\nvar alphanumeric = '[A-Z $%*+\\\\-./:]+'\nvar kanji = '(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|' +\n  '[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|' +\n  '[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|' +\n  '[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+'\nkanji = kanji.replace(/u/g, '\\\\u')\n\nvar byte = '(?:(?![A-Z0-9 $%*+\\\\-./:]|' + kanji + ')(?:.|[\\r\\n]))+'\n\nexports.KANJI = new RegExp(kanji, 'g')\nexports.BYTE_KANJI = new RegExp('[^A-Z0-9 $%*+\\\\-./:]+', 'g')\nexports.BYTE = new RegExp(byte, 'g')\nexports.NUMERIC = new RegExp(numeric, 'g')\nexports.ALPHANUMERIC = new RegExp(alphanumeric, 'g')\n\nvar TEST_KANJI = new RegExp('^' + kanji + '$')\nvar TEST_NUMERIC = new RegExp('^' + numeric + '$')\nvar TEST_ALPHANUMERIC = new RegExp('^[A-Z0-9 $%*+\\\\-./:]+$')\n\nexports.testKanji = function testKanji (str) {\n  return TEST_KANJI.test(str)\n}\n\nexports.testNumeric = function testNumeric (str) {\n  return TEST_NUMERIC.test(str)\n}\n\nexports.testAlphanumeric = function testAlphanumeric (str) {\n  return TEST_ALPHANUMERIC.test(str)\n}\n","import Vue from 'vue'\n\nexport default Vue.extend({\n  name: 'transitionable',\n\n  props: {\n    mode: String,\n    origin: String,\n    transition: String,\n  },\n})\n","// Styles\nimport './VAlert.sass'\n\n// Extensions\nimport VSheet from '../VSheet'\n\n// Components\nimport VBtn from '../VBtn'\nimport VIcon from '../VIcon'\n\n// Mixins\nimport Toggleable from '../../mixins/toggleable'\nimport Themeable from '../../mixins/themeable'\nimport Transitionable from '../../mixins/transitionable'\n\n// Utilities\nimport mixins from '../../util/mixins'\nimport { breaking } from '../../util/console'\n\n// Types\nimport { VNodeData } from 'vue'\nimport { VNode } from 'vue/types'\n\n/* @vue/component */\nexport default mixins(\n  VSheet,\n  Toggleable,\n  Transitionable\n).extend({\n  name: 'v-alert',\n\n  props: {\n    border: {\n      type: String,\n      validator (val: string) {\n        return [\n          'top',\n          'right',\n          'bottom',\n          'left',\n        ].includes(val)\n      },\n    },\n    closeLabel: {\n      type: String,\n      default: '$vuetify.close',\n    },\n    coloredBorder: Boolean,\n    dense: Boolean,\n    dismissible: Boolean,\n    closeIcon: {\n      type: String,\n      default: '$cancel',\n    },\n    icon: {\n      default: '',\n      type: [Boolean, String],\n      validator (val: boolean | string) {\n        return typeof val === 'string' || val === false\n      },\n    },\n    outlined: Boolean,\n    prominent: Boolean,\n    text: Boolean,\n    type: {\n      type: String,\n      validator (val: string) {\n        return [\n          'info',\n          'error',\n          'success',\n          'warning',\n        ].includes(val)\n      },\n    },\n    value: {\n      type: Boolean,\n      default: true,\n    },\n  },\n\n  computed: {\n    __cachedBorder (): VNode | null {\n      if (!this.border) return null\n\n      let data: VNodeData = {\n        staticClass: 'v-alert__border',\n        class: {\n          [`v-alert__border--${this.border}`]: true,\n        },\n      }\n\n      if (this.coloredBorder) {\n        data = this.setBackgroundColor(this.computedColor, data)\n        data.class['v-alert__border--has-color'] = true\n      }\n\n      return this.$createElement('div', data)\n    },\n    __cachedDismissible (): VNode | null {\n      if (!this.dismissible) return null\n\n      const color = this.iconColor\n\n      return this.$createElement(VBtn, {\n        staticClass: 'v-alert__dismissible',\n        props: {\n          color,\n          icon: true,\n          small: true,\n        },\n        attrs: {\n          'aria-label': this.$vuetify.lang.t(this.closeLabel),\n        },\n        on: {\n          click: () => (this.isActive = false),\n        },\n      }, [\n        this.$createElement(VIcon, {\n          props: { color },\n        }, this.closeIcon),\n      ])\n    },\n    __cachedIcon (): VNode | null {\n      if (!this.computedIcon) return null\n\n      return this.$createElement(VIcon, {\n        staticClass: 'v-alert__icon',\n        props: { color: this.iconColor },\n      }, this.computedIcon)\n    },\n    classes (): object {\n      const classes: Record<string, boolean> = {\n        ...VSheet.options.computed.classes.call(this),\n        'v-alert--border': Boolean(this.border),\n        'v-alert--dense': this.dense,\n        'v-alert--outlined': this.outlined,\n        'v-alert--prominent': this.prominent,\n        'v-alert--text': this.text,\n      }\n\n      if (this.border) {\n        classes[`v-alert--border-${this.border}`] = true\n      }\n\n      return classes\n    },\n    computedColor (): string {\n      return this.color || this.type\n    },\n    computedIcon (): string | boolean {\n      if (this.icon === false) return false\n      if (typeof this.icon === 'string' && this.icon) return this.icon\n      if (!['error', 'info', 'success', 'warning'].includes(this.type)) return false\n\n      return `$${this.type}`\n    },\n    hasColoredIcon (): boolean {\n      return (\n        this.hasText ||\n        (Boolean(this.border) && this.coloredBorder)\n      )\n    },\n    hasText (): boolean {\n      return this.text || this.outlined\n    },\n    iconColor (): string | undefined {\n      return this.hasColoredIcon ? this.computedColor : undefined\n    },\n    isDark (): boolean {\n      if (\n        this.type &&\n        !this.coloredBorder &&\n        !this.outlined\n      ) return true\n\n      return Themeable.options.computed.isDark.call(this)\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('outline')) {\n      breaking('outline', 'outlined', this)\n    }\n  },\n\n  methods: {\n    genWrapper (): VNode {\n      const children = [\n        this.$slots.prepend || this.__cachedIcon,\n        this.genContent(),\n        this.__cachedBorder,\n        this.$slots.append,\n        this.$scopedSlots.close\n          ? this.$scopedSlots.close({ toggle: this.toggle })\n          : this.__cachedDismissible,\n      ]\n\n      const data: VNodeData = {\n        staticClass: 'v-alert__wrapper',\n      }\n\n      return this.$createElement('div', data, children)\n    },\n    genContent (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-alert__content',\n      }, this.$slots.default)\n    },\n    genAlert (): VNode {\n      let data: VNodeData = {\n        staticClass: 'v-alert',\n        attrs: {\n          role: 'alert',\n        },\n        on: this.listeners$,\n        class: this.classes,\n        style: this.styles,\n        directives: [{\n          name: 'show',\n          value: this.isActive,\n        }],\n      }\n\n      if (!this.coloredBorder) {\n        const setColor = this.hasText ? this.setTextColor : this.setBackgroundColor\n        data = setColor(this.computedColor, data)\n      }\n\n      return this.$createElement('div', data, [this.genWrapper()])\n    },\n    /** @public */\n    toggle () {\n      this.isActive = !this.isActive\n    },\n  },\n\n  render (h): VNode {\n    const render = this.genAlert()\n\n    if (!this.transition) return render\n\n    return h('transition', {\n      props: {\n        name: this.transition,\n        origin: this.origin,\n        mode: this.mode,\n      },\n    }, [render])\n  },\n})\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length or index');\n  return length;\n};\n","import './_grid.sass'\n\nimport Grid from './grid'\n\nexport default Grid('flex')\n","'use strict';\n\n/******************************************************************************\n * Created 2008-08-19.\n *\n * Dijkstra path-finding functions. Adapted from the Dijkstar Python project.\n *\n * Copyright (C) 2008\n *   Wyatt Baldwin <self@wyattbaldwin.com>\n *   All rights reserved\n *\n * Licensed under the MIT license.\n *\n *   http://www.opensource.org/licenses/mit-license.php\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *****************************************************************************/\nvar dijkstra = {\n  single_source_shortest_paths: function(graph, s, d) {\n    // Predecessor map for each node that has been encountered.\n    // node ID => predecessor node ID\n    var predecessors = {};\n\n    // Costs of shortest paths from s to all nodes encountered.\n    // node ID => cost\n    var costs = {};\n    costs[s] = 0;\n\n    // Costs of shortest paths from s to all nodes encountered; differs from\n    // `costs` in that it provides easy access to the node that currently has\n    // the known shortest path from s.\n    // XXX: Do we actually need both `costs` and `open`?\n    var open = dijkstra.PriorityQueue.make();\n    open.push(s, 0);\n\n    var closest,\n        u, v,\n        cost_of_s_to_u,\n        adjacent_nodes,\n        cost_of_e,\n        cost_of_s_to_u_plus_cost_of_e,\n        cost_of_s_to_v,\n        first_visit;\n    while (!open.empty()) {\n      // In the nodes remaining in graph that have a known cost from s,\n      // find the node, u, that currently has the shortest path from s.\n      closest = open.pop();\n      u = closest.value;\n      cost_of_s_to_u = closest.cost;\n\n      // Get nodes adjacent to u...\n      adjacent_nodes = graph[u] || {};\n\n      // ...and explore the edges that connect u to those nodes, updating\n      // the cost of the shortest paths to any or all of those nodes as\n      // necessary. v is the node across the current edge from u.\n      for (v in adjacent_nodes) {\n        if (adjacent_nodes.hasOwnProperty(v)) {\n          // Get the cost of the edge running from u to v.\n          cost_of_e = adjacent_nodes[v];\n\n          // Cost of s to u plus the cost of u to v across e--this is *a*\n          // cost from s to v that may or may not be less than the current\n          // known cost to v.\n          cost_of_s_to_u_plus_cost_of_e = cost_of_s_to_u + cost_of_e;\n\n          // If we haven't visited v yet OR if the current known cost from s to\n          // v is greater than the new cost we just found (cost of s to u plus\n          // cost of u to v across e), update v's cost in the cost list and\n          // update v's predecessor in the predecessor list (it's now u).\n          cost_of_s_to_v = costs[v];\n          first_visit = (typeof costs[v] === 'undefined');\n          if (first_visit || cost_of_s_to_v > cost_of_s_to_u_plus_cost_of_e) {\n            costs[v] = cost_of_s_to_u_plus_cost_of_e;\n            open.push(v, cost_of_s_to_u_plus_cost_of_e);\n            predecessors[v] = u;\n          }\n        }\n      }\n    }\n\n    if (typeof d !== 'undefined' && typeof costs[d] === 'undefined') {\n      var msg = ['Could not find a path from ', s, ' to ', d, '.'].join('');\n      throw new Error(msg);\n    }\n\n    return predecessors;\n  },\n\n  extract_shortest_path_from_predecessor_list: function(predecessors, d) {\n    var nodes = [];\n    var u = d;\n    var predecessor;\n    while (u) {\n      nodes.push(u);\n      predecessor = predecessors[u];\n      u = predecessors[u];\n    }\n    nodes.reverse();\n    return nodes;\n  },\n\n  find_path: function(graph, s, d) {\n    var predecessors = dijkstra.single_source_shortest_paths(graph, s, d);\n    return dijkstra.extract_shortest_path_from_predecessor_list(\n      predecessors, d);\n  },\n\n  /**\n   * A very naive priority queue implementation.\n   */\n  PriorityQueue: {\n    make: function (opts) {\n      var T = dijkstra.PriorityQueue,\n          t = {},\n          key;\n      opts = opts || {};\n      for (key in T) {\n        if (T.hasOwnProperty(key)) {\n          t[key] = T[key];\n        }\n      }\n      t.queue = [];\n      t.sorter = opts.sorter || T.default_sorter;\n      return t;\n    },\n\n    default_sorter: function (a, b) {\n      return a.cost - b.cost;\n    },\n\n    /**\n     * Add a new item to the queue and ensure the highest priority element\n     * is at the front of the queue.\n     */\n    push: function (value, cost) {\n      var item = {value: value, cost: cost};\n      this.queue.push(item);\n      this.queue.sort(this.sorter);\n    },\n\n    /**\n     * Return the highest priority element in the queue.\n     */\n    pop: function () {\n      return this.queue.shift();\n    },\n\n    empty: function () {\n      return this.queue.length === 0;\n    }\n  }\n};\n\n\n// node.js module exports\nif (typeof module !== 'undefined') {\n  module.exports = dijkstra;\n}\n","// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\nvar typedArraySpeciesConstructor = require('../internals/typed-array-species-constructor');\n\nmodule.exports = function (instance, list) {\n  return arrayFromConstructorAndList(typedArraySpeciesConstructor(instance), list);\n};\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar min = Math.min;\n\n// `Array.prototype.copyWithin` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.copywithin\n// eslint-disable-next-line es/no-array-prototype-copywithin -- safe\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = lengthOfArrayLike(O);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","// Mixins\nimport Themeable from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default Themeable.extend({\n  name: 'v-theme-provider',\n\n  props: { root: Boolean },\n\n  computed: {\n    isDark (): boolean {\n      return this.root\n        ? this.rootIsDark\n        : Themeable.options.computed.isDark.call(this)\n    },\n  },\n\n  render (): VNode {\n    /* istanbul ignore next */\n    return (\n      this.$slots.default! &&\n      this.$slots.default!.find(node => !node.isComment && node.text !== ' ')!\n    )\n  },\n})\n","import Vue from 'vue'\n\n/**\n * Delayable\n *\n * @mixin\n *\n * Changes the open or close delay time for elements\n */\nexport default Vue.extend<Vue & { isActive?: boolean }>().extend({\n  name: 'delayable',\n\n  props: {\n    openDelay: {\n      type: [Number, String],\n      default: 0,\n    },\n    closeDelay: {\n      type: [Number, String],\n      default: 0,\n    },\n  },\n\n  data: () => ({\n    openTimeout: undefined as number | undefined,\n    closeTimeout: undefined as number | undefined,\n  }),\n\n  methods: {\n    /**\n     * Clear any pending delay timers from executing\n     */\n    clearDelay (): void {\n      clearTimeout(this.openTimeout)\n      clearTimeout(this.closeTimeout)\n    },\n    /**\n     * Runs callback after a specified delay\n     */\n    runDelay (type: 'open' | 'close', cb?: () => void): void {\n      this.clearDelay()\n\n      const delay = parseInt((this as any)[`${type}Delay`], 10)\n\n      ;(this as any)[`${type}Timeout`] = setTimeout(cb || (() => {\n        this.isActive = { open: true, close: false }[type]\n      }), delay)\n    },\n  },\n})\n","// Mixins\nimport Delayable from '../delayable'\nimport Toggleable from '../toggleable'\n\n// Utilities\nimport mixins from '../../util/mixins'\nimport { getSlot, getSlotType } from '../../util/helpers'\nimport { consoleError } from '../../util/console'\n\n// Types\nimport { VNode, PropType } from 'vue'\n\ntype Listeners = Dictionary<(e: MouseEvent & KeyboardEvent & FocusEvent) => void>\n\nconst baseMixins = mixins(\n  Delayable,\n  Toggleable\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'activatable',\n\n  props: {\n    activator: {\n      default: null as unknown as PropType<string | HTMLElement | VNode | Element | null>,\n      validator: (val: string | object) => {\n        return ['string', 'object'].includes(typeof val)\n      },\n    },\n    disabled: Boolean,\n    internalActivator: Boolean,\n    openOnHover: Boolean,\n    openOnFocus: Boolean,\n  },\n\n  data: () => ({\n    // Do not use this directly, call getActivator() instead\n    activatorElement: null as HTMLElement | null,\n    activatorNode: [] as VNode[],\n    events: ['click', 'mouseenter', 'mouseleave', 'focus'],\n    listeners: {} as Listeners,\n  }),\n\n  watch: {\n    activator: 'resetActivator',\n    openOnFocus: 'resetActivator',\n    openOnHover: 'resetActivator',\n  },\n\n  mounted () {\n    const slotType = getSlotType(this, 'activator', true)\n\n    if (slotType && ['v-slot', 'normal'].includes(slotType)) {\n      consoleError(`The activator slot must be bound, try '<template v-slot:activator=\"{ on }\"><v-btn v-on=\"on\">'`, this)\n    }\n\n    this.addActivatorEvents()\n  },\n\n  beforeDestroy () {\n    this.removeActivatorEvents()\n  },\n\n  methods: {\n    addActivatorEvents () {\n      if (\n        !this.activator ||\n        this.disabled ||\n        !this.getActivator()\n      ) return\n\n      this.listeners = this.genActivatorListeners()\n      const keys = Object.keys(this.listeners)\n\n      for (const key of keys) {\n        this.getActivator()!.addEventListener(key, this.listeners[key] as any)\n      }\n    },\n    genActivator () {\n      const node = getSlot(this, 'activator', Object.assign(this.getValueProxy(), {\n        on: this.genActivatorListeners(),\n        attrs: this.genActivatorAttributes(),\n      })) || []\n\n      this.activatorNode = node\n\n      return node\n    },\n    genActivatorAttributes () {\n      return {\n        role: 'button',\n        'aria-haspopup': true,\n        'aria-expanded': String(this.isActive),\n      }\n    },\n    genActivatorListeners () {\n      if (this.disabled) return {}\n\n      const listeners: Listeners = {}\n\n      if (this.openOnHover) {\n        listeners.mouseenter = (e: MouseEvent) => {\n          this.getActivator(e)\n          this.runDelay('open')\n        }\n        listeners.mouseleave = (e: MouseEvent) => {\n          this.getActivator(e)\n          this.runDelay('close')\n        }\n      } else {\n        listeners.click = (e: MouseEvent) => {\n          const activator = this.getActivator(e)\n          if (activator) activator.focus()\n\n          e.stopPropagation()\n\n          this.isActive = !this.isActive\n        }\n      }\n\n      if (this.openOnFocus) {\n        listeners.focus = (e: FocusEvent) => {\n          this.getActivator(e)\n\n          e.stopPropagation()\n\n          this.isActive = !this.isActive\n        }\n      }\n\n      return listeners\n    },\n    getActivator (e?: Event): HTMLElement | null {\n      // If we've already fetched the activator, re-use\n      if (this.activatorElement) return this.activatorElement\n\n      let activator = null\n\n      if (this.activator) {\n        const target = this.internalActivator ? this.$el : document\n\n        if (typeof this.activator === 'string') {\n          // Selector\n          activator = target.querySelector(this.activator)\n        } else if ((this.activator as any).$el) {\n          // Component (ref)\n          activator = (this.activator as any).$el\n        } else {\n          // HTMLElement | Element\n          activator = this.activator\n        }\n      } else if (this.activatorNode.length === 1 || (this.activatorNode.length && !e)) {\n        // Use the contents of the activator slot\n        // There's either only one element in it or we\n        // don't have a click event to use as a last resort\n        const vm = this.activatorNode[0].componentInstance\n        if (\n          vm &&\n          vm.$options.mixins && //                         Activatable is indirectly used via Menuable\n          vm.$options.mixins.some((m: any) => m.options && ['activatable', 'menuable'].includes(m.options.name))\n        ) {\n          // Activator is actually another activatible component, use its activator (#8846)\n          activator = (vm as any).getActivator()\n        } else {\n          activator = this.activatorNode[0].elm as HTMLElement\n        }\n      } else if (e) {\n        // Activated by a click or focus event\n        activator = (e.currentTarget || e.target) as HTMLElement\n      }\n\n      // The activator should only be a valid element (Ignore comments and text nodes)\n      this.activatorElement = activator?.nodeType === Node.ELEMENT_NODE ? activator : null\n\n      return this.activatorElement\n    },\n    getContentSlot () {\n      return getSlot(this, 'default', this.getValueProxy(), true)\n    },\n    getValueProxy (): object {\n      const self = this\n      return {\n        get value () {\n          return self.isActive\n        },\n        set value (isActive: boolean) {\n          self.isActive = isActive\n        },\n      }\n    },\n    removeActivatorEvents () {\n      if (\n        !this.activator ||\n        !this.activatorElement\n      ) return\n\n      const keys = Object.keys(this.listeners)\n\n      for (const key of keys) {\n        (this.activatorElement as any).removeEventListener(key, this.listeners[key])\n      }\n\n      this.listeners = {}\n    },\n    resetActivator () {\n      this.removeActivatorEvents()\n      this.activatorElement = null\n      this.getActivator()\n      this.addActivatorEvents()\n    },\n  },\n})\n","import Vue from 'vue'\n\nimport mixins from '../../util/mixins'\nimport { VOverlay } from '../../components/VOverlay'\n\ninterface options extends Vue {\n  $el: HTMLElement\n  $refs: {\n    content: HTMLElement\n  }\n  overlay?: InstanceType<typeof VOverlay>\n}\n\ninterface DependentInstance extends Vue {\n  isActive?: boolean\n  isDependent?: boolean\n}\n\nfunction searchChildren (children: Vue[]): DependentInstance[] {\n  const results = []\n  for (let index = 0; index < children.length; index++) {\n    const child = children[index] as DependentInstance\n    if (child.isActive && child.isDependent) {\n      results.push(child)\n    } else {\n      results.push(...searchChildren(child.$children))\n    }\n  }\n\n  return results\n}\n\n/* @vue/component */\nexport default mixins<options>().extend({\n  name: 'dependent',\n\n  data () {\n    return {\n      closeDependents: true,\n      isActive: false,\n      isDependent: true,\n    }\n  },\n\n  watch: {\n    isActive (val) {\n      if (val) return\n\n      const openDependents = this.getOpenDependents()\n      for (let index = 0; index < openDependents.length; index++) {\n        openDependents[index].isActive = false\n      }\n    },\n  },\n\n  methods: {\n    getOpenDependents (): any[] {\n      if (this.closeDependents) return searchChildren(this.$children)\n\n      return []\n    },\n    getOpenDependentElements (): HTMLElement[] {\n      const result = []\n      const openDependents = this.getOpenDependents()\n\n      for (let index = 0; index < openDependents.length; index++) {\n        result.push(...openDependents[index].getClickableDependentElements())\n      }\n\n      return result\n    },\n    getClickableDependentElements (): HTMLElement[] {\n      const result = [this.$el]\n      if (this.$refs.content) result.push(this.$refs.content)\n      if (this.overlay) result.push(this.overlay.$el as HTMLElement)\n      result.push(...this.getOpenDependentElements())\n\n      return result\n    },\n  },\n})\n","// Utilities\nimport { removed } from '../../util/console'\n\n// Types\nimport Vue, { VNode } from 'vue'\ninterface Toggleable extends Vue {\n  isActive?: boolean\n}\n\n/**\n * Bootable\n * @mixin\n *\n * Used to add lazy content functionality to components\n * Looks for change in \"isActive\" to automatically boot\n * Otherwise can be set manually\n */\n/* @vue/component */\nexport default Vue.extend<Vue & Toggleable>().extend({\n  name: 'bootable',\n\n  props: {\n    eager: Boolean,\n  },\n\n  data: () => ({\n    isBooted: false,\n  }),\n\n  computed: {\n    hasContent (): boolean | undefined {\n      return this.isBooted || this.eager || this.isActive\n    },\n  },\n\n  watch: {\n    isActive () {\n      this.isBooted = true\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if ('lazy' in this.$attrs) {\n      removed('lazy', this)\n    }\n  },\n\n  methods: {\n    showLazyContent (content?: () => VNode[]): VNode[] {\n      return (this.hasContent && content) ? content() : [this.$createElement()]\n    },\n  },\n})\n","// Mixins\nimport Bootable from '../bootable'\n\n// Utilities\nimport { getObjectValueByPath } from '../../util/helpers'\nimport mixins, { ExtractVue } from '../../util/mixins'\nimport { consoleWarn } from '../../util/console'\n\n// Types\nimport Vue, { PropOptions } from 'vue'\nimport { VNode } from 'vue/types'\n\ninterface options extends Vue {\n  $el: HTMLElement\n  $refs: {\n    content: HTMLElement\n  }\n}\n\nfunction validateAttachTarget (val: any) {\n  const type = typeof val\n\n  if (type === 'boolean' || type === 'string') return true\n\n  return val.nodeType === Node.ELEMENT_NODE\n}\n\n/* @vue/component */\nexport default mixins<options &\n  /* eslint-disable indent */\n  ExtractVue<typeof Bootable>\n  /* eslint-enable indent */\n>(Bootable).extend({\n  name: 'detachable',\n\n  props: {\n    attach: {\n      default: false,\n      validator: validateAttachTarget,\n    } as PropOptions<boolean | string | Element>,\n    contentClass: {\n      type: String,\n      default: '',\n    },\n  },\n\n  data: () => ({\n    activatorNode: null as null | VNode | VNode[],\n    hasDetached: false,\n  }),\n\n  watch: {\n    attach () {\n      this.hasDetached = false\n      this.initDetach()\n    },\n    hasContent () {\n      this.$nextTick(this.initDetach)\n    },\n  },\n\n  beforeMount () {\n    this.$nextTick(() => {\n      if (this.activatorNode) {\n        const activator = Array.isArray(this.activatorNode) ? this.activatorNode : [this.activatorNode]\n\n        activator.forEach(node => {\n          if (!node.elm) return\n          if (!this.$el.parentNode) return\n\n          const target = this.$el === this.$el.parentNode.firstChild\n            ? this.$el\n            : this.$el.nextSibling\n\n          this.$el.parentNode.insertBefore(node.elm, target)\n        })\n      }\n    })\n  },\n\n  mounted () {\n    this.hasContent && this.initDetach()\n  },\n\n  deactivated () {\n    this.isActive = false\n  },\n\n  beforeDestroy () {\n    // IE11 Fix\n    try {\n      if (\n        this.$refs.content &&\n        this.$refs.content.parentNode\n      ) {\n        this.$refs.content.parentNode.removeChild(this.$refs.content)\n      }\n\n      if (this.activatorNode) {\n        const activator = Array.isArray(this.activatorNode) ? this.activatorNode : [this.activatorNode]\n        activator.forEach(node => {\n          node.elm &&\n            node.elm.parentNode &&\n            node.elm.parentNode.removeChild(node.elm)\n        })\n      }\n    } catch (e) { console.log(e) } /* eslint-disable-line no-console */\n  },\n\n  methods: {\n    getScopeIdAttrs () {\n      const scopeId = getObjectValueByPath(this.$vnode, 'context.$options._scopeId')\n\n      return scopeId && {\n        [scopeId]: '',\n      }\n    },\n    initDetach () {\n      if (this._isDestroyed ||\n        !this.$refs.content ||\n        this.hasDetached ||\n        // Leave menu in place if attached\n        // and dev has not changed target\n        this.attach === '' || // If used as a boolean prop (<v-menu attach>)\n        this.attach === true || // If bound to a boolean (<v-menu :attach=\"true\">)\n        this.attach === 'attach' // If bound as boolean prop in pug (v-menu(attach))\n      ) return\n\n      let target\n      if (this.attach === false) {\n        // Default, detach to app\n        target = document.querySelector('[data-app]')\n      } else if (typeof this.attach === 'string') {\n        // CSS selector\n        target = document.querySelector(this.attach)\n      } else {\n        // DOM Element\n        target = this.attach\n      }\n\n      if (!target) {\n        consoleWarn(`Unable to locate target ${this.attach || '[data-app]'}`, this)\n        return\n      }\n\n      target.appendChild(this.$refs.content)\n\n      this.hasDetached = true\n    },\n  },\n})\n","// Styles\nimport './VOverlay.sass'\n\n// Mixins\nimport Colorable from './../../mixins/colorable'\nimport Themeable from '../../mixins/themeable'\nimport Toggleable from './../../mixins/toggleable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default mixins(\n  Colorable,\n  Themeable,\n  Toggleable\n).extend({\n  name: 'v-overlay',\n\n  props: {\n    absolute: Boolean,\n    color: {\n      type: String,\n      default: '#212121',\n    },\n    dark: {\n      type: Boolean,\n      default: true,\n    },\n    opacity: {\n      type: [Number, String],\n      default: 0.46,\n    },\n    value: {\n      default: true,\n    },\n    zIndex: {\n      type: [Number, String],\n      default: 5,\n    },\n  },\n\n  computed: {\n    __scrim (): VNode {\n      const data = this.setBackgroundColor(this.color, {\n        staticClass: 'v-overlay__scrim',\n        style: {\n          opacity: this.computedOpacity,\n        },\n      })\n\n      return this.$createElement('div', data)\n    },\n    classes (): object {\n      return {\n        'v-overlay--absolute': this.absolute,\n        'v-overlay--active': this.isActive,\n        ...this.themeClasses,\n      }\n    },\n    computedOpacity (): number {\n      return Number(this.isActive ? this.opacity : 0)\n    },\n    styles (): object {\n      return {\n        zIndex: this.zIndex,\n      }\n    },\n  },\n\n  methods: {\n    genContent () {\n      return this.$createElement('div', {\n        staticClass: 'v-overlay__content',\n      }, this.$slots.default)\n    },\n  },\n\n  render (h): VNode {\n    const children = [this.__scrim]\n\n    if (this.isActive) children.push(this.genContent())\n\n    return h('div', {\n      staticClass: 'v-overlay',\n      class: this.classes,\n      style: this.styles,\n    }, children)\n  },\n})\n","import VOverlay from './VOverlay'\n\nexport { VOverlay }\n\nexport default VOverlay\n","// Components\nimport VOverlay from '../../components/VOverlay'\n\n// Utilities\nimport {\n  keyCodes,\n  addOnceEventListener,\n  addPassiveEventListener,\n  getZIndex,\n} from '../../util/helpers'\n\n// Types\nimport Vue from 'vue'\n\ninterface Toggleable extends Vue {\n  isActive?: boolean\n}\n\ninterface Stackable extends Vue {\n  activeZIndex: number\n}\n\ninterface options {\n  absolute?: boolean\n  $refs: {\n    dialog?: HTMLElement\n    content?: HTMLElement\n  }\n}\n\n/* @vue/component */\nexport default Vue.extend<Vue & Toggleable & Stackable & options>().extend({\n  name: 'overlayable',\n\n  props: {\n    hideOverlay: Boolean,\n    overlayColor: String,\n    overlayOpacity: [Number, String],\n  },\n\n  data () {\n    return {\n      animationFrame: 0,\n      overlay: null as InstanceType<typeof VOverlay> | null,\n    }\n  },\n\n  watch: {\n    hideOverlay (value) {\n      if (!this.isActive) return\n\n      if (value) this.removeOverlay()\n      else this.genOverlay()\n    },\n  },\n\n  beforeDestroy () {\n    this.removeOverlay()\n  },\n\n  methods: {\n    createOverlay () {\n      const overlay = new VOverlay({\n        propsData: {\n          absolute: this.absolute,\n          value: false,\n          color: this.overlayColor,\n          opacity: this.overlayOpacity,\n        },\n      })\n\n      overlay.$mount()\n\n      const parent = this.absolute\n        ? this.$el.parentNode\n        : document.querySelector('[data-app]')\n\n      parent && parent.insertBefore(overlay.$el, parent.firstChild)\n\n      this.overlay = overlay\n    },\n    genOverlay () {\n      this.hideScroll()\n\n      if (this.hideOverlay) return\n\n      if (!this.overlay) this.createOverlay()\n\n      this.animationFrame = requestAnimationFrame(() => {\n        if (!this.overlay) return\n\n        if (this.activeZIndex !== undefined) {\n          this.overlay.zIndex = String(this.activeZIndex - 1)\n        } else if (this.$el) {\n          this.overlay.zIndex = getZIndex(this.$el)\n        }\n\n        this.overlay.value = true\n      })\n\n      return true\n    },\n    /** removeOverlay(false) will not restore the scollbar afterwards */\n    removeOverlay (showScroll = true) {\n      if (this.overlay) {\n        addOnceEventListener(this.overlay.$el, 'transitionend', () => {\n          if (\n            !this.overlay ||\n            !this.overlay.$el ||\n            !this.overlay.$el.parentNode ||\n            this.overlay.value ||\n            this.isActive\n          ) return\n\n          this.overlay.$el.parentNode.removeChild(this.overlay.$el)\n          this.overlay.$destroy()\n          this.overlay = null\n        })\n\n        // Cancel animation frame in case\n        // overlay is removed before it\n        // has finished its animation\n        cancelAnimationFrame(this.animationFrame)\n\n        this.overlay.value = false\n      }\n\n      showScroll && this.showScroll()\n    },\n    scrollListener (e: WheelEvent & KeyboardEvent) {\n      if (e.type === 'keydown') {\n        if (\n          ['INPUT', 'TEXTAREA', 'SELECT'].includes((e.target as Element).tagName) ||\n          // https://github.com/vuetifyjs/vuetify/issues/4715\n          (e.target as HTMLElement).isContentEditable\n        ) return\n\n        const up = [keyCodes.up, keyCodes.pageup]\n        const down = [keyCodes.down, keyCodes.pagedown]\n\n        if (up.includes(e.keyCode)) {\n          (e as any).deltaY = -1\n        } else if (down.includes(e.keyCode)) {\n          (e as any).deltaY = 1\n        } else {\n          return\n        }\n      }\n\n      if (e.target === this.overlay ||\n        (e.type !== 'keydown' && e.target === document.body) ||\n        this.checkPath(e)) e.preventDefault()\n    },\n    hasScrollbar (el?: Element) {\n      if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\n\n      const style = window.getComputedStyle(el)\n      return ['auto', 'scroll'].includes(style.overflowY!) && el.scrollHeight > el.clientHeight\n    },\n    shouldScroll (el: Element, delta: number): boolean {\n      if (el.hasAttribute('data-app')) return false\n\n      const alreadyAtTop = el.scrollTop === 0\n      const alreadyAtBottom = el.scrollTop + el.clientHeight === el.scrollHeight\n      const scrollingUp = delta < 0\n      const scrollingDown = delta > 0\n\n      if (!alreadyAtTop && scrollingUp) return true\n      if (!alreadyAtBottom && scrollingDown) return true\n      if ((alreadyAtTop || alreadyAtBottom)) {\n        return this.shouldScroll(el.parentNode as Element, delta)\n      }\n\n      return false\n    },\n    isInside (el: Element, parent: Element): boolean {\n      if (el === parent) {\n        return true\n      } else if (el === null || el === document.body) {\n        return false\n      } else {\n        return this.isInside(el.parentNode as Element, parent)\n      }\n    },\n    checkPath (e: WheelEvent) {\n      const path = e.path || this.composedPath(e)\n      const delta = e.deltaY\n\n      if (e.type === 'keydown' && path[0] === document.body) {\n        const dialog = this.$refs.dialog\n        // getSelection returns null in firefox in some edge cases, can be ignored\n        const selected = window.getSelection()!.anchorNode as Element\n        if (dialog && this.hasScrollbar(dialog) && this.isInside(selected, dialog)) {\n          return !this.shouldScroll(dialog, delta)\n        }\n        return true\n      }\n\n      for (let index = 0; index < path.length; index++) {\n        const el = path[index]\n\n        if (el === document) return true\n        if (el === document.documentElement) return true\n        if (el === this.$refs.content) return true\n\n        if (this.hasScrollbar(el as Element)) return !this.shouldScroll(el as Element, delta)\n      }\n\n      return true\n    },\n    /**\n     * Polyfill for Event.prototype.composedPath\n     */\n    composedPath (e: WheelEvent): EventTarget[] {\n      if (e.composedPath) return e.composedPath()\n\n      const path = []\n      let el = e.target as Element\n\n      while (el) {\n        path.push(el)\n\n        if (el.tagName === 'HTML') {\n          path.push(document)\n          path.push(window)\n\n          return path\n        }\n\n        el = el.parentElement!\n      }\n      return path\n    },\n    hideScroll () {\n      if (this.$vuetify.breakpoint.smAndDown) {\n        document.documentElement!.classList.add('overflow-y-hidden')\n      } else {\n        addPassiveEventListener(window, 'wheel', this.scrollListener as EventHandlerNonNull, { passive: false })\n        window.addEventListener('keydown', this.scrollListener as EventHandlerNonNull)\n      }\n    },\n    showScroll () {\n      document.documentElement!.classList.remove('overflow-y-hidden')\n      window.removeEventListener('wheel', this.scrollListener as EventHandlerNonNull)\n      window.removeEventListener('keydown', this.scrollListener as EventHandlerNonNull)\n    },\n  },\n})\n","import Vue from 'vue'\n\n/* @vue/component */\nexport default Vue.extend({\n  name: 'returnable',\n\n  props: {\n    returnValue: null as any,\n  },\n\n  data: () => ({\n    isActive: false,\n    originalValue: null as any,\n  }),\n\n  watch: {\n    isActive (val) {\n      if (val) {\n        this.originalValue = this.returnValue\n      } else {\n        this.$emit('update:return-value', this.originalValue)\n      }\n    },\n  },\n\n  methods: {\n    save (value: any) {\n      this.originalValue = value\n      setTimeout(() => {\n        this.isActive = false\n      })\n    },\n  },\n})\n","import Vue from 'vue'\n\nimport { getZIndex } from '../../util/helpers'\n\ninterface options extends Vue {\n  $refs: {\n    content: Element\n  }\n}\n\n/* @vue/component */\nexport default Vue.extend<options>().extend({\n  name: 'stackable',\n\n  data () {\n    return {\n      stackElement: null as Element | null,\n      stackExclude: null as Element[] | null,\n      stackMinZIndex: 0,\n      isActive: false,\n    }\n  },\n  computed: {\n    activeZIndex (): number {\n      if (typeof window === 'undefined') return 0\n\n      const content = this.stackElement || this.$refs.content\n      // Return current zindex if not active\n\n      const index = !this.isActive\n        ? getZIndex(content)\n        : this.getMaxZIndex(this.stackExclude || [content]) + 2\n\n      if (index == null) return index\n\n      // Return max current z-index (excluding self) + 2\n      // (2 to leave room for an overlay below, if needed)\n      return parseInt(index)\n    },\n  },\n  methods: {\n    getMaxZIndex (exclude: Element[] = []) {\n      const base = this.$el\n      // Start with lowest allowed z-index or z-index of\n      // base component's element, whichever is greater\n      const zis = [this.stackMinZIndex, getZIndex(base)]\n      // Convert the NodeList to an array to\n      // prevent an Edge bug with Symbol.iterator\n      // https://github.com/vuetifyjs/vuetify/issues/2146\n      const activeElements = [\n        ...document.getElementsByClassName('v-menu__content--active'),\n        ...document.getElementsByClassName('v-dialog__content--active'),\n      ]\n\n      // Get z-index for all active dialogs\n      for (let index = 0; index < activeElements.length; index++) {\n        if (!exclude.includes(activeElements[index])) {\n          zis.push(getZIndex(activeElements[index]))\n        }\n      }\n\n      return Math.max(...zis)\n    },\n  },\n})\n","import { attachedRoot } from '../../util/dom'\nimport { VNodeDirective } from 'vue/types/vnode'\n\ninterface ClickOutsideBindingArgs {\n  handler: (e: Event) => void\n  closeConditional?: (e: Event) => boolean\n  include?: () => HTMLElement[]\n}\n\ninterface ClickOutsideDirective extends VNodeDirective {\n  value?: ((e: Event) => void) | ClickOutsideBindingArgs\n}\n\nfunction defaultConditional () {\n  return true\n}\n\nfunction checkEvent (e: PointerEvent, el: HTMLElement, binding: ClickOutsideDirective): boolean {\n  // The include element callbacks below can be expensive\n  // so we should avoid calling them when we're not active.\n  // Explicitly check for false to allow fallback compatibility\n  // with non-toggleable components\n  if (!e || checkIsActive(e, binding) === false) return false\n\n  // If we're clicking inside the shadowroot, then the app root doesn't get the same\n  // level of introspection as to _what_ we're clicking. We want to check to see if\n  // our target is the shadowroot parent container, and if it is, ignore.\n  const root = attachedRoot(el)\n  if (\n    typeof ShadowRoot !== 'undefined' &&\n    root instanceof ShadowRoot &&\n    root.host === e.target\n  ) return false\n\n  // Check if additional elements were passed to be included in check\n  // (click must be outside all included elements, if any)\n  const elements = ((typeof binding.value === 'object' && binding.value.include) || (() => []))()\n  // Add the root element for the component this directive was defined on\n  elements.push(el)\n\n  // Check if it's a click outside our elements, and then if our callback returns true.\n  // Non-toggleable components should take action in their callback and return falsy.\n  // Toggleable can return true if it wants to deactivate.\n  // Note that, because we're in the capture phase, this callback will occur before\n  // the bubbling click event on any outside elements.\n  return !elements.some(el => el.contains(e.target as Node))\n}\n\nfunction checkIsActive (e: PointerEvent, binding: ClickOutsideDirective): boolean | void {\n  const isActive = (typeof binding.value === 'object' && binding.value.closeConditional) || defaultConditional\n\n  return isActive(e)\n}\n\nfunction directive (e: PointerEvent, el: HTMLElement, binding: ClickOutsideDirective) {\n  const handler = typeof binding.value === 'function' ? binding.value : binding.value!.handler\n\n  el._clickOutside!.lastMousedownWasOutside && checkEvent(e, el, binding) && setTimeout(() => {\n    checkIsActive(e, binding) && handler && handler(e)\n  }, 0)\n}\n\nfunction handleShadow (el: HTMLElement, callback: Function): void {\n  const root = attachedRoot(el)\n\n  callback(document)\n\n  if (root instanceof ShadowRoot) {\n    callback(root)\n  }\n}\n\nexport const ClickOutside = {\n  // [data-app] may not be found\n  // if using bind, inserted makes\n  // sure that the root element is\n  // available, iOS does not support\n  // clicks on body\n  inserted (el: HTMLElement, binding: ClickOutsideDirective) {\n    const onClick = (e: Event) => directive(e as PointerEvent, el, binding)\n    const onMousedown = (e: Event) => {\n      el._clickOutside!.lastMousedownWasOutside = checkEvent(e as PointerEvent, el, binding)\n    }\n\n    handleShadow(el, (app: HTMLElement) => {\n      app.addEventListener('click', onClick, true)\n      app.addEventListener('mousedown', onMousedown, true)\n    })\n\n    el._clickOutside = {\n      lastMousedownWasOutside: true,\n      onClick,\n      onMousedown,\n    }\n  },\n\n  unbind (el: HTMLElement) {\n    if (!el._clickOutside) return\n\n    handleShadow(el, (app: HTMLElement) => {\n      if (!app || !el._clickOutside) return\n      app.removeEventListener('click', el._clickOutside.onClick, true)\n      app.removeEventListener('mousedown', el._clickOutside.onMousedown, true)\n    })\n\n    delete el._clickOutside\n  },\n}\n\nexport default ClickOutside\n","// Styles\nimport './VDialog.sass'\n\n// Components\nimport { VThemeProvider } from '../VThemeProvider'\n\n// Mixins\nimport Activatable from '../../mixins/activatable'\nimport Dependent from '../../mixins/dependent'\nimport Detachable from '../../mixins/detachable'\nimport Overlayable from '../../mixins/overlayable'\nimport Returnable from '../../mixins/returnable'\nimport Stackable from '../../mixins/stackable'\nimport Toggleable from '../../mixins/toggleable'\n\n// Directives\nimport ClickOutside from '../../directives/click-outside'\n\n// Helpers\nimport mixins from '../../util/mixins'\nimport { removed } from '../../util/console'\nimport {\n  convertToUnit,\n  keyCodes,\n} from '../../util/helpers'\n\n// Types\nimport { VNode, VNodeData } from 'vue'\n\nconst baseMixins = mixins(\n  Activatable,\n  Dependent,\n  Detachable,\n  Overlayable,\n  Returnable,\n  Stackable,\n  Toggleable\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-dialog',\n\n  directives: { ClickOutside },\n\n  props: {\n    dark: Boolean,\n    disabled: Boolean,\n    fullscreen: Boolean,\n    light: Boolean,\n    maxWidth: {\n      type: [String, Number],\n      default: 'none',\n    },\n    noClickAnimation: Boolean,\n    origin: {\n      type: String,\n      default: 'center center',\n    },\n    persistent: Boolean,\n    retainFocus: {\n      type: Boolean,\n      default: true,\n    },\n    scrollable: Boolean,\n    transition: {\n      type: [String, Boolean],\n      default: 'dialog-transition',\n    },\n    width: {\n      type: [String, Number],\n      default: 'auto',\n    },\n  },\n\n  data () {\n    return {\n      activatedBy: null as EventTarget | null,\n      animate: false,\n      animateTimeout: -1,\n      isActive: !!this.value,\n      stackMinZIndex: 200,\n      previousActiveElement: null as HTMLElement | null,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        [(`v-dialog ${this.contentClass}`).trim()]: true,\n        'v-dialog--active': this.isActive,\n        'v-dialog--persistent': this.persistent,\n        'v-dialog--fullscreen': this.fullscreen,\n        'v-dialog--scrollable': this.scrollable,\n        'v-dialog--animated': this.animate,\n      }\n    },\n    contentClasses (): object {\n      return {\n        'v-dialog__content': true,\n        'v-dialog__content--active': this.isActive,\n      }\n    },\n    hasActivator (): boolean {\n      return Boolean(\n        !!this.$slots.activator ||\n        !!this.$scopedSlots.activator\n      )\n    },\n  },\n\n  watch: {\n    isActive (val) {\n      if (val) {\n        this.show()\n        this.hideScroll()\n      } else {\n        this.removeOverlay()\n        this.unbind()\n        this.previousActiveElement?.focus()\n      }\n    },\n    fullscreen (val) {\n      if (!this.isActive) return\n\n      if (val) {\n        this.hideScroll()\n        this.removeOverlay(false)\n      } else {\n        this.showScroll()\n        this.genOverlay()\n      }\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('full-width')) {\n      removed('full-width', this)\n    }\n  },\n\n  beforeMount () {\n    this.$nextTick(() => {\n      this.isBooted = this.isActive\n      this.isActive && this.show()\n    })\n  },\n\n  beforeDestroy () {\n    if (typeof window !== 'undefined') this.unbind()\n  },\n\n  methods: {\n    animateClick () {\n      this.animate = false\n      // Needed for when clicking very fast\n      // outside of the dialog\n      this.$nextTick(() => {\n        this.animate = true\n        window.clearTimeout(this.animateTimeout)\n        this.animateTimeout = window.setTimeout(() => (this.animate = false), 150)\n      })\n    },\n    closeConditional (e: Event) {\n      const target = e.target as HTMLElement\n      // Ignore the click if the dialog is closed or destroyed,\n      // if it was on an element inside the content,\n      // if it was dragged onto the overlay (#6969),\n      // or if this isn't the topmost dialog (#9907)\n      return !(\n        this._isDestroyed ||\n        !this.isActive ||\n        this.$refs.content.contains(target) ||\n        (this.overlay && target && !this.overlay.$el.contains(target))\n      ) && this.activeZIndex >= this.getMaxZIndex()\n    },\n    hideScroll () {\n      if (this.fullscreen) {\n        document.documentElement.classList.add('overflow-y-hidden')\n      } else {\n        Overlayable.options.methods.hideScroll.call(this)\n      }\n    },\n    show () {\n      !this.fullscreen && !this.hideOverlay && this.genOverlay()\n      // Double nextTick to wait for lazy content to be generated\n      this.$nextTick(() => {\n        this.$nextTick(() => {\n          this.previousActiveElement = document.activeElement as HTMLElement\n          this.$refs.content.focus()\n          this.bind()\n        })\n      })\n    },\n    bind () {\n      window.addEventListener('focusin', this.onFocusin)\n    },\n    unbind () {\n      window.removeEventListener('focusin', this.onFocusin)\n    },\n    onClickOutside (e: Event) {\n      this.$emit('click:outside', e)\n\n      if (this.persistent) {\n        this.noClickAnimation || this.animateClick()\n      } else {\n        this.isActive = false\n      }\n    },\n    onKeydown (e: KeyboardEvent) {\n      if (e.keyCode === keyCodes.esc && !this.getOpenDependents().length) {\n        if (!this.persistent) {\n          this.isActive = false\n          const activator = this.getActivator()\n          this.$nextTick(() => activator && (activator as HTMLElement).focus())\n        } else if (!this.noClickAnimation) {\n          this.animateClick()\n        }\n      }\n      this.$emit('keydown', e)\n    },\n    // On focus change, wrap focus to stay inside the dialog\n    // https://github.com/vuetifyjs/vuetify/issues/6892\n    onFocusin (e: Event) {\n      if (!e || !this.retainFocus) return\n\n      const target = e.target as HTMLElement\n\n      if (\n        !!target &&\n        // It isn't the document or the dialog body\n        ![document, this.$refs.content].includes(target) &&\n        // It isn't inside the dialog body\n        !this.$refs.content.contains(target) &&\n        // We're the topmost dialog\n        this.activeZIndex >= this.getMaxZIndex() &&\n        // It isn't inside a dependent element (like a menu)\n        !this.getOpenDependentElements().some(el => el.contains(target))\n        // So we must have focused something outside the dialog and its children\n      ) {\n        // Find and focus the first available element inside the dialog\n        const focusable = this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])')\n        const el = [...focusable].find(el => !el.hasAttribute('disabled')) as HTMLElement | undefined\n        el && el.focus()\n      }\n    },\n    genContent () {\n      return this.showLazyContent(() => [\n        this.$createElement(VThemeProvider, {\n          props: {\n            root: true,\n            light: this.light,\n            dark: this.dark,\n          },\n        }, [\n          this.$createElement('div', {\n            class: this.contentClasses,\n            attrs: {\n              role: 'document',\n              tabindex: this.isActive ? 0 : undefined,\n              ...this.getScopeIdAttrs(),\n            },\n            on: { keydown: this.onKeydown },\n            style: { zIndex: this.activeZIndex },\n            ref: 'content',\n          }, [this.genTransition()]),\n        ]),\n      ])\n    },\n    genTransition () {\n      const content = this.genInnerContent()\n\n      if (!this.transition) return content\n\n      return this.$createElement('transition', {\n        props: {\n          name: this.transition,\n          origin: this.origin,\n          appear: true,\n        },\n      }, [content])\n    },\n    genInnerContent () {\n      const data: VNodeData = {\n        class: this.classes,\n        ref: 'dialog',\n        directives: [\n          {\n            name: 'click-outside',\n            value: {\n              handler: this.onClickOutside,\n              closeConditional: this.closeConditional,\n              include: this.getOpenDependentElements,\n            },\n          },\n          { name: 'show', value: this.isActive },\n        ],\n        style: {\n          transformOrigin: this.origin,\n        },\n      }\n\n      if (!this.fullscreen) {\n        data.style = {\n          ...data.style as object,\n          maxWidth: this.maxWidth === 'none' ? undefined : convertToUnit(this.maxWidth),\n          width: this.width === 'auto' ? undefined : convertToUnit(this.width),\n        }\n      }\n\n      return this.$createElement('div', data, this.getContentSlot())\n    },\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-dialog__container',\n      class: {\n        'v-dialog__container--attached':\n          this.attach === '' ||\n          this.attach === true ||\n          this.attach === 'attach',\n      },\n      attrs: { role: 'dialog' },\n    }, [\n      this.genActivator(),\n      this.genContent(),\n    ])\n  },\n})\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar typedArraySpeciesConstructor = require('../internals/typed-array-species-constructor');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.subarray` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.subarray\nexportTypedArrayMethod('subarray', function subarray(begin, end) {\n  var O = aTypedArray(this);\n  var length = O.length;\n  var beginIndex = toAbsoluteIndex(begin, length);\n  var C = typedArraySpeciesConstructor(O);\n  return new C(\n    O.buffer,\n    O.byteOffset + beginIndex * O.BYTES_PER_ELEMENT,\n    toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - beginIndex)\n  );\n});\n","var toPositiveInteger = require('../internals/to-positive-integer');\n\nmodule.exports = function (it, BYTES) {\n  var offset = toPositiveInteger(it);\n  if (offset % BYTES) throw RangeError('Wrong offset');\n  return offset;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"bg\",attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"flex\":\"\",\"align-center\":\"\",\"justify-center\":\"\",\"color\":\"bg\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm4\":\"\",\"elevation-0\":\"\",\"color\":\"bg\"}},[_c('v-card',{attrs:{\"color\":\"bg\"}},[_c('v-card-text',{staticClass:\"pt-4\"},[_c('v-toolbar',{staticStyle:{\"box-shadow\":\"none\"},attrs:{\"color\":\"bg\",\"elevation-0\":\"\"}},[_c('v-img',{staticClass:\"mx-auto\",attrs:{\"max-height\":\"50\",\"max-width\":\"100\",\"src\":require('../assets/logo.png')}})],1),_c('div',{staticClass:\"d-flex justify-center mb-6\"},[_c('v-banner',{staticClass:\"text-h5\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"Remote Desktop\"))+\" \")])],1),_c('div',{staticClass:\"d-flex justify-center mb-6 text-subtitle-1\"},[_vm._v(\" \"+_vm._s(_vm.messageText)+\" \")]),(_vm.alertText != '')?_c('div',[_c('v-alert',{attrs:{\"type\":_vm.alertType}},[_vm._v(\" \"+_vm._s(_vm.alertText)+\" \")])],1):_vm._e(),_c('div',[_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[(!_vm.resetOTP && !_vm.appData.canSetOTPToken)?_c('v-text-field',{ref:\"otpField\",attrs:{\"label\":_vm.$t('OTP Code'),\"append-icon\":_vm.e1 ? 'mdi-eye ' : 'mdi-eye-off',\"append-icon-cb\":function () { return (_vm.e1 = !_vm.e1); },\"type\":_vm.e1 ? 'password' : 'text',\"rules\":_vm.passwordRules,\"counter\":\"\",\"required\":\"\",\"autocomplete\":\"off\",\"name\":Math.random()},on:{\"click:append\":function () { return (_vm.e1 = !_vm.e1); }},model:{value:(_vm.otpcode),callback:function ($$v) {_vm.otpcode=$$v},expression:\"otpcode\"}}):_vm._e(),(!_vm.resetOTP && !_vm.appData.canSetOTPToken)?_c('v-layout',{attrs:{\"justify-space-between\":\"\"}},[_c('v-btn',{class:{\n                    'blue darken-4 white--text': _vm.valid,\n                    disabled: !_vm.valid,\n                  },attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(_vm._s(_vm.$t(\"Login\")))]),_c('v-btn',{class:{\n                    'blue darken-4 white--text': _vm.valid,\n                    disabled: !_vm.valid,\n                  },attrs:{\"color\":\"error\"},on:{\"click\":function($event){_vm.resetOTP = true;\n                    _vm.messageText = _vm.$t('Reset the TOTP code?');}}},[_vm._v(_vm._s(_vm.$t(\"Reset the TOTP code\")))]),_c('v-btn',{class:{\n                    'blue darken-4 white--text': _vm.valid,\n                    disabled: !_vm.valid,\n                  },attrs:{\"color\":\"warning\"},on:{\"click\":_vm.cancelOTP}},[_vm._v(_vm._s(_vm.$t(\"Cancel\")))])],1):_vm._e(),(_vm.resetOTP)?_c('v-layout',[_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"primary\"},on:{\"click\":_vm.resetPasswordSubmit}},[_vm._v(_vm._s(_vm.$t(\"Reset OTP Code\")))]),_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"warning\"},on:{\"click\":function($event){_vm.resetOTP = false || _vm.setPageParams()}}},[_vm._v(_vm._s(_vm.$t(\"Cancel\")))])],1):_vm._e(),(_vm.appData.canSetOTPToken)?_c('v-layout',[_c('v-container',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('vue-qrcode',{attrs:{\"value\":_vm.otpURL}})],1),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.scanComplete()}}},[_vm._v(_vm._s(_vm.$t(\"Scan Complete\")))]),_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"warning\"},on:{\"click\":function($event){return _vm.cancelOTP()}}},[_vm._v(_vm._s(_vm.$t(\"Cancel\")))])],1)],1)],1):_vm._e()],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { __rest } from \"tslib\";\nimport QRCode from 'qrcode';\nexport const LEVELS = [\n    'low',\n    'medium',\n    'quartile',\n    'high',\n    'L',\n    'M',\n    'Q',\n    'H',\n];\n// eslint-disable-next-line @typescript-eslint/no-magic-numbers\nexport const MASK_PATTERNS = [0, 1, 2, 3, 4, 5, 6, 7];\nexport const MODES = ['alphanumeric', 'numeric', 'kanji', 'byte'];\nexport const TYPES = ['image/png', 'image/jpeg', 'image/webp'];\nconst MAX_QR_VERSION = 40;\nexport default {\n    props: {\n        version: {\n            type: Number,\n            validator: (version) => version === Number.parseInt(String(version), 10) &&\n                version >= 1 &&\n                version <= MAX_QR_VERSION,\n        },\n        errorCorrectionLevel: {\n            type: String,\n            validator: (level) => LEVELS.includes(level),\n        },\n        maskPattern: {\n            type: Number,\n            validator: (maskPattern) => MASK_PATTERNS.includes(maskPattern),\n        },\n        toSJISFunc: Function,\n        margin: Number,\n        scale: Number,\n        width: Number,\n        color: {\n            type: Object,\n            validator: (color) => ['dark', 'light'].every(c => ['string', 'undefined'].includes(typeof color[c])),\n        },\n        type: {\n            type: String,\n            validator: (type) => TYPES.includes(type),\n        },\n        quality: {\n            type: Number,\n            validator: (quality) => quality === Number.parseFloat(String(quality)) &&\n                quality >= 0 &&\n                quality <= 1,\n        },\n        value: {\n            type: [String, Array],\n            required: true,\n            validator(value) {\n                if (typeof value === 'string') {\n                    return true;\n                }\n                return value.every(({ data, mode }) => typeof data === 'string' && (mode == null || MODES.includes(mode)));\n            },\n        },\n    },\n    data() {\n        return {\n            dataUrl: '',\n        };\n    },\n    watch: {\n        $props: {\n            deep: true,\n            immediate: true,\n            handler: 'toDataURL',\n        },\n    },\n    methods: {\n        toDataURL() {\n            const _a = this.$props, { quality } = _a, props = __rest(_a, [\"quality\"]);\n            return QRCode.toDataURL(this.value, Object.assign(props, quality == null || {\n                renderOptions: {\n                    quality,\n                },\n            }))\n                .then(dataUrl => (this.dataUrl = dataUrl))\n                .catch(err => this.$emit('error', err));\n        },\n    },\n    render() {\n        return this.$createElement('img', {\n            domProps: Object.assign(Object.assign({}, this.$attrs), { src: this.dataUrl }),\n        });\n    },\n};\n//# sourceMappingURL=index.js.map","<template>\n  <v-container fluid fill-height class=\"bg\">\n    <v-layout flex align-center justify-center color=\"bg\">\n      <v-flex xs12 sm4 elevation-0 color=\"bg\">\n        <v-card color=\"bg\">\n          <v-card-text class=\"pt-4\">\n            <v-toolbar color=\"bg\" elevation-0 style=\"box-shadow: none\">\n              <v-img\n                class=\"mx-auto\"\n                max-height=\"50\"\n                max-width=\"100\"\n                :src=\"require('../assets/logo.png')\"\n              ></v-img>\n            </v-toolbar>\n            <div class=\"d-flex justify-center mb-6\">\n              <v-banner class=\"text-h5\">\n                {{ $t(\"Remote Desktop\") }}\n              </v-banner>\n            </div>\n            <div class=\"d-flex justify-center mb-6 text-subtitle-1\">\n              {{ messageText }}\n            </div>\n            <div v-if=\"alertText != ''\">\n              <v-alert :type=\"alertType\">\n                {{ alertText }}\n              </v-alert>\n            </div>\n            <div>\n              <v-form v-model=\"valid\" ref=\"form\">\n                <v-text-field\n                  v-if=\"!resetOTP && !appData.canSetOTPToken\"\n                  :label=\"$t('OTP Code')\"\n                  v-model=\"otpcode\"\n                  :append-icon=\"e1 ? 'mdi-eye ' : 'mdi-eye-off'\"\n                  :append-icon-cb=\"() => (e1 = !e1)\"\n                  @click:append=\"() => (e1 = !e1)\"\n                  :type=\"e1 ? 'password' : 'text'\"\n                  :rules=\"passwordRules\"\n                  counter\n                  required\n                  autocomplete=\"off\"\n                  :name=\"Math.random()\"\n                  ref=\"otpField\"\n                ></v-text-field>\n\n                <v-layout\n                  justify-space-between\n                  v-if=\"!resetOTP && !appData.canSetOTPToken\"\n                >\n                  <v-btn\n                    @click=\"submit\"\n                    color=\"primary\"\n                    :class=\"{\n                      'blue darken-4 white--text': valid,\n                      disabled: !valid,\n                    }\"\n                    >{{ $t(\"Login\") }}</v-btn\n                  >\n\n                  <v-btn\n                    @click=\"\n                      resetOTP = true;\n                      messageText = $t('Reset the TOTP code?');\n                    \"\n                    color=\"error\"\n                    :class=\"{\n                      'blue darken-4 white--text': valid,\n                      disabled: !valid,\n                    }\"\n                    >{{ $t(\"Reset the TOTP code\") }}</v-btn\n                  >\n\n                  <v-btn\n                    @click=\"cancelOTP\"\n                    color=\"warning\"\n                    :class=\"{\n                      'blue darken-4 white--text': valid,\n                      disabled: !valid,\n                    }\"\n                    >{{ $t(\"Cancel\") }}</v-btn\n                  >\n                </v-layout>\n\n                <v-layout v-if=\"resetOTP\">\n                  <v-btn\n                    class=\"ma-4\"\n                    color=\"primary\"\n                    @click=\"resetPasswordSubmit\"\n                    >{{ $t(\"Reset OTP Code\") }}</v-btn\n                  >\n                  <v-btn\n                    class=\"ma-4\"\n                    color=\"warning\"\n                    @click=\"resetOTP = false || setPageParams()\"\n                    >{{ $t(\"Cancel\") }}</v-btn\n                  >\n                </v-layout>\n                <v-layout v-if=\"appData.canSetOTPToken\">\n                  <v-container>\n                    <v-row justify=\"center\">\n                      <vue-qrcode :value=\"otpURL\" />\n                    </v-row>\n                    <v-row justify=\"center\">\n                      <v-btn\n                        class=\"ma-4\"\n                        color=\"primary\"\n                        @click=\"scanComplete()\"\n                        >{{ $t(\"Scan Complete\") }}</v-btn\n                      >\n                      <v-btn\n                        class=\"ma-4\"\n                        color=\"warning\"\n                        @click=\"cancelOTP()\"\n                        >{{ $t(\"Cancel\") }}</v-btn\n                      >\n                    </v-row>\n                  </v-container>\n                </v-layout>\n              </v-form>\n            </div>\n          </v-card-text>\n        </v-card>\n      </v-flex>\n    </v-layout>\n    \n  </v-container>\n</template>\n\n\n<style>\n</style>\n\n <script>\nimport appData from \"../modules/appData\";\nimport appUtils from \"../modules/appUtils\";\nimport LoginController from \"../modules/loginController\";\nimport VueQrcode from \"vue-qrcode\";\n//var base32 = require('base32');\nvar base32 = require(\"thirty-two\");\n//import HelloWorld from \"../components/HelloWorld.vue\";\n//import FloatingMenu from \"../components/FloatingMenu.vue\"\n\nexport default {\n  name: \"OTP\",\n  components: {\n    VueQrcode,\n    //FloatingMenu\n  },\n  data: () => ({\n    resetOTP: false,\n    messageText: \"\",\n    msgType: \"info\",\n    alertText: \"\",\n    alertType: \"error\",\n    valid: false,\n    e1: true,\n    e2: true,\n    otpcode: \"\",\n    passwordCheck: \"\",\n    otpURL: \"otp://\",\n    token: \"\",\n    passwordRules: [(v) => !!v || \"Code is required\"],\n    appData,\n  }),\n  methods: {\n    resetPasswordClick: function () {\n      this.resetOTP = true;\n      this.messageText = this.$t(\"Reset OTP Code?\");\n    },\n    resetPasswordSubmit: function () {\n      console.log(\"resetPasswordSubmit..\");\n      let params = {\n        loginToken: appData.loginToken,\n        action: \"5\",\n      };\n      appUtils\n        .get({\n          url: \"resetPasscode\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n\n          if (response.data.status == 1 || response.data.status == 2) {\n            appData.clearValidate();\n            this.$router.push(\"/Splash\");\n            return;\n          } else {\n            this.resetPassword = false;\n            this.setPageParams();\n            return;\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n    },\n    submitSetPassword: function () {\n      this.messageText = this.$t(\"Setting password\");\n      let params = {\n        loginToken: appData.loginToken,\n        passcode: this.password,\n      };\n      appUtils\n        .get({\n          url: \"setPasscode\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n\n          if (response.data.status == 1) {\n            console.log(\"Password set!\");\n            appData.passwordValidated = true;\n            LoginController.instance.nuboAuthProcess(this);\n          } else if (response.data.status == 0) {\n            this.messageText = this.$t(\"Invalid password\");\n            this.msgType = \"error\";\n            console.log(\"Error\");\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n    },\n    cancelOTP: function () {\n      appData.isCancelOTP = true;\n      appData.authUserPreference =\n        LoginController.LoginConstants.AUTH_PREFERENCE_UNKNOWN;\n      LoginController.instance.nuboAuthProcess(this);\n    },\n    scanComplete: function () {\n      this.messageText = this.$t(\"Setting OTP key..\");\n      let params = {\n        loginToken: appData.loginToken,\n        OTPCode: this.token,\n      };\n      console.log(`Params: ${JSON.stringify(params, null, 2)}`);\n      appUtils\n        .get({\n          url: \"checkOtpAuth\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n\n          if (response.data.status == 1) {\n            console.log(\"OTP set!\");\n            appData.canSetOTPToken = false;\n            this.setPageParams();\n          } else if (response.data.status == 0) {\n            this.messageText = this.$t(\"Error\");\n            this.msgType = \"error\";\n            console.log(\"Error\");\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n    },\n    submit: function () {\n      let isValid = this.$refs.form.validate();\n      //console.log(`isValid: ${isValid}`);\n      if (!isValid) {\n        return;\n      }\n      this.messageText = this.$t(\"Checking OTP Code..\");\n      let params = {\n        loginToken: appData.loginToken,\n        OTPCode: this.otpcode,\n      };\n      console.log(`Params: ${JSON.stringify(params, null, 2)}`);\n      appUtils\n        .get({\n          url: \"checkOtpAuth\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.setPageParams();\n          if (response.data.status == 1) {\n            console.log(\"OTP validated!\");\n            appData.biometricValidated = true;\n            appData.authUserPreference =\n              LoginController.LoginConstants.AUTH_PREFERENCE_OTP;\n            appData.commit();\n            LoginController.instance.nuboAuthProcess(this);\n          } else if (response.data.status == 32) {\n            this.alertText = this.$t(\"Invalid OTP Code\");\n            this.alertType = \"error\";\n          } else {\n            this.alertText = this.$t(\"Error: \" + response.data.message);\n            this.alertType = \"error\";\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n    },\n    setPageParams: function() {\n      //this.resetOTP = appData.passcodeActivationRequired;\n      if (appData.canSetOTPToken) {\n        this.messageText = this.$t(\"Please scan the below QR code\");\n\n        if (!this.token) {\n          var array = new Uint8Array(32);\n          window.crypto.getRandomValues(array);\n\n          this.token = `${base32.encode(array)}`;\n        }\n        this.otpURL = `otpauth://totp/nubo:${appData.email}?secret=${this.token}&issuer=Nubo`;\n        console.log(`this.otpURL: ${this.otpURL}`);\n      } else {\n        this.messageText = this.$t(\"Please enter your one-time password found in the TOTP app in your mobile device.\");\n        this.passwordRules = [\n          (v) => !!v || this.$t(\"OTP code is required\"),\n          (v) => /^[0-9]+$/.test(v) || this.$t(\"Please enter only digits\"),\n        ];\n      }\n    },\n  },\n  watch: {},\n  created: function () {\n    this.setPageParams();\n    \n    //this.$emit(\"updatePage\", \"Login\");\n  },\n  mounted: function () {\n    let otpField = this.$refs[\"otpField\"];\n    if (otpField) {\n      otpField.$refs.input.focus();\n      otpField.$refs.input.setAttribute(\"autocomplete\", \"none\");\n    }\n    //this.$refs[\"form\"].$refs.form.setAttribute(\"autocomplete\", \"false\");\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OTP.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OTP.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OTP.vue?vue&type=template&id=ffb11cc6&\"\nimport script from \"./OTP.vue?vue&type=script&lang=js&\"\nexport * from \"./OTP.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBanner } from 'vuetify/lib/components/VBanner';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAlert,VBanner,VBtn,VCard,VCardText,VContainer,VFlex,VForm,VImg,VLayout,VRow,VTextField,VToolbar})\n",";(function (root, factory, undef) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"), require(\"./sha1\"), require(\"./hmac\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\", \"./sha1\", \"./hmac\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.HmacSHA1;\n\n}));","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar aCallable = require('../internals/a-callable');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar internalSort = require('../internals/array-sort');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar Uint16Array = global.Uint16Array;\nvar nativeSort = Uint16Array && Uint16Array.prototype.sort;\n\n// WebKit\nvar ACCEPT_INCORRECT_ARGUMENTS = !!nativeSort && !fails(function () {\n  var array = new Uint16Array(2);\n  array.sort(null);\n  array.sort({});\n});\n\nvar STABLE_SORT = !!nativeSort && !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 74;\n  if (FF) return FF < 67;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 602;\n\n  var array = new Uint16Array(516);\n  var expected = Array(516);\n  var index, mod;\n\n  for (index = 0; index < 516; index++) {\n    mod = index % 4;\n    array[index] = 515 - index;\n    expected[index] = index - 2 * mod + 3;\n  }\n\n  array.sort(function (a, b) {\n    return (a / 4 | 0) - (b / 4 | 0);\n  });\n\n  for (index = 0; index < 516; index++) {\n    if (array[index] !== expected[index]) return true;\n  }\n});\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (y !== y) return -1;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (x !== x) return 1;\n    if (x === 0 && y === 0) return 1 / x > 0 && 1 / y < 0 ? 1 : -1;\n    return x > y;\n  };\n};\n\n// `%TypedArray%.prototype.sort` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\nexportTypedArrayMethod('sort', function sort(comparefn) {\n  var array = this;\n  if (comparefn !== undefined) aCallable(comparefn);\n  if (STABLE_SORT) return nativeSort.call(array, comparefn);\n\n  aTypedArray(array);\n  var arrayLength = lengthOfArrayLike(array);\n  var items = Array(arrayLength);\n  var index;\n\n  for (index = 0; index < arrayLength; index++) {\n    items[index] = array[index];\n  }\n\n  items = internalSort(array, getSortCompare(comparefn));\n\n  for (index = 0; index < arrayLength; index++) {\n    array[index] = items[index];\n  }\n\n  return array;\n}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $reduceRight = require('../internals/array-reduce').right;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.reduceRicht` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduceright\nexportTypedArrayMethod('reduceRight', function reduceRight(callbackfn /* , initialValue */) {\n  return $reduceRight(aTypedArray(this), callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n});\n","var BufferUtil = require('../utils/buffer')\nvar GF = require('./galois-field')\n\n/**\n * Multiplies two polynomials inside Galois Field\n *\n * @param  {Buffer} p1 Polynomial\n * @param  {Buffer} p2 Polynomial\n * @return {Buffer}    Product of p1 and p2\n */\nexports.mul = function mul (p1, p2) {\n  var coeff = BufferUtil.alloc(p1.length + p2.length - 1)\n\n  for (var i = 0; i < p1.length; i++) {\n    for (var j = 0; j < p2.length; j++) {\n      coeff[i + j] ^= GF.mul(p1[i], p2[j])\n    }\n  }\n\n  return coeff\n}\n\n/**\n * Calculate the remainder of polynomials division\n *\n * @param  {Buffer} divident Polynomial\n * @param  {Buffer} divisor  Polynomial\n * @return {Buffer}          Remainder\n */\nexports.mod = function mod (divident, divisor) {\n  var result = BufferUtil.from(divident)\n\n  while ((result.length - divisor.length) >= 0) {\n    var coeff = result[0]\n\n    for (var i = 0; i < divisor.length; i++) {\n      result[i] ^= GF.mul(divisor[i], coeff)\n    }\n\n    // remove all zeros from buffer head\n    var offset = 0\n    while (offset < result.length && result[offset] === 0) offset++\n    result = result.slice(offset)\n  }\n\n  return result\n}\n\n/**\n * Generate an irreducible generator polynomial of specified degree\n * (used by Reed-Solomon encoder)\n *\n * @param  {Number} degree Degree of the generator polynomial\n * @return {Buffer}        Buffer containing polynomial coefficients\n */\nexports.generateECPolynomial = function generateECPolynomial (degree) {\n  var poly = BufferUtil.from([1])\n  for (var i = 0; i < degree; i++) {\n    poly = exports.mul(poly, [1, GF.exp(i)])\n  }\n\n  return poly\n}\n","/**\n * Check if QR Code version is valid\n *\n * @param  {Number}  version QR Code version\n * @return {Boolean}         true if valid version, false otherwise\n */\nexports.isValid = function isValid (version) {\n  return !isNaN(version) && version >= 1 && version <= 40\n}\n","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar typedArraySpeciesConstructor = require('../internals/typed-array-species-constructor');\nvar fails = require('../internals/fails');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $slice = [].slice;\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-typed-arrays -- required for testing\n  new Int8Array(1).slice();\n});\n\n// `%TypedArray%.prototype.slice` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.slice\nexportTypedArrayMethod('slice', function slice(start, end) {\n  var list = $slice.call(aTypedArray(this), start, end);\n  var C = typedArraySpeciesConstructor(this);\n  var index = 0;\n  var length = list.length;\n  var result = new C(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n}, FORCED);\n","var $ = require('../internals/export');\nvar is = require('../internals/same-value');\n\n// `Object.is` method\n// https://tc39.es/ecma262/#sec-object.is\n$({ target: 'Object', stat: true }, {\n  is: is\n});\n","var Mode = require('./mode')\nvar Utils = require('./utils')\n\nfunction KanjiData (data) {\n  this.mode = Mode.KANJI\n  this.data = data\n}\n\nKanjiData.getBitsLength = function getBitsLength (length) {\n  return length * 13\n}\n\nKanjiData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nKanjiData.prototype.getBitsLength = function getBitsLength () {\n  return KanjiData.getBitsLength(this.data.length)\n}\n\nKanjiData.prototype.write = function (bitBuffer) {\n  var i\n\n  // In the Shift JIS system, Kanji characters are represented by a two byte combination.\n  // These byte values are shifted from the JIS X 0208 values.\n  // JIS X 0208 gives details of the shift coded representation.\n  for (i = 0; i < this.data.length; i++) {\n    var value = Utils.toSJIS(this.data[i])\n\n    // For characters with Shift JIS values from 0x8140 to 0x9FFC:\n    if (value >= 0x8140 && value <= 0x9FFC) {\n      // Subtract 0x8140 from Shift JIS value\n      value -= 0x8140\n\n    // For characters with Shift JIS values from 0xE040 to 0xEBBF\n    } else if (value >= 0xE040 && value <= 0xEBBF) {\n      // Subtract 0xC140 from Shift JIS value\n      value -= 0xC140\n    } else {\n      throw new Error(\n        'Invalid SJIS character: ' + this.data[i] + '\\n' +\n        'Make sure your charset is UTF-8')\n    }\n\n    // Multiply most significant byte of result by 0xC0\n    // and add least significant byte to product\n    value = (((value >>> 8) & 0xff) * 0xC0) + (value & 0xff)\n\n    // Convert result to a 13-bit binary string\n    bitBuffer.put(value, 13)\n  }\n}\n\nmodule.exports = KanjiData\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $lastIndexOf = require('../internals/array-last-index-of');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.lastIndexOf` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.lastindexof\n// eslint-disable-next-line no-unused-vars -- required for `.length`\nexportTypedArrayMethod('lastIndexOf', function lastIndexOf(searchElement /* , fromIndex */) {\n  return $lastIndexOf.apply(aTypedArray(this), arguments);\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"bg\",attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"flex\":\"\",\"align-center\":\"\",\"justify-center\":\"\",\"color\":\"bg\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm4\":\"\",\"elevation-0\":\"\",\"color\":\"bg\"}},[_c('v-card',{attrs:{\"color\":\"bg\"}},[_c('v-card-text',{staticClass:\"pt-4\"},[_c('v-toolbar',{staticStyle:{\"box-shadow\":\"none\"},attrs:{\"color\":\"bg\",\"elevation-0\":\"\"}},[_c('v-img',{staticClass:\"mx-auto\",attrs:{\"max-height\":\"50\",\"max-width\":\"100\",\"src\":require('../assets/logo.png')}})],1),_c('div',{staticClass:\"d-flex justify-center mb-6\"},[_c('span',{staticClass:\"text-h5\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"Remote Desktop Signup\"))+\" \")])]),_c('div',{staticClass:\"d-flex justify-center mb-6 text-subtitle-1\"},[_vm._v(\" \"+_vm._s(_vm.messageText)+\" \")]),_c('div',[_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('First name'),\"rules\":_vm.reqRule,\"required\":\"\"},model:{value:(_vm.firstName),callback:function ($$v) {_vm.firstName=$$v},expression:\"firstName\"}}),_c('v-text-field',{attrs:{\"label\":_vm.$t('Last name'),\"rules\":_vm.reqRule,\"required\":\"\"},model:{value:(_vm.lastName),callback:function ($$v) {_vm.lastName=$$v},expression:\"lastName\"}}),_c('v-text-field',{attrs:{\"label\":_vm.$t('Enter your email address'),\"rules\":_vm.emailRules,\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('v-layout',{attrs:{\"justify-space-between\":\"\"}},[_c('v-btn',{class:{\n                    'blue darken-4 white--text': _vm.valid,\n                    disabled: !_vm.valid,\n                  },attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(_vm._s(_vm.$t(\"Activate\")))]),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.cancelClick}},[_vm._v(_vm._s(_vm.$t(\"Cancel\")))])],1)],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid fill-height class=\"bg\">\n    <v-layout flex align-center justify-center color=\"bg\">\n      <v-flex xs12 sm4 elevation-0 color=\"bg\">\n        <v-card color=\"bg\">\n          <v-card-text class=\"pt-4\">\n            <v-toolbar color=\"bg\" elevation-0 style=\"box-shadow: none\">\n              <v-img\n                class=\"mx-auto\"\n                max-height=\"50\"\n                max-width=\"100\"\n                :src=\"require('../assets/logo.png')\"\n              ></v-img>\n            </v-toolbar>\n            <div class=\"d-flex justify-center mb-6\">\n             \n                <span class=\"text-h5\">\n                {{ $t(\"Remote Desktop Signup\") }}\n                </span>\n             \n            </div>\n            <div class=\"d-flex justify-center mb-6 text-subtitle-1\"  >\n              {{ messageText }}\n            </div>\n            <div>\n              <v-form v-model=\"valid\" ref=\"form\" >\n                \n                <v-text-field \n                  :label=\"$t('First name')\"\n                  v-model=\"firstName\"\n                  :rules=\"reqRule\"\n                  required\n                />\n                <v-text-field \n                  :label=\"$t('Last name')\"\n                  v-model=\"lastName\"\n                  :rules=\"reqRule\"\n                  required\n                />\n                <v-text-field\n                  \n                  :label=\"$t('Enter your email address')\"\n                  v-model=\"email\"\n                  :rules=\"emailRules\"\n                  required\n                ></v-text-field>\n                \n                \n                <v-layout justify-space-between >\n                  <v-btn\n                    @click=\"submit\"\n                    color=\"primary\"\n                    :class=\"{\n                      'blue darken-4 white--text': valid,\n                      disabled: !valid,\n                    }\"\n                    >{{ $t(\"Activate\") }}</v-btn\n                  >\n                  <a href=\"#\" @click=\"cancelClick\">{{\n                    $t(\"Cancel\")\n                  }}</a>\n                </v-layout>\n                \n              </v-form>\n              \n            </div>\n          </v-card-text>\n        </v-card>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n\n<style>\n</style>\n\n <script>\nimport appData from \"../modules/appData\";\nimport appUtils from \"../modules/appUtils\";\n//import LoginController from \"../modules/loginController\"\nimport HmacSHA1 from 'crypto-js/hmac-sha1';\nimport Hex from 'crypto-js/enc-hex'\n\n\nexport default {\n  name: \"Signup\",\n  data: () => ({\n    messageText: \"\",\n    msgType: \"info\",\n    valid: false,\n    firstName: \"\",\n    lastName: \"\",\n    e1: true,\n    e2: true,\n    email: \"\",\n    emailRules: [\n      (v) => !!v || \"Email is required\",\n      (v) =>\n        /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,10})+$/.test(v) ||\n        \"Email must be valid\",\n    ],\n    reqRule: [\n      (v) => !!v || \"Required\",\n    ],\n    activate_text: \"\",\n    appData,\n  }),\n  methods: {\n    cancelClick: function() {\n      this.$router.push(\"/Splash\");\n    },\n    submit: function () {\n      let isValid = this.$refs.form.validate();\n      console.log(`isValid: ${isValid}`);\n      if (!isValid) {\n        return;\n      }\n      console.log(\"submit\");\n      this.messageText = this.$t(\"Signup in progress..\");\n      this.msgType = \"info\";\n\n      let plain = this.email + '_' + appData.deviceid;\n      //et signature = CryptoJS.HmacSHA1(\n      let signature = Hex.stringify(HmacSHA1(\n        plain,\n        \"1981abe0d32d93967648319b013b03f05a119c9f619cc98f\"\n      ));\n      console.log(\"signature=\" + signature);\n\n      let params = {\n        deviceid: appData.deviceid,\n        email: this.email,\n        signature: signature,\n        regid: \"none\",\n        first: this.firstName,\n        last: this.lastName,\n        title: 'NA',\n        deviceType: appData.deviceType,\n        deviceName: appData.deviceName\n      };\n      \n      \n        appUtils\n          .get({\n            url: \"activate\",\n            params,\n          })\n          .then((response) => {\n            console.log(response.data);\n            \n            if (response.data.status == 0) {\n              appData.activationkey = response.data.activationKey;\n              appData.email = this.email;\n              appData.firstname = this.firstName;\n              appData.lastname = this.lastName;\n              appData.validationWait = true;\n              this.messageText = this.$t(\"A verification message has been sent to your inbox. Please click the link to gain access to your remote desktop.\");\n              appData.commit();\n              this.$router.push(\"/Splash\");\n            } else {\n              this.messageText = this.$t(\"Sign up error: \")+response.data.message;\n              this.msgType = \"error\";\n              console.log(\"Error\");\n            } \n          })\n          .catch((error) => console.log(error))\n          .finally(() => (this.loading = false));\n      \n      /*} else {\n        console.log(\"Submit. form is not valid..\");\n      }*/\n    },\n  },\n  watch: {\n    \n  },\n  created: function () {\n\n    this.activate_text  = this.$t(\"Sign up to gain access to your remote desktop.\");\n    this.email = appData.email;\n    this.firstName = appData.firstname;\n    this.lastName = appData.lastname;\n    this.messageText = this.activate_text;\n    \n    this.emailRules = [\n      (v) => !!v || this.$t(\"Email is required\"),\n      (v) =>\n        /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,10})+$/.test(v) ||\n        this.$t(\"Email must be valid\"),\n    ];\n    //this.$emit(\"updatePage\", \"Login\");\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Signup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Signup.vue?vue&type=template&id=9f3649a6&\"\nimport script from \"./Signup.vue?vue&type=script&lang=js&\"\nexport * from \"./Signup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardText,VContainer,VFlex,VForm,VImg,VLayout,VTextField,VToolbar})\n","var ECLevel = require('./error-correction-level')\r\n\r\nvar EC_BLOCKS_TABLE = [\r\n// L  M  Q  H\r\n  1, 1, 1, 1,\r\n  1, 1, 1, 1,\r\n  1, 1, 2, 2,\r\n  1, 2, 2, 4,\r\n  1, 2, 4, 4,\r\n  2, 4, 4, 4,\r\n  2, 4, 6, 5,\r\n  2, 4, 6, 6,\r\n  2, 5, 8, 8,\r\n  4, 5, 8, 8,\r\n  4, 5, 8, 11,\r\n  4, 8, 10, 11,\r\n  4, 9, 12, 16,\r\n  4, 9, 16, 16,\r\n  6, 10, 12, 18,\r\n  6, 10, 17, 16,\r\n  6, 11, 16, 19,\r\n  6, 13, 18, 21,\r\n  7, 14, 21, 25,\r\n  8, 16, 20, 25,\r\n  8, 17, 23, 25,\r\n  9, 17, 23, 34,\r\n  9, 18, 25, 30,\r\n  10, 20, 27, 32,\r\n  12, 21, 29, 35,\r\n  12, 23, 34, 37,\r\n  12, 25, 34, 40,\r\n  13, 26, 35, 42,\r\n  14, 28, 38, 45,\r\n  15, 29, 40, 48,\r\n  16, 31, 43, 51,\r\n  17, 33, 45, 54,\r\n  18, 35, 48, 57,\r\n  19, 37, 51, 60,\r\n  19, 38, 53, 63,\r\n  20, 40, 56, 66,\r\n  21, 43, 59, 70,\r\n  22, 45, 62, 74,\r\n  24, 47, 65, 77,\r\n  25, 49, 68, 81\r\n]\r\n\r\nvar EC_CODEWORDS_TABLE = [\r\n// L  M  Q  H\r\n  7, 10, 13, 17,\r\n  10, 16, 22, 28,\r\n  15, 26, 36, 44,\r\n  20, 36, 52, 64,\r\n  26, 48, 72, 88,\r\n  36, 64, 96, 112,\r\n  40, 72, 108, 130,\r\n  48, 88, 132, 156,\r\n  60, 110, 160, 192,\r\n  72, 130, 192, 224,\r\n  80, 150, 224, 264,\r\n  96, 176, 260, 308,\r\n  104, 198, 288, 352,\r\n  120, 216, 320, 384,\r\n  132, 240, 360, 432,\r\n  144, 280, 408, 480,\r\n  168, 308, 448, 532,\r\n  180, 338, 504, 588,\r\n  196, 364, 546, 650,\r\n  224, 416, 600, 700,\r\n  224, 442, 644, 750,\r\n  252, 476, 690, 816,\r\n  270, 504, 750, 900,\r\n  300, 560, 810, 960,\r\n  312, 588, 870, 1050,\r\n  336, 644, 952, 1110,\r\n  360, 700, 1020, 1200,\r\n  390, 728, 1050, 1260,\r\n  420, 784, 1140, 1350,\r\n  450, 812, 1200, 1440,\r\n  480, 868, 1290, 1530,\r\n  510, 924, 1350, 1620,\r\n  540, 980, 1440, 1710,\r\n  570, 1036, 1530, 1800,\r\n  570, 1064, 1590, 1890,\r\n  600, 1120, 1680, 1980,\r\n  630, 1204, 1770, 2100,\r\n  660, 1260, 1860, 2220,\r\n  720, 1316, 1950, 2310,\r\n  750, 1372, 2040, 2430\r\n]\r\n\r\n/**\r\n * Returns the number of error correction block that the QR Code should contain\r\n * for the specified version and error correction level.\r\n *\r\n * @param  {Number} version              QR Code version\r\n * @param  {Number} errorCorrectionLevel Error correction level\r\n * @return {Number}                      Number of error correction blocks\r\n */\r\nexports.getBlocksCount = function getBlocksCount (version, errorCorrectionLevel) {\r\n  switch (errorCorrectionLevel) {\r\n    case ECLevel.L:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 0]\r\n    case ECLevel.M:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 1]\r\n    case ECLevel.Q:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 2]\r\n    case ECLevel.H:\r\n      return EC_BLOCKS_TABLE[(version - 1) * 4 + 3]\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the number of error correction codewords to use for the specified\r\n * version and error correction level.\r\n *\r\n * @param  {Number} version              QR Code version\r\n * @param  {Number} errorCorrectionLevel Error correction level\r\n * @return {Number}                      Number of error correction codewords\r\n */\r\nexports.getTotalCodewordsCount = function getTotalCodewordsCount (version, errorCorrectionLevel) {\r\n  switch (errorCorrectionLevel) {\r\n    case ECLevel.L:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 0]\r\n    case ECLevel.M:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 1]\r\n    case ECLevel.Q:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 2]\r\n    case ECLevel.H:\r\n      return EC_CODEWORDS_TABLE[(version - 1) * 4 + 3]\r\n    default:\r\n      return undefined\r\n  }\r\n}\r\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findIndex = require('../internals/array-iteration').findIndex;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findindex\nexportTypedArrayMethod('findIndex', function findIndex(predicate /* , thisArg */) {\n  return $findIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toOffset = require('../internals/to-offset');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-typed-arrays -- required for testing\n  new Int8Array(1).set({});\n});\n\n// `%TypedArray%.prototype.set` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.set\nexportTypedArrayMethod('set', function set(arrayLike /* , offset */) {\n  aTypedArray(this);\n  var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);\n  var length = this.length;\n  var src = toObject(arrayLike);\n  var len = lengthOfArrayLike(src);\n  var index = 0;\n  if (len + offset > length) throw RangeError('Wrong length');\n  while (index < len) this[offset + index] = src[index++];\n}, FORCED);\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $map = require('../internals/array-iteration').map;\nvar typedArraySpeciesConstructor = require('../internals/typed-array-species-constructor');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.map` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.map\nexportTypedArrayMethod('map', function map(mapfn /* , thisArg */) {\n  return $map(aTypedArray(this), mapfn, arguments.length > 1 ? arguments[1] : undefined, function (O, length) {\n    return new (typedArraySpeciesConstructor(O))(length);\n  });\n});\n","var Utils = require('./utils')\n\nfunction getColorAttrib (color, attrib) {\n  var alpha = color.a / 255\n  var str = attrib + '=\"' + color.hex + '\"'\n\n  return alpha < 1\n    ? str + ' ' + attrib + '-opacity=\"' + alpha.toFixed(2).slice(1) + '\"'\n    : str\n}\n\nfunction svgCmd (cmd, x, y) {\n  var str = cmd + x\n  if (typeof y !== 'undefined') str += ' ' + y\n\n  return str\n}\n\nfunction qrToPath (data, size, margin) {\n  var path = ''\n  var moveBy = 0\n  var newRow = false\n  var lineLength = 0\n\n  for (var i = 0; i < data.length; i++) {\n    var col = Math.floor(i % size)\n    var row = Math.floor(i / size)\n\n    if (!col && !newRow) newRow = true\n\n    if (data[i]) {\n      lineLength++\n\n      if (!(i > 0 && col > 0 && data[i - 1])) {\n        path += newRow\n          ? svgCmd('M', col + margin, 0.5 + row + margin)\n          : svgCmd('m', moveBy, 0)\n\n        moveBy = 0\n        newRow = false\n      }\n\n      if (!(col + 1 < size && data[i + 1])) {\n        path += svgCmd('h', lineLength)\n        lineLength = 0\n      }\n    } else {\n      moveBy++\n    }\n  }\n\n  return path\n}\n\nexports.render = function render (qrData, options, cb) {\n  var opts = Utils.getOptions(options)\n  var size = qrData.modules.size\n  var data = qrData.modules.data\n  var qrcodesize = size + opts.margin * 2\n\n  var bg = !opts.color.light.a\n    ? ''\n    : '<path ' + getColorAttrib(opts.color.light, 'fill') +\n      ' d=\"M0 0h' + qrcodesize + 'v' + qrcodesize + 'H0z\"/>'\n\n  var path =\n    '<path ' + getColorAttrib(opts.color.dark, 'stroke') +\n    ' d=\"' + qrToPath(data, size, opts.margin) + '\"/>'\n\n  var viewBox = 'viewBox=\"' + '0 0 ' + qrcodesize + ' ' + qrcodesize + '\"'\n\n  var width = !opts.width ? '' : 'width=\"' + opts.width + '\" height=\"' + opts.width + '\" '\n\n  var svgTag = '<svg xmlns=\"http://www.w3.org/2000/svg\" ' + width + viewBox + ' shape-rendering=\"crispEdges\">' + bg + path + '</svg>\\n'\n\n  if (typeof cb === 'function') {\n    cb(null, svgTag)\n  }\n\n  return svgTag\n}\n","var Utils = require('./utils')\n\nfunction clearCanvas (ctx, canvas, size) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n  if (!canvas.style) canvas.style = {}\n  canvas.height = size\n  canvas.width = size\n  canvas.style.height = size + 'px'\n  canvas.style.width = size + 'px'\n}\n\nfunction getCanvasElement () {\n  try {\n    return document.createElement('canvas')\n  } catch (e) {\n    throw new Error('You need to specify a canvas element')\n  }\n}\n\nexports.render = function render (qrData, canvas, options) {\n  var opts = options\n  var canvasEl = canvas\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas\n    canvas = undefined\n  }\n\n  if (!canvas) {\n    canvasEl = getCanvasElement()\n  }\n\n  opts = Utils.getOptions(opts)\n  var size = Utils.getImageWidth(qrData.modules.size, opts)\n\n  var ctx = canvasEl.getContext('2d')\n  var image = ctx.createImageData(size, size)\n  Utils.qrToImageData(image.data, qrData, opts)\n\n  clearCanvas(ctx, canvasEl, size)\n  ctx.putImageData(image, 0, 0)\n\n  return canvasEl\n}\n\nexports.renderToDataURL = function renderToDataURL (qrData, canvas, options) {\n  var opts = options\n\n  if (typeof opts === 'undefined' && (!canvas || !canvas.getContext)) {\n    opts = canvas\n    canvas = undefined\n  }\n\n  if (!opts) opts = {}\n\n  var canvasEl = exports.render(qrData, canvas, opts)\n\n  var type = opts.type || 'image/png'\n  var rendererOpts = opts.rendererOpts || {}\n\n  return canvasEl.toDataURL(type, rendererOpts.quality)\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Client.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"bg\",attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"flex\":\"\",\"align-center\":\"\",\"justify-center\":\"\",\"color\":\"bg\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm4\":\"\",\"elevation-0\":\"\",\"color\":\"bg\"}},[_c('v-card',{attrs:{\"color\":\"bg\"}},[_c('v-card-text',{staticClass:\"pt-4\"},[_c('v-toolbar',{staticStyle:{\"box-shadow\":\"none\"},attrs:{\"color\":\"bg\",\"elevation-0\":\"\"}},[_c('v-img',{staticClass:\"mx-auto\",attrs:{\"max-height\":\"50\",\"max-width\":\"100\",\"src\":require('../assets/logo.png')}})],1),_c('div',{staticClass:\"d-flex justify-center mb-6\"},[_c('v-banner',{staticClass:\"text-h5\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"Remote Desktop\"))+\" \")])],1),_c('div',{staticClass:\"d-flex justify-center mb-6 text-subtitle-1\"},[_vm._v(\" \"+_vm._s(_vm.messageText)+\" \")]),(_vm.alertText != '')?_c('div',[_c('v-alert',{attrs:{\"type\":_vm.alertType}},[_vm._v(\" \"+_vm._s(_vm.alertText)+\" \")])],1):_vm._e(),_c('div',[_c('v-form',{ref:\"form\",attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[(!_vm.resetPassword)?_c('v-text-field',{ref:\"passwordField\",attrs:{\"label\":_vm.$t('Enter your password'),\"min\":\"8\",\"append-icon\":_vm.e1 ? 'mdi-eye ' : 'mdi-eye-off',\"append-icon-cb\":function () { return (_vm.e1 = !_vm.e1); },\"type\":_vm.e1 ? 'password' : 'text',\"rules\":_vm.passwordRules,\"counter\":\"\",\"required\":\"\",\"autocomplete\":\"chrome-off\"},on:{\"click:append\":function () { return (_vm.e1 = !_vm.e1); }},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}):_vm._e(),(!_vm.resetPassword && _vm.setPassword)?_c('v-text-field',{attrs:{\"label\":_vm.$t('Re-enter your password'),\"min\":\"8\",\"append-icon\":_vm.e2 ? 'mdi-eye' : 'mdi-eye-off',\"append-icon-cb\":function () { return (_vm.e2 = !_vm.e2); },\"type\":_vm.e2 ? 'password' : 'text',\"rules\":_vm.checkPasswordRules,\"counter\":\"\",\"required\":\"\",\"autocomplete\":\"chrome-off\"},on:{\"click:append\":function () { return (_vm.e2 = !_vm.e2); }},model:{value:(_vm.passwordCheck),callback:function ($$v) {_vm.passwordCheck=$$v},expression:\"passwordCheck\"}}):_vm._e(),(!_vm.resetPassword && _vm.setPassword)?_c('div',[_vm._v(\" Required:\"),_c('br'),_vm._v(\" \"+_vm._s(_vm.$t(\"Minimum characters\",{minChars: _vm.appData.passcodeminchars}))),_c('br'),(_vm.appData.passcodetype == 1)?_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(\"- Both upper-case and lower-case letters.\"))),_c('br'),_vm._v(\" \"+_vm._s(_vm.$t(\"- One or more numerical digits.\"))+\" \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.$t(\"- One or more special characters.\"))),_c('br')]):_vm._e(),_c('br')]):_vm._e(),(!_vm.resetPassword)?_c('v-layout',{attrs:{\"justify-space-between\":\"\"}},[_c('v-btn',{class:{\n                      'blue darken-4 white--text': _vm.valid,\n                      disabled: !_vm.valid,\n                    },attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(_vm._s((!_vm.setPassword ? _vm.$t(\"Login\") : _vm.$t(\"Set Password\"))))]),(!_vm.resetPassword && !_vm.setPassword)?_c('a',{attrs:{\"href\":\"#/Password\"},on:{\"click\":_vm.resetPasswordClick}},[_vm._v(_vm._s(_vm.$t(\"Forgot Password?\")))]):_vm._e()],1):_vm._e(),(_vm.resetPassword)?_c('v-layout',[_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"primary\"},on:{\"click\":_vm.resetPasswordSubmit}},[_vm._v(_vm._s(_vm.$t(\"Reset Password\")))]),_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"warning\"},on:{\"click\":_vm.resetPasswordCancel}},[_vm._v(_vm._s(_vm.$t(\"Cancel\")))])],1):_vm._e()],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid fill-height class=\"bg\">\n    <v-layout flex align-center justify-center color=\"bg\">\n      <v-flex xs12 sm4 elevation-0 color=\"bg\">\n        <v-card color=\"bg\">\n          <v-card-text class=\"pt-4\">\n            <v-toolbar color=\"bg\" elevation-0 style=\"box-shadow: none\">\n              <v-img\n                class=\"mx-auto\"\n                max-height=\"50\"\n                max-width=\"100\"\n                :src=\"require('../assets/logo.png')\"\n              ></v-img>\n            </v-toolbar>\n            <div class=\"d-flex justify-center mb-6\">\n              <v-banner class=\"text-h5\">\n                {{ $t(\"Remote Desktop\") }}\n              </v-banner>\n            </div>\n            <div class=\"d-flex justify-center mb-6 text-subtitle-1\">\n              {{ messageText }}\n            </div>\n            <div v-if=\"alertText != ''\">\n              <v-alert :type=\"alertType\">\n                {{ alertText }}\n              </v-alert>\n            </div>\n            <div>\n              <v-form v-model=\"valid\" ref=\"form\"\n                autocomplete=\"off\"\n              >\n                <v-text-field\n                  v-if=\"!resetPassword\"\n                  :label=\"$t('Enter your password')\"\n                  v-model=\"password\"\n                  min=\"8\"\n                  :append-icon=\"e1 ? 'mdi-eye ' : 'mdi-eye-off'\"\n                  :append-icon-cb=\"() => (e1 = !e1)\"\n                  @click:append=\"() => (e1 = !e1)\"\n                  :type=\"e1 ? 'password' : 'text'\"\n                  :rules=\"passwordRules\"\n                  counter\n                  required\n                  autocomplete=\"chrome-off\"\n                  ref=\"passwordField\"\n                ></v-text-field>\n                <v-text-field\n                  v-if=\"!resetPassword && setPassword\"\n                  :label=\"$t('Re-enter your password')\"\n                  v-model=\"passwordCheck\"\n                  min=\"8\"\n                  :append-icon=\"e2 ? 'mdi-eye' : 'mdi-eye-off'\"\n                  :append-icon-cb=\"() => (e2 = !e2)\"\n                  @click:append=\"() => (e2 = !e2)\"\n                  :type=\"e2 ? 'password' : 'text'\"\n                  :rules=\"checkPasswordRules\"\n                  counter\n                  required\n                  autocomplete=\"chrome-off\"\n                ></v-text-field>\n                <div v-if=\"!resetPassword && setPassword\">\n                  Required:<br/>\n{{$t(\"Minimum characters\",{minChars: appData.passcodeminchars})}}<br/>\n<span v-if=\"appData.passcodetype == 1\">\n{{$t(\"- Both upper-case and lower-case letters.\")}}<br/>\n{{$t(\"- One or more numerical digits.\")}} <br/>\n{{$t(\"- One or more special characters.\")}}<br/>\n</span>\n<br/>\n\n                </div>\n                <v-layout justify-space-between v-if=\"!resetPassword\">\n                  <v-btn\n                    @click=\"submit\"\n                    color=\"primary\"\n                    :class=\"{\n                      'blue darken-4 white--text': valid,\n                      disabled: !valid,\n                    }\"\n                    >{{ (!setPassword ? $t(\"Login\") : $t(\"Set Password\")) }}</v-btn\n                  >\n                  <a \n                  v-if=\"!resetPassword && !setPassword\"\n                  href=\"#/Password\" \n                  @click=\"resetPasswordClick\">{{\n                    $t(\"Forgot Password?\")\n                  }}</a>\n                </v-layout>\n                \n                <v-layout v-if=\"resetPassword\">\n                  <v-btn\n                    class=\"ma-4\"\n                    color=\"primary\"\n                    @click=\"resetPasswordSubmit\"\n                    >{{ $t(\"Reset Password\") }}</v-btn\n                  >\n                  <v-btn\n                    class=\"ma-4\"\n                    color=\"warning\"\n                    @click=\"resetPasswordCancel\"\n                    >{{ $t(\"Cancel\") }}</v-btn\n                  >\n                </v-layout>\n              </v-form>\n            </div>\n          </v-card-text>\n        </v-card>\n      </v-flex>\n    </v-layout>\n    <!--<v-banner v-else :sticky=\"sticky\" coloe=\"bg\">\n          A verification messaage has been sent to your email address.<br>\n          Please click the verification link in that email.\n\n          <template v-slot:actions>\n            <v-btn text color=\"deep-purple accent-4\"> Send email again </v-btn>\n          </template>\n        </v-banner>-->\n  </v-container>\n</template>\n\n\n<style>\n</style>\n\n <script>\nimport appData from \"../modules/appData\";\nimport appUtils from \"../modules/appUtils\";\nimport LoginController from '../modules/loginController';\n//import LoginController from \"../modules/loginController\"\n\nexport default {\n  name: \"Password\",\n  data: () => ({\n    resetPassword: false,\n    setPassword: false,\n    messageText: \"\",\n    alertText: \"\",\n    alertType: \"error\",\n    valid: false,\n    e1: true,\n    e2: true,\n    password: \"\",\n    passwordCheck: \"\",\n    passwordRules: [(v) => !!v || \"Password is required\"],\n    checkPasswordRules: [(v) => !!v || \"Password is required\"],\n    appData,\n  }),\n  methods: {\n    resetPasswordClick: function () {\n      this.resetPassword = true;\n      this.messageText = this.$t(\"Are you sure you want to reset your password?\");\n    },\n    resetPasswordCancel: function() {\n      this.resetPassword = false;\n      appData.isCancelPassword = true;\n      appData.authUserPreference = LoginController.LoginConstants.AUTH_PREFERENCE_UNKNOWN;\n      appData.commit();\n      LoginController.instance.nuboAuthProcess(this);\n    },\n    resetPasswordSubmit: function () {\n      console.log(\"resetPasswordSubmit..\");\n      let params = {\n        loginToken: appData.loginToken,\n      };\n      appUtils\n        .get({\n          url: \"resetPasscode\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n\n          if (response.data.status == 1 || response.data.status == 2) {\n            appData.clearValidate();\n            appData.authUserPreference = LoginController.LoginConstants.AUTH_PREFERENCE_PASSWORD;\n            appData.commit();\n            this.$router.push(\"/Splash\");\n            return;\n          } else {\n            this.resetPassword = false;\n            this.setPageParams();\n            return;\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n    },\n    submitSetPassword: function() {\n      this.alertText = this.$t(\"Setting password\");\n      this.alertType = \"info\";\n      let params = {\n        loginToken: appData.loginToken,\n        passcode: this.password,\n      };\n      appUtils\n        .get({\n          url: \"setPasscode\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.alertText = \"\";\n          if (response.data.status == 1) {\n            console.log(\"Password set!\");\n            appData.passwordValidated = true;\n            LoginController.instance.nuboAuthProcess(this);\n          } else if (response.data.status == 0) {\n            this.alertText = this.$t(\"Error\");\n            this.alertType = \"error\";\n            console.log(\"Error\");\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n    },\n    submit: function () {\n      let isValid = this.$refs.form.validate();\n      //console.log(`isValid: ${isValid}`);\n      if (!isValid) {\n        return;\n      }\n      if (this.setPassword) {\n        this.submitSetPassword();\n        return;\n      }\n      this.alertText = this.$t(\"Checking login information\");\n      this.alertType = \"info\";\n      //var url = mgmtURL + \"checkPasscode?loginToken=\" + encodeURIComponent(loginToken) + \"&passcode=\" + encodeURIComponent(enterPasscode);\n      let params = {\n        loginToken: appData.loginToken,\n        passcode: this.password,\n      };\n      appUtils\n        .get({\n          url: \"checkPasscode\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.alertText = \"\";\n          if (response.data.status == 1) {\n            console.log(\"Password checked!\");\n            appData.passwordValidated = true;\n            appData.authUserPreference = LoginController.LoginConstants.AUTH_PREFERENCE_PASSWORD;\n            appData.commit();\n            LoginController.instance.nuboAuthProcess(this);\n          } else if (response.data.status == 0) {\n            this.alertText = this.$t(\"Incorrect password\");\n            this.alertType = \"error\";\n            console.log(\"Error\");\n          } else {\n            // this is other error - most probably password locked. Go again to validate\n            this.$router.push(\"/Splash\");\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n    },\n    setPageParams() {\n      this.setPassword = appData.passcodeActivationRequired;\n      if (this.setPassword) {\n        this.messageText = this.$t('Create your password.');\n        this.passwordRules = [\n          (v) => !!v || this.$t(\"Password is required\"),\n          (v) => v.length >= appData.passcodeminchars || this.$t(\"Minimum characters\",{minChars: appData.passcodeminchars}),\n          (v) => {\n            if (appData.passcodetype == 1) {\n              let upper =  /[A-Z]+/.test(v);\n              let lower =  /[a-z]+/.test(v);\n              if (!upper || !lower) {\n                return this.$t(\"Required: both upper-case and lower-case letters\");\n              }\n              if (!/[0-9]+/.test(v)) {\n                return this.$t(\"Required: one or more numerical digits.\");\n              }\n              if (!/[$&+,:;=\\\\?@#|/'<>.^*_~{}()%!-]/.test(v)) {\n                return this.$t(\"Required: one or more special characters.\");\n              }\n              return true;\n            } else {\n              return true;\n            }\n          }\n        ];\n      } else {\n        this.messageText = this.$t('Enter your password.');\n        this.passwordRules = [(v) => !!v || this.$t(\"Password is required\")];\n      }\n\n      \n      this.checkPasswordRules = [\n        (v) => !!v || this.$t(\"Password is required\"),\n        (v) => v === this.password || this.$t(\"Passwords do not match.\"),\n      ];\n    }\n  },\n  watch: {},\n  created: function () {\n    this.setPageParams();\n    \n\n    //this.$emit(\"updatePage\", \"Login\");\n  },\n  mounted: function () {\n    this.$refs[\"passwordField\"].$refs.input.focus();\n    this.$refs[\"passwordField\"].$refs.input.setAttribute(\"autocomplete\",\"none\");\n    this.$refs[\"form\"].$refs.form.setAttribute(\"autocomplete\",\"false\");\n    \n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Password.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Password.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Password.vue?vue&type=template&id=4eb0bc64&\"\nimport script from \"./Password.vue?vue&type=script&lang=js&\"\nexport * from \"./Password.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBanner } from 'vuetify/lib/components/VBanner';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAlert,VBanner,VBtn,VCard,VCardText,VContainer,VFlex,VForm,VImg,VLayout,VTextField,VToolbar})\n","function hex2rgba (hex) {\n  if (typeof hex === 'number') {\n    hex = hex.toString()\n  }\n\n  if (typeof hex !== 'string') {\n    throw new Error('Color should be defined as hex string')\n  }\n\n  var hexCode = hex.slice().replace('#', '').split('')\n  if (hexCode.length < 3 || hexCode.length === 5 || hexCode.length > 8) {\n    throw new Error('Invalid hex color: ' + hex)\n  }\n\n  // Convert from short to long form (fff -> ffffff)\n  if (hexCode.length === 3 || hexCode.length === 4) {\n    hexCode = Array.prototype.concat.apply([], hexCode.map(function (c) {\n      return [c, c]\n    }))\n  }\n\n  // Add default alpha value\n  if (hexCode.length === 6) hexCode.push('F', 'F')\n\n  var hexValue = parseInt(hexCode.join(''), 16)\n\n  return {\n    r: (hexValue >> 24) & 255,\n    g: (hexValue >> 16) & 255,\n    b: (hexValue >> 8) & 255,\n    a: hexValue & 255,\n    hex: '#' + hexCode.slice(0, 6).join('')\n  }\n}\n\nexports.getOptions = function getOptions (options) {\n  if (!options) options = {}\n  if (!options.color) options.color = {}\n\n  var margin = typeof options.margin === 'undefined' ||\n    options.margin === null ||\n    options.margin < 0 ? 4 : options.margin\n\n  var width = options.width && options.width >= 21 ? options.width : undefined\n  var scale = options.scale || 4\n\n  return {\n    width: width,\n    scale: width ? 4 : scale,\n    margin: margin,\n    color: {\n      dark: hex2rgba(options.color.dark || '#000000ff'),\n      light: hex2rgba(options.color.light || '#ffffffff')\n    },\n    type: options.type,\n    rendererOpts: options.rendererOpts || {}\n  }\n}\n\nexports.getScale = function getScale (qrSize, opts) {\n  return opts.width && opts.width >= qrSize + opts.margin * 2\n    ? opts.width / (qrSize + opts.margin * 2)\n    : opts.scale\n}\n\nexports.getImageWidth = function getImageWidth (qrSize, opts) {\n  var scale = exports.getScale(qrSize, opts)\n  return Math.floor((qrSize + opts.margin * 2) * scale)\n}\n\nexports.qrToImageData = function qrToImageData (imgData, qr, opts) {\n  var size = qr.modules.size\n  var data = qr.modules.data\n  var scale = exports.getScale(size, opts)\n  var symbolSize = Math.floor((size + opts.margin * 2) * scale)\n  var scaledMargin = opts.margin * scale\n  var palette = [opts.color.light, opts.color.dark]\n\n  for (var i = 0; i < symbolSize; i++) {\n    for (var j = 0; j < symbolSize; j++) {\n      var posDst = (i * symbolSize + j) * 4\n      var pxColor = opts.color.light\n\n      if (i >= scaledMargin && j >= scaledMargin &&\n        i < symbolSize - scaledMargin && j < symbolSize - scaledMargin) {\n        var iSrc = Math.floor((i - scaledMargin) / scale)\n        var jSrc = Math.floor((j - scaledMargin) / scale)\n        pxColor = palette[data[iSrc * size + jSrc] ? 1 : 0]\n      }\n\n      imgData[posDst++] = pxColor.r\n      imgData[posDst++] = pxColor.g\n      imgData[posDst++] = pxColor.b\n      imgData[posDst] = pxColor.a\n    }\n  }\n}\n","var BufferUtil = require('../utils/buffer')\n\n/**\n * Helper class to handle QR Code symbol modules\n *\n * @param {Number} size Symbol size\n */\nfunction BitMatrix (size) {\n  if (!size || size < 1) {\n    throw new Error('BitMatrix size must be defined and greater than 0')\n  }\n\n  this.size = size\n  this.data = BufferUtil.alloc(size * size)\n  this.reservedBit = BufferUtil.alloc(size * size)\n}\n\n/**\n * Set bit value at specified location\n * If reserved flag is set, this bit will be ignored during masking process\n *\n * @param {Number}  row\n * @param {Number}  col\n * @param {Boolean} value\n * @param {Boolean} reserved\n */\nBitMatrix.prototype.set = function (row, col, value, reserved) {\n  var index = row * this.size + col\n  this.data[index] = value\n  if (reserved) this.reservedBit[index] = true\n}\n\n/**\n * Returns bit value at specified location\n *\n * @param  {Number}  row\n * @param  {Number}  col\n * @return {Boolean}\n */\nBitMatrix.prototype.get = function (row, col) {\n  return this.data[row * this.size + col]\n}\n\n/**\n * Applies xor operator at specified location\n * (used during masking process)\n *\n * @param {Number}  row\n * @param {Number}  col\n * @param {Boolean} value\n */\nBitMatrix.prototype.xor = function (row, col, value) {\n  this.data[row * this.size + col] ^= value\n}\n\n/**\n * Check if bit at specified location is reserved\n *\n * @param {Number}   row\n * @param {Number}   col\n * @return {Boolean}\n */\nBitMatrix.prototype.isReserved = function (row, col) {\n  return this.reservedBit[row * this.size + col]\n}\n\nmodule.exports = BitMatrix\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var Base = C_lib.Base;\n\t    var C_enc = C.enc;\n\t    var Utf8 = C_enc.Utf8;\n\t    var C_algo = C.algo;\n\n\t    /**\n\t     * HMAC algorithm.\n\t     */\n\t    var HMAC = C_algo.HMAC = Base.extend({\n\t        /**\n\t         * Initializes a newly created HMAC.\n\t         *\n\t         * @param {Hasher} hasher The hash algorithm to use.\n\t         * @param {WordArray|string} key The secret key.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\n\t         */\n\t        init: function (hasher, key) {\n\t            // Init hasher\n\t            hasher = this._hasher = new hasher.init();\n\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof key == 'string') {\n\t                key = Utf8.parse(key);\n\t            }\n\n\t            // Shortcuts\n\t            var hasherBlockSize = hasher.blockSize;\n\t            var hasherBlockSizeBytes = hasherBlockSize * 4;\n\n\t            // Allow arbitrary length keys\n\t            if (key.sigBytes > hasherBlockSizeBytes) {\n\t                key = hasher.finalize(key);\n\t            }\n\n\t            // Clamp excess bits\n\t            key.clamp();\n\n\t            // Clone key for inner and outer pads\n\t            var oKey = this._oKey = key.clone();\n\t            var iKey = this._iKey = key.clone();\n\n\t            // Shortcuts\n\t            var oKeyWords = oKey.words;\n\t            var iKeyWords = iKey.words;\n\n\t            // XOR keys with pad constants\n\t            for (var i = 0; i < hasherBlockSize; i++) {\n\t                oKeyWords[i] ^= 0x5c5c5c5c;\n\t                iKeyWords[i] ^= 0x36363636;\n\t            }\n\t            oKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this HMAC to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Reset\n\t            hasher.reset();\n\t            hasher.update(this._iKey);\n\t        },\n\n\t        /**\n\t         * Updates this HMAC with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {HMAC} This HMAC instance.\n\t         *\n\t         * @example\n\t         *\n\t         *     hmacHasher.update('message');\n\t         *     hmacHasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            this._hasher.update(messageUpdate);\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the HMAC computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The HMAC.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hmac = hmacHasher.finalize();\n\t         *     var hmac = hmacHasher.finalize('message');\n\t         *     var hmac = hmacHasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Shortcut\n\t            var hasher = this._hasher;\n\n\t            // Compute HMAC\n\t            var innerHash = hasher.finalize(messageUpdate);\n\t            hasher.reset();\n\t            var hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\n\n\t            return hmac;\n\t        }\n\t    });\n\t}());\n\n\n}));","/**\n * Implementation of a subset of node.js Buffer methods for the browser.\n * Based on https://github.com/feross/buffer\n */\n\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar isArray = require('isarray')\n\nfunction typedArraySupport () {\n  // Can typed array instances be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nvar K_MAX_LENGTH = Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n\nfunction Buffer (arg, offset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, offset, length)\n  }\n\n  if (typeof arg === 'number') {\n    return allocUnsafe(this, arg)\n  }\n\n  return from(this, arg, offset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n\n  // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true,\n      enumerable: false,\n      writable: false\n    })\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\nfunction createBuffer (that, length) {\n  var buf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    buf = new Uint8Array(length)\n    buf.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    buf = that\n    if (buf === null) {\n      buf = new Buffer(length)\n    }\n    buf.length = length\n  }\n\n  return buf\n}\n\nfunction allocUnsafe (that, size) {\n  var buf = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      buf[i] = 0\n    }\n  }\n\n  return buf\n}\n\nfunction fromString (that, string) {\n  var length = byteLength(string) | 0\n  var buf = createBuffer(that, length)\n\n  var actual = buf.write(string)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    buf.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    buf = fromArrayLike(that, buf)\n  }\n\n  return buf\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(that, len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction byteLength (string) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  return utf8ToBytes(string).length\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction from (that, value, offset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, offset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, offset)\n  }\n\n  return fromObject(that, value)\n}\n\nBuffer.prototype.write = function write (string, offset, length) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n    } else {\n      length = undefined\n    }\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  return utf8Write(this, string, offset, length)\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    // Return an augmented `Uint8Array` instance\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\nBuffer.prototype.fill = function fill (val, start, end) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : new Buffer(val)\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return createBuffer(null, 0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = allocUnsafe(null, length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nBuffer.byteLength = byteLength\n\nBuffer.prototype._isBuffer = true\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nmodule.exports.alloc = function (size) {\n  var buffer = new Buffer(size)\n  buffer.fill(0)\n  return buffer\n}\n\nmodule.exports.from = function (data) {\n  return new Buffer(data)\n}\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Uint8Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint8', function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $join = [].join;\n\n// `%TypedArray%.prototype.join` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.join\n// eslint-disable-next-line no-unused-vars -- required for `.length`\nexportTypedArrayMethod('join', function join(separator) {\n  return $join.apply(aTypedArray(this), arguments);\n});\n","'use strict';\nvar global = require('../internals/global');\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar ArrayIterators = require('../modules/es.array.iterator');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar Uint8Array = global.Uint8Array;\nvar arrayValues = ArrayIterators.values;\nvar arrayKeys = ArrayIterators.keys;\nvar arrayEntries = ArrayIterators.entries;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar nativeTypedArrayIterator = Uint8Array && Uint8Array.prototype[ITERATOR];\n\nvar PROPER_ARRAY_VALUES_NAME = !!nativeTypedArrayIterator && nativeTypedArrayIterator.name === 'values';\n\nvar typedArrayValues = function values() {\n  return arrayValues.call(aTypedArray(this));\n};\n\n// `%TypedArray%.prototype.entries` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.entries\nexportTypedArrayMethod('entries', function entries() {\n  return arrayEntries.call(aTypedArray(this));\n});\n// `%TypedArray%.prototype.keys` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.keys\nexportTypedArrayMethod('keys', function keys() {\n  return arrayKeys.call(aTypedArray(this));\n});\n// `%TypedArray%.prototype.values` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.values\nexportTypedArrayMethod('values', typedArrayValues, PROPER_FUNCTION_NAME && !PROPER_ARRAY_VALUES_NAME);\n// `%TypedArray%.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype-@@iterator\nexportTypedArrayMethod(ITERATOR, typedArrayValues, PROPER_FUNCTION_NAME && !PROPER_ARRAY_VALUES_NAME);\n","'use strict';\nvar global = require('../internals/global');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-native');\nvar FunctionName = require('../internals/function-name');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefineAll = require('../internals/redefine-all');\nvar fails = require('../internals/fails');\nvar anInstance = require('../internals/an-instance');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\nvar toIndex = require('../internals/to-index');\nvar IEEE754 = require('../internals/ieee754');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar arrayFill = require('../internals/array-fill');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length';\nvar WRONG_INDEX = 'Wrong index';\nvar NativeArrayBuffer = global[ARRAY_BUFFER];\nvar $ArrayBuffer = NativeArrayBuffer;\nvar $DataView = global[DATA_VIEW];\nvar $DataViewPrototype = $DataView && $DataView[PROTOTYPE];\nvar ObjectPrototype = Object.prototype;\nvar RangeError = global.RangeError;\n\nvar packIEEE754 = IEEE754.pack;\nvar unpackIEEE754 = IEEE754.unpack;\n\nvar packInt8 = function (number) {\n  return [number & 0xFF];\n};\n\nvar packInt16 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF];\n};\n\nvar packInt32 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF, number >> 16 & 0xFF, number >> 24 & 0xFF];\n};\n\nvar unpackInt32 = function (buffer) {\n  return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];\n};\n\nvar packFloat32 = function (number) {\n  return packIEEE754(number, 23, 4);\n};\n\nvar packFloat64 = function (number) {\n  return packIEEE754(number, 52, 8);\n};\n\nvar addGetter = function (Constructor, key) {\n  defineProperty(Constructor[PROTOTYPE], key, { get: function () { return getInternalState(this)[key]; } });\n};\n\nvar get = function (view, count, index, isLittleEndian) {\n  var intIndex = toIndex(index);\n  var store = getInternalState(view);\n  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);\n  var bytes = getInternalState(store.buffer).bytes;\n  var start = intIndex + store.byteOffset;\n  var pack = bytes.slice(start, start + count);\n  return isLittleEndian ? pack : pack.reverse();\n};\n\nvar set = function (view, count, index, conversion, value, isLittleEndian) {\n  var intIndex = toIndex(index);\n  var store = getInternalState(view);\n  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);\n  var bytes = getInternalState(store.buffer).bytes;\n  var start = intIndex + store.byteOffset;\n  var pack = conversion(+value);\n  for (var i = 0; i < count; i++) bytes[start + i] = pack[isLittleEndian ? i : count - i - 1];\n};\n\nif (!NATIVE_ARRAY_BUFFER) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    setInternalState(this, {\n      bytes: arrayFill.call(new Array(byteLength), 0),\n      byteLength: byteLength\n    });\n    if (!DESCRIPTORS) this.byteLength = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = getInternalState(buffer).byteLength;\n    var offset = toIntegerOrInfinity(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    setInternalState(this, {\n      buffer: buffer,\n      byteLength: byteLength,\n      byteOffset: offset\n    });\n    if (!DESCRIPTORS) {\n      this.buffer = buffer;\n      this.byteLength = byteLength;\n      this.byteOffset = offset;\n    }\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, 'byteLength');\n    addGetter($DataView, 'buffer');\n    addGetter($DataView, 'byteLength');\n    addGetter($DataView, 'byteOffset');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined)) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 23);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 52);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : undefined);\n    }\n  });\n} else {\n  var INCORRECT_ARRAY_BUFFER_NAME = PROPER_FUNCTION_NAME && NativeArrayBuffer.name !== ARRAY_BUFFER;\n  /* eslint-disable no-new -- required for testing */\n  if (!fails(function () {\n    NativeArrayBuffer(1);\n  }) || !fails(function () {\n    new NativeArrayBuffer(-1);\n  }) || fails(function () {\n    new NativeArrayBuffer();\n    new NativeArrayBuffer(1.5);\n    new NativeArrayBuffer(NaN);\n    return INCORRECT_ARRAY_BUFFER_NAME && !CONFIGURABLE_FUNCTION_NAME;\n  })) {\n  /* eslint-enable no-new -- required for testing */\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new NativeArrayBuffer(toIndex(length));\n    };\n    var ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE] = NativeArrayBuffer[PROTOTYPE];\n    for (var keys = getOwnPropertyNames(NativeArrayBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) {\n        createNonEnumerableProperty($ArrayBuffer, key, NativeArrayBuffer[key]);\n      }\n    }\n    ArrayBufferPrototype.constructor = $ArrayBuffer;\n  } else if (INCORRECT_ARRAY_BUFFER_NAME && CONFIGURABLE_FUNCTION_NAME) {\n    createNonEnumerableProperty(NativeArrayBuffer, 'name', ARRAY_BUFFER);\n  }\n\n  // WebKit bug - the same parent prototype for typed arrays and data view\n  if (setPrototypeOf && getPrototypeOf($DataViewPrototype) !== ObjectPrototype) {\n    setPrototypeOf($DataViewPrototype, ObjectPrototype);\n  }\n\n  // iOS Safari 7.x bug\n  var testView = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataViewPrototype.setInt8;\n  testView.setInt8(0, 2147483648);\n  testView.setInt8(1, 2147483649);\n  if (testView.getInt8(0) || !testView.getInt8(1)) redefineAll($DataViewPrototype, {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, { unsafe: true });\n}\n\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\n\nmodule.exports = {\n  ArrayBuffer: $ArrayBuffer,\n  DataView: $DataView\n};\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.enc.Hex;\n\n}));","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $some = require('../internals/array-iteration').some;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.some` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.some\nexportTypedArrayMethod('some', function some(callbackfn /* , thisArg */) {\n  return $some(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n","// can-promise has a crash in some versions of react native that dont have\n// standard global objects\n// https://github.com/soldair/node-qrcode/issues/157\n\nmodule.exports = function () {\n  return typeof Promise === 'function' && Promise.prototype && Promise.prototype.then\n}\n","var BufferUtil = require('../utils/buffer')\n\nvar EXP_TABLE = BufferUtil.alloc(512)\nvar LOG_TABLE = BufferUtil.alloc(256)\n/**\n * Precompute the log and anti-log tables for faster computation later\n *\n * For each possible value in the galois field 2^8, we will pre-compute\n * the logarithm and anti-logarithm (exponential) of this value\n *\n * ref {@link https://en.wikiversity.org/wiki/Reed%E2%80%93Solomon_codes_for_coders#Introduction_to_mathematical_fields}\n */\n;(function initTables () {\n  var x = 1\n  for (var i = 0; i < 255; i++) {\n    EXP_TABLE[i] = x\n    LOG_TABLE[x] = i\n\n    x <<= 1 // multiply by 2\n\n    // The QR code specification says to use byte-wise modulo 100011101 arithmetic.\n    // This means that when a number is 256 or larger, it should be XORed with 0x11D.\n    if (x & 0x100) { // similar to x >= 256, but a lot faster (because 0x100 == 256)\n      x ^= 0x11D\n    }\n  }\n\n  // Optimization: double the size of the anti-log table so that we don't need to mod 255 to\n  // stay inside the bounds (because we will mainly use this table for the multiplication of\n  // two GF numbers, no more).\n  // @see {@link mul}\n  for (i = 255; i < 512; i++) {\n    EXP_TABLE[i] = EXP_TABLE[i - 255]\n  }\n}())\n\n/**\n * Returns log value of n inside Galois Field\n *\n * @param  {Number} n\n * @return {Number}\n */\nexports.log = function log (n) {\n  if (n < 1) throw new Error('log(' + n + ')')\n  return LOG_TABLE[n]\n}\n\n/**\n * Returns anti-log value of n inside Galois Field\n *\n * @param  {Number} n\n * @return {Number}\n */\nexports.exp = function exp (n) {\n  return EXP_TABLE[n]\n}\n\n/**\n * Multiplies two number inside Galois Field\n *\n * @param  {Number} x\n * @param  {Number} y\n * @return {Number}\n */\nexports.mul = function mul (x, y) {\n  if (x === 0 || y === 0) return 0\n\n  // should be EXP_TABLE[(LOG_TABLE[x] + LOG_TABLE[y]) % 255] if EXP_TABLE wasn't oversized\n  // @see {@link initTables}\n  return EXP_TABLE[LOG_TABLE[x] + LOG_TABLE[y]]\n}\n","// Styles\nimport './VToolbar.sass'\n\n// Extensions\nimport VSheet from '../VSheet/VSheet'\n\n// Components\nimport VImg, { srcObject } from '../VImg/VImg'\n\n// Utilities\nimport { convertToUnit, getSlot } from '../../util/helpers'\nimport { breaking } from '../../util/console'\n\n// Types\nimport { VNode, PropType } from 'vue'\n\n/* @vue/component */\nexport default VSheet.extend({\n  name: 'v-toolbar',\n\n  props: {\n    absolute: Boolean,\n    bottom: Boolean,\n    collapse: Boolean,\n    dense: Boolean,\n    extended: Boolean,\n    extensionHeight: {\n      default: 48,\n      type: [Number, String],\n    },\n    flat: Boolean,\n    floating: Boolean,\n    prominent: Boolean,\n    short: Boolean,\n    src: {\n      type: [String, Object] as PropType<string | srcObject>,\n      default: '',\n    },\n    tag: {\n      type: String,\n      default: 'header',\n    },\n  },\n\n  data: () => ({\n    isExtended: false,\n  }),\n\n  computed: {\n    computedHeight (): number {\n      const height = this.computedContentHeight\n\n      if (!this.isExtended) return height\n\n      const extensionHeight = parseInt(this.extensionHeight)\n\n      return this.isCollapsed\n        ? height\n        : height + (!isNaN(extensionHeight) ? extensionHeight : 0)\n    },\n    computedContentHeight (): number {\n      if (this.height) return parseInt(this.height)\n      if (this.isProminent && this.dense) return 96\n      if (this.isProminent && this.short) return 112\n      if (this.isProminent) return 128\n      if (this.dense) return 48\n      if (this.short || this.$vuetify.breakpoint.smAndDown) return 56\n      return 64\n    },\n    classes (): object {\n      return {\n        ...VSheet.options.computed.classes.call(this),\n        'v-toolbar': true,\n        'v-toolbar--absolute': this.absolute,\n        'v-toolbar--bottom': this.bottom,\n        'v-toolbar--collapse': this.collapse,\n        'v-toolbar--collapsed': this.isCollapsed,\n        'v-toolbar--dense': this.dense,\n        'v-toolbar--extended': this.isExtended,\n        'v-toolbar--flat': this.flat,\n        'v-toolbar--floating': this.floating,\n        'v-toolbar--prominent': this.isProminent,\n      }\n    },\n    isCollapsed (): boolean {\n      return this.collapse\n    },\n    isProminent (): boolean {\n      return this.prominent\n    },\n    styles (): object {\n      return {\n        ...this.measurableStyles,\n        height: convertToUnit(this.computedHeight),\n      }\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['app', '<v-app-bar app>'],\n      ['manual-scroll', '<v-app-bar :value=\"false\">'],\n      ['clipped-left', '<v-app-bar clipped-left>'],\n      ['clipped-right', '<v-app-bar clipped-right>'],\n      ['inverted-scroll', '<v-app-bar inverted-scroll>'],\n      ['scroll-off-screen', '<v-app-bar scroll-off-screen>'],\n      ['scroll-target', '<v-app-bar scroll-target>'],\n      ['scroll-threshold', '<v-app-bar scroll-threshold>'],\n      ['card', '<v-app-bar flat>'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n  },\n\n  methods: {\n    genBackground () {\n      const props = {\n        height: convertToUnit(this.computedHeight),\n        src: this.src,\n      }\n\n      const image = this.$scopedSlots.img\n        ? this.$scopedSlots.img({ props })\n        : this.$createElement(VImg, { props })\n\n      return this.$createElement('div', {\n        staticClass: 'v-toolbar__image',\n      }, [image])\n    },\n    genContent () {\n      return this.$createElement('div', {\n        staticClass: 'v-toolbar__content',\n        style: {\n          height: convertToUnit(this.computedContentHeight),\n        },\n      }, getSlot(this))\n    },\n    genExtension () {\n      return this.$createElement('div', {\n        staticClass: 'v-toolbar__extension',\n        style: {\n          height: convertToUnit(this.extensionHeight),\n        },\n      }, getSlot(this, 'extension'))\n    },\n  },\n\n  render (h): VNode {\n    this.isExtended = this.extended || !!this.$scopedSlots.extension\n\n    const children = [this.genContent()]\n    const data = this.setBackgroundColor(this.color, {\n      class: this.classes,\n      style: this.styles,\n      on: this.$listeners,\n    })\n\n    if (this.isExtended) children.push(this.genExtension())\n    if (this.src || this.$scopedSlots.img) children.unshift(this.genBackground())\n\n    return h(this.tag, data, children)\n  },\n})\n","'use strict';\nvar exportTypedArrayMethod = require('../internals/array-buffer-view-core').exportTypedArrayMethod;\nvar fails = require('../internals/fails');\nvar global = require('../internals/global');\n\nvar Uint8Array = global.Uint8Array;\nvar Uint8ArrayPrototype = Uint8Array && Uint8Array.prototype || {};\nvar arrayToString = [].toString;\nvar arrayJoin = [].join;\n\nif (fails(function () { arrayToString.call({}); })) {\n  arrayToString = function toString() {\n    return arrayJoin.call(this);\n  };\n}\n\nvar IS_NOT_ARRAY_METHOD = Uint8ArrayPrototype.toString != arrayToString;\n\n// `%TypedArray%.prototype.toString` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tostring\nexportTypedArrayMethod('toString', arrayToString, IS_NOT_ARRAY_METHOD);\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $fill = require('../internals/array-fill');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.fill` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill\n// eslint-disable-next-line no-unused-vars -- required for `.length`\nexportTypedArrayMethod('fill', function fill(value /* , start, end */) {\n  return $fill.apply(aTypedArray(this), arguments);\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = require('../internals/typed-array-constructors-require-wrappers');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar ArrayBufferModule = require('../internals/array-buffer');\nvar anInstance = require('../internals/an-instance');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar isIntegralNumber = require('../internals/is-integral-number');\nvar toLength = require('../internals/to-length');\nvar toIndex = require('../internals/to-index');\nvar toOffset = require('../internals/to-offset');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar create = require('../internals/object-create');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar typedArrayFrom = require('../internals/typed-array-from');\nvar forEach = require('../internals/array-iteration').forEach;\nvar setSpecies = require('../internals/set-species');\nvar definePropertyModule = require('../internals/object-define-property');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar InternalStateModule = require('../internals/internal-state');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar round = Math.round;\nvar RangeError = global.RangeError;\nvar ArrayBuffer = ArrayBufferModule.ArrayBuffer;\nvar DataView = ArrayBufferModule.DataView;\nvar NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;\nvar TYPED_ARRAY_CONSTRUCTOR = ArrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR;\nvar TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;\nvar TypedArray = ArrayBufferViewCore.TypedArray;\nvar TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\nvar isTypedArray = ArrayBufferViewCore.isTypedArray;\nvar BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\nvar WRONG_LENGTH = 'Wrong length';\n\nvar fromList = function (C, list) {\n  var index = 0;\n  var length = list.length;\n  var result = new (aTypedArrayConstructor(C))(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n\nvar addGetter = function (it, key) {\n  nativeDefineProperty(it, key, { get: function () {\n    return getInternalState(this)[key];\n  } });\n};\n\nvar isArrayBuffer = function (it) {\n  var klass;\n  return it instanceof ArrayBuffer || (klass = classof(it)) == 'ArrayBuffer' || klass == 'SharedArrayBuffer';\n};\n\nvar isTypedArrayIndex = function (target, key) {\n  return isTypedArray(target)\n    && !isSymbol(key)\n    && key in target\n    && isIntegralNumber(+key)\n    && key >= 0;\n};\n\nvar wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {\n  key = toPropertyKey(key);\n  return isTypedArrayIndex(target, key)\n    ? createPropertyDescriptor(2, target[key])\n    : nativeGetOwnPropertyDescriptor(target, key);\n};\n\nvar wrappedDefineProperty = function defineProperty(target, key, descriptor) {\n  key = toPropertyKey(key);\n  if (isTypedArrayIndex(target, key)\n    && isObject(descriptor)\n    && hasOwn(descriptor, 'value')\n    && !hasOwn(descriptor, 'get')\n    && !hasOwn(descriptor, 'set')\n    // TODO: add validation descriptor w/o calling accessors\n    && !descriptor.configurable\n    && (!hasOwn(descriptor, 'writable') || descriptor.writable)\n    && (!hasOwn(descriptor, 'enumerable') || descriptor.enumerable)\n  ) {\n    target[key] = descriptor.value;\n    return target;\n  } return nativeDefineProperty(target, key, descriptor);\n};\n\nif (DESCRIPTORS) {\n  if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n    getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;\n    definePropertyModule.f = wrappedDefineProperty;\n    addGetter(TypedArrayPrototype, 'buffer');\n    addGetter(TypedArrayPrototype, 'byteOffset');\n    addGetter(TypedArrayPrototype, 'byteLength');\n    addGetter(TypedArrayPrototype, 'length');\n  }\n\n  $({ target: 'Object', stat: true, forced: !NATIVE_ARRAY_BUFFER_VIEWS }, {\n    getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,\n    defineProperty: wrappedDefineProperty\n  });\n\n  module.exports = function (TYPE, wrapper, CLAMPED) {\n    var BYTES = TYPE.match(/\\d+$/)[0] / 8;\n    var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + TYPE;\n    var SETTER = 'set' + TYPE;\n    var NativeTypedArrayConstructor = global[CONSTRUCTOR_NAME];\n    var TypedArrayConstructor = NativeTypedArrayConstructor;\n    var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;\n    var exported = {};\n\n    var getter = function (that, index) {\n      var data = getInternalState(that);\n      return data.view[GETTER](index * BYTES + data.byteOffset, true);\n    };\n\n    var setter = function (that, index, value) {\n      var data = getInternalState(that);\n      if (CLAMPED) value = (value = round(value)) < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;\n      data.view[SETTER](index * BYTES + data.byteOffset, value, true);\n    };\n\n    var addElement = function (that, index) {\n      nativeDefineProperty(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n\n    if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n      TypedArrayConstructor = wrapper(function (that, data, offset, $length) {\n        anInstance(that, TypedArrayConstructor, CONSTRUCTOR_NAME);\n        var index = 0;\n        var byteOffset = 0;\n        var buffer, byteLength, length;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new ArrayBuffer(byteLength);\n        } else if (isArrayBuffer(data)) {\n          buffer = data;\n          byteOffset = toOffset(offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - byteOffset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + byteOffset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (isTypedArray(data)) {\n          return fromList(TypedArrayConstructor, data);\n        } else {\n          return typedArrayFrom.call(TypedArrayConstructor, data);\n        }\n        setInternalState(that, {\n          buffer: buffer,\n          byteOffset: byteOffset,\n          byteLength: byteLength,\n          length: length,\n          view: new DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);\n    } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {\n      TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {\n        anInstance(dummy, TypedArrayConstructor, CONSTRUCTOR_NAME);\n        return inheritIfRequired(function () {\n          if (!isObject(data)) return new NativeTypedArrayConstructor(toIndex(data));\n          if (isArrayBuffer(data)) return $length !== undefined\n            ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length)\n            : typedArrayOffset !== undefined\n              ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES))\n              : new NativeTypedArrayConstructor(data);\n          if (isTypedArray(data)) return fromList(TypedArrayConstructor, data);\n          return typedArrayFrom.call(TypedArrayConstructor, data);\n        }(), dummy, TypedArrayConstructor);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {\n        if (!(key in TypedArrayConstructor)) {\n          createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);\n        }\n      });\n      TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;\n    }\n\n    if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);\n    }\n\n    createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_CONSTRUCTOR, TypedArrayConstructor);\n\n    if (TYPED_ARRAY_TAG) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);\n    }\n\n    exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;\n\n    $({\n      global: true, forced: TypedArrayConstructor != NativeTypedArrayConstructor, sham: !NATIVE_ARRAY_BUFFER_VIEWS\n    }, exported);\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {\n      createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    setSpecies(CONSTRUCTOR_NAME);\n  };\n} else module.exports = function () { /* empty */ };\n","// IEEE754 conversions based on https://github.com/feross/ieee754\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\n\nvar pack = function (number, mantissaLength, bytes) {\n  var buffer = new Array(bytes);\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;\n  var index = 0;\n  var exponent, mantissa, c;\n  number = abs(number);\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (number != number || number === Infinity) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    mantissa = number != number ? 1 : 0;\n    exponent = eMax;\n  } else {\n    exponent = floor(log(number) / LN2);\n    if (number * (c = pow(2, -exponent)) < 1) {\n      exponent--;\n      c *= 2;\n    }\n    if (exponent + eBias >= 1) {\n      number += rt / c;\n    } else {\n      number += rt * pow(2, 1 - eBias);\n    }\n    if (number * c >= 2) {\n      exponent++;\n      c /= 2;\n    }\n    if (exponent + eBias >= eMax) {\n      mantissa = 0;\n      exponent = eMax;\n    } else if (exponent + eBias >= 1) {\n      mantissa = (number * c - 1) * pow(2, mantissaLength);\n      exponent = exponent + eBias;\n    } else {\n      mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);\n      exponent = 0;\n    }\n  }\n  for (; mantissaLength >= 8; buffer[index++] = mantissa & 255, mantissa /= 256, mantissaLength -= 8);\n  exponent = exponent << mantissaLength | mantissa;\n  exponentLength += mantissaLength;\n  for (; exponentLength > 0; buffer[index++] = exponent & 255, exponent /= 256, exponentLength -= 8);\n  buffer[--index] |= sign * 128;\n  return buffer;\n};\n\nvar unpack = function (buffer, mantissaLength) {\n  var bytes = buffer.length;\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var nBits = exponentLength - 7;\n  var index = bytes - 1;\n  var sign = buffer[index--];\n  var exponent = sign & 127;\n  var mantissa;\n  sign >>= 7;\n  for (; nBits > 0; exponent = exponent * 256 + buffer[index], index--, nBits -= 8);\n  mantissa = exponent & (1 << -nBits) - 1;\n  exponent >>= -nBits;\n  nBits += mantissaLength;\n  for (; nBits > 0; mantissa = mantissa * 256 + buffer[index], index--, nBits -= 8);\n  if (exponent === 0) {\n    exponent = 1 - eBias;\n  } else if (exponent === eMax) {\n    return mantissa ? NaN : sign ? -Infinity : Infinity;\n  } else {\n    mantissa = mantissa + pow(2, mantissaLength);\n    exponent = exponent - eBias;\n  } return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);\n};\n\nmodule.exports = {\n  pack: pack,\n  unpack: unpack\n};\n","/**\n * Data mask pattern reference\n * @type {Object}\n */\nexports.Patterns = {\n  PATTERN000: 0,\n  PATTERN001: 1,\n  PATTERN010: 2,\n  PATTERN011: 3,\n  PATTERN100: 4,\n  PATTERN101: 5,\n  PATTERN110: 6,\n  PATTERN111: 7\n}\n\n/**\n * Weighted penalty scores for the undesirable features\n * @type {Object}\n */\nvar PenaltyScores = {\n  N1: 3,\n  N2: 3,\n  N3: 40,\n  N4: 10\n}\n\n/**\n * Check if mask pattern value is valid\n *\n * @param  {Number}  mask    Mask pattern\n * @return {Boolean}         true if valid, false otherwise\n */\nexports.isValid = function isValid (mask) {\n  return mask != null && mask !== '' && !isNaN(mask) && mask >= 0 && mask <= 7\n}\n\n/**\n * Returns mask pattern from a value.\n * If value is not valid, returns undefined\n *\n * @param  {Number|String} value        Mask pattern value\n * @return {Number}                     Valid mask pattern or undefined\n */\nexports.from = function from (value) {\n  return exports.isValid(value) ? parseInt(value, 10) : undefined\n}\n\n/**\n* Find adjacent modules in row/column with the same color\n* and assign a penalty value.\n*\n* Points: N1 + i\n* i is the amount by which the number of adjacent modules of the same color exceeds 5\n*/\nexports.getPenaltyN1 = function getPenaltyN1 (data) {\n  var size = data.size\n  var points = 0\n  var sameCountCol = 0\n  var sameCountRow = 0\n  var lastCol = null\n  var lastRow = null\n\n  for (var row = 0; row < size; row++) {\n    sameCountCol = sameCountRow = 0\n    lastCol = lastRow = null\n\n    for (var col = 0; col < size; col++) {\n      var module = data.get(row, col)\n      if (module === lastCol) {\n        sameCountCol++\n      } else {\n        if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5)\n        lastCol = module\n        sameCountCol = 1\n      }\n\n      module = data.get(col, row)\n      if (module === lastRow) {\n        sameCountRow++\n      } else {\n        if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5)\n        lastRow = module\n        sameCountRow = 1\n      }\n    }\n\n    if (sameCountCol >= 5) points += PenaltyScores.N1 + (sameCountCol - 5)\n    if (sameCountRow >= 5) points += PenaltyScores.N1 + (sameCountRow - 5)\n  }\n\n  return points\n}\n\n/**\n * Find 2x2 blocks with the same color and assign a penalty value\n *\n * Points: N2 * (m - 1) * (n - 1)\n */\nexports.getPenaltyN2 = function getPenaltyN2 (data) {\n  var size = data.size\n  var points = 0\n\n  for (var row = 0; row < size - 1; row++) {\n    for (var col = 0; col < size - 1; col++) {\n      var last = data.get(row, col) +\n        data.get(row, col + 1) +\n        data.get(row + 1, col) +\n        data.get(row + 1, col + 1)\n\n      if (last === 4 || last === 0) points++\n    }\n  }\n\n  return points * PenaltyScores.N2\n}\n\n/**\n * Find 1:1:3:1:1 ratio (dark:light:dark:light:dark) pattern in row/column,\n * preceded or followed by light area 4 modules wide\n *\n * Points: N3 * number of pattern found\n */\nexports.getPenaltyN3 = function getPenaltyN3 (data) {\n  var size = data.size\n  var points = 0\n  var bitsCol = 0\n  var bitsRow = 0\n\n  for (var row = 0; row < size; row++) {\n    bitsCol = bitsRow = 0\n    for (var col = 0; col < size; col++) {\n      bitsCol = ((bitsCol << 1) & 0x7FF) | data.get(row, col)\n      if (col >= 10 && (bitsCol === 0x5D0 || bitsCol === 0x05D)) points++\n\n      bitsRow = ((bitsRow << 1) & 0x7FF) | data.get(col, row)\n      if (col >= 10 && (bitsRow === 0x5D0 || bitsRow === 0x05D)) points++\n    }\n  }\n\n  return points * PenaltyScores.N3\n}\n\n/**\n * Calculate proportion of dark modules in entire symbol\n *\n * Points: N4 * k\n *\n * k is the rating of the deviation of the proportion of dark modules\n * in the symbol from 50% in steps of 5%\n */\nexports.getPenaltyN4 = function getPenaltyN4 (data) {\n  var darkCount = 0\n  var modulesCount = data.data.length\n\n  for (var i = 0; i < modulesCount; i++) darkCount += data.data[i]\n\n  var k = Math.abs(Math.ceil((darkCount * 100 / modulesCount) / 5) - 10)\n\n  return k * PenaltyScores.N4\n}\n\n/**\n * Return mask value at given position\n *\n * @param  {Number} maskPattern Pattern reference value\n * @param  {Number} i           Row\n * @param  {Number} j           Column\n * @return {Boolean}            Mask value\n */\nfunction getMaskAt (maskPattern, i, j) {\n  switch (maskPattern) {\n    case exports.Patterns.PATTERN000: return (i + j) % 2 === 0\n    case exports.Patterns.PATTERN001: return i % 2 === 0\n    case exports.Patterns.PATTERN010: return j % 3 === 0\n    case exports.Patterns.PATTERN011: return (i + j) % 3 === 0\n    case exports.Patterns.PATTERN100: return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 === 0\n    case exports.Patterns.PATTERN101: return (i * j) % 2 + (i * j) % 3 === 0\n    case exports.Patterns.PATTERN110: return ((i * j) % 2 + (i * j) % 3) % 2 === 0\n    case exports.Patterns.PATTERN111: return ((i * j) % 3 + (i + j) % 2) % 2 === 0\n\n    default: throw new Error('bad maskPattern:' + maskPattern)\n  }\n}\n\n/**\n * Apply a mask pattern to a BitMatrix\n *\n * @param  {Number}    pattern Pattern reference number\n * @param  {BitMatrix} data    BitMatrix data\n */\nexports.applyMask = function applyMask (pattern, data) {\n  var size = data.size\n\n  for (var col = 0; col < size; col++) {\n    for (var row = 0; row < size; row++) {\n      if (data.isReserved(row, col)) continue\n      data.xor(row, col, getMaskAt(pattern, row, col))\n    }\n  }\n}\n\n/**\n * Returns the best mask pattern for data\n *\n * @param  {BitMatrix} data\n * @return {Number} Mask pattern reference number\n */\nexports.getBestMask = function getBestMask (data, setupFormatFunc) {\n  var numPatterns = Object.keys(exports.Patterns).length\n  var bestPattern = 0\n  var lowerPenalty = Infinity\n\n  for (var p = 0; p < numPatterns; p++) {\n    setupFormatFunc(p)\n    exports.applyMask(p, data)\n\n    // Calculate penalty\n    var penalty =\n      exports.getPenaltyN1(data) +\n      exports.getPenaltyN2(data) +\n      exports.getPenaltyN3(data) +\n      exports.getPenaltyN4(data)\n\n    // Undo previously applied mask\n    exports.applyMask(p, data)\n\n    if (penalty < lowerPenalty) {\n      lowerPenalty = penalty\n      bestPattern = p\n    }\n  }\n\n  return bestPattern\n}\n","exports.L = { bit: 1 }\nexports.M = { bit: 0 }\nexports.Q = { bit: 3 }\nexports.H = { bit: 2 }\n\nfunction fromString (string) {\n  if (typeof string !== 'string') {\n    throw new Error('Param is not a string')\n  }\n\n  var lcStr = string.toLowerCase()\n\n  switch (lcStr) {\n    case 'l':\n    case 'low':\n      return exports.L\n\n    case 'm':\n    case 'medium':\n      return exports.M\n\n    case 'q':\n    case 'quartile':\n      return exports.Q\n\n    case 'h':\n    case 'high':\n      return exports.H\n\n    default:\n      throw new Error('Unknown EC Level: ' + string)\n  }\n}\n\nexports.isValid = function isValid (level) {\n  return level && typeof level.bit !== 'undefined' &&\n    level.bit >= 0 && level.bit < 4\n}\n\nexports.from = function from (value, defaultValue) {\n  if (exports.isValid(value)) {\n    return value\n  }\n\n  try {\n    return fromString(value)\n  } catch (e) {\n    return defaultValue\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overlay\",attrs:{\"id\":\"display\"}},[_c('v-dialog',{attrs:{\"hide-overlay\":\"\",\"width\":\"300\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',{attrs:{\"color\":\"primary\",\"dark\":\"\"}},[_c('v-card-text',[_vm._v(\" \"+_vm._s(_vm.loaddingText)+\" \"),_c('v-progress-linear',{staticClass:\"mb-0\",attrs:{\"indeterminate\":\"\",\"color\":\"white\"}})],1)],1)],1),_c('v-dialog',{attrs:{\"hide-overlay\":\"\",\"width\":\"500\"},model:{value:(_vm.msgDialog),callback:function ($$v) {_vm.msgDialog=$$v},expression:\"msgDialog\"}},[_c('v-card',[_c('v-alert',{attrs:{\"type\":_vm.alertType,\"border\":\"bottom\",\"colored-border\":\"\",\"elevation\":\"2\",\"dismissible\":\"\"},model:{value:(_vm.alert),callback:function ($$v) {_vm.alert=$$v},expression:\"alert\"}},[_vm._v(\" \"+_vm._s(_vm.messageText)+\" \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Guacamole from 'guacamole-common-js';\n\nclass GuacClient {\n    constructor(display,width, height,sessID,url) {\n        console.log(`GuacClient. sessID: ${sessID}, width: ${width}, height: ${height}`);\n        this.display = display;\n        this.width = width;\n        this.height = height;\n        this.sessID = sessID;\n        this.guacURL = url;\n        this.start();\n    }\n    start() {\n        if (!this.guacURL) {\n            this.guacURL = \"/guacWebSocket\";\n        }\n\n        var tunnel = new Guacamole.WebSocketTunnel(this.guacURL);\n        tunnel.onstatechange = function (state) {\n            console.log(`Tunnel state changed: ${state}`);\n            if (state == Guacamole.Tunnel.State.CLOSED) {\n                if (guac) {\n                    guac.disconnect();\n                }\n            }\n        }\n        var guac = new Guacamole.Client(\n            tunnel\n        );\n        //this.guac = guac;\n\n        \n\n        //guac.sendSize(this.width,this.height);\n\n        // Add client to display div\n        this.display.appendChild(guac.getDisplay().getElement());\n\n\n        guac.onname = function (name) {\n            console.log(`Name changed: ${name}`);\n        }\n\n        const thisClass = this;\n\n        const AUDIO_INPUT_MIMETYPE = 'audio/L16;rate=44100,channels=2';\n\n        var requestAudioStream = function requestAudioStream(client) {\n\n            // Create new audio stream, associating it with an AudioRecorder\n            var stream = client.createAudioStream(AUDIO_INPUT_MIMETYPE);\n            var recorder = Guacamole.AudioRecorder.getInstance(stream, AUDIO_INPUT_MIMETYPE);\n    \n            // If creation of the AudioRecorder failed, simply end the stream\n            if (!recorder)\n                stream.sendEnd();\n    \n            // Otherwise, ensure that another audio stream is created after this\n            // audio stream is closed\n            else {\n                recorder.onclose = requestAudioStream.bind(this, client);\n                console.log(`requestAudioStream. stream and recorder created!`);\n            }\n    \n        };\n\n        let videoTypes = Guacamole.VideoPlayer.getSupportedTypes();\n        let audioType = Guacamole.AudioPlayer.getSupportedTypes();\n        console.log(\"videoTypes\",videoTypes);\n        console.log(\"audioType\",audioType);\n        \n\n        guac.onstatechange = function (state) {\n            console.log(`State changed: ${state}`);\n            if (thisClass.onstatechange) {\n                thisClass.onstatechange(state);\n                if (state == 3) {\n                    requestAudioStream(guac);\n                }\n            }\n        }\n\n        // Error handler\n        guac.onerror = function(error) {\n            console.error(error);\n            //alert(`Error: ${JSON.stringify(error,null,2)}`);\n            if (thisClass.onerror) {\n                thisClass.onerror(error);\n            }\n        };\n\n        //let startAudio = false;\n\n        /*guac.onaudio = function (stream,mimetype) {\n            console.log(`onaudio. mimetype: ${mimetype}`);\n            //return null;\n            //startAudio = true;\n            return null;\n            \n        }*/\n\n        // Connect\n        guac.connect(`sessID=${this.sessID}&width=${this.width}&height=${this.height}`);\n\n        // Disconnect on close\n        window.onunload = function() {\n            guac.disconnect();\n        }\n\n        this.guac = guac;\n\n        // Mouse\n        var mouse = new Guacamole.Mouse(this.display);\n\n        const handleMouseEvent = function (state) {\n\n            // Do not attempt to handle mouse state changes if the client\n            // or display are not yet available\n            //console.log(\"handleMouseEvent\");\n            //console.log(event);\n            if (!guac)\n                return;\n\n            //event.stopPropagation();\n            //event.preventDefault();\n\n            // Send mouse state, show cursor if necessary\n            //guac.getDisplay().showCursor(true);\n            guac.sendMouseState(state);\n            /*if (startAudio) {\n                console.log('starting audio...')\n                let context = Guacamole.AudioContextFactory.getAudioContext()\n                context.resume().then(() => {\n                    startAudio = false;\n                    console.log('play audio')\n                })\n            };*/\n\n        };\n        mouse.onmousedown = handleMouseEvent;\n        mouse.onmouseup = handleMouseEvent;\n        mouse.onmousemove = handleMouseEvent;\n\n        /*mouse.onEach(['mousedown', 'mouseup', 'mousemove'], function sendMouseEvent(e) {\n            guac.sendMouseState(e.state);\n        });*/\n\n        // Keyboard\n\n        var sink = new Guacamole.InputSink();\n        document.body.appendChild(sink.getElement());\n\n\n        var keyboard = new Guacamole.Keyboard(document);\n        keyboard.listenTo(sink.getElement());\n        \n\n\n        const keyDownFunc = function (keysym) {\n            console.log(`onkeydown: keysym: ${keysym}`);\n            //console.log(keysym);\n            guac.sendKeyEvent(1, keysym);\n            //event.preventDefault();\n\n        };\n\n        const keyUpFunc = function (keysym) {\n            //console.log(\"onkeyup\");\n            //console.log(keysym);\n            guac.sendKeyEvent(0, keysym);\n        };\n\n\n        window.onblur = function() {\n            console.log(`onblur..`);\n            keyboard.reset();\n        }\n        keyboard.onkeydown = keyDownFunc;   \n        keyboard.onkeyup = keyUpFunc;\n        \n       \n\n        this.onEnd = function () {\n            console.log('GuacClient. onEnd..');\n            keyboard.onkeydown = null;   \n            keyboard.onkeyup = null;\n            mouse.onmousedown = null;\n            mouse.onmouseup = null;\n            mouse.onmousemove = null;\n            guac.disconnect();\n        }\n\n        // Automatically update the client thumbnail\n        guac.onsync = function syncReceived(ts) {\n\n            //var thumbnail = managedClient.thumbnail;\n            //var timestamp = new Date().getTime();\n\n            // Update thumbnail if it doesn't exist or is old\n            /*if (!thumbnail || timestamp - thumbnail.timestamp >= THUMBNAIL_UPDATE_FREQUENCY) {\n                $rootScope.$apply(function updateClientThumbnail() {\n                    ManagedClient.updateThumbnail(managedClient);\n                });\n            }*/\n            console.log(`onsync: ${ts}`)\n\n        };\n\n        // Test for argument mutability whenever an argument value is\n        // received\n        guac.onargv = function clientArgumentValueReceived(stream, mimetype, name) {\n\n            console.log(`onargv.  mimetype: ${mimetype}, name: ${name}`)\n            // Ignore arguments which do not use a mimetype currently supported\n            // by the web application\n            if (mimetype !== 'text/plain')\n                return;\n\n            var reader = new Guacamole.StringReader(stream);\n\n            // Assemble received data into a single string\n            var value = '';\n            reader.ontext = function textReceived(text) {\n                value += text;\n            };\n\n            // Test mutability once stream is finished, storing the current\n            // value for the argument only if it is mutable\n            reader.onend = function textComplete() {\n                /*ManagedArgument.getInstance(managedClient, name, value).then(function argumentIsMutable(argument) {\n                    managedClient.arguments[name] = argument;\n                }, function ignoreImmutableArguments() {});*/\n                console.log(`onargv.  onend. value: ${value}`);\n            };\n\n        };\n\n        // Handle any received clipboard data\n        guac.onclipboard = function clientClipboardReceived(stream, mimetype) {\n\n            console.log(`onclipboard.  mimetype: ${mimetype}`)\n            var reader;\n\n            // If the received data is text, read it as a simple string\n            if (/^text\\//.exec(mimetype)) {\n\n                reader = new Guacamole.StringReader(stream);\n\n                // Assemble received data into a single string\n                var data = '';\n                reader.ontext = function textReceived(text) {\n                    data += text;\n                };\n\n                // Set clipboard contents once stream is finished\n                reader.onend = function textComplete() {\n                    /*clipboardService.setClipboard(new ClipboardData({\n                        source : managedClient.id,\n                        type : mimetype,\n                        data : data\n                    }))['catch'](angular.noop);*/\n                    console.log(`onclipboard.  onend. data: ${data}`);\n                };\n\n            }\n\n            // Otherwise read the clipboard data as a Blob\n            else {\n                reader = new Guacamole.BlobReader(stream, mimetype);\n                reader.onend = function blobComplete() {\n                    /*clipboardService.setClipboard(new ClipboardData({\n                        source : managedClient.id,\n                        type : mimetype,\n                        data : reader.getBlob()\n                    }))['catch'](angular.noop);*/\n                };\n            }\n\n        };\n    }\n\n    reportWindowSize(x,y) {\n        console.log('Send new size...');\n        this.width = x;\n        this.height = y;\n        this.guac.sendSize(this.width,this.height);\n    }\n\n\n    end() {\n        if (this.onEnd) {\n            this.onEnd();\n        }\n    }\n}\n\nexport default GuacClient;","<template>\n  <div id=\"display\" class='overlay'>\n    <v-dialog\n      v-model=\"dialog\"\n      hide-overlay\n      width=\"300\"\n    >\n      <v-card\n        color=\"primary\"\n        dark\n      >\n        <v-card-text>\n          {{loaddingText}}\n          <v-progress-linear\n            indeterminate\n            color=\"white\"\n            class=\"mb-0\"\n          ></v-progress-linear>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n    <v-dialog\n      v-model=\"msgDialog\"\n      hide-overlay\n      width=\"500\"\n    >\n    <v-card>\n    <v-alert :type=\"alertType\"\n    border=\"bottom\"\n      colored-border\n      elevation=\"2\"\n      dismissible\n      v-model=\"alert\"\n    >\n          {{ messageText }}\n    </v-alert>\n    </v-card>\n    </v-dialog>\n  </div>\n  \n</template>\n\n<style>\n  .overlay {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    background: rgba(51,51,51,0.7);\n    z-index: 10;\n  }\n  </style>\n\n<script>\n\nimport appData from '../modules/appData';\nimport appUtils from '../modules/appUtils';\nimport GuacClient from '../modules/guacClient.js';\n\nlet page = {\n  name: 'Client',\n  \n  data: () => ({ \n    langs: ['iw', 'en'],\n    msgDialog: false,\n    messageText: \"\",\n    alertType: \"info\",\n    dialog: false,\n    loaddingText: \"\",\n    guac: null,\n    alert: true,\n    appData\n  }),\n  created: function () {\n    if (!appData.authComplete) {\n      this.$router.push(\"/Splash\");\n      return;\n    }\n    this.dialog = true;\n    this.loaddingText = this.$t(\"Starting session...\");\n    //\n    let params = {\n        loginToken: appData.loginToken,\n      };\n      appUtils\n        .get({\n          url: \"startsession\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n\n          if (response.data.status == 1) {\n            this.loaddingText = this.$t(\"Loading your remote desktop...\");\n            this.dialog = true;\n            this.$forceUpdate();\n            console.log(\"Session started!\");\n            let sessID = response.data.sessionid;\n            var win = window,\n            doc = document,\n            docElem = doc.documentElement,\n            body = doc.getElementsByTagName('body')[0],\n            x = win.innerWidth || docElem.clientWidth || body.clientWidth,\n            y = win.innerHeight|| docElem.clientHeight|| body.clientHeight;\n\n            console.log(\"x: \"+x+\", y: \"+y);\n\n            \n\n\n            // Get display div from document\n            var display = document.getElementById(\"display\");\n\n            const protocol = (location.protocol == \"http:\" ? \"ws:\" : \"wss:\");\n            //const port = (location.port != \"\" ? `:${location.port}` : \"\");\n            let wsURL;\n            if (appData.production) {\n              wsURL = `${protocol}//${location.host}/guacWebSocket`;\n            } else {\n              wsURL = \"ws://127.0.0.1/guacWebSocket\";\n            }\n           \n            console.log(`wsURL: ${wsURL}, location.host: ${location.host}`);\n            this.guac = new GuacClient(display,x,y,sessID,wsURL);\n            \n            this.guac.onstatechange = (state) => {\n              console.log(`this.guac.onstatechange: ${state}`);\n              if (state == 3) {\n                this.dialog = false;\n                this.$forceUpdate();\n              } else if (state == 5) {\n                this.dialog = false;\n                this.msgDialog = true;\n                this.messageText = this.$t(\"Remote desktop disconnected\");\n                this.alertType = \"warning\";\n              }\n            };\n\n            this.guac.onerror = (error) => {\n              console.log(`this.guac.onerror: ${error}`);\n              this.dialog = false;\n              this.msgDialog = true;\n              this.messageText = this.$t(\"Remote desktop error\",{msg: `${error}`});\n              this.alertType = \"warning\";\n            };\n\n            const reportWindowSize = () => {\n              let nx = win.innerWidth || docElem.clientWidth || body.clientWidth;\n              let ny = win.innerHeight|| docElem.clientHeight|| body.clientHeight;\n              if (nx != x || ny != y) {\n                console.log(`Resize event. x: ${nx}, y: ${ny}`);\n                x = nx;\n                y = ny;\n                this.guac.reportWindowSize(x,y);\n              }\n              \n            }\n            window.addEventListener('resize', reportWindowSize);\n          } else  {\n            console.log(\"Error\");\n            this.dialog = false;\n            //alert(response.data.message);\n            this.msgDialog = true;\n            this.messageText = this.$t(\"Start session error\",{msg: response.data.message, code: response.data.status});\n            this.alertType = \"warning\";\n\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n  },\n  methods: {\n\n  },\n  watch:{\n    msgDialog:function(newValue, old){\n      if(!newValue && old){\n        // Closing\n        this.$router.push(\"/Splash\");\n      }\n    },\n    alert: function(newValue, old){\n      if(!newValue && old){\n        this.msgDialog = false;\n      }\n    },\n  },\n  /*eslint no-unused-vars: [\"error\", {\"args\": \"after-used\"}]*/\n  beforeRouteLeave (to, from, next) { \n    console.log(`Client beforeRouteLeave.`);\n    if (this.guac) {\n      this.guac.end();\n    }\n    next();\n   }\n}\n\nexport default page;\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Client.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Client.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Client.vue?vue&type=template&id=36726fe1&\"\nimport script from \"./Client.vue?vue&type=script&lang=js&\"\nexport * from \"./Client.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Client.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\ninstallComponents(component, {VAlert,VCard,VCardText,VDialog,VProgressLinear})\n","function BitBuffer () {\n  this.buffer = []\n  this.length = 0\n}\n\nBitBuffer.prototype = {\n\n  get: function (index) {\n    var bufIndex = Math.floor(index / 8)\n    return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) === 1\n  },\n\n  put: function (num, length) {\n    for (var i = 0; i < length; i++) {\n      this.putBit(((num >>> (length - i - 1)) & 1) === 1)\n    }\n  },\n\n  getLengthInBits: function () {\n    return this.length\n  },\n\n  putBit: function (bit) {\n    var bufIndex = Math.floor(this.length / 8)\n    if (this.buffer.length <= bufIndex) {\n      this.buffer.push(0)\n    }\n\n    if (bit) {\n      this.buffer[bufIndex] |= (0x80 >>> (this.length % 8))\n    }\n\n    this.length++\n  }\n}\n\nmodule.exports = BitBuffer\n","\nimport appData from \"./appData\";\n\nconst LoginConstants = {\n    CLIENT_AUTH_TYPE_NONE: 0,\n    CLIENT_AUTH_TYPE_PASSWORD: 1,\n    CLIENT_AUTH_TYPE_BIOMETRICOTP: 2,\n    CLIENT_AUTH_TYPE_PASSWORD_AND_BIOMETRICOTP: 3,\n    CLIENT_AUTH_TYPE_PASSWORD_OR_BIOMETRICOTP: 4,\n\n    SECOND_AUTH_METOD_BIOMETRIC: 1,\n    SECOND_AUTH_METOD_OTP: 2,\n    SECOND_AUTH_METOD_BIOMETRIC_OR_OTP: 3,\n\n    AUTH_PREFERENCE_UNKNOWN: 0,\n    AUTH_PREFERENCE_BIOMETRIC: 1,\n    AUTH_PREFERENCE_OTP: 2,\n    AUTH_PREFERENCE_PASSWORD: 3,\n\n    OTP_TYPE_TOTP: 0,\n    OTP_TYPE_SMS: 1,\n}\n\n/**\n * Main class for Nubo authntication logic\n */\nclass LoginController {\n\n    /**\n     * The method open the next authentication step according to the\n     * Nubo client authentication process and the current step\n     */\n    nuboAuthProcess(caller) {\n        console.log('nuboAuthProcess');\n\n        // Indicate if all required auth process completed and we can move forward to start session\n        let authComplete = false;\n        if (appData.clientauthtype == LoginConstants.CLIENT_AUTH_TYPE_PASSWORD) {\n            if (appData.passwordValidated) {\n                authComplete = true;\n            } else {\n                if (this.tryPassword(caller)) {\n                    return true;\n                }\n            }\n        } else if (appData.clientauthtype == LoginConstants.CLIENT_AUTH_TYPE_BIOMETRICOTP) {\n            if (appData.biometricValidated) {\n                authComplete = true;\n            } else {\n                if (this.tryBiometricOTPAuth(caller)) {\n                    return true;\n                }\n            }\n        } else if (appData.clientauthtype == LoginConstants.CLIENT_AUTH_TYPE_PASSWORD_AND_BIOMETRICOTP) {\n            if (appData.passwordValidated && appData.biometricValidated) {\n                authComplete = true;\n            } else {\n                if (!appData.passwordValidated) {\n                    if (this.tryPassword(caller)) {\n                        return true;\n                    }\n                }\n                if (this.tryBiometricOTPAuth(caller)) {\n                    return true;\n                }\n            }\n        } else if (appData.clientauthtype == LoginConstants.CLIENT_AUTH_TYPE_PASSWORD_OR_BIOMETRICOTP) {\n            if (appData.passwordValidated || appData.biometricValidated) {\n                authComplete = true;\n            } else {\n                console.log(`appData.authUserPreference: ${appData.authUserPreference}`);\n                if (appData.authUserPreference != LoginConstants.AUTH_PREFERENCE_PASSWORD) {\n                    if (this.tryBiometricOTPAuth(caller)) {\n                        return true;\n                    }\n                }\n                if (this.tryPassword(caller)) {\n                    return true;\n                }\n            }\n        } else {\n            authComplete = true;\n        }\n\n        appData.authComplete = authComplete;\n        appData.commit();\n\n        if (authComplete) {\n            caller.$router.push(\"/Client\");\n            return true;\n        } else {\n            caller.$router.push(\"/Splash\");\n            return false;\n        }\n    }\n\n    tryPassword(caller) {\n        if (!appData.isCancelPassword) {\n            caller.$router.push(\"/Password\");\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    tryBiometricOTPAuth(caller) {\n        /*if (appData.authUserPreference == LoginConstants.AUTH_PREFERENCE_BIOMETRIC && !appData.isCancelBiometric) {\n            if (appData.secondauthmethod ==  LoginConstants.SECOND_AUTH_METOD_BIOMETRIC || appData.secondauthmethod == LoginConstants.SECOND_AUTH_METOD_BIOMETRIC_OR_OTP) {\n                caller.$router.push(\"/Biometric\");\n                return true;\n            }\n        }*/\n        if (!appData.isCancelOTP) {\n            if (appData.secondauthmethod ==  LoginConstants.SECOND_AUTH_METOD_OTP || appData.secondauthmethod == LoginConstants.SECOND_AUTH_METOD_BIOMETRIC_OR_OTP) {\n                caller.$router.push(\"/OTP\");\n                return true;\n            }\n        }\n        // disable biometric as it not exists\n        /*if (!appData.isCancelBiometric) { \n            if (appData.secondauthmethod ==  LoginConstants.SECOND_AUTH_METOD_BIOMETRIC || appData.secondauthmethod == LoginConstants.SECOND_AUTH_METOD_BIOMETRIC_OR_OTP) {\n                caller.$router.push(\"/Biometric\");\n                return true;\n            }\n        }*/\n        \n        return false;\n    }\n\n    /**\n     * @type {LoginController}\n     */\n    static instance = new LoginController()\n    static LoginConstants = LoginConstants;\n\n}\n\n//const loginControllerInstance = new LoginController();\n//loginControllerInstance\nexport default LoginController;","var toSJISFunction\nvar CODEWORDS_COUNT = [\n  0, // Not used\n  26, 44, 70, 100, 134, 172, 196, 242, 292, 346,\n  404, 466, 532, 581, 655, 733, 815, 901, 991, 1085,\n  1156, 1258, 1364, 1474, 1588, 1706, 1828, 1921, 2051, 2185,\n  2323, 2465, 2611, 2761, 2876, 3034, 3196, 3362, 3532, 3706\n]\n\n/**\n * Returns the QR Code size for the specified version\n *\n * @param  {Number} version QR Code version\n * @return {Number}         size of QR code\n */\nexports.getSymbolSize = function getSymbolSize (version) {\n  if (!version) throw new Error('\"version\" cannot be null or undefined')\n  if (version < 1 || version > 40) throw new Error('\"version\" should be in range from 1 to 40')\n  return version * 4 + 17\n}\n\n/**\n * Returns the total number of codewords used to store data and EC information.\n *\n * @param  {Number} version QR Code version\n * @return {Number}         Data length in bits\n */\nexports.getSymbolTotalCodewords = function getSymbolTotalCodewords (version) {\n  return CODEWORDS_COUNT[version]\n}\n\n/**\n * Encode data with Bose-Chaudhuri-Hocquenghem\n *\n * @param  {Number} data Value to encode\n * @return {Number}      Encoded value\n */\nexports.getBCHDigit = function (data) {\n  var digit = 0\n\n  while (data !== 0) {\n    digit++\n    data >>>= 1\n  }\n\n  return digit\n}\n\nexports.setToSJISFunction = function setToSJISFunction (f) {\n  if (typeof f !== 'function') {\n    throw new Error('\"toSJISFunc\" is not a valid function.')\n  }\n\n  toSJISFunction = f\n}\n\nexports.isKanjiModeEnabled = function () {\n  return typeof toSJISFunction !== 'undefined'\n}\n\nexports.toSJIS = function toSJIS (kanji) {\n  return toSJISFunction(kanji)\n}\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $includes = require('../internals/array-includes').includes;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.includes` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.includes\nexportTypedArrayMethod('includes', function includes(searchElement /* , fromIndex */) {\n  return $includes(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n});\n","// Styles\nimport './VLabel.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Themeable, { functionalThemeClasses } from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n// Helpers\nimport { convertToUnit } from '../../util/helpers'\n\n/* @vue/component */\nexport default mixins(Themeable).extend({\n  name: 'v-label',\n\n  functional: true,\n\n  props: {\n    absolute: Boolean,\n    color: {\n      type: String,\n      default: 'primary',\n    },\n    disabled: Boolean,\n    focused: Boolean,\n    for: String,\n    left: {\n      type: [Number, String],\n      default: 0,\n    },\n    right: {\n      type: [Number, String],\n      default: 'auto',\n    },\n    value: Boolean,\n  },\n\n  render (h, ctx): VNode {\n    const { children, listeners, props } = ctx\n    const data = {\n      staticClass: 'v-label',\n      class: {\n        'v-label--active': props.value,\n        'v-label--is-disabled': props.disabled,\n        ...functionalThemeClasses(ctx),\n      },\n      attrs: {\n        for: props.for,\n        'aria-hidden': !props.for,\n      },\n      on: listeners,\n      style: {\n        left: convertToUnit(props.left),\n        right: convertToUnit(props.right),\n        position: props.absolute ? 'absolute' : 'relative',\n      },\n      ref: 'label',\n    }\n\n    return h('label', Colorable.options.methods.setTextColor(props.focused && props.color, data), children)\n  },\n})\n","import VLabel from './VLabel'\n\nexport { VLabel }\nexport default VLabel\n","// Styles\nimport './VMessages.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Themeable from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport { PropValidator } from 'vue/types/options'\nimport mixins from '../../util/mixins'\n\n// Utilities\nimport { getSlot } from '../../util/helpers'\n\n/* @vue/component */\nexport default mixins(Colorable, Themeable).extend({\n  name: 'v-messages',\n\n  props: {\n    value: {\n      type: Array,\n      default: () => ([]),\n    } as PropValidator<string[]>,\n  },\n\n  methods: {\n    genChildren () {\n      return this.$createElement('transition-group', {\n        staticClass: 'v-messages__wrapper',\n        attrs: {\n          name: 'message-transition',\n          tag: 'div',\n        },\n      }, this.value.map(this.genMessage))\n    },\n    genMessage (message: string, key: number) {\n      return this.$createElement('div', {\n        staticClass: 'v-messages__message',\n        key,\n      }, getSlot(this, 'default', { message, key }) || [message])\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.setTextColor(this.color, {\n      staticClass: 'v-messages',\n      class: this.themeClasses,\n    }), [this.genChildren()])\n  },\n})\n","import VMessages from './VMessages'\n\nexport { VMessages }\nexport default VMessages\n","// Mixins\nimport Colorable from '../colorable'\nimport Themeable from '../themeable'\nimport { inject as RegistrableInject } from '../registrable'\n\n// Utilities\nimport { deepEqual } from '../../util/helpers'\nimport { consoleError } from '../../util/console'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { PropValidator } from 'vue/types/options'\nimport { InputMessage, InputValidationRules } from 'vuetify/types'\n\nconst baseMixins = mixins(\n  Colorable,\n  RegistrableInject<'form', any>('form'),\n  Themeable,\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'validatable',\n\n  props: {\n    disabled: Boolean,\n    error: Boolean,\n    errorCount: {\n      type: [Number, String],\n      default: 1,\n    },\n    errorMessages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<InputMessage | null>,\n    messages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<InputMessage | null>,\n    readonly: Boolean,\n    rules: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<InputValidationRules>,\n    success: Boolean,\n    successMessages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<InputMessage | null>,\n    validateOnBlur: Boolean,\n    value: { required: false },\n  },\n\n  data () {\n    return {\n      errorBucket: [] as string[],\n      hasColor: false,\n      hasFocused: false,\n      hasInput: false,\n      isFocused: false,\n      isResetting: false,\n      lazyValue: this.value,\n      valid: false,\n    }\n  },\n\n  computed: {\n    computedColor (): string | undefined {\n      if (this.isDisabled) return undefined\n      if (this.color) return this.color\n      // It's assumed that if the input is on a\n      // dark background, the user will want to\n      // have a white color. If the entire app\n      // is setup to be dark, then they will\n      // like want to use their primary color\n      if (this.isDark && !this.appIsDark) return 'white'\n      else return 'primary'\n    },\n    hasError (): boolean {\n      return (\n        this.internalErrorMessages.length > 0 ||\n        this.errorBucket.length > 0 ||\n        this.error\n      )\n    },\n    // TODO: Add logic that allows the user to enable based\n    // upon a good validation\n    hasSuccess (): boolean {\n      return (\n        this.internalSuccessMessages.length > 0 ||\n        this.success\n      )\n    },\n    externalError (): boolean {\n      return this.internalErrorMessages.length > 0 || this.error\n    },\n    hasMessages (): boolean {\n      return this.validationTarget.length > 0\n    },\n    hasState (): boolean {\n      if (this.isDisabled) return false\n\n      return (\n        this.hasSuccess ||\n        (this.shouldValidate && this.hasError)\n      )\n    },\n    internalErrorMessages (): InputValidationRules {\n      return this.genInternalMessages(this.errorMessages)\n    },\n    internalMessages (): InputValidationRules {\n      return this.genInternalMessages(this.messages)\n    },\n    internalSuccessMessages (): InputValidationRules {\n      return this.genInternalMessages(this.successMessages)\n    },\n    internalValue: {\n      get (): unknown {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n\n        this.$emit('input', val)\n      },\n    },\n    isDisabled (): boolean {\n      return this.disabled || (\n        !!this.form &&\n        this.form.disabled\n      )\n    },\n    isInteractive (): boolean {\n      return !this.isDisabled && !this.isReadonly\n    },\n    isReadonly (): boolean {\n      return this.readonly || (\n        !!this.form &&\n        this.form.readonly\n      )\n    },\n    shouldValidate (): boolean {\n      if (this.externalError) return true\n      if (this.isResetting) return false\n\n      return this.validateOnBlur\n        ? this.hasFocused && !this.isFocused\n        : (this.hasInput || this.hasFocused)\n    },\n    validations (): InputValidationRules {\n      return this.validationTarget.slice(0, Number(this.errorCount))\n    },\n    validationState (): string | undefined {\n      if (this.isDisabled) return undefined\n      if (this.hasError && this.shouldValidate) return 'error'\n      if (this.hasSuccess) return 'success'\n      if (this.hasColor) return this.computedColor\n      return undefined\n    },\n    validationTarget (): InputValidationRules {\n      if (this.internalErrorMessages.length > 0) {\n        return this.internalErrorMessages\n      } else if (this.successMessages && this.successMessages.length > 0) {\n        return this.internalSuccessMessages\n      } else if (this.messages && this.messages.length > 0) {\n        return this.internalMessages\n      } else if (this.shouldValidate) {\n        return this.errorBucket\n      } else return []\n    },\n  },\n\n  watch: {\n    rules: {\n      handler (newVal, oldVal) {\n        if (deepEqual(newVal, oldVal)) return\n        this.validate()\n      },\n      deep: true,\n    },\n    internalValue () {\n      // If it's the first time we're setting input,\n      // mark it with hasInput\n      this.hasInput = true\n      this.validateOnBlur || this.$nextTick(this.validate)\n    },\n    isFocused (val) {\n      // Should not check validation\n      // if disabled\n      if (\n        !val &&\n        !this.isDisabled\n      ) {\n        this.hasFocused = true\n        this.validateOnBlur && this.$nextTick(this.validate)\n      }\n    },\n    isResetting () {\n      setTimeout(() => {\n        this.hasInput = false\n        this.hasFocused = false\n        this.isResetting = false\n        this.validate()\n      }, 0)\n    },\n    hasError (val) {\n      if (this.shouldValidate) {\n        this.$emit('update:error', val)\n      }\n    },\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  beforeMount () {\n    this.validate()\n  },\n\n  created () {\n    this.form && this.form.register(this)\n  },\n\n  beforeDestroy () {\n    this.form && this.form.unregister(this)\n  },\n\n  methods: {\n    genInternalMessages (messages: InputMessage | null): InputValidationRules {\n      if (!messages) return []\n      else if (Array.isArray(messages)) return messages\n      else return [messages]\n    },\n    /** @public */\n    reset () {\n      this.isResetting = true\n      this.internalValue = Array.isArray(this.internalValue)\n        ? []\n        : null\n    },\n    /** @public */\n    resetValidation () {\n      this.isResetting = true\n    },\n    /** @public */\n    validate (force = false, value?: any): boolean {\n      const errorBucket = []\n      value = value || this.internalValue\n\n      if (force) this.hasInput = this.hasFocused = true\n\n      for (let index = 0; index < this.rules.length; index++) {\n        const rule = this.rules[index]\n        const valid = typeof rule === 'function' ? rule(value) : rule\n\n        if (valid === false || typeof valid === 'string') {\n          errorBucket.push(valid || '')\n        } else if (typeof valid !== 'boolean') {\n          consoleError(`Rules should return a string or boolean, received '${typeof valid}' instead`, this)\n        }\n      }\n\n      this.errorBucket = errorBucket\n      this.valid = errorBucket.length === 0\n\n      return this.valid\n    },\n  },\n})\n","// Styles\nimport './VInput.sass'\n\n// Components\nimport VIcon from '../VIcon'\nimport VLabel from '../VLabel'\nimport VMessages from '../VMessages'\n\n// Mixins\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport Validatable from '../../mixins/validatable'\n\n// Utilities\nimport {\n  convertToUnit,\n  getSlot,\n  kebabCase,\n} from '../../util/helpers'\nimport mergeData from '../../util/mergeData'\n\n// Types\nimport { VNode, VNodeData, PropType } from 'vue'\nimport mixins from '../../util/mixins'\nimport { InputValidationRule } from 'vuetify/types'\n\nconst baseMixins = mixins(\n  BindsAttrs,\n  Validatable,\n)\n\ninterface options extends InstanceType<typeof baseMixins> {\n  /* eslint-disable-next-line camelcase */\n  $_modelEvent: string\n}\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-input',\n\n  inheritAttrs: false,\n\n  props: {\n    appendIcon: String,\n    backgroundColor: {\n      type: String,\n      default: '',\n    },\n    dense: Boolean,\n    height: [Number, String],\n    hideDetails: [Boolean, String] as PropType<boolean | 'auto'>,\n    hint: String,\n    id: String,\n    label: String,\n    loading: Boolean,\n    persistentHint: Boolean,\n    prependIcon: String,\n    value: null as any as PropType<any>,\n  },\n\n  data () {\n    return {\n      lazyValue: this.value,\n      hasMouseDown: false,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-input--has-state': this.hasState,\n        'v-input--hide-details': !this.showDetails,\n        'v-input--is-label-active': this.isLabelActive,\n        'v-input--is-dirty': this.isDirty,\n        'v-input--is-disabled': this.isDisabled,\n        'v-input--is-focused': this.isFocused,\n        // <v-switch loading>.loading === '' so we can't just cast to boolean\n        'v-input--is-loading': this.loading !== false && this.loading != null,\n        'v-input--is-readonly': this.isReadonly,\n        'v-input--dense': this.dense,\n        ...this.themeClasses,\n      }\n    },\n    computedId (): string {\n      return this.id || `input-${this._uid}`\n    },\n    hasDetails (): boolean {\n      return this.messagesToDisplay.length > 0\n    },\n    hasHint (): boolean {\n      return !this.hasMessages &&\n        !!this.hint &&\n        (this.persistentHint || this.isFocused)\n    },\n    hasLabel (): boolean {\n      return !!(this.$slots.label || this.label)\n    },\n    // Proxy for `lazyValue`\n    // This allows an input\n    // to function without\n    // a provided model\n    internalValue: {\n      get (): any {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n        this.$emit(this.$_modelEvent, val)\n      },\n    },\n    isDirty (): boolean {\n      return !!this.lazyValue\n    },\n    isLabelActive (): boolean {\n      return this.isDirty\n    },\n    messagesToDisplay (): string[] {\n      if (this.hasHint) return [this.hint]\n\n      if (!this.hasMessages) return []\n\n      return this.validations.map((validation: string | InputValidationRule) => {\n        if (typeof validation === 'string') return validation\n\n        const validationResult = validation(this.internalValue)\n\n        return typeof validationResult === 'string' ? validationResult : ''\n      }).filter(message => message !== '')\n    },\n    showDetails (): boolean {\n      return this.hideDetails === false || (this.hideDetails === 'auto' && this.hasDetails)\n    },\n  },\n\n  watch: {\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  beforeCreate () {\n    // v-radio-group needs to emit a different event\n    // https://github.com/vuetifyjs/vuetify/issues/4752\n    this.$_modelEvent = (this.$options.model && this.$options.model.event) || 'input'\n  },\n\n  methods: {\n    genContent () {\n      return [\n        this.genPrependSlot(),\n        this.genControl(),\n        this.genAppendSlot(),\n      ]\n    },\n    genControl () {\n      return this.$createElement('div', {\n        staticClass: 'v-input__control',\n        attrs: { title: this.attrs$.title },\n      }, [\n        this.genInputSlot(),\n        this.genMessages(),\n      ])\n    },\n    genDefaultSlot () {\n      return [\n        this.genLabel(),\n        this.$slots.default,\n      ]\n    },\n    genIcon (\n      type: string,\n      cb?: (e: Event) => void,\n      extraData: VNodeData = {}\n    ) {\n      const icon = (this as any)[`${type}Icon`]\n      const eventName = `click:${kebabCase(type)}`\n      const hasListener = !!(this.listeners$[eventName] || cb)\n\n      const data = mergeData({\n        attrs: {\n          'aria-label': hasListener ? kebabCase(type).split('-')[0] + ' icon' : undefined,\n          color: this.validationState,\n          dark: this.dark,\n          disabled: this.isDisabled,\n          light: this.light,\n        },\n        on: !hasListener\n          ? undefined\n          : {\n            click: (e: Event) => {\n              e.preventDefault()\n              e.stopPropagation()\n\n              this.$emit(eventName, e)\n              cb && cb(e)\n            },\n            // Container has g event that will\n            // trigger menu open if enclosed\n            mouseup: (e: Event) => {\n              e.preventDefault()\n              e.stopPropagation()\n            },\n          },\n      }, extraData)\n\n      return this.$createElement('div', {\n        staticClass: `v-input__icon`,\n        class: type ? `v-input__icon--${kebabCase(type)}` : undefined,\n      }, [\n        this.$createElement(\n          VIcon,\n          data,\n          icon\n        ),\n      ])\n    },\n    genInputSlot () {\n      return this.$createElement('div', this.setBackgroundColor(this.backgroundColor, {\n        staticClass: 'v-input__slot',\n        style: { height: convertToUnit(this.height) },\n        on: {\n          click: this.onClick,\n          mousedown: this.onMouseDown,\n          mouseup: this.onMouseUp,\n        },\n        ref: 'input-slot',\n      }), [this.genDefaultSlot()])\n    },\n    genLabel () {\n      if (!this.hasLabel) return null\n\n      return this.$createElement(VLabel, {\n        props: {\n          color: this.validationState,\n          dark: this.dark,\n          disabled: this.isDisabled,\n          focused: this.hasState,\n          for: this.computedId,\n          light: this.light,\n        },\n      }, this.$slots.label || this.label)\n    },\n    genMessages () {\n      if (!this.showDetails) return null\n\n      return this.$createElement(VMessages, {\n        props: {\n          color: this.hasHint ? '' : this.validationState,\n          dark: this.dark,\n          light: this.light,\n          value: this.messagesToDisplay,\n        },\n        attrs: {\n          role: this.hasMessages ? 'alert' : null,\n        },\n        scopedSlots: {\n          default: props => getSlot(this, 'message', props),\n        },\n      })\n    },\n    genSlot (\n      type: string,\n      location: string,\n      slot: (VNode | VNode[])[]\n    ) {\n      if (!slot.length) return null\n\n      const ref = `${type}-${location}`\n\n      return this.$createElement('div', {\n        staticClass: `v-input__${ref}`,\n        ref,\n      }, slot)\n    },\n    genPrependSlot () {\n      const slot = []\n\n      if (this.$slots.prepend) {\n        slot.push(this.$slots.prepend)\n      } else if (this.prependIcon) {\n        slot.push(this.genIcon('prepend'))\n      }\n\n      return this.genSlot('prepend', 'outer', slot)\n    },\n    genAppendSlot () {\n      const slot = []\n\n      // Append icon for text field was really\n      // an appended inner icon, v-text-field\n      // will overwrite this method in order to obtain\n      // backwards compat\n      if (this.$slots.append) {\n        slot.push(this.$slots.append)\n      } else if (this.appendIcon) {\n        slot.push(this.genIcon('append'))\n      }\n\n      return this.genSlot('append', 'outer', slot)\n    },\n    onClick (e: Event) {\n      this.$emit('click', e)\n    },\n    onMouseDown (e: Event) {\n      this.hasMouseDown = true\n      this.$emit('mousedown', e)\n    },\n    onMouseUp (e: Event) {\n      this.hasMouseDown = false\n      this.$emit('mouseup', e)\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.setTextColor(this.validationState, {\n      staticClass: 'v-input',\n      class: this.classes,\n    }), this.genContent())\n  },\n})\n","import VInput from './VInput'\n\nexport { VInput }\nexport default VInput\n","// Styles\nimport './VCounter.sass'\n\n// Mixins\nimport Themeable, { functionalThemeClasses } from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n/* @vue/component */\nexport default mixins(Themeable).extend({\n  name: 'v-counter',\n\n  functional: true,\n\n  props: {\n    value: {\n      type: [Number, String],\n      default: '',\n    },\n    max: [Number, String],\n  },\n\n  render (h, ctx): VNode {\n    const { props } = ctx\n    const max = parseInt(props.max, 10)\n    const value = parseInt(props.value, 10)\n    const content = max ? `${value} / ${max}` : String(props.value)\n    const isGreater = max && (value > max)\n\n    return h('div', {\n      staticClass: 'v-counter',\n      class: {\n        'error--text': isGreater,\n        ...functionalThemeClasses(ctx),\n      },\n    }, content)\n  },\n})\n","import VCounter from './VCounter'\n\nexport { VCounter }\nexport default VCounter\n","// Directives\nimport Intersect from '../../directives/intersect'\n\n// Utilities\nimport { consoleWarn } from '../../util/console'\n\n// Types\nimport Vue from 'vue'\n\nexport default function intersectable (options: { onVisible: string[] }) {\n  return Vue.extend({\n    name: 'intersectable',\n\n    mounted () {\n      Intersect.inserted(this.$el as HTMLElement, {\n        name: 'intersect',\n        value: this.onObserve,\n      })\n    },\n\n    destroyed () {\n      Intersect.unbind(this.$el as HTMLElement)\n    },\n\n    methods: {\n      onObserve (entries: IntersectionObserverEntry[], observer: IntersectionObserver, isIntersecting: boolean) {\n        if (!isIntersecting) return\n\n        for (let i = 0, length = options.onVisible.length; i < length; i++) {\n          const callback = (this as any)[options.onVisible[i]]\n\n          if (typeof callback === 'function') {\n            callback()\n            continue\n          }\n\n          consoleWarn(options.onVisible[i] + ' method is not available on the instance but referenced in intersectable mixin options')\n        }\n      },\n    },\n  })\n}\n","import { VNodeDirective } from 'vue/types/vnode'\n\ninterface ResizeVNodeDirective extends VNodeDirective {\n  value?: () => void\n  options?: boolean | AddEventListenerOptions\n}\n\nfunction inserted (el: HTMLElement, binding: ResizeVNodeDirective) {\n  const callback = binding.value!\n  const options = binding.options || { passive: true }\n\n  window.addEventListener('resize', callback, options)\n  el._onResize = {\n    callback,\n    options,\n  }\n\n  if (!binding.modifiers || !binding.modifiers.quiet) {\n    callback()\n  }\n}\n\nfunction unbind (el: HTMLElement) {\n  if (!el._onResize) return\n\n  const { callback, options } = el._onResize\n  window.removeEventListener('resize', callback, options)\n  delete el._onResize\n}\n\nexport const Resize = {\n  inserted,\n  unbind,\n}\n\nexport default Resize\n","// Styles\nimport './VTextField.sass'\n\n// Extensions\nimport VInput from '../VInput'\n\n// Components\nimport VCounter from '../VCounter'\nimport VLabel from '../VLabel'\n\n// Mixins\nimport Intersectable from '../../mixins/intersectable'\nimport Loadable from '../../mixins/loadable'\nimport Validatable from '../../mixins/validatable'\n\n// Directives\nimport resize from '../../directives/resize'\nimport ripple from '../../directives/ripple'\n\n// Utilities\nimport { attachedRoot } from '../../util/dom'\nimport { convertToUnit, keyCodes } from '../../util/helpers'\nimport { breaking, consoleWarn } from '../../util/console'\n\n// Types\nimport mixins from '../../util/mixins'\nimport { VNode, PropType } from 'vue/types'\n\nconst baseMixins = mixins(\n  VInput,\n  Intersectable({\n    onVisible: [\n      'onResize',\n      'tryAutofocus',\n    ],\n  }),\n  Loadable,\n)\ninterface options extends InstanceType<typeof baseMixins> {\n  $refs: {\n    label: HTMLElement\n    input: HTMLInputElement\n    'prepend-inner': HTMLElement\n    prefix: HTMLElement\n    suffix: HTMLElement\n  }\n}\n\nconst dirtyTypes = ['color', 'file', 'time', 'date', 'datetime-local', 'week', 'month']\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-text-field',\n\n  directives: {\n    resize,\n    ripple,\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    appendOuterIcon: String,\n    autofocus: Boolean,\n    clearable: Boolean,\n    clearIcon: {\n      type: String,\n      default: '$clear',\n    },\n    counter: [Boolean, Number, String],\n    counterValue: Function as PropType<(value: any) => number>,\n    filled: Boolean,\n    flat: Boolean,\n    fullWidth: Boolean,\n    label: String,\n    outlined: Boolean,\n    placeholder: String,\n    prefix: String,\n    prependInnerIcon: String,\n    persistentPlaceholder: Boolean,\n    reverse: Boolean,\n    rounded: Boolean,\n    shaped: Boolean,\n    singleLine: Boolean,\n    solo: Boolean,\n    soloInverted: Boolean,\n    suffix: String,\n    type: {\n      type: String,\n      default: 'text',\n    },\n  },\n\n  data: () => ({\n    badInput: false,\n    labelWidth: 0,\n    prefixWidth: 0,\n    prependWidth: 0,\n    initialValue: null,\n    isBooted: false,\n    isClearing: false,\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        'v-text-field': true,\n        'v-text-field--full-width': this.fullWidth,\n        'v-text-field--prefix': this.prefix,\n        'v-text-field--single-line': this.isSingle,\n        'v-text-field--solo': this.isSolo,\n        'v-text-field--solo-inverted': this.soloInverted,\n        'v-text-field--solo-flat': this.flat,\n        'v-text-field--filled': this.filled,\n        'v-text-field--is-booted': this.isBooted,\n        'v-text-field--enclosed': this.isEnclosed,\n        'v-text-field--reverse': this.reverse,\n        'v-text-field--outlined': this.outlined,\n        'v-text-field--placeholder': this.placeholder,\n        'v-text-field--rounded': this.rounded,\n        'v-text-field--shaped': this.shaped,\n      }\n    },\n    computedColor (): string | undefined {\n      const computedColor = Validatable.options.computed.computedColor.call(this)\n\n      if (!this.soloInverted || !this.isFocused) return computedColor\n\n      return this.color || 'primary'\n    },\n    computedCounterValue (): number {\n      if (typeof this.counterValue === 'function') {\n        return this.counterValue(this.internalValue)\n      }\n      return [...(this.internalValue || '').toString()].length\n    },\n    hasCounter (): boolean {\n      return this.counter !== false && this.counter != null\n    },\n    hasDetails (): boolean {\n      return VInput.options.computed.hasDetails.call(this) || this.hasCounter\n    },\n    internalValue: {\n      get (): any {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n        this.$emit('input', this.lazyValue)\n      },\n    },\n    isDirty (): boolean {\n      return this.lazyValue?.toString().length > 0 || this.badInput\n    },\n    isEnclosed (): boolean {\n      return (\n        this.filled ||\n        this.isSolo ||\n        this.outlined\n      )\n    },\n    isLabelActive (): boolean {\n      return this.isDirty || dirtyTypes.includes(this.type)\n    },\n    isSingle (): boolean {\n      return (\n        this.isSolo ||\n        this.singleLine ||\n        this.fullWidth ||\n        // https://material.io/components/text-fields/#filled-text-field\n        (this.filled && !this.hasLabel)\n      )\n    },\n    isSolo (): boolean {\n      return this.solo || this.soloInverted\n    },\n    labelPosition (): Record<'left' | 'right', string | number | undefined> {\n      let offset = (this.prefix && !this.labelValue) ? this.prefixWidth : 0\n\n      if (this.labelValue && this.prependWidth) offset -= this.prependWidth\n\n      return (this.$vuetify.rtl === this.reverse) ? {\n        left: offset,\n        right: 'auto',\n      } : {\n        left: 'auto',\n        right: offset,\n      }\n    },\n    showLabel (): boolean {\n      return this.hasLabel && !(this.isSingle && this.labelValue)\n    },\n    labelValue (): boolean {\n      return this.isFocused || this.isLabelActive || this.persistentPlaceholder\n    },\n  },\n\n  watch: {\n    // labelValue: 'setLabelWidth', // moved to mounted, see #11533\n    outlined: 'setLabelWidth',\n    label () {\n      this.$nextTick(this.setLabelWidth)\n    },\n    prefix () {\n      this.$nextTick(this.setPrefixWidth)\n    },\n    isFocused: 'updateValue',\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('box')) {\n      breaking('box', 'filled', this)\n    }\n\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('browser-autocomplete')) {\n      breaking('browser-autocomplete', 'autocomplete', this)\n    }\n\n    /* istanbul ignore if */\n    if (this.shaped && !(this.filled || this.outlined || this.isSolo)) {\n      consoleWarn('shaped should be used with either filled or outlined', this)\n    }\n  },\n\n  mounted () {\n    // #11533\n    this.$watch(() => this.labelValue, this.setLabelWidth)\n\n    this.autofocus && this.tryAutofocus()\n\n    requestAnimationFrame(() => (this.isBooted = true))\n  },\n\n  methods: {\n    /** @public */\n    focus () {\n      this.onFocus()\n    },\n    /** @public */\n    blur (e?: Event) {\n      // https://github.com/vuetifyjs/vuetify/issues/5913\n      // Safari tab order gets broken if called synchronous\n      window.requestAnimationFrame(() => {\n        this.$refs.input && this.$refs.input.blur()\n      })\n    },\n    clearableCallback () {\n      this.$refs.input && this.$refs.input.focus()\n      this.$nextTick(() => this.internalValue = null)\n    },\n    genAppendSlot () {\n      const slot = []\n\n      if (this.$slots['append-outer']) {\n        slot.push(this.$slots['append-outer'] as VNode[])\n      } else if (this.appendOuterIcon) {\n        slot.push(this.genIcon('appendOuter'))\n      }\n\n      return this.genSlot('append', 'outer', slot)\n    },\n    genPrependInnerSlot () {\n      const slot = []\n\n      if (this.$slots['prepend-inner']) {\n        slot.push(this.$slots['prepend-inner'] as VNode[])\n      } else if (this.prependInnerIcon) {\n        slot.push(this.genIcon('prependInner'))\n      }\n\n      return this.genSlot('prepend', 'inner', slot)\n    },\n    genIconSlot () {\n      const slot = []\n\n      if (this.$slots.append) {\n        slot.push(this.$slots.append as VNode[])\n      } else if (this.appendIcon) {\n        slot.push(this.genIcon('append'))\n      }\n\n      return this.genSlot('append', 'inner', slot)\n    },\n    genInputSlot () {\n      const input = VInput.options.methods.genInputSlot.call(this)\n\n      const prepend = this.genPrependInnerSlot()\n\n      if (prepend) {\n        input.children = input.children || []\n        input.children.unshift(prepend)\n      }\n\n      return input\n    },\n    genClearIcon () {\n      if (!this.clearable) return null\n\n      // if the text field has no content then don't display the clear icon.\n      // We add an empty div because other controls depend on a ref to append inner\n      if (!this.isDirty) {\n        return this.genSlot('append', 'inner', [\n          this.$createElement('div'),\n        ])\n      }\n\n      return this.genSlot('append', 'inner', [\n        this.genIcon('clear', this.clearableCallback),\n      ])\n    },\n    genCounter () {\n      if (!this.hasCounter) return null\n\n      const max = this.counter === true ? this.attrs$.maxlength : this.counter\n\n      const props = {\n        dark: this.dark,\n        light: this.light,\n        max,\n        value: this.computedCounterValue,\n      }\n\n      return this.$scopedSlots.counter?.({ props }) ?? this.$createElement(VCounter, { props })\n    },\n    genControl () {\n      return VInput.options.methods.genControl.call(this)\n    },\n    genDefaultSlot () {\n      return [\n        this.genFieldset(),\n        this.genTextFieldSlot(),\n        this.genClearIcon(),\n        this.genIconSlot(),\n        this.genProgress(),\n      ]\n    },\n    genFieldset () {\n      if (!this.outlined) return null\n\n      return this.$createElement('fieldset', {\n        attrs: {\n          'aria-hidden': true,\n        },\n      }, [this.genLegend()])\n    },\n    genLabel () {\n      if (!this.showLabel) return null\n\n      const data = {\n        props: {\n          absolute: true,\n          color: this.validationState,\n          dark: this.dark,\n          disabled: this.isDisabled,\n          focused: !this.isSingle && (this.isFocused || !!this.validationState),\n          for: this.computedId,\n          left: this.labelPosition.left,\n          light: this.light,\n          right: this.labelPosition.right,\n          value: this.labelValue,\n        },\n      }\n\n      return this.$createElement(VLabel, data, this.$slots.label || this.label)\n    },\n    genLegend () {\n      const width = !this.singleLine && (this.labelValue || this.isDirty) ? this.labelWidth : 0\n      const span = this.$createElement('span', {\n        domProps: { innerHTML: '&#8203;' },\n        staticClass: 'notranslate',\n      })\n\n      return this.$createElement('legend', {\n        style: {\n          width: !this.isSingle ? convertToUnit(width) : undefined,\n        },\n      }, [span])\n    },\n    genInput () {\n      const listeners = Object.assign({}, this.listeners$)\n      delete listeners.change // Change should not be bound externally\n      const { title, ...inputAttrs } = this.attrs$\n\n      return this.$createElement('input', {\n        style: {},\n        domProps: {\n          value: (this.type === 'number' && Object.is(this.lazyValue, -0)) ? '-0' : this.lazyValue,\n        },\n        attrs: {\n          ...inputAttrs,\n          autofocus: this.autofocus,\n          disabled: this.isDisabled,\n          id: this.computedId,\n          placeholder: this.persistentPlaceholder || this.isFocused || !this.hasLabel ? this.placeholder : undefined,\n          readonly: this.isReadonly,\n          type: this.type,\n        },\n        on: Object.assign(listeners, {\n          blur: this.onBlur,\n          input: this.onInput,\n          focus: this.onFocus,\n          keydown: this.onKeyDown,\n        }),\n        ref: 'input',\n        directives: [{\n          name: 'resize',\n          modifiers: { quiet: true },\n          value: this.onResize,\n        }],\n      })\n    },\n    genMessages () {\n      if (!this.showDetails) return null\n\n      const messagesNode = VInput.options.methods.genMessages.call(this)\n      const counterNode = this.genCounter()\n\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__details',\n      }, [\n        messagesNode,\n        counterNode,\n      ])\n    },\n    genTextFieldSlot () {\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__slot',\n      }, [\n        this.genLabel(),\n        this.prefix ? this.genAffix('prefix') : null,\n        this.genInput(),\n        this.suffix ? this.genAffix('suffix') : null,\n      ])\n    },\n    genAffix (type: 'prefix' | 'suffix') {\n      return this.$createElement('div', {\n        class: `v-text-field__${type}`,\n        ref: type,\n      }, this[type])\n    },\n    onBlur (e?: Event) {\n      this.isFocused = false\n      e && this.$nextTick(() => this.$emit('blur', e))\n    },\n    onClick () {\n      if (this.isFocused || this.isDisabled || !this.$refs.input) return\n\n      this.$refs.input.focus()\n    },\n    onFocus (e?: Event) {\n      if (!this.$refs.input) return\n\n      const root = attachedRoot(this.$el)\n      if (!root) return\n\n      if (root.activeElement !== this.$refs.input) {\n        return this.$refs.input.focus()\n      }\n\n      if (!this.isFocused) {\n        this.isFocused = true\n        e && this.$emit('focus', e)\n      }\n    },\n    onInput (e: Event) {\n      const target = e.target as HTMLInputElement\n      this.internalValue = target.value\n      this.badInput = target.validity && target.validity.badInput\n    },\n    onKeyDown (e: KeyboardEvent) {\n      if (\n        e.keyCode === keyCodes.enter &&\n        this.lazyValue !== this.initialValue\n      ) {\n        this.initialValue = this.lazyValue\n        this.$emit('change', this.initialValue)\n      }\n\n      this.$emit('keydown', e)\n    },\n    onMouseDown (e: Event) {\n      // Prevent input from being blurred\n      if (e.target !== this.$refs.input) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n\n      VInput.options.methods.onMouseDown.call(this, e)\n    },\n    onMouseUp (e: Event) {\n      if (this.hasMouseDown) this.focus()\n\n      VInput.options.methods.onMouseUp.call(this, e)\n    },\n    setLabelWidth () {\n      if (!this.outlined) return\n\n      this.labelWidth = this.$refs.label\n        ? Math.min(this.$refs.label.scrollWidth * 0.75 + 6, (this.$el as HTMLElement).offsetWidth - 24)\n        : 0\n    },\n    setPrefixWidth () {\n      if (!this.$refs.prefix) return\n\n      this.prefixWidth = this.$refs.prefix.offsetWidth\n    },\n    setPrependWidth () {\n      if (!this.outlined || !this.$refs['prepend-inner']) return\n\n      this.prependWidth = this.$refs['prepend-inner'].offsetWidth\n    },\n    tryAutofocus () {\n      if (\n        !this.autofocus ||\n        typeof document === 'undefined' ||\n        !this.$refs.input) return false\n\n      const root = attachedRoot(this.$el)\n      if (!root || root.activeElement === this.$refs.input) return false\n\n      this.$refs.input.focus()\n\n      return true\n    },\n    updateValue (val: boolean) {\n      // Sets validationState from validatable\n      this.hasColor = val\n\n      if (val) {\n        this.initialValue = this.lazyValue\n      } else if (this.initialValue !== this.lazyValue) {\n        this.$emit('change', this.lazyValue)\n      }\n    },\n    onResize () {\n      this.setLabelWidth()\n      this.setPrefixWidth()\n      this.setPrependWidth()\n    },\n  },\n})\n","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\n// eslint-disable-next-line es/no-string-prototype-endswith -- safe\nvar $endsWith = ''.endsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.endsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = that.length;\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = toString(searchString);\n    return $endsWith\n      ? $endsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n","/* eslint-disable no-new -- required for testing */\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar NATIVE_ARRAY_BUFFER_VIEWS = require('../internals/array-buffer-view-core').NATIVE_ARRAY_BUFFER_VIEWS;\n\nvar ArrayBuffer = global.ArrayBuffer;\nvar Int8Array = global.Int8Array;\n\nmodule.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {\n  Int8Array(1);\n}) || !fails(function () {\n  new Int8Array(-1);\n}) || !checkCorrectnessOfIteration(function (iterable) {\n  new Int8Array();\n  new Int8Array(null);\n  new Int8Array(1.5);\n  new Int8Array(iterable);\n}, true) || fails(function () {\n  // Safari (11+) bug - a reason why even Safari 13 should load a typed array polyfill\n  return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;\n});\n","var BufferUtil = require('../utils/buffer')\nvar Polynomial = require('./polynomial')\nvar Buffer = require('buffer').Buffer\n\nfunction ReedSolomonEncoder (degree) {\n  this.genPoly = undefined\n  this.degree = degree\n\n  if (this.degree) this.initialize(this.degree)\n}\n\n/**\n * Initialize the encoder.\n * The input param should correspond to the number of error correction codewords.\n *\n * @param  {Number} degree\n */\nReedSolomonEncoder.prototype.initialize = function initialize (degree) {\n  // create an irreducible generator polynomial\n  this.degree = degree\n  this.genPoly = Polynomial.generateECPolynomial(this.degree)\n}\n\n/**\n * Encodes a chunk of data\n *\n * @param  {Buffer} data Buffer containing input data\n * @return {Buffer}      Buffer containing encoded data\n */\nReedSolomonEncoder.prototype.encode = function encode (data) {\n  if (!this.genPoly) {\n    throw new Error('Encoder not initialized')\n  }\n\n  // Calculate EC for this data block\n  // extends data size to data+genPoly size\n  var pad = BufferUtil.alloc(this.degree)\n  var paddedData = Buffer.concat([data, pad], data.length + this.degree)\n\n  // The error correction codewords are the remainder after dividing the data codewords\n  // by a generator polynomial\n  var remainder = Polynomial.mod(paddedData, this.genPoly)\n\n  // return EC data blocks (last n byte, where n is the degree of genPoly)\n  // If coefficients number in remainder are less than genPoly degree,\n  // pad with 0s to the left to reach the needed number of coefficients\n  var start = this.degree - remainder.length\n  if (start > 0) {\n    var buff = BufferUtil.alloc(this.degree)\n    remainder.copy(buff, start)\n\n    return buff\n  }\n\n  return remainder\n}\n\nmodule.exports = ReedSolomonEncoder\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"bg\",attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"flex\":\"\",\"align-center\":\"\",\"justify-center\":\"\",\"color\":\"bg\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm4\":\"\",\"elevation-0\":\"\",\"color\":\"bg\"}},[_c('v-card',{attrs:{\"color\":\"bg\"}},[_c('v-card-text',{staticClass:\"pt-4\"},[_c('v-toolbar',{staticStyle:{\"box-shadow\":\"none\"},attrs:{\"color\":\"bg\",\"elevation-0\":\"\"}},[_c('v-img',{staticClass:\"mx-auto\",attrs:{\"max-height\":\"50\",\"max-width\":\"100\",\"src\":require('../assets/logo.png')}})],1),_c('div',{staticClass:\"d-flex justify-center mb-6\"},[_c('v-banner',{staticClass:\"text-h5\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"Remote Desktop\"))+\" \")])],1),_c('div',{staticClass:\"d-flex justify-center mb-6 text-subtitle-1\"},[_vm._v(\" \"+_vm._s(_vm.messageText)+\" \")]),_c('div',[(!_vm.validationWait)?_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"label\":_vm.$t('Enter your email address'),\"rules\":_vm.emailRules,\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),(!_vm.resetPassword)?_c('v-layout',{attrs:{\"justify-space-between\":\"\"}},[_c('v-btn',{class:{\n                    'blue darken-4 white--text': _vm.valid,\n                    disabled: !_vm.valid,\n                  },attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(_vm._s(_vm.$t(\"Activate\")))]),_c('a',{attrs:{\"href\":\"#/Signup\"},on:{\"click\":_vm.signupClick}},[_vm._v(_vm._s(_vm.$t(\"Sign Up\")))])],1):_vm._e()],1):_c('v-layout',{attrs:{\"justify-space-between\":\"\"}},[(!_vm.passwordLocked)?_c('v-btn',{attrs:{\"color\":\"warning\"},on:{\"click\":function($event){return _vm.resetActivation()}}},[_vm._v(_vm._s(_vm.$t(\"Cancel\")))]):_c('v-btn',{attrs:{\"color\":\"warning\"},on:{\"click\":function($event){return _vm.resentBtn()}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"Resend unlock email\"))+\" \")])],1)],1)],1)],1)],1)],1),_c('v-snackbar',{attrs:{\"timeout\":2000},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\n                  var attrs = ref.attrs;\nreturn [_c('v-btn',_vm._b({attrs:{\"color\":\"info\",\"text\":\"\"},on:{\"click\":function($event){_vm.snackbarSave = false}}},'v-btn',attrs,false),[_vm._v(\" Close \")])]}}]),model:{value:(_vm.snackbarSave),callback:function ($$v) {_vm.snackbarSave=$$v},expression:\"snackbarSave\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid fill-height class=\"bg\">\n    <v-layout flex align-center justify-center color=\"bg\">\n      <v-flex xs12 sm4 elevation-0 color=\"bg\">\n        <v-card color=\"bg\">\n          <v-card-text class=\"pt-4\">\n            <v-toolbar color=\"bg\" elevation-0 style=\"box-shadow: none\">\n              <v-img\n                class=\"mx-auto\"\n                max-height=\"50\"\n                max-width=\"100\"\n                :src=\"require('../assets/logo.png')\"\n              ></v-img>\n            </v-toolbar>\n            <div class=\"d-flex justify-center mb-6\">\n              <v-banner class=\"text-h5\">\n                {{ $t(\"Remote Desktop\") }}\n              </v-banner>\n            </div>\n            <div class=\"d-flex justify-center mb-6 text-subtitle-1\">\n              {{ messageText }}\n            </div>\n            <div>\n              <v-form v-model=\"valid\" ref=\"form\" v-if=\"!validationWait\">\n                <v-text-field\n                  :label=\"$t('Enter your email address')\"\n                  v-model=\"email\"\n                  :rules=\"emailRules\"\n                  required\n                ></v-text-field>\n                <v-layout justify-space-between v-if=\"!resetPassword\">\n                  <v-btn\n                    @click=\"submit\"\n                    color=\"primary\"\n                    :class=\"{\n                      'blue darken-4 white--text': valid,\n                      disabled: !valid,\n                    }\"\n                    >{{ $t(\"Activate\") }}</v-btn\n                  >\n                  <a href=\"#/Signup\" @click=\"signupClick\">{{\n                    $t(\"Sign Up\")\n                  }}</a>\n                </v-layout>\n              </v-form>\n              <v-layout v-else justify-space-between>\n                <v-btn @click=\"resetActivation()\" color=\"warning\" v-if=\"!passwordLocked\">{{\n                  $t(\"Cancel\")\n                }}</v-btn>\n                <v-btn\n                  v-else\n                  @click=\"resentBtn()\" \n                  color=\"warning\"\n                >\n                {{ $t(\"Resend unlock email\")}}\n                </v-btn>\n              </v-layout>\n            </div>\n          </v-card-text>\n        </v-card>\n      </v-flex>\n    </v-layout>\n    <v-snackbar v-model=\"snackbarSave\" :timeout=\"2000\">\n      {{ snackbarText }}\n\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn color=\"info\" text v-bind=\"attrs\" @click=\"snackbarSave = false\">\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n    <!--<v-banner v-else :sticky=\"sticky\" coloe=\"bg\">\n          A verification messaage has been sent to your email address.<br>\n          Please click the verification link in that email.\n\n          <template v-slot:actions>\n            <v-btn text color=\"deep-purple accent-4\"> Send email again </v-btn>\n          </template>\n        </v-banner>-->\n  </v-container>\n</template>\n\n\n<style>\n</style>\n\n <script>\nimport appData from \"../modules/appData\";\nimport appUtils from \"../modules/appUtils\";\nimport LoginController from \"../modules/loginController\";\nimport HmacSHA1 from \"crypto-js/hmac-sha1\";\nimport Hex from \"crypto-js/enc-hex\";\n\n/*\n{\n    \"status\": 1,\n    \"message\": \"Device activated !\",\n    \"authenticationRequired\": false,\n    \"passcodeActivationRequired\": false,\n    \"orgName\": \"Demo\",\n    \"authType\": \"0\",\n    \"firstName\": \"Test\",\n    \"lastName\": \"4\",\n    \"jobTitle\": \"\",\n    \"sendTrackData\": true,\n    \"trackDataUrl\": \"https://nubosoftware.com/track/trackAPI\",\n    \"platformVersionCode\": 360,\n    \"photoCompression\": 70,\n    \"clientProperties\": {\n        \"wallpaperX\": \"html/player/clientWallpaper/wallpaper.jpg\",\n        \"passcodeTimeout\": 300\n    },\n    \"sendCameraDetails\": true,\n    \"passcodeminchars\": 6,\n    \"passcodetype\": 1,\n    \"passcodetypechange\": 0,\n    \"clientauthtype\": 4,\n    \"secondauthmethod\": 3,\n    \"otptype\": 0,\n    \"watermark\": \"Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    Nubo Demo App                                    \",\n    \"canSetBiometricToken\": true,\n    \"canSetOTPToken\": true,\n    \"disableUserAuthentication\": false,\n    \"loginToken\": \"3c2aa34c9f472419d0ce445d61a202fca977f8d74df2d8a0c0cf9f8df7ebc803dcd8dccd8c0cb0a6e5888f743a52b951\"\n}\n*/\nexport default {\n  name: \"Login\",\n  data: () => ({\n    validationWait: false,\n    validationWaitStatus: 0,\n    resetPassword: false,\n    passwordLocked: false,\n    setPassword: false,\n    messageText: \"\",\n    msgType: \"info\",\n    snackbarSave: false,\n    snackbarText: \"\",\n    valid: false,\n    e1: true,\n    e2: true,\n    password: \"\",\n    passwordCheck: \"\",\n    passwordRules: [(v) => !!v || \"Password is required\"],\n    checkPasswordRules: [(v) => !!v || \"Password is required\"],\n    email: \"\",\n    emailRules: [\n      (v) => !!v || \"Email is required\",\n      (v) =>\n        /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,10})+$/.test(v) ||\n        \"Email must be valid\",\n    ],\n    activate_text: \"\",\n    appData,\n  }),\n  methods: {\n    signupClick() {\n      this.$router.push(\"/Signup\");\n      return false;\n    },\n    resentBtn() {\n      let params = {\n          activationKey: appData.activationkey,\n        };\n        appUtils\n          .get({\n            url: \"resendUnlockPasswordLink\",\n            params,\n          })\n          .then((response) => {\n            console.log(`resetPasscode ressponse..`);\n            console.log(response.data);\n            if (response.data.status == 1) {\n              this.snackbarText = this.$t(\"Unlock email sent\");\n              this.snackbarSave = true;\n            }\n\n          })\n          .catch((error) => console.log(error))\n          .finally(() => (this.loading = false));\n    },\n    resetActivation() {\n      console.log(`resetActivation. validationWaitStatus: ${this.validationWaitStatus}`);\n      //this.validationWait = false;\n      if (this.validationWaitStatus == 0) {\n        appData.activationkey = \"\";\n        this.messageText = this.activate_text;\n        appData.commit();\n      } else if (this.validationWaitStatus == 100 || this.validationWaitStatus == 102) {\n        // cancel reset password\n        console.log('Cancel reset password..');\n        let params = {\n          loginToken: appData.loginToken,\n          activationKey: appData.activationkey,\n          action: \"2\",\n        };\n        appUtils\n          .get({\n            url: \"resetPasscode\",\n            params,\n          })\n          .then((response) => {\n            console.log(`resetPasscode ressponse..`);\n            console.log(response.data);\n            if (response.data.status == 1) {\n              //this.validationWait = true;\n              //this.checkValidation();\n            }\n\n          })\n          .catch((error) => console.log(error))\n          .finally(() => (this.loading = false));\n      }\n    },\n    checkValidation: function () {\n      let thisPage = this;\n      if (thisPage.validationWait) {\n        appData.clearValidate();\n        appUtils\n          .get({\n            url: \"validate\",\n            params: {\n              username: thisPage.email,\n              deviceid: appData.deviceid,\n              activationKey: appData.activationkey,\n              playerVersion: \"3.0.50\",\n            },\n          })\n          .then((response) => {\n            console.log(response.data);\n            this.validationWaitStatus = response.data.status;\n            if (response.data.status == 0) {\n              console.log(\"Pending...\");\n              this.messageText = this.$t(\"A verification message has been sent to your inbox. Please click the link to gain access to your remote desktop\");\n              if (thisPage.validationWait) {\n                thisPage.checkValidationLoop();\n              }\n            } else if (response.data.status == 100) {\n              // reset password pending\n              this.messageText = this.$t(\"A verification message has been sent to your inbox. Please click the link to reset your password\");\n              if (thisPage.validationWait) {\n                thisPage.checkValidationLoop();\n              }\n            } else if (response.data.status == 102) {\n              // reset password pending\n              this.messageText = this.$t(\"A verification message has been sent to your inbox. Please click the link to reset your OTP key\");\n              if (thisPage.validationWait) {\n                thisPage.checkValidationLoop();\n              }\n            } else if (response.data.status == 4) {\n              // password locked\n              this.messageText = this.$t(\"You password has been locked. A verification message has been sent to your inbox. Please click the link to unlock your password.\");\n              this.passwordLocked = true;\n              if (thisPage.validationWait) {\n                thisPage.checkValidationLoop();\n              }\n            } else if (response.data.status == 1) {\n              console.log(\"Validatd!\");\n              appData.loginToken = response.data.loginToken;\n              appData.clientauthtype = response.data.clientauthtype;\n              appData.secondauthmethod = response.data.secondauthmethod;\n              appData.canSetOTPToken = response.data.canSetOTPToken;\n              appData.canSetBiometricToken = response.data.canSetBiometricToken;\n              appData.isValidated = true;\n              appData.isValidatedChecked = true;\n              appData.passcodeActivationRequired =\n                response.data.passcodeActivationRequired;\n              appData.passcodetype = response.data.passcodetype;\n              appData.passcodetypechange = response.data.passcodetypechange;\n              appData.passcodeminchars = response.data.passcodeminchars;\n              thisPage.validationWait = false;\n              thisPage.messageText = thisPage.$t(\"Validated!\");\n              LoginController.instance.nuboAuthProcess(thisPage);\n\n              //thisPage.submit();\n            } else {\n              console.log(\"Error\");\n              thisPage.validationWait = false;\n              thisPage.messageText = thisPage.$t(\"Gain access to your remote desktop.\");\n            }\n          })\n          .catch((error) => {\n            console.log(error);\n            if (thisPage.validationWait) {\n              thisPage.checkValidationLoop();\n            }\n          });\n      }\n    },\n    checkValidationLoop: function () {\n      let thisPage = this;\n      setTimeout(function () {\n        thisPage.checkValidation();\n      }, 1000);\n    },\n    resetPasswordClick: function () {\n      this.resetPassword = true;\n      this.messageText = this.$t(\"Reset password\");\n    },\n    resetPasswordSubmit: function () {\n      console.log(\"resetPasswordSubmit..\");\n      appUtils\n        .post({\n          url: \"api/auth/reset\",\n          data: {\n            userName: this.email,\n            deviceid: appData.deviceid,\n            deviceName: appData.deviceName,\n            activationkey: appData.activationkey,\n          },\n        })\n        .then((response) => {\n          console.log(response.data);\n          this.resetPassword = false;\n          if (response.data.status == 200) {\n            appData.activationkey = response.data.activationkey;\n            appData.email = this.email;\n            this.validationWait = true;\n            this.messageText = this.$t(\"A verification message has been sent to your inbox. Please click the link to gain access to your remote desktop.\");\n            this.checkValidationLoop();\n          } else {\n            this.messageText = this.$t(\"Reset password error\");\n            this.msgType = \"error\";\n            console.log(\"Error\");\n          }\n        })\n        .catch((error) => console.log(error));\n    },\n    submit: function () {\n      //if (this.$refs.form.validate()) {\n      console.log(\"submit\");\n      this.messageText = this.$t(\"Checking login information\");\n      this.msgType = \"info\";\n\n      let deviceID = appData.deviceid;\n      let plain = this.email + \"_\" + deviceID;\n      //et signature = CryptoJS.HmacSHA1(\n      let signature = Hex.stringify(\n        HmacSHA1(plain, \"1981abe0d32d93967648319b013b03f05a119c9f619cc98f\")\n      );\n      console.log(\"signature=\" + signature);\n\n      let params = {\n        deviceid: deviceID,\n        email: this.email,\n        signature: signature,\n        regid: \"none\",\n        alreadyUser: \"Y\",\n        deviceType: appData.deviceType,\n        deviceName: appData.deviceName,\n      };\n\n      appUtils\n        .get({\n          url: \"activate\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n\n          if (response.data.status == 0) {\n            appData.activationkey = response.data.activationKey;\n            appData.email = this.email;\n            appData.validationWait = true;\n            this.validationWait = true;\n            this.messageText = this.$t(\"A verification message has been sent to your inbox. Please click the link to gain access to your remote desktop.\");\n            appData.commit();\n            this.checkValidationLoop();\n          } else {\n            this.messageText = this.$t(\"Email not found. Please retype, or sign up if you still have not.\");\n            this.msgType = \"error\";\n            console.log(\"Error\");\n          }\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n\n      /*} else {\n        console.log(\"Submit. form is not valid..\");\n      }*/\n    },\n  },\n  watch: {\n    /*validationWait: function (newVal) {\n      console.log(`validationWait: ${newVal}`);\n      appData.validationWait = newVal;\n    },*/\n  },\n  created: function () {\n    this.activate_text = this.$t(\"Gain access to your remote desktop.\");\n    this.validationWait = appData.activationkey;\n    console.log(\n      `validationWait: ${appData.validationWait}, appData.activationkey: ${appData.activationkey}`\n    );\n    this.email = appData.email;\n    if (this.validationWait) {\n      this.messageText = this.$t(\"Checking activation...\");\n      this.checkValidation();\n    } else {\n      this.messageText = this.activate_text;\n    }\n\n    this.passwordRules = [(v) => !!v || this.$t(\"Password is required\")];\n    this.checkPasswordRules = [\n      (v) => !!v || this.$t(\"Password is required\"),\n      (v) => v === this.password || \"Passwords do not match\",\n    ];\n    this.emailRules = [\n      (v) => !!v || this.$t(\"Email is required\"),\n      (v) =>\n        /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,10})+$/.test(v) ||\n        this.$t(\"Email must be valid\"),\n    ];\n    //this.$emit(\"updatePage\", \"Login\");\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Splash.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Splash.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Splash.vue?vue&type=template&id=bf5471d2&\"\nimport script from \"./Splash.vue?vue&type=script&lang=js&\"\nexport * from \"./Splash.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBanner } from 'vuetify/lib/components/VBanner';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBanner,VBtn,VCard,VCardText,VContainer,VFlex,VForm,VImg,VLayout,VSnackbar,VTextField,VToolbar})\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var getSymbolSize = require('./utils').getSymbolSize\nvar FINDER_PATTERN_SIZE = 7\n\n/**\n * Returns an array containing the positions of each finder pattern.\n * Each array's element represent the top-left point of the pattern as (x, y) coordinates\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinates\n */\nexports.getPositions = function getPositions (version) {\n  var size = getSymbolSize(version)\n\n  return [\n    // top-left\n    [0, 0],\n    // top-right\n    [size - FINDER_PATTERN_SIZE, 0],\n    // bottom-left\n    [0, size - FINDER_PATTERN_SIZE]\n  ]\n}\n","var Utils = require('./utils')\n\nvar G15 = (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0)\nvar G15_MASK = (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1)\nvar G15_BCH = Utils.getBCHDigit(G15)\n\n/**\n * Returns format information with relative error correction bits\n *\n * The format information is a 15-bit sequence containing 5 data bits,\n * with 10 error correction bits calculated using the (15, 5) BCH code.\n *\n * @param  {Number} errorCorrectionLevel Error correction level\n * @param  {Number} mask                 Mask pattern\n * @return {Number}                      Encoded format information bits\n */\nexports.getEncodedBits = function getEncodedBits (errorCorrectionLevel, mask) {\n  var data = ((errorCorrectionLevel.bit << 3) | mask)\n  var d = data << 10\n\n  while (Utils.getBCHDigit(d) - G15_BCH >= 0) {\n    d ^= (G15 << (Utils.getBCHDigit(d) - G15_BCH))\n  }\n\n  // xor final data with mask pattern in order to ensure that\n  // no combination of Error Correction Level and data mask pattern\n  // will result in an all-zero data string\n  return ((data << 10) | d) ^ G15_MASK\n}\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $copyWithin = require('../internals/array-copy-within');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.copyWithin` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.copywithin\nexportTypedArrayMethod('copyWithin', function copyWithin(target, start /* , end */) {\n  return $copyWithin.call(aTypedArray(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n});\n","import './VIcon.sass'\n\n// Mixins\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport Colorable from '../../mixins/colorable'\nimport Sizeable from '../../mixins/sizeable'\nimport Themeable from '../../mixins/themeable'\n\n// Util\nimport { convertToUnit, keys, remapInternalIcon } from '../../util/helpers'\n\n// Types\nimport Vue, { CreateElement, VNode, VNodeChildren, VNodeData } from 'vue'\nimport mixins from '../../util/mixins'\nimport { VuetifyIcon, VuetifyIconComponent } from 'vuetify/types/services/icons'\n\nenum SIZE_MAP {\n  xSmall = '12px',\n  small = '16px',\n  default = '24px',\n  medium = '28px',\n  large = '36px',\n  xLarge = '40px'\n}\n\nfunction isFontAwesome5 (iconType: string): boolean {\n  return ['fas', 'far', 'fal', 'fab', 'fad', 'fak'].some(val => iconType.includes(val))\n}\n\nfunction isSvgPath (icon: string): boolean {\n  return (/^[mzlhvcsqta]\\s*[-+.0-9][^mlhvzcsqta]+/i.test(icon) && /[\\dz]$/i.test(icon) && icon.length > 4)\n}\n\nconst VIcon = mixins(\n  BindsAttrs,\n  Colorable,\n  Sizeable,\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-icon',\n\n  props: {\n    dense: Boolean,\n    disabled: Boolean,\n    left: Boolean,\n    right: Boolean,\n    size: [Number, String],\n    tag: {\n      type: String,\n      required: false,\n      default: 'i',\n    },\n  },\n\n  computed: {\n    medium () {\n      return false\n    },\n    hasClickListener (): boolean {\n      return Boolean(\n        this.listeners$.click || this.listeners$['!click']\n      )\n    },\n  },\n\n  methods: {\n    getIcon (): VuetifyIcon {\n      let iconName = ''\n      if (this.$slots.default) iconName = this.$slots.default[0].text!.trim()\n\n      return remapInternalIcon(this, iconName)\n    },\n    getSize (): string | undefined {\n      const sizes = {\n        xSmall: this.xSmall,\n        small: this.small,\n        medium: this.medium,\n        large: this.large,\n        xLarge: this.xLarge,\n      }\n\n      const explicitSize = keys(sizes).find(key => sizes[key])\n\n      return (\n        (explicitSize && SIZE_MAP[explicitSize]) || convertToUnit(this.size)\n      )\n    },\n    // Component data for both font icon and SVG wrapper span\n    getDefaultData (): VNodeData {\n      return {\n        staticClass: 'v-icon notranslate',\n        class: {\n          'v-icon--disabled': this.disabled,\n          'v-icon--left': this.left,\n          'v-icon--link': this.hasClickListener,\n          'v-icon--right': this.right,\n          'v-icon--dense': this.dense,\n        },\n        attrs: {\n          'aria-hidden': !this.hasClickListener,\n          disabled: this.hasClickListener && this.disabled,\n          type: this.hasClickListener ? 'button' : undefined,\n          ...this.attrs$,\n        },\n        on: this.listeners$,\n      }\n    },\n    getSvgWrapperData () {\n      const fontSize = this.getSize()\n      const wrapperData = {\n        ...this.getDefaultData(),\n        style: fontSize ? {\n          fontSize,\n          height: fontSize,\n          width: fontSize,\n        } : undefined,\n      }\n      this.applyColors(wrapperData)\n\n      return wrapperData\n    },\n    applyColors (data: VNodeData): void {\n      data.class = { ...data.class, ...this.themeClasses }\n      this.setTextColor(this.color, data)\n    },\n    renderFontIcon (icon: string, h: CreateElement): VNode {\n      const newChildren: VNodeChildren = []\n      const data = this.getDefaultData()\n\n      let iconType = 'material-icons'\n      // Material Icon delimiter is _\n      // https://material.io/icons/\n      const delimiterIndex = icon.indexOf('-')\n      const isMaterialIcon = delimiterIndex <= -1\n\n      if (isMaterialIcon) {\n        // Material icon uses ligatures.\n        newChildren.push(icon)\n      } else {\n        iconType = icon.slice(0, delimiterIndex)\n        if (isFontAwesome5(iconType)) iconType = ''\n      }\n\n      data.class[iconType] = true\n      data.class[icon] = !isMaterialIcon\n\n      const fontSize = this.getSize()\n      if (fontSize) data.style = { fontSize }\n\n      this.applyColors(data)\n\n      return h(this.hasClickListener ? 'button' : this.tag, data, newChildren)\n    },\n    renderSvgIcon (icon: string, h: CreateElement): VNode {\n      const svgData: VNodeData = {\n        class: 'v-icon__svg',\n        attrs: {\n          xmlns: 'http://www.w3.org/2000/svg',\n          viewBox: '0 0 24 24',\n          role: 'img',\n          'aria-hidden': true,\n        },\n      }\n\n      const size = this.getSize()\n      if (size) {\n        svgData.style = {\n          fontSize: size,\n          height: size,\n          width: size,\n        }\n      }\n\n      return h(this.hasClickListener ? 'button' : 'span', this.getSvgWrapperData(), [\n        h('svg', svgData, [\n          h('path', {\n            attrs: {\n              d: icon,\n            },\n          }),\n        ]),\n      ])\n    },\n    renderSvgIconComponent (\n      icon: VuetifyIconComponent,\n      h: CreateElement\n    ): VNode {\n      const data: VNodeData = {\n        class: {\n          'v-icon__component': true,\n        },\n      }\n\n      const size = this.getSize()\n      if (size) {\n        data.style = {\n          fontSize: size,\n          height: size,\n          width: size,\n        }\n      }\n\n      this.applyColors(data)\n\n      const component = icon.component\n      data.props = icon.props\n      data.nativeOn = data.on\n\n      return h(this.hasClickListener ? 'button' : 'span', this.getSvgWrapperData(), [\n        h(component, data),\n      ])\n    },\n  },\n\n  render (h: CreateElement): VNode {\n    const icon = this.getIcon()\n\n    if (typeof icon === 'string') {\n      if (isSvgPath(icon)) {\n        return this.renderSvgIcon(icon, h)\n      }\n      return this.renderFontIcon(icon, h)\n    }\n\n    return this.renderSvgIconComponent(icon, h)\n  },\n})\n\nexport default Vue.extend({\n  name: 'v-icon',\n\n  $_wrapperFor: VIcon,\n\n  functional: true,\n\n  render (h, { data, children }): VNode {\n    let iconName = ''\n\n    // Support usage of v-text and v-html\n    if (data.domProps) {\n      iconName = data.domProps.textContent ||\n        data.domProps.innerHTML ||\n        iconName\n\n      // Remove nodes so it doesn't\n      // overwrite our changes\n      delete data.domProps.textContent\n      delete data.domProps.innerHTML\n    }\n\n    return h(VIcon, data, iconName ? [iconName] : children)\n  },\n})\n","import VIcon from './VIcon'\n\nexport { VIcon }\nexport default VIcon\n","var Mode = require('./mode')\n\n/**\n * Array of characters available in alphanumeric mode\n *\n * As per QR Code specification, to each character\n * is assigned a value from 0 to 44 which in this case coincides\n * with the array index\n *\n * @type {Array}\n */\nvar ALPHA_NUM_CHARS = [\n  '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',\n  'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',\n  'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',\n  ' ', '$', '%', '*', '+', '-', '.', '/', ':'\n]\n\nfunction AlphanumericData (data) {\n  this.mode = Mode.ALPHANUMERIC\n  this.data = data\n}\n\nAlphanumericData.getBitsLength = function getBitsLength (length) {\n  return 11 * Math.floor(length / 2) + 6 * (length % 2)\n}\n\nAlphanumericData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nAlphanumericData.prototype.getBitsLength = function getBitsLength () {\n  return AlphanumericData.getBitsLength(this.data.length)\n}\n\nAlphanumericData.prototype.write = function write (bitBuffer) {\n  var i\n\n  // Input data characters are divided into groups of two characters\n  // and encoded as 11-bit binary codes.\n  for (i = 0; i + 2 <= this.data.length; i += 2) {\n    // The character value of the first character is multiplied by 45\n    var value = ALPHA_NUM_CHARS.indexOf(this.data[i]) * 45\n\n    // The character value of the second digit is added to the product\n    value += ALPHA_NUM_CHARS.indexOf(this.data[i + 1])\n\n    // The sum is then stored as 11-bit binary number\n    bitBuffer.put(value, 11)\n  }\n\n  // If the number of input data characters is not a multiple of two,\n  // the character value of the final character is encoded as a 6-bit binary number.\n  if (this.data.length % 2) {\n    bitBuffer.put(ALPHA_NUM_CHARS.indexOf(this.data[i]), 6)\n  }\n}\n\nmodule.exports = AlphanumericData\n","var aConstructor = require('../internals/a-constructor');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar bind = require('../internals/function-bind-context');\nvar aTypedArrayConstructor = require('../internals/array-buffer-view-core').aTypedArrayConstructor;\n\nmodule.exports = function from(source /* , mapfn, thisArg */) {\n  var C = aConstructor(this);\n  var O = toObject(source);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var i, length, result, step, iterator, next;\n  if (iteratorMethod && !isArrayIteratorMethod(iteratorMethod)) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    O = [];\n    while (!(step = next.call(iterator)).done) {\n      O.push(step.value);\n    }\n  }\n  if (mapping && argumentsLength > 2) {\n    mapfn = bind(mapfn, arguments[2], 2);\n  }\n  length = lengthOfArrayLike(O);\n  result = new (aTypedArrayConstructor(C))(length);\n  for (i = 0; length > i; i++) {\n    result[i] = mapping ? mapfn(O[i], i) : O[i];\n  }\n  return result;\n};\n","import './_grid.sass'\n\nimport Grid from './grid'\n\nexport default Grid('layout')\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $every = require('../internals/array-iteration').every;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.every` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.every\nexportTypedArrayMethod('every', function every(callbackfn /* , thisArg */) {\n  return $every(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n","// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer !== 'undefined' && typeof DataView !== 'undefined';\n","/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A reader which automatically handles the given input stream, returning\r\n * strictly received packets as array buffers. Note that this object will\r\n * overwrite any installed event handlers on the given Guacamole.InputStream.\r\n * \r\n * @constructor\r\n * @param {Guacamole.InputStream} stream The stream that data will be read\r\n *                                       from.\r\n */\r\nGuacamole.ArrayBufferReader = function(stream) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.InputStream.\r\n     * @private\r\n     */\r\n    var guac_reader = this;\r\n\r\n    // Receive blobs as array buffers\r\n    stream.onblob = function(data) {\r\n\r\n        // Convert to ArrayBuffer\r\n        var binary = window.atob(data);\r\n        var arrayBuffer = new ArrayBuffer(binary.length);\r\n        var bufferView = new Uint8Array(arrayBuffer);\r\n\r\n        for (var i=0; i<binary.length; i++)\r\n            bufferView[i] = binary.charCodeAt(i);\r\n\r\n        // Call handler, if present\r\n        if (guac_reader.ondata)\r\n            guac_reader.ondata(arrayBuffer);\r\n\r\n    };\r\n\r\n    // Simply call onend when end received\r\n    stream.onend = function() {\r\n        if (guac_reader.onend)\r\n            guac_reader.onend();\r\n    };\r\n\r\n    /**\r\n     * Fired once for every blob of data received.\r\n     * \r\n     * @event\r\n     * @param {ArrayBuffer} buffer The data packet received.\r\n     */\r\n    this.ondata = null;\r\n\r\n    /**\r\n     * Fired once this stream is finished and no further data will be written.\r\n     * @event\r\n     */\r\n    this.onend = null;\r\n\r\n};\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A writer which automatically writes to the given output stream with arbitrary\r\n * binary data, supplied as ArrayBuffers.\r\n * \r\n * @constructor\r\n * @param {Guacamole.OutputStream} stream The stream that data will be written\r\n *                                        to.\r\n */\r\nGuacamole.ArrayBufferWriter = function(stream) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.StringWriter.\r\n     * @private\r\n     */\r\n    var guac_writer = this;\r\n\r\n    // Simply call onack for acknowledgements\r\n    stream.onack = function(status) {\r\n        if (guac_writer.onack)\r\n            guac_writer.onack(status);\r\n    };\r\n\r\n    /**\r\n     * Encodes the given data as base64, sending it as a blob. The data must\r\n     * be small enough to fit into a single blob instruction.\r\n     * \r\n     * @private\r\n     * @param {Uint8Array} bytes The data to send.\r\n     */\r\n    function __send_blob(bytes) {\r\n\r\n        var binary = \"\";\r\n\r\n        // Produce binary string from bytes in buffer\r\n        for (var i=0; i<bytes.byteLength; i++)\r\n            binary += String.fromCharCode(bytes[i]);\r\n\r\n        // Send as base64\r\n        stream.sendBlob(window.btoa(binary));\r\n\r\n    }\r\n\r\n    /**\r\n     * The maximum length of any blob sent by this Guacamole.ArrayBufferWriter,\r\n     * in bytes. Data sent via\r\n     * [sendData()]{@link Guacamole.ArrayBufferWriter#sendData} which exceeds\r\n     * this length will be split into multiple blobs. As the Guacamole protocol\r\n     * limits the maximum size of any instruction or instruction element to\r\n     * 8192 bytes, and the contents of blobs will be base64-encoded, this value\r\n     * should only be increased with extreme caution.\r\n     *\r\n     * @type {Number}\r\n     * @default {@link Guacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH}\r\n     */\r\n    this.blobLength = Guacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH;\r\n\r\n    /**\r\n     * Sends the given data.\r\n     * \r\n     * @param {ArrayBuffer|TypedArray} data The data to send.\r\n     */\r\n    this.sendData = function(data) {\r\n\r\n        var bytes = new Uint8Array(data);\r\n\r\n        // If small enough to fit into single instruction, send as-is\r\n        if (bytes.length <= guac_writer.blobLength)\r\n            __send_blob(bytes);\r\n\r\n        // Otherwise, send as multiple instructions\r\n        else {\r\n            for (var offset=0; offset<bytes.length; offset += guac_writer.blobLength)\r\n                __send_blob(bytes.subarray(offset, offset + guac_writer.blobLength));\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Signals that no further text will be sent, effectively closing the\r\n     * stream.\r\n     */\r\n    this.sendEnd = function() {\r\n        stream.sendEnd();\r\n    };\r\n\r\n    /**\r\n     * Fired for received data, if acknowledged by the server.\r\n     * @event\r\n     * @param {Guacamole.Status} status The status of the operation.\r\n     */\r\n    this.onack = null;\r\n\r\n};\r\n\r\n/**\r\n * The default maximum blob length for new Guacamole.ArrayBufferWriter\r\n * instances.\r\n *\r\n * @constant\r\n * @type {Number}\r\n */\r\nGuacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH = 6048;\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Maintains a singleton instance of the Web Audio API AudioContext class,\r\n * instantiating the AudioContext only in response to the first call to\r\n * getAudioContext(), and only if no existing AudioContext instance has been\r\n * provided via the singleton property. Subsequent calls to getAudioContext()\r\n * will return the same instance.\r\n *\r\n * @namespace\r\n */\r\nGuacamole.AudioContextFactory = {\r\n\r\n    /**\r\n     * A singleton instance of a Web Audio API AudioContext object, or null if\r\n     * no instance has yes been created. This property may be manually set if\r\n     * you wish to supply your own AudioContext instance, but care must be\r\n     * taken to do so as early as possible. Assignments to this property will\r\n     * not retroactively affect the value returned by previous calls to\r\n     * getAudioContext().\r\n     *\r\n     * @type {AudioContext}\r\n     */\r\n    'singleton' : null,\r\n\r\n    /**\r\n     * Returns a singleton instance of a Web Audio API AudioContext object.\r\n     *\r\n     * @return {AudioContext}\r\n     *     A singleton instance of a Web Audio API AudioContext object, or null\r\n     *     if the Web Audio API is not supported.\r\n     */\r\n    'getAudioContext' : function getAudioContext() {\r\n\r\n        // Fallback to Webkit-specific AudioContext implementation\r\n        var AudioContext = window.AudioContext || window.webkitAudioContext;\r\n\r\n        // Get new AudioContext instance if Web Audio API is supported\r\n        if (AudioContext) {\r\n            try {\r\n\r\n                // Create new instance if none yet exists\r\n                if (!Guacamole.AudioContextFactory.singleton)\r\n                    Guacamole.AudioContextFactory.singleton = new AudioContext();\r\n\r\n                // Return singleton instance\r\n                return Guacamole.AudioContextFactory.singleton;\r\n\r\n            }\r\n            catch (e) {\r\n                // Do not use Web Audio API if not allowed by browser\r\n            }\r\n        }\r\n\r\n        // Web Audio API not supported\r\n        return null;\r\n\r\n    }\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Abstract audio player which accepts, queues and plays back arbitrary audio\r\n * data. It is up to implementations of this class to provide some means of\r\n * handling a provided Guacamole.InputStream. Data received along the provided\r\n * stream is to be played back immediately.\r\n *\r\n * @constructor\r\n */\r\nGuacamole.AudioPlayer = function AudioPlayer() {\r\n\r\n    /**\r\n     * Notifies this Guacamole.AudioPlayer that all audio up to the current\r\n     * point in time has been given via the underlying stream, and that any\r\n     * difference in time between queued audio data and the current time can be\r\n     * considered latency.\r\n     */\r\n    this.sync = function sync() {\r\n        // Default implementation - do nothing\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * Determines whether the given mimetype is supported by any built-in\r\n * implementation of Guacamole.AudioPlayer, and thus will be properly handled\r\n * by Guacamole.AudioPlayer.getInstance().\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype to check.\r\n *\r\n * @returns {Boolean}\r\n *     true if the given mimetype is supported by any built-in\r\n *     Guacamole.AudioPlayer, false otherwise.\r\n */\r\nGuacamole.AudioPlayer.isSupportedType = function isSupportedType(mimetype) {\r\n\r\n    return Guacamole.RawAudioPlayer.isSupportedType(mimetype);\r\n\r\n};\r\n\r\n/**\r\n * Returns a list of all mimetypes supported by any built-in\r\n * Guacamole.AudioPlayer, in rough order of priority. Beware that only the core\r\n * mimetypes themselves will be listed. Any mimetype parameters, even required\r\n * ones, will not be included in the list. For example, \"audio/L8\" is a\r\n * supported raw audio mimetype that is supported, but it is invalid without\r\n * additional parameters. Something like \"audio/L8;rate=44100\" would be valid,\r\n * however (see https://tools.ietf.org/html/rfc4856).\r\n *\r\n * @returns {String[]}\r\n *     A list of all mimetypes supported by any built-in Guacamole.AudioPlayer,\r\n *     excluding any parameters.\r\n */\r\nGuacamole.AudioPlayer.getSupportedTypes = function getSupportedTypes() {\r\n\r\n    return Guacamole.RawAudioPlayer.getSupportedTypes();\r\n\r\n};\r\n\r\n/**\r\n * Returns an instance of Guacamole.AudioPlayer providing support for the given\r\n * audio format. If support for the given audio format is not available, null\r\n * is returned.\r\n *\r\n * @param {Guacamole.InputStream} stream\r\n *     The Guacamole.InputStream to read audio data from.\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype of the audio data in the provided stream.\r\n *\r\n * @return {Guacamole.AudioPlayer}\r\n *     A Guacamole.AudioPlayer instance supporting the given mimetype and\r\n *     reading from the given stream, or null if support for the given mimetype\r\n *     is absent.\r\n */\r\nGuacamole.AudioPlayer.getInstance = function getInstance(stream, mimetype) {\r\n\r\n    // Use raw audio player if possible\r\n    if (Guacamole.RawAudioPlayer.isSupportedType(mimetype))\r\n        return new Guacamole.RawAudioPlayer(stream, mimetype);\r\n\r\n    // No support for given mimetype\r\n    return null;\r\n\r\n};\r\n\r\n/**\r\n * Implementation of Guacamole.AudioPlayer providing support for raw PCM format\r\n * audio. This player relies only on the Web Audio API and does not require any\r\n * browser-level support for its audio formats.\r\n *\r\n * @constructor\r\n * @augments Guacamole.AudioPlayer\r\n * @param {Guacamole.InputStream} stream\r\n *     The Guacamole.InputStream to read audio data from.\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype of the audio data in the provided stream, which must be a\r\n *     \"audio/L8\" or \"audio/L16\" mimetype with necessary parameters, such as:\r\n *     \"audio/L16;rate=44100,channels=2\".\r\n */\r\nGuacamole.RawAudioPlayer = function RawAudioPlayer(stream, mimetype) {\r\n\r\n    /**\r\n     * The format of audio this player will decode.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.RawAudioFormat}\r\n     */\r\n    var format = Guacamole.RawAudioFormat.parse(mimetype);\r\n\r\n    /**\r\n     * An instance of a Web Audio API AudioContext object, or null if the\r\n     * Web Audio API is not supported.\r\n     *\r\n     * @private\r\n     * @type {AudioContext}\r\n     */\r\n    var context = Guacamole.AudioContextFactory.getAudioContext();\r\n\r\n    /**\r\n     * The earliest possible time that the next packet could play without\r\n     * overlapping an already-playing packet, in seconds. Note that while this\r\n     * value is in seconds, it is not an integer value and has microsecond\r\n     * resolution.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var nextPacketTime = context.currentTime;\r\n\r\n    /**\r\n     * Guacamole.ArrayBufferReader wrapped around the audio input stream\r\n     * provided with this Guacamole.RawAudioPlayer was created.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.ArrayBufferReader}\r\n     */\r\n    var reader = new Guacamole.ArrayBufferReader(stream);\r\n\r\n    /**\r\n     * The minimum size of an audio packet split by splitAudioPacket(), in\r\n     * seconds. Audio packets smaller than this will not be split, nor will the\r\n     * split result of a larger packet ever be smaller in size than this\r\n     * minimum.\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type {Number}\r\n     */\r\n    var MIN_SPLIT_SIZE = 0.02;\r\n\r\n    /**\r\n     * The maximum amount of latency to allow between the buffered data stream\r\n     * and the playback position, in seconds. Initially, this is set to\r\n     * roughly one third of a second.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var maxLatency = 0.3;\r\n\r\n    /**\r\n     * The type of typed array that will be used to represent each audio packet\r\n     * internally. This will be either Int8Array or Int16Array, depending on\r\n     * whether the raw audio format is 8-bit or 16-bit.\r\n     *\r\n     * @private\r\n     * @constructor\r\n     */\r\n    var SampleArray = (format.bytesPerSample === 1) ? window.Int8Array : window.Int16Array;\r\n\r\n    /**\r\n     * The maximum absolute value of any sample within a raw audio packet\r\n     * received by this audio player. This depends only on the size of each\r\n     * sample, and will be 128 for 8-bit audio and 32768 for 16-bit audio.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var maxSampleValue = (format.bytesPerSample === 1) ? 128 : 32768;\r\n\r\n    /**\r\n     * The queue of all pending audio packets, as an array of sample arrays.\r\n     * Audio packets which are pending playback will be added to this queue for\r\n     * further manipulation prior to scheduling via the Web Audio API. Once an\r\n     * audio packet leaves this queue and is scheduled via the Web Audio API,\r\n     * no further modifications can be made to that packet.\r\n     *\r\n     * @private\r\n     * @type {SampleArray[]}\r\n     */\r\n    var packetQueue = [];\r\n\r\n    /**\r\n     * Given an array of audio packets, returns a single audio packet\r\n     * containing the concatenation of those packets.\r\n     *\r\n     * @private\r\n     * @param {SampleArray[]} packets\r\n     *     The array of audio packets to concatenate.\r\n     *\r\n     * @returns {SampleArray}\r\n     *     A single audio packet containing the concatenation of all given\r\n     *     audio packets. If no packets are provided, this will be undefined.\r\n     */\r\n    var joinAudioPackets = function joinAudioPackets(packets) {\r\n\r\n        // Do not bother joining if one or fewer packets are in the queue\r\n        if (packets.length <= 1)\r\n            return packets[0];\r\n\r\n        // Determine total sample length of the entire queue\r\n        var totalLength = 0;\r\n        packets.forEach(function addPacketLengths(packet) {\r\n            totalLength += packet.length;\r\n        });\r\n\r\n        // Append each packet within queue\r\n        var offset = 0;\r\n        var joined = new SampleArray(totalLength);\r\n        packets.forEach(function appendPacket(packet) {\r\n            joined.set(packet, offset);\r\n            offset += packet.length;\r\n        });\r\n\r\n        return joined;\r\n\r\n    };\r\n\r\n    /**\r\n     * Given a single packet of audio data, splits off an arbitrary length of\r\n     * audio data from the beginning of that packet, returning the split result\r\n     * as an array of two packets. The split location is determined through an\r\n     * algorithm intended to minimize the liklihood of audible clicking between\r\n     * packets. If no such split location is possible, an array containing only\r\n     * the originally-provided audio packet is returned.\r\n     *\r\n     * @private\r\n     * @param {SampleArray} data\r\n     *     The audio packet to split.\r\n     *\r\n     * @returns {SampleArray[]}\r\n     *     An array of audio packets containing the result of splitting the\r\n     *     provided audio packet. If splitting is possible, this array will\r\n     *     contain two packets. If splitting is not possible, this array will\r\n     *     contain only the originally-provided packet.\r\n     */\r\n    var splitAudioPacket = function splitAudioPacket(data) {\r\n\r\n        var minValue = Number.MAX_VALUE;\r\n        var optimalSplitLength = data.length;\r\n\r\n        // Calculate number of whole samples in the provided audio packet AND\r\n        // in the minimum possible split packet\r\n        var samples = Math.floor(data.length / format.channels);\r\n        var minSplitSamples = Math.floor(format.rate * MIN_SPLIT_SIZE);\r\n\r\n        // Calculate the beginning of the \"end\" of the audio packet\r\n        var start = Math.max(\r\n            format.channels * minSplitSamples,\r\n            format.channels * (samples - minSplitSamples)\r\n        );\r\n\r\n        // For all samples at the end of the given packet, find a point where\r\n        // the perceptible volume across all channels is lowest (and thus is\r\n        // the optimal point to split)\r\n        for (var offset = start; offset < data.length; offset += format.channels) {\r\n\r\n            // Calculate the sum of all values across all channels (the result\r\n            // will be proportional to the average volume of a sample)\r\n            var totalValue = 0;\r\n            for (var channel = 0; channel < format.channels; channel++) {\r\n                totalValue += Math.abs(data[offset + channel]);\r\n            }\r\n\r\n            // If this is the smallest average value thus far, set the split\r\n            // length such that the first packet ends with the current sample\r\n            if (totalValue <= minValue) {\r\n                optimalSplitLength = offset + format.channels;\r\n                minValue = totalValue;\r\n            }\r\n\r\n        }\r\n\r\n        // If packet is not split, return the supplied packet untouched\r\n        if (optimalSplitLength === data.length)\r\n            return [data];\r\n\r\n        // Otherwise, split the packet into two new packets according to the\r\n        // calculated optimal split length\r\n        return [\r\n            new SampleArray(data.buffer.slice(0, optimalSplitLength * format.bytesPerSample)),\r\n            new SampleArray(data.buffer.slice(optimalSplitLength * format.bytesPerSample))\r\n        ];\r\n\r\n    };\r\n\r\n    /**\r\n     * Pushes the given packet of audio data onto the playback queue. Unlike\r\n     * other private functions within Guacamole.RawAudioPlayer, the type of the\r\n     * ArrayBuffer packet of audio data here need not be specific to the type\r\n     * of audio (as with SampleArray). The ArrayBuffer type provided by a\r\n     * Guacamole.ArrayBufferReader, for example, is sufficient. Any necessary\r\n     * conversions will be performed automatically internally.\r\n     *\r\n     * @private\r\n     * @param {ArrayBuffer} data\r\n     *     A raw packet of audio data that should be pushed onto the audio\r\n     *     playback queue.\r\n     */\r\n    var pushAudioPacket = function pushAudioPacket(data) {\r\n        packetQueue.push(new SampleArray(data));\r\n    };\r\n\r\n    /**\r\n     * Shifts off and returns a packet of audio data from the beginning of the\r\n     * playback queue. The length of this audio packet is determined\r\n     * dynamically according to the click-reduction algorithm implemented by\r\n     * splitAudioPacket().\r\n     *\r\n     * @private\r\n     * @returns {SampleArray}\r\n     *     A packet of audio data pulled from the beginning of the playback\r\n     *     queue.\r\n     */\r\n    var shiftAudioPacket = function shiftAudioPacket() {\r\n\r\n        // Flatten data in packet queue\r\n        var data = joinAudioPackets(packetQueue);\r\n        if (!data)\r\n            return null;\r\n\r\n        // Pull an appropriate amount of data from the front of the queue\r\n        packetQueue = splitAudioPacket(data);\r\n        data = packetQueue.shift();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    /**\r\n     * Converts the given audio packet into an AudioBuffer, ready for playback\r\n     * by the Web Audio API. Unlike the raw audio packets received by this\r\n     * audio player, AudioBuffers require floating point samples and are split\r\n     * into isolated planes of channel-specific data.\r\n     *\r\n     * @private\r\n     * @param {SampleArray} data\r\n     *     The raw audio packet that should be converted into a Web Audio API\r\n     *     AudioBuffer.\r\n     *\r\n     * @returns {AudioBuffer}\r\n     *     A new Web Audio API AudioBuffer containing the provided audio data,\r\n     *     converted to the format used by the Web Audio API.\r\n     */\r\n    var toAudioBuffer = function toAudioBuffer(data) {\r\n\r\n        // Calculate total number of samples\r\n        var samples = data.length / format.channels;\r\n\r\n        // Determine exactly when packet CAN play\r\n        var packetTime = context.currentTime;\r\n        if (nextPacketTime < packetTime)\r\n            nextPacketTime = packetTime;\r\n\r\n        // Get audio buffer for specified format\r\n        var audioBuffer = context.createBuffer(format.channels, samples, format.rate);\r\n\r\n        // Convert each channel\r\n        for (var channel = 0; channel < format.channels; channel++) {\r\n\r\n            var audioData = audioBuffer.getChannelData(channel);\r\n\r\n            // Fill audio buffer with data for channel\r\n            var offset = channel;\r\n            for (var i = 0; i < samples; i++) {\r\n                audioData[i] = data[offset] / maxSampleValue;\r\n                offset += format.channels;\r\n            }\r\n\r\n        }\r\n\r\n        return audioBuffer;\r\n\r\n    };\r\n\r\n    // Defer playback of received audio packets slightly\r\n    reader.ondata = function playReceivedAudio(data) {\r\n\r\n        // Push received samples onto queue\r\n        pushAudioPacket(new SampleArray(data));\r\n\r\n        // Shift off an arbitrary packet of audio data from the queue (this may\r\n        // be different in size from the packet just pushed)\r\n        var packet = shiftAudioPacket();\r\n        if (!packet)\r\n            return;\r\n\r\n        // Determine exactly when packet CAN play\r\n        var packetTime = context.currentTime;\r\n        if (nextPacketTime < packetTime)\r\n            nextPacketTime = packetTime;\r\n\r\n        // Set up buffer source\r\n        var source = context.createBufferSource();\r\n        source.connect(context.destination);\r\n\r\n        // Use noteOn() instead of start() if necessary\r\n        if (!source.start)\r\n            source.start = source.noteOn;\r\n\r\n        // Schedule packet\r\n        source.buffer = toAudioBuffer(packet);\r\n        source.start(nextPacketTime);\r\n\r\n        // Update timeline by duration of scheduled packet\r\n        nextPacketTime += packet.length / format.channels / format.rate;\r\n\r\n    };\r\n\r\n    /** @override */\r\n    this.sync = function sync() {\r\n\r\n        // Calculate elapsed time since last sync\r\n        var now = context.currentTime;\r\n\r\n        // Reschedule future playback time such that playback latency is\r\n        // bounded within a reasonable latency threshold\r\n        nextPacketTime = Math.min(nextPacketTime, now + maxLatency);\r\n\r\n    };\r\n\r\n};\r\n\r\nGuacamole.RawAudioPlayer.prototype = new Guacamole.AudioPlayer();\r\n\r\n/**\r\n * Determines whether the given mimetype is supported by\r\n * Guacamole.RawAudioPlayer.\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype to check.\r\n *\r\n * @returns {Boolean}\r\n *     true if the given mimetype is supported by Guacamole.RawAudioPlayer,\r\n *     false otherwise.\r\n */\r\nGuacamole.RawAudioPlayer.isSupportedType = function isSupportedType(mimetype) {\r\n\r\n    // No supported types if no Web Audio API\r\n    if (!Guacamole.AudioContextFactory.getAudioContext())\r\n        return false;\r\n\r\n    return Guacamole.RawAudioFormat.parse(mimetype) !== null;\r\n\r\n};\r\n\r\n/**\r\n * Returns a list of all mimetypes supported by Guacamole.RawAudioPlayer. Only\r\n * the core mimetypes themselves will be listed. Any mimetype parameters, even\r\n * required ones, will not be included in the list. For example, \"audio/L8\" is\r\n * a raw audio mimetype that may be supported, but it is invalid without\r\n * additional parameters. Something like \"audio/L8;rate=44100\" would be valid,\r\n * however (see https://tools.ietf.org/html/rfc4856).\r\n *\r\n * @returns {String[]}\r\n *     A list of all mimetypes supported by Guacamole.RawAudioPlayer, excluding\r\n *     any parameters. If the necessary JavaScript APIs for playing raw audio\r\n *     are absent, this list will be empty.\r\n */\r\nGuacamole.RawAudioPlayer.getSupportedTypes = function getSupportedTypes() {\r\n\r\n    // No supported types if no Web Audio API\r\n    if (!Guacamole.AudioContextFactory.getAudioContext())\r\n        return [];\r\n\r\n    // We support 8-bit and 16-bit raw PCM\r\n    return [\r\n        'audio/L8',\r\n        'audio/L16'\r\n    ];\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Abstract audio recorder which streams arbitrary audio data to an underlying\r\n * Guacamole.OutputStream. It is up to implementations of this class to provide\r\n * some means of handling this Guacamole.OutputStream. Data produced by the\r\n * recorder is to be sent along the provided stream immediately.\r\n *\r\n * @constructor\r\n */\r\nGuacamole.AudioRecorder = function AudioRecorder() {\r\n\r\n    /**\r\n     * Callback which is invoked when the audio recording process has stopped\r\n     * and the underlying Guacamole stream has been closed normally. Audio will\r\n     * only resume recording if a new Guacamole.AudioRecorder is started. This\r\n     * Guacamole.AudioRecorder instance MAY NOT be reused.\r\n     *\r\n     * @event\r\n     */\r\n    this.onclose = null;\r\n\r\n    /**\r\n     * Callback which is invoked when the audio recording process cannot\r\n     * continue due to an error, if it has started at all. The underlying\r\n     * Guacamole stream is automatically closed. Future attempts to record\r\n     * audio should not be made, and this Guacamole.AudioRecorder instance\r\n     * MAY NOT be reused.\r\n     *\r\n     * @event\r\n     */\r\n    this.onerror = null;\r\n\r\n};\r\n\r\n/**\r\n * Determines whether the given mimetype is supported by any built-in\r\n * implementation of Guacamole.AudioRecorder, and thus will be properly handled\r\n * by Guacamole.AudioRecorder.getInstance().\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype to check.\r\n *\r\n * @returns {Boolean}\r\n *     true if the given mimetype is supported by any built-in\r\n *     Guacamole.AudioRecorder, false otherwise.\r\n */\r\nGuacamole.AudioRecorder.isSupportedType = function isSupportedType(mimetype) {\r\n\r\n    return Guacamole.RawAudioRecorder.isSupportedType(mimetype);\r\n\r\n};\r\n\r\n/**\r\n * Returns a list of all mimetypes supported by any built-in\r\n * Guacamole.AudioRecorder, in rough order of priority. Beware that only the\r\n * core mimetypes themselves will be listed. Any mimetype parameters, even\r\n * required ones, will not be included in the list. For example, \"audio/L8\" is\r\n * a supported raw audio mimetype that is supported, but it is invalid without\r\n * additional parameters. Something like \"audio/L8;rate=44100\" would be valid,\r\n * however (see https://tools.ietf.org/html/rfc4856).\r\n *\r\n * @returns {String[]}\r\n *     A list of all mimetypes supported by any built-in\r\n *     Guacamole.AudioRecorder, excluding any parameters.\r\n */\r\nGuacamole.AudioRecorder.getSupportedTypes = function getSupportedTypes() {\r\n\r\n    return Guacamole.RawAudioRecorder.getSupportedTypes();\r\n\r\n};\r\n\r\n/**\r\n * Returns an instance of Guacamole.AudioRecorder providing support for the\r\n * given audio format. If support for the given audio format is not available,\r\n * null is returned.\r\n *\r\n * @param {Guacamole.OutputStream} stream\r\n *     The Guacamole.OutputStream to send audio data through.\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype of the audio data to be sent along the provided stream.\r\n *\r\n * @return {Guacamole.AudioRecorder}\r\n *     A Guacamole.AudioRecorder instance supporting the given mimetype and\r\n *     writing to the given stream, or null if support for the given mimetype\r\n *     is absent.\r\n */\r\nGuacamole.AudioRecorder.getInstance = function getInstance(stream, mimetype) {\r\n\r\n    // Use raw audio recorder if possible\r\n    if (Guacamole.RawAudioRecorder.isSupportedType(mimetype))\r\n        return new Guacamole.RawAudioRecorder(stream, mimetype);\r\n\r\n    // No support for given mimetype\r\n    return null;\r\n\r\n};\r\n\r\n/**\r\n * Implementation of Guacamole.AudioRecorder providing support for raw PCM\r\n * format audio. This recorder relies only on the Web Audio API and does not\r\n * require any browser-level support for its audio formats.\r\n *\r\n * @constructor\r\n * @augments Guacamole.AudioRecorder\r\n * @param {Guacamole.OutputStream} stream\r\n *     The Guacamole.OutputStream to write audio data to.\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype of the audio data to send along the provided stream, which\r\n *     must be a \"audio/L8\" or \"audio/L16\" mimetype with necessary parameters,\r\n *     such as: \"audio/L16;rate=44100,channels=2\".\r\n */\r\nGuacamole.RawAudioRecorder = function RawAudioRecorder(stream, mimetype) {\r\n\r\n    /**\r\n     * Reference to this RawAudioRecorder.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.RawAudioRecorder}\r\n     */\r\n    var recorder = this;\r\n\r\n    /**\r\n     * The size of audio buffer to request from the Web Audio API when\r\n     * recording or processing audio, in sample-frames. This must be a power of\r\n     * two between 256 and 16384 inclusive, as required by\r\n     * AudioContext.createScriptProcessor().\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type {Number}\r\n     */\r\n    var BUFFER_SIZE = 2048;\r\n\r\n    /**\r\n     * The window size to use when applying Lanczos interpolation, commonly\r\n     * denoted by the variable \"a\".\r\n     * See: https://en.wikipedia.org/wiki/Lanczos_resampling\r\n     *\r\n     * @private\r\n     * @contant\r\n     * @type Number\r\n     */\r\n    var LANCZOS_WINDOW_SIZE = 3;\r\n\r\n    /**\r\n     * The format of audio this recorder will encode.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.RawAudioFormat}\r\n     */\r\n    var format = Guacamole.RawAudioFormat.parse(mimetype);\r\n\r\n    /**\r\n     * An instance of a Web Audio API AudioContext object, or null if the\r\n     * Web Audio API is not supported.\r\n     *\r\n     * @private\r\n     * @type {AudioContext}\r\n     */\r\n    var context = Guacamole.AudioContextFactory.getAudioContext();\r\n\r\n    // Some browsers do not implement navigator.mediaDevices - this\r\n    // shims in this functionality to ensure code compatibility.\r\n    if (!navigator.mediaDevices)\r\n        navigator.mediaDevices = {};\r\n\r\n    // Browsers that either do not implement navigator.mediaDevices\r\n    // at all or do not implement it completely need the getUserMedia\r\n    // method defined.  This shims in this function by detecting\r\n    // one of the supported legacy methods.\r\n    if (!navigator.mediaDevices.getUserMedia)\r\n        navigator.mediaDevices.getUserMedia = (navigator.getUserMedia\r\n                || navigator.webkitGetUserMedia\r\n                || navigator.mozGetUserMedia\r\n                || navigator.msGetUserMedia).bind(navigator);\r\n\r\n    /**\r\n     * Guacamole.ArrayBufferWriter wrapped around the audio output stream\r\n     * provided when this Guacamole.RawAudioRecorder was created.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.ArrayBufferWriter}\r\n     */\r\n    var writer = new Guacamole.ArrayBufferWriter(stream);\r\n\r\n    /**\r\n     * The type of typed array that will be used to represent each audio packet\r\n     * internally. This will be either Int8Array or Int16Array, depending on\r\n     * whether the raw audio format is 8-bit or 16-bit.\r\n     *\r\n     * @private\r\n     * @constructor\r\n     */\r\n    var SampleArray = (format.bytesPerSample === 1) ? window.Int8Array : window.Int16Array;\r\n\r\n    /**\r\n     * The maximum absolute value of any sample within a raw audio packet sent\r\n     * by this audio recorder. This depends only on the size of each sample,\r\n     * and will be 128 for 8-bit audio and 32768 for 16-bit audio.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var maxSampleValue = (format.bytesPerSample === 1) ? 128 : 32768;\r\n\r\n    /**\r\n     * The total number of audio samples read from the local audio input device\r\n     * over the life of this audio recorder.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var readSamples = 0;\r\n\r\n    /**\r\n     * The total number of audio samples written to the underlying Guacamole\r\n     * connection over the life of this audio recorder.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var writtenSamples = 0;\r\n\r\n    /**\r\n     * The audio stream provided by the browser, if allowed. If no stream has\r\n     * yet been received, this will be null.\r\n     *\r\n     * @type MediaStream\r\n     */\r\n    var mediaStream = null;\r\n\r\n    /**\r\n     * The source node providing access to the local audio input device.\r\n     *\r\n     * @private\r\n     * @type {MediaStreamAudioSourceNode}\r\n     */\r\n    var source = null;\r\n\r\n    /**\r\n     * The script processing node which receives audio input from the media\r\n     * stream source node as individual audio buffers.\r\n     *\r\n     * @private\r\n     * @type {ScriptProcessorNode}\r\n     */\r\n    var processor = null;\r\n\r\n    /**\r\n     * The normalized sinc function. The normalized sinc function is defined as\r\n     * 1 for x=0 and sin(PI * x) / (PI * x) for all other values of x.\r\n     *\r\n     * See: https://en.wikipedia.org/wiki/Sinc_function\r\n     *\r\n     * @private\r\n     * @param {Number} x\r\n     *     The point at which the normalized sinc function should be computed.\r\n     *\r\n     * @returns {Number}\r\n     *     The value of the normalized sinc function at x.\r\n     */\r\n    var sinc = function sinc(x) {\r\n\r\n        // The value of sinc(0) is defined as 1\r\n        if (x === 0)\r\n            return 1;\r\n\r\n        // Otherwise, normlized sinc(x) is sin(PI * x) / (PI * x)\r\n        var piX = Math.PI * x;\r\n        return Math.sin(piX) / piX;\r\n\r\n    };\r\n\r\n    /**\r\n     * Calculates the value of the Lanczos kernal at point x for a given window\r\n     * size. See: https://en.wikipedia.org/wiki/Lanczos_resampling\r\n     *\r\n     * @private\r\n     * @param {Number} x\r\n     *     The point at which the value of the Lanczos kernel should be\r\n     *     computed.\r\n     *\r\n     * @param {Number} a\r\n     *     The window size to use for the Lanczos kernel.\r\n     *\r\n     * @returns {Number}\r\n     *     The value of the Lanczos kernel at the given point for the given\r\n     *     window size.\r\n     */\r\n    var lanczos = function lanczos(x, a) {\r\n\r\n        // Lanczos is sinc(x) * sinc(x / a) for -a < x < a ...\r\n        if (-a < x && x < a)\r\n            return sinc(x) * sinc(x / a);\r\n\r\n        // ... and 0 otherwise\r\n        return 0;\r\n\r\n    };\r\n\r\n    /**\r\n     * Determines the value of the waveform represented by the audio data at\r\n     * the given location. If the value cannot be determined exactly as it does\r\n     * not correspond to an exact sample within the audio data, the value will\r\n     * be derived through interpolating nearby samples.\r\n     *\r\n     * @private\r\n     * @param {Float32Array} audioData\r\n     *     An array of audio data, as returned by AudioBuffer.getChannelData().\r\n     *\r\n     * @param {Number} t\r\n     *     The relative location within the waveform from which the value\r\n     *     should be retrieved, represented as a floating point number between\r\n     *     0 and 1 inclusive, where 0 represents the earliest point in time and\r\n     *     1 represents the latest.\r\n     *\r\n     * @returns {Number}\r\n     *     The value of the waveform at the given location.\r\n     */\r\n    var interpolateSample = function getValueAt(audioData, t) {\r\n\r\n        // Convert [0, 1] range to [0, audioData.length - 1]\r\n        var index = (audioData.length - 1) * t;\r\n\r\n        // Determine the start and end points for the summation used by the\r\n        // Lanczos interpolation algorithm (see: https://en.wikipedia.org/wiki/Lanczos_resampling)\r\n        var start = Math.floor(index) - LANCZOS_WINDOW_SIZE + 1;\r\n        var end = Math.floor(index) + LANCZOS_WINDOW_SIZE;\r\n\r\n        // Calculate the value of the Lanczos interpolation function for the\r\n        // required range\r\n        var sum = 0;\r\n        for (var i = start; i <= end; i++) {\r\n            sum += (audioData[i] || 0) * lanczos(index - i, LANCZOS_WINDOW_SIZE);\r\n        }\r\n\r\n        return sum;\r\n\r\n    };\r\n\r\n    /**\r\n     * Converts the given AudioBuffer into an audio packet, ready for streaming\r\n     * along the underlying output stream. Unlike the raw audio packets used by\r\n     * this audio recorder, AudioBuffers require floating point samples and are\r\n     * split into isolated planes of channel-specific data.\r\n     *\r\n     * @private\r\n     * @param {AudioBuffer} audioBuffer\r\n     *     The Web Audio API AudioBuffer that should be converted to a raw\r\n     *     audio packet.\r\n     *\r\n     * @returns {SampleArray}\r\n     *     A new raw audio packet containing the audio data from the provided\r\n     *     AudioBuffer.\r\n     */\r\n    var toSampleArray = function toSampleArray(audioBuffer) {\r\n\r\n        // Track overall amount of data read\r\n        var inSamples = audioBuffer.length;\r\n        readSamples += inSamples;\r\n\r\n        // Calculate the total number of samples that should be written as of\r\n        // the audio data just received and adjust the size of the output\r\n        // packet accordingly\r\n        var expectedWrittenSamples = Math.round(readSamples * format.rate / audioBuffer.sampleRate);\r\n        var outSamples = expectedWrittenSamples - writtenSamples;\r\n\r\n        // Update number of samples written\r\n        writtenSamples += outSamples;\r\n\r\n        // Get array for raw PCM storage\r\n        var data = new SampleArray(outSamples * format.channels);\r\n\r\n        // Convert each channel\r\n        for (var channel = 0; channel < format.channels; channel++) {\r\n\r\n            var audioData = audioBuffer.getChannelData(channel);\r\n\r\n            // Fill array with data from audio buffer channel\r\n            var offset = channel;\r\n            for (var i = 0; i < outSamples; i++) {\r\n                data[offset] = interpolateSample(audioData, i / (outSamples - 1)) * maxSampleValue;\r\n                offset += format.channels;\r\n            }\r\n\r\n        }\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    /**\r\n     * getUserMedia() callback which handles successful retrieval of an\r\n     * audio stream (successful start of recording).\r\n     *\r\n     * @private\r\n     * @param {MediaStream} stream\r\n     *     A MediaStream which provides access to audio data read from the\r\n     *     user's local audio input device.\r\n     */\r\n    var streamReceived = function streamReceived(stream) {\r\n\r\n        // Create processing node which receives appropriately-sized audio buffers\r\n        processor = context.createScriptProcessor(BUFFER_SIZE, format.channels, format.channels);\r\n        processor.connect(context.destination);\r\n\r\n        // Send blobs when audio buffers are received\r\n        processor.onaudioprocess = function processAudio(e) {\r\n            writer.sendData(toSampleArray(e.inputBuffer).buffer);\r\n        };\r\n\r\n        // Connect processing node to user's audio input source\r\n        source = context.createMediaStreamSource(stream);\r\n        source.connect(processor);\r\n\r\n        // Attempt to explicitly resume AudioContext, as it may be paused\r\n        // by default\r\n        if (context.state === 'suspended')\r\n            context.resume();\r\n\r\n        // Save stream for later cleanup\r\n        mediaStream = stream;\r\n\r\n    };\r\n\r\n    /**\r\n     * getUserMedia() callback which handles audio recording denial. The\r\n     * underlying Guacamole output stream is closed, and the failure to\r\n     * record is noted using onerror.\r\n     *\r\n     * @private\r\n     */\r\n    var streamDenied = function streamDenied() {\r\n\r\n        // Simply end stream if audio access is not allowed\r\n        writer.sendEnd();\r\n\r\n        // Notify of closure\r\n        if (recorder.onerror)\r\n            recorder.onerror();\r\n\r\n    };\r\n\r\n    /**\r\n     * Requests access to the user's microphone and begins capturing audio. All\r\n     * received audio data is resampled as necessary and forwarded to the\r\n     * Guacamole stream underlying this Guacamole.RawAudioRecorder. This\r\n     * function must be invoked ONLY ONCE per instance of\r\n     * Guacamole.RawAudioRecorder.\r\n     *\r\n     * @private\r\n     */\r\n    var beginAudioCapture = function beginAudioCapture() {\r\n\r\n        // Attempt to retrieve an audio input stream from the browser\r\n        var promise = navigator.mediaDevices.getUserMedia({\r\n            'audio' : true\r\n        }, streamReceived, streamDenied);\r\n\r\n        // Handle stream creation/rejection via Promise for newer versions of\r\n        // getUserMedia()\r\n        if (promise && promise.then)\r\n            promise.then(streamReceived, streamDenied);\r\n\r\n    };\r\n\r\n    /**\r\n     * Stops capturing audio, if the capture has started, freeing all associated\r\n     * resources. If the capture has not started, this function simply ends the\r\n     * underlying Guacamole stream.\r\n     *\r\n     * @private\r\n     */\r\n    var stopAudioCapture = function stopAudioCapture() {\r\n\r\n        // Disconnect media source node from script processor\r\n        if (source)\r\n            source.disconnect();\r\n\r\n        // Disconnect associated script processor node\r\n        if (processor)\r\n            processor.disconnect();\r\n\r\n        // Stop capture\r\n        if (mediaStream) {\r\n            var tracks = mediaStream.getTracks();\r\n            for (var i = 0; i < tracks.length; i++)\r\n                tracks[i].stop();\r\n        }\r\n\r\n        // Remove references to now-unneeded components\r\n        processor = null;\r\n        source = null;\r\n        mediaStream = null;\r\n\r\n        // End stream\r\n        writer.sendEnd();\r\n\r\n    };\r\n\r\n    // Once audio stream is successfully open, request and begin reading audio\r\n    writer.onack = function audioStreamAcknowledged(status) {\r\n\r\n        // Begin capture if successful response and not yet started\r\n        if (status.code === Guacamole.Status.Code.SUCCESS && !mediaStream)\r\n            beginAudioCapture();\r\n\r\n        // Otherwise stop capture and cease handling any further acks\r\n        else {\r\n\r\n            // Stop capturing audio\r\n            stopAudioCapture();\r\n            writer.onack = null;\r\n\r\n            // Notify if stream has closed normally\r\n            if (status.code === Guacamole.Status.Code.RESOURCE_CLOSED) {\r\n                if (recorder.onclose)\r\n                    recorder.onclose();\r\n            }\r\n\r\n            // Otherwise notify of closure due to error\r\n            else {\r\n                if (recorder.onerror)\r\n                    recorder.onerror();\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n};\r\n\r\nGuacamole.RawAudioRecorder.prototype = new Guacamole.AudioRecorder();\r\n\r\n/**\r\n * Determines whether the given mimetype is supported by\r\n * Guacamole.RawAudioRecorder.\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype to check.\r\n *\r\n * @returns {Boolean}\r\n *     true if the given mimetype is supported by Guacamole.RawAudioRecorder,\r\n *     false otherwise.\r\n */\r\nGuacamole.RawAudioRecorder.isSupportedType = function isSupportedType(mimetype) {\r\n\r\n    // No supported types if no Web Audio API\r\n    if (!Guacamole.AudioContextFactory.getAudioContext())\r\n        return false;\r\n\r\n    return Guacamole.RawAudioFormat.parse(mimetype) !== null;\r\n\r\n};\r\n\r\n/**\r\n * Returns a list of all mimetypes supported by Guacamole.RawAudioRecorder. Only\r\n * the core mimetypes themselves will be listed. Any mimetype parameters, even\r\n * required ones, will not be included in the list. For example, \"audio/L8\" is\r\n * a raw audio mimetype that may be supported, but it is invalid without\r\n * additional parameters. Something like \"audio/L8;rate=44100\" would be valid,\r\n * however (see https://tools.ietf.org/html/rfc4856).\r\n *\r\n * @returns {String[]}\r\n *     A list of all mimetypes supported by Guacamole.RawAudioRecorder,\r\n *     excluding any parameters. If the necessary JavaScript APIs for recording\r\n *     raw audio are absent, this list will be empty.\r\n */\r\nGuacamole.RawAudioRecorder.getSupportedTypes = function getSupportedTypes() {\r\n\r\n    // No supported types if no Web Audio API\r\n    if (!Guacamole.AudioContextFactory.getAudioContext())\r\n        return [];\r\n\r\n    // We support 8-bit and 16-bit raw PCM\r\n    return [\r\n        'audio/L8',\r\n        'audio/L16'\r\n    ];\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A reader which automatically handles the given input stream, assembling all\r\n * received blobs into a single blob by appending them to each other in order.\r\n * Note that this object will overwrite any installed event handlers on the\r\n * given Guacamole.InputStream.\r\n * \r\n * @constructor\r\n * @param {Guacamole.InputStream} stream The stream that data will be read\r\n *                                       from.\r\n * @param {String} mimetype The mimetype of the blob being built.\r\n */\r\nGuacamole.BlobReader = function(stream, mimetype) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.InputStream.\r\n     * @private\r\n     */\r\n    var guac_reader = this;\r\n\r\n    /**\r\n     * The length of this Guacamole.InputStream in bytes.\r\n     * @private\r\n     */\r\n    var length = 0;\r\n\r\n    // Get blob builder\r\n    var blob_builder;\r\n    if      (window.BlobBuilder)       blob_builder = new BlobBuilder();\r\n    else if (window.WebKitBlobBuilder) blob_builder = new WebKitBlobBuilder();\r\n    else if (window.MozBlobBuilder)    blob_builder = new MozBlobBuilder();\r\n    else\r\n        blob_builder = new (function() {\r\n\r\n            var blobs = [];\r\n\r\n            /** @ignore */\r\n            this.append = function(data) {\r\n                blobs.push(new Blob([data], {\"type\": mimetype}));\r\n            };\r\n\r\n            /** @ignore */\r\n            this.getBlob = function() {\r\n                return new Blob(blobs, {\"type\": mimetype});\r\n            };\r\n\r\n        })();\r\n\r\n    // Append received blobs\r\n    stream.onblob = function(data) {\r\n\r\n        // Convert to ArrayBuffer\r\n        var binary = window.atob(data);\r\n        var arrayBuffer = new ArrayBuffer(binary.length);\r\n        var bufferView = new Uint8Array(arrayBuffer);\r\n\r\n        for (var i=0; i<binary.length; i++)\r\n            bufferView[i] = binary.charCodeAt(i);\r\n\r\n        blob_builder.append(arrayBuffer);\r\n        length += arrayBuffer.byteLength;\r\n\r\n        // Call handler, if present\r\n        if (guac_reader.onprogress)\r\n            guac_reader.onprogress(arrayBuffer.byteLength);\r\n\r\n        // Send success response\r\n        stream.sendAck(\"OK\", 0x0000);\r\n\r\n    };\r\n\r\n    // Simply call onend when end received\r\n    stream.onend = function() {\r\n        if (guac_reader.onend)\r\n            guac_reader.onend();\r\n    };\r\n\r\n    /**\r\n     * Returns the current length of this Guacamole.InputStream, in bytes.\r\n     * @return {Number} The current length of this Guacamole.InputStream.\r\n     */\r\n    this.getLength = function() {\r\n        return length;\r\n    };\r\n\r\n    /**\r\n     * Returns the contents of this Guacamole.BlobReader as a Blob.\r\n     * @return {Blob} The contents of this Guacamole.BlobReader.\r\n     */\r\n    this.getBlob = function() {\r\n        return blob_builder.getBlob();\r\n    };\r\n\r\n    /**\r\n     * Fired once for every blob of data received.\r\n     * \r\n     * @event\r\n     * @param {Number} length The number of bytes received.\r\n     */\r\n    this.onprogress = null;\r\n\r\n    /**\r\n     * Fired once this stream is finished and no further data will be written.\r\n     * @event\r\n     */\r\n    this.onend = null;\r\n\r\n};\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A writer which automatically writes to the given output stream with the\r\n * contents of provided Blob objects.\r\n *\r\n * @constructor\r\n * @param {Guacamole.OutputStream} stream\r\n *     The stream that data will be written to.\r\n */\r\nGuacamole.BlobWriter = function BlobWriter(stream) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.BlobWriter.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.BlobWriter}\r\n     */\r\n    var guacWriter = this;\r\n\r\n    /**\r\n     * Wrapped Guacamole.ArrayBufferWriter which will be used to send any\r\n     * provided file data.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.ArrayBufferWriter}\r\n     */\r\n    var arrayBufferWriter = new Guacamole.ArrayBufferWriter(stream);\r\n\r\n    // Initially, simply call onack for acknowledgements\r\n    arrayBufferWriter.onack = function(status) {\r\n        if (guacWriter.onack)\r\n            guacWriter.onack(status);\r\n    };\r\n\r\n    /**\r\n     * Browser-independent implementation of Blob.slice() which uses an end\r\n     * offset to determine the span of the resulting slice, rather than a\r\n     * length.\r\n     *\r\n     * @private\r\n     * @param {Blob} blob\r\n     *     The Blob to slice.\r\n     *\r\n     * @param {Number} start\r\n     *     The starting offset of the slice, in bytes, inclusive.\r\n     *\r\n     * @param {Number} end\r\n     *     The ending offset of the slice, in bytes, exclusive.\r\n     *\r\n     * @returns {Blob}\r\n     *     A Blob containing the data within the given Blob starting at\r\n     *     <code>start</code> and ending at <code>end - 1</code>.\r\n     */\r\n    var slice = function slice(blob, start, end) {\r\n\r\n        // Use prefixed implementations if necessary\r\n        var sliceImplementation = (\r\n                blob.slice\r\n             || blob.webkitSlice\r\n             || blob.mozSlice\r\n        ).bind(blob);\r\n\r\n        var length = end - start;\r\n\r\n        // The old Blob.slice() was length-based (not end-based). Try the\r\n        // length version first, if the two calls are not equivalent.\r\n        if (length !== end) {\r\n\r\n            // If the result of the slice() call matches the expected length,\r\n            // trust that result. It must be correct.\r\n            var sliceResult = sliceImplementation(start, length);\r\n            if (sliceResult.size === length)\r\n                return sliceResult;\r\n\r\n        }\r\n\r\n        // Otherwise, use the most-recent standard: end-based slice()\r\n        return sliceImplementation(start, end);\r\n\r\n    };\r\n\r\n    /**\r\n     * Sends the contents of the given blob over the underlying stream.\r\n     *\r\n     * @param {Blob} blob\r\n     *     The blob to send.\r\n     */\r\n    this.sendBlob = function sendBlob(blob) {\r\n\r\n        var offset = 0;\r\n        var reader = new FileReader();\r\n\r\n        /**\r\n         * Reads the next chunk of the blob provided to\r\n         * [sendBlob()]{@link Guacamole.BlobWriter#sendBlob}. The chunk itself\r\n         * is read asynchronously, and will not be available until\r\n         * reader.onload fires.\r\n         *\r\n         * @private\r\n         */\r\n        var readNextChunk = function readNextChunk() {\r\n\r\n            // If no further chunks remain, inform of completion and stop\r\n            if (offset >= blob.size) {\r\n\r\n                // Fire completion event for completed blob\r\n                if (guacWriter.oncomplete)\r\n                    guacWriter.oncomplete(blob);\r\n\r\n                // No further chunks to read\r\n                return;\r\n\r\n            }\r\n\r\n            // Obtain reference to next chunk as a new blob\r\n            var chunk = slice(blob, offset, offset + arrayBufferWriter.blobLength);\r\n            offset += arrayBufferWriter.blobLength;\r\n\r\n            // Attempt to read the blob contents represented by the blob into\r\n            // a new array buffer\r\n            reader.readAsArrayBuffer(chunk);\r\n\r\n        };\r\n\r\n        // Send each chunk over the stream, continue reading the next chunk\r\n        reader.onload = function chunkLoadComplete() {\r\n\r\n            // Send the successfully-read chunk\r\n            arrayBufferWriter.sendData(reader.result);\r\n\r\n            // Continue sending more chunks after the latest chunk is\r\n            // acknowledged\r\n            arrayBufferWriter.onack = function sendMoreChunks(status) {\r\n\r\n                if (guacWriter.onack)\r\n                    guacWriter.onack(status);\r\n\r\n                // Abort transfer if an error occurs\r\n                if (status.isError())\r\n                    return;\r\n\r\n                // Inform of blob upload progress via progress events\r\n                if (guacWriter.onprogress)\r\n                    guacWriter.onprogress(blob, offset - arrayBufferWriter.blobLength);\r\n\r\n                // Queue the next chunk for reading\r\n                readNextChunk();\r\n\r\n            };\r\n\r\n        };\r\n\r\n        // If an error prevents further reading, inform of error and stop\r\n        reader.onerror = function chunkLoadFailed() {\r\n\r\n            // Fire error event, including the context of the error\r\n            if (guacWriter.onerror)\r\n                guacWriter.onerror(blob, offset, reader.error);\r\n\r\n        };\r\n\r\n        // Begin reading the first chunk\r\n        readNextChunk();\r\n\r\n    };\r\n\r\n    /**\r\n     * Signals that no further text will be sent, effectively closing the\r\n     * stream.\r\n     */\r\n    this.sendEnd = function sendEnd() {\r\n        arrayBufferWriter.sendEnd();\r\n    };\r\n\r\n    /**\r\n     * Fired for received data, if acknowledged by the server.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.Status} status\r\n     *     The status of the operation.\r\n     */\r\n    this.onack = null;\r\n\r\n    /**\r\n     * Fired when an error occurs reading a blob passed to\r\n     * [sendBlob()]{@link Guacamole.BlobWriter#sendBlob}. The transfer for the\r\n     * the given blob will cease, but the stream will remain open.\r\n     *\r\n     * @event\r\n     * @param {Blob} blob\r\n     *     The blob that was being read when the error occurred.\r\n     *\r\n     * @param {Number} offset\r\n     *     The offset of the failed read attempt within the blob, in bytes.\r\n     *\r\n     * @param {DOMError} error\r\n     *     The error that occurred.\r\n     */\r\n    this.onerror = null;\r\n\r\n    /**\r\n     * Fired for each successfully-read chunk of data as a blob is being sent\r\n     * via [sendBlob()]{@link Guacamole.BlobWriter#sendBlob}.\r\n     *\r\n     * @event\r\n     * @param {Blob} blob\r\n     *     The blob that is being read.\r\n     *\r\n     * @param {Number} offset\r\n     *     The offset of the read that just succeeded.\r\n     */\r\n    this.onprogress = null;\r\n\r\n    /**\r\n     * Fired when a blob passed to\r\n     * [sendBlob()]{@link Guacamole.BlobWriter#sendBlob} has finished being\r\n     * sent.\r\n     *\r\n     * @event\r\n     * @param {Blob} blob\r\n     *     The blob that was sent.\r\n     */\r\n    this.oncomplete = null;\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Guacamole protocol client. Given a {@link Guacamole.Tunnel},\r\n * automatically handles incoming and outgoing Guacamole instructions via the\r\n * provided tunnel, updating its display using one or more canvas elements.\r\n * \r\n * @constructor\r\n * @param {Guacamole.Tunnel} tunnel The tunnel to use to send and receive\r\n *                                  Guacamole instructions.\r\n */\r\nGuacamole.Client = function(tunnel) {\r\n\r\n    var guac_client = this;\r\n\r\n    var STATE_IDLE          = 0;\r\n    var STATE_CONNECTING    = 1;\r\n    var STATE_WAITING       = 2;\r\n    var STATE_CONNECTED     = 3;\r\n    var STATE_DISCONNECTING = 4;\r\n    var STATE_DISCONNECTED  = 5;\r\n\r\n    var currentState = STATE_IDLE;\r\n    \r\n    var currentTimestamp = 0;\r\n    var pingInterval = null;\r\n\r\n    /**\r\n     * Translation from Guacamole protocol line caps to Layer line caps.\r\n     * @private\r\n     */\r\n    var lineCap = {\r\n        0: \"butt\",\r\n        1: \"round\",\r\n        2: \"square\"\r\n    };\r\n\r\n    /**\r\n     * Translation from Guacamole protocol line caps to Layer line caps.\r\n     * @private\r\n     */\r\n    var lineJoin = {\r\n        0: \"bevel\",\r\n        1: \"miter\",\r\n        2: \"round\"\r\n    };\r\n\r\n    /**\r\n     * The underlying Guacamole display.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.Display}\r\n     */\r\n    var display = new Guacamole.Display();\r\n\r\n    /**\r\n     * All available layers and buffers\r\n     *\r\n     * @private\r\n     * @type {Object.<Number, (Guacamole.Display.VisibleLayer|Guacamole.Layer)>}\r\n     */\r\n    var layers = {};\r\n    \r\n    /**\r\n     * All audio players currently in use by the client. Initially, this will\r\n     * be empty, but audio players may be allocated by the server upon request.\r\n     *\r\n     * @private\r\n     * @type {Object.<Number, Guacamole.AudioPlayer>}\r\n     */\r\n    var audioPlayers = {};\r\n\r\n    /**\r\n     * All video players currently in use by the client. Initially, this will\r\n     * be empty, but video players may be allocated by the server upon request.\r\n     *\r\n     * @private\r\n     * @type {Object.<Number, Guacamole.VideoPlayer>}\r\n     */\r\n    var videoPlayers = {};\r\n\r\n    // No initial parsers\r\n    var parsers = [];\r\n\r\n    // No initial streams \r\n    var streams = [];\r\n\r\n    /**\r\n     * All current objects. The index of each object is dictated by the\r\n     * Guacamole server.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.Object[]}\r\n     */\r\n    var objects = [];\r\n\r\n    // Pool of available stream indices\r\n    var stream_indices = new Guacamole.IntegerPool();\r\n\r\n    // Array of allocated output streams by index\r\n    var output_streams = [];\r\n\r\n    function setState(state) {\r\n        if (state != currentState) {\r\n            currentState = state;\r\n            if (guac_client.onstatechange)\r\n                guac_client.onstatechange(currentState);\r\n        }\r\n    }\r\n\r\n    function isConnected() {\r\n        return currentState == STATE_CONNECTED\r\n            || currentState == STATE_WAITING;\r\n    }\r\n\r\n    /**\r\n     * Produces an opaque representation of Guacamole.Client state which can be\r\n     * later imported through a call to importState(). This object is\r\n     * effectively an independent, compressed snapshot of protocol and display\r\n     * state. Invoking this function implicitly flushes the display.\r\n     *\r\n     * @param {function} callback\r\n     *     Callback which should be invoked once the state object is ready. The\r\n     *     state object will be passed to the callback as the sole parameter.\r\n     *     This callback may be invoked immediately, or later as the display\r\n     *     finishes rendering and becomes ready.\r\n     */\r\n    this.exportState = function exportState(callback) {\r\n\r\n        // Start with empty state\r\n        var state = {\r\n            'currentState' : currentState,\r\n            'currentTimestamp' : currentTimestamp,\r\n            'layers' : {}\r\n        };\r\n\r\n        var layersSnapshot = {};\r\n\r\n        // Make a copy of all current layers (protocol state)\r\n        for (var key in layers) {\r\n            layersSnapshot[key] = layers[key];\r\n        }\r\n\r\n        // Populate layers once data is available (display state, requires flush)\r\n        display.flush(function populateLayers() {\r\n\r\n            // Export each defined layer/buffer\r\n            for (var key in layersSnapshot) {\r\n\r\n                var index = parseInt(key);\r\n                var layer = layersSnapshot[key];\r\n                var canvas = layer.toCanvas();\r\n\r\n                // Store layer/buffer dimensions\r\n                var exportLayer = {\r\n                    'width'  : layer.width,\r\n                    'height' : layer.height\r\n                };\r\n\r\n                // Store layer/buffer image data, if it can be generated\r\n                if (layer.width && layer.height)\r\n                    exportLayer.url = canvas.toDataURL('image/png');\r\n\r\n                // Add layer properties if not a buffer nor the default layer\r\n                if (index > 0) {\r\n                    exportLayer.x = layer.x;\r\n                    exportLayer.y = layer.y;\r\n                    exportLayer.z = layer.z;\r\n                    exportLayer.alpha = layer.alpha;\r\n                    exportLayer.matrix = layer.matrix;\r\n                    exportLayer.parent = getLayerIndex(layer.parent);\r\n                }\r\n\r\n                // Store exported layer\r\n                state.layers[key] = exportLayer;\r\n\r\n            }\r\n\r\n            // Invoke callback now that the state is ready\r\n            callback(state);\r\n\r\n        });\r\n\r\n    };\r\n\r\n    /**\r\n     * Restores Guacamole.Client protocol and display state based on an opaque\r\n     * object from a prior call to exportState(). The Guacamole.Client instance\r\n     * used to export that state need not be the same as this instance.\r\n     *\r\n     * @param {Object} state\r\n     *     An opaque representation of Guacamole.Client state from a prior call\r\n     *     to exportState().\r\n     *\r\n     * @param {function} [callback]\r\n     *     The function to invoke when state has finished being imported. This\r\n     *     may happen immediately, or later as images within the provided state\r\n     *     object are loaded.\r\n     */\r\n    this.importState = function importState(state, callback) {\r\n\r\n        var key;\r\n        var index;\r\n\r\n        currentState = state.currentState;\r\n        currentTimestamp = state.currentTimestamp;\r\n\r\n        // Dispose of all layers\r\n        for (key in layers) {\r\n            index = parseInt(key);\r\n            if (index > 0)\r\n                display.dispose(layers[key]);\r\n        }\r\n\r\n        layers = {};\r\n\r\n        // Import state of each layer/buffer\r\n        for (key in state.layers) {\r\n\r\n            index = parseInt(key);\r\n\r\n            var importLayer = state.layers[key];\r\n            var layer = getLayer(index);\r\n\r\n            // Reset layer size\r\n            display.resize(layer, importLayer.width, importLayer.height);\r\n\r\n            // Initialize new layer if it has associated data\r\n            if (importLayer.url) {\r\n                display.setChannelMask(layer, Guacamole.Layer.SRC);\r\n                display.draw(layer, 0, 0, importLayer.url);\r\n            }\r\n\r\n            // Set layer-specific properties if not a buffer nor the default layer\r\n            if (index > 0 && importLayer.parent >= 0) {\r\n\r\n                // Apply layer position and set parent\r\n                var parent = getLayer(importLayer.parent);\r\n                display.move(layer, parent, importLayer.x, importLayer.y, importLayer.z);\r\n\r\n                // Set layer transparency\r\n                display.shade(layer, importLayer.alpha);\r\n\r\n                // Apply matrix transform\r\n                var matrix = importLayer.matrix;\r\n                display.distort(layer,\r\n                    matrix[0], matrix[1], matrix[2],\r\n                    matrix[3], matrix[4], matrix[5]);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Flush changes to display\r\n        display.flush(callback);\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns the underlying display of this Guacamole.Client. The display\r\n     * contains an Element which can be added to the DOM, causing the\r\n     * display to become visible.\r\n     * \r\n     * @return {Guacamole.Display} The underlying display of this\r\n     *                             Guacamole.Client.\r\n     */\r\n    this.getDisplay = function() {\r\n        return display;\r\n    };\r\n\r\n    /**\r\n     * Sends the current size of the screen.\r\n     * \r\n     * @param {Number} width The width of the screen.\r\n     * @param {Number} height The height of the screen.\r\n     */\r\n    this.sendSize = function(width, height) {\r\n\r\n        // Do not send requests if not connected\r\n        if (!isConnected())\r\n            return;\r\n\r\n        tunnel.sendMessage(\"size\", width, height);\r\n\r\n    };\r\n\r\n    /**\r\n     * Sends a key event having the given properties as if the user\r\n     * pressed or released a key.\r\n     * \r\n     * @param {Boolean} pressed Whether the key is pressed (true) or released\r\n     *                          (false).\r\n     * @param {Number} keysym The keysym of the key being pressed or released.\r\n     */\r\n    this.sendKeyEvent = function(pressed, keysym) {\r\n        // Do not send requests if not connected\r\n        if (!isConnected())\r\n            return;\r\n\r\n        tunnel.sendMessage(\"key\", keysym, pressed);\r\n    };\r\n\r\n    /**\r\n     * Sends a mouse event having the properties provided by the given mouse\r\n     * state.\r\n     * \r\n     * @param {Guacamole.Mouse.State} mouseState The state of the mouse to send\r\n     *                                           in the mouse event.\r\n     */\r\n    this.sendMouseState = function(mouseState) {\r\n\r\n        // Do not send requests if not connected\r\n        if (!isConnected())\r\n            return;\r\n\r\n        // Update client-side cursor\r\n        display.moveCursor(\r\n            Math.floor(mouseState.x),\r\n            Math.floor(mouseState.y)\r\n        );\r\n\r\n        // Build mask\r\n        var buttonMask = 0;\r\n        if (mouseState.left)   buttonMask |= 1;\r\n        if (mouseState.middle) buttonMask |= 2;\r\n        if (mouseState.right)  buttonMask |= 4;\r\n        if (mouseState.up)     buttonMask |= 8;\r\n        if (mouseState.down)   buttonMask |= 16;\r\n\r\n        // Send message\r\n        tunnel.sendMessage(\"mouse\", Math.floor(mouseState.x), Math.floor(mouseState.y), buttonMask);\r\n    };\r\n\r\n    /**\r\n     * Allocates an available stream index and creates a new\r\n     * Guacamole.OutputStream using that index, associating the resulting\r\n     * stream with this Guacamole.Client. Note that this stream will not yet\r\n     * exist as far as the other end of the Guacamole connection is concerned.\r\n     * Streams exist within the Guacamole protocol only when referenced by an\r\n     * instruction which creates the stream, such as a \"clipboard\", \"file\", or\r\n     * \"pipe\" instruction.\r\n     *\r\n     * @returns {Guacamole.OutputStream}\r\n     *     A new Guacamole.OutputStream with a newly-allocated index and\r\n     *     associated with this Guacamole.Client.\r\n     */\r\n    this.createOutputStream = function createOutputStream() {\r\n\r\n        // Allocate index\r\n        var index = stream_indices.next();\r\n\r\n        // Return new stream\r\n        var stream = output_streams[index] = new Guacamole.OutputStream(guac_client, index);\r\n        return stream;\r\n\r\n    };\r\n\r\n    /**\r\n     * Opens a new audio stream for writing, where audio data having the give\r\n     * mimetype will be sent along the returned stream. The instruction\r\n     * necessary to create this stream will automatically be sent.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the audio data that will be sent along the returned\r\n     *     stream.\r\n     *\r\n     * @return {Guacamole.OutputStream}\r\n     *     The created audio stream.\r\n     */\r\n    this.createAudioStream = function(mimetype) {\r\n\r\n        // Allocate and associate stream with audio metadata\r\n        var stream = guac_client.createOutputStream();\r\n        tunnel.sendMessage(\"audio\", stream.index, mimetype);\r\n        return stream;\r\n\r\n    };\r\n\r\n    /**\r\n     * Opens a new file for writing, having the given index, mimetype and\r\n     * filename. The instruction necessary to create this stream will\r\n     * automatically be sent.\r\n     *\r\n     * @param {String} mimetype The mimetype of the file being sent.\r\n     * @param {String} filename The filename of the file being sent.\r\n     * @return {Guacamole.OutputStream} The created file stream.\r\n     */\r\n    this.createFileStream = function(mimetype, filename) {\r\n\r\n        // Allocate and associate stream with file metadata\r\n        var stream = guac_client.createOutputStream();\r\n        tunnel.sendMessage(\"file\", stream.index, mimetype, filename);\r\n        return stream;\r\n\r\n    };\r\n\r\n    /**\r\n     * Opens a new pipe for writing, having the given name and mimetype. The\r\n     * instruction necessary to create this stream will automatically be sent.\r\n     *\r\n     * @param {String} mimetype The mimetype of the data being sent.\r\n     * @param {String} name The name of the pipe.\r\n     * @return {Guacamole.OutputStream} The created file stream.\r\n     */\r\n    this.createPipeStream = function(mimetype, name) {\r\n\r\n        // Allocate and associate stream with pipe metadata\r\n        var stream = guac_client.createOutputStream();\r\n        tunnel.sendMessage(\"pipe\", stream.index, mimetype, name);\r\n        return stream;\r\n\r\n    };\r\n\r\n    /**\r\n     * Opens a new clipboard object for writing, having the given mimetype. The\r\n     * instruction necessary to create this stream will automatically be sent.\r\n     *\r\n     * @param {String} mimetype The mimetype of the data being sent.\r\n     * @param {String} name The name of the pipe.\r\n     * @return {Guacamole.OutputStream} The created file stream.\r\n     */\r\n    this.createClipboardStream = function(mimetype) {\r\n\r\n        // Allocate and associate stream with clipboard metadata\r\n        var stream = guac_client.createOutputStream();\r\n        tunnel.sendMessage(\"clipboard\", stream.index, mimetype);\r\n        return stream;\r\n\r\n    };\r\n\r\n    /**\r\n     * Opens a new argument value stream for writing, having the given\r\n     * parameter name and mimetype, requesting that the connection parameter\r\n     * with the given name be updated to the value described by the contents\r\n     * of the following stream. The instruction necessary to create this stream\r\n     * will automatically be sent.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the data being sent.\r\n     *\r\n     * @param {String} name\r\n     *     The name of the connection parameter to attempt to update.\r\n     *\r\n     * @return {Guacamole.OutputStream}\r\n     *     The created argument value stream.\r\n     */\r\n    this.createArgumentValueStream = function createArgumentValueStream(mimetype, name) {\r\n\r\n        // Allocate and associate stream with argument value metadata\r\n        var stream = guac_client.createOutputStream();\r\n        tunnel.sendMessage(\"argv\", stream.index, mimetype, name);\r\n        return stream;\r\n\r\n    };\r\n\r\n    /**\r\n     * Creates a new output stream associated with the given object and having\r\n     * the given mimetype and name. The legality of a mimetype and name is\r\n     * dictated by the object itself. The instruction necessary to create this\r\n     * stream will automatically be sent.\r\n     *\r\n     * @param {Number} index\r\n     *     The index of the object for which the output stream is being\r\n     *     created.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the data which will be sent to the output stream.\r\n     *\r\n     * @param {String} name\r\n     *     The defined name of an output stream within the given object.\r\n     *\r\n     * @returns {Guacamole.OutputStream}\r\n     *     An output stream which will write blobs to the named output stream\r\n     *     of the given object.\r\n     */\r\n    this.createObjectOutputStream = function createObjectOutputStream(index, mimetype, name) {\r\n\r\n        // Allocate and ssociate stream with object metadata\r\n        var stream = guac_client.createOutputStream();\r\n        tunnel.sendMessage(\"put\", index, stream.index, mimetype, name);\r\n        return stream;\r\n\r\n    };\r\n\r\n    /**\r\n     * Requests read access to the input stream having the given name. If\r\n     * successful, a new input stream will be created.\r\n     *\r\n     * @param {Number} index\r\n     *     The index of the object from which the input stream is being\r\n     *     requested.\r\n     *\r\n     * @param {String} name\r\n     *     The name of the input stream to request.\r\n     */\r\n    this.requestObjectInputStream = function requestObjectInputStream(index, name) {\r\n\r\n        // Do not send requests if not connected\r\n        if (!isConnected())\r\n            return;\r\n\r\n        tunnel.sendMessage(\"get\", index, name);\r\n    };\r\n\r\n    /**\r\n     * Acknowledge receipt of a blob on the stream with the given index.\r\n     * \r\n     * @param {Number} index The index of the stream associated with the\r\n     *                       received blob.\r\n     * @param {String} message A human-readable message describing the error\r\n     *                         or status.\r\n     * @param {Number} code The error code, if any, or 0 for success.\r\n     */\r\n    this.sendAck = function(index, message, code) {\r\n\r\n        // Do not send requests if not connected\r\n        if (!isConnected())\r\n            return;\r\n\r\n        tunnel.sendMessage(\"ack\", index, message, code);\r\n    };\r\n\r\n    /**\r\n     * Given the index of a file, writes a blob of data to that file.\r\n     * \r\n     * @param {Number} index The index of the file to write to.\r\n     * @param {String} data Base64-encoded data to write to the file.\r\n     */\r\n    this.sendBlob = function(index, data) {\r\n\r\n        // Do not send requests if not connected\r\n        if (!isConnected())\r\n            return;\r\n\r\n        tunnel.sendMessage(\"blob\", index, data);\r\n    };\r\n\r\n    /**\r\n     * Marks a currently-open stream as complete. The other end of the\r\n     * Guacamole connection will be notified via an \"end\" instruction that the\r\n     * stream is closed, and the index will be made available for reuse in\r\n     * future streams.\r\n     * \r\n     * @param {Number} index\r\n     *     The index of the stream to end.\r\n     */\r\n    this.endStream = function(index) {\r\n\r\n        // Do not send requests if not connected\r\n        if (!isConnected())\r\n            return;\r\n\r\n        // Explicitly close stream by sending \"end\" instruction\r\n        tunnel.sendMessage(\"end\", index);\r\n\r\n        // Free associated index and stream if they exist\r\n        if (output_streams[index]) {\r\n            stream_indices.free(index);\r\n            delete output_streams[index];\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Fired whenever the state of this Guacamole.Client changes.\r\n     * \r\n     * @event\r\n     * @param {Number} state The new state of the client.\r\n     */\r\n    this.onstatechange = null;\r\n\r\n    /**\r\n     * Fired when the remote client sends a name update.\r\n     * \r\n     * @event\r\n     * @param {String} name The new name of this client.\r\n     */\r\n    this.onname = null;\r\n\r\n    /**\r\n     * Fired when an error is reported by the remote client, and the connection\r\n     * is being closed.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Status} status A status object which describes the\r\n     *                                  error.\r\n     */\r\n    this.onerror = null;\r\n\r\n    /**\r\n     * Fired when a audio stream is created. The stream provided to this event\r\n     * handler will contain its own event handlers for received data.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.InputStream} stream\r\n     *     The stream that will receive audio data from the server.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the audio data which will be received.\r\n     *\r\n     * @return {Guacamole.AudioPlayer}\r\n     *     An object which implements the Guacamole.AudioPlayer interface and\r\n     *     has been initialied to play the data in the provided stream, or null\r\n     *     if the built-in audio players of the Guacamole client should be\r\n     *     used.\r\n     */\r\n    this.onaudio = null;\r\n\r\n    /**\r\n     * Fired when a video stream is created. The stream provided to this event\r\n     * handler will contain its own event handlers for received data.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.InputStream} stream\r\n     *     The stream that will receive video data from the server.\r\n     *\r\n     * @param {Guacamole.Display.VisibleLayer} layer\r\n     *     The destination layer on which the received video data should be\r\n     *     played. It is the responsibility of the Guacamole.VideoPlayer\r\n     *     implementation to play the received data within this layer.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the video data which will be received.\r\n     *\r\n     * @return {Guacamole.VideoPlayer}\r\n     *     An object which implements the Guacamole.VideoPlayer interface and\r\n     *     has been initialied to play the data in the provided stream, or null\r\n     *     if the built-in video players of the Guacamole client should be\r\n     *     used.\r\n     */\r\n    this.onvideo = null;\r\n\r\n    /**\r\n     * Fired when the current value of a connection parameter is being exposed\r\n     * by the server.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.InputStream} stream\r\n     *     The stream that will receive connection parameter data from the\r\n     *     server.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the data which will be received.\r\n     *\r\n     * @param {String} name\r\n     *     The name of the connection parameter whose value is being exposed.\r\n     */\r\n    this.onargv = null;\r\n\r\n    /**\r\n     * Fired when the clipboard of the remote client is changing.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.InputStream} stream The stream that will receive\r\n     *                                       clipboard data from the server.\r\n     * @param {String} mimetype The mimetype of the data which will be received.\r\n     */\r\n    this.onclipboard = null;\r\n\r\n    /**\r\n     * Fired when a file stream is created. The stream provided to this event\r\n     * handler will contain its own event handlers for received data.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.InputStream} stream The stream that will receive data\r\n     *                                       from the server.\r\n     * @param {String} mimetype The mimetype of the file received.\r\n     * @param {String} filename The name of the file received.\r\n     */\r\n    this.onfile = null;\r\n\r\n    /**\r\n     * Fired when a filesystem object is created. The object provided to this\r\n     * event handler will contain its own event handlers and functions for\r\n     * requesting and handling data.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.Object} object\r\n     *     The created filesystem object.\r\n     *\r\n     * @param {String} name\r\n     *     The name of the filesystem.\r\n     */\r\n    this.onfilesystem = null;\r\n\r\n    /**\r\n     * Fired when a pipe stream is created. The stream provided to this event\r\n     * handler will contain its own event handlers for received data;\r\n     * \r\n     * @event\r\n     * @param {Guacamole.InputStream} stream The stream that will receive data\r\n     *                                       from the server.\r\n     * @param {String} mimetype The mimetype of the data which will be received.\r\n     * @param {String} name The name of the pipe.\r\n     */\r\n    this.onpipe = null;\r\n    \r\n    /**\r\n     * Fired when a \"required\" instruction is received. A required instruction\r\n     * indicates that additional parameters are required for the connection to\r\n     * continue, such as user credentials.\r\n     * \r\n     * @event\r\n     * @param {String[]} parameters\r\n     *      The names of the connection parameters that are required to be\r\n     *      provided for the connection to continue.\r\n     */\r\n    this.onrequired = null;\r\n\r\n    /**\r\n     * Fired whenever a sync instruction is received from the server, indicating\r\n     * that the server is finished processing any input from the client and\r\n     * has sent any results.\r\n     * \r\n     * @event\r\n     * @param {Number} timestamp The timestamp associated with the sync\r\n     *                           instruction.\r\n     */\r\n    this.onsync = null;\r\n\r\n    /**\r\n     * Returns the layer with the given index, creating it if necessary.\r\n     * Positive indices refer to visible layers, an index of zero refers to\r\n     * the default layer, and negative indices refer to buffers.\r\n     *\r\n     * @private\r\n     * @param {Number} index\r\n     *     The index of the layer to retrieve.\r\n     *\r\n     * @return {Guacamole.Display.VisibleLayer|Guacamole.Layer}\r\n     *     The layer having the given index.\r\n     */\r\n    var getLayer = function getLayer(index) {\r\n\r\n        // Get layer, create if necessary\r\n        var layer = layers[index];\r\n        if (!layer) {\r\n\r\n            // Create layer based on index\r\n            if (index === 0)\r\n                layer = display.getDefaultLayer();\r\n            else if (index > 0)\r\n                layer = display.createLayer();\r\n            else\r\n                layer = display.createBuffer();\r\n                \r\n            // Add new layer\r\n            layers[index] = layer;\r\n\r\n        }\r\n\r\n        return layer;\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns the index passed to getLayer() when the given layer was created.\r\n     * Positive indices refer to visible layers, an index of zero refers to the\r\n     * default layer, and negative indices refer to buffers.\r\n     *\r\n     * @param {Guacamole.Display.VisibleLayer|Guacamole.Layer} layer\r\n     *     The layer whose index should be determined.\r\n     *\r\n     * @returns {Number}\r\n     *     The index of the given layer, or null if no such layer is associated\r\n     *     with this client.\r\n     */\r\n    var getLayerIndex = function getLayerIndex(layer) {\r\n\r\n        // Avoid searching if there clearly is no such layer\r\n        if (!layer)\r\n            return null;\r\n\r\n        // Search through each layer, returning the index of the given layer\r\n        // once found\r\n        for (var key in layers) {\r\n            if (layer === layers[key])\r\n                return parseInt(key);\r\n        }\r\n\r\n        // Otherwise, no such index\r\n        return null;\r\n\r\n    };\r\n\r\n    function getParser(index) {\r\n\r\n        var parser = parsers[index];\r\n\r\n        // If parser not yet created, create it, and tie to the\r\n        // oninstruction handler of the tunnel.\r\n        if (parser == null) {\r\n            parser = parsers[index] = new Guacamole.Parser();\r\n            parser.oninstruction = tunnel.oninstruction;\r\n        }\r\n\r\n        return parser;\r\n\r\n    }\r\n\r\n    /**\r\n     * Handlers for all defined layer properties.\r\n     * @private\r\n     */\r\n    var layerPropertyHandlers = {\r\n\r\n        \"miter-limit\": function(layer, value) {\r\n            display.setMiterLimit(layer, parseFloat(value));\r\n        }\r\n\r\n    };\r\n    \r\n    /**\r\n     * Handlers for all instruction opcodes receivable by a Guacamole protocol\r\n     * client.\r\n     * @private\r\n     */\r\n    var instructionHandlers = {\r\n\r\n        \"ack\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n            var reason = parameters[1];\r\n            var code = parseInt(parameters[2]);\r\n\r\n            // Get stream\r\n            var stream = output_streams[stream_index];\r\n            if (stream) {\r\n\r\n                // Signal ack if handler defined\r\n                if (stream.onack)\r\n                    stream.onack(new Guacamole.Status(code, reason));\r\n\r\n                // If code is an error, invalidate stream if not already\r\n                // invalidated by onack handler\r\n                if (code >= 0x0100 && output_streams[stream_index] === stream) {\r\n                    stream_indices.free(stream_index);\r\n                    delete output_streams[stream_index];\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        \"arc\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n            var x = parseInt(parameters[1]);\r\n            var y = parseInt(parameters[2]);\r\n            var radius = parseInt(parameters[3]);\r\n            var startAngle = parseFloat(parameters[4]);\r\n            var endAngle = parseFloat(parameters[5]);\r\n            var negative = parseInt(parameters[6]);\r\n\r\n            display.arc(layer, x, y, radius, startAngle, endAngle, negative != 0);\r\n\r\n        },\r\n\r\n        \"argv\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n            var mimetype = parameters[1];\r\n            var name = parameters[2];\r\n\r\n            // Create stream\r\n            if (guac_client.onargv) {\r\n                var stream = streams[stream_index] = new Guacamole.InputStream(guac_client, stream_index);\r\n                guac_client.onargv(stream, mimetype, name);\r\n            }\r\n\r\n            // Otherwise, unsupported\r\n            else\r\n                guac_client.sendAck(stream_index, \"Receiving argument values unsupported\", 0x0100);\r\n\r\n        },\r\n\r\n        \"audio\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n            var mimetype = parameters[1];\r\n\r\n            // Create stream \r\n            var stream = streams[stream_index] =\r\n                    new Guacamole.InputStream(guac_client, stream_index);\r\n\r\n            // Get player instance via callback\r\n            var audioPlayer = null;\r\n            if (guac_client.onaudio)\r\n                audioPlayer = guac_client.onaudio(stream, mimetype);\r\n\r\n            // If unsuccessful, try to use a default implementation\r\n            if (!audioPlayer)\r\n                audioPlayer = Guacamole.AudioPlayer.getInstance(stream, mimetype);\r\n\r\n            // If we have successfully retrieved an audio player, send success response\r\n            if (audioPlayer) {\r\n                audioPlayers[stream_index] = audioPlayer;\r\n                guac_client.sendAck(stream_index, \"OK\", 0x0000);\r\n            }\r\n\r\n            // Otherwise, mimetype must be unsupported\r\n            else\r\n                guac_client.sendAck(stream_index, \"BAD TYPE\", 0x030F);\r\n\r\n        },\r\n\r\n        \"blob\": function(parameters) {\r\n\r\n            // Get stream \r\n            var stream_index = parseInt(parameters[0]);\r\n            var data = parameters[1];\r\n            var stream = streams[stream_index];\r\n\r\n            // Write data\r\n            if (stream && stream.onblob)\r\n                stream.onblob(data);\r\n\r\n        },\r\n\r\n        \"body\" : function handleBody(parameters) {\r\n\r\n            // Get object\r\n            var objectIndex = parseInt(parameters[0]);\r\n            var object = objects[objectIndex];\r\n\r\n            var streamIndex = parseInt(parameters[1]);\r\n            var mimetype = parameters[2];\r\n            var name = parameters[3];\r\n\r\n            // Create stream if handler defined\r\n            if (object && object.onbody) {\r\n                var stream = streams[streamIndex] = new Guacamole.InputStream(guac_client, streamIndex);\r\n                object.onbody(stream, mimetype, name);\r\n            }\r\n\r\n            // Otherwise, unsupported\r\n            else\r\n                guac_client.sendAck(streamIndex, \"Receipt of body unsupported\", 0x0100);\r\n\r\n        },\r\n\r\n        \"cfill\": function(parameters) {\r\n\r\n            var channelMask = parseInt(parameters[0]);\r\n            var layer = getLayer(parseInt(parameters[1]));\r\n            var r = parseInt(parameters[2]);\r\n            var g = parseInt(parameters[3]);\r\n            var b = parseInt(parameters[4]);\r\n            var a = parseInt(parameters[5]);\r\n\r\n            display.setChannelMask(layer, channelMask);\r\n            display.fillColor(layer, r, g, b, a);\r\n\r\n        },\r\n\r\n        \"clip\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n\r\n            display.clip(layer);\r\n\r\n        },\r\n\r\n        \"clipboard\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n            var mimetype = parameters[1];\r\n\r\n            // Create stream \r\n            if (guac_client.onclipboard) {\r\n                var stream = streams[stream_index] = new Guacamole.InputStream(guac_client, stream_index);\r\n                guac_client.onclipboard(stream, mimetype);\r\n            }\r\n\r\n            // Otherwise, unsupported\r\n            else\r\n                guac_client.sendAck(stream_index, \"Clipboard unsupported\", 0x0100);\r\n\r\n        },\r\n\r\n        \"close\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n\r\n            display.close(layer);\r\n\r\n        },\r\n\r\n        \"copy\": function(parameters) {\r\n\r\n            var srcL = getLayer(parseInt(parameters[0]));\r\n            var srcX = parseInt(parameters[1]);\r\n            var srcY = parseInt(parameters[2]);\r\n            var srcWidth = parseInt(parameters[3]);\r\n            var srcHeight = parseInt(parameters[4]);\r\n            var channelMask = parseInt(parameters[5]);\r\n            var dstL = getLayer(parseInt(parameters[6]));\r\n            var dstX = parseInt(parameters[7]);\r\n            var dstY = parseInt(parameters[8]);\r\n\r\n            display.setChannelMask(dstL, channelMask);\r\n            display.copy(srcL, srcX, srcY, srcWidth, srcHeight, \r\n                         dstL, dstX, dstY);\r\n\r\n        },\r\n\r\n        \"cstroke\": function(parameters) {\r\n\r\n            var channelMask = parseInt(parameters[0]);\r\n            var layer = getLayer(parseInt(parameters[1]));\r\n            var cap = lineCap[parseInt(parameters[2])];\r\n            var join = lineJoin[parseInt(parameters[3])];\r\n            var thickness = parseInt(parameters[4]);\r\n            var r = parseInt(parameters[5]);\r\n            var g = parseInt(parameters[6]);\r\n            var b = parseInt(parameters[7]);\r\n            var a = parseInt(parameters[8]);\r\n\r\n            display.setChannelMask(layer, channelMask);\r\n            display.strokeColor(layer, cap, join, thickness, r, g, b, a);\r\n\r\n        },\r\n\r\n        \"cursor\": function(parameters) {\r\n\r\n            var cursorHotspotX = parseInt(parameters[0]);\r\n            var cursorHotspotY = parseInt(parameters[1]);\r\n            var srcL = getLayer(parseInt(parameters[2]));\r\n            var srcX = parseInt(parameters[3]);\r\n            var srcY = parseInt(parameters[4]);\r\n            var srcWidth = parseInt(parameters[5]);\r\n            var srcHeight = parseInt(parameters[6]);\r\n\r\n            display.setCursor(cursorHotspotX, cursorHotspotY,\r\n                              srcL, srcX, srcY, srcWidth, srcHeight);\r\n\r\n        },\r\n\r\n        \"curve\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n            var cp1x = parseInt(parameters[1]);\r\n            var cp1y = parseInt(parameters[2]);\r\n            var cp2x = parseInt(parameters[3]);\r\n            var cp2y = parseInt(parameters[4]);\r\n            var x = parseInt(parameters[5]);\r\n            var y = parseInt(parameters[6]);\r\n\r\n            display.curveTo(layer, cp1x, cp1y, cp2x, cp2y, x, y);\r\n\r\n        },\r\n\r\n        \"disconnect\" : function handleDisconnect(parameters) {\r\n\r\n            // Explicitly tear down connection\r\n            guac_client.disconnect();\r\n\r\n        },\r\n\r\n        \"dispose\": function(parameters) {\r\n            \r\n            var layer_index = parseInt(parameters[0]);\r\n\r\n            // If visible layer, remove from parent\r\n            if (layer_index > 0) {\r\n\r\n                // Remove from parent\r\n                var layer = getLayer(layer_index);\r\n                display.dispose(layer);\r\n\r\n                // Delete reference\r\n                delete layers[layer_index];\r\n\r\n            }\r\n\r\n            // If buffer, just delete reference\r\n            else if (layer_index < 0)\r\n                delete layers[layer_index];\r\n\r\n            // Attempting to dispose the root layer currently has no effect.\r\n\r\n        },\r\n\r\n        \"distort\": function(parameters) {\r\n\r\n            var layer_index = parseInt(parameters[0]);\r\n            var a = parseFloat(parameters[1]);\r\n            var b = parseFloat(parameters[2]);\r\n            var c = parseFloat(parameters[3]);\r\n            var d = parseFloat(parameters[4]);\r\n            var e = parseFloat(parameters[5]);\r\n            var f = parseFloat(parameters[6]);\r\n\r\n            // Only valid for visible layers (not buffers)\r\n            if (layer_index >= 0) {\r\n                var layer = getLayer(layer_index);\r\n                display.distort(layer, a, b, c, d, e, f);\r\n            }\r\n\r\n        },\r\n \r\n        \"error\": function(parameters) {\r\n\r\n            var reason = parameters[0];\r\n            var code = parseInt(parameters[1]);\r\n\r\n            // Call handler if defined\r\n            if (guac_client.onerror)\r\n                guac_client.onerror(new Guacamole.Status(code, reason));\r\n\r\n            guac_client.disconnect();\r\n\r\n        },\r\n\r\n        \"end\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n\r\n            // Get stream\r\n            var stream = streams[stream_index];\r\n            if (stream) {\r\n\r\n                // Signal end of stream if handler defined\r\n                if (stream.onend)\r\n                    stream.onend();\r\n\r\n                // Invalidate stream\r\n                delete streams[stream_index];\r\n\r\n            }\r\n\r\n        },\r\n\r\n        \"file\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n            var mimetype = parameters[1];\r\n            var filename = parameters[2];\r\n\r\n            // Create stream \r\n            if (guac_client.onfile) {\r\n                var stream = streams[stream_index] = new Guacamole.InputStream(guac_client, stream_index);\r\n                guac_client.onfile(stream, mimetype, filename);\r\n            }\r\n\r\n            // Otherwise, unsupported\r\n            else\r\n                guac_client.sendAck(stream_index, \"File transfer unsupported\", 0x0100);\r\n\r\n        },\r\n\r\n        \"filesystem\" : function handleFilesystem(parameters) {\r\n\r\n            var objectIndex = parseInt(parameters[0]);\r\n            var name = parameters[1];\r\n\r\n            // Create object, if supported\r\n            if (guac_client.onfilesystem) {\r\n                var object = objects[objectIndex] = new Guacamole.Object(guac_client, objectIndex);\r\n                guac_client.onfilesystem(object, name);\r\n            }\r\n\r\n            // If unsupported, simply ignore the availability of the filesystem\r\n\r\n        },\r\n\r\n        \"identity\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n\r\n            display.setTransform(layer, 1, 0, 0, 1, 0, 0);\r\n\r\n        },\r\n\r\n        \"img\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n            var channelMask = parseInt(parameters[1]);\r\n            var layer = getLayer(parseInt(parameters[2]));\r\n            var mimetype = parameters[3];\r\n            var x = parseInt(parameters[4]);\r\n            var y = parseInt(parameters[5]);\r\n\r\n            // Create stream\r\n            var stream = streams[stream_index] = new Guacamole.InputStream(guac_client, stream_index);\r\n\r\n            // Draw received contents once decoded\r\n            display.setChannelMask(layer, channelMask);\r\n            display.drawStream(layer, x, y, stream, mimetype);\r\n\r\n        },\r\n\r\n        \"jpeg\": function(parameters) {\r\n\r\n            var channelMask = parseInt(parameters[0]);\r\n            var layer = getLayer(parseInt(parameters[1]));\r\n            var x = parseInt(parameters[2]);\r\n            var y = parseInt(parameters[3]);\r\n            var data = parameters[4];\r\n\r\n            display.setChannelMask(layer, channelMask);\r\n            display.draw(layer, x, y, \"data:image/jpeg;base64,\" + data);\r\n\r\n        },\r\n\r\n        \"lfill\": function(parameters) {\r\n\r\n            var channelMask = parseInt(parameters[0]);\r\n            var layer = getLayer(parseInt(parameters[1]));\r\n            var srcLayer = getLayer(parseInt(parameters[2]));\r\n\r\n            display.setChannelMask(layer, channelMask);\r\n            display.fillLayer(layer, srcLayer);\r\n\r\n        },\r\n\r\n        \"line\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n            var x = parseInt(parameters[1]);\r\n            var y = parseInt(parameters[2]);\r\n\r\n            display.lineTo(layer, x, y);\r\n\r\n        },\r\n\r\n        \"lstroke\": function(parameters) {\r\n\r\n            var channelMask = parseInt(parameters[0]);\r\n            var layer = getLayer(parseInt(parameters[1]));\r\n            var srcLayer = getLayer(parseInt(parameters[2]));\r\n\r\n            display.setChannelMask(layer, channelMask);\r\n            display.strokeLayer(layer, srcLayer);\r\n\r\n        },\r\n\r\n        \"mouse\" : function handleMouse(parameters) {\r\n\r\n            var x = parseInt(parameters[0]);\r\n            var y = parseInt(parameters[1]);\r\n\r\n            // Display and move software cursor to received coordinates\r\n            display.showCursor(true);\r\n            display.moveCursor(x, y);\r\n\r\n        },\r\n\r\n        \"move\": function(parameters) {\r\n            \r\n            var layer_index = parseInt(parameters[0]);\r\n            var parent_index = parseInt(parameters[1]);\r\n            var x = parseInt(parameters[2]);\r\n            var y = parseInt(parameters[3]);\r\n            var z = parseInt(parameters[4]);\r\n\r\n            // Only valid for non-default layers\r\n            if (layer_index > 0 && parent_index >= 0) {\r\n                var layer = getLayer(layer_index);\r\n                var parent = getLayer(parent_index);\r\n                display.move(layer, parent, x, y, z);\r\n            }\r\n\r\n        },\r\n\r\n        \"name\": function(parameters) {\r\n            if (guac_client.onname) guac_client.onname(parameters[0]);\r\n        },\r\n\r\n        \"nest\": function(parameters) {\r\n            var parser = getParser(parseInt(parameters[0]));\r\n            parser.receive(parameters[1]);\r\n        },\r\n\r\n        \"pipe\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n            var mimetype = parameters[1];\r\n            var name = parameters[2];\r\n\r\n            // Create stream \r\n            if (guac_client.onpipe) {\r\n                var stream = streams[stream_index] = new Guacamole.InputStream(guac_client, stream_index);\r\n                guac_client.onpipe(stream, mimetype, name);\r\n            }\r\n\r\n            // Otherwise, unsupported\r\n            else\r\n                guac_client.sendAck(stream_index, \"Named pipes unsupported\", 0x0100);\r\n\r\n        },\r\n\r\n        \"png\": function(parameters) {\r\n\r\n            var channelMask = parseInt(parameters[0]);\r\n            var layer = getLayer(parseInt(parameters[1]));\r\n            var x = parseInt(parameters[2]);\r\n            var y = parseInt(parameters[3]);\r\n            var data = parameters[4];\r\n\r\n            display.setChannelMask(layer, channelMask);\r\n            display.draw(layer, x, y, \"data:image/png;base64,\" + data);\r\n\r\n        },\r\n\r\n        \"pop\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n\r\n            display.pop(layer);\r\n\r\n        },\r\n\r\n        \"push\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n\r\n            display.push(layer);\r\n\r\n        },\r\n \r\n        \"rect\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n            var x = parseInt(parameters[1]);\r\n            var y = parseInt(parameters[2]);\r\n            var w = parseInt(parameters[3]);\r\n            var h = parseInt(parameters[4]);\r\n\r\n            display.rect(layer, x, y, w, h);\r\n\r\n        },\r\n                \r\n        \"required\": function required(parameters) {\r\n            if (guac_client.onrequired) guac_client.onrequired(parameters);\r\n        },\r\n        \r\n        \"reset\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n\r\n            display.reset(layer);\r\n\r\n        },\r\n        \r\n        \"set\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n            var name = parameters[1];\r\n            var value = parameters[2];\r\n\r\n            // Call property handler if defined\r\n            var handler = layerPropertyHandlers[name];\r\n            if (handler)\r\n                handler(layer, value);\r\n\r\n        },\r\n\r\n        \"shade\": function(parameters) {\r\n            \r\n            var layer_index = parseInt(parameters[0]);\r\n            var a = parseInt(parameters[1]);\r\n\r\n            // Only valid for visible layers (not buffers)\r\n            if (layer_index >= 0) {\r\n                var layer = getLayer(layer_index);\r\n                display.shade(layer, a);\r\n            }\r\n\r\n        },\r\n\r\n        \"size\": function(parameters) {\r\n\r\n            var layer_index = parseInt(parameters[0]);\r\n            var layer = getLayer(layer_index);\r\n            var width = parseInt(parameters[1]);\r\n            var height = parseInt(parameters[2]);\r\n\r\n            display.resize(layer, width, height);\r\n\r\n        },\r\n        \r\n        \"start\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n            var x = parseInt(parameters[1]);\r\n            var y = parseInt(parameters[2]);\r\n\r\n            display.moveTo(layer, x, y);\r\n\r\n        },\r\n\r\n        \"sync\": function(parameters) {\r\n\r\n            var timestamp = parseInt(parameters[0]);\r\n\r\n            // Flush display, send sync when done\r\n            display.flush(function displaySyncComplete() {\r\n\r\n                // Synchronize all audio players\r\n                for (var index in audioPlayers) {\r\n                    var audioPlayer = audioPlayers[index];\r\n                    if (audioPlayer)\r\n                        audioPlayer.sync();\r\n                }\r\n\r\n                // Send sync response to server\r\n                if (timestamp !== currentTimestamp) {\r\n                    tunnel.sendMessage(\"sync\", timestamp);\r\n                    currentTimestamp = timestamp;\r\n                }\r\n\r\n            });\r\n\r\n            // If received first update, no longer waiting.\r\n            if (currentState === STATE_WAITING)\r\n                setState(STATE_CONNECTED);\r\n\r\n            // Call sync handler if defined\r\n            if (guac_client.onsync)\r\n                guac_client.onsync(timestamp);\r\n\r\n        },\r\n\r\n        \"transfer\": function(parameters) {\r\n\r\n            var srcL = getLayer(parseInt(parameters[0]));\r\n            var srcX = parseInt(parameters[1]);\r\n            var srcY = parseInt(parameters[2]);\r\n            var srcWidth = parseInt(parameters[3]);\r\n            var srcHeight = parseInt(parameters[4]);\r\n            var function_index = parseInt(parameters[5]);\r\n            var dstL = getLayer(parseInt(parameters[6]));\r\n            var dstX = parseInt(parameters[7]);\r\n            var dstY = parseInt(parameters[8]);\r\n\r\n            /* SRC */\r\n            if (function_index === 0x3)\r\n                display.put(srcL, srcX, srcY, srcWidth, srcHeight, \r\n                    dstL, dstX, dstY);\r\n\r\n            /* Anything else that isn't a NO-OP */\r\n            else if (function_index !== 0x5)\r\n                display.transfer(srcL, srcX, srcY, srcWidth, srcHeight, \r\n                    dstL, dstX, dstY, Guacamole.Client.DefaultTransferFunction[function_index]);\r\n\r\n        },\r\n\r\n        \"transform\": function(parameters) {\r\n\r\n            var layer = getLayer(parseInt(parameters[0]));\r\n            var a = parseFloat(parameters[1]);\r\n            var b = parseFloat(parameters[2]);\r\n            var c = parseFloat(parameters[3]);\r\n            var d = parseFloat(parameters[4]);\r\n            var e = parseFloat(parameters[5]);\r\n            var f = parseFloat(parameters[6]);\r\n\r\n            display.transform(layer, a, b, c, d, e, f);\r\n\r\n        },\r\n\r\n        \"undefine\" : function handleUndefine(parameters) {\r\n\r\n            // Get object\r\n            var objectIndex = parseInt(parameters[0]);\r\n            var object = objects[objectIndex];\r\n\r\n            // Signal end of object definition\r\n            if (object && object.onundefine)\r\n                object.onundefine();\r\n\r\n        },\r\n\r\n        \"video\": function(parameters) {\r\n\r\n            var stream_index = parseInt(parameters[0]);\r\n            var layer = getLayer(parseInt(parameters[1]));\r\n            var mimetype = parameters[2];\r\n\r\n            // Create stream\r\n            var stream = streams[stream_index] =\r\n                    new Guacamole.InputStream(guac_client, stream_index);\r\n\r\n            // Get player instance via callback\r\n            var videoPlayer = null;\r\n            if (guac_client.onvideo)\r\n                videoPlayer = guac_client.onvideo(stream, layer, mimetype);\r\n\r\n            // If unsuccessful, try to use a default implementation\r\n            if (!videoPlayer)\r\n                videoPlayer = Guacamole.VideoPlayer.getInstance(stream, layer, mimetype);\r\n\r\n            // If we have successfully retrieved an video player, send success response\r\n            if (videoPlayer) {\r\n                videoPlayers[stream_index] = videoPlayer;\r\n                guac_client.sendAck(stream_index, \"OK\", 0x0000);\r\n            }\r\n\r\n            // Otherwise, mimetype must be unsupported\r\n            else\r\n                guac_client.sendAck(stream_index, \"BAD TYPE\", 0x030F);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    tunnel.oninstruction = function(opcode, parameters) {\r\n\r\n        var handler = instructionHandlers[opcode];\r\n        if (handler)\r\n            handler(parameters);\r\n\r\n    };\r\n\r\n    /**\r\n     * Sends a disconnect instruction to the server and closes the tunnel.\r\n     */\r\n    this.disconnect = function() {\r\n\r\n        // Only attempt disconnection not disconnected.\r\n        if (currentState != STATE_DISCONNECTED\r\n                && currentState != STATE_DISCONNECTING) {\r\n\r\n            setState(STATE_DISCONNECTING);\r\n\r\n            // Stop ping\r\n            if (pingInterval)\r\n                window.clearInterval(pingInterval);\r\n\r\n            // Send disconnect message and disconnect\r\n            tunnel.sendMessage(\"disconnect\");\r\n            tunnel.disconnect();\r\n            setState(STATE_DISCONNECTED);\r\n\r\n        }\r\n\r\n    };\r\n    \r\n    /**\r\n     * Connects the underlying tunnel of this Guacamole.Client, passing the\r\n     * given arbitrary data to the tunnel during the connection process.\r\n     *\r\n     * @param data Arbitrary connection data to be sent to the underlying\r\n     *             tunnel during the connection process.\r\n     * @throws {Guacamole.Status} If an error occurs during connection.\r\n     */\r\n    this.connect = function(data) {\r\n\r\n        setState(STATE_CONNECTING);\r\n\r\n        try {\r\n            tunnel.connect(data);\r\n        }\r\n        catch (status) {\r\n            setState(STATE_IDLE);\r\n            throw status;\r\n        }\r\n\r\n        // Ping every 5 seconds (ensure connection alive)\r\n        pingInterval = window.setInterval(function() {\r\n            tunnel.sendMessage(\"nop\");\r\n        }, 5000);\r\n\r\n        setState(STATE_WAITING);\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * Map of all Guacamole binary raster operations to transfer functions.\r\n * @private\r\n */\r\nGuacamole.Client.DefaultTransferFunction = {\r\n\r\n    /* BLACK */\r\n    0x0: function (src, dst) {\r\n        dst.red = dst.green = dst.blue = 0x00;\r\n    },\r\n\r\n    /* WHITE */\r\n    0xF: function (src, dst) {\r\n        dst.red = dst.green = dst.blue = 0xFF;\r\n    },\r\n\r\n    /* SRC */\r\n    0x3: function (src, dst) {\r\n        dst.red   = src.red;\r\n        dst.green = src.green;\r\n        dst.blue  = src.blue;\r\n        dst.alpha = src.alpha;\r\n    },\r\n\r\n    /* DEST (no-op) */\r\n    0x5: function (src, dst) {\r\n        // Do nothing\r\n    },\r\n\r\n    /* Invert SRC */\r\n    0xC: function (src, dst) {\r\n        dst.red   = 0xFF & ~src.red;\r\n        dst.green = 0xFF & ~src.green;\r\n        dst.blue  = 0xFF & ~src.blue;\r\n        dst.alpha =  src.alpha;\r\n    },\r\n    \r\n    /* Invert DEST */\r\n    0xA: function (src, dst) {\r\n        dst.red   = 0xFF & ~dst.red;\r\n        dst.green = 0xFF & ~dst.green;\r\n        dst.blue  = 0xFF & ~dst.blue;\r\n    },\r\n\r\n    /* AND */\r\n    0x1: function (src, dst) {\r\n        dst.red   =  ( src.red   &  dst.red);\r\n        dst.green =  ( src.green &  dst.green);\r\n        dst.blue  =  ( src.blue  &  dst.blue);\r\n    },\r\n\r\n    /* NAND */\r\n    0xE: function (src, dst) {\r\n        dst.red   = 0xFF & ~( src.red   &  dst.red);\r\n        dst.green = 0xFF & ~( src.green &  dst.green);\r\n        dst.blue  = 0xFF & ~( src.blue  &  dst.blue);\r\n    },\r\n\r\n    /* OR */\r\n    0x7: function (src, dst) {\r\n        dst.red   =  ( src.red   |  dst.red);\r\n        dst.green =  ( src.green |  dst.green);\r\n        dst.blue  =  ( src.blue  |  dst.blue);\r\n    },\r\n\r\n    /* NOR */\r\n    0x8: function (src, dst) {\r\n        dst.red   = 0xFF & ~( src.red   |  dst.red);\r\n        dst.green = 0xFF & ~( src.green |  dst.green);\r\n        dst.blue  = 0xFF & ~( src.blue  |  dst.blue);\r\n    },\r\n\r\n    /* XOR */\r\n    0x6: function (src, dst) {\r\n        dst.red   =  ( src.red   ^  dst.red);\r\n        dst.green =  ( src.green ^  dst.green);\r\n        dst.blue  =  ( src.blue  ^  dst.blue);\r\n    },\r\n\r\n    /* XNOR */\r\n    0x9: function (src, dst) {\r\n        dst.red   = 0xFF & ~( src.red   ^  dst.red);\r\n        dst.green = 0xFF & ~( src.green ^  dst.green);\r\n        dst.blue  = 0xFF & ~( src.blue  ^  dst.blue);\r\n    },\r\n\r\n    /* AND inverted source */\r\n    0x4: function (src, dst) {\r\n        dst.red   =  0xFF & (~src.red   &  dst.red);\r\n        dst.green =  0xFF & (~src.green &  dst.green);\r\n        dst.blue  =  0xFF & (~src.blue  &  dst.blue);\r\n    },\r\n\r\n    /* OR inverted source */\r\n    0xD: function (src, dst) {\r\n        dst.red   =  0xFF & (~src.red   |  dst.red);\r\n        dst.green =  0xFF & (~src.green |  dst.green);\r\n        dst.blue  =  0xFF & (~src.blue  |  dst.blue);\r\n    },\r\n\r\n    /* AND inverted destination */\r\n    0x2: function (src, dst) {\r\n        dst.red   =  0xFF & ( src.red   & ~dst.red);\r\n        dst.green =  0xFF & ( src.green & ~dst.green);\r\n        dst.blue  =  0xFF & ( src.blue  & ~dst.blue);\r\n    },\r\n\r\n    /* OR inverted destination */\r\n    0xB: function (src, dst) {\r\n        dst.red   =  0xFF & ( src.red   | ~dst.red);\r\n        dst.green =  0xFF & ( src.green | ~dst.green);\r\n        dst.blue  =  0xFF & ( src.blue  | ~dst.blue);\r\n    }\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A reader which automatically handles the given input stream, returning\r\n * received blobs as a single data URI built over the course of the stream.\r\n * Note that this object will overwrite any installed event handlers on the\r\n * given Guacamole.InputStream.\r\n * \r\n * @constructor\r\n * @param {Guacamole.InputStream} stream\r\n *     The stream that data will be read from.\r\n */\r\nGuacamole.DataURIReader = function(stream, mimetype) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.DataURIReader.\r\n     * @private\r\n     */\r\n    var guac_reader = this;\r\n\r\n    /**\r\n     * Current data URI.\r\n     *\r\n     * @private\r\n     * @type {String}\r\n     */\r\n    var uri = 'data:' + mimetype + ';base64,';\r\n\r\n    // Receive blobs as array buffers\r\n    stream.onblob = function dataURIReaderBlob(data) {\r\n\r\n        // Currently assuming data will ALWAYS be safe to simply append. This\r\n        // will not be true if the received base64 data encodes a number of\r\n        // bytes that isn't a multiple of three (as base64 expands in a ratio\r\n        // of exactly 3:4).\r\n        uri += data;\r\n\r\n    };\r\n\r\n    // Simply call onend when end received\r\n    stream.onend = function dataURIReaderEnd() {\r\n        if (guac_reader.onend)\r\n            guac_reader.onend();\r\n    };\r\n\r\n    /**\r\n     * Returns the data URI of all data received through the underlying stream\r\n     * thus far.\r\n     *\r\n     * @returns {String}\r\n     *     The data URI of all data received through the underlying stream thus\r\n     *     far.\r\n     */\r\n    this.getURI = function getURI() {\r\n        return uri;\r\n    };\r\n\r\n    /**\r\n     * Fired once this stream is finished and no further data will be written.\r\n     *\r\n     * @event\r\n     */\r\n    this.onend = null;\r\n\r\n};\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * The Guacamole display. The display does not deal with the Guacamole\r\n * protocol, and instead implements a set of graphical operations which\r\n * embody the set of operations present in the protocol. The order operations\r\n * are executed is guaranteed to be in the same order as their corresponding\r\n * functions are called.\r\n * \r\n * @constructor\r\n */\r\nGuacamole.Display = function() {\r\n\r\n    /**\r\n     * Reference to this Guacamole.Display.\r\n     * @private\r\n     */\r\n    var guac_display = this;\r\n\r\n    var displayWidth = 0;\r\n    var displayHeight = 0;\r\n    var displayScale = 1;\r\n\r\n    // Create display\r\n    var display = document.createElement(\"div\");\r\n    display.style.position = \"relative\";\r\n    display.style.width = displayWidth + \"px\";\r\n    display.style.height = displayHeight + \"px\";\r\n\r\n    // Ensure transformations on display originate at 0,0\r\n    display.style.transformOrigin =\r\n    display.style.webkitTransformOrigin =\r\n    display.style.MozTransformOrigin =\r\n    display.style.OTransformOrigin =\r\n    display.style.msTransformOrigin =\r\n        \"0 0\";\r\n\r\n    // Create default layer\r\n    var default_layer = new Guacamole.Display.VisibleLayer(displayWidth, displayHeight);\r\n\r\n    // Create cursor layer\r\n    var cursor = new Guacamole.Display.VisibleLayer(0, 0);\r\n    cursor.setChannelMask(Guacamole.Layer.SRC);\r\n\r\n    // Add default layer and cursor to display\r\n    display.appendChild(default_layer.getElement());\r\n    display.appendChild(cursor.getElement());\r\n\r\n    // Create bounding div \r\n    var bounds = document.createElement(\"div\");\r\n    bounds.style.position = \"relative\";\r\n    bounds.style.width = (displayWidth*displayScale) + \"px\";\r\n    bounds.style.height = (displayHeight*displayScale) + \"px\";\r\n\r\n    // Add display to bounds\r\n    bounds.appendChild(display);\r\n\r\n    /**\r\n     * The X coordinate of the hotspot of the mouse cursor. The hotspot is\r\n     * the relative location within the image of the mouse cursor at which\r\n     * each click occurs.\r\n     * \r\n     * @type {Number}\r\n     */\r\n    this.cursorHotspotX = 0;\r\n\r\n    /**\r\n     * The Y coordinate of the hotspot of the mouse cursor. The hotspot is\r\n     * the relative location within the image of the mouse cursor at which\r\n     * each click occurs.\r\n     * \r\n     * @type {Number}\r\n     */\r\n    this.cursorHotspotY = 0;\r\n\r\n    /**\r\n     * The current X coordinate of the local mouse cursor. This is not\r\n     * necessarily the location of the actual mouse - it refers only to\r\n     * the location of the cursor image within the Guacamole display, as\r\n     * last set by moveCursor().\r\n     * \r\n     * @type {Number}\r\n     */\r\n    this.cursorX = 0;\r\n\r\n    /**\r\n     * The current X coordinate of the local mouse cursor. This is not\r\n     * necessarily the location of the actual mouse - it refers only to\r\n     * the location of the cursor image within the Guacamole display, as\r\n     * last set by moveCursor().\r\n     * \r\n     * @type {Number}\r\n     */\r\n    this.cursorY = 0;\r\n\r\n    /**\r\n     * Fired when the default layer (and thus the entire Guacamole display)\r\n     * is resized.\r\n     * \r\n     * @event\r\n     * @param {Number} width The new width of the Guacamole display.\r\n     * @param {Number} height The new height of the Guacamole display.\r\n     */\r\n    this.onresize = null;\r\n\r\n    /**\r\n     * Fired whenever the local cursor image is changed. This can be used to\r\n     * implement special handling of the client-side cursor, or to override\r\n     * the default use of a software cursor layer.\r\n     * \r\n     * @event\r\n     * @param {HTMLCanvasElement} canvas The cursor image.\r\n     * @param {Number} x The X-coordinate of the cursor hotspot.\r\n     * @param {Number} y The Y-coordinate of the cursor hotspot.\r\n     */\r\n    this.oncursor = null;\r\n\r\n    /**\r\n     * The queue of all pending Tasks. Tasks will be run in order, with new\r\n     * tasks added at the end of the queue and old tasks removed from the\r\n     * front of the queue (FIFO). These tasks will eventually be grouped\r\n     * into a Frame.\r\n     * @private\r\n     * @type {Task[]}\r\n     */\r\n    var tasks = [];\r\n\r\n    /**\r\n     * The queue of all frames. Each frame is a pairing of an array of tasks\r\n     * and a callback which must be called when the frame is rendered.\r\n     * @private\r\n     * @type {Frame[]}\r\n     */\r\n    var frames = [];\r\n\r\n    /**\r\n     * Flushes all pending frames.\r\n     * @private\r\n     */\r\n    function __flush_frames() {\r\n\r\n        var rendered_frames = 0;\r\n\r\n        // Draw all pending frames, if ready\r\n        while (rendered_frames < frames.length) {\r\n\r\n            var frame = frames[rendered_frames];\r\n            if (!frame.isReady())\r\n                break;\r\n\r\n            frame.flush();\r\n            rendered_frames++;\r\n\r\n        } \r\n\r\n        // Remove rendered frames from array\r\n        frames.splice(0, rendered_frames);\r\n\r\n    }\r\n\r\n    /**\r\n     * An ordered list of tasks which must be executed atomically. Once\r\n     * executed, an associated (and optional) callback will be called.\r\n     *\r\n     * @private\r\n     * @constructor\r\n     * @param {function} callback The function to call when this frame is\r\n     *                            rendered.\r\n     * @param {Task[]} tasks The set of tasks which must be executed to render\r\n     *                       this frame.\r\n     */\r\n    function Frame(callback, tasks) {\r\n\r\n        /**\r\n         * Returns whether this frame is ready to be rendered. This function\r\n         * returns true if and only if ALL underlying tasks are unblocked.\r\n         * \r\n         * @returns {Boolean} true if all underlying tasks are unblocked,\r\n         *                    false otherwise.\r\n         */\r\n        this.isReady = function() {\r\n\r\n            // Search for blocked tasks\r\n            for (var i=0; i < tasks.length; i++) {\r\n                if (tasks[i].blocked)\r\n                    return false;\r\n            }\r\n\r\n            // If no blocked tasks, the frame is ready\r\n            return true;\r\n\r\n        };\r\n\r\n        /**\r\n         * Renders this frame, calling the associated callback, if any, after\r\n         * the frame is complete. This function MUST only be called when no\r\n         * blocked tasks exist. Calling this function with blocked tasks\r\n         * will result in undefined behavior.\r\n         */\r\n        this.flush = function() {\r\n\r\n            // Draw all pending tasks.\r\n            for (var i=0; i < tasks.length; i++)\r\n                tasks[i].execute();\r\n\r\n            // Call callback\r\n            if (callback) callback();\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * A container for an task handler. Each operation which must be ordered\r\n     * is associated with a Task that goes into a task queue. Tasks in this\r\n     * queue are executed in order once their handlers are set, while Tasks \r\n     * without handlers block themselves and any following Tasks from running.\r\n     *\r\n     * @constructor\r\n     * @private\r\n     * @param {function} taskHandler The function to call when this task \r\n     *                               runs, if any.\r\n     * @param {boolean} blocked Whether this task should start blocked.\r\n     */\r\n    function Task(taskHandler, blocked) {\r\n       \r\n        var task = this;\r\n       \r\n        /**\r\n         * Whether this Task is blocked.\r\n         * \r\n         * @type {boolean}\r\n         */\r\n        this.blocked = blocked;\r\n\r\n        /**\r\n         * Unblocks this Task, allowing it to run.\r\n         */\r\n        this.unblock = function() {\r\n            if (task.blocked) {\r\n                task.blocked = false;\r\n                __flush_frames();\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Calls the handler associated with this task IMMEDIATELY. This\r\n         * function does not track whether this task is marked as blocked.\r\n         * Enforcing the blocked status of tasks is up to the caller.\r\n         */\r\n        this.execute = function() {\r\n            if (taskHandler) taskHandler();\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * Schedules a task for future execution. The given handler will execute\r\n     * immediately after all previous tasks upon frame flush, unless this\r\n     * task is blocked. If any tasks is blocked, the entire frame will not\r\n     * render (and no tasks within will execute) until all tasks are unblocked.\r\n     * \r\n     * @private\r\n     * @param {function} handler The function to call when possible, if any.\r\n     * @param {boolean} blocked Whether the task should start blocked.\r\n     * @returns {Task} The Task created and added to the queue for future\r\n     *                 running.\r\n     */\r\n    function scheduleTask(handler, blocked) {\r\n        var task = new Task(handler, blocked);\r\n        tasks.push(task);\r\n        return task;\r\n    }\r\n\r\n    /**\r\n     * Returns the element which contains the Guacamole display.\r\n     * \r\n     * @return {Element} The element containing the Guacamole display.\r\n     */\r\n    this.getElement = function() {\r\n        return bounds;\r\n    };\r\n\r\n    /**\r\n     * Returns the width of this display.\r\n     * \r\n     * @return {Number} The width of this display;\r\n     */\r\n    this.getWidth = function() {\r\n        return displayWidth;\r\n    };\r\n\r\n    /**\r\n     * Returns the height of this display.\r\n     * \r\n     * @return {Number} The height of this display;\r\n     */\r\n    this.getHeight = function() {\r\n        return displayHeight;\r\n    };\r\n\r\n    /**\r\n     * Returns the default layer of this display. Each Guacamole display always\r\n     * has at least one layer. Other layers can optionally be created within\r\n     * this layer, but the default layer cannot be removed and is the absolute\r\n     * ancestor of all other layers.\r\n     * \r\n     * @return {Guacamole.Display.VisibleLayer} The default layer.\r\n     */\r\n    this.getDefaultLayer = function() {\r\n        return default_layer;\r\n    };\r\n\r\n    /**\r\n     * Returns the cursor layer of this display. Each Guacamole display contains\r\n     * a layer for the image of the mouse cursor. This layer is a special case\r\n     * and exists above all other layers, similar to the hardware mouse cursor.\r\n     * \r\n     * @return {Guacamole.Display.VisibleLayer} The cursor layer.\r\n     */\r\n    this.getCursorLayer = function() {\r\n        return cursor;\r\n    };\r\n\r\n    /**\r\n     * Creates a new layer. The new layer will be a direct child of the default\r\n     * layer, but can be moved to be a child of any other layer. Layers returned\r\n     * by this function are visible.\r\n     * \r\n     * @return {Guacamole.Display.VisibleLayer} The newly-created layer.\r\n     */\r\n    this.createLayer = function() {\r\n        var layer = new Guacamole.Display.VisibleLayer(displayWidth, displayHeight);\r\n        layer.move(default_layer, 0, 0, 0);\r\n        return layer;\r\n    };\r\n\r\n    /**\r\n     * Creates a new buffer. Buffers are invisible, off-screen surfaces. They\r\n     * are implemented in the same manner as layers, but do not provide the\r\n     * same nesting semantics.\r\n     * \r\n     * @return {Guacamole.Layer} The newly-created buffer.\r\n     */\r\n    this.createBuffer = function() {\r\n        var buffer = new Guacamole.Layer(0, 0);\r\n        buffer.autosize = 1;\r\n        return buffer;\r\n    };\r\n\r\n    /**\r\n     * Flush all pending draw tasks, if possible, as a new frame. If the entire\r\n     * frame is not ready, the flush will wait until all required tasks are\r\n     * unblocked.\r\n     * \r\n     * @param {function} callback The function to call when this frame is\r\n     *                            flushed. This may happen immediately, or\r\n     *                            later when blocked tasks become unblocked.\r\n     */\r\n    this.flush = function(callback) {\r\n\r\n        // Add frame, reset tasks\r\n        frames.push(new Frame(callback, tasks));\r\n        tasks = [];\r\n\r\n        // Attempt flush\r\n        __flush_frames();\r\n\r\n    };\r\n\r\n    /**\r\n     * Sets the hotspot and image of the mouse cursor displayed within the\r\n     * Guacamole display.\r\n     * \r\n     * @param {Number} hotspotX The X coordinate of the cursor hotspot.\r\n     * @param {Number} hotspotY The Y coordinate of the cursor hotspot.\r\n     * @param {Guacamole.Layer} layer The source layer containing the data which\r\n     *                                should be used as the mouse cursor image.\r\n     * @param {Number} srcx The X coordinate of the upper-left corner of the\r\n     *                      rectangle within the source layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcy The Y coordinate of the upper-left corner of the\r\n     *                      rectangle within the source layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcw The width of the rectangle within the source layer's\r\n     *                      coordinate space to copy data from.\r\n     * @param {Number} srch The height of the rectangle within the source\r\n     *                      layer's coordinate space to copy data from.\r\n\r\n     */\r\n    this.setCursor = function(hotspotX, hotspotY, layer, srcx, srcy, srcw, srch) {\r\n        scheduleTask(function __display_set_cursor() {\r\n\r\n            // Set hotspot\r\n            guac_display.cursorHotspotX = hotspotX;\r\n            guac_display.cursorHotspotY = hotspotY;\r\n\r\n            // Reset cursor size\r\n            cursor.resize(srcw, srch);\r\n\r\n            // Draw cursor to cursor layer\r\n            cursor.copy(layer, srcx, srcy, srcw, srch, 0, 0);\r\n            guac_display.moveCursor(guac_display.cursorX, guac_display.cursorY);\r\n\r\n            // Fire cursor change event\r\n            if (guac_display.oncursor)\r\n                guac_display.oncursor(cursor.toCanvas(), hotspotX, hotspotY);\r\n\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Sets whether the software-rendered cursor is shown. This cursor differs\r\n     * from the hardware cursor in that it is built into the Guacamole.Display,\r\n     * and relies on its own Guacamole layer to render.\r\n     *\r\n     * @param {Boolean} [shown=true] Whether to show the software cursor.\r\n     */\r\n    this.showCursor = function(shown) {\r\n\r\n        var element = cursor.getElement();\r\n        var parent = element.parentNode;\r\n\r\n        // Remove from DOM if hidden\r\n        if (shown === false) {\r\n            if (parent)\r\n                parent.removeChild(element);\r\n        }\r\n\r\n        // Otherwise, ensure cursor is child of display\r\n        else if (parent !== display)\r\n            display.appendChild(element);\r\n\r\n    };\r\n\r\n    /**\r\n     * Sets the location of the local cursor to the given coordinates. For the\r\n     * sake of responsiveness, this function performs its action immediately.\r\n     * Cursor motion is not maintained within atomic frames.\r\n     * \r\n     * @param {Number} x The X coordinate to move the cursor to.\r\n     * @param {Number} y The Y coordinate to move the cursor to.\r\n     */\r\n    this.moveCursor = function(x, y) {\r\n\r\n        // Move cursor layer\r\n        cursor.translate(x - guac_display.cursorHotspotX,\r\n                         y - guac_display.cursorHotspotY);\r\n\r\n        // Update stored position\r\n        guac_display.cursorX = x;\r\n        guac_display.cursorY = y;\r\n\r\n    };\r\n\r\n    /**\r\n     * Changes the size of the given Layer to the given width and height.\r\n     * Resizing is only attempted if the new size provided is actually different\r\n     * from the current size.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to resize.\r\n     * @param {Number} width The new width.\r\n     * @param {Number} height The new height.\r\n     */\r\n    this.resize = function(layer, width, height) {\r\n        scheduleTask(function __display_resize() {\r\n\r\n            layer.resize(width, height);\r\n\r\n            // Resize display if default layer is resized\r\n            if (layer === default_layer) {\r\n\r\n                // Update (set) display size\r\n                displayWidth = width;\r\n                displayHeight = height;\r\n                display.style.width = displayWidth + \"px\";\r\n                display.style.height = displayHeight + \"px\";\r\n\r\n                // Update bounds size\r\n                bounds.style.width = (displayWidth*displayScale) + \"px\";\r\n                bounds.style.height = (displayHeight*displayScale) + \"px\";\r\n\r\n                // Notify of resize\r\n                if (guac_display.onresize)\r\n                    guac_display.onresize(width, height);\r\n\r\n            }\r\n\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Draws the specified image at the given coordinates. The image specified\r\n     * must already be loaded.\r\n     * \r\n     * @param {Guacamole.Layer} layer\r\n     *     The layer to draw upon.\r\n     *\r\n     * @param {Number} x\r\n     *     The destination X coordinate.\r\n     *\r\n     * @param {Number} y \r\n     *     The destination Y coordinate.\r\n     *\r\n     * @param {CanvasImageSource} image\r\n     *     The image to draw. Note that this not a URL.\r\n     */\r\n    this.drawImage = function(layer, x, y, image) {\r\n        scheduleTask(function __display_drawImage() {\r\n            layer.drawImage(x, y, image);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Draws the image contained within the specified Blob at the given\r\n     * coordinates. The Blob specified must already be populated with image\r\n     * data.\r\n     *\r\n     * @param {Guacamole.Layer} layer\r\n     *     The layer to draw upon.\r\n     *\r\n     * @param {Number} x\r\n     *     The destination X coordinate.\r\n     *\r\n     * @param {Number} y\r\n     *     The destination Y coordinate.\r\n     *\r\n     * @param {Blob} blob\r\n     *     The Blob containing the image data to draw.\r\n     */\r\n    this.drawBlob = function(layer, x, y, blob) {\r\n\r\n        var task;\r\n\r\n        // Prefer createImageBitmap() over blob URLs if available\r\n        if (window.createImageBitmap) {\r\n\r\n            var bitmap;\r\n\r\n            // Draw image once loaded\r\n            task = scheduleTask(function drawImageBitmap() {\r\n                layer.drawImage(x, y, bitmap);\r\n            }, true);\r\n\r\n            // Load image from provided blob\r\n            window.createImageBitmap(blob).then(function bitmapLoaded(decoded) {\r\n                bitmap = decoded;\r\n                task.unblock();\r\n            });\r\n\r\n        }\r\n\r\n        // Use blob URLs and the Image object if createImageBitmap() is\r\n        // unavailable\r\n        else {\r\n\r\n            // Create URL for blob\r\n            var url = URL.createObjectURL(blob);\r\n\r\n            // Draw and free blob URL when ready\r\n            task = scheduleTask(function __display_drawBlob() {\r\n\r\n                // Draw the image only if it loaded without errors\r\n                if (image.width && image.height)\r\n                    layer.drawImage(x, y, image);\r\n\r\n                // Blob URL no longer needed\r\n                URL.revokeObjectURL(url);\r\n\r\n            }, true);\r\n\r\n            // Load image from URL\r\n            var image = new Image();\r\n            image.onload = task.unblock;\r\n            image.onerror = task.unblock;\r\n            image.src = url;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Draws the image within the given stream at the given coordinates. The\r\n     * image will be loaded automatically, and this and any future operations\r\n     * will wait for the image to finish loading. This function will\r\n     * automatically choose an approriate method for reading and decoding the\r\n     * given image stream, and should be preferred for received streams except\r\n     * where manual decoding of the stream is unavoidable.\r\n     *\r\n     * @param {Guacamole.Layer} layer\r\n     *     The layer to draw upon.\r\n     *\r\n     * @param {Number} x\r\n     *     The destination X coordinate.\r\n     *\r\n     * @param {Number} y\r\n     *     The destination Y coordinate.\r\n     *\r\n     * @param {Guacamole.InputStream} stream\r\n     *     The stream along which image data will be received.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the image within the stream.\r\n     */\r\n    this.drawStream = function drawStream(layer, x, y, stream, mimetype) {\r\n\r\n        // If createImageBitmap() is available, load the image as a blob so\r\n        // that function can be used\r\n        if (window.createImageBitmap) {\r\n            var reader = new Guacamole.BlobReader(stream, mimetype);\r\n            reader.onend = function drawImageBlob() {\r\n                guac_display.drawBlob(layer, x, y, reader.getBlob());\r\n            };\r\n        }\r\n\r\n        // Lacking createImageBitmap(), fall back to data URIs and the Image\r\n        // object\r\n        else {\r\n            var reader = new Guacamole.DataURIReader(stream, mimetype);\r\n            reader.onend = function drawImageDataURI() {\r\n                guac_display.draw(layer, x, y, reader.getURI());\r\n            };\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Draws the image at the specified URL at the given coordinates. The image\r\n     * will be loaded automatically, and this and any future operations will\r\n     * wait for the image to finish loading.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {Number} x The destination X coordinate.\r\n     * @param {Number} y The destination Y coordinate.\r\n     * @param {String} url The URL of the image to draw.\r\n     */\r\n    this.draw = function(layer, x, y, url) {\r\n\r\n        var task = scheduleTask(function __display_draw() {\r\n\r\n            // Draw the image only if it loaded without errors\r\n            if (image.width && image.height)\r\n                layer.drawImage(x, y, image);\r\n\r\n        }, true);\r\n\r\n        var image = new Image();\r\n        image.onload = task.unblock;\r\n        image.onerror = task.unblock;\r\n        image.src = url;\r\n\r\n    };\r\n\r\n    /**\r\n     * Plays the video at the specified URL within this layer. The video\r\n     * will be loaded automatically, and this and any future operations will\r\n     * wait for the video to finish loading. Future operations will not be\r\n     * executed until the video finishes playing.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {String} mimetype The mimetype of the video to play.\r\n     * @param {Number} duration The duration of the video in milliseconds.\r\n     * @param {String} url The URL of the video to play.\r\n     */\r\n    this.play = function(layer, mimetype, duration, url) {\r\n\r\n        // Start loading the video\r\n        var video = document.createElement(\"video\");\r\n        video.type = mimetype;\r\n        video.src = url;\r\n\r\n        // Start copying frames when playing\r\n        video.addEventListener(\"play\", function() {\r\n            \r\n            function render_callback() {\r\n                layer.drawImage(0, 0, video);\r\n                if (!video.ended)\r\n                    window.setTimeout(render_callback, 20);\r\n            }\r\n            \r\n            render_callback();\r\n            \r\n        }, false);\r\n\r\n        scheduleTask(video.play);\r\n\r\n    };\r\n\r\n    /**\r\n     * Transfer a rectangle of image data from one Layer to this Layer using the\r\n     * specified transfer function.\r\n     * \r\n     * @param {Guacamole.Layer} srcLayer The Layer to copy image data from.\r\n     * @param {Number} srcx The X coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcy The Y coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcw The width of the rectangle within the source Layer's\r\n     *                      coordinate space to copy data from.\r\n     * @param {Number} srch The height of the rectangle within the source\r\n     *                      Layer's coordinate space to copy data from.\r\n     * @param {Guacamole.Layer} dstLayer The layer to draw upon.\r\n     * @param {Number} x The destination X coordinate.\r\n     * @param {Number} y The destination Y coordinate.\r\n     * @param {Function} transferFunction The transfer function to use to\r\n     *                                    transfer data from source to\r\n     *                                    destination.\r\n     */\r\n    this.transfer = function(srcLayer, srcx, srcy, srcw, srch, dstLayer, x, y, transferFunction) {\r\n        scheduleTask(function __display_transfer() {\r\n            dstLayer.transfer(srcLayer, srcx, srcy, srcw, srch, x, y, transferFunction);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Put a rectangle of image data from one Layer to this Layer directly\r\n     * without performing any alpha blending. Simply copy the data.\r\n     * \r\n     * @param {Guacamole.Layer} srcLayer The Layer to copy image data from.\r\n     * @param {Number} srcx The X coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcy The Y coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcw The width of the rectangle within the source Layer's\r\n     *                      coordinate space to copy data from.\r\n     * @param {Number} srch The height of the rectangle within the source\r\n     *                      Layer's coordinate space to copy data from.\r\n     * @param {Guacamole.Layer} dstLayer The layer to draw upon.\r\n     * @param {Number} x The destination X coordinate.\r\n     * @param {Number} y The destination Y coordinate.\r\n     */\r\n    this.put = function(srcLayer, srcx, srcy, srcw, srch, dstLayer, x, y) {\r\n        scheduleTask(function __display_put() {\r\n            dstLayer.put(srcLayer, srcx, srcy, srcw, srch, x, y);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Copy a rectangle of image data from one Layer to this Layer. This\r\n     * operation will copy exactly the image data that will be drawn once all\r\n     * operations of the source Layer that were pending at the time this\r\n     * function was called are complete. This operation will not alter the\r\n     * size of the source Layer even if its autosize property is set to true.\r\n     * \r\n     * @param {Guacamole.Layer} srcLayer The Layer to copy image data from.\r\n     * @param {Number} srcx The X coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcy The Y coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcw The width of the rectangle within the source Layer's\r\n     *                      coordinate space to copy data from.\r\n     * @param {Number} srch The height of the rectangle within the source\r\n     *                      Layer's coordinate space to copy data from.\r\n     * @param {Guacamole.Layer} dstLayer The layer to draw upon.\r\n     * @param {Number} x The destination X coordinate.\r\n     * @param {Number} y The destination Y coordinate.\r\n     */\r\n    this.copy = function(srcLayer, srcx, srcy, srcw, srch, dstLayer, x, y) {\r\n        scheduleTask(function __display_copy() {\r\n            dstLayer.copy(srcLayer, srcx, srcy, srcw, srch, x, y);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Starts a new path at the specified point.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {Number} x The X coordinate of the point to draw.\r\n     * @param {Number} y The Y coordinate of the point to draw.\r\n     */\r\n    this.moveTo = function(layer, x, y) {\r\n        scheduleTask(function __display_moveTo() {\r\n            layer.moveTo(x, y);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Add the specified line to the current path.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {Number} x The X coordinate of the endpoint of the line to draw.\r\n     * @param {Number} y The Y coordinate of the endpoint of the line to draw.\r\n     */\r\n    this.lineTo = function(layer, x, y) {\r\n        scheduleTask(function __display_lineTo() {\r\n            layer.lineTo(x, y);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Add the specified arc to the current path.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {Number} x The X coordinate of the center of the circle which\r\n     *                   will contain the arc.\r\n     * @param {Number} y The Y coordinate of the center of the circle which\r\n     *                   will contain the arc.\r\n     * @param {Number} radius The radius of the circle.\r\n     * @param {Number} startAngle The starting angle of the arc, in radians.\r\n     * @param {Number} endAngle The ending angle of the arc, in radians.\r\n     * @param {Boolean} negative Whether the arc should be drawn in order of\r\n     *                           decreasing angle.\r\n     */\r\n    this.arc = function(layer, x, y, radius, startAngle, endAngle, negative) {\r\n        scheduleTask(function __display_arc() {\r\n            layer.arc(x, y, radius, startAngle, endAngle, negative);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Starts a new path at the specified point.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {Number} cp1x The X coordinate of the first control point.\r\n     * @param {Number} cp1y The Y coordinate of the first control point.\r\n     * @param {Number} cp2x The X coordinate of the second control point.\r\n     * @param {Number} cp2y The Y coordinate of the second control point.\r\n     * @param {Number} x The X coordinate of the endpoint of the curve.\r\n     * @param {Number} y The Y coordinate of the endpoint of the curve.\r\n     */\r\n    this.curveTo = function(layer, cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        scheduleTask(function __display_curveTo() {\r\n            layer.curveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Closes the current path by connecting the end point with the start\r\n     * point (if any) with a straight line.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     */\r\n    this.close = function(layer) {\r\n        scheduleTask(function __display_close() {\r\n            layer.close();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Add the specified rectangle to the current path.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {Number} x The X coordinate of the upper-left corner of the\r\n     *                   rectangle to draw.\r\n     * @param {Number} y The Y coordinate of the upper-left corner of the\r\n     *                   rectangle to draw.\r\n     * @param {Number} w The width of the rectangle to draw.\r\n     * @param {Number} h The height of the rectangle to draw.\r\n     */\r\n    this.rect = function(layer, x, y, w, h) {\r\n        scheduleTask(function __display_rect() {\r\n            layer.rect(x, y, w, h);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Clip all future drawing operations by the current path. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as fillColor()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to affect.\r\n     */\r\n    this.clip = function(layer) {\r\n        scheduleTask(function __display_clip() {\r\n            layer.clip();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Stroke the current path with the specified color. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as clip()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {String} cap The line cap style. Can be \"round\", \"square\",\r\n     *                     or \"butt\".\r\n     * @param {String} join The line join style. Can be \"round\", \"bevel\",\r\n     *                      or \"miter\".\r\n     * @param {Number} thickness The line thickness in pixels.\r\n     * @param {Number} r The red component of the color to fill.\r\n     * @param {Number} g The green component of the color to fill.\r\n     * @param {Number} b The blue component of the color to fill.\r\n     * @param {Number} a The alpha component of the color to fill.\r\n     */\r\n    this.strokeColor = function(layer, cap, join, thickness, r, g, b, a) {\r\n        scheduleTask(function __display_strokeColor() {\r\n            layer.strokeColor(cap, join, thickness, r, g, b, a);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Fills the current path with the specified color. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as clip()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {Number} r The red component of the color to fill.\r\n     * @param {Number} g The green component of the color to fill.\r\n     * @param {Number} b The blue component of the color to fill.\r\n     * @param {Number} a The alpha component of the color to fill.\r\n     */\r\n    this.fillColor = function(layer, r, g, b, a) {\r\n        scheduleTask(function __display_fillColor() {\r\n            layer.fillColor(r, g, b, a);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Stroke the current path with the image within the specified layer. The\r\n     * image data will be tiled infinitely within the stroke. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as clip()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {String} cap The line cap style. Can be \"round\", \"square\",\r\n     *                     or \"butt\".\r\n     * @param {String} join The line join style. Can be \"round\", \"bevel\",\r\n     *                      or \"miter\".\r\n     * @param {Number} thickness The line thickness in pixels.\r\n     * @param {Guacamole.Layer} srcLayer The layer to use as a repeating pattern\r\n     *                                   within the stroke.\r\n     */\r\n    this.strokeLayer = function(layer, cap, join, thickness, srcLayer) {\r\n        scheduleTask(function __display_strokeLayer() {\r\n            layer.strokeLayer(cap, join, thickness, srcLayer);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Fills the current path with the image within the specified layer. The\r\n     * image data will be tiled infinitely within the stroke. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as clip()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     * @param {Guacamole.Layer} srcLayer The layer to use as a repeating pattern\r\n     *                                   within the fill.\r\n     */\r\n    this.fillLayer = function(layer, srcLayer) {\r\n        scheduleTask(function __display_fillLayer() {\r\n            layer.fillLayer(srcLayer);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Push current layer state onto stack.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     */\r\n    this.push = function(layer) {\r\n        scheduleTask(function __display_push() {\r\n            layer.push();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Pop layer state off stack.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     */\r\n    this.pop = function(layer) {\r\n        scheduleTask(function __display_pop() {\r\n            layer.pop();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Reset the layer, clearing the stack, the current path, and any transform\r\n     * matrix.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to draw upon.\r\n     */\r\n    this.reset = function(layer) {\r\n        scheduleTask(function __display_reset() {\r\n            layer.reset();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Sets the given affine transform (defined with six values from the\r\n     * transform's matrix).\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to modify.\r\n     * @param {Number} a The first value in the affine transform's matrix.\r\n     * @param {Number} b The second value in the affine transform's matrix.\r\n     * @param {Number} c The third value in the affine transform's matrix.\r\n     * @param {Number} d The fourth value in the affine transform's matrix.\r\n     * @param {Number} e The fifth value in the affine transform's matrix.\r\n     * @param {Number} f The sixth value in the affine transform's matrix.\r\n     */\r\n    this.setTransform = function(layer, a, b, c, d, e, f) {\r\n        scheduleTask(function __display_setTransform() {\r\n            layer.setTransform(a, b, c, d, e, f);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Applies the given affine transform (defined with six values from the\r\n     * transform's matrix).\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to modify.\r\n     * @param {Number} a The first value in the affine transform's matrix.\r\n     * @param {Number} b The second value in the affine transform's matrix.\r\n     * @param {Number} c The third value in the affine transform's matrix.\r\n     * @param {Number} d The fourth value in the affine transform's matrix.\r\n     * @param {Number} e The fifth value in the affine transform's matrix.\r\n     * @param {Number} f The sixth value in the affine transform's matrix.\r\n     */\r\n    this.transform = function(layer, a, b, c, d, e, f) {\r\n        scheduleTask(function __display_transform() {\r\n            layer.transform(a, b, c, d, e, f);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Sets the channel mask for future operations on this Layer.\r\n     * \r\n     * The channel mask is a Guacamole-specific compositing operation identifier\r\n     * with a single bit representing each of four channels (in order): source\r\n     * image where destination transparent, source where destination opaque,\r\n     * destination where source transparent, and destination where source\r\n     * opaque.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to modify.\r\n     * @param {Number} mask The channel mask for future operations on this\r\n     *                      Layer.\r\n     */\r\n    this.setChannelMask = function(layer, mask) {\r\n        scheduleTask(function __display_setChannelMask() {\r\n            layer.setChannelMask(mask);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Sets the miter limit for stroke operations using the miter join. This\r\n     * limit is the maximum ratio of the size of the miter join to the stroke\r\n     * width. If this ratio is exceeded, the miter will not be drawn for that\r\n     * joint of the path.\r\n     * \r\n     * @param {Guacamole.Layer} layer The layer to modify.\r\n     * @param {Number} limit The miter limit for stroke operations using the\r\n     *                       miter join.\r\n     */\r\n    this.setMiterLimit = function(layer, limit) {\r\n        scheduleTask(function __display_setMiterLimit() {\r\n            layer.setMiterLimit(limit);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Removes the given layer container entirely, such that it is no longer\r\n     * contained within its parent layer, if any.\r\n     *\r\n     * @param {Guacamole.Display.VisibleLayer} layer\r\n     *     The layer being removed from its parent.\r\n     */\r\n    this.dispose = function dispose(layer) {\r\n        scheduleTask(function disposeLayer() {\r\n            layer.dispose();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Applies the given affine transform (defined with six values from the\r\n     * transform's matrix) to the given layer.\r\n     *\r\n     * @param {Guacamole.Display.VisibleLayer} layer\r\n     *     The layer being distorted.\r\n     *\r\n     * @param {Number} a\r\n     *     The first value in the affine transform's matrix.\r\n     *\r\n     * @param {Number} b\r\n     *     The second value in the affine transform's matrix.\r\n     *\r\n     * @param {Number} c\r\n     *     The third value in the affine transform's matrix.\r\n     *\r\n     * @param {Number} d\r\n     *     The fourth value in the affine transform's matrix.\r\n     *\r\n     * @param {Number} e\r\n     *     The fifth value in the affine transform's matrix.\r\n     *\r\n     * @param {Number} f\r\n     *     The sixth value in the affine transform's matrix.\r\n     */\r\n    this.distort = function distort(layer, a, b, c, d, e, f) {\r\n        scheduleTask(function distortLayer() {\r\n            layer.distort(a, b, c, d, e, f);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Moves the upper-left corner of the given layer to the given X and Y\r\n     * coordinate, sets the Z stacking order, and reparents the layer\r\n     * to the given parent layer.\r\n     *\r\n     * @param {Guacamole.Display.VisibleLayer} layer\r\n     *     The layer being moved.\r\n     *\r\n     * @param {Guacamole.Display.VisibleLayer} parent\r\n     *     The parent to set.\r\n     *\r\n     * @param {Number} x\r\n     *     The X coordinate to move to.\r\n     *\r\n     * @param {Number} y\r\n     *     The Y coordinate to move to.\r\n     *\r\n     * @param {Number} z\r\n     *     The Z coordinate to move to.\r\n     */\r\n    this.move = function move(layer, parent, x, y, z) {\r\n        scheduleTask(function moveLayer() {\r\n            layer.move(parent, x, y, z);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Sets the opacity of the given layer to the given value, where 255 is\r\n     * fully opaque and 0 is fully transparent.\r\n     *\r\n     * @param {Guacamole.Display.VisibleLayer} layer\r\n     *     The layer whose opacity should be set.\r\n     *\r\n     * @param {Number} alpha\r\n     *     The opacity to set.\r\n     */\r\n    this.shade = function shade(layer, alpha) {\r\n        scheduleTask(function shadeLayer() {\r\n            layer.shade(alpha);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Sets the scale of the client display element such that it renders at\r\n     * a relatively smaller or larger size, without affecting the true\r\n     * resolution of the display.\r\n     *\r\n     * @param {Number} scale The scale to resize to, where 1.0 is normal\r\n     *                       size (1:1 scale).\r\n     */\r\n    this.scale = function(scale) {\r\n\r\n        display.style.transform =\r\n        display.style.WebkitTransform =\r\n        display.style.MozTransform =\r\n        display.style.OTransform =\r\n        display.style.msTransform =\r\n\r\n            \"scale(\" + scale + \",\" + scale + \")\";\r\n\r\n        displayScale = scale;\r\n\r\n        // Update bounds size\r\n        bounds.style.width = (displayWidth*displayScale) + \"px\";\r\n        bounds.style.height = (displayHeight*displayScale) + \"px\";\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns the scale of the display.\r\n     *\r\n     * @return {Number} The scale of the display.\r\n     */\r\n    this.getScale = function() {\r\n        return displayScale;\r\n    };\r\n\r\n    /**\r\n     * Returns a canvas element containing the entire display, with all child\r\n     * layers composited within.\r\n     *\r\n     * @return {HTMLCanvasElement} A new canvas element containing a copy of\r\n     *                             the display.\r\n     */\r\n    this.flatten = function() {\r\n       \r\n        // Get destination canvas\r\n        var canvas = document.createElement(\"canvas\");\r\n        canvas.width = default_layer.width;\r\n        canvas.height = default_layer.height;\r\n\r\n        var context = canvas.getContext(\"2d\");\r\n\r\n        // Returns sorted array of children\r\n        function get_children(layer) {\r\n\r\n            // Build array of children\r\n            var children = [];\r\n            for (var index in layer.children)\r\n                children.push(layer.children[index]);\r\n\r\n            // Sort\r\n            children.sort(function children_comparator(a, b) {\r\n\r\n                // Compare based on Z order\r\n                var diff = a.z - b.z;\r\n                if (diff !== 0)\r\n                    return diff;\r\n\r\n                // If Z order identical, use document order\r\n                var a_element = a.getElement();\r\n                var b_element = b.getElement();\r\n                var position = b_element.compareDocumentPosition(a_element);\r\n\r\n                if (position & Node.DOCUMENT_POSITION_PRECEDING) return -1;\r\n                if (position & Node.DOCUMENT_POSITION_FOLLOWING) return  1;\r\n\r\n                // Otherwise, assume same\r\n                return 0;\r\n\r\n            });\r\n\r\n            // Done\r\n            return children;\r\n\r\n        }\r\n\r\n        // Draws the contents of the given layer at the given coordinates\r\n        function draw_layer(layer, x, y) {\r\n\r\n            // Draw layer\r\n            if (layer.width > 0 && layer.height > 0) {\r\n\r\n                // Save and update alpha\r\n                var initial_alpha = context.globalAlpha;\r\n                context.globalAlpha *= layer.alpha / 255.0;\r\n\r\n                // Copy data\r\n                context.drawImage(layer.getCanvas(), x, y);\r\n\r\n                // Draw all children\r\n                var children = get_children(layer);\r\n                for (var i=0; i<children.length; i++) {\r\n                    var child = children[i];\r\n                    draw_layer(child, x + child.x, y + child.y);\r\n                }\r\n\r\n                // Restore alpha\r\n                context.globalAlpha = initial_alpha;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Draw default layer and all children\r\n        draw_layer(default_layer, 0, 0);\r\n\r\n        // Return new canvas copy\r\n        return canvas;\r\n        \r\n    };\r\n\r\n};\r\n\r\n/**\r\n * Simple container for Guacamole.Layer, allowing layers to be easily\r\n * repositioned and nested. This allows certain operations to be accelerated\r\n * through DOM manipulation, rather than raster operations.\r\n * \r\n * @constructor\r\n * @augments Guacamole.Layer\r\n * @param {Number} width The width of the Layer, in pixels. The canvas element\r\n *                       backing this Layer will be given this width.\r\n * @param {Number} height The height of the Layer, in pixels. The canvas element\r\n *                        backing this Layer will be given this height.\r\n */\r\nGuacamole.Display.VisibleLayer = function(width, height) {\r\n\r\n    Guacamole.Layer.apply(this, [width, height]);\r\n\r\n    /**\r\n     * Reference to this layer.\r\n     * @private\r\n     */\r\n    var layer = this;\r\n\r\n    /**\r\n     * Identifier which uniquely identifies this layer. This is COMPLETELY\r\n     * UNRELATED to the index of the underlying layer, which is specific\r\n     * to the Guacamole protocol, and not relevant at this level.\r\n     * \r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    this.__unique_id = Guacamole.Display.VisibleLayer.__next_id++;\r\n\r\n    /**\r\n     * The opacity of the layer container, where 255 is fully opaque and 0 is\r\n     * fully transparent.\r\n     */\r\n    this.alpha = 0xFF;\r\n\r\n    /**\r\n     * X coordinate of the upper-left corner of this layer container within\r\n     * its parent, in pixels.\r\n     * @type {Number}\r\n     */\r\n    this.x = 0;\r\n\r\n    /**\r\n     * Y coordinate of the upper-left corner of this layer container within\r\n     * its parent, in pixels.\r\n     * @type {Number}\r\n     */\r\n    this.y = 0;\r\n\r\n    /**\r\n     * Z stacking order of this layer relative to other sibling layers.\r\n     * @type {Number}\r\n     */\r\n    this.z = 0;\r\n\r\n    /**\r\n     * The affine transformation applied to this layer container. Each element\r\n     * corresponds to a value from the transformation matrix, with the first\r\n     * three values being the first row, and the last three values being the\r\n     * second row. There are six values total.\r\n     * \r\n     * @type {Number[]}\r\n     */\r\n    this.matrix = [1, 0, 0, 1, 0, 0];\r\n\r\n    /**\r\n     * The parent layer container of this layer, if any.\r\n     * @type {Guacamole.Display.VisibleLayer}\r\n     */\r\n    this.parent = null;\r\n\r\n    /**\r\n     * Set of all children of this layer, indexed by layer index. This object\r\n     * will have one property per child.\r\n     */\r\n    this.children = {};\r\n\r\n    // Set layer position\r\n    var canvas = layer.getCanvas();\r\n    canvas.style.position = \"absolute\";\r\n    canvas.style.left = \"0px\";\r\n    canvas.style.top = \"0px\";\r\n\r\n    // Create div with given size\r\n    var div = document.createElement(\"div\");\r\n    div.appendChild(canvas);\r\n    div.style.width = width + \"px\";\r\n    div.style.height = height + \"px\";\r\n    div.style.position = \"absolute\";\r\n    div.style.left = \"0px\";\r\n    div.style.top = \"0px\";\r\n    div.style.overflow = \"hidden\";\r\n\r\n    /**\r\n     * Superclass resize() function.\r\n     * @private\r\n     */\r\n    var __super_resize = this.resize;\r\n\r\n    this.resize = function(width, height) {\r\n\r\n        // Resize containing div\r\n        div.style.width = width + \"px\";\r\n        div.style.height = height + \"px\";\r\n\r\n        __super_resize(width, height);\r\n\r\n    };\r\n  \r\n    /**\r\n     * Returns the element containing the canvas and any other elements\r\n     * associated with this layer.\r\n     * @returns {Element} The element containing this layer's canvas.\r\n     */\r\n    this.getElement = function() {\r\n        return div;\r\n    };\r\n\r\n    /**\r\n     * The translation component of this layer's transform.\r\n     * @private\r\n     */\r\n    var translate = \"translate(0px, 0px)\"; // (0, 0)\r\n\r\n    /**\r\n     * The arbitrary matrix component of this layer's transform.\r\n     * @private\r\n     */\r\n    var matrix = \"matrix(1, 0, 0, 1, 0, 0)\"; // Identity\r\n\r\n    /**\r\n     * Moves the upper-left corner of this layer to the given X and Y\r\n     * coordinate.\r\n     * \r\n     * @param {Number} x The X coordinate to move to.\r\n     * @param {Number} y The Y coordinate to move to.\r\n     */\r\n    this.translate = function(x, y) {\r\n\r\n        layer.x = x;\r\n        layer.y = y;\r\n\r\n        // Generate translation\r\n        translate = \"translate(\"\r\n                        + x + \"px,\"\r\n                        + y + \"px)\";\r\n\r\n        // Set layer transform \r\n        div.style.transform =\r\n        div.style.WebkitTransform =\r\n        div.style.MozTransform =\r\n        div.style.OTransform =\r\n        div.style.msTransform =\r\n\r\n            translate + \" \" + matrix;\r\n\r\n    };\r\n\r\n    /**\r\n     * Moves the upper-left corner of this VisibleLayer to the given X and Y\r\n     * coordinate, sets the Z stacking order, and reparents this VisibleLayer\r\n     * to the given VisibleLayer.\r\n     * \r\n     * @param {Guacamole.Display.VisibleLayer} parent The parent to set.\r\n     * @param {Number} x The X coordinate to move to.\r\n     * @param {Number} y The Y coordinate to move to.\r\n     * @param {Number} z The Z coordinate to move to.\r\n     */\r\n    this.move = function(parent, x, y, z) {\r\n\r\n        // Set parent if necessary\r\n        if (layer.parent !== parent) {\r\n\r\n            // Maintain relationship\r\n            if (layer.parent)\r\n                delete layer.parent.children[layer.__unique_id];\r\n            layer.parent = parent;\r\n            parent.children[layer.__unique_id] = layer;\r\n\r\n            // Reparent element\r\n            var parent_element = parent.getElement();\r\n            parent_element.appendChild(div);\r\n\r\n        }\r\n\r\n        // Set location\r\n        layer.translate(x, y);\r\n        layer.z = z;\r\n        div.style.zIndex = z;\r\n\r\n    };\r\n\r\n    /**\r\n     * Sets the opacity of this layer to the given value, where 255 is fully\r\n     * opaque and 0 is fully transparent.\r\n     * \r\n     * @param {Number} a The opacity to set.\r\n     */\r\n    this.shade = function(a) {\r\n        layer.alpha = a;\r\n        div.style.opacity = a/255.0;\r\n    };\r\n\r\n    /**\r\n     * Removes this layer container entirely, such that it is no longer\r\n     * contained within its parent layer, if any.\r\n     */\r\n    this.dispose = function() {\r\n\r\n        // Remove from parent container\r\n        if (layer.parent) {\r\n            delete layer.parent.children[layer.__unique_id];\r\n            layer.parent = null;\r\n        }\r\n\r\n        // Remove from parent element\r\n        if (div.parentNode)\r\n            div.parentNode.removeChild(div);\r\n        \r\n    };\r\n\r\n    /**\r\n     * Applies the given affine transform (defined with six values from the\r\n     * transform's matrix).\r\n     * \r\n     * @param {Number} a The first value in the affine transform's matrix.\r\n     * @param {Number} b The second value in the affine transform's matrix.\r\n     * @param {Number} c The third value in the affine transform's matrix.\r\n     * @param {Number} d The fourth value in the affine transform's matrix.\r\n     * @param {Number} e The fifth value in the affine transform's matrix.\r\n     * @param {Number} f The sixth value in the affine transform's matrix.\r\n     */\r\n    this.distort = function(a, b, c, d, e, f) {\r\n\r\n        // Store matrix\r\n        layer.matrix = [a, b, c, d, e, f];\r\n\r\n        // Generate matrix transformation\r\n        matrix =\r\n\r\n            /* a c e\r\n             * b d f\r\n             * 0 0 1\r\n             */\r\n    \r\n            \"matrix(\" + a + \",\" + b + \",\" + c + \",\" + d + \",\" + e + \",\" + f + \")\";\r\n\r\n        // Set layer transform \r\n        div.style.transform =\r\n        div.style.WebkitTransform =\r\n        div.style.MozTransform =\r\n        div.style.OTransform =\r\n        div.style.msTransform =\r\n\r\n            translate + \" \" + matrix;\r\n\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * The next identifier to be assigned to the layer container. This identifier\r\n * uniquely identifies each VisibleLayer, but is unrelated to the index of\r\n * the layer, which exists at the protocol/client level only.\r\n * \r\n * @private\r\n * @type {Number}\r\n */\r\nGuacamole.Display.VisibleLayer.__next_id = 0;\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A hidden input field which attempts to keep itself focused at all times,\r\n * except when another input field has been intentionally focused, whether\r\n * programatically or by the user. The actual underlying input field, returned\r\n * by getElement(), may be used as a reliable source of keyboard-related events,\r\n * particularly composition and input events which may require a focused input\r\n * field to be dispatched at all.\r\n *\r\n * @constructor\r\n */\r\nGuacamole.InputSink = function InputSink() {\r\n\r\n    /**\r\n     * Reference to this instance of Guacamole.InputSink.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.InputSink}\r\n     */\r\n    var sink = this;\r\n\r\n    /**\r\n     * The underlying input field, styled to be invisible.\r\n     *\r\n     * @private\r\n     * @type {Element}\r\n     */\r\n    var field = document.createElement('textarea');\r\n    field.style.position   = 'fixed';\r\n    field.style.outline    = 'none';\r\n    field.style.border     = 'none';\r\n    field.style.margin     = '0';\r\n    field.style.padding    = '0';\r\n    field.style.height     = '0';\r\n    field.style.width      = '0';\r\n    field.style.left       = '0';\r\n    field.style.bottom     = '0';\r\n    field.style.resize     = 'none';\r\n    field.style.background = 'transparent';\r\n    field.style.color      = 'transparent';\r\n\r\n    // Keep field clear when modified via normal keypresses\r\n    field.addEventListener(\"keypress\", function clearKeypress(e) {\r\n        field.value = '';\r\n    }, false);\r\n\r\n    // Keep field clear when modofied via composition events\r\n    field.addEventListener(\"compositionend\", function clearCompletedComposition(e) {\r\n        if (e.data)\r\n            field.value = '';\r\n    }, false);\r\n\r\n    // Keep field clear when modofied via input events\r\n    field.addEventListener(\"input\", function clearCompletedInput(e) {\r\n        if (e.data && !e.isComposing)\r\n            field.value = '';\r\n    }, false);\r\n\r\n    // Whenever focus is gained, automatically click to ensure cursor is\r\n    // actually placed within the field (the field may simply be highlighted or\r\n    // outlined otherwise)\r\n    field.addEventListener(\"focus\", function focusReceived() {\r\n        window.setTimeout(function deferRefocus() {\r\n            field.click();\r\n            field.select();\r\n        }, 0);\r\n    }, true);\r\n\r\n    /**\r\n     * Attempts to focus the underlying input field. The focus attempt occurs\r\n     * asynchronously, and may silently fail depending on browser restrictions.\r\n     */\r\n    this.focus = function focus() {\r\n        window.setTimeout(function deferRefocus() {\r\n            field.focus(); // Focus must be deferred to work reliably across browsers\r\n        }, 0);\r\n    };\r\n\r\n    /**\r\n     * Returns the underlying input field. This input field MUST be manually\r\n     * added to the DOM for the Guacamole.InputSink to have any effect.\r\n     *\r\n     * @returns {Element}\r\n     */\r\n    this.getElement = function getElement() {\r\n        return field;\r\n    };\r\n\r\n    // Automatically refocus input sink if part of DOM\r\n    document.addEventListener(\"keydown\", function refocusSink(e) {\r\n\r\n        // Do not refocus if focus is on an input field\r\n        var focused = document.activeElement;\r\n        if (focused && focused !== document.body) {\r\n\r\n            // Only consider focused input fields which are actually visible\r\n            var rect = focused.getBoundingClientRect();\r\n            if (rect.left + rect.width > 0 && rect.top + rect.height > 0)\r\n                return;\r\n\r\n        }\r\n\r\n        // Refocus input sink instead of handling click\r\n        sink.focus();\r\n\r\n    }, true);\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * An input stream abstraction used by the Guacamole client to facilitate\r\n * transfer of files or other binary data.\r\n * \r\n * @constructor\r\n * @param {Guacamole.Client} client The client owning this stream.\r\n * @param {Number} index The index of this stream.\r\n */\r\nGuacamole.InputStream = function(client, index) {\r\n\r\n    /**\r\n     * Reference to this stream.\r\n     * @private\r\n     */\r\n    var guac_stream = this;\r\n\r\n    /**\r\n     * The index of this stream.\r\n     * @type {Number}\r\n     */\r\n    this.index = index;\r\n\r\n    /**\r\n     * Called when a blob of data is received.\r\n     * \r\n     * @event\r\n     * @param {String} data The received base64 data.\r\n     */\r\n    this.onblob = null;\r\n\r\n    /**\r\n     * Called when this stream is closed.\r\n     * \r\n     * @event\r\n     */\r\n    this.onend = null;\r\n\r\n    /**\r\n     * Acknowledges the receipt of a blob.\r\n     * \r\n     * @param {String} message A human-readable message describing the error\r\n     *                         or status.\r\n     * @param {Number} code The error code, if any, or 0 for success.\r\n     */\r\n    this.sendAck = function(message, code) {\r\n        client.sendAck(guac_stream.index, message, code);\r\n    };\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Integer pool which returns consistently increasing integers while integers\r\n * are in use, and previously-used integers when possible.\r\n * @constructor \r\n */\r\nGuacamole.IntegerPool = function() {\r\n\r\n    /**\r\n     * Reference to this integer pool.\r\n     *\r\n     * @private\r\n     */\r\n    var guac_pool = this;\r\n\r\n    /**\r\n     * Array of available integers.\r\n     *\r\n     * @private\r\n     * @type {Number[]}\r\n     */\r\n    var pool = [];\r\n\r\n    /**\r\n     * The next integer to return if no more integers remain.\r\n     * @type {Number}\r\n     */\r\n    this.next_int = 0;\r\n\r\n    /**\r\n     * Returns the next available integer in the pool. If possible, a previously\r\n     * used integer will be returned.\r\n     * \r\n     * @return {Number} The next available integer.\r\n     */\r\n    this.next = function() {\r\n\r\n        // If free'd integers exist, return one of those\r\n        if (pool.length > 0)\r\n            return pool.shift();\r\n\r\n        // Otherwise, return a new integer\r\n        return guac_pool.next_int++;\r\n\r\n    };\r\n\r\n    /**\r\n     * Frees the given integer, allowing it to be reused.\r\n     * \r\n     * @param {Number} integer The integer to free.\r\n     */\r\n    this.free = function(integer) {\r\n        pool.push(integer);\r\n    };\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A reader which automatically handles the given input stream, assembling all\r\n * received blobs into a JavaScript object by appending them to each other, in\r\n * order, and decoding the result as JSON. Note that this object will overwrite\r\n * any installed event handlers on the given Guacamole.InputStream.\r\n * \r\n * @constructor\r\n * @param {Guacamole.InputStream} stream\r\n *     The stream that JSON will be read from.\r\n */\r\nGuacamole.JSONReader = function guacamoleJSONReader(stream) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.JSONReader.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.JSONReader}\r\n     */\r\n    var guacReader = this;\r\n\r\n    /**\r\n     * Wrapped Guacamole.StringReader.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.StringReader}\r\n     */\r\n    var stringReader = new Guacamole.StringReader(stream);\r\n\r\n    /**\r\n     * All JSON read thus far.\r\n     *\r\n     * @private\r\n     * @type {String}\r\n     */\r\n    var json = '';\r\n\r\n    /**\r\n     * Returns the current length of this Guacamole.JSONReader, in characters.\r\n     *\r\n     * @return {Number}\r\n     *     The current length of this Guacamole.JSONReader.\r\n     */\r\n    this.getLength = function getLength() {\r\n        return json.length;\r\n    };\r\n\r\n    /**\r\n     * Returns the contents of this Guacamole.JSONReader as a JavaScript\r\n     * object.\r\n     *\r\n     * @return {Object}\r\n     *     The contents of this Guacamole.JSONReader, as parsed from the JSON\r\n     *     contents of the input stream.\r\n     */\r\n    this.getJSON = function getJSON() {\r\n        return JSON.parse(json);\r\n    };\r\n\r\n    // Append all received text\r\n    stringReader.ontext = function ontext(text) {\r\n\r\n        // Append received text\r\n        json += text;\r\n\r\n        // Call handler, if present\r\n        if (guacReader.onprogress)\r\n            guacReader.onprogress(text.length);\r\n\r\n    };\r\n\r\n    // Simply call onend when end received\r\n    stringReader.onend = function onend() {\r\n        if (guacReader.onend)\r\n            guacReader.onend();\r\n    };\r\n\r\n    /**\r\n     * Fired once for every blob of data received.\r\n     * \r\n     * @event\r\n     * @param {Number} length\r\n     *     The number of characters received.\r\n     */\r\n    this.onprogress = null;\r\n\r\n    /**\r\n     * Fired once this stream is finished and no further data will be written.\r\n     *\r\n     * @event\r\n     */\r\n    this.onend = null;\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Provides cross-browser and cross-keyboard keyboard for a specific element.\r\n * Browser and keyboard layout variation is abstracted away, providing events\r\n * which represent keys as their corresponding X11 keysym.\r\n * \r\n * @constructor\r\n * @param {Element|Document} [element]\r\n *    The Element to use to provide keyboard events. If omitted, at least one\r\n *    Element must be manually provided through the listenTo() function for\r\n *    the Guacamole.Keyboard instance to have any effect.\r\n */\r\nGuacamole.Keyboard = function Keyboard(element) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.Keyboard.\r\n     * @private\r\n     */\r\n    var guac_keyboard = this;\r\n\r\n    /**\r\n     * An integer value which uniquely identifies this Guacamole.Keyboard\r\n     * instance with respect to other Guacamole.Keyboard instances.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var guacKeyboardID = Guacamole.Keyboard._nextID++;\r\n\r\n    /**\r\n     * The name of the property which is added to event objects via markEvent()\r\n     * to note that they have already been handled by this Guacamole.Keyboard.\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type {String}\r\n     */\r\n    var EVENT_MARKER = '_GUAC_KEYBOARD_HANDLED_BY_' + guacKeyboardID;\r\n\r\n    /**\r\n     * Fired whenever the user presses a key with the element associated\r\n     * with this Guacamole.Keyboard in focus.\r\n     * \r\n     * @event\r\n     * @param {Number} keysym The keysym of the key being pressed.\r\n     * @return {Boolean} true if the key event should be allowed through to the\r\n     *                   browser, false otherwise.\r\n     */\r\n    this.onkeydown = null;\r\n\r\n    /**\r\n     * Fired whenever the user releases a key with the element associated\r\n     * with this Guacamole.Keyboard in focus.\r\n     * \r\n     * @event\r\n     * @param {Number} keysym The keysym of the key being released.\r\n     */\r\n    this.onkeyup = null;\r\n\r\n    /**\r\n     * Set of known platform-specific or browser-specific quirks which must be\r\n     * accounted for to properly interpret key events, even if the only way to\r\n     * reliably detect that quirk is to platform/browser-sniff.\r\n     *\r\n     * @private\r\n     * @type {Object.<String, Boolean>}\r\n     */\r\n    var quirks = {\r\n\r\n        /**\r\n         * Whether keyup events are universally unreliable.\r\n         *\r\n         * @type {Boolean}\r\n         */\r\n        keyupUnreliable: false,\r\n\r\n        /**\r\n         * Whether the Alt key is actually a modifier for typable keys and is\r\n         * thus never used for keyboard shortcuts.\r\n         *\r\n         * @type {Boolean}\r\n         */\r\n        altIsTypableOnly: false,\r\n\r\n        /**\r\n         * Whether we can rely on receiving a keyup event for the Caps Lock\r\n         * key.\r\n         *\r\n         * @type {Boolean}\r\n         */\r\n        capsLockKeyupUnreliable: false\r\n\r\n    };\r\n\r\n    // Set quirk flags depending on platform/browser, if such information is\r\n    // available\r\n    if (navigator && navigator.platform) {\r\n\r\n        // All keyup events are unreliable on iOS (sadly)\r\n        if (navigator.platform.match(/ipad|iphone|ipod/i))\r\n            quirks.keyupUnreliable = true;\r\n\r\n        // The Alt key on Mac is never used for keyboard shortcuts, and the\r\n        // Caps Lock key never dispatches keyup events\r\n        else if (navigator.platform.match(/^mac/i)) {\r\n            quirks.altIsTypableOnly = true;\r\n            quirks.capsLockKeyupUnreliable = true;\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * A key event having a corresponding timestamp. This event is non-specific.\r\n     * Its subclasses should be used instead when recording specific key\r\n     * events.\r\n     *\r\n     * @private\r\n     * @constructor\r\n     */\r\n    var KeyEvent = function() {\r\n\r\n        /**\r\n         * Reference to this key event.\r\n         */\r\n        var key_event = this;\r\n\r\n        /**\r\n         * An arbitrary timestamp in milliseconds, indicating this event's\r\n         * position in time relative to other events.\r\n         *\r\n         * @type {Number}\r\n         */\r\n        this.timestamp = new Date().getTime();\r\n\r\n        /**\r\n         * Whether the default action of this key event should be prevented.\r\n         *\r\n         * @type {Boolean}\r\n         */\r\n        this.defaultPrevented = false;\r\n\r\n        /**\r\n         * The keysym of the key associated with this key event, as determined\r\n         * by a best-effort guess using available event properties and keyboard\r\n         * state.\r\n         *\r\n         * @type {Number}\r\n         */\r\n        this.keysym = null;\r\n\r\n        /**\r\n         * Whether the keysym value of this key event is known to be reliable.\r\n         * If false, the keysym may still be valid, but it's only a best guess,\r\n         * and future key events may be a better source of information.\r\n         *\r\n         * @type {Boolean}\r\n         */\r\n        this.reliable = false;\r\n\r\n        /**\r\n         * Returns the number of milliseconds elapsed since this event was\r\n         * received.\r\n         *\r\n         * @return {Number} The number of milliseconds elapsed since this\r\n         *                  event was received.\r\n         */\r\n        this.getAge = function() {\r\n            return new Date().getTime() - key_event.timestamp;\r\n        };\r\n\r\n    };\r\n\r\n    /**\r\n     * Information related to the pressing of a key, which need not be a key\r\n     * associated with a printable character. The presence or absence of any\r\n     * information within this object is browser-dependent.\r\n     *\r\n     * @private\r\n     * @constructor\r\n     * @augments Guacamole.Keyboard.KeyEvent\r\n     * @param {Number} keyCode The JavaScript key code of the key pressed.\r\n     * @param {String} keyIdentifier The legacy DOM3 \"keyIdentifier\" of the key\r\n     *                               pressed, as defined at:\r\n     *                               http://www.w3.org/TR/2009/WD-DOM-Level-3-Events-20090908/#events-Events-KeyboardEvent\r\n     * @param {String} key The standard name of the key pressed, as defined at:\r\n     *                     http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n     * @param {Number} location The location on the keyboard corresponding to\r\n     *                          the key pressed, as defined at:\r\n     *                          http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n     */\r\n    var KeydownEvent = function(keyCode, keyIdentifier, key, location) {\r\n\r\n        // We extend KeyEvent\r\n        KeyEvent.apply(this);\r\n\r\n        /**\r\n         * The JavaScript key code of the key pressed.\r\n         *\r\n         * @type {Number}\r\n         */\r\n        this.keyCode = keyCode;\r\n\r\n        /**\r\n         * The legacy DOM3 \"keyIdentifier\" of the key pressed, as defined at:\r\n         * http://www.w3.org/TR/2009/WD-DOM-Level-3-Events-20090908/#events-Events-KeyboardEvent\r\n         *\r\n         * @type {String}\r\n         */\r\n        this.keyIdentifier = keyIdentifier;\r\n\r\n        /**\r\n         * The standard name of the key pressed, as defined at:\r\n         * http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n         * \r\n         * @type {String}\r\n         */\r\n        this.key = key;\r\n\r\n        /**\r\n         * The location on the keyboard corresponding to the key pressed, as\r\n         * defined at:\r\n         * http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n         * \r\n         * @type {Number}\r\n         */\r\n        this.location = location;\r\n\r\n        // If key is known from keyCode or DOM3 alone, use that\r\n        this.keysym =  keysym_from_key_identifier(key, location)\r\n                    || keysym_from_keycode(keyCode, location);\r\n\r\n        /**\r\n         * Whether the keyup following this keydown event is known to be\r\n         * reliable. If false, we cannot rely on the keyup event to occur.\r\n         *\r\n         * @type {Boolean}\r\n         */\r\n        this.keyupReliable = !quirks.keyupUnreliable;\r\n\r\n        // DOM3 and keyCode are reliable sources if the corresponding key is\r\n        // not a printable key\r\n        if (this.keysym && !isPrintable(this.keysym))\r\n            this.reliable = true;\r\n\r\n        // Use legacy keyIdentifier as a last resort, if it looks sane\r\n        if (!this.keysym && key_identifier_sane(keyCode, keyIdentifier))\r\n            this.keysym = keysym_from_key_identifier(keyIdentifier, location, guac_keyboard.modifiers.shift);\r\n\r\n        // If a key is pressed while meta is held down, the keyup will\r\n        // never be sent in Chrome (bug #108404)\r\n        if (guac_keyboard.modifiers.meta && this.keysym !== 0xFFE7 && this.keysym !== 0xFFE8)\r\n            this.keyupReliable = false;\r\n\r\n        // We cannot rely on receiving keyup for Caps Lock on certain platforms\r\n        else if (this.keysym === 0xFFE5 && quirks.capsLockKeyupUnreliable)\r\n            this.keyupReliable = false;\r\n\r\n        // Determine whether default action for Alt+combinations must be prevented\r\n        var prevent_alt = !guac_keyboard.modifiers.ctrl && !quirks.altIsTypableOnly;\r\n\r\n        // Determine whether default action for Ctrl+combinations must be prevented\r\n        var prevent_ctrl = !guac_keyboard.modifiers.alt;\r\n\r\n        // We must rely on the (potentially buggy) keyIdentifier if preventing\r\n        // the default action is important\r\n        if ((prevent_ctrl && guac_keyboard.modifiers.ctrl)\r\n         || (prevent_alt  && guac_keyboard.modifiers.alt)\r\n         || guac_keyboard.modifiers.meta\r\n         || guac_keyboard.modifiers.hyper)\r\n            this.reliable = true;\r\n\r\n        // Record most recently known keysym by associated key code\r\n        recentKeysym[keyCode] = this.keysym;\r\n\r\n    };\r\n\r\n    KeydownEvent.prototype = new KeyEvent();\r\n\r\n    /**\r\n     * Information related to the pressing of a key, which MUST be\r\n     * associated with a printable character. The presence or absence of any\r\n     * information within this object is browser-dependent.\r\n     *\r\n     * @private\r\n     * @constructor\r\n     * @augments Guacamole.Keyboard.KeyEvent\r\n     * @param {Number} charCode The Unicode codepoint of the character that\r\n     *                          would be typed by the key pressed.\r\n     */\r\n    var KeypressEvent = function(charCode) {\r\n\r\n        // We extend KeyEvent\r\n        KeyEvent.apply(this);\r\n\r\n        /**\r\n         * The Unicode codepoint of the character that would be typed by the\r\n         * key pressed.\r\n         *\r\n         * @type {Number}\r\n         */\r\n        this.charCode = charCode;\r\n\r\n        // Pull keysym from char code\r\n        this.keysym = keysym_from_charcode(charCode);\r\n\r\n        // Keypress is always reliable\r\n        this.reliable = true;\r\n\r\n    };\r\n\r\n    KeypressEvent.prototype = new KeyEvent();\r\n\r\n    /**\r\n     * Information related to the pressing of a key, which need not be a key\r\n     * associated with a printable character. The presence or absence of any\r\n     * information within this object is browser-dependent.\r\n     *\r\n     * @private\r\n     * @constructor\r\n     * @augments Guacamole.Keyboard.KeyEvent\r\n     * @param {Number} keyCode The JavaScript key code of the key released.\r\n     * @param {String} keyIdentifier The legacy DOM3 \"keyIdentifier\" of the key\r\n     *                               released, as defined at:\r\n     *                               http://www.w3.org/TR/2009/WD-DOM-Level-3-Events-20090908/#events-Events-KeyboardEvent\r\n     * @param {String} key The standard name of the key released, as defined at:\r\n     *                     http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n     * @param {Number} location The location on the keyboard corresponding to\r\n     *                          the key released, as defined at:\r\n     *                          http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n     */\r\n    var KeyupEvent = function(keyCode, keyIdentifier, key, location) {\r\n\r\n        // We extend KeyEvent\r\n        KeyEvent.apply(this);\r\n\r\n        /**\r\n         * The JavaScript key code of the key released.\r\n         *\r\n         * @type {Number}\r\n         */\r\n        this.keyCode = keyCode;\r\n\r\n        /**\r\n         * The legacy DOM3 \"keyIdentifier\" of the key released, as defined at:\r\n         * http://www.w3.org/TR/2009/WD-DOM-Level-3-Events-20090908/#events-Events-KeyboardEvent\r\n         *\r\n         * @type {String}\r\n         */\r\n        this.keyIdentifier = keyIdentifier;\r\n\r\n        /**\r\n         * The standard name of the key released, as defined at:\r\n         * http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n         * \r\n         * @type {String}\r\n         */\r\n        this.key = key;\r\n\r\n        /**\r\n         * The location on the keyboard corresponding to the key released, as\r\n         * defined at:\r\n         * http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n         * \r\n         * @type {Number}\r\n         */\r\n        this.location = location;\r\n\r\n        // If key is known from keyCode or DOM3 alone, use that\r\n        this.keysym =  keysym_from_keycode(keyCode, location)\r\n                    || keysym_from_key_identifier(key, location); // keyCode is still more reliable for keyup when dead keys are in use\r\n\r\n        // Fall back to the most recently pressed keysym associated with the\r\n        // keyCode if the inferred key doesn't seem to actually be pressed\r\n        if (!guac_keyboard.pressed[this.keysym])\r\n            this.keysym = recentKeysym[keyCode] || this.keysym;\r\n\r\n        // Keyup is as reliable as it will ever be\r\n        this.reliable = true;\r\n\r\n    };\r\n\r\n    KeyupEvent.prototype = new KeyEvent();\r\n\r\n    /**\r\n     * An array of recorded events, which can be instances of the private\r\n     * KeydownEvent, KeypressEvent, and KeyupEvent classes.\r\n     *\r\n     * @private\r\n     * @type {KeyEvent[]}\r\n     */\r\n    var eventLog = [];\r\n\r\n    /**\r\n     * Map of known JavaScript keycodes which do not map to typable characters\r\n     * to their X11 keysym equivalents.\r\n     * @private\r\n     */\r\n    var keycodeKeysyms = {\r\n        8:   [0xFF08], // backspace\r\n        9:   [0xFF09], // tab\r\n        12:  [0xFF0B, 0xFF0B, 0xFF0B, 0xFFB5], // clear       / KP 5\r\n        13:  [0xFF0D], // enter\r\n        16:  [0xFFE1, 0xFFE1, 0xFFE2], // shift\r\n        17:  [0xFFE3, 0xFFE3, 0xFFE4], // ctrl\r\n        18:  [0xFFE9, 0xFFE9, 0xFE03], // alt\r\n        19:  [0xFF13], // pause/break\r\n        20:  [0xFFE5], // caps lock\r\n        27:  [0xFF1B], // escape\r\n        32:  [0x0020], // space\r\n        33:  [0xFF55, 0xFF55, 0xFF55, 0xFFB9], // page up     / KP 9\r\n        34:  [0xFF56, 0xFF56, 0xFF56, 0xFFB3], // page down   / KP 3\r\n        35:  [0xFF57, 0xFF57, 0xFF57, 0xFFB1], // end         / KP 1\r\n        36:  [0xFF50, 0xFF50, 0xFF50, 0xFFB7], // home        / KP 7\r\n        37:  [0xFF51, 0xFF51, 0xFF51, 0xFFB4], // left arrow  / KP 4\r\n        38:  [0xFF52, 0xFF52, 0xFF52, 0xFFB8], // up arrow    / KP 8\r\n        39:  [0xFF53, 0xFF53, 0xFF53, 0xFFB6], // right arrow / KP 6\r\n        40:  [0xFF54, 0xFF54, 0xFF54, 0xFFB2], // down arrow  / KP 2\r\n        45:  [0xFF63, 0xFF63, 0xFF63, 0xFFB0], // insert      / KP 0\r\n        46:  [0xFFFF, 0xFFFF, 0xFFFF, 0xFFAE], // delete      / KP decimal\r\n        91:  [0xFFEB], // left window key (hyper_l)\r\n        92:  [0xFF67], // right window key (menu key?)\r\n        93:  null,     // select key\r\n        96:  [0xFFB0], // KP 0\r\n        97:  [0xFFB1], // KP 1\r\n        98:  [0xFFB2], // KP 2\r\n        99:  [0xFFB3], // KP 3\r\n        100: [0xFFB4], // KP 4\r\n        101: [0xFFB5], // KP 5\r\n        102: [0xFFB6], // KP 6\r\n        103: [0xFFB7], // KP 7\r\n        104: [0xFFB8], // KP 8\r\n        105: [0xFFB9], // KP 9\r\n        106: [0xFFAA], // KP multiply\r\n        107: [0xFFAB], // KP add\r\n        109: [0xFFAD], // KP subtract\r\n        110: [0xFFAE], // KP decimal\r\n        111: [0xFFAF], // KP divide\r\n        112: [0xFFBE], // f1\r\n        113: [0xFFBF], // f2\r\n        114: [0xFFC0], // f3\r\n        115: [0xFFC1], // f4\r\n        116: [0xFFC2], // f5\r\n        117: [0xFFC3], // f6\r\n        118: [0xFFC4], // f7\r\n        119: [0xFFC5], // f8\r\n        120: [0xFFC6], // f9\r\n        121: [0xFFC7], // f10\r\n        122: [0xFFC8], // f11\r\n        123: [0xFFC9], // f12\r\n        144: [0xFF7F], // num lock\r\n        145: [0xFF14], // scroll lock\r\n        225: [0xFE03]  // altgraph (iso_level3_shift)\r\n    };\r\n\r\n    /**\r\n     * Map of known JavaScript keyidentifiers which do not map to typable\r\n     * characters to their unshifted X11 keysym equivalents.\r\n     * @private\r\n     */\r\n    var keyidentifier_keysym = {\r\n        \"Again\": [0xFF66],\r\n        \"AllCandidates\": [0xFF3D],\r\n        \"Alphanumeric\": [0xFF30],\r\n        \"Alt\": [0xFFE9, 0xFFE9, 0xFE03],\r\n        \"Attn\": [0xFD0E],\r\n        \"AltGraph\": [0xFE03],\r\n        \"ArrowDown\": [0xFF54],\r\n        \"ArrowLeft\": [0xFF51],\r\n        \"ArrowRight\": [0xFF53],\r\n        \"ArrowUp\": [0xFF52],\r\n        \"Backspace\": [0xFF08],\r\n        \"CapsLock\": [0xFFE5],\r\n        \"Cancel\": [0xFF69],\r\n        \"Clear\": [0xFF0B],\r\n        \"Convert\": [0xFF21],\r\n        \"Copy\": [0xFD15],\r\n        \"Crsel\": [0xFD1C],\r\n        \"CrSel\": [0xFD1C],\r\n        \"CodeInput\": [0xFF37],\r\n        \"Compose\": [0xFF20],\r\n        \"Control\": [0xFFE3, 0xFFE3, 0xFFE4],\r\n        \"ContextMenu\": [0xFF67],\r\n        \"Delete\": [0xFFFF],\r\n        \"Down\": [0xFF54],\r\n        \"End\": [0xFF57],\r\n        \"Enter\": [0xFF0D],\r\n        \"EraseEof\": [0xFD06],\r\n        \"Escape\": [0xFF1B],\r\n        \"Execute\": [0xFF62],\r\n        \"Exsel\": [0xFD1D],\r\n        \"ExSel\": [0xFD1D],\r\n        \"F1\": [0xFFBE],\r\n        \"F2\": [0xFFBF],\r\n        \"F3\": [0xFFC0],\r\n        \"F4\": [0xFFC1],\r\n        \"F5\": [0xFFC2],\r\n        \"F6\": [0xFFC3],\r\n        \"F7\": [0xFFC4],\r\n        \"F8\": [0xFFC5],\r\n        \"F9\": [0xFFC6],\r\n        \"F10\": [0xFFC7],\r\n        \"F11\": [0xFFC8],\r\n        \"F12\": [0xFFC9],\r\n        \"F13\": [0xFFCA],\r\n        \"F14\": [0xFFCB],\r\n        \"F15\": [0xFFCC],\r\n        \"F16\": [0xFFCD],\r\n        \"F17\": [0xFFCE],\r\n        \"F18\": [0xFFCF],\r\n        \"F19\": [0xFFD0],\r\n        \"F20\": [0xFFD1],\r\n        \"F21\": [0xFFD2],\r\n        \"F22\": [0xFFD3],\r\n        \"F23\": [0xFFD4],\r\n        \"F24\": [0xFFD5],\r\n        \"Find\": [0xFF68],\r\n        \"GroupFirst\": [0xFE0C],\r\n        \"GroupLast\": [0xFE0E],\r\n        \"GroupNext\": [0xFE08],\r\n        \"GroupPrevious\": [0xFE0A],\r\n        \"FullWidth\": null,\r\n        \"HalfWidth\": null,\r\n        \"HangulMode\": [0xFF31],\r\n        \"Hankaku\": [0xFF29],\r\n        \"HanjaMode\": [0xFF34],\r\n        \"Help\": [0xFF6A],\r\n        \"Hiragana\": [0xFF25],\r\n        \"HiraganaKatakana\": [0xFF27],\r\n        \"Home\": [0xFF50],\r\n        \"Hyper\": [0xFFED, 0xFFED, 0xFFEE],\r\n        \"Insert\": [0xFF63],\r\n        \"JapaneseHiragana\": [0xFF25],\r\n        \"JapaneseKatakana\": [0xFF26],\r\n        \"JapaneseRomaji\": [0xFF24],\r\n        \"JunjaMode\": [0xFF38],\r\n        \"KanaMode\": [0xFF2D],\r\n        \"KanjiMode\": [0xFF21],\r\n        \"Katakana\": [0xFF26],\r\n        \"Left\": [0xFF51],\r\n        \"Meta\": [0xFFE7, 0xFFE7, 0xFFE8],\r\n        \"ModeChange\": [0xFF7E],\r\n        \"NumLock\": [0xFF7F],\r\n        \"PageDown\": [0xFF56],\r\n        \"PageUp\": [0xFF55],\r\n        \"Pause\": [0xFF13],\r\n        \"Play\": [0xFD16],\r\n        \"PreviousCandidate\": [0xFF3E],\r\n        \"PrintScreen\": [0xFF61],\r\n        \"Redo\": [0xFF66],\r\n        \"Right\": [0xFF53],\r\n        \"RomanCharacters\": null,\r\n        \"Scroll\": [0xFF14],\r\n        \"Select\": [0xFF60],\r\n        \"Separator\": [0xFFAC],\r\n        \"Shift\": [0xFFE1, 0xFFE1, 0xFFE2],\r\n        \"SingleCandidate\": [0xFF3C],\r\n        \"Super\": [0xFFEB, 0xFFEB, 0xFFEC],\r\n        \"Tab\": [0xFF09],\r\n        \"UIKeyInputDownArrow\": [0xFF54],\r\n        \"UIKeyInputEscape\": [0xFF1B],\r\n        \"UIKeyInputLeftArrow\": [0xFF51],\r\n        \"UIKeyInputRightArrow\": [0xFF53],\r\n        \"UIKeyInputUpArrow\": [0xFF52],\r\n        \"Up\": [0xFF52],\r\n        \"Undo\": [0xFF65],\r\n        \"Win\": [0xFFEB],\r\n        \"Zenkaku\": [0xFF28],\r\n        \"ZenkakuHankaku\": [0xFF2A]\r\n    };\r\n\r\n    /**\r\n     * All keysyms which should not repeat when held down.\r\n     * @private\r\n     */\r\n    var no_repeat = {\r\n        0xFE03: true, // ISO Level 3 Shift (AltGr)\r\n        0xFFE1: true, // Left shift\r\n        0xFFE2: true, // Right shift\r\n        0xFFE3: true, // Left ctrl \r\n        0xFFE4: true, // Right ctrl \r\n        0xFFE5: true, // Caps Lock\r\n        0xFFE7: true, // Left meta \r\n        0xFFE8: true, // Right meta \r\n        0xFFE9: true, // Left alt\r\n        0xFFEA: true, // Right alt\r\n        0xFFEB: true, // Left hyper\r\n        0xFFEC: true  // Right hyper\r\n    };\r\n\r\n    /**\r\n     * All modifiers and their states.\r\n     */\r\n    this.modifiers = new Guacamole.Keyboard.ModifierState();\r\n        \r\n    /**\r\n     * The state of every key, indexed by keysym. If a particular key is\r\n     * pressed, the value of pressed for that keysym will be true. If a key\r\n     * is not currently pressed, it will not be defined. \r\n     */\r\n    this.pressed = {};\r\n\r\n    /**\r\n     * The state of every key, indexed by keysym, for strictly those keys whose\r\n     * status has been indirectly determined thorugh observation of other key\r\n     * events. If a particular key is implicitly pressed, the value of\r\n     * implicitlyPressed for that keysym will be true. If a key\r\n     * is not currently implicitly pressed (the key is not pressed OR the state\r\n     * of the key is explicitly known), it will not be defined.\r\n     *\r\n     * @private\r\n     * @tyle {Object.<Number, Boolean>}\r\n     */\r\n    var implicitlyPressed = {};\r\n\r\n    /**\r\n     * The last result of calling the onkeydown handler for each key, indexed\r\n     * by keysym. This is used to prevent/allow default actions for key events,\r\n     * even when the onkeydown handler cannot be called again because the key\r\n     * is (theoretically) still pressed.\r\n     *\r\n     * @private\r\n     */\r\n    var last_keydown_result = {};\r\n\r\n    /**\r\n     * The keysym most recently associated with a given keycode when keydown\r\n     * fired. This object maps keycodes to keysyms.\r\n     *\r\n     * @private\r\n     * @type {Object.<Number, Number>}\r\n     */\r\n    var recentKeysym = {};\r\n\r\n    /**\r\n     * Timeout before key repeat starts.\r\n     * @private\r\n     */\r\n    var key_repeat_timeout = null;\r\n\r\n    /**\r\n     * Interval which presses and releases the last key pressed while that\r\n     * key is still being held down.\r\n     * @private\r\n     */\r\n    var key_repeat_interval = null;\r\n\r\n    /**\r\n     * Given an array of keysyms indexed by location, returns the keysym\r\n     * for the given location, or the keysym for the standard location if\r\n     * undefined.\r\n     * \r\n     * @private\r\n     * @param {Number[]} keysyms\r\n     *     An array of keysyms, where the index of the keysym in the array is\r\n     *     the location value.\r\n     *\r\n     * @param {Number} location\r\n     *     The location on the keyboard corresponding to the key pressed, as\r\n     *     defined at: http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n     */\r\n    var get_keysym = function get_keysym(keysyms, location) {\r\n\r\n        if (!keysyms)\r\n            return null;\r\n\r\n        return keysyms[location] || keysyms[0];\r\n    };\r\n\r\n    /**\r\n     * Returns true if the given keysym corresponds to a printable character,\r\n     * false otherwise.\r\n     *\r\n     * @param {Number} keysym\r\n     *     The keysym to check.\r\n     *\r\n     * @returns {Boolean}\r\n     *     true if the given keysym corresponds to a printable character,\r\n     *     false otherwise.\r\n     */\r\n    var isPrintable = function isPrintable(keysym) {\r\n\r\n        // Keysyms with Unicode equivalents are printable\r\n        return (keysym >= 0x00 && keysym <= 0xFF)\r\n            || (keysym & 0xFFFF0000) === 0x01000000;\r\n\r\n    };\r\n\r\n    function keysym_from_key_identifier(identifier, location, shifted) {\r\n\r\n        if (!identifier)\r\n            return null;\r\n\r\n        var typedCharacter;\r\n\r\n        // If identifier is U+xxxx, decode Unicode character \r\n        var unicodePrefixLocation = identifier.indexOf(\"U+\");\r\n        if (unicodePrefixLocation >= 0) {\r\n            var hex = identifier.substring(unicodePrefixLocation+2);\r\n            typedCharacter = String.fromCharCode(parseInt(hex, 16));\r\n        }\r\n\r\n        // If single character and not keypad, use that as typed character\r\n        else if (identifier.length === 1 && location !== 3)\r\n            typedCharacter = identifier;\r\n\r\n        // Otherwise, look up corresponding keysym\r\n        else\r\n            return get_keysym(keyidentifier_keysym[identifier], location);\r\n\r\n        // Alter case if necessary\r\n        if (shifted === true)\r\n            typedCharacter = typedCharacter.toUpperCase();\r\n        else if (shifted === false)\r\n            typedCharacter = typedCharacter.toLowerCase();\r\n\r\n        // Get codepoint\r\n        var codepoint = typedCharacter.charCodeAt(0);\r\n        return keysym_from_charcode(codepoint);\r\n\r\n    }\r\n\r\n    function isControlCharacter(codepoint) {\r\n        return codepoint <= 0x1F || (codepoint >= 0x7F && codepoint <= 0x9F);\r\n    }\r\n\r\n    function keysym_from_charcode(codepoint) {\r\n\r\n        // Keysyms for control characters\r\n        if (isControlCharacter(codepoint)) return 0xFF00 | codepoint;\r\n\r\n        // Keysyms for ASCII chars\r\n        if (codepoint >= 0x0000 && codepoint <= 0x00FF)\r\n            return codepoint;\r\n\r\n        // Keysyms for Unicode\r\n        if (codepoint >= 0x0100 && codepoint <= 0x10FFFF)\r\n            return 0x01000000 | codepoint;\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    function keysym_from_keycode(keyCode, location) {\r\n        return get_keysym(keycodeKeysyms[keyCode], location);\r\n    }\r\n\r\n    /**\r\n     * Heuristically detects if the legacy keyIdentifier property of\r\n     * a keydown/keyup event looks incorrectly derived. Chrome, and\r\n     * presumably others, will produce the keyIdentifier by assuming\r\n     * the keyCode is the Unicode codepoint for that key. This is not\r\n     * correct in all cases.\r\n     *\r\n     * @private\r\n     * @param {Number} keyCode\r\n     *     The keyCode from a browser keydown/keyup event.\r\n     *\r\n     * @param {String} keyIdentifier\r\n     *     The legacy keyIdentifier from a browser keydown/keyup event.\r\n     *\r\n     * @returns {Boolean}\r\n     *     true if the keyIdentifier looks sane, false if the keyIdentifier\r\n     *     appears incorrectly derived or is missing entirely.\r\n     */\r\n    var key_identifier_sane = function key_identifier_sane(keyCode, keyIdentifier) {\r\n\r\n        // Missing identifier is not sane\r\n        if (!keyIdentifier)\r\n            return false;\r\n\r\n        // Assume non-Unicode keyIdentifier values are sane\r\n        var unicodePrefixLocation = keyIdentifier.indexOf(\"U+\");\r\n        if (unicodePrefixLocation === -1)\r\n            return true;\r\n\r\n        // If the Unicode codepoint isn't identical to the keyCode,\r\n        // then the identifier is likely correct\r\n        var codepoint = parseInt(keyIdentifier.substring(unicodePrefixLocation+2), 16);\r\n        if (keyCode !== codepoint)\r\n            return true;\r\n\r\n        // The keyCodes for A-Z and 0-9 are actually identical to their\r\n        // Unicode codepoints\r\n        if ((keyCode >= 65 && keyCode <= 90) || (keyCode >= 48 && keyCode <= 57))\r\n            return true;\r\n\r\n        // The keyIdentifier does NOT appear sane\r\n        return false;\r\n\r\n    };\r\n\r\n    /**\r\n     * Marks a key as pressed, firing the keydown event if registered. Key\r\n     * repeat for the pressed key will start after a delay if that key is\r\n     * not a modifier. The return value of this function depends on the\r\n     * return value of the keydown event handler, if any.\r\n     * \r\n     * @param {Number} keysym The keysym of the key to press.\r\n     * @return {Boolean} true if event should NOT be canceled, false otherwise.\r\n     */\r\n    this.press = function(keysym) {\r\n\r\n        // Don't bother with pressing the key if the key is unknown\r\n        if (keysym === null) return;\r\n\r\n        // Only press if released\r\n        if (!guac_keyboard.pressed[keysym]) {\r\n\r\n            // Mark key as pressed\r\n            guac_keyboard.pressed[keysym] = true;\r\n\r\n            // Send key event\r\n            if (guac_keyboard.onkeydown) {\r\n                var result = guac_keyboard.onkeydown(keysym);\r\n                last_keydown_result[keysym] = result;\r\n\r\n                // Stop any current repeat\r\n                window.clearTimeout(key_repeat_timeout);\r\n                window.clearInterval(key_repeat_interval);\r\n\r\n                // Repeat after a delay as long as pressed\r\n                if (!no_repeat[keysym])\r\n                    key_repeat_timeout = window.setTimeout(function() {\r\n                        key_repeat_interval = window.setInterval(function() {\r\n                            guac_keyboard.onkeyup(keysym);\r\n                            guac_keyboard.onkeydown(keysym);\r\n                        }, 50);\r\n                    }, 500);\r\n\r\n                return result;\r\n            }\r\n        }\r\n\r\n        // Return the last keydown result by default, resort to false if unknown\r\n        return last_keydown_result[keysym] || false;\r\n\r\n    };\r\n\r\n    /**\r\n     * Marks a key as released, firing the keyup event if registered.\r\n     * \r\n     * @param {Number} keysym The keysym of the key to release.\r\n     */\r\n    this.release = function(keysym) {\r\n\r\n        // Only release if pressed\r\n        if (guac_keyboard.pressed[keysym]) {\r\n            \r\n            // Mark key as released\r\n            delete guac_keyboard.pressed[keysym];\r\n            delete implicitlyPressed[keysym];\r\n\r\n            // Stop repeat\r\n            window.clearTimeout(key_repeat_timeout);\r\n            window.clearInterval(key_repeat_interval);\r\n\r\n            // Send key event\r\n            if (keysym !== null && guac_keyboard.onkeyup)\r\n                guac_keyboard.onkeyup(keysym);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Presses and releases the keys necessary to type the given string of\r\n     * text.\r\n     *\r\n     * @param {String} str\r\n     *     The string to type.\r\n     */\r\n    this.type = function type(str) {\r\n\r\n        // Press/release the key corresponding to each character in the string\r\n        for (var i = 0; i < str.length; i++) {\r\n\r\n            // Determine keysym of current character\r\n            var codepoint = str.codePointAt ? str.codePointAt(i) : str.charCodeAt(i);\r\n            var keysym = keysym_from_charcode(codepoint);\r\n\r\n            // Press and release key for current character\r\n            guac_keyboard.press(keysym);\r\n            guac_keyboard.release(keysym);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Resets the state of this keyboard, releasing all keys, and firing keyup\r\n     * events for each released key.\r\n     */\r\n    this.reset = function() {\r\n\r\n        // Release all pressed keys\r\n        for (var keysym in guac_keyboard.pressed)\r\n            guac_keyboard.release(parseInt(keysym));\r\n\r\n        // Clear event log\r\n        eventLog = [];\r\n\r\n    };\r\n\r\n    /**\r\n     * Given the remote and local state of a particular key, resynchronizes the\r\n     * remote state of that key with the local state through pressing or\r\n     * releasing keysyms.\r\n     *\r\n     * @private\r\n     * @param {Boolean} remoteState\r\n     *     Whether the key is currently pressed remotely.\r\n     *\r\n     * @param {Boolean} localState\r\n     *     Whether the key is currently pressed remotely locally. If the state\r\n     *     of the key is not known, this may be undefined.\r\n     *\r\n     * @param {Number[]} keysyms\r\n     *     The keysyms which represent the key being updated.\r\n     *\r\n     * @param {KeyEvent} keyEvent\r\n     *     Guacamole's current best interpretation of the key event being\r\n     *     processed.\r\n     */\r\n    var updateModifierState = function updateModifierState(remoteState,\r\n        localState, keysyms, keyEvent) {\r\n\r\n        var i;\r\n\r\n        // Do not trust changes in modifier state for events directly involving\r\n        // that modifier: (1) the flag may erroneously be cleared despite\r\n        // another version of the same key still being held and (2) the change\r\n        // in flag may be due to the current event being processed, thus\r\n        // updating things here is at best redundant and at worst incorrect\r\n        if (keysyms.indexOf(keyEvent.keysym) !== -1)\r\n            return;\r\n\r\n        // Release all related keys if modifier is implicitly released\r\n        if (remoteState && localState === false) {\r\n            for (i = 0; i < keysyms.length; i++) {\r\n                guac_keyboard.release(keysyms[i]);\r\n            }\r\n        }\r\n\r\n        // Press if modifier is implicitly pressed\r\n        else if (!remoteState && localState) {\r\n\r\n            // Verify that modifier flag isn't already pressed or already set\r\n            // due to another version of the same key being held down\r\n            for (i = 0; i < keysyms.length; i++) {\r\n                if (guac_keyboard.pressed[keysyms[i]])\r\n                    return;\r\n            }\r\n\r\n            // Mark as implicitly pressed only if there is other information\r\n            // within the key event relating to a different key. Some\r\n            // platforms, such as iOS, will send essentially empty key events\r\n            // for modifier keys, using only the modifier flags to signal the\r\n            // identity of the key.\r\n            var keysym = keysyms[0];\r\n            if (keyEvent.keysym)\r\n                implicitlyPressed[keysym] = true;\r\n\r\n            guac_keyboard.press(keysym);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Given a keyboard event, updates the local modifier state and remote\r\n     * key state based on the modifier flags within the event. This function\r\n     * pays no attention to keycodes.\r\n     *\r\n     * @private\r\n     * @param {KeyboardEvent} e\r\n     *     The keyboard event containing the flags to update.\r\n     *\r\n     * @param {KeyEvent} keyEvent\r\n     *     Guacamole's current best interpretation of the key event being\r\n     *     processed.\r\n     */\r\n    var syncModifierStates = function syncModifierStates(e, keyEvent) {\r\n\r\n        // Get state\r\n        var state = Guacamole.Keyboard.ModifierState.fromKeyboardEvent(e);\r\n\r\n        // Resync state of alt\r\n        updateModifierState(guac_keyboard.modifiers.alt, state.alt, [\r\n            0xFFE9, // Left alt\r\n            0xFFEA, // Right alt\r\n            0xFE03  // AltGr\r\n        ], keyEvent);\r\n\r\n        // Resync state of shift\r\n        updateModifierState(guac_keyboard.modifiers.shift, state.shift, [\r\n            0xFFE1, // Left shift\r\n            0xFFE2  // Right shift\r\n        ], keyEvent);\r\n\r\n        // Resync state of ctrl\r\n        updateModifierState(guac_keyboard.modifiers.ctrl, state.ctrl, [\r\n            0xFFE3, // Left ctrl\r\n            0xFFE4  // Right ctrl\r\n        ], keyEvent);\r\n\r\n        // Resync state of meta\r\n        updateModifierState(guac_keyboard.modifiers.meta, state.meta, [\r\n            0xFFE7, // Left meta\r\n            0xFFE8  // Right meta\r\n        ], keyEvent);\r\n\r\n        // Resync state of hyper\r\n        updateModifierState(guac_keyboard.modifiers.hyper, state.hyper, [\r\n            0xFFEB, // Left hyper\r\n            0xFFEC  // Right hyper\r\n        ], keyEvent);\r\n\r\n        // Update state\r\n        guac_keyboard.modifiers = state;\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns whether all currently pressed keys were implicitly pressed. A\r\n     * key is implicitly pressed if its status was inferred indirectly from\r\n     * inspection of other key events.\r\n     *\r\n     * @private\r\n     * @returns {Boolean}\r\n     *     true if all currently pressed keys were implicitly pressed, false\r\n     *     otherwise.\r\n     */\r\n    var isStateImplicit = function isStateImplicit() {\r\n\r\n        for (var keysym in guac_keyboard.pressed) {\r\n            if (!implicitlyPressed[keysym])\r\n                return false;\r\n        }\r\n\r\n        return true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Reads through the event log, removing events from the head of the log\r\n     * when the corresponding true key presses are known (or as known as they\r\n     * can be).\r\n     * \r\n     * @private\r\n     * @return {Boolean} Whether the default action of the latest event should\r\n     *                   be prevented.\r\n     */\r\n    function interpret_events() {\r\n\r\n        // Do not prevent default if no event could be interpreted\r\n        var handled_event = interpret_event();\r\n        if (!handled_event)\r\n            return false;\r\n\r\n        // Interpret as much as possible\r\n        var last_event;\r\n        do {\r\n            last_event = handled_event;\r\n            handled_event = interpret_event();\r\n        } while (handled_event !== null);\r\n\r\n        // Reset keyboard state if we cannot expect to receive any further\r\n        // keyup events\r\n        if (isStateImplicit())\r\n            guac_keyboard.reset();\r\n\r\n        return last_event.defaultPrevented;\r\n\r\n    }\r\n\r\n    /**\r\n     * Releases Ctrl+Alt, if both are currently pressed and the given keysym\r\n     * looks like a key that may require AltGr.\r\n     *\r\n     * @private\r\n     * @param {Number} keysym The key that was just pressed.\r\n     */\r\n    var release_simulated_altgr = function release_simulated_altgr(keysym) {\r\n\r\n        // Both Ctrl+Alt must be pressed if simulated AltGr is in use\r\n        if (!guac_keyboard.modifiers.ctrl || !guac_keyboard.modifiers.alt)\r\n            return;\r\n\r\n        // Assume [A-Z] never require AltGr\r\n        if (keysym >= 0x0041 && keysym <= 0x005A)\r\n            return;\r\n\r\n        // Assume [a-z] never require AltGr\r\n        if (keysym >= 0x0061 && keysym <= 0x007A)\r\n            return;\r\n\r\n        // Release Ctrl+Alt if the keysym is printable\r\n        if (keysym <= 0xFF || (keysym & 0xFF000000) === 0x01000000) {\r\n            guac_keyboard.release(0xFFE3); // Left ctrl \r\n            guac_keyboard.release(0xFFE4); // Right ctrl \r\n            guac_keyboard.release(0xFFE9); // Left alt\r\n            guac_keyboard.release(0xFFEA); // Right alt\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Reads through the event log, interpreting the first event, if possible,\r\n     * and returning that event. If no events can be interpreted, due to a\r\n     * total lack of events or the need for more events, null is returned. Any\r\n     * interpreted events are automatically removed from the log.\r\n     * \r\n     * @private\r\n     * @return {KeyEvent}\r\n     *     The first key event in the log, if it can be interpreted, or null\r\n     *     otherwise.\r\n     */\r\n    var interpret_event = function interpret_event() {\r\n\r\n        // Peek at first event in log\r\n        var first = eventLog[0];\r\n        if (!first)\r\n            return null;\r\n\r\n        // Keydown event\r\n        if (first instanceof KeydownEvent) {\r\n\r\n            var keysym = null;\r\n            var accepted_events = [];\r\n\r\n            // If event itself is reliable, no need to wait for other events\r\n            if (first.reliable) {\r\n                keysym = first.keysym;\r\n                accepted_events = eventLog.splice(0, 1);\r\n            }\r\n\r\n            // If keydown is immediately followed by a keypress, use the indicated character\r\n            else if (eventLog[1] instanceof KeypressEvent) {\r\n                keysym = eventLog[1].keysym;\r\n                accepted_events = eventLog.splice(0, 2);\r\n            }\r\n\r\n            // If keydown is immediately followed by anything else, then no\r\n            // keypress can possibly occur to clarify this event, and we must\r\n            // handle it now\r\n            else if (eventLog[1]) {\r\n                keysym = first.keysym;\r\n                accepted_events = eventLog.splice(0, 1);\r\n            }\r\n\r\n            // Fire a key press if valid events were found\r\n            if (accepted_events.length > 0) {\r\n\r\n                if (keysym) {\r\n\r\n                    // Fire event\r\n                    release_simulated_altgr(keysym);\r\n                    var defaultPrevented = !guac_keyboard.press(keysym);\r\n                    recentKeysym[first.keyCode] = keysym;\r\n\r\n                    // Release the key now if we cannot rely on the associated\r\n                    // keyup event\r\n                    if (!first.keyupReliable)\r\n                        guac_keyboard.release(keysym);\r\n\r\n                    // Record whether default was prevented\r\n                    for (var i=0; i<accepted_events.length; i++)\r\n                        accepted_events[i].defaultPrevented = defaultPrevented;\r\n\r\n                }\r\n\r\n                return first;\r\n\r\n            }\r\n\r\n        } // end if keydown\r\n\r\n        // Keyup event\r\n        else if (first instanceof KeyupEvent && !quirks.keyupUnreliable) {\r\n\r\n            // Release specific key if known\r\n            var keysym = first.keysym;\r\n            if (keysym) {\r\n                guac_keyboard.release(keysym);\r\n                delete recentKeysym[first.keyCode];\r\n                first.defaultPrevented = true;\r\n            }\r\n\r\n            // Otherwise, fall back to releasing all keys\r\n            else {\r\n                guac_keyboard.reset();\r\n                return first;\r\n            }\r\n\r\n            return eventLog.shift();\r\n\r\n        } // end if keyup\r\n\r\n        // Ignore any other type of event (keypress by itself is invalid, and\r\n        // unreliable keyup events should simply be dumped)\r\n        else\r\n            return eventLog.shift();\r\n\r\n        // No event interpreted\r\n        return null;\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns the keyboard location of the key associated with the given\r\n     * keyboard event. The location differentiates key events which otherwise\r\n     * have the same keycode, such as left shift vs. right shift.\r\n     *\r\n     * @private\r\n     * @param {KeyboardEvent} e\r\n     *     A JavaScript keyboard event, as received through the DOM via a\r\n     *     \"keydown\", \"keyup\", or \"keypress\" handler.\r\n     *\r\n     * @returns {Number}\r\n     *     The location of the key event on the keyboard, as defined at:\r\n     *     http://www.w3.org/TR/DOM-Level-3-Events/#events-KeyboardEvent\r\n     */\r\n    var getEventLocation = function getEventLocation(e) {\r\n\r\n        // Use standard location, if possible\r\n        if ('location' in e)\r\n            return e.location;\r\n\r\n        // Failing that, attempt to use deprecated keyLocation\r\n        if ('keyLocation' in e)\r\n            return e.keyLocation;\r\n\r\n        // If no location is available, assume left side\r\n        return 0;\r\n\r\n    };\r\n\r\n    /**\r\n     * Attempts to mark the given Event as having been handled by this\r\n     * Guacamole.Keyboard. If the Event has already been marked as handled,\r\n     * false is returned.\r\n     *\r\n     * @param {Event} e\r\n     *     The Event to mark.\r\n     *\r\n     * @returns {Boolean}\r\n     *     true if the given Event was successfully marked, false if the given\r\n     *     Event was already marked.\r\n     */\r\n    var markEvent = function markEvent(e) {\r\n\r\n        // Fail if event is already marked\r\n        if (e[EVENT_MARKER])\r\n            return false;\r\n\r\n        // Mark event otherwise\r\n        e[EVENT_MARKER] = true;\r\n        return true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Attaches event listeners to the given Element, automatically translating\r\n     * received key, input, and composition events into simple keydown/keyup\r\n     * events signalled through this Guacamole.Keyboard's onkeydown and\r\n     * onkeyup handlers.\r\n     *\r\n     * @param {Element|Document} element\r\n     *     The Element to attach event listeners to for the sake of handling\r\n     *     key or input events.\r\n     */\r\n    this.listenTo = function listenTo(element) {\r\n\r\n        // When key pressed\r\n        element.addEventListener(\"keydown\", function(e) {\r\n\r\n            // Only intercept if handler set\r\n            if (!guac_keyboard.onkeydown) return;\r\n\r\n            // Ignore events which have already been handled\r\n            if (!markEvent(e)) return;\r\n\r\n            var keyCode;\r\n            if (window.event) keyCode = window.event.keyCode;\r\n            else if (e.which) keyCode = e.which;\r\n\r\n            // Fix modifier states\r\n            var keydownEvent = new KeydownEvent(keyCode, e.keyIdentifier, e.key, getEventLocation(e));\r\n            syncModifierStates(e, keydownEvent);\r\n\r\n            // Ignore (but do not prevent) the \"composition\" keycode sent by some\r\n            // browsers when an IME is in use (see: http://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html)\r\n            if (keyCode === 229)\r\n                return;\r\n\r\n            // Log event\r\n            eventLog.push(keydownEvent);\r\n\r\n            // Interpret as many events as possible, prevent default if indicated\r\n            if (interpret_events())\r\n                e.preventDefault();\r\n\r\n        }, true);\r\n\r\n        // When key pressed\r\n        element.addEventListener(\"keypress\", function(e) {\r\n\r\n            // Only intercept if handler set\r\n            if (!guac_keyboard.onkeydown && !guac_keyboard.onkeyup) return;\r\n\r\n            // Ignore events which have already been handled\r\n            if (!markEvent(e)) return;\r\n\r\n            var charCode;\r\n            if (window.event) charCode = window.event.keyCode;\r\n            else if (e.which) charCode = e.which;\r\n\r\n            // Fix modifier states\r\n            var keypressEvent = new KeypressEvent(charCode);\r\n            syncModifierStates(e, keypressEvent);\r\n\r\n            // Log event\r\n            eventLog.push(keypressEvent);\r\n\r\n            // Interpret as many events as possible, prevent default if indicated\r\n            if (interpret_events())\r\n                e.preventDefault();\r\n\r\n        }, true);\r\n\r\n        // When key released\r\n        element.addEventListener(\"keyup\", function(e) {\r\n\r\n            // Only intercept if handler set\r\n            if (!guac_keyboard.onkeyup) return;\r\n\r\n            // Ignore events which have already been handled\r\n            if (!markEvent(e)) return;\r\n\r\n            e.preventDefault();\r\n\r\n            var keyCode;\r\n            if (window.event) keyCode = window.event.keyCode;\r\n            else if (e.which) keyCode = e.which;\r\n\r\n            // Fix modifier states\r\n            var keyupEvent = new KeyupEvent(keyCode, e.keyIdentifier, e.key, getEventLocation(e));\r\n            syncModifierStates(e, keyupEvent);\r\n\r\n            // Log event, call for interpretation\r\n            eventLog.push(keyupEvent);\r\n            interpret_events();\r\n\r\n        }, true);\r\n\r\n        /**\r\n         * Handles the given \"input\" event, typing the data within the input text.\r\n         * If the event is complete (text is provided), handling of \"compositionend\"\r\n         * events is suspended, as such events may conflict with input events.\r\n         *\r\n         * @private\r\n         * @param {InputEvent} e\r\n         *     The \"input\" event to handle.\r\n         */\r\n        var handleInput = function handleInput(e) {\r\n\r\n            // Only intercept if handler set\r\n            if (!guac_keyboard.onkeydown && !guac_keyboard.onkeyup) return;\r\n\r\n            // Ignore events which have already been handled\r\n            if (!markEvent(e)) return;\r\n\r\n            // Type all content written\r\n            if (e.data && !e.isComposing) {\r\n                element.removeEventListener(\"compositionend\", handleComposition, false);\r\n                guac_keyboard.type(e.data);\r\n            }\r\n\r\n        };\r\n\r\n        /**\r\n         * Handles the given \"compositionend\" event, typing the data within the\r\n         * composed text. If the event is complete (composed text is provided),\r\n         * handling of \"input\" events is suspended, as such events may conflict\r\n         * with composition events.\r\n         *\r\n         * @private\r\n         * @param {CompositionEvent} e\r\n         *     The \"compositionend\" event to handle.\r\n         */\r\n        var handleComposition = function handleComposition(e) {\r\n\r\n            // Only intercept if handler set\r\n            if (!guac_keyboard.onkeydown && !guac_keyboard.onkeyup) return;\r\n\r\n            // Ignore events which have already been handled\r\n            if (!markEvent(e)) return;\r\n\r\n            // Type all content written\r\n            if (e.data) {\r\n                element.removeEventListener(\"input\", handleInput, false);\r\n                guac_keyboard.type(e.data);\r\n            }\r\n\r\n        };\r\n\r\n        // Automatically type text entered into the wrapped field\r\n        element.addEventListener(\"input\", handleInput, false);\r\n        element.addEventListener(\"compositionend\", handleComposition, false);\r\n\r\n    };\r\n\r\n    // Listen to given element, if any\r\n    if (element)\r\n        guac_keyboard.listenTo(element);\r\n\r\n};\r\n\r\n/**\r\n * The unique numerical identifier to assign to the next Guacamole.Keyboard\r\n * instance.\r\n *\r\n * @private\r\n * @type {Number}\r\n */\r\nGuacamole.Keyboard._nextID = 0;\r\n\r\n/**\r\n * The state of all supported keyboard modifiers.\r\n * @constructor\r\n */\r\nGuacamole.Keyboard.ModifierState = function() {\r\n    \r\n    /**\r\n     * Whether shift is currently pressed.\r\n     * @type {Boolean}\r\n     */\r\n    this.shift = false;\r\n    \r\n    /**\r\n     * Whether ctrl is currently pressed.\r\n     * @type {Boolean}\r\n     */\r\n    this.ctrl = false;\r\n    \r\n    /**\r\n     * Whether alt is currently pressed.\r\n     * @type {Boolean}\r\n     */\r\n    this.alt = false;\r\n    \r\n    /**\r\n     * Whether meta (apple key) is currently pressed.\r\n     * @type {Boolean}\r\n     */\r\n    this.meta = false;\r\n\r\n    /**\r\n     * Whether hyper (windows key) is currently pressed.\r\n     * @type {Boolean}\r\n     */\r\n    this.hyper = false;\r\n    \r\n};\r\n\r\n/**\r\n * Returns the modifier state applicable to the keyboard event given.\r\n * \r\n * @param {KeyboardEvent} e The keyboard event to read.\r\n * @returns {Guacamole.Keyboard.ModifierState} The current state of keyboard\r\n *                                             modifiers.\r\n */\r\nGuacamole.Keyboard.ModifierState.fromKeyboardEvent = function(e) {\r\n    \r\n    var state = new Guacamole.Keyboard.ModifierState();\r\n\r\n    // Assign states from old flags\r\n    state.shift = e.shiftKey;\r\n    state.ctrl  = e.ctrlKey;\r\n    state.alt   = e.altKey;\r\n    state.meta  = e.metaKey;\r\n\r\n    // Use DOM3 getModifierState() for others\r\n    if (e.getModifierState) {\r\n        state.hyper = e.getModifierState(\"OS\")\r\n                   || e.getModifierState(\"Super\")\r\n                   || e.getModifierState(\"Hyper\")\r\n                   || e.getModifierState(\"Win\");\r\n    }\r\n\r\n    return state;\r\n    \r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Abstract ordered drawing surface. Each Layer contains a canvas element and\r\n * provides simple drawing instructions for drawing to that canvas element,\r\n * however unlike the canvas element itself, drawing operations on a Layer are\r\n * guaranteed to run in order, even if such an operation must wait for an image\r\n * to load before completing.\r\n * \r\n * @constructor\r\n * \r\n * @param {Number} width The width of the Layer, in pixels. The canvas element\r\n *                       backing this Layer will be given this width.\r\n *                       \r\n * @param {Number} height The height of the Layer, in pixels. The canvas element\r\n *                        backing this Layer will be given this height.\r\n */\r\nGuacamole.Layer = function(width, height) {\r\n\r\n    /**\r\n     * Reference to this Layer.\r\n     * @private\r\n     */\r\n    var layer = this;\r\n\r\n    /**\r\n     * The number of pixels the width or height of a layer must change before\r\n     * the underlying canvas is resized. The underlying canvas will be kept at\r\n     * dimensions which are integer multiples of this factor.\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type Number\r\n     */\r\n    var CANVAS_SIZE_FACTOR = 64;\r\n\r\n    /**\r\n     * The canvas element backing this Layer.\r\n     * @private\r\n     */\r\n    var canvas = document.createElement(\"canvas\");\r\n\r\n    /**\r\n     * The 2D display context of the canvas element backing this Layer.\r\n     * @private\r\n     */\r\n    var context = canvas.getContext(\"2d\");\r\n    context.save();\r\n\r\n    /**\r\n     * Whether the layer has not yet been drawn to. Once any draw operation\r\n     * which affects the underlying canvas is invoked, this flag will be set to\r\n     * false.\r\n     *\r\n     * @private\r\n     * @type Boolean\r\n     */\r\n    var empty = true;\r\n\r\n    /**\r\n     * Whether a new path should be started with the next path drawing\r\n     * operations.\r\n     * @private\r\n     */\r\n    var pathClosed = true;\r\n\r\n    /**\r\n     * The number of states on the state stack.\r\n     * \r\n     * Note that there will ALWAYS be one element on the stack, but that\r\n     * element is not exposed. It is only used to reset the layer to its\r\n     * initial state.\r\n     * \r\n     * @private\r\n     */\r\n    var stackSize = 0;\r\n\r\n    /**\r\n     * Map of all Guacamole channel masks to HTML5 canvas composite operation\r\n     * names. Not all channel mask combinations are currently implemented.\r\n     * @private\r\n     */\r\n    var compositeOperation = {\r\n     /* 0x0 NOT IMPLEMENTED */\r\n        0x1: \"destination-in\",\r\n        0x2: \"destination-out\",\r\n     /* 0x3 NOT IMPLEMENTED */\r\n        0x4: \"source-in\",\r\n     /* 0x5 NOT IMPLEMENTED */\r\n        0x6: \"source-atop\",\r\n     /* 0x7 NOT IMPLEMENTED */\r\n        0x8: \"source-out\",\r\n        0x9: \"destination-atop\",\r\n        0xA: \"xor\",\r\n        0xB: \"destination-over\",\r\n        0xC: \"copy\",\r\n     /* 0xD NOT IMPLEMENTED */\r\n        0xE: \"source-over\",\r\n        0xF: \"lighter\"\r\n    };\r\n\r\n    /**\r\n     * Resizes the canvas element backing this Layer. This function should only\r\n     * be used internally.\r\n     * \r\n     * @private\r\n     * @param {Number} [newWidth=0]\r\n     *     The new width to assign to this Layer.\r\n     *\r\n     * @param {Number} [newHeight=0]\r\n     *     The new height to assign to this Layer.\r\n     */\r\n    var resize = function resize(newWidth, newHeight) {\r\n\r\n        // Default size to zero\r\n        newWidth = newWidth || 0;\r\n        newHeight = newHeight || 0;\r\n\r\n        // Calculate new dimensions of internal canvas\r\n        var canvasWidth  = Math.ceil(newWidth  / CANVAS_SIZE_FACTOR) * CANVAS_SIZE_FACTOR;\r\n        var canvasHeight = Math.ceil(newHeight / CANVAS_SIZE_FACTOR) * CANVAS_SIZE_FACTOR;\r\n\r\n        // Resize only if canvas dimensions are actually changing\r\n        if (canvas.width !== canvasWidth || canvas.height !== canvasHeight) {\r\n\r\n            // Copy old data only if relevant and non-empty\r\n            var oldData = null;\r\n            if (!empty && canvas.width !== 0 && canvas.height !== 0) {\r\n\r\n                // Create canvas and context for holding old data\r\n                oldData = document.createElement(\"canvas\");\r\n                oldData.width = Math.min(layer.width, newWidth);\r\n                oldData.height = Math.min(layer.height, newHeight);\r\n\r\n                var oldDataContext = oldData.getContext(\"2d\");\r\n\r\n                // Copy image data from current\r\n                oldDataContext.drawImage(canvas,\r\n                        0, 0, oldData.width, oldData.height,\r\n                        0, 0, oldData.width, oldData.height);\r\n\r\n            }\r\n\r\n            // Preserve composite operation\r\n            var oldCompositeOperation = context.globalCompositeOperation;\r\n\r\n            // Resize canvas\r\n            canvas.width = canvasWidth;\r\n            canvas.height = canvasHeight;\r\n\r\n            // Redraw old data, if any\r\n            if (oldData)\r\n                context.drawImage(oldData,\r\n                    0, 0, oldData.width, oldData.height,\r\n                    0, 0, oldData.width, oldData.height);\r\n\r\n            // Restore composite operation\r\n            context.globalCompositeOperation = oldCompositeOperation;\r\n\r\n            // Acknowledge reset of stack (happens on resize of canvas)\r\n            stackSize = 0;\r\n            context.save();\r\n\r\n        }\r\n\r\n        // If the canvas size is not changing, manually force state reset\r\n        else\r\n            layer.reset();\r\n\r\n        // Assign new layer dimensions\r\n        layer.width = newWidth;\r\n        layer.height = newHeight;\r\n\r\n    };\r\n\r\n    /**\r\n     * Given the X and Y coordinates of the upper-left corner of a rectangle\r\n     * and the rectangle's width and height, resize the backing canvas element\r\n     * as necessary to ensure that the rectangle fits within the canvas\r\n     * element's coordinate space. This function will only make the canvas\r\n     * larger. If the rectangle already fits within the canvas element's\r\n     * coordinate space, the canvas is left unchanged.\r\n     * \r\n     * @private\r\n     * @param {Number} x The X coordinate of the upper-left corner of the\r\n     *                   rectangle to fit.\r\n     * @param {Number} y The Y coordinate of the upper-left corner of the\r\n     *                   rectangle to fit.\r\n     * @param {Number} w The width of the the rectangle to fit.\r\n     * @param {Number} h The height of the the rectangle to fit.\r\n     */\r\n    function fitRect(x, y, w, h) {\r\n        \r\n        // Calculate bounds\r\n        var opBoundX = w + x;\r\n        var opBoundY = h + y;\r\n        \r\n        // Determine max width\r\n        var resizeWidth;\r\n        if (opBoundX > layer.width)\r\n            resizeWidth = opBoundX;\r\n        else\r\n            resizeWidth = layer.width;\r\n\r\n        // Determine max height\r\n        var resizeHeight;\r\n        if (opBoundY > layer.height)\r\n            resizeHeight = opBoundY;\r\n        else\r\n            resizeHeight = layer.height;\r\n\r\n        // Resize if necessary\r\n        layer.resize(resizeWidth, resizeHeight);\r\n\r\n    }\r\n\r\n    /**\r\n     * Set to true if this Layer should resize itself to accomodate the\r\n     * dimensions of any drawing operation, and false (the default) otherwise.\r\n     * \r\n     * Note that setting this property takes effect immediately, and thus may\r\n     * take effect on operations that were started in the past but have not\r\n     * yet completed. If you wish the setting of this flag to only modify\r\n     * future operations, you will need to make the setting of this flag an\r\n     * operation with sync().\r\n     * \r\n     * @example\r\n     * // Set autosize to true for all future operations\r\n     * layer.sync(function() {\r\n     *     layer.autosize = true;\r\n     * });\r\n     * \r\n     * @type {Boolean}\r\n     * @default false\r\n     */\r\n    this.autosize = false;\r\n\r\n    /**\r\n     * The current width of this layer.\r\n     * @type {Number}\r\n     */\r\n    this.width = width;\r\n\r\n    /**\r\n     * The current height of this layer.\r\n     * @type {Number}\r\n     */\r\n    this.height = height;\r\n\r\n    /**\r\n     * Returns the canvas element backing this Layer. Note that the dimensions\r\n     * of the canvas may not exactly match those of the Layer, as resizing a\r\n     * canvas while maintaining its state is an expensive operation.\r\n     *\r\n     * @returns {HTMLCanvasElement}\r\n     *     The canvas element backing this Layer.\r\n     */\r\n    this.getCanvas = function getCanvas() {\r\n        return canvas;\r\n    };\r\n\r\n    /**\r\n     * Returns a new canvas element containing the same image as this Layer.\r\n     * Unlike getCanvas(), the canvas element returned is guaranteed to have\r\n     * the exact same dimensions as the Layer.\r\n     *\r\n     * @returns {HTMLCanvasElement}\r\n     *     A new canvas element containing a copy of the image content this\r\n     *     Layer.\r\n     */\r\n    this.toCanvas = function toCanvas() {\r\n\r\n        // Create new canvas having same dimensions\r\n        var canvas = document.createElement('canvas');\r\n        canvas.width = layer.width;\r\n        canvas.height = layer.height;\r\n\r\n        // Copy image contents to new canvas\r\n        var context = canvas.getContext('2d');\r\n        context.drawImage(layer.getCanvas(), 0, 0);\r\n\r\n        return canvas;\r\n\r\n    };\r\n\r\n    /**\r\n     * Changes the size of this Layer to the given width and height. Resizing\r\n     * is only attempted if the new size provided is actually different from\r\n     * the current size.\r\n     * \r\n     * @param {Number} newWidth The new width to assign to this Layer.\r\n     * @param {Number} newHeight The new height to assign to this Layer.\r\n     */\r\n    this.resize = function(newWidth, newHeight) {\r\n        if (newWidth !== layer.width || newHeight !== layer.height)\r\n            resize(newWidth, newHeight);\r\n    };\r\n\r\n    /**\r\n     * Draws the specified image at the given coordinates. The image specified\r\n     * must already be loaded.\r\n     * \r\n     * @param {Number} x\r\n     *     The destination X coordinate.\r\n     *\r\n     * @param {Number} y\r\n     *     The destination Y coordinate.\r\n     *\r\n     * @param {CanvasImageSource} image\r\n     *     The image to draw. Note that this is not a URL.\r\n     */\r\n    this.drawImage = function(x, y, image) {\r\n        if (layer.autosize) fitRect(x, y, image.width, image.height);\r\n        context.drawImage(image, x, y);\r\n        empty = false;\r\n    };\r\n\r\n    /**\r\n     * Transfer a rectangle of image data from one Layer to this Layer using the\r\n     * specified transfer function.\r\n     * \r\n     * @param {Guacamole.Layer} srcLayer The Layer to copy image data from.\r\n     * @param {Number} srcx The X coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcy The Y coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcw The width of the rectangle within the source Layer's\r\n     *                      coordinate space to copy data from.\r\n     * @param {Number} srch The height of the rectangle within the source\r\n     *                      Layer's coordinate space to copy data from.\r\n     * @param {Number} x The destination X coordinate.\r\n     * @param {Number} y The destination Y coordinate.\r\n     * @param {Function} transferFunction The transfer function to use to\r\n     *                                    transfer data from source to\r\n     *                                    destination.\r\n     */\r\n    this.transfer = function(srcLayer, srcx, srcy, srcw, srch, x, y, transferFunction) {\r\n\r\n        var srcCanvas = srcLayer.getCanvas();\r\n\r\n        // If entire rectangle outside source canvas, stop\r\n        if (srcx >= srcCanvas.width || srcy >= srcCanvas.height) return;\r\n\r\n        // Otherwise, clip rectangle to area\r\n        if (srcx + srcw > srcCanvas.width)\r\n            srcw = srcCanvas.width - srcx;\r\n\r\n        if (srcy + srch > srcCanvas.height)\r\n            srch = srcCanvas.height - srcy;\r\n\r\n        // Stop if nothing to draw.\r\n        if (srcw === 0 || srch === 0) return;\r\n\r\n        if (layer.autosize) fitRect(x, y, srcw, srch);\r\n\r\n        // Get image data from src and dst\r\n        var src = srcLayer.getCanvas().getContext(\"2d\").getImageData(srcx, srcy, srcw, srch);\r\n        var dst = context.getImageData(x , y, srcw, srch);\r\n\r\n        // Apply transfer for each pixel\r\n        for (var i=0; i<srcw*srch*4; i+=4) {\r\n\r\n            // Get source pixel environment\r\n            var src_pixel = new Guacamole.Layer.Pixel(\r\n                src.data[i],\r\n                src.data[i+1],\r\n                src.data[i+2],\r\n                src.data[i+3]\r\n            );\r\n                \r\n            // Get destination pixel environment\r\n            var dst_pixel = new Guacamole.Layer.Pixel(\r\n                dst.data[i],\r\n                dst.data[i+1],\r\n                dst.data[i+2],\r\n                dst.data[i+3]\r\n            );\r\n\r\n            // Apply transfer function\r\n            transferFunction(src_pixel, dst_pixel);\r\n\r\n            // Save pixel data\r\n            dst.data[i  ] = dst_pixel.red;\r\n            dst.data[i+1] = dst_pixel.green;\r\n            dst.data[i+2] = dst_pixel.blue;\r\n            dst.data[i+3] = dst_pixel.alpha;\r\n\r\n        }\r\n\r\n        // Draw image data\r\n        context.putImageData(dst, x, y);\r\n        empty = false;\r\n\r\n    };\r\n\r\n    /**\r\n     * Put a rectangle of image data from one Layer to this Layer directly\r\n     * without performing any alpha blending. Simply copy the data.\r\n     * \r\n     * @param {Guacamole.Layer} srcLayer The Layer to copy image data from.\r\n     * @param {Number} srcx The X coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcy The Y coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcw The width of the rectangle within the source Layer's\r\n     *                      coordinate space to copy data from.\r\n     * @param {Number} srch The height of the rectangle within the source\r\n     *                      Layer's coordinate space to copy data from.\r\n     * @param {Number} x The destination X coordinate.\r\n     * @param {Number} y The destination Y coordinate.\r\n     */\r\n    this.put = function(srcLayer, srcx, srcy, srcw, srch, x, y) {\r\n\r\n        var srcCanvas = srcLayer.getCanvas();\r\n\r\n        // If entire rectangle outside source canvas, stop\r\n        if (srcx >= srcCanvas.width || srcy >= srcCanvas.height) return;\r\n\r\n        // Otherwise, clip rectangle to area\r\n        if (srcx + srcw > srcCanvas.width)\r\n            srcw = srcCanvas.width - srcx;\r\n\r\n        if (srcy + srch > srcCanvas.height)\r\n            srch = srcCanvas.height - srcy;\r\n\r\n        // Stop if nothing to draw.\r\n        if (srcw === 0 || srch === 0) return;\r\n\r\n        if (layer.autosize) fitRect(x, y, srcw, srch);\r\n\r\n        // Get image data from src and dst\r\n        var src = srcLayer.getCanvas().getContext(\"2d\").getImageData(srcx, srcy, srcw, srch);\r\n        context.putImageData(src, x, y);\r\n        empty = false;\r\n\r\n    };\r\n\r\n    /**\r\n     * Copy a rectangle of image data from one Layer to this Layer. This\r\n     * operation will copy exactly the image data that will be drawn once all\r\n     * operations of the source Layer that were pending at the time this\r\n     * function was called are complete. This operation will not alter the\r\n     * size of the source Layer even if its autosize property is set to true.\r\n     * \r\n     * @param {Guacamole.Layer} srcLayer The Layer to copy image data from.\r\n     * @param {Number} srcx The X coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcy The Y coordinate of the upper-left corner of the\r\n     *                      rectangle within the source Layer's coordinate\r\n     *                      space to copy data from.\r\n     * @param {Number} srcw The width of the rectangle within the source Layer's\r\n     *                      coordinate space to copy data from.\r\n     * @param {Number} srch The height of the rectangle within the source\r\n     *                      Layer's coordinate space to copy data from.\r\n     * @param {Number} x The destination X coordinate.\r\n     * @param {Number} y The destination Y coordinate.\r\n     */\r\n    this.copy = function(srcLayer, srcx, srcy, srcw, srch, x, y) {\r\n\r\n        var srcCanvas = srcLayer.getCanvas();\r\n\r\n        // If entire rectangle outside source canvas, stop\r\n        if (srcx >= srcCanvas.width || srcy >= srcCanvas.height) return;\r\n\r\n        // Otherwise, clip rectangle to area\r\n        if (srcx + srcw > srcCanvas.width)\r\n            srcw = srcCanvas.width - srcx;\r\n\r\n        if (srcy + srch > srcCanvas.height)\r\n            srch = srcCanvas.height - srcy;\r\n\r\n        // Stop if nothing to draw.\r\n        if (srcw === 0 || srch === 0) return;\r\n\r\n        if (layer.autosize) fitRect(x, y, srcw, srch);\r\n        context.drawImage(srcCanvas, srcx, srcy, srcw, srch, x, y, srcw, srch);\r\n        empty = false;\r\n\r\n    };\r\n\r\n    /**\r\n     * Starts a new path at the specified point.\r\n     * \r\n     * @param {Number} x The X coordinate of the point to draw.\r\n     * @param {Number} y The Y coordinate of the point to draw.\r\n     */\r\n    this.moveTo = function(x, y) {\r\n        \r\n        // Start a new path if current path is closed\r\n        if (pathClosed) {\r\n            context.beginPath();\r\n            pathClosed = false;\r\n        }\r\n        \r\n        if (layer.autosize) fitRect(x, y, 0, 0);\r\n        context.moveTo(x, y);\r\n\r\n    };\r\n\r\n    /**\r\n     * Add the specified line to the current path.\r\n     * \r\n     * @param {Number} x The X coordinate of the endpoint of the line to draw.\r\n     * @param {Number} y The Y coordinate of the endpoint of the line to draw.\r\n     */\r\n    this.lineTo = function(x, y) {\r\n        \r\n        // Start a new path if current path is closed\r\n        if (pathClosed) {\r\n            context.beginPath();\r\n            pathClosed = false;\r\n        }\r\n        \r\n        if (layer.autosize) fitRect(x, y, 0, 0);\r\n        context.lineTo(x, y);\r\n        \r\n    };\r\n\r\n    /**\r\n     * Add the specified arc to the current path.\r\n     * \r\n     * @param {Number} x The X coordinate of the center of the circle which\r\n     *                   will contain the arc.\r\n     * @param {Number} y The Y coordinate of the center of the circle which\r\n     *                   will contain the arc.\r\n     * @param {Number} radius The radius of the circle.\r\n     * @param {Number} startAngle The starting angle of the arc, in radians.\r\n     * @param {Number} endAngle The ending angle of the arc, in radians.\r\n     * @param {Boolean} negative Whether the arc should be drawn in order of\r\n     *                           decreasing angle.\r\n     */\r\n    this.arc = function(x, y, radius, startAngle, endAngle, negative) {\r\n        \r\n        // Start a new path if current path is closed\r\n        if (pathClosed) {\r\n            context.beginPath();\r\n            pathClosed = false;\r\n        }\r\n        \r\n        if (layer.autosize) fitRect(x, y, 0, 0);\r\n        context.arc(x, y, radius, startAngle, endAngle, negative);\r\n        \r\n    };\r\n\r\n    /**\r\n     * Starts a new path at the specified point.\r\n     * \r\n     * @param {Number} cp1x The X coordinate of the first control point.\r\n     * @param {Number} cp1y The Y coordinate of the first control point.\r\n     * @param {Number} cp2x The X coordinate of the second control point.\r\n     * @param {Number} cp2y The Y coordinate of the second control point.\r\n     * @param {Number} x The X coordinate of the endpoint of the curve.\r\n     * @param {Number} y The Y coordinate of the endpoint of the curve.\r\n     */\r\n    this.curveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        \r\n        // Start a new path if current path is closed\r\n        if (pathClosed) {\r\n            context.beginPath();\r\n            pathClosed = false;\r\n        }\r\n        \r\n        if (layer.autosize) fitRect(x, y, 0, 0);\r\n        context.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n        \r\n    };\r\n\r\n    /**\r\n     * Closes the current path by connecting the end point with the start\r\n     * point (if any) with a straight line.\r\n     */\r\n    this.close = function() {\r\n        context.closePath();\r\n        pathClosed = true;\r\n    };\r\n\r\n    /**\r\n     * Add the specified rectangle to the current path.\r\n     * \r\n     * @param {Number} x The X coordinate of the upper-left corner of the\r\n     *                   rectangle to draw.\r\n     * @param {Number} y The Y coordinate of the upper-left corner of the\r\n     *                   rectangle to draw.\r\n     * @param {Number} w The width of the rectangle to draw.\r\n     * @param {Number} h The height of the rectangle to draw.\r\n     */\r\n    this.rect = function(x, y, w, h) {\r\n            \r\n        // Start a new path if current path is closed\r\n        if (pathClosed) {\r\n            context.beginPath();\r\n            pathClosed = false;\r\n        }\r\n        \r\n        if (layer.autosize) fitRect(x, y, w, h);\r\n        context.rect(x, y, w, h);\r\n        \r\n    };\r\n\r\n    /**\r\n     * Clip all future drawing operations by the current path. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as fillColor()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     */\r\n    this.clip = function() {\r\n\r\n        // Set new clipping region\r\n        context.clip();\r\n\r\n        // Path now implicitly closed\r\n        pathClosed = true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Stroke the current path with the specified color. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as clip()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {String} cap The line cap style. Can be \"round\", \"square\",\r\n     *                     or \"butt\".\r\n     * @param {String} join The line join style. Can be \"round\", \"bevel\",\r\n     *                      or \"miter\".\r\n     * @param {Number} thickness The line thickness in pixels.\r\n     * @param {Number} r The red component of the color to fill.\r\n     * @param {Number} g The green component of the color to fill.\r\n     * @param {Number} b The blue component of the color to fill.\r\n     * @param {Number} a The alpha component of the color to fill.\r\n     */\r\n    this.strokeColor = function(cap, join, thickness, r, g, b, a) {\r\n\r\n        // Stroke with color\r\n        context.lineCap = cap;\r\n        context.lineJoin = join;\r\n        context.lineWidth = thickness;\r\n        context.strokeStyle = \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a/255.0 + \")\";\r\n        context.stroke();\r\n        empty = false;\r\n\r\n        // Path now implicitly closed\r\n        pathClosed = true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Fills the current path with the specified color. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as clip()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {Number} r The red component of the color to fill.\r\n     * @param {Number} g The green component of the color to fill.\r\n     * @param {Number} b The blue component of the color to fill.\r\n     * @param {Number} a The alpha component of the color to fill.\r\n     */\r\n    this.fillColor = function(r, g, b, a) {\r\n\r\n        // Fill with color\r\n        context.fillStyle = \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a/255.0 + \")\";\r\n        context.fill();\r\n        empty = false;\r\n\r\n        // Path now implicitly closed\r\n        pathClosed = true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Stroke the current path with the image within the specified layer. The\r\n     * image data will be tiled infinitely within the stroke. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as clip()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {String} cap The line cap style. Can be \"round\", \"square\",\r\n     *                     or \"butt\".\r\n     * @param {String} join The line join style. Can be \"round\", \"bevel\",\r\n     *                      or \"miter\".\r\n     * @param {Number} thickness The line thickness in pixels.\r\n     * @param {Guacamole.Layer} srcLayer The layer to use as a repeating pattern\r\n     *                                   within the stroke.\r\n     */\r\n    this.strokeLayer = function(cap, join, thickness, srcLayer) {\r\n\r\n        // Stroke with image data\r\n        context.lineCap = cap;\r\n        context.lineJoin = join;\r\n        context.lineWidth = thickness;\r\n        context.strokeStyle = context.createPattern(\r\n            srcLayer.getCanvas(),\r\n            \"repeat\"\r\n        );\r\n        context.stroke();\r\n        empty = false;\r\n\r\n        // Path now implicitly closed\r\n        pathClosed = true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Fills the current path with the image within the specified layer. The\r\n     * image data will be tiled infinitely within the stroke. The current path\r\n     * is implicitly closed. The current path can continue to be reused\r\n     * for other operations (such as clip()) but a new path will be started\r\n     * once a path drawing operation (path() or rect()) is used.\r\n     * \r\n     * @param {Guacamole.Layer} srcLayer The layer to use as a repeating pattern\r\n     *                                   within the fill.\r\n     */\r\n    this.fillLayer = function(srcLayer) {\r\n\r\n        // Fill with image data \r\n        context.fillStyle = context.createPattern(\r\n            srcLayer.getCanvas(),\r\n            \"repeat\"\r\n        );\r\n        context.fill();\r\n        empty = false;\r\n\r\n        // Path now implicitly closed\r\n        pathClosed = true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Push current layer state onto stack.\r\n     */\r\n    this.push = function() {\r\n\r\n        // Save current state onto stack\r\n        context.save();\r\n        stackSize++;\r\n\r\n    };\r\n\r\n    /**\r\n     * Pop layer state off stack.\r\n     */\r\n    this.pop = function() {\r\n\r\n        // Restore current state from stack\r\n        if (stackSize > 0) {\r\n            context.restore();\r\n            stackSize--;\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Reset the layer, clearing the stack, the current path, and any transform\r\n     * matrix.\r\n     */\r\n    this.reset = function() {\r\n\r\n        // Clear stack\r\n        while (stackSize > 0) {\r\n            context.restore();\r\n            stackSize--;\r\n        }\r\n\r\n        // Restore to initial state\r\n        context.restore();\r\n        context.save();\r\n\r\n        // Clear path\r\n        context.beginPath();\r\n        pathClosed = false;\r\n\r\n    };\r\n\r\n    /**\r\n     * Sets the given affine transform (defined with six values from the\r\n     * transform's matrix).\r\n     * \r\n     * @param {Number} a The first value in the affine transform's matrix.\r\n     * @param {Number} b The second value in the affine transform's matrix.\r\n     * @param {Number} c The third value in the affine transform's matrix.\r\n     * @param {Number} d The fourth value in the affine transform's matrix.\r\n     * @param {Number} e The fifth value in the affine transform's matrix.\r\n     * @param {Number} f The sixth value in the affine transform's matrix.\r\n     */\r\n    this.setTransform = function(a, b, c, d, e, f) {\r\n        context.setTransform(\r\n            a, b, c,\r\n            d, e, f\r\n          /*0, 0, 1*/\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Applies the given affine transform (defined with six values from the\r\n     * transform's matrix).\r\n     * \r\n     * @param {Number} a The first value in the affine transform's matrix.\r\n     * @param {Number} b The second value in the affine transform's matrix.\r\n     * @param {Number} c The third value in the affine transform's matrix.\r\n     * @param {Number} d The fourth value in the affine transform's matrix.\r\n     * @param {Number} e The fifth value in the affine transform's matrix.\r\n     * @param {Number} f The sixth value in the affine transform's matrix.\r\n     */\r\n    this.transform = function(a, b, c, d, e, f) {\r\n        context.transform(\r\n            a, b, c,\r\n            d, e, f\r\n          /*0, 0, 1*/\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Sets the channel mask for future operations on this Layer.\r\n     * \r\n     * The channel mask is a Guacamole-specific compositing operation identifier\r\n     * with a single bit representing each of four channels (in order): source\r\n     * image where destination transparent, source where destination opaque,\r\n     * destination where source transparent, and destination where source\r\n     * opaque.\r\n     * \r\n     * @param {Number} mask The channel mask for future operations on this\r\n     *                      Layer.\r\n     */\r\n    this.setChannelMask = function(mask) {\r\n        context.globalCompositeOperation = compositeOperation[mask];\r\n    };\r\n\r\n    /**\r\n     * Sets the miter limit for stroke operations using the miter join. This\r\n     * limit is the maximum ratio of the size of the miter join to the stroke\r\n     * width. If this ratio is exceeded, the miter will not be drawn for that\r\n     * joint of the path.\r\n     * \r\n     * @param {Number} limit The miter limit for stroke operations using the\r\n     *                       miter join.\r\n     */\r\n    this.setMiterLimit = function(limit) {\r\n        context.miterLimit = limit;\r\n    };\r\n\r\n    // Initialize canvas dimensions\r\n    resize(width, height);\r\n\r\n    // Explicitly render canvas below other elements in the layer (such as\r\n    // child layers). Chrome and others may fail to render layers properly\r\n    // without this.\r\n    canvas.style.zIndex = -1;\r\n\r\n};\r\n\r\n/**\r\n * Channel mask for the composite operation \"rout\".\r\n */\r\nGuacamole.Layer.ROUT  = 0x2;\r\n\r\n/**\r\n * Channel mask for the composite operation \"atop\".\r\n */\r\nGuacamole.Layer.ATOP  = 0x6;\r\n\r\n/**\r\n * Channel mask for the composite operation \"xor\".\r\n */\r\nGuacamole.Layer.XOR   = 0xA;\r\n\r\n/**\r\n * Channel mask for the composite operation \"rover\".\r\n */\r\nGuacamole.Layer.ROVER = 0xB;\r\n\r\n/**\r\n * Channel mask for the composite operation \"over\".\r\n */\r\nGuacamole.Layer.OVER  = 0xE;\r\n\r\n/**\r\n * Channel mask for the composite operation \"plus\".\r\n */\r\nGuacamole.Layer.PLUS  = 0xF;\r\n\r\n/**\r\n * Channel mask for the composite operation \"rin\".\r\n * Beware that WebKit-based browsers may leave the contents of the destionation\r\n * layer where the source layer is transparent, despite the definition of this\r\n * operation.\r\n */\r\nGuacamole.Layer.RIN   = 0x1;\r\n\r\n/**\r\n * Channel mask for the composite operation \"in\".\r\n * Beware that WebKit-based browsers may leave the contents of the destionation\r\n * layer where the source layer is transparent, despite the definition of this\r\n * operation.\r\n */\r\nGuacamole.Layer.IN    = 0x4;\r\n\r\n/**\r\n * Channel mask for the composite operation \"out\".\r\n * Beware that WebKit-based browsers may leave the contents of the destionation\r\n * layer where the source layer is transparent, despite the definition of this\r\n * operation.\r\n */\r\nGuacamole.Layer.OUT   = 0x8;\r\n\r\n/**\r\n * Channel mask for the composite operation \"ratop\".\r\n * Beware that WebKit-based browsers may leave the contents of the destionation\r\n * layer where the source layer is transparent, despite the definition of this\r\n * operation.\r\n */\r\nGuacamole.Layer.RATOP = 0x9;\r\n\r\n/**\r\n * Channel mask for the composite operation \"src\".\r\n * Beware that WebKit-based browsers may leave the contents of the destionation\r\n * layer where the source layer is transparent, despite the definition of this\r\n * operation.\r\n */\r\nGuacamole.Layer.SRC   = 0xC;\r\n\r\n/**\r\n * Represents a single pixel of image data. All components have a minimum value\r\n * of 0 and a maximum value of 255.\r\n * \r\n * @constructor\r\n * \r\n * @param {Number} r The red component of this pixel.\r\n * @param {Number} g The green component of this pixel.\r\n * @param {Number} b The blue component of this pixel.\r\n * @param {Number} a The alpha component of this pixel.\r\n */\r\nGuacamole.Layer.Pixel = function(r, g, b, a) {\r\n\r\n    /**\r\n     * The red component of this pixel, where 0 is the minimum value,\r\n     * and 255 is the maximum.\r\n     */\r\n    this.red   = r;\r\n\r\n    /**\r\n     * The green component of this pixel, where 0 is the minimum value,\r\n     * and 255 is the maximum.\r\n     */\r\n    this.green = g;\r\n\r\n    /**\r\n     * The blue component of this pixel, where 0 is the minimum value,\r\n     * and 255 is the maximum.\r\n     */\r\n    this.blue  = b;\r\n\r\n    /**\r\n     * The alpha component of this pixel, where 0 is the minimum value,\r\n     * and 255 is the maximum.\r\n     */\r\n    this.alpha = a;\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Provides cross-browser mouse events for a given element. The events of\r\n * the given element are automatically populated with handlers that translate\r\n * mouse events into a non-browser-specific event provided by the\r\n * Guacamole.Mouse instance.\r\n * \r\n * @constructor\r\n * @param {Element} element The Element to use to provide mouse events.\r\n */\r\nGuacamole.Mouse = function(element) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.Mouse.\r\n     * @private\r\n     */\r\n    var guac_mouse = this;\r\n\r\n    /**\r\n     * The number of mousemove events to require before re-enabling mouse\r\n     * event handling after receiving a touch event.\r\n     */\r\n    this.touchMouseThreshold = 3;\r\n\r\n    /**\r\n     * The minimum amount of pixels scrolled required for a single scroll button\r\n     * click.\r\n     */\r\n    this.scrollThreshold = 53;\r\n\r\n    /**\r\n     * The number of pixels to scroll per line.\r\n     */\r\n    this.PIXELS_PER_LINE = 18;\r\n\r\n    /**\r\n     * The number of pixels to scroll per page.\r\n     */\r\n    this.PIXELS_PER_PAGE = this.PIXELS_PER_LINE * 16;\r\n\r\n    /**\r\n     * The current mouse state. The properties of this state are updated when\r\n     * mouse events fire. This state object is also passed in as a parameter to\r\n     * the handler of any mouse events.\r\n     * \r\n     * @type {Guacamole.Mouse.State}\r\n     */\r\n    this.currentState = new Guacamole.Mouse.State(\r\n        0, 0, \r\n        false, false, false, false, false\r\n    );\r\n\r\n    /**\r\n     * Fired whenever the user presses a mouse button down over the element\r\n     * associated with this Guacamole.Mouse.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmousedown = null;\r\n\r\n    /**\r\n     * Fired whenever the user releases a mouse button down over the element\r\n     * associated with this Guacamole.Mouse.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmouseup = null;\r\n\r\n    /**\r\n     * Fired whenever the user moves the mouse over the element associated with\r\n     * this Guacamole.Mouse.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmousemove = null;\r\n\r\n    /**\r\n     * Fired whenever the mouse leaves the boundaries of the element associated\r\n     * with this Guacamole.Mouse.\r\n     * \r\n     * @event\r\n     */\r\n\tthis.onmouseout = null;\r\n\r\n    /**\r\n     * Counter of mouse events to ignore. This decremented by mousemove, and\r\n     * while non-zero, mouse events will have no effect.\r\n     * @private\r\n     */\r\n    var ignore_mouse = 0;\r\n\r\n    /**\r\n     * Cumulative scroll delta amount. This value is accumulated through scroll\r\n     * events and results in scroll button clicks if it exceeds a certain\r\n     * threshold.\r\n     *\r\n     * @private\r\n     */\r\n    var scroll_delta = 0;\r\n\r\n    function cancelEvent(e) {\r\n        e.stopPropagation();\r\n        if (e.preventDefault) e.preventDefault();\r\n        e.returnValue = false;\r\n    }\r\n\r\n    // Block context menu so right-click gets sent properly\r\n    element.addEventListener(\"contextmenu\", function(e) {\r\n        cancelEvent(e);\r\n    }, false);\r\n\r\n    element.addEventListener(\"mousemove\", function(e) {\r\n\r\n        cancelEvent(e);\r\n\r\n        // If ignoring events, decrement counter\r\n        if (ignore_mouse) {\r\n            ignore_mouse--;\r\n            return;\r\n        }\r\n\r\n        guac_mouse.currentState.fromClientPosition(element, e.clientX, e.clientY);\r\n\r\n        if (guac_mouse.onmousemove)\r\n            guac_mouse.onmousemove(guac_mouse.currentState);\r\n\r\n    }, false);\r\n\r\n    element.addEventListener(\"mousedown\", function(e) {\r\n\r\n        cancelEvent(e);\r\n\r\n        // Do not handle if ignoring events\r\n        if (ignore_mouse)\r\n            return;\r\n\r\n        switch (e.button) {\r\n            case 0:\r\n                guac_mouse.currentState.left = true;\r\n                break;\r\n            case 1:\r\n                guac_mouse.currentState.middle = true;\r\n                break;\r\n            case 2:\r\n                guac_mouse.currentState.right = true;\r\n                break;\r\n        }\r\n\r\n        if (guac_mouse.onmousedown)\r\n            guac_mouse.onmousedown(guac_mouse.currentState);\r\n\r\n    }, false);\r\n\r\n    element.addEventListener(\"mouseup\", function(e) {\r\n\r\n        cancelEvent(e);\r\n\r\n        // Do not handle if ignoring events\r\n        if (ignore_mouse)\r\n            return;\r\n\r\n        switch (e.button) {\r\n            case 0:\r\n                guac_mouse.currentState.left = false;\r\n                break;\r\n            case 1:\r\n                guac_mouse.currentState.middle = false;\r\n                break;\r\n            case 2:\r\n                guac_mouse.currentState.right = false;\r\n                break;\r\n        }\r\n\r\n        if (guac_mouse.onmouseup)\r\n            guac_mouse.onmouseup(guac_mouse.currentState);\r\n\r\n    }, false);\r\n\r\n    element.addEventListener(\"mouseout\", function(e) {\r\n\r\n        // Get parent of the element the mouse pointer is leaving\r\n       \tif (!e) e = window.event;\r\n\r\n        // Check that mouseout is due to actually LEAVING the element\r\n        var target = e.relatedTarget || e.toElement;\r\n        while (target) {\r\n            if (target === element)\r\n                return;\r\n            target = target.parentNode;\r\n        }\r\n\r\n        cancelEvent(e);\r\n\r\n        // Release all buttons\r\n        if (guac_mouse.currentState.left\r\n            || guac_mouse.currentState.middle\r\n            || guac_mouse.currentState.right) {\r\n\r\n            guac_mouse.currentState.left = false;\r\n            guac_mouse.currentState.middle = false;\r\n            guac_mouse.currentState.right = false;\r\n\r\n            if (guac_mouse.onmouseup)\r\n                guac_mouse.onmouseup(guac_mouse.currentState);\r\n        }\r\n\r\n        // Fire onmouseout event\r\n        if (guac_mouse.onmouseout)\r\n            guac_mouse.onmouseout();\r\n\r\n    }, false);\r\n\r\n    // Override selection on mouse event element.\r\n    element.addEventListener(\"selectstart\", function(e) {\r\n        cancelEvent(e);\r\n    }, false);\r\n\r\n    // Ignore all pending mouse events when touch events are the apparent source\r\n    function ignorePendingMouseEvents() { ignore_mouse = guac_mouse.touchMouseThreshold; }\r\n\r\n    element.addEventListener(\"touchmove\",  ignorePendingMouseEvents, false);\r\n    element.addEventListener(\"touchstart\", ignorePendingMouseEvents, false);\r\n    element.addEventListener(\"touchend\",   ignorePendingMouseEvents, false);\r\n\r\n    // Scroll wheel support\r\n    function mousewheel_handler(e) {\r\n\r\n        // Determine approximate scroll amount (in pixels)\r\n        var delta = e.deltaY || -e.wheelDeltaY || -e.wheelDelta;\r\n\r\n        // If successfully retrieved scroll amount, convert to pixels if not\r\n        // already in pixels\r\n        if (delta) {\r\n\r\n            // Convert to pixels if delta was lines\r\n            if (e.deltaMode === 1)\r\n                delta = e.deltaY * guac_mouse.PIXELS_PER_LINE;\r\n\r\n            // Convert to pixels if delta was pages\r\n            else if (e.deltaMode === 2)\r\n                delta = e.deltaY * guac_mouse.PIXELS_PER_PAGE;\r\n\r\n        }\r\n\r\n        // Otherwise, assume legacy mousewheel event and line scrolling\r\n        else\r\n            delta = e.detail * guac_mouse.PIXELS_PER_LINE;\r\n        \r\n        // Update overall delta\r\n        scroll_delta += delta;\r\n\r\n        // Up\r\n        if (scroll_delta <= -guac_mouse.scrollThreshold) {\r\n\r\n            // Repeatedly click the up button until insufficient delta remains\r\n            do {\r\n\r\n                if (guac_mouse.onmousedown) {\r\n                    guac_mouse.currentState.up = true;\r\n                    guac_mouse.onmousedown(guac_mouse.currentState);\r\n                }\r\n\r\n                if (guac_mouse.onmouseup) {\r\n                    guac_mouse.currentState.up = false;\r\n                    guac_mouse.onmouseup(guac_mouse.currentState);\r\n                }\r\n\r\n                scroll_delta += guac_mouse.scrollThreshold;\r\n\r\n            } while (scroll_delta <= -guac_mouse.scrollThreshold);\r\n\r\n            // Reset delta\r\n            scroll_delta = 0;\r\n\r\n        }\r\n\r\n        // Down\r\n        if (scroll_delta >= guac_mouse.scrollThreshold) {\r\n\r\n            // Repeatedly click the down button until insufficient delta remains\r\n            do {\r\n\r\n                if (guac_mouse.onmousedown) {\r\n                    guac_mouse.currentState.down = true;\r\n                    guac_mouse.onmousedown(guac_mouse.currentState);\r\n                }\r\n\r\n                if (guac_mouse.onmouseup) {\r\n                    guac_mouse.currentState.down = false;\r\n                    guac_mouse.onmouseup(guac_mouse.currentState);\r\n                }\r\n\r\n                scroll_delta -= guac_mouse.scrollThreshold;\r\n\r\n            } while (scroll_delta >= guac_mouse.scrollThreshold);\r\n\r\n            // Reset delta\r\n            scroll_delta = 0;\r\n\r\n        }\r\n\r\n        cancelEvent(e);\r\n\r\n    }\r\n\r\n    element.addEventListener('DOMMouseScroll', mousewheel_handler, false);\r\n    element.addEventListener('mousewheel',     mousewheel_handler, false);\r\n    element.addEventListener('wheel',          mousewheel_handler, false);\r\n\r\n    /**\r\n     * Whether the browser supports CSS3 cursor styling, including hotspot\r\n     * coordinates.\r\n     *\r\n     * @private\r\n     * @type {Boolean}\r\n     */\r\n    var CSS3_CURSOR_SUPPORTED = (function() {\r\n\r\n        var div = document.createElement(\"div\");\r\n\r\n        // If no cursor property at all, then no support\r\n        if (!(\"cursor\" in div.style))\r\n            return false;\r\n\r\n        try {\r\n            // Apply simple 1x1 PNG\r\n            div.style.cursor = \"url(data:image/png;base64,\"\r\n                             + \"iVBORw0KGgoAAAANSUhEUgAAAAEAAAAB\"\r\n                             + \"AQMAAAAl21bKAAAAA1BMVEX///+nxBvI\"\r\n                             + \"AAAACklEQVQI12NgAAAAAgAB4iG8MwAA\"\r\n                             + \"AABJRU5ErkJggg==) 0 0, auto\";\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n\r\n        // Verify cursor property is set to URL with hotspot\r\n        return /\\burl\\([^()]*\\)\\s+0\\s+0\\b/.test(div.style.cursor || \"\");\r\n\r\n    })();\r\n\r\n    /**\r\n     * Changes the local mouse cursor to the given canvas, having the given\r\n     * hotspot coordinates. This affects styling of the element backing this\r\n     * Guacamole.Mouse only, and may fail depending on browser support for\r\n     * setting the mouse cursor.\r\n     * \r\n     * If setting the local cursor is desired, it is up to the implementation\r\n     * to do something else, such as use the software cursor built into\r\n     * Guacamole.Display, if the local cursor cannot be set.\r\n     *\r\n     * @param {HTMLCanvasElement} canvas The cursor image.\r\n     * @param {Number} x The X-coordinate of the cursor hotspot.\r\n     * @param {Number} y The Y-coordinate of the cursor hotspot.\r\n     * @return {Boolean} true if the cursor was successfully set, false if the\r\n     *                   cursor could not be set for any reason.\r\n     */\r\n    this.setCursor = function(canvas, x, y) {\r\n\r\n        // Attempt to set via CSS3 cursor styling\r\n        if (CSS3_CURSOR_SUPPORTED) {\r\n            var dataURL = canvas.toDataURL('image/png');\r\n            element.style.cursor = \"url(\" + dataURL + \") \" + x + \" \" + y + \", auto\";\r\n            return true;\r\n        }\r\n\r\n        // Otherwise, setting cursor failed\r\n        return false;\r\n\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * Simple container for properties describing the state of a mouse.\r\n * \r\n * @constructor\r\n * @param {Number} x The X position of the mouse pointer in pixels.\r\n * @param {Number} y The Y position of the mouse pointer in pixels.\r\n * @param {Boolean} left Whether the left mouse button is pressed. \r\n * @param {Boolean} middle Whether the middle mouse button is pressed. \r\n * @param {Boolean} right Whether the right mouse button is pressed. \r\n * @param {Boolean} up Whether the up mouse button is pressed (the fourth\r\n *                     button, usually part of a scroll wheel). \r\n * @param {Boolean} down Whether the down mouse button is pressed (the fifth\r\n *                       button, usually part of a scroll wheel). \r\n */\r\nGuacamole.Mouse.State = function(x, y, left, middle, right, up, down) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.Mouse.State.\r\n     * @private\r\n     */\r\n    var guac_state = this;\r\n\r\n    /**\r\n     * The current X position of the mouse pointer.\r\n     * @type {Number}\r\n     */\r\n    this.x = x;\r\n\r\n    /**\r\n     * The current Y position of the mouse pointer.\r\n     * @type {Number}\r\n     */\r\n    this.y = y;\r\n\r\n    /**\r\n     * Whether the left mouse button is currently pressed.\r\n     * @type {Boolean}\r\n     */\r\n    this.left = left;\r\n\r\n    /**\r\n     * Whether the middle mouse button is currently pressed.\r\n     * @type {Boolean}\r\n     */\r\n    this.middle = middle;\r\n\r\n    /**\r\n     * Whether the right mouse button is currently pressed.\r\n     * @type {Boolean}\r\n     */\r\n    this.right = right;\r\n\r\n    /**\r\n     * Whether the up mouse button is currently pressed. This is the fourth\r\n     * mouse button, associated with upward scrolling of the mouse scroll\r\n     * wheel.\r\n     * @type {Boolean}\r\n     */\r\n    this.up = up;\r\n\r\n    /**\r\n     * Whether the down mouse button is currently pressed. This is the fifth \r\n     * mouse button, associated with downward scrolling of the mouse scroll\r\n     * wheel.\r\n     * @type {Boolean}\r\n     */\r\n    this.down = down;\r\n\r\n    /**\r\n     * Updates the position represented within this state object by the given\r\n     * element and clientX/clientY coordinates (commonly available within event\r\n     * objects). Position is translated from clientX/clientY (relative to\r\n     * viewport) to element-relative coordinates.\r\n     * \r\n     * @param {Element} element The element the coordinates should be relative\r\n     *                          to.\r\n     * @param {Number} clientX The X coordinate to translate, viewport-relative.\r\n     * @param {Number} clientY The Y coordinate to translate, viewport-relative.\r\n     */\r\n    this.fromClientPosition = function(element, clientX, clientY) {\r\n    \r\n        guac_state.x = clientX - element.offsetLeft;\r\n        guac_state.y = clientY - element.offsetTop;\r\n\r\n        // This is all JUST so we can get the mouse position within the element\r\n        var parent = element.offsetParent;\r\n        while (parent && !(parent === document.body)) {\r\n            guac_state.x -= parent.offsetLeft - parent.scrollLeft;\r\n            guac_state.y -= parent.offsetTop  - parent.scrollTop;\r\n\r\n            parent = parent.offsetParent;\r\n        }\r\n\r\n        // Element ultimately depends on positioning within document body,\r\n        // take document scroll into account. \r\n        if (parent) {\r\n            var documentScrollLeft = document.body.scrollLeft || document.documentElement.scrollLeft;\r\n            var documentScrollTop = document.body.scrollTop || document.documentElement.scrollTop;\r\n\r\n            guac_state.x -= parent.offsetLeft - documentScrollLeft;\r\n            guac_state.y -= parent.offsetTop  - documentScrollTop;\r\n        }\r\n\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * Provides cross-browser relative touch event translation for a given element.\r\n * \r\n * Touch events are translated into mouse events as if the touches occurred\r\n * on a touchpad (drag to push the mouse pointer, tap to click).\r\n * \r\n * @constructor\r\n * @param {Element} element The Element to use to provide touch events.\r\n */\r\nGuacamole.Mouse.Touchpad = function(element) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.Mouse.Touchpad.\r\n     * @private\r\n     */\r\n    var guac_touchpad = this;\r\n\r\n    /**\r\n     * The distance a two-finger touch must move per scrollwheel event, in\r\n     * pixels.\r\n     */\r\n    this.scrollThreshold = 20 * (window.devicePixelRatio || 1);\r\n\r\n    /**\r\n     * The maximum number of milliseconds to wait for a touch to end for the\r\n     * gesture to be considered a click.\r\n     */\r\n    this.clickTimingThreshold = 250;\r\n\r\n    /**\r\n     * The maximum number of pixels to allow a touch to move for the gesture to\r\n     * be considered a click.\r\n     */\r\n    this.clickMoveThreshold = 10 * (window.devicePixelRatio || 1);\r\n\r\n    /**\r\n     * The current mouse state. The properties of this state are updated when\r\n     * mouse events fire. This state object is also passed in as a parameter to\r\n     * the handler of any mouse events.\r\n     * \r\n     * @type {Guacamole.Mouse.State}\r\n     */\r\n    this.currentState = new Guacamole.Mouse.State(\r\n        0, 0, \r\n        false, false, false, false, false\r\n    );\r\n\r\n    /**\r\n     * Fired whenever a mouse button is effectively pressed. This can happen\r\n     * as part of a \"click\" gesture initiated by the user by tapping one\r\n     * or more fingers over the touchpad element, as part of a \"scroll\"\r\n     * gesture initiated by dragging two fingers up or down, etc.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmousedown = null;\r\n\r\n    /**\r\n     * Fired whenever a mouse button is effectively released. This can happen\r\n     * as part of a \"click\" gesture initiated by the user by tapping one\r\n     * or more fingers over the touchpad element, as part of a \"scroll\"\r\n     * gesture initiated by dragging two fingers up or down, etc.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmouseup = null;\r\n\r\n    /**\r\n     * Fired whenever the user moves the mouse by dragging their finger over\r\n     * the touchpad element.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmousemove = null;\r\n\r\n    var touch_count = 0;\r\n    var last_touch_x = 0;\r\n    var last_touch_y = 0;\r\n    var last_touch_time = 0;\r\n    var pixels_moved = 0;\r\n\r\n    var touch_buttons = {\r\n        1: \"left\",\r\n        2: \"right\",\r\n        3: \"middle\"\r\n    };\r\n\r\n    var gesture_in_progress = false;\r\n    var click_release_timeout = null;\r\n\r\n    element.addEventListener(\"touchend\", function(e) {\r\n        \r\n        e.preventDefault();\r\n            \r\n        // If we're handling a gesture AND this is the last touch\r\n        if (gesture_in_progress && e.touches.length === 0) {\r\n            \r\n            var time = new Date().getTime();\r\n\r\n            // Get corresponding mouse button\r\n            var button = touch_buttons[touch_count];\r\n\r\n            // If mouse already down, release anad clear timeout\r\n            if (guac_touchpad.currentState[button]) {\r\n\r\n                // Fire button up event\r\n                guac_touchpad.currentState[button] = false;\r\n                if (guac_touchpad.onmouseup)\r\n                    guac_touchpad.onmouseup(guac_touchpad.currentState);\r\n\r\n                // Clear timeout, if set\r\n                if (click_release_timeout) {\r\n                    window.clearTimeout(click_release_timeout);\r\n                    click_release_timeout = null;\r\n                }\r\n\r\n            }\r\n\r\n            // If single tap detected (based on time and distance)\r\n            if (time - last_touch_time <= guac_touchpad.clickTimingThreshold\r\n                    && pixels_moved < guac_touchpad.clickMoveThreshold) {\r\n\r\n                // Fire button down event\r\n                guac_touchpad.currentState[button] = true;\r\n                if (guac_touchpad.onmousedown)\r\n                    guac_touchpad.onmousedown(guac_touchpad.currentState);\r\n\r\n                // Delay mouse up - mouse up should be canceled if\r\n                // touchstart within timeout.\r\n                click_release_timeout = window.setTimeout(function() {\r\n                    \r\n                    // Fire button up event\r\n                    guac_touchpad.currentState[button] = false;\r\n                    if (guac_touchpad.onmouseup)\r\n                        guac_touchpad.onmouseup(guac_touchpad.currentState);\r\n                    \r\n                    // Gesture now over\r\n                    gesture_in_progress = false;\r\n\r\n                }, guac_touchpad.clickTimingThreshold);\r\n\r\n            }\r\n\r\n            // If we're not waiting to see if this is a click, stop gesture\r\n            if (!click_release_timeout)\r\n                gesture_in_progress = false;\r\n\r\n        }\r\n\r\n    }, false);\r\n\r\n    element.addEventListener(\"touchstart\", function(e) {\r\n\r\n        e.preventDefault();\r\n\r\n        // Track number of touches, but no more than three\r\n        touch_count = Math.min(e.touches.length, 3);\r\n\r\n        // Clear timeout, if set\r\n        if (click_release_timeout) {\r\n            window.clearTimeout(click_release_timeout);\r\n            click_release_timeout = null;\r\n        }\r\n\r\n        // Record initial touch location and time for touch movement\r\n        // and tap gestures\r\n        if (!gesture_in_progress) {\r\n\r\n            // Stop mouse events while touching\r\n            gesture_in_progress = true;\r\n\r\n            // Record touch location and time\r\n            var starting_touch = e.touches[0];\r\n            last_touch_x = starting_touch.clientX;\r\n            last_touch_y = starting_touch.clientY;\r\n            last_touch_time = new Date().getTime();\r\n            pixels_moved = 0;\r\n\r\n        }\r\n\r\n    }, false);\r\n\r\n    element.addEventListener(\"touchmove\", function(e) {\r\n\r\n        e.preventDefault();\r\n\r\n        // Get change in touch location\r\n        var touch = e.touches[0];\r\n        var delta_x = touch.clientX - last_touch_x;\r\n        var delta_y = touch.clientY - last_touch_y;\r\n\r\n        // Track pixels moved\r\n        pixels_moved += Math.abs(delta_x) + Math.abs(delta_y);\r\n\r\n        // If only one touch involved, this is mouse move\r\n        if (touch_count === 1) {\r\n\r\n            // Calculate average velocity in Manhatten pixels per millisecond\r\n            var velocity = pixels_moved / (new Date().getTime() - last_touch_time);\r\n\r\n            // Scale mouse movement relative to velocity\r\n            var scale = 1 + velocity;\r\n\r\n            // Update mouse location\r\n            guac_touchpad.currentState.x += delta_x*scale;\r\n            guac_touchpad.currentState.y += delta_y*scale;\r\n\r\n            // Prevent mouse from leaving screen\r\n\r\n            if (guac_touchpad.currentState.x < 0)\r\n                guac_touchpad.currentState.x = 0;\r\n            else if (guac_touchpad.currentState.x >= element.offsetWidth)\r\n                guac_touchpad.currentState.x = element.offsetWidth - 1;\r\n\r\n            if (guac_touchpad.currentState.y < 0)\r\n                guac_touchpad.currentState.y = 0;\r\n            else if (guac_touchpad.currentState.y >= element.offsetHeight)\r\n                guac_touchpad.currentState.y = element.offsetHeight - 1;\r\n\r\n            // Fire movement event, if defined\r\n            if (guac_touchpad.onmousemove)\r\n                guac_touchpad.onmousemove(guac_touchpad.currentState);\r\n\r\n            // Update touch location\r\n            last_touch_x = touch.clientX;\r\n            last_touch_y = touch.clientY;\r\n\r\n        }\r\n\r\n        // Interpret two-finger swipe as scrollwheel\r\n        else if (touch_count === 2) {\r\n\r\n            // If change in location passes threshold for scroll\r\n            if (Math.abs(delta_y) >= guac_touchpad.scrollThreshold) {\r\n\r\n                // Decide button based on Y movement direction\r\n                var button;\r\n                if (delta_y > 0) button = \"down\";\r\n                else             button = \"up\";\r\n\r\n                // Fire button down event\r\n                guac_touchpad.currentState[button] = true;\r\n                if (guac_touchpad.onmousedown)\r\n                    guac_touchpad.onmousedown(guac_touchpad.currentState);\r\n\r\n                // Fire button up event\r\n                guac_touchpad.currentState[button] = false;\r\n                if (guac_touchpad.onmouseup)\r\n                    guac_touchpad.onmouseup(guac_touchpad.currentState);\r\n\r\n                // Only update touch location after a scroll has been\r\n                // detected\r\n                last_touch_x = touch.clientX;\r\n                last_touch_y = touch.clientY;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }, false);\r\n\r\n};\r\n\r\n/**\r\n * Provides cross-browser absolute touch event translation for a given element.\r\n *\r\n * Touch events are translated into mouse events as if the touches occurred\r\n * on a touchscreen (tapping anywhere on the screen clicks at that point,\r\n * long-press to right-click).\r\n *\r\n * @constructor\r\n * @param {Element} element The Element to use to provide touch events.\r\n */\r\nGuacamole.Mouse.Touchscreen = function(element) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.Mouse.Touchscreen.\r\n     * @private\r\n     */\r\n    var guac_touchscreen = this;\r\n\r\n    /**\r\n     * Whether a gesture is known to be in progress. If false, touch events\r\n     * will be ignored.\r\n     *\r\n     * @private\r\n     */\r\n    var gesture_in_progress = false;\r\n\r\n    /**\r\n     * The start X location of a gesture.\r\n     * @private\r\n     */\r\n    var gesture_start_x = null;\r\n\r\n    /**\r\n     * The start Y location of a gesture.\r\n     * @private\r\n     */\r\n    var gesture_start_y = null;\r\n\r\n    /**\r\n     * The timeout associated with the delayed, cancellable click release.\r\n     *\r\n     * @private\r\n     */\r\n    var click_release_timeout = null;\r\n\r\n    /**\r\n     * The timeout associated with long-press for right click.\r\n     *\r\n     * @private\r\n     */\r\n    var long_press_timeout = null;\r\n\r\n    /**\r\n     * The distance a two-finger touch must move per scrollwheel event, in\r\n     * pixels.\r\n     */\r\n    this.scrollThreshold = 20 * (window.devicePixelRatio || 1);\r\n\r\n    /**\r\n     * The maximum number of milliseconds to wait for a touch to end for the\r\n     * gesture to be considered a click.\r\n     */\r\n    this.clickTimingThreshold = 250;\r\n\r\n    /**\r\n     * The maximum number of pixels to allow a touch to move for the gesture to\r\n     * be considered a click.\r\n     */\r\n    this.clickMoveThreshold = 16 * (window.devicePixelRatio || 1);\r\n\r\n    /**\r\n     * The amount of time a press must be held for long press to be\r\n     * detected.\r\n     */\r\n    this.longPressThreshold = 500;\r\n\r\n    /**\r\n     * The current mouse state. The properties of this state are updated when\r\n     * mouse events fire. This state object is also passed in as a parameter to\r\n     * the handler of any mouse events.\r\n     *\r\n     * @type {Guacamole.Mouse.State}\r\n     */\r\n    this.currentState = new Guacamole.Mouse.State(\r\n        0, 0,\r\n        false, false, false, false, false\r\n    );\r\n\r\n    /**\r\n     * Fired whenever a mouse button is effectively pressed. This can happen\r\n     * as part of a \"mousedown\" gesture initiated by the user by pressing one\r\n     * finger over the touchscreen element, as part of a \"scroll\" gesture\r\n     * initiated by dragging two fingers up or down, etc.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmousedown = null;\r\n\r\n    /**\r\n     * Fired whenever a mouse button is effectively released. This can happen\r\n     * as part of a \"mouseup\" gesture initiated by the user by removing the\r\n     * finger pressed against the touchscreen element, or as part of a \"scroll\"\r\n     * gesture initiated by dragging two fingers up or down, etc.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmouseup = null;\r\n\r\n    /**\r\n     * Fired whenever the user moves the mouse by dragging their finger over\r\n     * the touchscreen element. Note that unlike Guacamole.Mouse.Touchpad,\r\n     * dragging a finger over the touchscreen element will always cause\r\n     * the mouse button to be effectively down, as if clicking-and-dragging.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.Mouse.State} state The current mouse state.\r\n     */\r\n\tthis.onmousemove = null;\r\n\r\n    /**\r\n     * Presses the given mouse button, if it isn't already pressed. Valid\r\n     * button values are \"left\", \"middle\", \"right\", \"up\", and \"down\".\r\n     *\r\n     * @private\r\n     * @param {String} button The mouse button to press.\r\n     */\r\n    function press_button(button) {\r\n        if (!guac_touchscreen.currentState[button]) {\r\n            guac_touchscreen.currentState[button] = true;\r\n            if (guac_touchscreen.onmousedown)\r\n                guac_touchscreen.onmousedown(guac_touchscreen.currentState);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Releases the given mouse button, if it isn't already released. Valid\r\n     * button values are \"left\", \"middle\", \"right\", \"up\", and \"down\".\r\n     *\r\n     * @private\r\n     * @param {String} button The mouse button to release.\r\n     */\r\n    function release_button(button) {\r\n        if (guac_touchscreen.currentState[button]) {\r\n            guac_touchscreen.currentState[button] = false;\r\n            if (guac_touchscreen.onmouseup)\r\n                guac_touchscreen.onmouseup(guac_touchscreen.currentState);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clicks (presses and releases) the given mouse button. Valid button\r\n     * values are \"left\", \"middle\", \"right\", \"up\", and \"down\".\r\n     *\r\n     * @private\r\n     * @param {String} button The mouse button to click.\r\n     */\r\n    function click_button(button) {\r\n        press_button(button);\r\n        release_button(button);\r\n    }\r\n\r\n    /**\r\n     * Moves the mouse to the given coordinates. These coordinates must be\r\n     * relative to the browser window, as they will be translated based on\r\n     * the touch event target's location within the browser window.\r\n     *\r\n     * @private\r\n     * @param {Number} x The X coordinate of the mouse pointer.\r\n     * @param {Number} y The Y coordinate of the mouse pointer.\r\n     */\r\n    function move_mouse(x, y) {\r\n        guac_touchscreen.currentState.fromClientPosition(element, x, y);\r\n        if (guac_touchscreen.onmousemove)\r\n            guac_touchscreen.onmousemove(guac_touchscreen.currentState);\r\n    }\r\n\r\n    /**\r\n     * Returns whether the given touch event exceeds the movement threshold for\r\n     * clicking, based on where the touch gesture began.\r\n     *\r\n     * @private\r\n     * @param {TouchEvent} e The touch event to check.\r\n     * @return {Boolean} true if the movement threshold is exceeded, false\r\n     *                   otherwise.\r\n     */\r\n    function finger_moved(e) {\r\n        var touch = e.touches[0] || e.changedTouches[0];\r\n        var delta_x = touch.clientX - gesture_start_x;\r\n        var delta_y = touch.clientY - gesture_start_y;\r\n        return Math.sqrt(delta_x*delta_x + delta_y*delta_y) >= guac_touchscreen.clickMoveThreshold;\r\n    }\r\n\r\n    /**\r\n     * Begins a new gesture at the location of the first touch in the given\r\n     * touch event.\r\n     * \r\n     * @private\r\n     * @param {TouchEvent} e The touch event beginning this new gesture.\r\n     */\r\n    function begin_gesture(e) {\r\n        var touch = e.touches[0];\r\n        gesture_in_progress = true;\r\n        gesture_start_x = touch.clientX;\r\n        gesture_start_y = touch.clientY;\r\n    }\r\n\r\n    /**\r\n     * End the current gesture entirely. Wait for all touches to be done before\r\n     * resuming gesture detection.\r\n     * \r\n     * @private\r\n     */\r\n    function end_gesture() {\r\n        window.clearTimeout(click_release_timeout);\r\n        window.clearTimeout(long_press_timeout);\r\n        gesture_in_progress = false;\r\n    }\r\n\r\n    element.addEventListener(\"touchend\", function(e) {\r\n\r\n        // Do not handle if no gesture\r\n        if (!gesture_in_progress)\r\n            return;\r\n\r\n        // Ignore if more than one touch\r\n        if (e.touches.length !== 0 || e.changedTouches.length !== 1) {\r\n            end_gesture();\r\n            return;\r\n        }\r\n\r\n        // Long-press, if any, is over\r\n        window.clearTimeout(long_press_timeout);\r\n\r\n        // Always release mouse button if pressed\r\n        release_button(\"left\");\r\n\r\n        // If finger hasn't moved enough to cancel the click\r\n        if (!finger_moved(e)) {\r\n\r\n            e.preventDefault();\r\n\r\n            // If not yet pressed, press and start delay release\r\n            if (!guac_touchscreen.currentState.left) {\r\n\r\n                var touch = e.changedTouches[0];\r\n                move_mouse(touch.clientX, touch.clientY);\r\n                press_button(\"left\");\r\n\r\n                // Release button after a delay, if not canceled\r\n                click_release_timeout = window.setTimeout(function() {\r\n                    release_button(\"left\");\r\n                    end_gesture();\r\n                }, guac_touchscreen.clickTimingThreshold);\r\n\r\n            }\r\n\r\n        } // end if finger not moved\r\n\r\n    }, false);\r\n\r\n    element.addEventListener(\"touchstart\", function(e) {\r\n\r\n        // Ignore if more than one touch\r\n        if (e.touches.length !== 1) {\r\n            end_gesture();\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        // New touch begins a new gesture\r\n        begin_gesture(e);\r\n\r\n        // Keep button pressed if tap after left click\r\n        window.clearTimeout(click_release_timeout);\r\n\r\n        // Click right button if this turns into a long-press\r\n        long_press_timeout = window.setTimeout(function() {\r\n            var touch = e.touches[0];\r\n            move_mouse(touch.clientX, touch.clientY);\r\n            click_button(\"right\");\r\n            end_gesture();\r\n        }, guac_touchscreen.longPressThreshold);\r\n\r\n    }, false);\r\n\r\n    element.addEventListener(\"touchmove\", function(e) {\r\n\r\n        // Do not handle if no gesture\r\n        if (!gesture_in_progress)\r\n            return;\r\n\r\n        // Cancel long press if finger moved\r\n        if (finger_moved(e))\r\n            window.clearTimeout(long_press_timeout);\r\n\r\n        // Ignore if more than one touch\r\n        if (e.touches.length !== 1) {\r\n            end_gesture();\r\n            return;\r\n        }\r\n\r\n        // Update mouse position if dragging\r\n        if (guac_touchscreen.currentState.left) {\r\n\r\n            e.preventDefault();\r\n\r\n            // Update state\r\n            var touch = e.touches[0];\r\n            move_mouse(touch.clientX, touch.clientY);\r\n\r\n        }\r\n\r\n    }, false);\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\n/**\r\n * The namespace used by the Guacamole JavaScript API. Absolutely all classes\r\n * defined by the Guacamole JavaScript API will be within this namespace.\r\n *\r\n * @namespace\r\n */\r\nvar Guacamole = Guacamole || {};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * An object used by the Guacamole client to house arbitrarily-many named\r\n * input and output streams.\r\n * \r\n * @constructor\r\n * @param {Guacamole.Client} client\r\n *     The client owning this object.\r\n *\r\n * @param {Number} index\r\n *     The index of this object.\r\n */\r\nGuacamole.Object = function guacamoleObject(client, index) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.Object.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.Object}\r\n     */\r\n    var guacObject = this;\r\n\r\n    /**\r\n     * Map of stream name to corresponding queue of callbacks. The queue of\r\n     * callbacks is guaranteed to be in order of request.\r\n     *\r\n     * @private\r\n     * @type {Object.<String, Function[]>}\r\n     */\r\n    var bodyCallbacks = {};\r\n\r\n    /**\r\n     * Removes and returns the callback at the head of the callback queue for\r\n     * the stream having the given name. If no such callbacks exist, null is\r\n     * returned.\r\n     *\r\n     * @private\r\n     * @param {String} name\r\n     *     The name of the stream to retrieve a callback for.\r\n     *\r\n     * @returns {Function}\r\n     *     The next callback associated with the stream having the given name,\r\n     *     or null if no such callback exists.\r\n     */\r\n    var dequeueBodyCallback = function dequeueBodyCallback(name) {\r\n\r\n        // If no callbacks defined, simply return null\r\n        var callbacks = bodyCallbacks[name];\r\n        if (!callbacks)\r\n            return null;\r\n\r\n        // Otherwise, pull off first callback, deleting the queue if empty\r\n        var callback = callbacks.shift();\r\n        if (callbacks.length === 0)\r\n            delete bodyCallbacks[name];\r\n\r\n        // Return found callback\r\n        return callback;\r\n\r\n    };\r\n\r\n    /**\r\n     * Adds the given callback to the tail of the callback queue for the stream\r\n     * having the given name.\r\n     *\r\n     * @private\r\n     * @param {String} name\r\n     *     The name of the stream to associate with the given callback.\r\n     *\r\n     * @param {Function} callback\r\n     *     The callback to add to the queue of the stream with the given name.\r\n     */\r\n    var enqueueBodyCallback = function enqueueBodyCallback(name, callback) {\r\n\r\n        // Get callback queue by name, creating first if necessary\r\n        var callbacks = bodyCallbacks[name];\r\n        if (!callbacks) {\r\n            callbacks = [];\r\n            bodyCallbacks[name] = callbacks;\r\n        }\r\n\r\n        // Add callback to end of queue\r\n        callbacks.push(callback);\r\n\r\n    };\r\n\r\n    /**\r\n     * The index of this object.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.index = index;\r\n\r\n    /**\r\n     * Called when this object receives the body of a requested input stream.\r\n     * By default, all objects will invoke the callbacks provided to their\r\n     * requestInputStream() functions based on the name of the stream\r\n     * requested. This behavior can be overridden by specifying a different\r\n     * handler here.\r\n     *\r\n     * @event\r\n     * @param {Guacamole.InputStream} inputStream\r\n     *     The input stream of the received body.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the data being received.\r\n     *\r\n     * @param {String} name\r\n     *     The name of the stream whose body has been received.\r\n     */\r\n    this.onbody = function defaultBodyHandler(inputStream, mimetype, name) {\r\n\r\n        // Call queued callback for the received body, if any\r\n        var callback = dequeueBodyCallback(name);\r\n        if (callback)\r\n            callback(inputStream, mimetype);\r\n\r\n    };\r\n\r\n    /**\r\n     * Called when this object is being undefined. Once undefined, no further\r\n     * communication involving this object may occur.\r\n     * \r\n     * @event\r\n     */\r\n    this.onundefine = null;\r\n\r\n    /**\r\n     * Requests read access to the input stream having the given name. If\r\n     * successful, a new input stream will be created.\r\n     *\r\n     * @param {String} name\r\n     *     The name of the input stream to request.\r\n     *\r\n     * @param {Function} [bodyCallback]\r\n     *     The callback to invoke when the body of the requested input stream\r\n     *     is received. This callback will be provided a Guacamole.InputStream\r\n     *     and its mimetype as its two only arguments. If the onbody handler of\r\n     *     this object is overridden, this callback will not be invoked.\r\n     */\r\n    this.requestInputStream = function requestInputStream(name, bodyCallback) {\r\n\r\n        // Queue body callback if provided\r\n        if (bodyCallback)\r\n            enqueueBodyCallback(name, bodyCallback);\r\n\r\n        // Send request for input stream\r\n        client.requestObjectInputStream(guacObject.index, name);\r\n\r\n    };\r\n\r\n    /**\r\n     * Creates a new output stream associated with this object and having the\r\n     * given mimetype and name. The legality of a mimetype and name is dictated\r\n     * by the object itself.\r\n     *\r\n     * @param {String} mimetype\r\n     *     The mimetype of the data which will be sent to the output stream.\r\n     *\r\n     * @param {String} name\r\n     *     The defined name of an output stream within this object.\r\n     *\r\n     * @returns {Guacamole.OutputStream}\r\n     *     An output stream which will write blobs to the named output stream\r\n     *     of this object.\r\n     */\r\n    this.createOutputStream = function createOutputStream(mimetype, name) {\r\n        return client.createObjectOutputStream(guacObject.index, mimetype, name);\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * The reserved name denoting the root stream of any object. The contents of\r\n * the root stream MUST be a JSON map of stream name to mimetype.\r\n *\r\n * @constant\r\n * @type {String}\r\n */\r\nGuacamole.Object.ROOT_STREAM = '/';\r\n\r\n/**\r\n * The mimetype of a stream containing JSON which maps available stream names\r\n * to their corresponding mimetype. The root stream of a Guacamole.Object MUST\r\n * have this mimetype.\r\n *\r\n * @constant\r\n * @type {String}\r\n */\r\nGuacamole.Object.STREAM_INDEX_MIMETYPE = 'application/vnd.glyptodon.guacamole.stream-index+json';\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Dynamic on-screen keyboard. Given the layout object for an on-screen\r\n * keyboard, this object will construct a clickable on-screen keyboard with its\r\n * own key events.\r\n *\r\n * @constructor\r\n * @param {Guacamole.OnScreenKeyboard.Layout} layout\r\n *     The layout of the on-screen keyboard to display.\r\n */\r\nGuacamole.OnScreenKeyboard = function(layout) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.OnScreenKeyboard.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.OnScreenKeyboard}\r\n     */\r\n    var osk = this;\r\n\r\n    /**\r\n     * Map of currently-set modifiers to the keysym associated with their\r\n     * original press. When the modifier is cleared, this keysym must be\r\n     * released.\r\n     *\r\n     * @private\r\n     * @type {Object.<String, Number>}\r\n     */\r\n    var modifierKeysyms = {};\r\n\r\n    /**\r\n     * Map of all key names to their current pressed states. If a key is not\r\n     * pressed, it may not be in this map at all, but all pressed keys will\r\n     * have a corresponding mapping to true.\r\n     *\r\n     * @private\r\n     * @type {Object.<String, Boolean>}\r\n     */\r\n    var pressed = {};\r\n\r\n    /**\r\n     * All scalable elements which are part of the on-screen keyboard. Each\r\n     * scalable element is carefully controlled to ensure the interface layout\r\n     * and sizing remains constant, even on browsers that would otherwise\r\n     * experience rounding error due to unit conversions.\r\n     *\r\n     * @private\r\n     * @type {ScaledElement[]}\r\n     */\r\n    var scaledElements = [];\r\n\r\n    /**\r\n     * Adds a CSS class to an element.\r\n     * \r\n     * @private\r\n     * @function\r\n     * @param {Element} element\r\n     *     The element to add a class to.\r\n     *\r\n     * @param {String} classname\r\n     *     The name of the class to add.\r\n     */\r\n    var addClass = function addClass(element, classname) {\r\n\r\n        // If classList supported, use that\r\n        if (element.classList)\r\n            element.classList.add(classname);\r\n\r\n        // Otherwise, simply append the class\r\n        else\r\n            element.className += \" \" + classname;\r\n\r\n    };\r\n\r\n    /**\r\n     * Removes a CSS class from an element.\r\n     * \r\n     * @private\r\n     * @function\r\n     * @param {Element} element\r\n     *     The element to remove a class from.\r\n     *\r\n     * @param {String} classname\r\n     *     The name of the class to remove.\r\n     */\r\n    var removeClass = function removeClass(element, classname) {\r\n\r\n        // If classList supported, use that\r\n        if (element.classList)\r\n            element.classList.remove(classname);\r\n\r\n        // Otherwise, manually filter out classes with given name\r\n        else {\r\n            element.className = element.className.replace(/([^ ]+)[ ]*/g,\r\n                function removeMatchingClasses(match, testClassname) {\r\n\r\n                    // If same class, remove\r\n                    if (testClassname === classname)\r\n                        return \"\";\r\n\r\n                    // Otherwise, allow\r\n                    return match;\r\n                    \r\n                }\r\n            );\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Counter of mouse events to ignore. This decremented by mousemove, and\r\n     * while non-zero, mouse events will have no effect.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var ignoreMouse = 0;\r\n\r\n    /**\r\n     * Ignores all pending mouse events when touch events are the apparent\r\n     * source. Mouse events are ignored until at least touchMouseThreshold\r\n     * mouse events occur without corresponding touch events.\r\n     *\r\n     * @private\r\n     */\r\n    var ignorePendingMouseEvents = function ignorePendingMouseEvents() {\r\n        ignoreMouse = osk.touchMouseThreshold;\r\n    };\r\n\r\n    /**\r\n     * An element whose dimensions are maintained according to an arbitrary\r\n     * scale. The conversion factor for these arbitrary units to pixels is\r\n     * provided later via a call to scale().\r\n     *\r\n     * @private\r\n     * @constructor\r\n     * @param {Element} element\r\n     *     The element whose scale should be maintained.\r\n     *\r\n     * @param {Number} width\r\n     *     The width of the element, in arbitrary units, relative to other\r\n     *     ScaledElements.\r\n     *\r\n     * @param {Number} height\r\n     *     The height of the element, in arbitrary units, relative to other\r\n     *     ScaledElements.\r\n     *     \r\n     * @param {Boolean} [scaleFont=false]\r\n     *     Whether the line height and font size should be scaled as well.\r\n     */\r\n    var ScaledElement = function ScaledElement(element, width, height, scaleFont) {\r\n\r\n        /**\r\n         * The width of this ScaledElement, in arbitrary units, relative to\r\n         * other ScaledElements.\r\n         *\r\n         * @type {Number}\r\n         */\r\n         this.width = width;\r\n\r\n        /**\r\n         * The height of this ScaledElement, in arbitrary units, relative to\r\n         * other ScaledElements.\r\n         *\r\n         * @type {Number}\r\n         */\r\n         this.height = height;\r\n \r\n        /**\r\n         * Resizes the associated element, updating its dimensions according to\r\n         * the given pixels per unit.\r\n         *\r\n         * @param {Number} pixels\r\n         *     The number of pixels to assign per arbitrary unit.\r\n         */\r\n        this.scale = function(pixels) {\r\n\r\n            // Scale element width/height\r\n            element.style.width  = (width  * pixels) + \"px\";\r\n            element.style.height = (height * pixels) + \"px\";\r\n\r\n            // Scale font, if requested\r\n            if (scaleFont) {\r\n                element.style.lineHeight = (height * pixels) + \"px\";\r\n                element.style.fontSize   = pixels + \"px\";\r\n            }\r\n\r\n        };\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns whether all modifiers having the given names are currently\r\n     * active.\r\n     *\r\n     * @private\r\n     * @param {String[]} names\r\n     *     The names of all modifiers to test.\r\n     *\r\n     * @returns {Boolean}\r\n     *     true if all specified modifiers are pressed, false otherwise.\r\n     */\r\n    var modifiersPressed = function modifiersPressed(names) {\r\n\r\n        // If any required modifiers are not pressed, return false\r\n        for (var i=0; i < names.length; i++) {\r\n\r\n            // Test whether current modifier is pressed\r\n            var name = names[i];\r\n            if (!(name in modifierKeysyms))\r\n                return false;\r\n\r\n        }\r\n\r\n        // Otherwise, all required modifiers are pressed\r\n        return true;\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns the single matching Key object associated with the key of the\r\n     * given name, where that Key object's requirements (such as pressed\r\n     * modifiers) are all currently satisfied.\r\n     *\r\n     * @private\r\n     * @param {String} keyName\r\n     *     The name of the key to retrieve.\r\n     *\r\n     * @returns {Guacamole.OnScreenKeyboard.Key}\r\n     *     The Key object associated with the given name, where that object's\r\n     *     requirements are all currently satisfied, or null if no such Key\r\n     *     can be found.\r\n     */\r\n    var getActiveKey = function getActiveKey(keyName) {\r\n\r\n        // Get key array for given name\r\n        var keys = osk.keys[keyName];\r\n        if (!keys)\r\n            return null;\r\n\r\n        // Find last matching key\r\n        for (var i = keys.length - 1; i >= 0; i--) {\r\n\r\n            // Get candidate key\r\n            var candidate = keys[i];\r\n\r\n            // If all required modifiers are pressed, use that key\r\n            if (modifiersPressed(candidate.requires))\r\n                return candidate;\r\n\r\n        }\r\n\r\n        // No valid key\r\n        return null;\r\n\r\n    };\r\n\r\n    /**\r\n     * Presses the key having the given name, updating the associated key\r\n     * element with the \"guac-keyboard-pressed\" CSS class. If the key is\r\n     * already pressed, this function has no effect.\r\n     *\r\n     * @private\r\n     * @param {String} keyName\r\n     *     The name of the key to press.\r\n     *\r\n     * @param {String} keyElement\r\n     *     The element associated with the given key.\r\n     */\r\n    var press = function press(keyName, keyElement) {\r\n\r\n        // Press key if not yet pressed\r\n        if (!pressed[keyName]) {\r\n\r\n            addClass(keyElement, \"guac-keyboard-pressed\");\r\n\r\n            // Get current key based on modifier state\r\n            var key = getActiveKey(keyName);\r\n\r\n            // Update modifier state\r\n            if (key.modifier) {\r\n\r\n                // Construct classname for modifier\r\n                var modifierClass = \"guac-keyboard-modifier-\" + getCSSName(key.modifier);\r\n\r\n                // Retrieve originally-pressed keysym, if modifier was already pressed\r\n                var originalKeysym = modifierKeysyms[key.modifier];\r\n\r\n                // Activate modifier if not pressed\r\n                if (!originalKeysym) {\r\n                    \r\n                    addClass(keyboard, modifierClass);\r\n                    modifierKeysyms[key.modifier] = key.keysym;\r\n                    \r\n                    // Send key event\r\n                    if (osk.onkeydown)\r\n                        osk.onkeydown(key.keysym);\r\n\r\n                }\r\n\r\n                // Deactivate if not pressed\r\n                else {\r\n\r\n                    removeClass(keyboard, modifierClass);\r\n                    delete modifierKeysyms[key.modifier];\r\n                    \r\n                    // Send key event\r\n                    if (osk.onkeyup)\r\n                        osk.onkeyup(originalKeysym);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // If not modifier, send key event now\r\n            else if (osk.onkeydown)\r\n                osk.onkeydown(key.keysym);\r\n\r\n            // Mark key as pressed\r\n            pressed[keyName] = true;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Releases the key having the given name, removing the\r\n     * \"guac-keyboard-pressed\" CSS class from the associated element. If the\r\n     * key is already released, this function has no effect.\r\n     *\r\n     * @private\r\n     * @param {String} keyName\r\n     *     The name of the key to release.\r\n     *\r\n     * @param {String} keyElement\r\n     *     The element associated with the given key.\r\n     */\r\n    var release = function release(keyName, keyElement) {\r\n\r\n        // Release key if currently pressed\r\n        if (pressed[keyName]) {\r\n\r\n            removeClass(keyElement, \"guac-keyboard-pressed\");\r\n\r\n            // Get current key based on modifier state\r\n            var key = getActiveKey(keyName);\r\n\r\n            // Send key event if not a modifier key\r\n            if (!key.modifier && osk.onkeyup)\r\n                osk.onkeyup(key.keysym);\r\n\r\n            // Mark key as released\r\n            pressed[keyName] = false;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    // Create keyboard\r\n    var keyboard = document.createElement(\"div\");\r\n    keyboard.className = \"guac-keyboard\";\r\n\r\n    // Do not allow selection or mouse movement to propagate/register.\r\n    keyboard.onselectstart =\r\n    keyboard.onmousemove   =\r\n    keyboard.onmouseup     =\r\n    keyboard.onmousedown   = function handleMouseEvents(e) {\r\n\r\n        // If ignoring events, decrement counter\r\n        if (ignoreMouse)\r\n            ignoreMouse--;\r\n\r\n        e.stopPropagation();\r\n        return false;\r\n\r\n    };\r\n\r\n    /**\r\n     * The number of mousemove events to require before re-enabling mouse\r\n     * event handling after receiving a touch event.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.touchMouseThreshold = 3;\r\n\r\n    /**\r\n     * Fired whenever the user presses a key on this Guacamole.OnScreenKeyboard.\r\n     * \r\n     * @event\r\n     * @param {Number} keysym The keysym of the key being pressed.\r\n     */\r\n    this.onkeydown = null;\r\n\r\n    /**\r\n     * Fired whenever the user releases a key on this Guacamole.OnScreenKeyboard.\r\n     * \r\n     * @event\r\n     * @param {Number} keysym The keysym of the key being released.\r\n     */\r\n    this.onkeyup = null;\r\n\r\n    /**\r\n     * The keyboard layout provided at time of construction.\r\n     *\r\n     * @type {Guacamole.OnScreenKeyboard.Layout}\r\n     */\r\n    this.layout = new Guacamole.OnScreenKeyboard.Layout(layout);\r\n\r\n    /**\r\n     * Returns the element containing the entire on-screen keyboard.\r\n     * @returns {Element} The element containing the entire on-screen keyboard.\r\n     */\r\n    this.getElement = function() {\r\n        return keyboard;\r\n    };\r\n\r\n    /**\r\n     * Resizes all elements within this Guacamole.OnScreenKeyboard such that\r\n     * the width is close to but does not exceed the specified width. The\r\n     * height of the keyboard is determined based on the width.\r\n     * \r\n     * @param {Number} width The width to resize this Guacamole.OnScreenKeyboard\r\n     *                       to, in pixels.\r\n     */\r\n    this.resize = function(width) {\r\n\r\n        // Get pixel size of a unit\r\n        var unit = Math.floor(width * 10 / osk.layout.width) / 10;\r\n\r\n        // Resize all scaled elements\r\n        for (var i=0; i<scaledElements.length; i++) {\r\n            var scaledElement = scaledElements[i];\r\n            scaledElement.scale(unit);\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Given the name of a key and its corresponding definition, which may be\r\n     * an array of keys objects, a number (keysym), a string (key title), or a\r\n     * single key object, returns an array of key objects, deriving any missing\r\n     * properties as needed, and ensuring the key name is defined.\r\n     *\r\n     * @private\r\n     * @param {String} name\r\n     *     The name of the key being coerced into an array of Key objects.\r\n     *\r\n     * @param {Number|String|Guacamole.OnScreenKeyboard.Key|Guacamole.OnScreenKeyboard.Key[]} object\r\n     *     The object defining the behavior of the key having the given name,\r\n     *     which may be the title of the key (a string), the keysym (a number),\r\n     *     a single Key object, or an array of Key objects.\r\n     *     \r\n     * @returns {Guacamole.OnScreenKeyboard.Key[]}\r\n     *     An array of all keys associated with the given name.\r\n     */\r\n    var asKeyArray = function asKeyArray(name, object) {\r\n\r\n        // If already an array, just coerce into a true Key[] \r\n        if (object instanceof Array) {\r\n            var keys = [];\r\n            for (var i=0; i < object.length; i++) {\r\n                keys.push(new Guacamole.OnScreenKeyboard.Key(object[i], name));\r\n            }\r\n            return keys;\r\n        }\r\n\r\n        // Derive key object from keysym if that's all we have\r\n        if (typeof object === 'number') {\r\n            return [new Guacamole.OnScreenKeyboard.Key({\r\n                name   : name,\r\n                keysym : object\r\n            })];\r\n        }\r\n\r\n        // Derive key object from title if that's all we have\r\n        if (typeof object === 'string') {\r\n            return [new Guacamole.OnScreenKeyboard.Key({\r\n                name  : name,\r\n                title : object\r\n            })];\r\n        }\r\n\r\n        // Otherwise, assume it's already a key object, just not an array\r\n        return [new Guacamole.OnScreenKeyboard.Key(object, name)];\r\n\r\n    };\r\n\r\n    /**\r\n     * Converts the rather forgiving key mapping allowed by\r\n     * Guacamole.OnScreenKeyboard.Layout into a rigorous mapping of key name\r\n     * to key definition, where the key definition is always an array of Key\r\n     * objects.\r\n     *\r\n     * @private\r\n     * @param {Object.<String, Number|String|Guacamole.OnScreenKeyboard.Key|Guacamole.OnScreenKeyboard.Key[]>} keys\r\n     *     A mapping of key name to key definition, where the key definition is\r\n     *     the title of the key (a string), the keysym (a number), a single\r\n     *     Key object, or an array of Key objects.\r\n     *\r\n     * @returns {Object.<String, Guacamole.OnScreenKeyboard.Key[]>}\r\n     *     A more-predictable mapping of key name to key definition, where the\r\n     *     key definition is always simply an array of Key objects.\r\n     */\r\n    var getKeys = function getKeys(keys) {\r\n\r\n        var keyArrays = {};\r\n\r\n        // Coerce all keys into individual key arrays\r\n        for (var name in layout.keys) {\r\n            keyArrays[name] = asKeyArray(name, keys[name]);\r\n        }\r\n\r\n        return keyArrays;\r\n\r\n    };\r\n\r\n    /**\r\n     * Map of all key names to their corresponding set of keys. Each key name\r\n     * may correspond to multiple keys due to the effect of modifiers.\r\n     *\r\n     * @type {Object.<String, Guacamole.OnScreenKeyboard.Key[]>}\r\n     */\r\n    this.keys = getKeys(layout.keys);\r\n\r\n    /**\r\n     * Given an arbitrary string representing the name of some component of the\r\n     * on-screen keyboard, returns a string formatted for use as a CSS class\r\n     * name. The result will be lowercase. Word boundaries previously denoted\r\n     * by CamelCase will be replaced by individual hyphens, as will all\r\n     * contiguous non-alphanumeric characters.\r\n     *\r\n     * @private\r\n     * @param {String} name\r\n     *     An arbitrary string representing the name of some component of the\r\n     *     on-screen keyboard.\r\n     *\r\n     * @returns {String}\r\n     *     A string formatted for use as a CSS class name.\r\n     */\r\n    var getCSSName = function getCSSName(name) {\r\n\r\n        // Convert name from possibly-CamelCase to hyphenated lowercase\r\n        var cssName = name\r\n               .replace(/([a-z])([A-Z])/g, '$1-$2')\r\n               .replace(/[^A-Za-z0-9]+/g, '-')\r\n               .toLowerCase();\r\n\r\n        return cssName;\r\n\r\n    };\r\n\r\n    /**\r\n     * Appends DOM elements to the given element as dictated by the layout\r\n     * structure object provided. If a name is provided, an additional CSS\r\n     * class, prepended with \"guac-keyboard-\", will be added to the top-level\r\n     * element.\r\n     * \r\n     * If the layout structure object is an array, all elements within that\r\n     * array will be recursively appended as children of a group, and the\r\n     * top-level element will be given the CSS class \"guac-keyboard-group\".\r\n     *\r\n     * If the layout structure object is an object, all properties within that\r\n     * object will be recursively appended as children of a group, and the\r\n     * top-level element will be given the CSS class \"guac-keyboard-group\". The\r\n     * name of each property will be applied as the name of each child object\r\n     * for the sake of CSS. Each property will be added in sorted order.\r\n     *\r\n     * If the layout structure object is a string, the key having that name\r\n     * will be appended. The key will be given the CSS class\r\n     * \"guac-keyboard-key\" and \"guac-keyboard-key-NAME\", where NAME is the name\r\n     * of the key. If the name of the key is a single character, this will\r\n     * first be transformed into the C-style hexadecimal literal for the\r\n     * Unicode codepoint of that character. For example, the key \"A\" would\r\n     * become \"guac-keyboard-key-0x41\".\r\n     * \r\n     * If the layout structure object is a number, a gap of that size will be\r\n     * inserted. The gap will be given the CSS class \"guac-keyboard-gap\", and\r\n     * will be scaled according to the same size units as each key.\r\n     *\r\n     * @private\r\n     * @param {Element} element\r\n     *     The element to append elements to.\r\n     *\r\n     * @param {Array|Object|String|Number} object\r\n     *     The layout structure object to use when constructing the elements to\r\n     *     append.\r\n     *\r\n     * @param {String} [name]\r\n     *     The name of the top-level element being appended, if any.\r\n     */\r\n    var appendElements = function appendElements(element, object, name) {\r\n\r\n        var i;\r\n\r\n        // Create div which will become the group or key\r\n        var div = document.createElement('div');\r\n\r\n        // Add class based on name, if name given\r\n        if (name)\r\n            addClass(div, 'guac-keyboard-' + getCSSName(name));\r\n\r\n        // If an array, append each element\r\n        if (object instanceof Array) {\r\n\r\n            // Add group class\r\n            addClass(div, 'guac-keyboard-group');\r\n\r\n            // Append all elements of array\r\n            for (i=0; i < object.length; i++)\r\n                appendElements(div, object[i]);\r\n\r\n        }\r\n\r\n        // If an object, append each property value\r\n        else if (object instanceof Object) {\r\n\r\n            // Add group class\r\n            addClass(div, 'guac-keyboard-group');\r\n\r\n            // Append all children, sorted by name\r\n            var names = Object.keys(object).sort();\r\n            for (i=0; i < names.length; i++) {\r\n                var name = names[i];\r\n                appendElements(div, object[name], name);\r\n            }\r\n\r\n        }\r\n\r\n        // If a number, create as a gap \r\n        else if (typeof object === 'number') {\r\n\r\n            // Add gap class\r\n            addClass(div, 'guac-keyboard-gap');\r\n\r\n            // Maintain scale\r\n            scaledElements.push(new ScaledElement(div, object, object));\r\n\r\n        }\r\n\r\n        // If a string, create as a key\r\n        else if (typeof object === 'string') {\r\n\r\n            // If key name is only one character, use codepoint for name\r\n            var keyName = object;\r\n            if (keyName.length === 1)\r\n                keyName = '0x' + keyName.charCodeAt(0).toString(16);\r\n\r\n            // Add key container class\r\n            addClass(div, 'guac-keyboard-key-container');\r\n\r\n            // Create key element which will contain all possible caps\r\n            var keyElement = document.createElement('div');\r\n            keyElement.className = 'guac-keyboard-key '\r\n                                 + 'guac-keyboard-key-' + getCSSName(keyName);\r\n\r\n            // Add all associated keys as caps within DOM\r\n            var keys = osk.keys[object];\r\n            if (keys) {\r\n                for (i=0; i < keys.length; i++) {\r\n\r\n                    // Get current key\r\n                    var key = keys[i];\r\n\r\n                    // Create cap element for key\r\n                    var capElement = document.createElement('div');\r\n                    capElement.className   = 'guac-keyboard-cap';\r\n                    capElement.textContent = key.title;\r\n\r\n                    // Add classes for any requirements\r\n                    for (var j=0; j < key.requires.length; j++) {\r\n                        var requirement = key.requires[j];\r\n                        addClass(capElement, 'guac-keyboard-requires-' + getCSSName(requirement));\r\n                        addClass(keyElement, 'guac-keyboard-uses-'     + getCSSName(requirement));\r\n                    }\r\n\r\n                    // Add cap to key within DOM\r\n                    keyElement.appendChild(capElement);\r\n\r\n                }\r\n            }\r\n\r\n            // Add key to DOM, maintain scale\r\n            div.appendChild(keyElement);\r\n            scaledElements.push(new ScaledElement(div, osk.layout.keyWidths[object] || 1, 1, true));\r\n\r\n            /**\r\n             * Handles a touch event which results in the pressing of an OSK\r\n             * key. Touch events will result in mouse events being ignored for\r\n             * touchMouseThreshold events.\r\n             *\r\n             * @private\r\n             * @param {TouchEvent} e\r\n             *     The touch event being handled.\r\n             */\r\n            var touchPress = function touchPress(e) {\r\n                e.preventDefault();\r\n                ignoreMouse = osk.touchMouseThreshold;\r\n                press(object, keyElement);\r\n            };\r\n\r\n            /**\r\n             * Handles a touch event which results in the release of an OSK\r\n             * key. Touch events will result in mouse events being ignored for\r\n             * touchMouseThreshold events.\r\n             *\r\n             * @private\r\n             * @param {TouchEvent} e\r\n             *     The touch event being handled.\r\n             */\r\n            var touchRelease = function touchRelease(e) {\r\n                e.preventDefault();\r\n                ignoreMouse = osk.touchMouseThreshold;\r\n                release(object, keyElement);\r\n            };\r\n\r\n            /**\r\n             * Handles a mouse event which results in the pressing of an OSK\r\n             * key. If mouse events are currently being ignored, this handler\r\n             * does nothing.\r\n             *\r\n             * @private\r\n             * @param {MouseEvent} e\r\n             *     The touch event being handled.\r\n             */\r\n            var mousePress = function mousePress(e) {\r\n                e.preventDefault();\r\n                if (ignoreMouse === 0)\r\n                    press(object, keyElement);\r\n            };\r\n\r\n            /**\r\n             * Handles a mouse event which results in the release of an OSK\r\n             * key. If mouse events are currently being ignored, this handler\r\n             * does nothing.\r\n             *\r\n             * @private\r\n             * @param {MouseEvent} e\r\n             *     The touch event being handled.\r\n             */\r\n            var mouseRelease = function mouseRelease(e) {\r\n                e.preventDefault();\r\n                if (ignoreMouse === 0)\r\n                    release(object, keyElement);\r\n            };\r\n\r\n            // Handle touch events on key\r\n            keyElement.addEventListener(\"touchstart\", touchPress,   true);\r\n            keyElement.addEventListener(\"touchend\",   touchRelease, true);\r\n\r\n            // Handle mouse events on key\r\n            keyElement.addEventListener(\"mousedown\", mousePress,   true);\r\n            keyElement.addEventListener(\"mouseup\",   mouseRelease, true);\r\n            keyElement.addEventListener(\"mouseout\",  mouseRelease, true);\r\n\r\n        } // end if object is key name\r\n\r\n        // Add newly-created group/key\r\n        element.appendChild(div);\r\n\r\n    };\r\n\r\n    // Create keyboard layout in DOM\r\n    appendElements(keyboard, layout.layout);\r\n\r\n};\r\n\r\n/**\r\n * Represents an entire on-screen keyboard layout, including all available\r\n * keys, their behaviors, and their relative position and sizing.\r\n *\r\n * @constructor\r\n * @param {Guacamole.OnScreenKeyboard.Layout|Object} template\r\n *     The object whose identically-named properties will be used to initialize\r\n *     the properties of this layout.\r\n */\r\nGuacamole.OnScreenKeyboard.Layout = function(template) {\r\n\r\n    /**\r\n     * The language of keyboard layout, such as \"en_US\". This property is for\r\n     * informational purposes only, but it is recommend to conform to the\r\n     * [language code]_[country code] format.\r\n     *\r\n     * @type {String}\r\n     */\r\n    this.language = template.language;\r\n\r\n    /**\r\n     * The type of keyboard layout, such as \"qwerty\". This property is for\r\n     * informational purposes only, and does not conform to any standard.\r\n     *\r\n     * @type {String}\r\n     */\r\n    this.type = template.type;\r\n\r\n    /**\r\n     * Map of key name to corresponding keysym, title, or key object. If only\r\n     * the keysym or title is provided, the key object will be created\r\n     * implicitly. In all cases, the name property of the key object will be\r\n     * taken from the name given in the mapping.\r\n     *\r\n     * @type {Object.<String, Number|String|Guacamole.OnScreenKeyboard.Key|Guacamole.OnScreenKeyboard.Key[]>}\r\n     */\r\n    this.keys = template.keys;\r\n\r\n    /**\r\n     * Arbitrarily nested, arbitrarily grouped key names. The contents of the\r\n     * layout will be traversed to produce an identically-nested grouping of\r\n     * keys in the DOM tree. All strings will be transformed into their\r\n     * corresponding sets of keys, while all objects and arrays will be\r\n     * transformed into named groups and anonymous groups respectively. Any\r\n     * numbers present will be transformed into gaps of that size, scaled\r\n     * according to the same units as each key.\r\n     *\r\n     * @type {Object}\r\n     */\r\n    this.layout = template.layout;\r\n\r\n    /**\r\n     * The width of the entire keyboard, in arbitrary units. The width of each\r\n     * key is relative to this width, as both width values are assumed to be in\r\n     * the same units. The conversion factor between these units and pixels is\r\n     * derived later via a call to resize() on the Guacamole.OnScreenKeyboard.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.width = template.width;\r\n\r\n    /**\r\n     * The width of each key, in arbitrary units, relative to other keys in\r\n     * this layout. The true pixel size of each key will be determined by the\r\n     * overall size of the keyboard. If not defined here, the width of each\r\n     * key will default to 1.\r\n     *\r\n     * @type {Object.<String, Number>}\r\n     */\r\n    this.keyWidths = template.keyWidths || {};\r\n\r\n};\r\n\r\n/**\r\n * Represents a single key, or a single possible behavior of a key. Each key\r\n * on the on-screen keyboard must have at least one associated\r\n * Guacamole.OnScreenKeyboard.Key, whether that key is explicitly defined or\r\n * implied, and may have multiple Guacamole.OnScreenKeyboard.Key if behavior\r\n * depends on modifier states.\r\n *\r\n * @constructor\r\n * @param {Guacamole.OnScreenKeyboard.Key|Object} template\r\n *     The object whose identically-named properties will be used to initialize\r\n *     the properties of this key.\r\n *     \r\n * @param {String} [name]\r\n *     The name to use instead of any name provided within the template, if\r\n *     any. If omitted, the name within the template will be used, assuming the\r\n *     template contains a name.\r\n */\r\nGuacamole.OnScreenKeyboard.Key = function(template, name) {\r\n\r\n    /**\r\n     * The unique name identifying this key within the keyboard layout.\r\n     *\r\n     * @type {String}\r\n     */\r\n    this.name = name || template.name;\r\n\r\n    /**\r\n     * The human-readable title that will be displayed to the user within the\r\n     * key. If not provided, this will be derived from the key name.\r\n     *\r\n     * @type {String}\r\n     */\r\n    this.title = template.title || this.name;\r\n\r\n    /**\r\n     * The keysym to be pressed/released when this key is pressed/released. If\r\n     * not provided, this will be derived from the title if the title is a\r\n     * single character.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.keysym = template.keysym || (function deriveKeysym(title) {\r\n\r\n        // Do not derive keysym if title is not exactly one character\r\n        if (!title || title.length !== 1)\r\n            return null;\r\n\r\n        // For characters between U+0000 and U+00FF, the keysym is the codepoint\r\n        var charCode = title.charCodeAt(0);\r\n        if (charCode >= 0x0000 && charCode <= 0x00FF)\r\n            return charCode;\r\n\r\n        // For characters between U+0100 and U+10FFFF, the keysym is the codepoint or'd with 0x01000000\r\n        if (charCode >= 0x0100 && charCode <= 0x10FFFF)\r\n            return 0x01000000 | charCode;\r\n\r\n        // Unable to derive keysym\r\n        return null;\r\n\r\n    })(this.title);\r\n\r\n    /**\r\n     * The name of the modifier set when the key is pressed and cleared when\r\n     * this key is released, if any. The names of modifiers are distinct from\r\n     * the names of keys; both the \"RightShift\" and \"LeftShift\" keys may set\r\n     * the \"shift\" modifier, for example. By default, the key will affect no\r\n     * modifiers.\r\n     * \r\n     * @type {String}\r\n     */\r\n    this.modifier = template.modifier;\r\n\r\n    /**\r\n     * An array containing the names of each modifier required for this key to\r\n     * have an effect. For example, a lowercase letter may require nothing,\r\n     * while an uppercase letter would require \"shift\", assuming the Shift key\r\n     * is named \"shift\" within the layout. By default, the key will require\r\n     * no modifiers.\r\n     *\r\n     * @type {String[]}\r\n     */\r\n    this.requires = template.requires || [];\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Abstract stream which can receive data.\r\n * \r\n * @constructor\r\n * @param {Guacamole.Client} client The client owning this stream.\r\n * @param {Number} index The index of this stream.\r\n */\r\nGuacamole.OutputStream = function(client, index) {\r\n\r\n    /**\r\n     * Reference to this stream.\r\n     * @private\r\n     */\r\n    var guac_stream = this;\r\n\r\n    /**\r\n     * The index of this stream.\r\n     * @type {Number}\r\n     */\r\n    this.index = index;\r\n\r\n    /**\r\n     * Fired whenever an acknowledgement is received from the server, indicating\r\n     * that a stream operation has completed, or an error has occurred.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Status} status The status of the operation.\r\n     */\r\n    this.onack = null;\r\n\r\n    /**\r\n     * Writes the given base64-encoded data to this stream as a blob.\r\n     * \r\n     * @param {String} data The base64-encoded data to send.\r\n     */\r\n    this.sendBlob = function(data) {\r\n        client.sendBlob(guac_stream.index, data);\r\n    };\r\n\r\n    /**\r\n     * Closes this stream.\r\n     */\r\n    this.sendEnd = function() {\r\n        client.endStream(guac_stream.index);\r\n    };\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Simple Guacamole protocol parser that invokes an oninstruction event when\r\n * full instructions are available from data received via receive().\r\n * \r\n * @constructor\r\n */\r\nGuacamole.Parser = function() {\r\n\r\n    /**\r\n     * Reference to this parser.\r\n     * @private\r\n     */\r\n    var parser = this;\r\n\r\n    /**\r\n     * Current buffer of received data. This buffer grows until a full\r\n     * element is available. After a full element is available, that element\r\n     * is flushed into the element buffer.\r\n     * \r\n     * @private\r\n     */\r\n    var buffer = \"\";\r\n\r\n    /**\r\n     * Buffer of all received, complete elements. After an entire instruction\r\n     * is read, this buffer is flushed, and a new instruction begins.\r\n     * \r\n     * @private\r\n     */\r\n    var element_buffer = [];\r\n\r\n    // The location of the last element's terminator\r\n    var element_end = -1;\r\n\r\n    // Where to start the next length search or the next element\r\n    var start_index = 0;\r\n\r\n    /**\r\n     * Appends the given instruction data packet to the internal buffer of\r\n     * this Guacamole.Parser, executing all completed instructions at\r\n     * the beginning of this buffer, if any.\r\n     *\r\n     * @param {String} packet The instruction data to receive.\r\n     */\r\n    this.receive = function(packet) {\r\n\r\n        // Truncate buffer as necessary\r\n        if (start_index > 4096 && element_end >= start_index) {\r\n\r\n            buffer = buffer.substring(start_index);\r\n\r\n            // Reset parse relative to truncation\r\n            element_end -= start_index;\r\n            start_index = 0;\r\n\r\n        }\r\n\r\n        // Append data to buffer\r\n        buffer += packet;\r\n\r\n        // While search is within currently received data\r\n        while (element_end < buffer.length) {\r\n\r\n            // If we are waiting for element data\r\n            if (element_end >= start_index) {\r\n\r\n                // We now have enough data for the element. Parse.\r\n                var element = buffer.substring(start_index, element_end);\r\n                var terminator = buffer.substring(element_end, element_end+1);\r\n\r\n                // Add element to array\r\n                element_buffer.push(element);\r\n\r\n                // If last element, handle instruction\r\n                if (terminator == \";\") {\r\n\r\n                    // Get opcode\r\n                    var opcode = element_buffer.shift();\r\n\r\n                    // Call instruction handler.\r\n                    if (parser.oninstruction != null)\r\n                        parser.oninstruction(opcode, element_buffer);\r\n\r\n                    // Clear elements\r\n                    element_buffer.length = 0;\r\n\r\n                }\r\n                else if (terminator != ',')\r\n                    throw new Error(\"Illegal terminator.\");\r\n\r\n                // Start searching for length at character after\r\n                // element terminator\r\n                start_index = element_end + 1;\r\n\r\n            }\r\n\r\n            // Search for end of length\r\n            var length_end = buffer.indexOf(\".\", start_index);\r\n            if (length_end != -1) {\r\n\r\n                // Parse length\r\n                var length = parseInt(buffer.substring(element_end+1, length_end));\r\n                if (isNaN(length))\r\n                    throw new Error(\"Non-numeric character in element length.\");\r\n\r\n                // Calculate start of element\r\n                start_index = length_end + 1;\r\n\r\n                // Calculate location of element terminator\r\n                element_end = start_index + length;\r\n\r\n            }\r\n            \r\n            // If no period yet, continue search when more data\r\n            // is received\r\n            else {\r\n                start_index = buffer.length;\r\n                break;\r\n            }\r\n\r\n        } // end parse loop\r\n\r\n    };\r\n\r\n    /**\r\n     * Fired once for every complete Guacamole instruction received, in order.\r\n     * \r\n     * @event\r\n     * @param {String} opcode The Guacamole instruction opcode.\r\n     * @param {Array} parameters The parameters provided for the instruction,\r\n     *                           if any.\r\n     */\r\n    this.oninstruction = null;\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A description of the format of raw PCM audio, such as that used by\r\n * Guacamole.RawAudioPlayer and Guacamole.RawAudioRecorder. This object\r\n * describes the number of bytes per sample, the number of channels, and the\r\n * overall sample rate.\r\n *\r\n * @constructor\r\n * @param {Guacamole.RawAudioFormat|Object} template\r\n *     The object whose properties should be copied into the corresponding\r\n *     properties of the new Guacamole.RawAudioFormat.\r\n */\r\nGuacamole.RawAudioFormat = function RawAudioFormat(template) {\r\n\r\n    /**\r\n     * The number of bytes in each sample of audio data. This value is\r\n     * independent of the number of channels.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.bytesPerSample = template.bytesPerSample;\r\n\r\n    /**\r\n     * The number of audio channels (ie: 1 for mono, 2 for stereo).\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.channels = template.channels;\r\n\r\n    /**\r\n     * The number of samples per second, per channel.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.rate = template.rate;\r\n\r\n};\r\n\r\n/**\r\n * Parses the given mimetype, returning a new Guacamole.RawAudioFormat\r\n * which describes the type of raw audio data represented by that mimetype. If\r\n * the mimetype is not a supported raw audio data mimetype, null is returned.\r\n *\r\n * @param {String} mimetype\r\n *     The audio mimetype to parse.\r\n *\r\n * @returns {Guacamole.RawAudioFormat}\r\n *     A new Guacamole.RawAudioFormat which describes the type of raw\r\n *     audio data represented by the given mimetype, or null if the given\r\n *     mimetype is not supported.\r\n */\r\nGuacamole.RawAudioFormat.parse = function parseFormat(mimetype) {\r\n\r\n    var bytesPerSample;\r\n\r\n    // Rate is absolutely required - if null is still present later, the\r\n    // mimetype must not be supported\r\n    var rate = null;\r\n\r\n    // Default for both \"audio/L8\" and \"audio/L16\" is one channel\r\n    var channels = 1;\r\n\r\n    // \"audio/L8\" has one byte per sample\r\n    if (mimetype.substring(0, 9) === 'audio/L8;') {\r\n        mimetype = mimetype.substring(9);\r\n        bytesPerSample = 1;\r\n    }\r\n\r\n    // \"audio/L16\" has two bytes per sample\r\n    else if (mimetype.substring(0, 10) === 'audio/L16;') {\r\n        mimetype = mimetype.substring(10);\r\n        bytesPerSample = 2;\r\n    }\r\n\r\n    // All other types are unsupported\r\n    else\r\n        return null;\r\n\r\n    // Parse all parameters\r\n    var parameters = mimetype.split(',');\r\n    for (var i = 0; i < parameters.length; i++) {\r\n\r\n        var parameter = parameters[i];\r\n\r\n        // All parameters must have an equals sign separating name from value\r\n        var equals = parameter.indexOf('=');\r\n        if (equals === -1)\r\n            return null;\r\n\r\n        // Parse name and value from parameter string\r\n        var name  = parameter.substring(0, equals);\r\n        var value = parameter.substring(equals+1);\r\n\r\n        // Handle each supported parameter\r\n        switch (name) {\r\n\r\n            // Number of audio channels\r\n            case 'channels':\r\n                channels = parseInt(value);\r\n                break;\r\n\r\n            // Sample rate\r\n            case 'rate':\r\n                rate = parseInt(value);\r\n                break;\r\n\r\n            // All other parameters are unsupported\r\n            default:\r\n                return null;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    // The rate parameter is required\r\n    if (rate === null)\r\n        return null;\r\n\r\n    // Return parsed format details\r\n    return new Guacamole.RawAudioFormat({\r\n        bytesPerSample : bytesPerSample,\r\n        channels       : channels,\r\n        rate           : rate\r\n    });\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A recording of a Guacamole session. Given a {@link Guacamole.Tunnel}, the\r\n * Guacamole.SessionRecording automatically handles incoming Guacamole\r\n * instructions, storing them for playback. Playback of the recording may be\r\n * controlled through function calls to the Guacamole.SessionRecording, even\r\n * while the recording has not yet finished being created or downloaded.\r\n *\r\n * @constructor\r\n * @param {Guacamole.Tunnel} tunnel\r\n *     The Guacamole.Tunnel from which the instructions of the recording should\r\n *     be read.\r\n */\r\nGuacamole.SessionRecording = function SessionRecording(tunnel) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.SessionRecording.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.SessionRecording}\r\n     */\r\n    var recording = this;\r\n\r\n    /**\r\n     * The minimum number of characters which must have been read between\r\n     * keyframes.\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type {Number}\r\n     */\r\n    var KEYFRAME_CHAR_INTERVAL = 16384;\r\n\r\n    /**\r\n     * The minimum number of milliseconds which must elapse between keyframes.\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type {Number}\r\n     */\r\n    var KEYFRAME_TIME_INTERVAL = 5000;\r\n\r\n    /**\r\n     * The maximum amount of time to spend in any particular seek operation\r\n     * before returning control to the main thread, in milliseconds. Seek\r\n     * operations exceeding this amount of time will proceed asynchronously.\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type {Number}\r\n     */\r\n    var MAXIMUM_SEEK_TIME = 5;\r\n\r\n    /**\r\n     * All frames parsed from the provided tunnel.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.SessionRecording._Frame[]}\r\n     */\r\n    var frames = [];\r\n\r\n    /**\r\n     * All instructions which have been read since the last frame was added to\r\n     * the frames array.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.SessionRecording._Frame.Instruction[]}\r\n     */\r\n    var instructions = [];\r\n\r\n    /**\r\n     * The approximate number of characters which have been read from the\r\n     * provided tunnel since the last frame was flagged for use as a keyframe.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var charactersSinceLastKeyframe = 0;\r\n\r\n    /**\r\n     * The timestamp of the last frame which was flagged for use as a keyframe.\r\n     * If no timestamp has yet been flagged, this will be 0.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var lastKeyframeTimestamp = 0;\r\n\r\n    /**\r\n     * Tunnel which feeds arbitrary instructions to the client used by this\r\n     * Guacamole.SessionRecording for playback of the session recording.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.SessionRecording._PlaybackTunnel}\r\n     */\r\n    var playbackTunnel = new Guacamole.SessionRecording._PlaybackTunnel();\r\n\r\n    /**\r\n     * Guacamole.Client instance used for visible playback of the session\r\n     * recording.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.Client}\r\n     */\r\n    var playbackClient = new Guacamole.Client(playbackTunnel);\r\n\r\n    /**\r\n     * The current frame rendered within the playback client. If no frame is\r\n     * yet rendered, this will be -1.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var currentFrame = -1;\r\n\r\n    /**\r\n     * The timestamp of the frame when playback began, in milliseconds. If\r\n     * playback is not in progress, this will be null.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var startVideoTimestamp = null;\r\n\r\n    /**\r\n     * The real-world timestamp when playback began, in milliseconds. If\r\n     * playback is not in progress, this will be null.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var startRealTimestamp = null;\r\n\r\n    /**\r\n     * The ID of the timeout which will continue the in-progress seek\r\n     * operation. If no seek operation is in progress, the ID stored here (if\r\n     * any) will not be valid.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var seekTimeout = null;\r\n\r\n    // Start playback client connected\r\n    playbackClient.connect();\r\n\r\n    // Hide cursor unless mouse position is received\r\n    playbackClient.getDisplay().showCursor(false);\r\n\r\n    // Read instructions from provided tunnel, extracting each frame\r\n    tunnel.oninstruction = function handleInstruction(opcode, args) {\r\n\r\n        // Store opcode and arguments for received instruction\r\n        var instruction = new Guacamole.SessionRecording._Frame.Instruction(opcode, args.slice());\r\n        instructions.push(instruction);\r\n        charactersSinceLastKeyframe += instruction.getSize();\r\n\r\n        // Once a sync is received, store all instructions since the last\r\n        // frame as a new frame\r\n        if (opcode === 'sync') {\r\n\r\n            // Parse frame timestamp from sync instruction\r\n            var timestamp = parseInt(args[0]);\r\n\r\n            // Add a new frame containing the instructions read since last frame\r\n            var frame = new Guacamole.SessionRecording._Frame(timestamp, instructions);\r\n            frames.push(frame);\r\n\r\n            // This frame should eventually become a keyframe if enough data\r\n            // has been processed and enough recording time has elapsed, or if\r\n            // this is the absolute first frame\r\n            if (frames.length === 1 || (charactersSinceLastKeyframe >= KEYFRAME_CHAR_INTERVAL\r\n                    && timestamp - lastKeyframeTimestamp >= KEYFRAME_TIME_INTERVAL)) {\r\n                frame.keyframe = true;\r\n                lastKeyframeTimestamp = timestamp;\r\n                charactersSinceLastKeyframe = 0;\r\n            }\r\n\r\n            // Clear set of instructions in preparation for next frame\r\n            instructions = [];\r\n\r\n            // Notify that additional content is available\r\n            if (recording.onprogress)\r\n                recording.onprogress(recording.getDuration());\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Converts the given absolute timestamp to a timestamp which is relative\r\n     * to the first frame in the recording.\r\n     *\r\n     * @private\r\n     * @param {Number} timestamp\r\n     *     The timestamp to convert to a relative timestamp.\r\n     *\r\n     * @returns {Number}\r\n     *     The difference in milliseconds between the given timestamp and the\r\n     *     first frame of the recording, or zero if no frames yet exist.\r\n     */\r\n    var toRelativeTimestamp = function toRelativeTimestamp(timestamp) {\r\n\r\n        // If no frames yet exist, all timestamps are zero\r\n        if (frames.length === 0)\r\n            return 0;\r\n\r\n        // Calculate timestamp relative to first frame\r\n        return timestamp - frames[0].timestamp;\r\n\r\n    };\r\n\r\n    /**\r\n     * Searches through the given region of frames for the frame having a\r\n     * relative timestamp closest to the timestamp given.\r\n     *\r\n     * @private\r\n     * @param {Number} minIndex\r\n     *     The index of the first frame in the region (the frame having the\r\n     *     smallest timestamp).\r\n     *\r\n     * @param {Number} maxIndex\r\n     *     The index of the last frame in the region (the frame having the\r\n     *     largest timestamp).\r\n     *\r\n     * @param {Number} timestamp\r\n     *     The relative timestamp to search for, where zero denotes the first\r\n     *     frame in the recording.\r\n     *\r\n     * @returns {Number}\r\n     *     The index of the frame having a relative timestamp closest to the\r\n     *     given value.\r\n     */\r\n    var findFrame = function findFrame(minIndex, maxIndex, timestamp) {\r\n\r\n        // Do not search if the region contains only one element\r\n        if (minIndex === maxIndex)\r\n            return minIndex;\r\n\r\n        // Split search region into two halves\r\n        var midIndex = Math.floor((minIndex + maxIndex) / 2);\r\n        var midTimestamp = toRelativeTimestamp(frames[midIndex].timestamp);\r\n\r\n        // If timestamp is within lesser half, search again within that half\r\n        if (timestamp < midTimestamp && midIndex > minIndex)\r\n            return findFrame(minIndex, midIndex - 1, timestamp);\r\n\r\n        // If timestamp is within greater half, search again within that half\r\n        if (timestamp > midTimestamp && midIndex < maxIndex)\r\n            return findFrame(midIndex + 1, maxIndex, timestamp);\r\n\r\n        // Otherwise, we lucked out and found a frame with exactly the\r\n        // desired timestamp\r\n        return midIndex;\r\n\r\n    };\r\n\r\n    /**\r\n     * Replays the instructions associated with the given frame, sending those\r\n     * instructions to the playback client.\r\n     *\r\n     * @private\r\n     * @param {Number} index\r\n     *     The index of the frame within the frames array which should be\r\n     *     replayed.\r\n     */\r\n    var replayFrame = function replayFrame(index) {\r\n\r\n        var frame = frames[index];\r\n\r\n        // Replay all instructions within the retrieved frame\r\n        for (var i = 0; i < frame.instructions.length; i++) {\r\n            var instruction = frame.instructions[i];\r\n            playbackTunnel.receiveInstruction(instruction.opcode, instruction.args);\r\n        }\r\n\r\n        // Store client state if frame is flagged as a keyframe\r\n        if (frame.keyframe && !frame.clientState) {\r\n            playbackClient.exportState(function storeClientState(state) {\r\n                frame.clientState = state;\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Moves the playback position to the given frame, resetting the state of\r\n     * the playback client and replaying frames as necessary. The seek\r\n     * operation will proceed asynchronously. If a seek operation is already in\r\n     * progress, that seek is first aborted. The progress of the seek operation\r\n     * can be observed through the onseek handler and the provided callback.\r\n     *\r\n     * @private\r\n     * @param {Number} index\r\n     *     The index of the frame which should become the new playback\r\n     *     position.\r\n     *\r\n     * @param {function} callback\r\n     *     The callback to invoke once the seek operation has completed.\r\n     *\r\n     * @param {Number} [delay=0]\r\n     *     The number of milliseconds that the seek operation should be\r\n     *     scheduled to take.\r\n     */\r\n    var seekToFrame = function seekToFrame(index, callback, delay) {\r\n\r\n        // Abort any in-progress seek\r\n        abortSeek();\r\n\r\n        // Replay frames asynchronously\r\n        seekTimeout = window.setTimeout(function continueSeek() {\r\n\r\n            var startIndex;\r\n\r\n            // Back up until startIndex represents current state\r\n            for (startIndex = index; startIndex >= 0; startIndex--) {\r\n\r\n                var frame = frames[startIndex];\r\n\r\n                // If we've reached the current frame, startIndex represents\r\n                // current state by definition\r\n                if (startIndex === currentFrame)\r\n                    break;\r\n\r\n                // If frame has associated absolute state, make that frame the\r\n                // current state\r\n                if (frame.clientState) {\r\n                    playbackClient.importState(frame.clientState);\r\n                    break;\r\n                }\r\n\r\n            }\r\n\r\n            // Advance to frame index after current state\r\n            startIndex++;\r\n\r\n            var startTime = new Date().getTime();\r\n\r\n            // Replay any applicable incremental frames\r\n            for (; startIndex <= index; startIndex++) {\r\n\r\n                // Stop seeking if the operation is taking too long\r\n                var currentTime = new Date().getTime();\r\n                if (currentTime - startTime >= MAXIMUM_SEEK_TIME)\r\n                    break;\r\n\r\n                replayFrame(startIndex);\r\n            }\r\n\r\n            // Current frame is now at requested index\r\n            currentFrame = startIndex - 1;\r\n\r\n            // Notify of changes in position\r\n            if (recording.onseek)\r\n                recording.onseek(recording.getPosition());\r\n\r\n            // If the seek operation has not yet completed, schedule continuation\r\n            if (currentFrame !== index)\r\n                seekToFrame(index, callback,\r\n                    Math.max(delay - (new Date().getTime() - startTime), 0));\r\n\r\n            // Notify that the requested seek has completed\r\n            else\r\n                callback();\r\n\r\n        }, delay || 0);\r\n\r\n    };\r\n\r\n    /**\r\n     * Aborts the seek operation currently in progress, if any. If no seek\r\n     * operation is in progress, this function has no effect.\r\n     *\r\n     * @private\r\n     */\r\n    var abortSeek = function abortSeek() {\r\n        window.clearTimeout(seekTimeout);\r\n    };\r\n\r\n    /**\r\n     * Advances playback to the next frame in the frames array and schedules\r\n     * playback of the frame following that frame based on their associated\r\n     * timestamps. If no frames exist after the next frame, playback is paused.\r\n     *\r\n     * @private\r\n     */\r\n    var continuePlayback = function continuePlayback() {\r\n\r\n        // If frames remain after advancing, schedule next frame\r\n        if (currentFrame + 1 < frames.length) {\r\n\r\n            // Pull the upcoming frame\r\n            var next = frames[currentFrame + 1];\r\n\r\n            // Calculate the real timestamp corresponding to when the next\r\n            // frame begins\r\n            var nextRealTimestamp = next.timestamp - startVideoTimestamp + startRealTimestamp;\r\n\r\n            // Calculate the relative delay between the current time and\r\n            // the next frame start\r\n            var delay = Math.max(nextRealTimestamp - new Date().getTime(), 0);\r\n\r\n            // Advance to next frame after enough time has elapsed\r\n            seekToFrame(currentFrame + 1, function frameDelayElapsed() {\r\n                continuePlayback();\r\n            }, delay);\r\n\r\n        }\r\n\r\n        // Otherwise stop playback\r\n        else\r\n            recording.pause();\r\n\r\n    };\r\n\r\n    /**\r\n     * Fired when new frames have become available while the recording is\r\n     * being downloaded.\r\n     *\r\n     * @event\r\n     * @param {Number} duration\r\n     *     The new duration of the recording, in milliseconds.\r\n     */\r\n    this.onprogress = null;\r\n\r\n    /**\r\n     * Fired whenever playback of the recording has started.\r\n     *\r\n     * @event\r\n     */\r\n    this.onplay = null;\r\n\r\n    /**\r\n     * Fired whenever playback of the recording has been paused. This may\r\n     * happen when playback is explicitly paused with a call to pause(), or\r\n     * when playback is implicitly paused due to reaching the end of the\r\n     * recording.\r\n     *\r\n     * @event\r\n     */\r\n    this.onpause = null;\r\n\r\n    /**\r\n     * Fired whenever the playback position within the recording changes.\r\n     *\r\n     * @event\r\n     * @param {Number} position\r\n     *     The new position within the recording, in milliseconds.\r\n     */\r\n    this.onseek = null;\r\n\r\n    /**\r\n     * Connects the underlying tunnel, beginning download of the Guacamole\r\n     * session. Playback of the Guacamole session cannot occur until at least\r\n     * one frame worth of instructions has been downloaded.\r\n     *\r\n     * @param {String} data\r\n     *     The data to send to the tunnel when connecting.\r\n     */\r\n    this.connect = function connect(data) {\r\n        tunnel.connect(data);\r\n    };\r\n\r\n    /**\r\n     * Disconnects the underlying tunnel, stopping further download of the\r\n     * Guacamole session.\r\n     */\r\n    this.disconnect = function disconnect() {\r\n        tunnel.disconnect();\r\n    };\r\n\r\n    /**\r\n     * Returns the underlying display of the Guacamole.Client used by this\r\n     * Guacamole.SessionRecording for playback. The display contains an Element\r\n     * which can be added to the DOM, causing the display (and thus playback of\r\n     * the recording) to become visible.\r\n     *\r\n     * @return {Guacamole.Display}\r\n     *     The underlying display of the Guacamole.Client used by this\r\n     *     Guacamole.SessionRecording for playback.\r\n     */\r\n    this.getDisplay = function getDisplay() {\r\n        return playbackClient.getDisplay();\r\n    };\r\n\r\n    /**\r\n     * Returns whether playback is currently in progress.\r\n     *\r\n     * @returns {Boolean}\r\n     *     true if playback is currently in progress, false otherwise.\r\n     */\r\n    this.isPlaying = function isPlaying() {\r\n        return !!startVideoTimestamp;\r\n    };\r\n\r\n    /**\r\n     * Returns the current playback position within the recording, in\r\n     * milliseconds, where zero is the start of the recording.\r\n     *\r\n     * @returns {Number}\r\n     *     The current playback position within the recording, in milliseconds.\r\n     */\r\n    this.getPosition = function getPosition() {\r\n\r\n        // Position is simply zero if playback has not started at all\r\n        if (currentFrame === -1)\r\n            return 0;\r\n\r\n        // Return current position as a millisecond timestamp relative to the\r\n        // start of the recording\r\n        return toRelativeTimestamp(frames[currentFrame].timestamp);\r\n\r\n    };\r\n\r\n    /**\r\n     * Returns the duration of this recording, in milliseconds. If the\r\n     * recording is still being downloaded, this value will gradually increase.\r\n     *\r\n     * @returns {Number}\r\n     *     The duration of this recording, in milliseconds.\r\n     */\r\n    this.getDuration = function getDuration() {\r\n\r\n        // If no frames yet exist, duration is zero\r\n        if (frames.length === 0)\r\n            return 0;\r\n\r\n        // Recording duration is simply the timestamp of the last frame\r\n        return toRelativeTimestamp(frames[frames.length - 1].timestamp);\r\n\r\n    };\r\n\r\n    /**\r\n     * Begins continuous playback of the recording downloaded thus far.\r\n     * Playback of the recording will continue until pause() is invoked or\r\n     * until no further frames exist. Playback is initially paused when a\r\n     * Guacamole.SessionRecording is created, and must be explicitly started\r\n     * through a call to this function. If playback is already in progress,\r\n     * this function has no effect. If a seek operation is in progress,\r\n     * playback resumes at the current position, and the seek is aborted as if\r\n     * completed.\r\n     */\r\n    this.play = function play() {\r\n\r\n        // If playback is not already in progress and frames remain,\r\n        // begin playback\r\n        if (!recording.isPlaying() && currentFrame + 1 < frames.length) {\r\n\r\n            // Notify that playback is starting\r\n            if (recording.onplay)\r\n                recording.onplay();\r\n\r\n            // Store timestamp of playback start for relative scheduling of\r\n            // future frames\r\n            var next = frames[currentFrame + 1];\r\n            startVideoTimestamp = next.timestamp;\r\n            startRealTimestamp = new Date().getTime();\r\n\r\n            // Begin playback of video\r\n            continuePlayback();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Seeks to the given position within the recording. If the recording is\r\n     * currently being played back, playback will continue after the seek is\r\n     * performed. If the recording is currently paused, playback will be\r\n     * paused after the seek is performed. If a seek operation is already in\r\n     * progress, that seek is first aborted. The seek operation will proceed\r\n     * asynchronously.\r\n     *\r\n     * @param {Number} position\r\n     *     The position within the recording to seek to, in milliseconds.\r\n     *\r\n     * @param {function} [callback]\r\n     *     The callback to invoke once the seek operation has completed.\r\n     */\r\n    this.seek = function seek(position, callback) {\r\n\r\n        // Do not seek if no frames exist\r\n        if (frames.length === 0)\r\n            return;\r\n\r\n        // Pause playback, preserving playback state\r\n        var originallyPlaying = recording.isPlaying();\r\n        recording.pause();\r\n\r\n        // Perform seek\r\n        seekToFrame(findFrame(0, frames.length - 1, position), function restorePlaybackState() {\r\n\r\n            // Restore playback state\r\n            if (originallyPlaying)\r\n                recording.play();\r\n\r\n            // Notify that seek has completed\r\n            if (callback)\r\n                callback();\r\n\r\n        });\r\n\r\n    };\r\n\r\n    /**\r\n     * Pauses playback of the recording, if playback is currently in progress.\r\n     * If playback is not in progress, this function has no effect. If a seek\r\n     * operation is in progress, the seek is aborted. Playback is initially\r\n     * paused when a Guacamole.SessionRecording is created, and must be\r\n     * explicitly started through a call to play().\r\n     */\r\n    this.pause = function pause() {\r\n\r\n        // Abort any in-progress seek / playback\r\n        abortSeek();\r\n\r\n        // Stop playback only if playback is in progress\r\n        if (recording.isPlaying()) {\r\n\r\n            // Notify that playback is stopping\r\n            if (recording.onpause)\r\n                recording.onpause();\r\n\r\n            // Playback is stopped\r\n            startVideoTimestamp = null;\r\n            startRealTimestamp = null;\r\n\r\n        }\r\n\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * A single frame of Guacamole session data. Each frame is made up of the set\r\n * of instructions used to generate that frame, and the timestamp as dictated\r\n * by the \"sync\" instruction terminating the frame. Optionally, a frame may\r\n * also be associated with a snapshot of Guacamole client state, such that the\r\n * frame can be rendered without replaying all previous frames.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Number} timestamp\r\n *     The timestamp of this frame, as dictated by the \"sync\" instruction which\r\n *     terminates the frame.\r\n *\r\n * @param {Guacamole.SessionRecording._Frame.Instruction[]} instructions\r\n *     All instructions which are necessary to generate this frame relative to\r\n *     the previous frame in the Guacamole session.\r\n */\r\nGuacamole.SessionRecording._Frame = function _Frame(timestamp, instructions) {\r\n\r\n    /**\r\n     * Whether this frame should be used as a keyframe if possible. This value\r\n     * is purely advisory. The stored clientState must eventually be manually\r\n     * set for the frame to be used as a keyframe. By default, frames are not\r\n     * keyframes.\r\n     *\r\n     * @type {Boolean}\r\n     * @default false\r\n     */\r\n    this.keyframe = false;\r\n\r\n    /**\r\n     * The timestamp of this frame, as dictated by the \"sync\" instruction which\r\n     * terminates the frame.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.timestamp = timestamp;\r\n\r\n    /**\r\n     * All instructions which are necessary to generate this frame relative to\r\n     * the previous frame in the Guacamole session.\r\n     *\r\n     * @type {Guacamole.SessionRecording._Frame.Instruction[]}\r\n     */\r\n    this.instructions = instructions;\r\n\r\n    /**\r\n     * A snapshot of client state after this frame was rendered, as returned by\r\n     * a call to exportState(). If no such snapshot has been taken, this will\r\n     * be null.\r\n     *\r\n     * @type {Object}\r\n     * @default null\r\n     */\r\n    this.clientState = null;\r\n\r\n};\r\n\r\n/**\r\n * A Guacamole protocol instruction. Each Guacamole protocol instruction is\r\n * made up of an opcode and set of arguments.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {String} opcode\r\n *     The opcode of this Guacamole instruction.\r\n *\r\n * @param {String[]} args\r\n *     All arguments associated with this Guacamole instruction.\r\n */\r\nGuacamole.SessionRecording._Frame.Instruction = function Instruction(opcode, args) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.SessionRecording._Frame.Instruction.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.SessionRecording._Frame.Instruction}\r\n     */\r\n    var instruction = this;\r\n\r\n    /**\r\n     * The opcode of this Guacamole instruction.\r\n     *\r\n     * @type {String}\r\n     */\r\n    this.opcode = opcode;\r\n\r\n    /**\r\n     * All arguments associated with this Guacamole instruction.\r\n     *\r\n     * @type {String[]}\r\n     */\r\n    this.args = args;\r\n\r\n    /**\r\n     * Returns the approximate number of characters which make up this\r\n     * instruction. This value is only approximate as it excludes the length\r\n     * prefixes and various delimiters used by the Guacamole protocol; only\r\n     * the content of the opcode and each argument is taken into account.\r\n     *\r\n     * @returns {Number}\r\n     *     The approximate size of this instruction, in characters.\r\n     */\r\n    this.getSize = function getSize() {\r\n\r\n        // Init with length of opcode\r\n        var size = instruction.opcode.length;\r\n\r\n        // Add length of all arguments\r\n        for (var i = 0; i < instruction.args.length; i++)\r\n            size += instruction.args[i].length;\r\n\r\n        return size;\r\n\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * A read-only Guacamole.Tunnel implementation which streams instructions\r\n * received through explicit calls to its receiveInstruction() function.\r\n *\r\n * @private\r\n * @constructor\r\n * @augments {Guacamole.Tunnel}\r\n */\r\nGuacamole.SessionRecording._PlaybackTunnel = function _PlaybackTunnel() {\r\n\r\n    /**\r\n     * Reference to this Guacamole.SessionRecording._PlaybackTunnel.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.SessionRecording._PlaybackTunnel}\r\n     */\r\n    var tunnel = this;\r\n\r\n    this.connect = function connect(data) {\r\n        // Do nothing\r\n    };\r\n\r\n    this.sendMessage = function sendMessage(elements) {\r\n        // Do nothing\r\n    };\r\n\r\n    this.disconnect = function disconnect() {\r\n        // Do nothing\r\n    };\r\n\r\n    /**\r\n     * Invokes this tunnel's oninstruction handler, notifying users of this\r\n     * tunnel (such as a Guacamole.Client instance) that an instruction has\r\n     * been received. If the oninstruction handler has not been set, this\r\n     * function has no effect.\r\n     *\r\n     * @param {String} opcode\r\n     *     The opcode of the Guacamole instruction.\r\n     *\r\n     * @param {String[]} args\r\n     *     All arguments associated with this Guacamole instruction.\r\n     */\r\n    this.receiveInstruction = function receiveInstruction(opcode, args) {\r\n        if (tunnel.oninstruction)\r\n            tunnel.oninstruction(opcode, args);\r\n    };\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A Guacamole status. Each Guacamole status consists of a status code, defined\r\n * by the protocol, and an optional human-readable message, usually only\r\n * included for debugging convenience.\r\n *\r\n * @constructor\r\n * @param {Number} code\r\n *     The Guacamole status code, as defined by Guacamole.Status.Code.\r\n *\r\n * @param {String} [message]\r\n *     An optional human-readable message.\r\n */\r\nGuacamole.Status = function(code, message) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.Status.\r\n     * @private\r\n     */\r\n    var guac_status = this;\r\n\r\n    /**\r\n     * The Guacamole status code.\r\n     * @see Guacamole.Status.Code\r\n     * @type {Number}\r\n     */\r\n    this.code = code;\r\n\r\n    /**\r\n     * An arbitrary human-readable message associated with this status, if any.\r\n     * The human-readable message is not required, and is generally provided\r\n     * for debugging purposes only. For user feedback, it is better to translate\r\n     * the Guacamole status code into a message.\r\n     * \r\n     * @type {String}\r\n     */\r\n    this.message = message;\r\n\r\n    /**\r\n     * Returns whether this status represents an error.\r\n     * @returns {Boolean} true if this status represents an error, false\r\n     *                    otherwise.\r\n     */\r\n    this.isError = function() {\r\n        return guac_status.code < 0 || guac_status.code > 0x00FF;\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * Enumeration of all Guacamole status codes.\r\n */\r\nGuacamole.Status.Code = {\r\n\r\n    /**\r\n     * The operation succeeded.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"SUCCESS\": 0x0000,\r\n\r\n    /**\r\n     * The requested operation is unsupported.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"UNSUPPORTED\": 0x0100,\r\n\r\n    /**\r\n     * The operation could not be performed due to an internal failure.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"SERVER_ERROR\": 0x0200,\r\n\r\n    /**\r\n     * The operation could not be performed as the server is busy.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"SERVER_BUSY\": 0x0201,\r\n\r\n    /**\r\n     * The operation could not be performed because the upstream server is not\r\n     * responding.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"UPSTREAM_TIMEOUT\": 0x0202,\r\n\r\n    /**\r\n     * The operation was unsuccessful due to an error or otherwise unexpected\r\n     * condition of the upstream server.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"UPSTREAM_ERROR\": 0x0203,\r\n\r\n    /**\r\n     * The operation could not be performed as the requested resource does not\r\n     * exist.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"RESOURCE_NOT_FOUND\": 0x0204,\r\n\r\n    /**\r\n     * The operation could not be performed as the requested resource is\r\n     * already in use.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"RESOURCE_CONFLICT\": 0x0205,\r\n\r\n    /**\r\n     * The operation could not be performed as the requested resource is now\r\n     * closed.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"RESOURCE_CLOSED\": 0x0206,\r\n\r\n    /**\r\n     * The operation could not be performed because the upstream server does\r\n     * not appear to exist.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"UPSTREAM_NOT_FOUND\": 0x0207,\r\n\r\n    /**\r\n     * The operation could not be performed because the upstream server is not\r\n     * available to service the request.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"UPSTREAM_UNAVAILABLE\": 0x0208,\r\n\r\n    /**\r\n     * The session within the upstream server has ended because it conflicted\r\n     * with another session.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"SESSION_CONFLICT\": 0x0209,\r\n\r\n    /**\r\n     * The session within the upstream server has ended because it appeared to\r\n     * be inactive.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"SESSION_TIMEOUT\": 0x020A,\r\n\r\n    /**\r\n     * The session within the upstream server has been forcibly terminated.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"SESSION_CLOSED\": 0x020B,\r\n\r\n    /**\r\n     * The operation could not be performed because bad parameters were given.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"CLIENT_BAD_REQUEST\": 0x0300,\r\n\r\n    /**\r\n     * Permission was denied to perform the operation, as the user is not yet\r\n     * authorized (not yet logged in, for example).\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"CLIENT_UNAUTHORIZED\": 0x0301,\r\n\r\n    /**\r\n     * Permission was denied to perform the operation, and this permission will\r\n     * not be granted even if the user is authorized.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"CLIENT_FORBIDDEN\": 0x0303,\r\n\r\n    /**\r\n     * The client took too long to respond.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"CLIENT_TIMEOUT\": 0x0308,\r\n\r\n    /**\r\n     * The client sent too much data.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"CLIENT_OVERRUN\": 0x030D,\r\n\r\n    /**\r\n     * The client sent data of an unsupported or unexpected type.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"CLIENT_BAD_TYPE\": 0x030F,\r\n\r\n    /**\r\n     * The operation failed because the current client is already using too\r\n     * many resources.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"CLIENT_TOO_MANY\": 0x031D\r\n\r\n};\r\n\r\n/**\r\n * Returns the Guacamole protocol status code which most closely\r\n * represents the given HTTP status code.\r\n *\r\n * @param {Number} status\r\n *     The HTTP status code to translate into a Guacamole protocol status\r\n *     code.\r\n *\r\n * @returns {Number}\r\n *     The Guacamole protocol status code which most closely represents the\r\n *     given HTTP status code.\r\n */\r\nGuacamole.Status.Code.fromHTTPCode = function fromHTTPCode(status) {\r\n\r\n    // Translate status codes with known equivalents\r\n    switch (status) {\r\n\r\n        // HTTP 400 - Bad request\r\n        case 400:\r\n            return Guacamole.Status.Code.CLIENT_BAD_REQUEST;\r\n\r\n        // HTTP 403 - Forbidden\r\n        case 403:\r\n            return Guacamole.Status.Code.CLIENT_FORBIDDEN;\r\n\r\n        // HTTP 404 - Resource not found\r\n        case 404:\r\n            return Guacamole.Status.Code.RESOURCE_NOT_FOUND;\r\n\r\n        // HTTP 429 - Too many requests\r\n        case 429:\r\n            return Guacamole.Status.Code.CLIENT_TOO_MANY;\r\n\r\n        // HTTP 503 - Server unavailable\r\n        case 503:\r\n            return Guacamole.Status.Code.SERVER_BUSY;\r\n\r\n    }\r\n\r\n    // Default all other codes to generic internal error\r\n    return Guacamole.Status.Code.SERVER_ERROR;\r\n\r\n};\r\n\r\n/**\r\n * Returns the Guacamole protocol status code which most closely\r\n * represents the given WebSocket status code.\r\n *\r\n * @param {Number} code\r\n *     The WebSocket status code to translate into a Guacamole protocol\r\n *     status code.\r\n *\r\n * @returns {Number}\r\n *     The Guacamole protocol status code which most closely represents the\r\n *     given WebSocket status code.\r\n */\r\nGuacamole.Status.Code.fromWebSocketCode = function fromWebSocketCode(code) {\r\n\r\n    // Translate status codes with known equivalents\r\n    switch (code) {\r\n\r\n        // Successful disconnect (no error)\r\n        case 1000: // Normal Closure\r\n            return Guacamole.Status.Code.SUCCESS;\r\n\r\n        // Codes which indicate the server is not reachable\r\n        case 1006: // Abnormal Closure (also signalled by JavaScript when the connection cannot be opened in the first place)\r\n        case 1015: // TLS Handshake\r\n            return Guacamole.Status.Code.UPSTREAM_NOT_FOUND;\r\n\r\n        // Codes which indicate the server is reachable but busy/unavailable\r\n        case 1001: // Going Away\r\n        case 1012: // Service Restart\r\n        case 1013: // Try Again Later\r\n        case 1014: // Bad Gateway\r\n            return Guacamole.Status.Code.UPSTREAM_UNAVAILABLE;\r\n\r\n    }\r\n\r\n    // Default all other codes to generic internal error\r\n    return Guacamole.Status.Code.SERVER_ERROR;\r\n\r\n};\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A reader which automatically handles the given input stream, returning\r\n * strictly text data. Note that this object will overwrite any installed event\r\n * handlers on the given Guacamole.InputStream.\r\n * \r\n * @constructor\r\n * @param {Guacamole.InputStream} stream The stream that data will be read\r\n *                                       from.\r\n */\r\nGuacamole.StringReader = function(stream) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.InputStream.\r\n     * @private\r\n     */\r\n    var guac_reader = this;\r\n\r\n    /**\r\n     * Wrapped Guacamole.ArrayBufferReader.\r\n     * @private\r\n     * @type {Guacamole.ArrayBufferReader}\r\n     */\r\n    var array_reader = new Guacamole.ArrayBufferReader(stream);\r\n\r\n    /**\r\n     * The number of bytes remaining for the current codepoint.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var bytes_remaining = 0;\r\n\r\n    /**\r\n     * The current codepoint value, as calculated from bytes read so far.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var codepoint = 0;\r\n\r\n    /**\r\n     * Decodes the given UTF-8 data into a Unicode string. The data may end in\r\n     * the middle of a multibyte character.\r\n     * \r\n     * @private\r\n     * @param {ArrayBuffer} buffer Arbitrary UTF-8 data.\r\n     * @return {String} A decoded Unicode string.\r\n     */\r\n    function __decode_utf8(buffer) {\r\n\r\n        var text = \"\";\r\n\r\n        var bytes = new Uint8Array(buffer);\r\n        for (var i=0; i<bytes.length; i++) {\r\n\r\n            // Get current byte\r\n            var value = bytes[i];\r\n\r\n            // Start new codepoint if nothing yet read\r\n            if (bytes_remaining === 0) {\r\n\r\n                // 1 byte (0xxxxxxx)\r\n                if ((value | 0x7F) === 0x7F)\r\n                    text += String.fromCharCode(value);\r\n\r\n                // 2 byte (110xxxxx)\r\n                else if ((value | 0x1F) === 0xDF) {\r\n                    codepoint = value & 0x1F;\r\n                    bytes_remaining = 1;\r\n                }\r\n\r\n                // 3 byte (1110xxxx)\r\n                else if ((value | 0x0F )=== 0xEF) {\r\n                    codepoint = value & 0x0F;\r\n                    bytes_remaining = 2;\r\n                }\r\n\r\n                // 4 byte (11110xxx)\r\n                else if ((value | 0x07) === 0xF7) {\r\n                    codepoint = value & 0x07;\r\n                    bytes_remaining = 3;\r\n                }\r\n\r\n                // Invalid byte\r\n                else\r\n                    text += \"\\uFFFD\";\r\n\r\n            }\r\n\r\n            // Continue existing codepoint (10xxxxxx)\r\n            else if ((value | 0x3F) === 0xBF) {\r\n\r\n                codepoint = (codepoint << 6) | (value & 0x3F);\r\n                bytes_remaining--;\r\n\r\n                // Write codepoint if finished\r\n                if (bytes_remaining === 0)\r\n                    text += String.fromCharCode(codepoint);\r\n\r\n            }\r\n\r\n            // Invalid byte\r\n            else {\r\n                bytes_remaining = 0;\r\n                text += \"\\uFFFD\";\r\n            }\r\n\r\n        }\r\n\r\n        return text;\r\n\r\n    }\r\n\r\n    // Receive blobs as strings\r\n    array_reader.ondata = function(buffer) {\r\n\r\n        // Decode UTF-8\r\n        var text = __decode_utf8(buffer);\r\n\r\n        // Call handler, if present\r\n        if (guac_reader.ontext)\r\n            guac_reader.ontext(text);\r\n\r\n    };\r\n\r\n    // Simply call onend when end received\r\n    array_reader.onend = function() {\r\n        if (guac_reader.onend)\r\n            guac_reader.onend();\r\n    };\r\n\r\n    /**\r\n     * Fired once for every blob of text data received.\r\n     * \r\n     * @event\r\n     * @param {String} text The data packet received.\r\n     */\r\n    this.ontext = null;\r\n\r\n    /**\r\n     * Fired once this stream is finished and no further data will be written.\r\n     * @event\r\n     */\r\n    this.onend = null;\r\n\r\n};\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * A writer which automatically writes to the given output stream with text\r\n * data.\r\n * \r\n * @constructor\r\n * @param {Guacamole.OutputStream} stream The stream that data will be written\r\n *                                        to.\r\n */\r\nGuacamole.StringWriter = function(stream) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.StringWriter.\r\n     * @private\r\n     */\r\n    var guac_writer = this;\r\n\r\n    /**\r\n     * Wrapped Guacamole.ArrayBufferWriter.\r\n     * @private\r\n     * @type {Guacamole.ArrayBufferWriter}\r\n     */\r\n    var array_writer = new Guacamole.ArrayBufferWriter(stream);\r\n\r\n    /**\r\n     * Internal buffer for UTF-8 output.\r\n     * @private\r\n     */\r\n    var buffer = new Uint8Array(8192);\r\n\r\n    /**\r\n     * The number of bytes currently in the buffer.\r\n     * @private\r\n     */\r\n    var length = 0;\r\n\r\n    // Simply call onack for acknowledgements\r\n    array_writer.onack = function(status) {\r\n        if (guac_writer.onack)\r\n            guac_writer.onack(status);\r\n    };\r\n\r\n    /**\r\n     * Expands the size of the underlying buffer by the given number of bytes,\r\n     * updating the length appropriately.\r\n     * \r\n     * @private\r\n     * @param {Number} bytes The number of bytes to add to the underlying\r\n     *                       buffer.\r\n     */\r\n    function __expand(bytes) {\r\n\r\n        // Resize buffer if more space needed\r\n        if (length+bytes >= buffer.length) {\r\n            var new_buffer = new Uint8Array((length+bytes)*2);\r\n            new_buffer.set(buffer);\r\n            buffer = new_buffer;\r\n        }\r\n\r\n        length += bytes;\r\n\r\n    }\r\n\r\n    /**\r\n     * Appends a single Unicode character to the current buffer, resizing the\r\n     * buffer if necessary. The character will be encoded as UTF-8.\r\n     * \r\n     * @private\r\n     * @param {Number} codepoint The codepoint of the Unicode character to\r\n     *                           append.\r\n     */\r\n    function __append_utf8(codepoint) {\r\n\r\n        var mask;\r\n        var bytes;\r\n\r\n        // 1 byte\r\n        if (codepoint <= 0x7F) {\r\n            mask = 0x00;\r\n            bytes = 1;\r\n        }\r\n\r\n        // 2 byte\r\n        else if (codepoint <= 0x7FF) {\r\n            mask = 0xC0;\r\n            bytes = 2;\r\n        }\r\n\r\n        // 3 byte\r\n        else if (codepoint <= 0xFFFF) {\r\n            mask = 0xE0;\r\n            bytes = 3;\r\n        }\r\n\r\n        // 4 byte\r\n        else if (codepoint <= 0x1FFFFF) {\r\n            mask = 0xF0;\r\n            bytes = 4;\r\n        }\r\n\r\n        // If invalid codepoint, append replacement character\r\n        else {\r\n            __append_utf8(0xFFFD);\r\n            return;\r\n        }\r\n\r\n        // Offset buffer by size\r\n        __expand(bytes);\r\n        var offset = length - 1;\r\n\r\n        // Add trailing bytes, if any\r\n        for (var i=1; i<bytes; i++) {\r\n            buffer[offset--] = 0x80 | (codepoint & 0x3F);\r\n            codepoint >>= 6;\r\n        }\r\n\r\n        // Set initial byte\r\n        buffer[offset] = mask | codepoint;\r\n\r\n    }\r\n\r\n    /**\r\n     * Encodes the given string as UTF-8, returning an ArrayBuffer containing\r\n     * the resulting bytes.\r\n     * \r\n     * @private\r\n     * @param {String} text The string to encode as UTF-8.\r\n     * @return {Uint8Array} The encoded UTF-8 data.\r\n     */\r\n    function __encode_utf8(text) {\r\n\r\n        // Fill buffer with UTF-8\r\n        for (var i=0; i<text.length; i++) {\r\n            var codepoint = text.charCodeAt(i);\r\n            __append_utf8(codepoint);\r\n        }\r\n\r\n        // Flush buffer\r\n        if (length > 0) {\r\n            var out_buffer = buffer.subarray(0, length);\r\n            length = 0;\r\n            return out_buffer;\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Sends the given text.\r\n     * \r\n     * @param {String} text The text to send.\r\n     */\r\n    this.sendText = function(text) {\r\n        if (text.length)\r\n            array_writer.sendData(__encode_utf8(text));\r\n    };\r\n\r\n    /**\r\n     * Signals that no further text will be sent, effectively closing the\r\n     * stream.\r\n     */\r\n    this.sendEnd = function() {\r\n        array_writer.sendEnd();\r\n    };\r\n\r\n    /**\r\n     * Fired for received data, if acknowledged by the server.\r\n     * @event\r\n     * @param {Guacamole.Status} status The status of the operation.\r\n     */\r\n    this.onack = null;\r\n\r\n};\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Core object providing abstract communication for Guacamole. This object\r\n * is a null implementation whose functions do nothing. Guacamole applications\r\n * should use {@link Guacamole.HTTPTunnel} instead, or implement their own tunnel based\r\n * on this one.\r\n * \r\n * @constructor\r\n * @see Guacamole.HTTPTunnel\r\n */\r\nGuacamole.Tunnel = function() {\r\n\r\n    /**\r\n     * Connect to the tunnel with the given optional data. This data is\r\n     * typically used for authentication. The format of data accepted is\r\n     * up to the tunnel implementation.\r\n     * \r\n     * @param {String} data The data to send to the tunnel when connecting.\r\n     */\r\n    this.connect = function(data) {};\r\n    \r\n    /**\r\n     * Disconnect from the tunnel.\r\n     */\r\n    this.disconnect = function() {};\r\n    \r\n    /**\r\n     * Send the given message through the tunnel to the service on the other\r\n     * side. All messages are guaranteed to be received in the order sent.\r\n     * \r\n     * @param {...*} elements\r\n     *     The elements of the message to send to the service on the other side\r\n     *     of the tunnel.\r\n     */\r\n    this.sendMessage = function(elements) {};\r\n\r\n    /**\r\n     * Changes the stored numeric state of this tunnel, firing the onstatechange\r\n     * event if the new state is different and a handler has been defined.\r\n     *\r\n     * @private\r\n     * @param {Number} state\r\n     *     The new state of this tunnel.\r\n     */\r\n    this.setState = function(state) {\r\n\r\n        // Notify only if state changes\r\n        if (state !== this.state) {\r\n            this.state = state;\r\n            if (this.onstatechange)\r\n                this.onstatechange(state);\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Changes the stored UUID that uniquely identifies this tunnel, firing the\r\n     * onuuid event if a handler has been defined.\r\n     *\r\n     * @private\r\n     * @param {String} uuid\r\n     *     The new state of this tunnel.\r\n     */\r\n    this.setUUID = function setUUID(uuid) {\r\n        this.uuid = uuid;\r\n        if (this.onuuid)\r\n            this.onuuid(uuid);\r\n    };\r\n\r\n    /**\r\n     * Returns whether this tunnel is currently connected.\r\n     *\r\n     * @returns {Boolean}\r\n     *     true if this tunnel is currently connected, false otherwise.\r\n     */\r\n    this.isConnected = function isConnected() {\r\n        return this.state === Guacamole.Tunnel.State.OPEN\r\n            || this.state === Guacamole.Tunnel.State.UNSTABLE;\r\n    };\r\n\r\n    /**\r\n     * The current state of this tunnel.\r\n     * \r\n     * @type {Number}\r\n     */\r\n    this.state = Guacamole.Tunnel.State.CONNECTING;\r\n\r\n    /**\r\n     * The maximum amount of time to wait for data to be received, in\r\n     * milliseconds. If data is not received within this amount of time,\r\n     * the tunnel is closed with an error. The default value is 15000.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.receiveTimeout = 15000;\r\n\r\n    /**\r\n     * The amount of time to wait for data to be received before considering\r\n     * the connection to be unstable, in milliseconds. If data is not received\r\n     * within this amount of time, the tunnel status is updated to warn that\r\n     * the connection appears unresponsive and may close. The default value is\r\n     * 1500.\r\n     * \r\n     * @type {Number}\r\n     */\r\n    this.unstableThreshold = 1500;\r\n\r\n    /**\r\n     * The UUID uniquely identifying this tunnel. If not yet known, this will\r\n     * be null.\r\n     *\r\n     * @type {String}\r\n     */\r\n    this.uuid = null;\r\n\r\n    /**\r\n     * Fired when the UUID that uniquely identifies this tunnel is known.\r\n     *\r\n     * @event\r\n     * @param {String}\r\n     *     The UUID uniquely identifying this tunnel.\r\n     */\r\n    this.onuuid = null;\r\n\r\n    /**\r\n     * Fired whenever an error is encountered by the tunnel.\r\n     * \r\n     * @event\r\n     * @param {Guacamole.Status} status A status object which describes the\r\n     *                                  error.\r\n     */\r\n    this.onerror = null;\r\n\r\n    /**\r\n     * Fired whenever the state of the tunnel changes.\r\n     * \r\n     * @event\r\n     * @param {Number} state The new state of the client.\r\n     */\r\n    this.onstatechange = null;\r\n\r\n    /**\r\n     * Fired once for every complete Guacamole instruction received, in order.\r\n     * \r\n     * @event\r\n     * @param {String} opcode The Guacamole instruction opcode.\r\n     * @param {Array} parameters The parameters provided for the instruction,\r\n     *                           if any.\r\n     */\r\n    this.oninstruction = null;\r\n\r\n};\r\n\r\n/**\r\n * The Guacamole protocol instruction opcode reserved for arbitrary internal\r\n * use by tunnel implementations. The value of this opcode is guaranteed to be\r\n * the empty string (\"\"). Tunnel implementations may use this opcode for any\r\n * purpose. It is currently used by the HTTP tunnel to mark the end of the HTTP\r\n * response, and by the WebSocket tunnel to transmit the tunnel UUID and send\r\n * connection stability test pings/responses.\r\n *\r\n * @constant\r\n * @type {String}\r\n */\r\nGuacamole.Tunnel.INTERNAL_DATA_OPCODE = '';\r\n\r\n/**\r\n * All possible tunnel states.\r\n */\r\nGuacamole.Tunnel.State = {\r\n\r\n    /**\r\n     * A connection is in pending. It is not yet known whether connection was\r\n     * successful.\r\n     * \r\n     * @type {Number}\r\n     */\r\n    \"CONNECTING\": 0,\r\n\r\n    /**\r\n     * Connection was successful, and data is being received.\r\n     * \r\n     * @type {Number}\r\n     */\r\n    \"OPEN\": 1,\r\n\r\n    /**\r\n     * The connection is closed. Connection may not have been successful, the\r\n     * tunnel may have been explicitly closed by either side, or an error may\r\n     * have occurred.\r\n     * \r\n     * @type {Number}\r\n     */\r\n    \"CLOSED\": 2,\r\n\r\n    /**\r\n     * The connection is open, but communication through the tunnel appears to\r\n     * be disrupted, and the connection may close as a result.\r\n     *\r\n     * @type {Number}\r\n     */\r\n    \"UNSTABLE\" : 3\r\n\r\n};\r\n\r\n/**\r\n * Guacamole Tunnel implemented over HTTP via XMLHttpRequest.\r\n * \r\n * @constructor\r\n * @augments Guacamole.Tunnel\r\n *\r\n * @param {String} tunnelURL\r\n *     The URL of the HTTP tunneling service.\r\n *\r\n * @param {Boolean} [crossDomain=false]\r\n *     Whether tunnel requests will be cross-domain, and thus must use CORS\r\n *     mechanisms and headers. By default, it is assumed that tunnel requests\r\n *     will be made to the same domain.\r\n *\r\n * @param {Object} [extraTunnelHeaders={}]\r\n *     Key value pairs containing the header names and values of any additional\r\n *     headers to be sent in tunnel requests. By default, no extra headers will\r\n *     be added.\r\n */\r\nGuacamole.HTTPTunnel = function(tunnelURL, crossDomain, extraTunnelHeaders) {\r\n\r\n    /**\r\n     * Reference to this HTTP tunnel.\r\n     * @private\r\n     */\r\n    var tunnel = this;\r\n\r\n    var TUNNEL_CONNECT = tunnelURL + \"?connect\";\r\n    var TUNNEL_READ    = tunnelURL + \"?read:\";\r\n    var TUNNEL_WRITE   = tunnelURL + \"?write:\";\r\n\r\n    var POLLING_ENABLED     = 1;\r\n    var POLLING_DISABLED    = 0;\r\n\r\n    // Default to polling - will be turned off automatically if not needed\r\n    var pollingMode = POLLING_ENABLED;\r\n\r\n    var sendingMessages = false;\r\n    var outputMessageBuffer = \"\";\r\n\r\n    // If requests are expected to be cross-domain, the cookie that the HTTP\r\n    // tunnel depends on will only be sent if withCredentials is true\r\n    var withCredentials = !!crossDomain;\r\n\r\n    /**\r\n     * The current receive timeout ID, if any.\r\n     * @private\r\n     */\r\n    var receive_timeout = null;\r\n\r\n    /**\r\n     * The current connection stability timeout ID, if any.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var unstableTimeout = null;\r\n\r\n    /**\r\n     * The current connection stability test ping interval ID, if any. This\r\n     * will only be set upon successful connection.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var pingInterval = null;\r\n\r\n    /**\r\n     * The number of milliseconds to wait between connection stability test\r\n     * pings.\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type {Number}\r\n     */\r\n    var PING_FREQUENCY = 500;\r\n\r\n    /**\r\n     * Additional headers to be sent in tunnel requests. This dictionary can be\r\n     * populated with key/value header pairs to pass information such as authentication\r\n     * tokens, etc.\r\n     *\r\n     * @private\r\n     */\r\n    var extraHeaders = extraTunnelHeaders || {};\r\n\r\n    /**\r\n     * Adds the configured additional headers to the given request.\r\n     *\r\n     * @param {XMLHttpRequest} request\r\n     *     The request where the configured extra headers will be added.\r\n     *\r\n     * @param {Object} headers\r\n     *     The headers to be added to the request.\r\n     *\r\n     * @private\r\n     */\r\n    function addExtraHeaders(request, headers) {\r\n        for (var name in headers) {\r\n            request.setRequestHeader(name, headers[name]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Initiates a timeout which, if data is not received, causes the tunnel\r\n     * to close with an error.\r\n     * \r\n     * @private\r\n     */\r\n    function reset_timeout() {\r\n\r\n        // Get rid of old timeouts (if any)\r\n        window.clearTimeout(receive_timeout);\r\n        window.clearTimeout(unstableTimeout);\r\n\r\n        // Clear unstable status\r\n        if (tunnel.state === Guacamole.Tunnel.State.UNSTABLE)\r\n            tunnel.setState(Guacamole.Tunnel.State.OPEN);\r\n\r\n        // Set new timeout for tracking overall connection timeout\r\n        receive_timeout = window.setTimeout(function () {\r\n            console.log('receive_timeout');\r\n            close_tunnel(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT, \"Server timeout.\"));\r\n        }, tunnel.receiveTimeout);\r\n\r\n        // Set new timeout for tracking suspected connection instability\r\n        unstableTimeout = window.setTimeout(function() {\r\n            console.log('unstableTimeout');\r\n            tunnel.setState(Guacamole.Tunnel.State.UNSTABLE);\r\n        }, tunnel.unstableThreshold);\r\n\r\n    }\r\n\r\n    /**\r\n     * Closes this tunnel, signaling the given status and corresponding\r\n     * message, which will be sent to the onerror handler if the status is\r\n     * an error status.\r\n     * \r\n     * @private\r\n     * @param {Guacamole.Status} status The status causing the connection to\r\n     *                                  close;\r\n     */\r\n    function close_tunnel(status) {\r\n\r\n        // Get rid of old timeouts (if any)\r\n        window.clearTimeout(receive_timeout);\r\n        window.clearTimeout(unstableTimeout);\r\n\r\n        // Cease connection test pings\r\n        window.clearInterval(pingInterval);\r\n\r\n        // Ignore if already closed\r\n        if (tunnel.state === Guacamole.Tunnel.State.CLOSED)\r\n            return;\r\n\r\n        // If connection closed abnormally, signal error.\r\n        if (status.code !== Guacamole.Status.Code.SUCCESS && tunnel.onerror) {\r\n\r\n            // Ignore RESOURCE_NOT_FOUND if we've already connected, as that\r\n            // only signals end-of-stream for the HTTP tunnel.\r\n            if (tunnel.state === Guacamole.Tunnel.State.CONNECTING\r\n                    || status.code !== Guacamole.Status.Code.RESOURCE_NOT_FOUND)\r\n                tunnel.onerror(status);\r\n\r\n        }\r\n\r\n        // Reset output message buffer\r\n        sendingMessages = false;\r\n\r\n        // Mark as closed\r\n        tunnel.setState(Guacamole.Tunnel.State.CLOSED);\r\n\r\n    }\r\n\r\n\r\n    this.sendMessage = function() {\r\n\r\n        // Do not attempt to send messages if not connected\r\n        if (!tunnel.isConnected())\r\n            return;\r\n\r\n        // Do not attempt to send empty messages\r\n        if (arguments.length === 0)\r\n            return;\r\n\r\n        /**\r\n         * Converts the given value to a length/string pair for use as an\r\n         * element in a Guacamole instruction.\r\n         * \r\n         * @private\r\n         * @param value The value to convert.\r\n         * @return {String} The converted value. \r\n         */\r\n        function getElement(value) {\r\n            var string = new String(value);\r\n            return string.length + \".\" + string; \r\n        }\r\n\r\n        // Initialized message with first element\r\n        var message = getElement(arguments[0]);\r\n\r\n        // Append remaining elements\r\n        for (var i=1; i<arguments.length; i++)\r\n            message += \",\" + getElement(arguments[i]);\r\n\r\n        // Final terminator\r\n        message += \";\";\r\n\r\n        // Add message to buffer\r\n        outputMessageBuffer += message;\r\n\r\n        // Send if not currently sending\r\n        if (!sendingMessages)\r\n            sendPendingMessages();\r\n\r\n    };\r\n\r\n    function sendPendingMessages() {\r\n\r\n        // Do not attempt to send messages if not connected\r\n        if (!tunnel.isConnected())\r\n            return;\r\n\r\n        if (outputMessageBuffer.length > 0) {\r\n\r\n            sendingMessages = true;\r\n\r\n            var message_xmlhttprequest = new XMLHttpRequest();\r\n            message_xmlhttprequest.open(\"POST\", TUNNEL_WRITE + tunnel.uuid);\r\n            message_xmlhttprequest.withCredentials = withCredentials;\r\n            addExtraHeaders(message_xmlhttprequest, extraHeaders);\r\n            message_xmlhttprequest.setRequestHeader(\"Content-type\", \"application/octet-stream\");\r\n\r\n            // Once response received, send next queued event.\r\n            message_xmlhttprequest.onreadystatechange = function() {\r\n                if (message_xmlhttprequest.readyState === 4) {\r\n\r\n                    reset_timeout();\r\n\r\n                    // If an error occurs during send, handle it\r\n                    if (message_xmlhttprequest.status !== 200)\r\n                        handleHTTPTunnelError(message_xmlhttprequest);\r\n\r\n                    // Otherwise, continue the send loop\r\n                    else\r\n                        sendPendingMessages();\r\n\r\n                }\r\n            };\r\n\r\n            message_xmlhttprequest.send(outputMessageBuffer);\r\n            outputMessageBuffer = \"\"; // Clear buffer\r\n\r\n        }\r\n        else\r\n            sendingMessages = false;\r\n\r\n    }\r\n\r\n    function handleHTTPTunnelError(xmlhttprequest) {\r\n\r\n        // Pull status code directly from headers provided by Guacamole\r\n        var code = parseInt(xmlhttprequest.getResponseHeader(\"Guacamole-Status-Code\"));\r\n        if (code) {\r\n            var message = xmlhttprequest.getResponseHeader(\"Guacamole-Error-Message\");\r\n            close_tunnel(new Guacamole.Status(code, message));\r\n        }\r\n\r\n        // Failing that, derive a Guacamole status code from the HTTP status\r\n        // code provided by the browser\r\n        else if (xmlhttprequest.status)\r\n            close_tunnel(new Guacamole.Status(\r\n                Guacamole.Status.Code.fromHTTPCode(xmlhttprequest.status),\r\n                    xmlhttprequest.statusText));\r\n\r\n        // Otherwise, assume server is unreachable\r\n        else\r\n            close_tunnel(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_NOT_FOUND));\r\n\r\n    }\r\n\r\n    function handleResponse(xmlhttprequest) {\r\n\r\n        var interval = null;\r\n        var nextRequest = null;\r\n\r\n        var dataUpdateEvents = 0;\r\n\r\n        // The location of the last element's terminator\r\n        var elementEnd = -1;\r\n\r\n        // Where to start the next length search or the next element\r\n        var startIndex = 0;\r\n\r\n        // Parsed elements\r\n        var elements = new Array();\r\n\r\n        function parseResponse() {\r\n\r\n            // Do not handle responses if not connected\r\n            if (!tunnel.isConnected()) {\r\n                \r\n                // Clean up interval if polling\r\n                if (interval !== null)\r\n                    clearInterval(interval);\r\n                \r\n                return;\r\n            }\r\n\r\n            // Do not parse response yet if not ready\r\n            if (xmlhttprequest.readyState < 2) return;\r\n\r\n            // Attempt to read status\r\n            var status;\r\n            try { status = xmlhttprequest.status; }\r\n\r\n            // If status could not be read, assume successful.\r\n            catch (e) { status = 200; }\r\n\r\n            // Start next request as soon as possible IF request was successful\r\n            if (!nextRequest && status === 200)\r\n                nextRequest = makeRequest();\r\n\r\n            // Parse stream when data is received and when complete.\r\n            if (xmlhttprequest.readyState === 3 ||\r\n                xmlhttprequest.readyState === 4) {\r\n\r\n                reset_timeout();\r\n\r\n                // Also poll every 30ms (some browsers don't repeatedly call onreadystatechange for new data)\r\n                if (pollingMode === POLLING_ENABLED) {\r\n                    if (xmlhttprequest.readyState === 3 && !interval)\r\n                        interval = setInterval(parseResponse, 30);\r\n                    else if (xmlhttprequest.readyState === 4 && interval)\r\n                        clearInterval(interval);\r\n                }\r\n\r\n                // If canceled, stop transfer\r\n                if (xmlhttprequest.status === 0) {\r\n                    tunnel.disconnect();\r\n                    return;\r\n                }\r\n\r\n                // Halt on error during request\r\n                else if (xmlhttprequest.status !== 200) {\r\n                    handleHTTPTunnelError(xmlhttprequest);\r\n                    return;\r\n                }\r\n\r\n                // Attempt to read in-progress data\r\n                var current;\r\n                try { current = xmlhttprequest.responseText; }\r\n\r\n                // Do not attempt to parse if data could not be read\r\n                catch (e) { return; }\r\n\r\n                // While search is within currently received data\r\n                while (elementEnd < current.length) {\r\n\r\n                    // If we are waiting for element data\r\n                    if (elementEnd >= startIndex) {\r\n\r\n                        // We now have enough data for the element. Parse.\r\n                        var element = current.substring(startIndex, elementEnd);\r\n                        var terminator = current.substring(elementEnd, elementEnd+1);\r\n\r\n                        // Add element to array\r\n                        elements.push(element);\r\n\r\n                        // If last element, handle instruction\r\n                        if (terminator === \";\") {\r\n\r\n                            // Get opcode\r\n                            var opcode = elements.shift();\r\n\r\n                            // Call instruction handler.\r\n                            if (tunnel.oninstruction)\r\n                                tunnel.oninstruction(opcode, elements);\r\n\r\n                            // Clear elements\r\n                            elements.length = 0;\r\n\r\n                        }\r\n\r\n                        // Start searching for length at character after\r\n                        // element terminator\r\n                        startIndex = elementEnd + 1;\r\n\r\n                    }\r\n\r\n                    // Search for end of length\r\n                    var lengthEnd = current.indexOf(\".\", startIndex);\r\n                    if (lengthEnd !== -1) {\r\n\r\n                        // Parse length\r\n                        var length = parseInt(current.substring(elementEnd+1, lengthEnd));\r\n\r\n                        // If we're done parsing, handle the next response.\r\n                        if (length === 0) {\r\n\r\n                            // Clean up interval if polling\r\n                            if (interval)\r\n                                clearInterval(interval);\r\n                           \r\n                            // Clean up object\r\n                            xmlhttprequest.onreadystatechange = null;\r\n                            xmlhttprequest.abort();\r\n\r\n                            // Start handling next request\r\n                            if (nextRequest)\r\n                                handleResponse(nextRequest);\r\n\r\n                            // Done parsing\r\n                            break;\r\n\r\n                        }\r\n\r\n                        // Calculate start of element\r\n                        startIndex = lengthEnd + 1;\r\n\r\n                        // Calculate location of element terminator\r\n                        elementEnd = startIndex + length;\r\n\r\n                    }\r\n                    \r\n                    // If no period yet, continue search when more data\r\n                    // is received\r\n                    else {\r\n                        startIndex = current.length;\r\n                        break;\r\n                    }\r\n\r\n                } // end parse loop\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // If response polling enabled, attempt to detect if still\r\n        // necessary (via wrapping parseResponse())\r\n        if (pollingMode === POLLING_ENABLED) {\r\n            xmlhttprequest.onreadystatechange = function() {\r\n\r\n                // If we receive two or more readyState==3 events,\r\n                // there is no need to poll.\r\n                if (xmlhttprequest.readyState === 3) {\r\n                    dataUpdateEvents++;\r\n                    if (dataUpdateEvents >= 2) {\r\n                        pollingMode = POLLING_DISABLED;\r\n                        xmlhttprequest.onreadystatechange = parseResponse;\r\n                    }\r\n                }\r\n\r\n                parseResponse();\r\n            };\r\n        }\r\n\r\n        // Otherwise, just parse\r\n        else\r\n            xmlhttprequest.onreadystatechange = parseResponse;\r\n\r\n        parseResponse();\r\n\r\n    }\r\n\r\n    /**\r\n     * Arbitrary integer, unique for each tunnel read request.\r\n     * @private\r\n     */\r\n    var request_id = 0;\r\n\r\n    function makeRequest() {\r\n\r\n        // Make request, increment request ID\r\n        var xmlhttprequest = new XMLHttpRequest();\r\n        xmlhttprequest.open(\"GET\", TUNNEL_READ + tunnel.uuid + \":\" + (request_id++));\r\n        xmlhttprequest.withCredentials = withCredentials;\r\n        addExtraHeaders(xmlhttprequest, extraHeaders);\r\n        xmlhttprequest.send(null);\r\n\r\n        return xmlhttprequest;\r\n\r\n    }\r\n\r\n    this.connect = function(data) {\r\n\r\n        // Start waiting for connect\r\n        reset_timeout();\r\n\r\n        // Mark the tunnel as connecting\r\n        tunnel.setState(Guacamole.Tunnel.State.CONNECTING);\r\n\r\n        // Start tunnel and connect\r\n        var connect_xmlhttprequest = new XMLHttpRequest();\r\n        connect_xmlhttprequest.onreadystatechange = function() {\r\n\r\n            if (connect_xmlhttprequest.readyState !== 4)\r\n                return;\r\n\r\n            // If failure, throw error\r\n            if (connect_xmlhttprequest.status !== 200) {\r\n                handleHTTPTunnelError(connect_xmlhttprequest);\r\n                return;\r\n            }\r\n\r\n            reset_timeout();\r\n\r\n            // Get UUID from response\r\n            tunnel.setUUID(connect_xmlhttprequest.responseText);\r\n\r\n            // Mark as open\r\n            tunnel.setState(Guacamole.Tunnel.State.OPEN);\r\n\r\n            // Ping tunnel endpoint regularly to test connection stability\r\n            pingInterval = setInterval(function sendPing() {\r\n                tunnel.sendMessage(\"nop\");\r\n            }, PING_FREQUENCY);\r\n\r\n            // Start reading data\r\n            handleResponse(makeRequest());\r\n\r\n        };\r\n\r\n        connect_xmlhttprequest.open(\"POST\", TUNNEL_CONNECT, true);\r\n        connect_xmlhttprequest.withCredentials = withCredentials;\r\n        addExtraHeaders(connect_xmlhttprequest, extraHeaders);\r\n        connect_xmlhttprequest.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\r\n        connect_xmlhttprequest.send(data);\r\n\r\n    };\r\n\r\n    this.disconnect = function() {\r\n        close_tunnel(new Guacamole.Status(Guacamole.Status.Code.SUCCESS, \"Manually closed.\"));\r\n    };\r\n\r\n};\r\n\r\nGuacamole.HTTPTunnel.prototype = new Guacamole.Tunnel();\r\n\r\n/**\r\n * Guacamole Tunnel implemented over WebSocket via XMLHttpRequest.\r\n * \r\n * @constructor\r\n * @augments Guacamole.Tunnel\r\n * @param {String} tunnelURL The URL of the WebSocket tunneling service.\r\n */\r\nGuacamole.WebSocketTunnel = function(tunnelURL) {\r\n\r\n    /**\r\n     * Reference to this WebSocket tunnel.\r\n     * @private\r\n     */\r\n    var tunnel = this;\r\n\r\n    /**\r\n     * The WebSocket used by this tunnel.\r\n     * @private\r\n     */\r\n    var socket = null;\r\n\r\n    /**\r\n     * The current receive timeout ID, if any.\r\n     * @private\r\n     */\r\n    var receive_timeout = null;\r\n\r\n    /**\r\n     * The current connection stability timeout ID, if any.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var unstableTimeout = null;\r\n\r\n    /**\r\n     * The current connection stability test ping interval ID, if any. This\r\n     * will only be set upon successful connection.\r\n     *\r\n     * @private\r\n     * @type {Number}\r\n     */\r\n    var pingInterval = null;\r\n\r\n    /**\r\n     * The WebSocket protocol corresponding to the protocol used for the current\r\n     * location.\r\n     * @private\r\n     */\r\n    var ws_protocol = {\r\n        \"http:\":  \"ws:\",\r\n        \"https:\": \"wss:\"\r\n    };\r\n\r\n    /**\r\n     * The number of milliseconds to wait between connection stability test\r\n     * pings.\r\n     *\r\n     * @private\r\n     * @constant\r\n     * @type {Number}\r\n     */\r\n    var PING_FREQUENCY = 500;\r\n\r\n    // Transform current URL to WebSocket URL\r\n\r\n    // If not already a websocket URL\r\n    if (   tunnelURL.substring(0, 3) !== \"ws:\"\r\n        && tunnelURL.substring(0, 4) !== \"wss:\") {\r\n\r\n        var protocol = ws_protocol[window.location.protocol];\r\n\r\n        // If absolute URL, convert to absolute WS URL\r\n        if (tunnelURL.substring(0, 1) === \"/\")\r\n            tunnelURL =\r\n                protocol\r\n                + \"//\" + window.location.host\r\n                + tunnelURL;\r\n\r\n        // Otherwise, construct absolute from relative URL\r\n        else {\r\n\r\n            // Get path from pathname\r\n            var slash = window.location.pathname.lastIndexOf(\"/\");\r\n            var path  = window.location.pathname.substring(0, slash + 1);\r\n\r\n            // Construct absolute URL\r\n            tunnelURL =\r\n                protocol\r\n                + \"//\" + window.location.host\r\n                + path\r\n                + tunnelURL;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Initiates a timeout which, if data is not received, causes the tunnel\r\n     * to close with an error.\r\n     * \r\n     * @private\r\n     */\r\n    function reset_timeout() {\r\n\r\n        // Get rid of old timeouts (if any)\r\n        window.clearTimeout(receive_timeout);\r\n        window.clearTimeout(unstableTimeout);\r\n\r\n        //console.log(`reset_timeout. tunnel.receiveTimeout: ${tunnel.receiveTimeout}`);\r\n\r\n        // Clear unstable status\r\n        if (tunnel.state === Guacamole.Tunnel.State.UNSTABLE)\r\n            tunnel.setState(Guacamole.Tunnel.State.OPEN);\r\n\r\n        // Set new timeout for tracking overall connection timeout\r\n        receive_timeout = window.setTimeout(function () {\r\n            console.log('receive_timeout');\r\n            close_tunnel(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT, \"Server timeout.\"));\r\n        }, tunnel.receiveTimeout);\r\n\r\n        // Set new timeout for tracking suspected connection instability\r\n        unstableTimeout = window.setTimeout(function() {\r\n            console.log('unstableTimeout');\r\n            tunnel.setState(Guacamole.Tunnel.State.UNSTABLE);\r\n        }, tunnel.unstableThreshold);\r\n\r\n    }\r\n\r\n    /**\r\n     * Closes this tunnel, signaling the given status and corresponding\r\n     * message, which will be sent to the onerror handler if the status is\r\n     * an error status.\r\n     * \r\n     * @private\r\n     * @param {Guacamole.Status} status The status causing the connection to\r\n     *                                  close;\r\n     */\r\n    function close_tunnel(status) {\r\n\r\n        // Get rid of old timeouts (if any)\r\n        window.clearTimeout(receive_timeout);\r\n        window.clearTimeout(unstableTimeout);\r\n\r\n        // Cease connection test pings\r\n        window.clearInterval(pingInterval);\r\n\r\n        console.log(`close_tunnel. status.code: ${status.code}, tunnel.state: ${tunnel.state}`);\r\n        // Ignore if already closed\r\n        if (tunnel.state === Guacamole.Tunnel.State.CLOSED)\r\n            return;\r\n\r\n        // If connection closed abnormally, signal error.\r\n        if (status.code !== Guacamole.Status.Code.SUCCESS && tunnel.onerror)\r\n            tunnel.onerror(status);\r\n\r\n        // Mark as closed\r\n        tunnel.setState(Guacamole.Tunnel.State.CLOSED);\r\n\r\n        socket.close();\r\n\r\n    }\r\n\r\n    this.sendMessage = function(elements) {\r\n\r\n        // Do not attempt to send messages if not connected\r\n        if (!tunnel.isConnected())\r\n            return;\r\n\r\n        // Do not attempt to send empty messages\r\n        if (arguments.length === 0)\r\n            return;\r\n\r\n        /**\r\n         * Converts the given value to a length/string pair for use as an\r\n         * element in a Guacamole instruction.\r\n         * \r\n         * @private\r\n         * @param value The value to convert.\r\n         * @return {String} The converted value. \r\n         */\r\n        function getElement(value) {\r\n            var string = new String(value);\r\n            return string.length + \".\" + string; \r\n        }\r\n\r\n        // Initialized message with first element\r\n        var message = getElement(arguments[0]);\r\n\r\n        // Append remaining elements\r\n        for (var i=1; i<arguments.length; i++)\r\n            message += \",\" + getElement(arguments[i]);\r\n\r\n        // Final terminator\r\n        message += \";\";\r\n\r\n        socket.send(message);\r\n\r\n    };\r\n\r\n    this.connect = function(data) {\r\n\r\n        reset_timeout();\r\n\r\n        // Mark the tunnel as connecting\r\n        tunnel.setState(Guacamole.Tunnel.State.CONNECTING);\r\n\r\n        // Connect socket\r\n        socket = new WebSocket(tunnelURL + \"?\" + data, \"guacamole\");\r\n\r\n        socket.onopen = function(event) {\r\n            console.log('WebSocket onopen..');\r\n            reset_timeout();\r\n\r\n            // Ping tunnel endpoint regularly to test connection stability\r\n            pingInterval = setInterval(function sendPing() {\r\n                tunnel.sendMessage(Guacamole.Tunnel.INTERNAL_DATA_OPCODE,\r\n                    \"ping\", new Date().getTime());\r\n            }, PING_FREQUENCY);\r\n\r\n        };\r\n\r\n        socket.onclose = function(event) {\r\n\r\n            console.log(`WebSocket onclose..  event: ${JSON.stringify(event,null,2)}`);\r\n            // Pull status code directly from closure reason provided by Guacamole\r\n            if (event.reason)\r\n                close_tunnel(new Guacamole.Status(parseInt(event.reason), event.reason));\r\n\r\n            // Failing that, derive a Guacamole status code from the WebSocket\r\n            // status code provided by the browser\r\n            else if (event.code)\r\n                close_tunnel(new Guacamole.Status(Guacamole.Status.Code.fromWebSocketCode(event.code)));\r\n\r\n            // Otherwise, assume server is unreachable\r\n            else\r\n                close_tunnel(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_NOT_FOUND));\r\n\r\n        };\r\n        \r\n        socket.onmessage = function(event) {\r\n\r\n            //console.log(\"socket.onmessage..\");\r\n            reset_timeout();\r\n\r\n            var message = event.data;\r\n            var startIndex = 0;\r\n            var elementEnd;\r\n\r\n            var elements = [];\r\n\r\n            do {\r\n\r\n                // Search for end of length\r\n                var lengthEnd = message.indexOf(\".\", startIndex);\r\n                if (lengthEnd !== -1) {\r\n\r\n                    // Parse length\r\n                    var length = parseInt(message.substring(elementEnd+1, lengthEnd));\r\n\r\n                    // Calculate start of element\r\n                    startIndex = lengthEnd + 1;\r\n\r\n                    // Calculate location of element terminator\r\n                    elementEnd = startIndex + length;\r\n\r\n                }\r\n                \r\n                // If no period, incomplete instruction.\r\n                else\r\n                    close_tunnel(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR, \"Incomplete instruction.\"));\r\n\r\n                // We now have enough data for the element. Parse.\r\n                var element = message.substring(startIndex, elementEnd);\r\n                var terminator = message.substring(elementEnd, elementEnd+1);\r\n\r\n                // Add element to array\r\n                elements.push(element);\r\n\r\n                // If last element, handle instruction\r\n                if (terminator === \";\") {\r\n\r\n                    // Get opcode\r\n                    var opcode = elements.shift();\r\n\r\n                    // Update state and UUID when first instruction received\r\n                    if (tunnel.uuid === null) {\r\n\r\n                        // Associate tunnel UUID if received\r\n                        if (opcode === Guacamole.Tunnel.INTERNAL_DATA_OPCODE)\r\n                            tunnel.setUUID(elements[0]);\r\n\r\n                        // Tunnel is now open and UUID is available\r\n                        tunnel.setState(Guacamole.Tunnel.State.OPEN);\r\n\r\n                    }\r\n\r\n                    // Call instruction handler.\r\n                    if (opcode !== Guacamole.Tunnel.INTERNAL_DATA_OPCODE && tunnel.oninstruction)\r\n                        tunnel.oninstruction(opcode, elements);\r\n\r\n                    // Clear elements\r\n                    elements.length = 0;\r\n\r\n                }\r\n\r\n                // Start searching for length at character after\r\n                // element terminator\r\n                startIndex = elementEnd + 1;\r\n\r\n            } while (startIndex < message.length);\r\n\r\n        };\r\n\r\n    };\r\n\r\n    this.disconnect = function() {\r\n        close_tunnel(new Guacamole.Status(Guacamole.Status.Code.SUCCESS, \"Manually closed.\"));\r\n    };\r\n\r\n};\r\n\r\nGuacamole.WebSocketTunnel.prototype = new Guacamole.Tunnel();\r\n\r\n/**\r\n * Guacamole Tunnel which cycles between all specified tunnels until\r\n * no tunnels are left. Another tunnel is used if an error occurs but\r\n * no instructions have been received. If an instruction has been\r\n * received, or no tunnels remain, the error is passed directly out\r\n * through the onerror handler (if defined).\r\n * \r\n * @constructor\r\n * @augments Guacamole.Tunnel\r\n * @param {...*} tunnelChain\r\n *     The tunnels to use, in order of priority.\r\n */\r\nGuacamole.ChainedTunnel = function(tunnelChain) {\r\n\r\n    /**\r\n     * Reference to this chained tunnel.\r\n     * @private\r\n     */\r\n    var chained_tunnel = this;\r\n\r\n    /**\r\n     * Data passed in via connect(), to be used for\r\n     * wrapped calls to other tunnels' connect() functions.\r\n     * @private\r\n     */\r\n    var connect_data;\r\n\r\n    /**\r\n     * Array of all tunnels passed to this ChainedTunnel through the\r\n     * constructor arguments.\r\n     * @private\r\n     */\r\n    var tunnels = [];\r\n\r\n    /**\r\n     * The tunnel committed via commit_tunnel(), if any, or null if no tunnel\r\n     * has yet been committed.\r\n     *\r\n     * @private\r\n     * @type {Guacamole.Tunnel}\r\n     */\r\n    var committedTunnel = null;\r\n\r\n    // Load all tunnels into array\r\n    for (var i=0; i<arguments.length; i++)\r\n        tunnels.push(arguments[i]);\r\n\r\n    /**\r\n     * Sets the current tunnel.\r\n     * \r\n     * @private\r\n     * @param {Guacamole.Tunnel} tunnel The tunnel to set as the current tunnel.\r\n     */\r\n    function attach(tunnel) {\r\n\r\n        // Set own functions to tunnel's functions\r\n        chained_tunnel.disconnect  = tunnel.disconnect;\r\n        chained_tunnel.sendMessage = tunnel.sendMessage;\r\n\r\n        /**\r\n         * Fails the currently-attached tunnel, attaching a new tunnel if\r\n         * possible.\r\n         *\r\n         * @private\r\n         * @param {Guacamole.Status} [status]\r\n         *     An object representing the failure that occured in the\r\n         *     currently-attached tunnel, if known.\r\n         *\r\n         * @return {Guacamole.Tunnel}\r\n         *     The next tunnel, or null if there are no more tunnels to try or\r\n         *     if no more tunnels should be tried.\r\n         */\r\n        var failTunnel = function failTunnel(status) {\r\n\r\n            // Do not attempt to continue using next tunnel on server timeout\r\n            if (status && status.code === Guacamole.Status.Code.UPSTREAM_TIMEOUT) {\r\n                tunnels = [];\r\n                return null;\r\n            }\r\n\r\n            // Get next tunnel\r\n            var next_tunnel = tunnels.shift();\r\n\r\n            // If there IS a next tunnel, try using it.\r\n            if (next_tunnel) {\r\n                tunnel.onerror = null;\r\n                tunnel.oninstruction = null;\r\n                tunnel.onstatechange = null;\r\n                attach(next_tunnel);\r\n            }\r\n\r\n            return next_tunnel;\r\n\r\n        };\r\n\r\n        /**\r\n         * Use the current tunnel from this point forward. Do not try any more\r\n         * tunnels, even if the current tunnel fails.\r\n         * \r\n         * @private\r\n         */\r\n        function commit_tunnel() {\r\n\r\n            tunnel.onstatechange = chained_tunnel.onstatechange;\r\n            tunnel.oninstruction = chained_tunnel.oninstruction;\r\n            tunnel.onerror = chained_tunnel.onerror;\r\n            tunnel.onuuid = chained_tunnel.onuuid;\r\n\r\n            // Assign UUID if already known\r\n            if (tunnel.uuid)\r\n                chained_tunnel.setUUID(tunnel.uuid);\r\n\r\n            committedTunnel = tunnel;\r\n\r\n        }\r\n\r\n        // Wrap own onstatechange within current tunnel\r\n        tunnel.onstatechange = function(state) {\r\n\r\n            switch (state) {\r\n\r\n                // If open, use this tunnel from this point forward.\r\n                case Guacamole.Tunnel.State.OPEN:\r\n                    commit_tunnel();\r\n                    if (chained_tunnel.onstatechange)\r\n                        chained_tunnel.onstatechange(state);\r\n                    break;\r\n\r\n                // If closed, mark failure, attempt next tunnel\r\n                case Guacamole.Tunnel.State.CLOSED:\r\n                    if (!failTunnel() && chained_tunnel.onstatechange)\r\n                        chained_tunnel.onstatechange(state);\r\n                    break;\r\n                \r\n            }\r\n\r\n        };\r\n\r\n        // Wrap own oninstruction within current tunnel\r\n        tunnel.oninstruction = function(opcode, elements) {\r\n\r\n            // Accept current tunnel\r\n            commit_tunnel();\r\n\r\n            // Invoke handler\r\n            if (chained_tunnel.oninstruction)\r\n                chained_tunnel.oninstruction(opcode, elements);\r\n\r\n        };\r\n\r\n        // Attach next tunnel on error\r\n        tunnel.onerror = function(status) {\r\n\r\n            // Mark failure, attempt next tunnel\r\n            if (!failTunnel(status) && chained_tunnel.onerror)\r\n                chained_tunnel.onerror(status);\r\n\r\n        };\r\n\r\n        // Attempt connection\r\n        tunnel.connect(connect_data);\r\n        \r\n    }\r\n\r\n    this.connect = function(data) {\r\n       \r\n        // Remember connect data\r\n        connect_data = data;\r\n\r\n        // Get committed tunnel if exists or the first tunnel on the list\r\n        var next_tunnel = committedTunnel ? committedTunnel : tunnels.shift();\r\n\r\n        // Attach first tunnel\r\n        if (next_tunnel)\r\n            attach(next_tunnel);\r\n\r\n        // If there IS no first tunnel, error\r\n        else if (chained_tunnel.onerror)\r\n            chained_tunnel.onerror(Guacamole.Status.Code.SERVER_ERROR, \"No tunnels to try.\");\r\n\r\n    };\r\n    \r\n};\r\n\r\nGuacamole.ChainedTunnel.prototype = new Guacamole.Tunnel();\r\n\r\n/**\r\n * Guacamole Tunnel which replays a Guacamole protocol dump from a static file\r\n * received via HTTP. Instructions within the file are parsed and handled as\r\n * quickly as possible, while the file is being downloaded.\r\n *\r\n * @constructor\r\n * @augments Guacamole.Tunnel\r\n * @param {String} url\r\n *     The URL of a Guacamole protocol dump.\r\n *\r\n * @param {Boolean} [crossDomain=false]\r\n *     Whether tunnel requests will be cross-domain, and thus must use CORS\r\n *     mechanisms and headers. By default, it is assumed that tunnel requests\r\n *     will be made to the same domain.\r\n *\r\n * @param {Object} [extraTunnelHeaders={}]\r\n *     Key value pairs containing the header names and values of any additional\r\n *     headers to be sent in tunnel requests. By default, no extra headers will\r\n *     be added.\r\n */\r\nGuacamole.StaticHTTPTunnel = function StaticHTTPTunnel(url, crossDomain, extraTunnelHeaders) {\r\n\r\n    /**\r\n     * Reference to this Guacamole.StaticHTTPTunnel.\r\n     *\r\n     * @private\r\n     */\r\n    var tunnel = this;\r\n\r\n    /**\r\n     * The current, in-progress HTTP request. If no request is currently in\r\n     * progress, this will be null.\r\n     *\r\n     * @private\r\n     * @type {XMLHttpRequest}\r\n     */\r\n    var xhr = null;\r\n\r\n    /**\r\n     * Additional headers to be sent in tunnel requests. This dictionary can be\r\n     * populated with key/value header pairs to pass information such as authentication\r\n     * tokens, etc.\r\n     *\r\n     * @private\r\n     */\r\n    var extraHeaders = extraTunnelHeaders || {};\r\n\r\n    /**\r\n     * Adds the configured additional headers to the given request.\r\n     *\r\n     * @param {XMLHttpRequest} request\r\n     *     The request where the configured extra headers will be added.\r\n     *\r\n     * @param {Object} headers\r\n     *     The headers to be added to the request.\r\n     *\r\n     * @private\r\n     */\r\n    function addExtraHeaders(request, headers) {\r\n        for (var name in headers) {\r\n            request.setRequestHeader(name, headers[name]);\r\n        }\r\n    }\r\n\r\n    this.sendMessage = function sendMessage(elements) {\r\n        // Do nothing\r\n    };\r\n\r\n    this.connect = function connect(data) {\r\n\r\n        // Ensure any existing connection is killed\r\n        tunnel.disconnect();\r\n\r\n        // Connection is now starting\r\n        tunnel.setState(Guacamole.Tunnel.State.CONNECTING);\r\n\r\n        // Start a new connection\r\n        xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url);\r\n        xhr.withCredentials = !!crossDomain;\r\n        addExtraHeaders(xhr, extraHeaders);\r\n        xhr.responseType = 'text';\r\n        xhr.send(null);\r\n\r\n        var offset = 0;\r\n\r\n        // Create Guacamole protocol parser specifically for this connection\r\n        var parser = new Guacamole.Parser();\r\n\r\n        // Invoke tunnel's oninstruction handler for each parsed instruction\r\n        parser.oninstruction = function instructionReceived(opcode, args) {\r\n            if (tunnel.oninstruction)\r\n                tunnel.oninstruction(opcode, args);\r\n        };\r\n\r\n        // Continuously parse received data\r\n        xhr.onreadystatechange = function readyStateChanged() {\r\n\r\n            // Parse while data is being received\r\n            if (xhr.readyState === 3 || xhr.readyState === 4) {\r\n\r\n                // Connection is open\r\n                tunnel.setState(Guacamole.Tunnel.State.OPEN);\r\n\r\n                var buffer = xhr.responseText;\r\n                var length = buffer.length;\r\n\r\n                // Parse only the portion of data which is newly received\r\n                if (offset < length) {\r\n                    parser.receive(buffer.substring(offset));\r\n                    offset = length;\r\n                }\r\n\r\n            }\r\n\r\n            // Clean up and close when done\r\n            if (xhr.readyState === 4)\r\n                tunnel.disconnect();\r\n\r\n        };\r\n\r\n        // Reset state and close upon error\r\n        xhr.onerror = function httpError() {\r\n\r\n            // Fail if file could not be downloaded via HTTP\r\n            if (tunnel.onerror)\r\n                tunnel.onerror(new Guacamole.Status(\r\n                    Guacamole.Status.Code.fromHTTPCode(xhr.status), xhr.statusText));\r\n\r\n            tunnel.disconnect();\r\n        };\r\n\r\n    };\r\n\r\n    this.disconnect = function disconnect() {\r\n\r\n        // Abort and dispose of XHR if a request is in progress\r\n        if (xhr) {\r\n            xhr.abort();\r\n            xhr = null;\r\n        }\r\n\r\n        // Connection is now closed\r\n        tunnel.setState(Guacamole.Tunnel.State.CLOSED);\r\n\r\n    };\r\n\r\n};\r\n\r\nGuacamole.StaticHTTPTunnel.prototype = new Guacamole.Tunnel();\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * The unique ID of this version of the Guacamole JavaScript API. This ID will\r\n * be the version string of the guacamole-common-js Maven project, and can be\r\n * used in downstream applications as a sanity check that the proper version\r\n * of the APIs is being used (in case an older version is cached, for example).\r\n *\r\n * @type {String}\r\n */\r\nGuacamole.API_VERSION = \"1.3.0\";\r\n\r\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\nvar Guacamole = Guacamole || {};\r\n\r\n/**\r\n * Abstract video player which accepts, queues and plays back arbitrary video\r\n * data. It is up to implementations of this class to provide some means of\r\n * handling a provided Guacamole.InputStream and rendering the received data to\r\n * the provided Guacamole.Display.VisibleLayer. Data received along the\r\n * provided stream is to be played back immediately.\r\n *\r\n * @constructor\r\n */\r\nGuacamole.VideoPlayer = function VideoPlayer() {\r\n\r\n    /**\r\n     * Notifies this Guacamole.VideoPlayer that all video up to the current\r\n     * point in time has been given via the underlying stream, and that any\r\n     * difference in time between queued video data and the current time can be\r\n     * considered latency.\r\n     */\r\n    this.sync = function sync() {\r\n        // Default implementation - do nothing\r\n    };\r\n\r\n};\r\n\r\n/**\r\n * Determines whether the given mimetype is supported by any built-in\r\n * implementation of Guacamole.VideoPlayer, and thus will be properly handled\r\n * by Guacamole.VideoPlayer.getInstance().\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype to check.\r\n *\r\n * @returns {Boolean}\r\n *     true if the given mimetype is supported by any built-in\r\n *     Guacamole.VideoPlayer, false otherwise.\r\n */\r\nGuacamole.VideoPlayer.isSupportedType = function isSupportedType(mimetype) {\r\n\r\n    // There are currently no built-in video players (and therefore no\r\n    // supported types)\r\n    return false;\r\n\r\n};\r\n\r\n/**\r\n * Returns a list of all mimetypes supported by any built-in\r\n * Guacamole.VideoPlayer, in rough order of priority. Beware that only the core\r\n * mimetypes themselves will be listed. Any mimetype parameters, even required\r\n * ones, will not be included in the list.\r\n *\r\n * @returns {String[]}\r\n *     A list of all mimetypes supported by any built-in Guacamole.VideoPlayer,\r\n *     excluding any parameters.\r\n */\r\nGuacamole.VideoPlayer.getSupportedTypes = function getSupportedTypes() {\r\n\r\n    // There are currently no built-in video players (and therefore no\r\n    // supported types)\r\n    return [];\r\n\r\n};\r\n\r\n/**\r\n * Returns an instance of Guacamole.VideoPlayer providing support for the given\r\n * video format. If support for the given video format is not available, null\r\n * is returned.\r\n *\r\n * @param {Guacamole.InputStream} stream\r\n *     The Guacamole.InputStream to read video data from.\r\n *\r\n * @param {Guacamole.Display.VisibleLayer} layer\r\n *     The destination layer in which this Guacamole.VideoPlayer should play\r\n *     the received video data.\r\n *\r\n * @param {String} mimetype\r\n *     The mimetype of the video data in the provided stream.\r\n *\r\n * @return {Guacamole.VideoPlayer}\r\n *     A Guacamole.VideoPlayer instance supporting the given mimetype and\r\n *     reading from the given stream, or null if support for the given mimetype\r\n *     is absent.\r\n */\r\nGuacamole.VideoPlayer.getInstance = function getInstance(stream, layer, mimetype) {\r\n\r\n    // There are currently no built-in video players\r\n    return null;\r\n\r\n};\r\nmodule.exports = Guacamole;","var BufferUtil = require('../utils/buffer')\nvar Utils = require('./utils')\nvar ECLevel = require('./error-correction-level')\nvar BitBuffer = require('./bit-buffer')\nvar BitMatrix = require('./bit-matrix')\nvar AlignmentPattern = require('./alignment-pattern')\nvar FinderPattern = require('./finder-pattern')\nvar MaskPattern = require('./mask-pattern')\nvar ECCode = require('./error-correction-code')\nvar ReedSolomonEncoder = require('./reed-solomon-encoder')\nvar Version = require('./version')\nvar FormatInfo = require('./format-info')\nvar Mode = require('./mode')\nvar Segments = require('./segments')\nvar isArray = require('isarray')\n\n/**\n * QRCode for JavaScript\n *\n * modified by Ryan Day for nodejs support\n * Copyright (c) 2011 Ryan Day\n *\n * Licensed under the MIT license:\n *   http://www.opensource.org/licenses/mit-license.php\n *\n//---------------------------------------------------------------------\n// QRCode for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//   http://www.opensource.org/licenses/mit-license.php\n//\n// The word \"QR Code\" is registered trademark of\n// DENSO WAVE INCORPORATED\n//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n*/\n\n/**\n * Add finder patterns bits to matrix\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupFinderPattern (matrix, version) {\n  var size = matrix.size\n  var pos = FinderPattern.getPositions(version)\n\n  for (var i = 0; i < pos.length; i++) {\n    var row = pos[i][0]\n    var col = pos[i][1]\n\n    for (var r = -1; r <= 7; r++) {\n      if (row + r <= -1 || size <= row + r) continue\n\n      for (var c = -1; c <= 7; c++) {\n        if (col + c <= -1 || size <= col + c) continue\n\n        if ((r >= 0 && r <= 6 && (c === 0 || c === 6)) ||\n          (c >= 0 && c <= 6 && (r === 0 || r === 6)) ||\n          (r >= 2 && r <= 4 && c >= 2 && c <= 4)) {\n          matrix.set(row + r, col + c, true, true)\n        } else {\n          matrix.set(row + r, col + c, false, true)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Add timing pattern bits to matrix\n *\n * Note: this function must be called before {@link setupAlignmentPattern}\n *\n * @param  {BitMatrix} matrix Modules matrix\n */\nfunction setupTimingPattern (matrix) {\n  var size = matrix.size\n\n  for (var r = 8; r < size - 8; r++) {\n    var value = r % 2 === 0\n    matrix.set(r, 6, value, true)\n    matrix.set(6, r, value, true)\n  }\n}\n\n/**\n * Add alignment patterns bits to matrix\n *\n * Note: this function must be called after {@link setupTimingPattern}\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupAlignmentPattern (matrix, version) {\n  var pos = AlignmentPattern.getPositions(version)\n\n  for (var i = 0; i < pos.length; i++) {\n    var row = pos[i][0]\n    var col = pos[i][1]\n\n    for (var r = -2; r <= 2; r++) {\n      for (var c = -2; c <= 2; c++) {\n        if (r === -2 || r === 2 || c === -2 || c === 2 ||\n          (r === 0 && c === 0)) {\n          matrix.set(row + r, col + c, true, true)\n        } else {\n          matrix.set(row + r, col + c, false, true)\n        }\n      }\n    }\n  }\n}\n\n/**\n * Add version info bits to matrix\n *\n * @param  {BitMatrix} matrix  Modules matrix\n * @param  {Number}    version QR Code version\n */\nfunction setupVersionInfo (matrix, version) {\n  var size = matrix.size\n  var bits = Version.getEncodedBits(version)\n  var row, col, mod\n\n  for (var i = 0; i < 18; i++) {\n    row = Math.floor(i / 3)\n    col = i % 3 + size - 8 - 3\n    mod = ((bits >> i) & 1) === 1\n\n    matrix.set(row, col, mod, true)\n    matrix.set(col, row, mod, true)\n  }\n}\n\n/**\n * Add format info bits to matrix\n *\n * @param  {BitMatrix} matrix               Modules matrix\n * @param  {ErrorCorrectionLevel}    errorCorrectionLevel Error correction level\n * @param  {Number}    maskPattern          Mask pattern reference value\n */\nfunction setupFormatInfo (matrix, errorCorrectionLevel, maskPattern) {\n  var size = matrix.size\n  var bits = FormatInfo.getEncodedBits(errorCorrectionLevel, maskPattern)\n  var i, mod\n\n  for (i = 0; i < 15; i++) {\n    mod = ((bits >> i) & 1) === 1\n\n    // vertical\n    if (i < 6) {\n      matrix.set(i, 8, mod, true)\n    } else if (i < 8) {\n      matrix.set(i + 1, 8, mod, true)\n    } else {\n      matrix.set(size - 15 + i, 8, mod, true)\n    }\n\n    // horizontal\n    if (i < 8) {\n      matrix.set(8, size - i - 1, mod, true)\n    } else if (i < 9) {\n      matrix.set(8, 15 - i - 1 + 1, mod, true)\n    } else {\n      matrix.set(8, 15 - i - 1, mod, true)\n    }\n  }\n\n  // fixed module\n  matrix.set(size - 8, 8, 1, true)\n}\n\n/**\n * Add encoded data bits to matrix\n *\n * @param  {BitMatrix} matrix Modules matrix\n * @param  {Buffer}    data   Data codewords\n */\nfunction setupData (matrix, data) {\n  var size = matrix.size\n  var inc = -1\n  var row = size - 1\n  var bitIndex = 7\n  var byteIndex = 0\n\n  for (var col = size - 1; col > 0; col -= 2) {\n    if (col === 6) col--\n\n    while (true) {\n      for (var c = 0; c < 2; c++) {\n        if (!matrix.isReserved(row, col - c)) {\n          var dark = false\n\n          if (byteIndex < data.length) {\n            dark = (((data[byteIndex] >>> bitIndex) & 1) === 1)\n          }\n\n          matrix.set(row, col - c, dark)\n          bitIndex--\n\n          if (bitIndex === -1) {\n            byteIndex++\n            bitIndex = 7\n          }\n        }\n      }\n\n      row += inc\n\n      if (row < 0 || size <= row) {\n        row -= inc\n        inc = -inc\n        break\n      }\n    }\n  }\n}\n\n/**\n * Create encoded codewords from data input\n *\n * @param  {Number}   version              QR Code version\n * @param  {ErrorCorrectionLevel}   errorCorrectionLevel Error correction level\n * @param  {ByteData} data                 Data input\n * @return {Buffer}                        Buffer containing encoded codewords\n */\nfunction createData (version, errorCorrectionLevel, segments) {\n  // Prepare data buffer\n  var buffer = new BitBuffer()\n\n  segments.forEach(function (data) {\n    // prefix data with mode indicator (4 bits)\n    buffer.put(data.mode.bit, 4)\n\n    // Prefix data with character count indicator.\n    // The character count indicator is a string of bits that represents the\n    // number of characters that are being encoded.\n    // The character count indicator must be placed after the mode indicator\n    // and must be a certain number of bits long, depending on the QR version\n    // and data mode\n    // @see {@link Mode.getCharCountIndicator}.\n    buffer.put(data.getLength(), Mode.getCharCountIndicator(data.mode, version))\n\n    // add binary data sequence to buffer\n    data.write(buffer)\n  })\n\n  // Calculate required number of bits\n  var totalCodewords = Utils.getSymbolTotalCodewords(version)\n  var ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n  var dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8\n\n  // Add a terminator.\n  // If the bit string is shorter than the total number of required bits,\n  // a terminator of up to four 0s must be added to the right side of the string.\n  // If the bit string is more than four bits shorter than the required number of bits,\n  // add four 0s to the end.\n  if (buffer.getLengthInBits() + 4 <= dataTotalCodewordsBits) {\n    buffer.put(0, 4)\n  }\n\n  // If the bit string is fewer than four bits shorter, add only the number of 0s that\n  // are needed to reach the required number of bits.\n\n  // After adding the terminator, if the number of bits in the string is not a multiple of 8,\n  // pad the string on the right with 0s to make the string's length a multiple of 8.\n  while (buffer.getLengthInBits() % 8 !== 0) {\n    buffer.putBit(0)\n  }\n\n  // Add pad bytes if the string is still shorter than the total number of required bits.\n  // Extend the buffer to fill the data capacity of the symbol corresponding to\n  // the Version and Error Correction Level by adding the Pad Codewords 11101100 (0xEC)\n  // and 00010001 (0x11) alternately.\n  var remainingByte = (dataTotalCodewordsBits - buffer.getLengthInBits()) / 8\n  for (var i = 0; i < remainingByte; i++) {\n    buffer.put(i % 2 ? 0x11 : 0xEC, 8)\n  }\n\n  return createCodewords(buffer, version, errorCorrectionLevel)\n}\n\n/**\n * Encode input data with Reed-Solomon and return codewords with\n * relative error correction bits\n *\n * @param  {BitBuffer} bitBuffer            Data to encode\n * @param  {Number}    version              QR Code version\n * @param  {ErrorCorrectionLevel} errorCorrectionLevel Error correction level\n * @return {Buffer}                         Buffer containing encoded codewords\n */\nfunction createCodewords (bitBuffer, version, errorCorrectionLevel) {\n  // Total codewords for this QR code version (Data + Error correction)\n  var totalCodewords = Utils.getSymbolTotalCodewords(version)\n\n  // Total number of error correction codewords\n  var ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n\n  // Total number of data codewords\n  var dataTotalCodewords = totalCodewords - ecTotalCodewords\n\n  // Total number of blocks\n  var ecTotalBlocks = ECCode.getBlocksCount(version, errorCorrectionLevel)\n\n  // Calculate how many blocks each group should contain\n  var blocksInGroup2 = totalCodewords % ecTotalBlocks\n  var blocksInGroup1 = ecTotalBlocks - blocksInGroup2\n\n  var totalCodewordsInGroup1 = Math.floor(totalCodewords / ecTotalBlocks)\n\n  var dataCodewordsInGroup1 = Math.floor(dataTotalCodewords / ecTotalBlocks)\n  var dataCodewordsInGroup2 = dataCodewordsInGroup1 + 1\n\n  // Number of EC codewords is the same for both groups\n  var ecCount = totalCodewordsInGroup1 - dataCodewordsInGroup1\n\n  // Initialize a Reed-Solomon encoder with a generator polynomial of degree ecCount\n  var rs = new ReedSolomonEncoder(ecCount)\n\n  var offset = 0\n  var dcData = new Array(ecTotalBlocks)\n  var ecData = new Array(ecTotalBlocks)\n  var maxDataSize = 0\n  var buffer = BufferUtil.from(bitBuffer.buffer)\n\n  // Divide the buffer into the required number of blocks\n  for (var b = 0; b < ecTotalBlocks; b++) {\n    var dataSize = b < blocksInGroup1 ? dataCodewordsInGroup1 : dataCodewordsInGroup2\n\n    // extract a block of data from buffer\n    dcData[b] = buffer.slice(offset, offset + dataSize)\n\n    // Calculate EC codewords for this data block\n    ecData[b] = rs.encode(dcData[b])\n\n    offset += dataSize\n    maxDataSize = Math.max(maxDataSize, dataSize)\n  }\n\n  // Create final data\n  // Interleave the data and error correction codewords from each block\n  var data = BufferUtil.alloc(totalCodewords)\n  var index = 0\n  var i, r\n\n  // Add data codewords\n  for (i = 0; i < maxDataSize; i++) {\n    for (r = 0; r < ecTotalBlocks; r++) {\n      if (i < dcData[r].length) {\n        data[index++] = dcData[r][i]\n      }\n    }\n  }\n\n  // Apped EC codewords\n  for (i = 0; i < ecCount; i++) {\n    for (r = 0; r < ecTotalBlocks; r++) {\n      data[index++] = ecData[r][i]\n    }\n  }\n\n  return data\n}\n\n/**\n * Build QR Code symbol\n *\n * @param  {String} data                 Input string\n * @param  {Number} version              QR Code version\n * @param  {ErrorCorretionLevel} errorCorrectionLevel Error level\n * @param  {MaskPattern} maskPattern     Mask pattern\n * @return {Object}                      Object containing symbol data\n */\nfunction createSymbol (data, version, errorCorrectionLevel, maskPattern) {\n  var segments\n\n  if (isArray(data)) {\n    segments = Segments.fromArray(data)\n  } else if (typeof data === 'string') {\n    var estimatedVersion = version\n\n    if (!estimatedVersion) {\n      var rawSegments = Segments.rawSplit(data)\n\n      // Estimate best version that can contain raw splitted segments\n      estimatedVersion = Version.getBestVersionForData(rawSegments,\n        errorCorrectionLevel)\n    }\n\n    // Build optimized segments\n    // If estimated version is undefined, try with the highest version\n    segments = Segments.fromString(data, estimatedVersion || 40)\n  } else {\n    throw new Error('Invalid data')\n  }\n\n  // Get the min version that can contain data\n  var bestVersion = Version.getBestVersionForData(segments,\n      errorCorrectionLevel)\n\n  // If no version is found, data cannot be stored\n  if (!bestVersion) {\n    throw new Error('The amount of data is too big to be stored in a QR Code')\n  }\n\n  // If not specified, use min version as default\n  if (!version) {\n    version = bestVersion\n\n  // Check if the specified version can contain the data\n  } else if (version < bestVersion) {\n    throw new Error('\\n' +\n      'The chosen QR Code version cannot contain this amount of data.\\n' +\n      'Minimum version required to store current data is: ' + bestVersion + '.\\n'\n    )\n  }\n\n  var dataBits = createData(version, errorCorrectionLevel, segments)\n\n  // Allocate matrix buffer\n  var moduleCount = Utils.getSymbolSize(version)\n  var modules = new BitMatrix(moduleCount)\n\n  // Add function modules\n  setupFinderPattern(modules, version)\n  setupTimingPattern(modules)\n  setupAlignmentPattern(modules, version)\n\n  // Add temporary dummy bits for format info just to set them as reserved.\n  // This is needed to prevent these bits from being masked by {@link MaskPattern.applyMask}\n  // since the masking operation must be performed only on the encoding region.\n  // These blocks will be replaced with correct values later in code.\n  setupFormatInfo(modules, errorCorrectionLevel, 0)\n\n  if (version >= 7) {\n    setupVersionInfo(modules, version)\n  }\n\n  // Add data codewords\n  setupData(modules, dataBits)\n\n  if (isNaN(maskPattern)) {\n    // Find best mask pattern\n    maskPattern = MaskPattern.getBestMask(modules,\n      setupFormatInfo.bind(null, modules, errorCorrectionLevel))\n  }\n\n  // Apply mask pattern\n  MaskPattern.applyMask(maskPattern, modules)\n\n  // Replace format info bits with correct values\n  setupFormatInfo(modules, errorCorrectionLevel, maskPattern)\n\n  return {\n    modules: modules,\n    version: version,\n    errorCorrectionLevel: errorCorrectionLevel,\n    maskPattern: maskPattern,\n    segments: segments\n  }\n}\n\n/**\n * QR Code\n *\n * @param {String | Array} data                 Input data\n * @param {Object} options                      Optional configurations\n * @param {Number} options.version              QR Code version\n * @param {String} options.errorCorrectionLevel Error correction level\n * @param {Function} options.toSJISFunc         Helper func to convert utf8 to sjis\n */\nexports.create = function create (data, options) {\n  if (typeof data === 'undefined' || data === '') {\n    throw new Error('No input text')\n  }\n\n  var errorCorrectionLevel = ECLevel.M\n  var version\n  var mask\n\n  if (typeof options !== 'undefined') {\n    // Use higher error correction level as default\n    errorCorrectionLevel = ECLevel.from(options.errorCorrectionLevel, ECLevel.M)\n    version = Version.from(options.version)\n    mask = MaskPattern.from(options.maskPattern)\n\n    if (options.toSJISFunc) {\n      Utils.setToSJISFunction(options.toSJISFunc)\n    }\n  }\n\n  return createSymbol(data, version, errorCorrectionLevel, mask)\n}\n","/*                                                                              \nCopyright (c) 2011, Chris Umbel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in      \nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN \nTHE SOFTWARE.\n*/\n\nvar base32 = require('./thirty-two');\n\nexports.encode = base32.encode;\nexports.decode = base32.decode;\n","import './VResponsive.sass'\n\n// Mixins\nimport Measurable, { NumberOrNumberString } from '../../mixins/measurable'\n\n// Types\nimport { VNode } from 'vue'\n\n// Utils\nimport mixins from '../../util/mixins'\n\n/* @vue/component */\nexport default mixins(Measurable).extend({\n  name: 'v-responsive',\n\n  props: {\n    aspectRatio: [String, Number] as NumberOrNumberString,\n    contentClass: String,\n  },\n\n  computed: {\n    computedAspectRatio (): number {\n      return Number(this.aspectRatio)\n    },\n    aspectStyle (): object | undefined {\n      return this.computedAspectRatio\n        ? { paddingBottom: (1 / this.computedAspectRatio) * 100 + '%' }\n        : undefined\n    },\n    __cachedSizer (): VNode | [] {\n      if (!this.aspectStyle) return []\n\n      return this.$createElement('div', {\n        style: this.aspectStyle,\n        staticClass: 'v-responsive__sizer',\n      })\n    },\n  },\n\n  methods: {\n    genContent (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-responsive__content',\n        class: this.contentClass,\n      }, this.$slots.default)\n    },\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-responsive',\n      style: this.measurableStyles,\n      on: this.$listeners,\n    }, [\n      this.__cachedSizer,\n      this.genContent(),\n    ])\n  },\n})\n","import VResponsive from './VResponsive'\n\nexport { VResponsive }\nexport default VResponsive\n","// Styles\nimport './VImg.sass'\n\n// Directives\nimport intersect from '../../directives/intersect'\n\n// Types\nimport { VNode } from 'vue'\nimport { PropValidator } from 'vue/types/options'\n\n// Components\nimport VResponsive from '../VResponsive'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\n\n// Utils\nimport mixins from '../../util/mixins'\nimport mergeData from '../../util/mergeData'\nimport { consoleWarn } from '../../util/console'\n\n// not intended for public use, this is passed in by vuetify-loader\nexport interface srcObject {\n  src: string\n  srcset?: string\n  lazySrc: string\n  aspect: number\n}\n\nconst hasIntersect = typeof window !== 'undefined' && 'IntersectionObserver' in window\n\n/* @vue/component */\nexport default mixins(\n  VResponsive,\n  Themeable,\n).extend({\n  name: 'v-img',\n\n  directives: { intersect },\n\n  props: {\n    alt: String,\n    contain: Boolean,\n    eager: Boolean,\n    gradient: String,\n    lazySrc: String,\n    options: {\n      type: Object,\n      // For more information on types, navigate to:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n      default: () => ({\n        root: undefined,\n        rootMargin: undefined,\n        threshold: undefined,\n      }),\n    } as PropValidator<IntersectionObserverInit>,\n    position: {\n      type: String,\n      default: 'center center',\n    },\n    sizes: String,\n    src: {\n      type: [String, Object],\n      default: '',\n    } as PropValidator<string | srcObject>,\n    srcset: String,\n    transition: {\n      type: [Boolean, String],\n      default: 'fade-transition',\n    },\n  },\n\n  data () {\n    return {\n      currentSrc: '', // Set from srcset\n      image: null as HTMLImageElement | null,\n      isLoading: true,\n      calculatedAspectRatio: undefined as number | undefined,\n      naturalWidth: undefined as number | undefined,\n      hasError: false,\n    }\n  },\n\n  computed: {\n    computedAspectRatio (): number {\n      return Number(this.normalisedSrc.aspect || this.calculatedAspectRatio)\n    },\n    normalisedSrc (): srcObject {\n      return this.src && typeof this.src === 'object'\n        ? {\n          src: this.src.src,\n          srcset: this.srcset || this.src.srcset,\n          lazySrc: this.lazySrc || this.src.lazySrc,\n          aspect: Number(this.aspectRatio || this.src.aspect),\n        } : {\n          src: this.src,\n          srcset: this.srcset,\n          lazySrc: this.lazySrc,\n          aspect: Number(this.aspectRatio || 0),\n        }\n    },\n    __cachedImage (): VNode | [] {\n      if (!(this.normalisedSrc.src || this.normalisedSrc.lazySrc || this.gradient)) return []\n\n      const backgroundImage: string[] = []\n      const src = this.isLoading ? this.normalisedSrc.lazySrc : this.currentSrc\n\n      if (this.gradient) backgroundImage.push(`linear-gradient(${this.gradient})`)\n      if (src) backgroundImage.push(`url(\"${src}\")`)\n\n      const image = this.$createElement('div', {\n        staticClass: 'v-image__image',\n        class: {\n          'v-image__image--preload': this.isLoading,\n          'v-image__image--contain': this.contain,\n          'v-image__image--cover': !this.contain,\n        },\n        style: {\n          backgroundImage: backgroundImage.join(', '),\n          backgroundPosition: this.position,\n        },\n        key: +this.isLoading,\n      })\n\n      /* istanbul ignore if */\n      if (!this.transition) return image\n\n      return this.$createElement('transition', {\n        attrs: {\n          name: this.transition,\n          mode: 'in-out',\n        },\n      }, [image])\n    },\n  },\n\n  watch: {\n    src () {\n      // Force re-init when src changes\n      if (!this.isLoading) this.init(undefined, undefined, true)\n      else this.loadImage()\n    },\n    '$vuetify.breakpoint.width': 'getSrc',\n  },\n\n  mounted () {\n    this.init()\n  },\n\n  methods: {\n    init (\n      entries?: IntersectionObserverEntry[],\n      observer?: IntersectionObserver,\n      isIntersecting?: boolean\n    ) {\n      // If the current browser supports the intersection\n      // observer api, the image is not observable, and\n      // the eager prop isn't being used, do not load\n      if (\n        hasIntersect &&\n        !isIntersecting &&\n        !this.eager\n      ) return\n\n      if (this.normalisedSrc.lazySrc) {\n        const lazyImg = new Image()\n        lazyImg.src = this.normalisedSrc.lazySrc\n        this.pollForSize(lazyImg, null)\n      }\n      /* istanbul ignore else */\n      if (this.normalisedSrc.src) this.loadImage()\n    },\n    onLoad () {\n      this.getSrc()\n      this.isLoading = false\n      this.$emit('load', this.src)\n\n      if (\n        this.image &&\n        (this.normalisedSrc.src.endsWith('.svg') || this.normalisedSrc.src.startsWith('data:image/svg+xml'))\n      ) {\n        if (this.image.naturalHeight && this.image.naturalWidth) {\n          this.naturalWidth = this.image.naturalWidth\n          this.calculatedAspectRatio = this.image.naturalWidth / this.image.naturalHeight\n        } else {\n          this.calculatedAspectRatio = 1\n        }\n      }\n    },\n    onError () {\n      this.hasError = true\n      this.$emit('error', this.src)\n    },\n    getSrc () {\n      /* istanbul ignore else */\n      if (this.image) this.currentSrc = this.image.currentSrc || this.image.src\n    },\n    loadImage () {\n      const image = new Image()\n      this.image = image\n\n      image.onload = () => {\n        /* istanbul ignore if */\n        if (image.decode) {\n          image.decode().catch((err: DOMException) => {\n            consoleWarn(\n              `Failed to decode image, trying to render anyway\\n\\n` +\n              `src: ${this.normalisedSrc.src}` +\n              (err.message ? `\\nOriginal error: ${err.message}` : ''),\n              this\n            )\n          }).then(this.onLoad)\n        } else {\n          this.onLoad()\n        }\n      }\n      image.onerror = this.onError\n\n      this.hasError = false\n      this.sizes && (image.sizes = this.sizes)\n      this.normalisedSrc.srcset && (image.srcset = this.normalisedSrc.srcset)\n      image.src = this.normalisedSrc.src\n      this.$emit('loadstart', this.normalisedSrc.src)\n\n      this.aspectRatio || this.pollForSize(image)\n      this.getSrc()\n    },\n    pollForSize (img: HTMLImageElement, timeout: number | null = 100) {\n      const poll = () => {\n        const { naturalHeight, naturalWidth } = img\n\n        if (naturalHeight || naturalWidth) {\n          this.naturalWidth = naturalWidth\n          this.calculatedAspectRatio = naturalWidth / naturalHeight\n        } else if (!img.complete && this.isLoading && !this.hasError && timeout != null) {\n          setTimeout(poll, timeout)\n        }\n      }\n\n      poll()\n    },\n    genContent () {\n      const content: VNode = VResponsive.options.methods.genContent.call(this)\n      if (this.naturalWidth) {\n        this._b(content.data!, 'div', {\n          style: { width: `${this.naturalWidth}px` },\n        })\n      }\n\n      return content\n    },\n    __genPlaceholder (): VNode | void {\n      if (this.$slots.placeholder) {\n        const placeholder = this.isLoading\n          ? [this.$createElement('div', {\n            staticClass: 'v-image__placeholder',\n          }, this.$slots.placeholder)]\n          : []\n\n        if (!this.transition) return placeholder[0]\n\n        return this.$createElement('transition', {\n          props: {\n            appear: true,\n            name: this.transition,\n          },\n        }, placeholder)\n      }\n    },\n  },\n\n  render (h): VNode {\n    const node = VResponsive.options.render.call(this, h)\n\n    const data = mergeData(node.data!, {\n      staticClass: 'v-image',\n      attrs: {\n        'aria-label': this.alt,\n        role: this.alt ? 'img' : undefined,\n      },\n      class: this.themeClasses,\n      // Only load intersect directive if it\n      // will work in the current browser.\n      directives: hasIntersect\n        ? [{\n          name: 'intersect',\n          modifiers: { once: true },\n          value: {\n            handler: this.init,\n            options: this.options,\n          },\n        }]\n        : undefined,\n    })\n\n    node.children = [\n      this.__cachedSizer,\n      this.__cachedImage,\n      this.__genPlaceholder(),\n      this.genContent(),\n    ] as VNode[]\n\n    return h(node.tag, data, node.children)\n  },\n})\n","import VBtn from './VBtn'\n\nexport { VBtn }\nexport default VBtn\n","/*\nCopyright (c) 2011, Chris Umbel\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n'use strict';\n\nvar charTable = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\nvar byteTable = [\n    0xff, 0xff, 0x1a, 0x1b, 0x1c, 0x1d, 0x1e, 0x1f,\n    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06,\n    0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e,\n    0x0f, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16,\n    0x17, 0x18, 0x19, 0xff, 0xff, 0xff, 0xff, 0xff,\n    0xff, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06,\n    0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e,\n    0x0f, 0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16,\n    0x17, 0x18, 0x19, 0xff, 0xff, 0xff, 0xff, 0xff\n];\n\nfunction quintetCount(buff) {\n    var quintets = Math.floor(buff.length / 5);\n    return buff.length % 5 === 0 ? quintets: quintets + 1;\n}\n\nexports.encode = function(plain) {\n    if(!Buffer.isBuffer(plain)){\n    \tplain = new Buffer(plain);\n    }\n    var i = 0;\n    var j = 0;\n    var shiftIndex = 0;\n    var digit = 0;\n    var encoded = new Buffer(quintetCount(plain) * 8);\n\n    /* byte by byte isn't as pretty as quintet by quintet but tests a bit\n        faster. will have to revisit. */\n    while(i < plain.length) {\n        var current = plain[i];\n\n        if(shiftIndex > 3) {\n            digit = current & (0xff >> shiftIndex);\n            shiftIndex = (shiftIndex + 5) % 8;\n            digit = (digit << shiftIndex) | ((i + 1 < plain.length) ?\n                plain[i + 1] : 0) >> (8 - shiftIndex);\n            i++;\n        } else {\n            digit = (current >> (8 - (shiftIndex + 5))) & 0x1f;\n            shiftIndex = (shiftIndex + 5) % 8;\n            if(shiftIndex === 0) i++;\n        }\n\n        encoded[j] = charTable.charCodeAt(digit);\n        j++;\n    }\n\n    for(i = j; i < encoded.length; i++) {\n        encoded[i] = 0x3d; //'='.charCodeAt(0)\n    }\n\n    return encoded;\n};\n\nexports.decode = function(encoded) {\n    var shiftIndex = 0;\n    var plainDigit = 0;\n    var plainChar;\n    var plainPos = 0;\n    if(!Buffer.isBuffer(encoded)){\n    \tencoded = new Buffer(encoded);\n    }\n    var decoded = new Buffer(Math.ceil(encoded.length * 5 / 8));\n\n    /* byte by byte isn't as pretty as octet by octet but tests a bit\n        faster. will have to revisit. */\n    for(var i = 0; i < encoded.length; i++) {\n    \tif(encoded[i] === 0x3d){ //'='\n    \t\tbreak;\n    \t}\n\n        var encodedByte = encoded[i] - 0x30;\n\n        if(encodedByte < byteTable.length) {\n            plainDigit = byteTable[encodedByte];\n\n            if(shiftIndex <= 3) {\n                shiftIndex = (shiftIndex + 5) % 8;\n\n                if(shiftIndex === 0) {\n                    plainChar |= plainDigit;\n                    decoded[plainPos] = plainChar;\n                    plainPos++;\n                    plainChar = 0;\n                } else {\n                    plainChar |= 0xff & (plainDigit << (8 - shiftIndex));\n                }\n            } else {\n                shiftIndex = (shiftIndex + 5) % 8;\n                plainChar |= 0xff & (plainDigit >>> shiftIndex);\n                decoded[plainPos] = plainChar;\n                plainPos++;\n\n                plainChar = 0xff & (plainDigit << (8 - shiftIndex));\n            }\n        } else {\n        \tthrow new Error('Invalid input - it is not base32 encoded string');\n        }\n    }\n\n    return decoded.slice(0, plainPos);\n};\n","'use strict';\nvar global = require('../internals/global');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar fails = require('../internals/fails');\n\nvar Int8Array = global.Int8Array;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $toLocaleString = [].toLocaleString;\nvar $slice = [].slice;\n\n// iOS Safari 6.x fails here\nvar TO_LOCALE_STRING_BUG = !!Int8Array && fails(function () {\n  $toLocaleString.call(new Int8Array(1));\n});\n\nvar FORCED = fails(function () {\n  return [1, 2].toLocaleString() != new Int8Array([1, 2]).toLocaleString();\n}) || !fails(function () {\n  Int8Array.prototype.toLocaleString.call([1, 2]);\n});\n\n// `%TypedArray%.prototype.toLocaleString` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tolocalestring\nexportTypedArrayMethod('toLocaleString', function toLocaleString() {\n  return $toLocaleString.apply(TO_LOCALE_STRING_BUG ? $slice.call(aTypedArray(this)) : aTypedArray(this), arguments);\n}, FORCED);\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar speciesConstructor = require('../internals/species-constructor');\n\nvar TYPED_ARRAY_CONSTRUCTOR = ArrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR;\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\n\n// a part of `TypedArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#typedarray-species-create\nmodule.exports = function (originalArray) {\n  return aTypedArrayConstructor(speciesConstructor(originalArray, originalArray[TYPED_ARRAY_CONSTRUCTOR]));\n};\n","var VersionCheck = require('./version-check')\nvar Regex = require('./regex')\n\n/**\n * Numeric mode encodes data from the decimal digit set (0 - 9)\n * (byte values 30HEX to 39HEX).\n * Normally, 3 data characters are represented by 10 bits.\n *\n * @type {Object}\n */\nexports.NUMERIC = {\n  id: 'Numeric',\n  bit: 1 << 0,\n  ccBits: [10, 12, 14]\n}\n\n/**\n * Alphanumeric mode encodes data from a set of 45 characters,\n * i.e. 10 numeric digits (0 - 9),\n *      26 alphabetic characters (A - Z),\n *   and 9 symbols (SP, $, %, *, +, -, ., /, :).\n * Normally, two input characters are represented by 11 bits.\n *\n * @type {Object}\n */\nexports.ALPHANUMERIC = {\n  id: 'Alphanumeric',\n  bit: 1 << 1,\n  ccBits: [9, 11, 13]\n}\n\n/**\n * In byte mode, data is encoded at 8 bits per character.\n *\n * @type {Object}\n */\nexports.BYTE = {\n  id: 'Byte',\n  bit: 1 << 2,\n  ccBits: [8, 16, 16]\n}\n\n/**\n * The Kanji mode efficiently encodes Kanji characters in accordance with\n * the Shift JIS system based on JIS X 0208.\n * The Shift JIS values are shifted from the JIS X 0208 values.\n * JIS X 0208 gives details of the shift coded representation.\n * Each two-byte character value is compacted to a 13-bit binary codeword.\n *\n * @type {Object}\n */\nexports.KANJI = {\n  id: 'Kanji',\n  bit: 1 << 3,\n  ccBits: [8, 10, 12]\n}\n\n/**\n * Mixed mode will contain a sequences of data in a combination of any of\n * the modes described above\n *\n * @type {Object}\n */\nexports.MIXED = {\n  bit: -1\n}\n\n/**\n * Returns the number of bits needed to store the data length\n * according to QR Code specifications.\n *\n * @param  {Mode}   mode    Data mode\n * @param  {Number} version QR Code version\n * @return {Number}         Number of bits\n */\nexports.getCharCountIndicator = function getCharCountIndicator (mode, version) {\n  if (!mode.ccBits) throw new Error('Invalid mode: ' + mode)\n\n  if (!VersionCheck.isValid(version)) {\n    throw new Error('Invalid version: ' + version)\n  }\n\n  if (version >= 1 && version < 10) return mode.ccBits[0]\n  else if (version < 27) return mode.ccBits[1]\n  return mode.ccBits[2]\n}\n\n/**\n * Returns the most efficient mode to store the specified data\n *\n * @param  {String} dataStr Input data string\n * @return {Mode}           Best mode\n */\nexports.getBestModeForData = function getBestModeForData (dataStr) {\n  if (Regex.testNumeric(dataStr)) return exports.NUMERIC\n  else if (Regex.testAlphanumeric(dataStr)) return exports.ALPHANUMERIC\n  else if (Regex.testKanji(dataStr)) return exports.KANJI\n  else return exports.BYTE\n}\n\n/**\n * Return mode name as string\n *\n * @param {Mode} mode Mode object\n * @returns {String}  Mode name\n */\nexports.toString = function toString (mode) {\n  if (mode && mode.id) return mode.id\n  throw new Error('Invalid mode')\n}\n\n/**\n * Check if input param is a valid mode object\n *\n * @param   {Mode}    mode Mode object\n * @returns {Boolean} True if valid mode, false otherwise\n */\nexports.isValid = function isValid (mode) {\n  return mode && mode.bit && mode.ccBits\n}\n\n/**\n * Get mode object from its name\n *\n * @param   {String} string Mode name\n * @returns {Mode}          Mode object\n */\nfunction fromString (string) {\n  if (typeof string !== 'string') {\n    throw new Error('Param is not a string')\n  }\n\n  var lcStr = string.toLowerCase()\n\n  switch (lcStr) {\n    case 'numeric':\n      return exports.NUMERIC\n    case 'alphanumeric':\n      return exports.ALPHANUMERIC\n    case 'kanji':\n      return exports.KANJI\n    case 'byte':\n      return exports.BYTE\n    default:\n      throw new Error('Unknown mode: ' + string)\n  }\n}\n\n/**\n * Returns mode from a value.\n * If value is not a valid mode, returns defaultValue\n *\n * @param  {Mode|String} value        Encoding mode\n * @param  {Mode}        defaultValue Fallback value\n * @return {Mode}                     Encoding mode\n */\nexports.from = function from (value, defaultValue) {\n  if (exports.isValid(value)) {\n    return value\n  }\n\n  try {\n    return fromString(value)\n  } catch (e) {\n    return defaultValue\n  }\n}\n","var Mode = require('./mode')\nvar NumericData = require('./numeric-data')\nvar AlphanumericData = require('./alphanumeric-data')\nvar ByteData = require('./byte-data')\nvar KanjiData = require('./kanji-data')\nvar Regex = require('./regex')\nvar Utils = require('./utils')\nvar dijkstra = require('dijkstrajs')\n\n/**\n * Returns UTF8 byte length\n *\n * @param  {String} str Input string\n * @return {Number}     Number of byte\n */\nfunction getStringByteLength (str) {\n  return unescape(encodeURIComponent(str)).length\n}\n\n/**\n * Get a list of segments of the specified mode\n * from a string\n *\n * @param  {Mode}   mode Segment mode\n * @param  {String} str  String to process\n * @return {Array}       Array of object with segments data\n */\nfunction getSegments (regex, mode, str) {\n  var segments = []\n  var result\n\n  while ((result = regex.exec(str)) !== null) {\n    segments.push({\n      data: result[0],\n      index: result.index,\n      mode: mode,\n      length: result[0].length\n    })\n  }\n\n  return segments\n}\n\n/**\n * Extracts a series of segments with the appropriate\n * modes from a string\n *\n * @param  {String} dataStr Input string\n * @return {Array}          Array of object with segments data\n */\nfunction getSegmentsFromString (dataStr) {\n  var numSegs = getSegments(Regex.NUMERIC, Mode.NUMERIC, dataStr)\n  var alphaNumSegs = getSegments(Regex.ALPHANUMERIC, Mode.ALPHANUMERIC, dataStr)\n  var byteSegs\n  var kanjiSegs\n\n  if (Utils.isKanjiModeEnabled()) {\n    byteSegs = getSegments(Regex.BYTE, Mode.BYTE, dataStr)\n    kanjiSegs = getSegments(Regex.KANJI, Mode.KANJI, dataStr)\n  } else {\n    byteSegs = getSegments(Regex.BYTE_KANJI, Mode.BYTE, dataStr)\n    kanjiSegs = []\n  }\n\n  var segs = numSegs.concat(alphaNumSegs, byteSegs, kanjiSegs)\n\n  return segs\n    .sort(function (s1, s2) {\n      return s1.index - s2.index\n    })\n    .map(function (obj) {\n      return {\n        data: obj.data,\n        mode: obj.mode,\n        length: obj.length\n      }\n    })\n}\n\n/**\n * Returns how many bits are needed to encode a string of\n * specified length with the specified mode\n *\n * @param  {Number} length String length\n * @param  {Mode} mode     Segment mode\n * @return {Number}        Bit length\n */\nfunction getSegmentBitsLength (length, mode) {\n  switch (mode) {\n    case Mode.NUMERIC:\n      return NumericData.getBitsLength(length)\n    case Mode.ALPHANUMERIC:\n      return AlphanumericData.getBitsLength(length)\n    case Mode.KANJI:\n      return KanjiData.getBitsLength(length)\n    case Mode.BYTE:\n      return ByteData.getBitsLength(length)\n  }\n}\n\n/**\n * Merges adjacent segments which have the same mode\n *\n * @param  {Array} segs Array of object with segments data\n * @return {Array}      Array of object with segments data\n */\nfunction mergeSegments (segs) {\n  return segs.reduce(function (acc, curr) {\n    var prevSeg = acc.length - 1 >= 0 ? acc[acc.length - 1] : null\n    if (prevSeg && prevSeg.mode === curr.mode) {\n      acc[acc.length - 1].data += curr.data\n      return acc\n    }\n\n    acc.push(curr)\n    return acc\n  }, [])\n}\n\n/**\n * Generates a list of all possible nodes combination which\n * will be used to build a segments graph.\n *\n * Nodes are divided by groups. Each group will contain a list of all the modes\n * in which is possible to encode the given text.\n *\n * For example the text '12345' can be encoded as Numeric, Alphanumeric or Byte.\n * The group for '12345' will contain then 3 objects, one for each\n * possible encoding mode.\n *\n * Each node represents a possible segment.\n *\n * @param  {Array} segs Array of object with segments data\n * @return {Array}      Array of object with segments data\n */\nfunction buildNodes (segs) {\n  var nodes = []\n  for (var i = 0; i < segs.length; i++) {\n    var seg = segs[i]\n\n    switch (seg.mode) {\n      case Mode.NUMERIC:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.ALPHANUMERIC, length: seg.length },\n          { data: seg.data, mode: Mode.BYTE, length: seg.length }\n        ])\n        break\n      case Mode.ALPHANUMERIC:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.BYTE, length: seg.length }\n        ])\n        break\n      case Mode.KANJI:\n        nodes.push([seg,\n          { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }\n        ])\n        break\n      case Mode.BYTE:\n        nodes.push([\n          { data: seg.data, mode: Mode.BYTE, length: getStringByteLength(seg.data) }\n        ])\n    }\n  }\n\n  return nodes\n}\n\n/**\n * Builds a graph from a list of nodes.\n * All segments in each node group will be connected with all the segments of\n * the next group and so on.\n *\n * At each connection will be assigned a weight depending on the\n * segment's byte length.\n *\n * @param  {Array} nodes    Array of object with segments data\n * @param  {Number} version QR Code version\n * @return {Object}         Graph of all possible segments\n */\nfunction buildGraph (nodes, version) {\n  var table = {}\n  var graph = {'start': {}}\n  var prevNodeIds = ['start']\n\n  for (var i = 0; i < nodes.length; i++) {\n    var nodeGroup = nodes[i]\n    var currentNodeIds = []\n\n    for (var j = 0; j < nodeGroup.length; j++) {\n      var node = nodeGroup[j]\n      var key = '' + i + j\n\n      currentNodeIds.push(key)\n      table[key] = { node: node, lastCount: 0 }\n      graph[key] = {}\n\n      for (var n = 0; n < prevNodeIds.length; n++) {\n        var prevNodeId = prevNodeIds[n]\n\n        if (table[prevNodeId] && table[prevNodeId].node.mode === node.mode) {\n          graph[prevNodeId][key] =\n            getSegmentBitsLength(table[prevNodeId].lastCount + node.length, node.mode) -\n            getSegmentBitsLength(table[prevNodeId].lastCount, node.mode)\n\n          table[prevNodeId].lastCount += node.length\n        } else {\n          if (table[prevNodeId]) table[prevNodeId].lastCount = node.length\n\n          graph[prevNodeId][key] = getSegmentBitsLength(node.length, node.mode) +\n            4 + Mode.getCharCountIndicator(node.mode, version) // switch cost\n        }\n      }\n    }\n\n    prevNodeIds = currentNodeIds\n  }\n\n  for (n = 0; n < prevNodeIds.length; n++) {\n    graph[prevNodeIds[n]]['end'] = 0\n  }\n\n  return { map: graph, table: table }\n}\n\n/**\n * Builds a segment from a specified data and mode.\n * If a mode is not specified, the more suitable will be used.\n *\n * @param  {String} data             Input data\n * @param  {Mode | String} modesHint Data mode\n * @return {Segment}                 Segment\n */\nfunction buildSingleSegment (data, modesHint) {\n  var mode\n  var bestMode = Mode.getBestModeForData(data)\n\n  mode = Mode.from(modesHint, bestMode)\n\n  // Make sure data can be encoded\n  if (mode !== Mode.BYTE && mode.bit < bestMode.bit) {\n    throw new Error('\"' + data + '\"' +\n      ' cannot be encoded with mode ' + Mode.toString(mode) +\n      '.\\n Suggested mode is: ' + Mode.toString(bestMode))\n  }\n\n  // Use Mode.BYTE if Kanji support is disabled\n  if (mode === Mode.KANJI && !Utils.isKanjiModeEnabled()) {\n    mode = Mode.BYTE\n  }\n\n  switch (mode) {\n    case Mode.NUMERIC:\n      return new NumericData(data)\n\n    case Mode.ALPHANUMERIC:\n      return new AlphanumericData(data)\n\n    case Mode.KANJI:\n      return new KanjiData(data)\n\n    case Mode.BYTE:\n      return new ByteData(data)\n  }\n}\n\n/**\n * Builds a list of segments from an array.\n * Array can contain Strings or Objects with segment's info.\n *\n * For each item which is a string, will be generated a segment with the given\n * string and the more appropriate encoding mode.\n *\n * For each item which is an object, will be generated a segment with the given\n * data and mode.\n * Objects must contain at least the property \"data\".\n * If property \"mode\" is not present, the more suitable mode will be used.\n *\n * @param  {Array} array Array of objects with segments data\n * @return {Array}       Array of Segments\n */\nexports.fromArray = function fromArray (array) {\n  return array.reduce(function (acc, seg) {\n    if (typeof seg === 'string') {\n      acc.push(buildSingleSegment(seg, null))\n    } else if (seg.data) {\n      acc.push(buildSingleSegment(seg.data, seg.mode))\n    }\n\n    return acc\n  }, [])\n}\n\n/**\n * Builds an optimized sequence of segments from a string,\n * which will produce the shortest possible bitstream.\n *\n * @param  {String} data    Input string\n * @param  {Number} version QR Code version\n * @return {Array}          Array of segments\n */\nexports.fromString = function fromString (data, version) {\n  var segs = getSegmentsFromString(data, Utils.isKanjiModeEnabled())\n\n  var nodes = buildNodes(segs)\n  var graph = buildGraph(nodes, version)\n  var path = dijkstra.find_path(graph.map, 'start', 'end')\n\n  var optimizedSegs = []\n  for (var i = 1; i < path.length - 1; i++) {\n    optimizedSegs.push(graph.table[path[i]].node)\n  }\n\n  return exports.fromArray(mergeSegments(optimizedSegs))\n}\n\n/**\n * Splits a string in various segments with the modes which\n * best represent their content.\n * The produced segments are far from being optimized.\n * The output of this function is only used to estimate a QR Code version\n * which may contain the data.\n *\n * @param  {string} data Input string\n * @return {Array}       Array of segments\n */\nexports.rawSplit = function rawSplit (data) {\n  return exports.fromArray(\n    getSegmentsFromString(data, Utils.isKanjiModeEnabled())\n  )\n}\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $filter = require('../internals/array-iteration').filter;\nvar fromSpeciesAndList = require('../internals/typed-array-from-species-and-list');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.filter` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.filter\nexportTypedArrayMethod('filter', function filter(callbackfn /* , thisArg */) {\n  var list = $filter(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  return fromSpeciesAndList(this, list);\n});\n","var Utils = require('./utils')\nvar ECCode = require('./error-correction-code')\nvar ECLevel = require('./error-correction-level')\nvar Mode = require('./mode')\nvar VersionCheck = require('./version-check')\nvar isArray = require('isarray')\n\n// Generator polynomial used to encode version information\nvar G18 = (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0)\nvar G18_BCH = Utils.getBCHDigit(G18)\n\nfunction getBestVersionForDataLength (mode, length, errorCorrectionLevel) {\n  for (var currentVersion = 1; currentVersion <= 40; currentVersion++) {\n    if (length <= exports.getCapacity(currentVersion, errorCorrectionLevel, mode)) {\n      return currentVersion\n    }\n  }\n\n  return undefined\n}\n\nfunction getReservedBitsCount (mode, version) {\n  // Character count indicator + mode indicator bits\n  return Mode.getCharCountIndicator(mode, version) + 4\n}\n\nfunction getTotalBitsFromDataArray (segments, version) {\n  var totalBits = 0\n\n  segments.forEach(function (data) {\n    var reservedBits = getReservedBitsCount(data.mode, version)\n    totalBits += reservedBits + data.getBitsLength()\n  })\n\n  return totalBits\n}\n\nfunction getBestVersionForMixedData (segments, errorCorrectionLevel) {\n  for (var currentVersion = 1; currentVersion <= 40; currentVersion++) {\n    var length = getTotalBitsFromDataArray(segments, currentVersion)\n    if (length <= exports.getCapacity(currentVersion, errorCorrectionLevel, Mode.MIXED)) {\n      return currentVersion\n    }\n  }\n\n  return undefined\n}\n\n/**\n * Returns version number from a value.\n * If value is not a valid version, returns defaultValue\n *\n * @param  {Number|String} value        QR Code version\n * @param  {Number}        defaultValue Fallback value\n * @return {Number}                     QR Code version number\n */\nexports.from = function from (value, defaultValue) {\n  if (VersionCheck.isValid(value)) {\n    return parseInt(value, 10)\n  }\n\n  return defaultValue\n}\n\n/**\n * Returns how much data can be stored with the specified QR code version\n * and error correction level\n *\n * @param  {Number} version              QR Code version (1-40)\n * @param  {Number} errorCorrectionLevel Error correction level\n * @param  {Mode}   mode                 Data mode\n * @return {Number}                      Quantity of storable data\n */\nexports.getCapacity = function getCapacity (version, errorCorrectionLevel, mode) {\n  if (!VersionCheck.isValid(version)) {\n    throw new Error('Invalid QR Code version')\n  }\n\n  // Use Byte mode as default\n  if (typeof mode === 'undefined') mode = Mode.BYTE\n\n  // Total codewords for this QR code version (Data + Error correction)\n  var totalCodewords = Utils.getSymbolTotalCodewords(version)\n\n  // Total number of error correction codewords\n  var ecTotalCodewords = ECCode.getTotalCodewordsCount(version, errorCorrectionLevel)\n\n  // Total number of data codewords\n  var dataTotalCodewordsBits = (totalCodewords - ecTotalCodewords) * 8\n\n  if (mode === Mode.MIXED) return dataTotalCodewordsBits\n\n  var usableBits = dataTotalCodewordsBits - getReservedBitsCount(mode, version)\n\n  // Return max number of storable codewords\n  switch (mode) {\n    case Mode.NUMERIC:\n      return Math.floor((usableBits / 10) * 3)\n\n    case Mode.ALPHANUMERIC:\n      return Math.floor((usableBits / 11) * 2)\n\n    case Mode.KANJI:\n      return Math.floor(usableBits / 13)\n\n    case Mode.BYTE:\n    default:\n      return Math.floor(usableBits / 8)\n  }\n}\n\n/**\n * Returns the minimum version needed to contain the amount of data\n *\n * @param  {Segment} data                    Segment of data\n * @param  {Number} [errorCorrectionLevel=H] Error correction level\n * @param  {Mode} mode                       Data mode\n * @return {Number}                          QR Code version\n */\nexports.getBestVersionForData = function getBestVersionForData (data, errorCorrectionLevel) {\n  var seg\n\n  var ecl = ECLevel.from(errorCorrectionLevel, ECLevel.M)\n\n  if (isArray(data)) {\n    if (data.length > 1) {\n      return getBestVersionForMixedData(data, ecl)\n    }\n\n    if (data.length === 0) {\n      return 1\n    }\n\n    seg = data[0]\n  } else {\n    seg = data\n  }\n\n  return getBestVersionForDataLength(seg.mode, seg.getLength(), ecl)\n}\n\n/**\n * Returns version information with relative error correction bits\n *\n * The version information is included in QR Code symbols of version 7 or larger.\n * It consists of an 18-bit sequence containing 6 data bits,\n * with 12 error correction bits calculated using the (18, 6) Golay code.\n *\n * @param  {Number} version QR Code version\n * @return {Number}         Encoded version info bits\n */\nexports.getEncodedBits = function getEncodedBits (version) {\n  if (!VersionCheck.isValid(version) || version < 7) {\n    throw new Error('Invalid QR Code version')\n  }\n\n  var d = version << 12\n\n  while (Utils.getBCHDigit(d) - G18_BCH >= 0) {\n    d ^= (G18 << (Utils.getBCHDigit(d) - G18_BCH))\n  }\n\n  return (version << 12) | d\n}\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $reduce = require('../internals/array-reduce').left;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduce\nexportTypedArrayMethod('reduce', function reduce(callbackfn /* , initialValue */) {\n  return $reduce(aTypedArray(this), callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar floor = Math.floor;\n\n// `%TypedArray%.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reverse\nexportTypedArrayMethod('reverse', function reverse() {\n  var that = this;\n  var length = aTypedArray(that).length;\n  var middle = floor(length / 2);\n  var index = 0;\n  var value;\n  while (index < middle) {\n    value = that[index];\n    that[index++] = that[--length];\n    that[length] = value;\n  } return that;\n});\n","module.exports = __webpack_public_path__ + \"img/logo.a9d27cdd.png\";","\nvar canPromise = require('./can-promise')\n\nvar QRCode = require('./core/qrcode')\nvar CanvasRenderer = require('./renderer/canvas')\nvar SvgRenderer = require('./renderer/svg-tag.js')\n\nfunction renderCanvas (renderFunc, canvas, text, opts, cb) {\n  var args = [].slice.call(arguments, 1)\n  var argsNum = args.length\n  var isLastArgCb = typeof args[argsNum - 1] === 'function'\n\n  if (!isLastArgCb && !canPromise()) {\n    throw new Error('Callback required as last argument')\n  }\n\n  if (isLastArgCb) {\n    if (argsNum < 2) {\n      throw new Error('Too few arguments provided')\n    }\n\n    if (argsNum === 2) {\n      cb = text\n      text = canvas\n      canvas = opts = undefined\n    } else if (argsNum === 3) {\n      if (canvas.getContext && typeof cb === 'undefined') {\n        cb = opts\n        opts = undefined\n      } else {\n        cb = opts\n        opts = text\n        text = canvas\n        canvas = undefined\n      }\n    }\n  } else {\n    if (argsNum < 1) {\n      throw new Error('Too few arguments provided')\n    }\n\n    if (argsNum === 1) {\n      text = canvas\n      canvas = opts = undefined\n    } else if (argsNum === 2 && !canvas.getContext) {\n      opts = text\n      text = canvas\n      canvas = undefined\n    }\n\n    return new Promise(function (resolve, reject) {\n      try {\n        var data = QRCode.create(text, opts)\n        resolve(renderFunc(data, canvas, opts))\n      } catch (e) {\n        reject(e)\n      }\n    })\n  }\n\n  try {\n    var data = QRCode.create(text, opts)\n    cb(null, renderFunc(data, canvas, opts))\n  } catch (e) {\n    cb(e)\n  }\n}\n\nexports.create = QRCode.create\nexports.toCanvas = renderCanvas.bind(null, CanvasRenderer.render)\nexports.toDataURL = renderCanvas.bind(null, CanvasRenderer.renderToDataURL)\n\n// only svg for now.\nexports.toString = renderCanvas.bind(null, function (data, _, opts) {\n  return SvgRenderer.render(data, opts)\n})\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $find = require('../internals/array-iteration').find;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.find` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.find\nexportTypedArrayMethod('find', function find(predicate /* , thisArg */) {\n  return $find(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","var aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.foreach\nexportTypedArrayMethod('forEach', function forEach(callbackfn /* , thisArg */) {\n  $forEach(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n","/**\n * Alignment pattern are fixed reference pattern in defined positions\n * in a matrix symbology, which enables the decode software to re-synchronise\n * the coordinate mapping of the image modules in the event of moderate amounts\n * of distortion of the image.\n *\n * Alignment patterns are present only in QR Code symbols of version 2 or larger\n * and their number depends on the symbol version.\n */\n\nvar getSymbolSize = require('./utils').getSymbolSize\n\n/**\n * Calculate the row/column coordinates of the center module of each alignment pattern\n * for the specified QR Code version.\n *\n * The alignment patterns are positioned symmetrically on either side of the diagonal\n * running from the top left corner of the symbol to the bottom right corner.\n *\n * Since positions are simmetrical only half of the coordinates are returned.\n * Each item of the array will represent in turn the x and y coordinate.\n * @see {@link getPositions}\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinate\n */\nexports.getRowColCoords = function getRowColCoords (version) {\n  if (version === 1) return []\n\n  var posCount = Math.floor(version / 7) + 2\n  var size = getSymbolSize(version)\n  var intervals = size === 145 ? 26 : Math.ceil((size - 13) / (2 * posCount - 2)) * 2\n  var positions = [size - 7] // Last coord is always (size - 7)\n\n  for (var i = 1; i < posCount - 1; i++) {\n    positions[i] = positions[i - 1] - intervals\n  }\n\n  positions.push(6) // First coord is always 6\n\n  return positions.reverse()\n}\n\n/**\n * Returns an array containing the positions of each alignment pattern.\n * Each array's element represent the center point of the pattern as (x, y) coordinates\n *\n * Coordinates are calculated expanding the row/column coordinates returned by {@link getRowColCoords}\n * and filtering out the items that overlaps with finder pattern\n *\n * @example\n * For a Version 7 symbol {@link getRowColCoords} returns values 6, 22 and 38.\n * The alignment patterns, therefore, are to be centered on (row, column)\n * positions (6,22), (22,6), (22,22), (22,38), (38,22), (38,38).\n * Note that the coordinates (6,6), (6,38), (38,6) are occupied by finder patterns\n * and are not therefore used for alignment patterns.\n *\n * var pos = getPositions(7)\n * // [[6,22], [22,6], [22,22], [22,38], [38,22], [38,38]]\n *\n * @param  {Number} version QR Code version\n * @return {Array}          Array of coordinates\n */\nexports.getPositions = function getPositions (version) {\n  var coords = []\n  var pos = exports.getRowColCoords(version)\n  var posLength = pos.length\n\n  for (var i = 0; i < posLength; i++) {\n    for (var j = 0; j < posLength; j++) {\n      // Skip if position is occupied by finder patterns\n      if ((i === 0 && j === 0) ||             // top-left\n          (i === 0 && j === posLength - 1) || // bottom-left\n          (i === posLength - 1 && j === 0)) { // top-right\n        continue\n      }\n\n      coords.push([pos[i], pos[j]])\n    }\n  }\n\n  return coords\n}\n","var Mode = require('./mode')\n\nfunction NumericData (data) {\n  this.mode = Mode.NUMERIC\n  this.data = data.toString()\n}\n\nNumericData.getBitsLength = function getBitsLength (length) {\n  return 10 * Math.floor(length / 3) + ((length % 3) ? ((length % 3) * 3 + 1) : 0)\n}\n\nNumericData.prototype.getLength = function getLength () {\n  return this.data.length\n}\n\nNumericData.prototype.getBitsLength = function getBitsLength () {\n  return NumericData.getBitsLength(this.data.length)\n}\n\nNumericData.prototype.write = function write (bitBuffer) {\n  var i, group, value\n\n  // The input data string is divided into groups of three digits,\n  // and each group is converted to its 10-bit binary equivalent.\n  for (i = 0; i + 3 <= this.data.length; i += 3) {\n    group = this.data.substr(i, 3)\n    value = parseInt(group, 10)\n\n    bitBuffer.put(value, 10)\n  }\n\n  // If the number of input digits is not an exact multiple of three,\n  // the final one or two digits are converted to 4 or 7 bits respectively.\n  var remainingNum = this.data.length - i\n  if (remainingNum > 0) {\n    group = this.data.substr(i)\n    value = parseInt(group, 10)\n\n    bitBuffer.put(value, remainingNum * 3 + 1)\n  }\n}\n\nmodule.exports = NumericData\n","/**\n * Returns:\n *  - 'null' if the node is not attached to the DOM\n *  - the root node (HTMLDocument | ShadowRoot) otherwise\n */\nexport function attachedRoot (node: Node): null | HTMLDocument | ShadowRoot {\n  /* istanbul ignore next */\n  if (typeof node.getRootNode !== 'function') {\n    // Shadow DOM not supported (IE11), lets find the root of this node\n    while (node.parentNode) node = node.parentNode\n\n    // The root parent is the document if the node is attached to the DOM\n    if (node !== document) return null\n\n    return document\n  }\n\n  const root = node.getRootNode()\n\n  // The composed root node is the document if the node is attached to the DOM\n  if (root !== document && root.getRootNode({ composed: true }) !== document) return null\n\n  return root as HTMLDocument | ShadowRoot\n}\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-1 hash algorithm.\n\t     */\n\t    var SHA1 = C_algo.SHA1 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476,\n\t                0xc3d2e1f0\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\n\t            // Computation\n\t            for (var i = 0; i < 80; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var n = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n\t                    W[i] = (n << 1) | (n >>> 31);\n\t                }\n\n\t                var t = ((a << 5) | (a >>> 27)) + e + W[i];\n\t                if (i < 20) {\n\t                    t += ((b & c) | (~b & d)) + 0x5a827999;\n\t                } else if (i < 40) {\n\t                    t += (b ^ c ^ d) + 0x6ed9eba1;\n\t                } else if (i < 60) {\n\t                    t += ((b & c) | (b & d) | (c & d)) - 0x70e44324;\n\t                } else /* if (i < 80) */ {\n\t                    t += (b ^ c ^ d) - 0x359d3e2a;\n\t                }\n\n\t                e = d;\n\t                d = c;\n\t                c = (b << 30) | (b >>> 2);\n\t                b = a;\n\t                a = t;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA1('message');\n\t     *     var hash = CryptoJS.SHA1(wordArray);\n\t     */\n\t    C.SHA1 = Hasher._createHelper(SHA1);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA1(message, key);\n\t     */\n\t    C.HmacSHA1 = Hasher._createHmacHelper(SHA1);\n\t}());\n\n\n\treturn CryptoJS.SHA1;\n\n}));","module.exports = function (Constructor, list) {\n  var index = 0;\n  var length = list.length;\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","import './VAvatar.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Measurable from '../../mixins/measurable'\nimport Roundable from '../../mixins/roundable'\n\n// Utilities\nimport { convertToUnit } from '../../util/helpers'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\nexport default mixins(\n  Colorable,\n  Measurable,\n  Roundable,\n  /* @vue/component */\n).extend({\n  name: 'v-avatar',\n\n  props: {\n    left: Boolean,\n    right: Boolean,\n    size: {\n      type: [Number, String],\n      default: 48,\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-avatar--left': this.left,\n        'v-avatar--right': this.right,\n        ...this.roundedClasses,\n      }\n    },\n    styles (): object {\n      return {\n        height: convertToUnit(this.size),\n        minWidth: convertToUnit(this.size),\n        width: convertToUnit(this.size),\n        ...this.measurableStyles,\n      }\n    },\n  },\n\n  render (h): VNode {\n    const data = {\n      staticClass: 'v-avatar',\n      class: this.classes,\n      style: this.styles,\n      on: this.$listeners,\n    }\n\n    return h('div', this.setBackgroundColor(this.color, data), this.$slots.default)\n  },\n})\n","import VAvatar from './VAvatar'\n\nexport { VAvatar }\nexport default VAvatar\n","// Types\nimport { BreakpointName } from 'vuetify/types/services/breakpoint'\nimport { deprecate } from '../../util/console'\nimport Vue, { PropType } from 'vue'\n\n/* @vue/component */\nexport default Vue.extend({\n  name: 'mobile',\n\n  props: {\n    mobileBreakpoint: {\n      type: [Number, String] as PropType<number | BreakpointName>,\n      default (): number | BreakpointName | undefined {\n        // Avoid destroying unit\n        // tests for users\n        return this.$vuetify\n          ? this.$vuetify.breakpoint.mobileBreakpoint\n          : undefined\n      },\n      validator: v => (\n        !isNaN(Number(v)) ||\n        ['xs', 'sm', 'md', 'lg', 'xl'].includes(String(v))\n      ),\n    },\n  },\n\n  computed: {\n    isMobile (): boolean {\n      const {\n        mobile,\n        width,\n        name,\n        mobileBreakpoint,\n      } = this.$vuetify.breakpoint\n\n      // Check if local mobileBreakpoint matches\n      // the application's mobileBreakpoint\n      if (mobileBreakpoint === this.mobileBreakpoint) return mobile\n\n      const mobileWidth = parseInt(this.mobileBreakpoint, 10)\n      const isNumber = !isNaN(mobileWidth)\n\n      return isNumber\n        ? width < mobileWidth\n        : name === this.mobileBreakpoint\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('mobile-break-point')) {\n      deprecate('mobile-break-point', 'mobile-breakpoint', this)\n    }\n  },\n})\n","// Styles\nimport './VBanner.sass'\n\n// Extensions\nimport VSheet from '../VSheet'\n\n// Components\nimport VAvatar from '../VAvatar'\nimport VIcon from '../VIcon'\nimport { VExpandTransition } from '../transitions'\n\n// Mixins\nimport Mobile from '../../mixins/mobile'\nimport Toggleable from '../../mixins/toggleable'\n\n// Utilities\nimport mixins from '../../util/mixins'\nimport {\n  convertToUnit,\n  getSlot,\n} from '../../util/helpers'\n\n// Typeslint\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default mixins(\n  VSheet,\n  Mobile,\n  Toggleable\n).extend({\n  name: 'v-banner',\n\n  inheritAttrs: false,\n\n  props: {\n    app: Boolean,\n    icon: String,\n    iconColor: String,\n    singleLine: Boolean,\n    sticky: Boolean,\n    value: {\n      type: Boolean,\n      default: true,\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VSheet.options.computed.classes.call(this),\n        'v-banner--has-icon': this.hasIcon,\n        'v-banner--is-mobile': this.isMobile,\n        'v-banner--single-line': this.singleLine,\n        'v-banner--sticky': this.isSticky,\n      }\n    },\n    hasIcon (): boolean {\n      return Boolean(this.icon || this.$slots.icon)\n    },\n    isSticky (): boolean {\n      return this.sticky || this.app\n    },\n    styles (): object {\n      const styles: Record<string, any> = { ...VSheet.options.computed.styles.call(this) }\n\n      if (this.isSticky) {\n        const top = !this.app\n          ? 0\n          : (this.$vuetify.application.bar + this.$vuetify.application.top)\n\n        styles.top = convertToUnit(top)\n        styles.position = 'sticky'\n        styles.zIndex = 1\n      }\n\n      return styles\n    },\n  },\n\n  methods: {\n    /** @public */\n    toggle () {\n      this.isActive = !this.isActive\n    },\n    iconClick (e: MouseEvent) {\n      this.$emit('click:icon', e)\n    },\n    genIcon () {\n      if (!this.hasIcon) return undefined\n\n      let content\n\n      if (this.icon) {\n        content = this.$createElement(VIcon, {\n          props: {\n            color: this.iconColor,\n            size: 28,\n          },\n        }, [this.icon])\n      } else {\n        content = this.$slots.icon\n      }\n\n      return this.$createElement(VAvatar, {\n        staticClass: 'v-banner__icon',\n        props: {\n          color: this.color,\n          size: 40,\n        },\n        on: {\n          click: this.iconClick,\n        },\n      }, [content])\n    },\n    genText () {\n      return this.$createElement('div', {\n        staticClass: 'v-banner__text',\n      }, this.$slots.default)\n    },\n    genActions () {\n      const children = getSlot(this, 'actions', {\n        dismiss: () => this.isActive = false,\n      })\n\n      if (!children) return undefined\n\n      return this.$createElement('div', {\n        staticClass: 'v-banner__actions',\n      }, children)\n    },\n    genContent () {\n      return this.$createElement('div', {\n        staticClass: 'v-banner__content',\n      }, [\n        this.genIcon(),\n        this.genText(),\n      ])\n    },\n    genWrapper () {\n      return this.$createElement('div', {\n        staticClass: 'v-banner__wrapper',\n      }, [\n        this.genContent(),\n        this.genActions(),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    return h(VExpandTransition, [\n      h('div', this.setBackgroundColor(this.color, {\n        staticClass: 'v-banner',\n        attrs: this.attrs$,\n        class: this.classes,\n        style: this.styles,\n        directives: [{\n          name: 'show',\n          value: this.isActive,\n        }],\n      }), [this.genWrapper()]),\n    ])\n  },\n})\n","'use strict';\n/* eslint-disable es/no-array-prototype-lastindexof -- safe */\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar min = Math.min;\nvar $lastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$lastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return $lastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = lengthOfArrayLike(O);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toIntegerOrInfinity(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : $lastIndexOf;\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $indexOf = require('../internals/array-includes').indexOf;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.indexof\nexportTypedArrayMethod('indexOf', function indexOf(searchElement /* , fromIndex */) {\n  return $indexOf(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n});\n","var isObject = require('../internals/is-object');\n\nvar floor = Math.floor;\n\n// `IsIntegralNumber` abstract operation\n// https://tc39.es/ecma262/#sec-isintegralnumber\n// eslint-disable-next-line es/no-number-isinteger -- safe\nmodule.exports = Number.isInteger || function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-native');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\n\nvar Int8Array = global.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = global.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar isPrototypeOf = ObjectPrototype.isPrototypeOf;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = uid('TYPED_ARRAY_CONSTRUCTOR');\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf.call(TypedArray, C))) return C;\n  throw TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) { /* empty */ }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    redefine(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = global[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return redefine(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      redefine(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) createNonEnumerableProperty(Prototype, TYPED_ARRAY_CONSTRUCTOR, Constructor);\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) createNonEnumerableProperty(Prototype, TYPED_ARRAY_CONSTRUCTOR, Constructor);\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQIRED = true;\n  defineProperty(TypedArrayPrototype, TO_STRING_TAG, { get: function () {\n    return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n  } });\n  for (NAME in TypedArrayConstructorsList) if (global[NAME]) {\n    createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_CONSTRUCTOR: TYPED_ARRAY_CONSTRUCTOR,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"bg\",attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"flex\":\"\",\"align-center\":\"\",\"justify-center\":\"\",\"color\":\"bg\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm4\":\"\",\"elevation-0\":\"\",\"color\":\"bg\"}},[_c('v-card',{attrs:{\"color\":\"bg\"}},[_c('v-toolbar',{staticStyle:{\"box-shadow\":\"none\"},attrs:{\"color\":\"bg\",\"elevation-0\":\"\"}},[_c('v-img',{staticClass:\"mx-auto\",attrs:{\"max-height\":\"50\",\"max-width\":\"100\",\"src\":require('../assets/logo.png')}})],1),_c('div',{staticClass:\"d-flex justify-center mb-6\"},[_c('v-banner',{staticClass:\"text-h5\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"About\"))+\" \"+_vm._s(_vm.appData.appName)+\" \")])],1),_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('tbody',_vm._l((_vm.items),function(item){return _c('tr',{key:item.name,staticClass:\"bg\"},[_c('td',[_vm._v(_vm._s(item.name))]),_c('td',[_vm._v(_vm._s(item.value))])])}),0)]},proxy:true}])}),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.back()}}},[_vm._v(_vm._s(_vm.$t(\"Back\")))]),(_vm.appData.email)?_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"warning\"},on:{\"click\":function($event){return _vm.logout()}}},[_vm._v(_vm._s(_vm.$t(\"Logout user\")))]):_vm._e(),_c('v-btn',{staticClass:\"ma-4\",attrs:{\"color\":\"error\"},on:{\"click\":function($event){_vm.dialog = true}}},[_vm._v(_vm._s(_vm.$t(\"Delete all user data\")))])],1)],1)],1)],1),_c('v-snackbar',{attrs:{\"timeout\":2000},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._b({attrs:{\"color\":\"info\",\"text\":\"\"},on:{\"click\":function($event){_vm.snackbarSave = false}}},'v-btn',attrs,false),[_vm._v(\" Close \")])]}}]),model:{value:(_vm.snackbarSave),callback:function ($$v) {_vm.snackbarSave=$$v},expression:\"snackbarSave\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\" \")]),_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"290\",\"overlay-color\":\"bg\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" \"+_vm._s(_vm.$t(\"Delete all user data\"))+\" \")]),_c('v-card-text',[_vm._v(\" \"+_vm._s(_vm.$t(\"Are you sure you want to delete all user data from this client?\"))+\" \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"warning\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.deleteOK}},[_vm._v(\" OK \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid fill-height class=\"bg\">\n    <v-layout flex align-center justify-center color=\"bg\">\n      <v-flex xs12 sm4 elevation-0 color=\"bg\">\n        <v-card color=\"bg\">\n          <v-toolbar color=\"bg\" elevation-0 style=\"box-shadow: none\">\n            <v-img\n              class=\"mx-auto\"\n              max-height=\"50\"\n              max-width=\"100\"\n              :src=\"require('../assets/logo.png')\"\n            ></v-img>\n          </v-toolbar>\n          <div class=\"d-flex justify-center mb-6\">\n            <v-banner class=\"text-h5\">\n              {{ $t(\"About\") }} {{ appData.appName }}\n            </v-banner>\n          </div>\n\n          <v-simple-table>\n            <template v-slot:default>\n              <tbody>\n                <tr v-for=\"item in items\" :key=\"item.name\" class=\"bg\">\n                  <td>{{ item.name }}</td>\n                  <td>{{ item.value }}</td>\n                </tr>\n              </tbody>\n            </template>\n          </v-simple-table>\n          <v-row justify=\"center\">\n            <v-btn class=\"ma-4\" color=\"primary\" @click=\"back()\">{{\n              $t(\"Back\")\n            }}</v-btn>\n            <v-btn class=\"ma-4\" color=\"warning\" v-if=\"appData.email\"  @click=\"logout()\">{{\n              $t(\"Logout user\")\n            }}</v-btn>\n            <v-btn class=\"ma-4\" color=\"error\" @click=\"dialog = true\">{{\n              $t(\"Delete all user data\")\n            }}</v-btn>\n          </v-row>\n        </v-card>\n      </v-flex></v-layout\n    >\n    <v-snackbar v-model=\"snackbarSave\" :timeout=\"2000\">\n      {{ snackbarText }}\n\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn color=\"info\" text v-bind=\"attrs\" @click=\"snackbarSave = false\">\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n    <v-dialog v-model=\"dialog\" persistent max-width=\"290\" overlay-color=\"bg\">\n      <v-card>\n        <v-card-title>\n          {{ $t(\"Delete all user data\") }}\n        </v-card-title>\n        <v-card-text>\n          {{\n            $t(\"Are you sure you want to delete all user data from this client?\")\n          }}\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"warning\" @click=\"dialog = false\"> Cancel </v-btn>\n          <v-btn color=\"primary\" @click=\"deleteOK\"> OK </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport appData from \"../modules/appData\";\nimport appUtils from \"../modules/appUtils\";\nimport Bowser from \"bowser\";\n\nexport default {\n  name: \"Home\",\n  data: () => ({\n    langs: [\"iw\", \"en\"],\n    items: [],\n    dialog: false,\n    snackbarSave: false,\n    snackbarText: \"\",\n    appData,\n  }),\n  methods: {\n    deleteOK: function () {\n      this.dialog = false;\n      appData.deleteAll();\n      this.$router.push(\"/Splash\");\n    },\n    back: function () {\n      this.$router.push(\"/Splash\");\n    },\n    logout: function () {\n      //var url = mgmtURL + \"logoutUser?loginToken=\" + encodeURIComponent(loginToken);\n      console.log(\"Loggout user..\");\n      let params = {\n        loginToken: appData.loginToken,\n      };\n      appUtils\n        .get({\n          url: \"logoutUser\",\n          params,\n        })\n        .then((response) => {\n          console.log(response.data);\n          appData.clearValidate();\n          this.$router.push(\"/Splash\");\n          return;\n        })\n        .catch((error) => console.log(error))\n        .finally(() => (this.loading = false));\n        this.snackbarText = this.$t(\"Logout command has been sent\");\n        this.snackbarSave = true;\n    },\n  },\n  created: function () {\n    let bowser = Bowser.parse(navigator.userAgent);\n    this.items = [\n      {\n        name: this.$t(\"App name\"),\n        value: appData.appName,\n      },\n      {\n        name: this.$t(\"App version\"),\n        value: appData.appVersion,\n      },\n      {\n        name: this.$t(\"User ID\"),\n        value: appData.email,\n      },\n      {\n        name: this.$t(\"Device ID\"),\n        value: appData.deviceid,\n      },\n      {\n        name: this.$t(\"Browser\"),\n        value: `${bowser.browser.name} ${bowser.browser.version}`,\n      },\n      {\n        name: this.$t(\"Operating System\"),\n        value: `${bowser.os.name} ${bowser.os.version}`,\n      },\n    ];\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js&\"","import './VSimpleTable.sass'\n\nimport { convertToUnit } from '../../util/helpers'\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\nimport { VNode } from 'vue'\n\nexport default mixins(Themeable).extend({\n  name: 'v-simple-table',\n\n  props: {\n    dense: Boolean,\n    fixedHeader: Boolean,\n    height: [Number, String],\n  },\n\n  computed: {\n    classes (): Record<string, boolean> {\n      return {\n        'v-data-table--dense': this.dense,\n        'v-data-table--fixed-height': !!this.height && !this.fixedHeader,\n        'v-data-table--fixed-header': this.fixedHeader,\n        'v-data-table--has-top': !!this.$slots.top,\n        'v-data-table--has-bottom': !!this.$slots.bottom,\n        ...this.themeClasses,\n      }\n    },\n  },\n\n  methods: {\n    genWrapper () {\n      return this.$slots.wrapper || this.$createElement('div', {\n        staticClass: 'v-data-table__wrapper',\n        style: {\n          height: convertToUnit(this.height),\n        },\n      }, [\n        this.$createElement('table', this.$slots.default),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-data-table',\n      class: this.classes,\n    }, [\n      this.$slots.top,\n      this.genWrapper(),\n      this.$slots.bottom,\n    ])\n  },\n})\n","import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=20121520&\"\nimport script from \"./About.vue?vue&type=script&lang=js&\"\nexport * from \"./About.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBanner } from 'vuetify/lib/components/VBanner';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBanner,VBtn,VCard,VCardActions,VCardText,VCardTitle,VContainer,VDialog,VFlex,VImg,VLayout,VRow,VSimpleTable,VSnackbar,VSpacer,VToolbar})\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nmodule.exports = function (it) {\n  var result = toIntegerOrInfinity(it);\n  if (result < 0) throw RangeError(\"The argument can't be less than 0\");\n  return result;\n};\n"],"sourceRoot":""}